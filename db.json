{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","path":"css/noscript.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","path":"js/bookmark.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","path":"js/comments.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/config.js","path":"js/config.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","path":"js/motion.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","path":"js/next-boot.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","path":"js/pjax.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","path":"js/schedule.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","path":"js/sidebar.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","path":"js/third-party/addtoany.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","path":"js/third-party/analytics/matomo.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","path":"js/third-party/tags/wavedrom.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":1,"renderable":1},{"_id":"source/404.html","path":"404.html","modified":1,"renderable":0},{"_id":"source/favicon.ico","path":"favicon.ico","modified":1,"renderable":0},{"_id":"source/video/2.mp4","path":"video/2.mp4","modified":1,"renderable":0},{"_id":"source/video/3.mp4","path":"video/3.mp4","modified":1,"renderable":0},{"_id":"source/video/moto.mp4","path":"video/moto.mp4","modified":1,"renderable":0},{"_id":"source/video/smg-ddxyh.mp4","path":"video/smg-ddxyh.mp4","modified":1,"renderable":0},{"_id":"source/video/smg-pfysyh.mp4","path":"video/smg-pfysyh.mp4","modified":1,"renderable":0},{"_id":"source/video/smg-top.mp4","path":"video/smg-top.mp4","modified":1,"renderable":0},{"_id":"source/images/$◇a.webp","path":"images/$◇a.webp","modified":1,"renderable":0},{"_id":"source/images/-emo.webp","path":"images/-emo.webp","modified":1,"renderable":0},{"_id":"source/images/100mdjht.webp","path":"images/100mdjht.webp","modified":1,"renderable":0},{"_id":"source/images/2cospix.webp","path":"images/2cospix.webp","modified":1,"renderable":0},{"_id":"source/images/2quan.webp","path":"images/2quan.webp","modified":1,"renderable":0},{"_id":"source/images/AEIO.webp","path":"images/AEIO.webp","modified":1,"renderable":0},{"_id":"source/images/CBT-3.webp","path":"images/CBT-3.webp","modified":1,"renderable":0},{"_id":"source/images/MapReduce.webp","path":"images/MapReduce.webp","modified":1,"renderable":0},{"_id":"source/images/P-and-not-P.webp","path":"images/P-and-not-P.webp","modified":1,"renderable":0},{"_id":"source/images/P==Q.webp","path":"images/P==Q.webp","modified":1,"renderable":0},{"_id":"source/images/RSI.webp","path":"images/RSI.webp","modified":1,"renderable":0},{"_id":"source/images/about-1.webp","path":"images/about-1.webp","modified":1,"renderable":0},{"_id":"source/images/alpha-point.webp","path":"images/alpha-point.webp","modified":1,"renderable":0},{"_id":"source/images/daodulakang_end.webp","path":"images/daodulakang_end.webp","modified":1,"renderable":0},{"_id":"source/images/decision-tree.webp","path":"images/decision-tree.webp","modified":1,"renderable":0},{"_id":"source/images/desire-1.webp","path":"images/desire-1.webp","modified":1,"renderable":0},{"_id":"source/images/desire-2.webp","path":"images/desire-2.webp","modified":1,"renderable":0},{"_id":"source/images/desire-3.webp","path":"images/desire-3.webp","modified":1,"renderable":0},{"_id":"source/images/desire-4.webp","path":"images/desire-4.webp","modified":1,"renderable":0},{"_id":"source/images/dolphin.png","path":"images/dolphin.png","modified":1,"renderable":0},{"_id":"source/images/donate-blood-1.webp","path":"images/donate-blood-1.webp","modified":1,"renderable":0},{"_id":"source/images/donate-blood-2.webp","path":"images/donate-blood-2.webp","modified":1,"renderable":0},{"_id":"source/images/donate-organ.webp","path":"images/donate-organ.webp","modified":1,"renderable":0},{"_id":"source/images/ecliptic.jpg","path":"images/ecliptic.jpg","modified":1,"renderable":0},{"_id":"source/images/fish.webp","path":"images/fish.webp","modified":1,"renderable":0},{"_id":"source/images/hw-0.webp","path":"images/hw-0.webp","modified":1,"renderable":0},{"_id":"source/images/hw-1.webp","path":"images/hw-1.webp","modified":1,"renderable":0},{"_id":"source/images/hw-2.webp","path":"images/hw-2.webp","modified":1,"renderable":0},{"_id":"source/images/hw-3.webp","path":"images/hw-3.webp","modified":1,"renderable":0},{"_id":"source/images/life.webp","path":"images/life.webp","modified":1,"renderable":0},{"_id":"source/images/magisk.webp","path":"images/magisk.webp","modified":1,"renderable":0},{"_id":"source/images/moon.jpg","path":"images/moon.jpg","modified":1,"renderable":0},{"_id":"source/images/piano.webp","path":"images/piano.webp","modified":1,"renderable":0},{"_id":"source/images/platelet-collection.webp","path":"images/platelet-collection.webp","modified":1,"renderable":0},{"_id":"source/images/residual-error.webp","path":"images/residual-error.webp","modified":1,"renderable":0},{"_id":"source/images/rj45.webp","path":"images/rj45.webp","modified":1,"renderable":0},{"_id":"source/images/shuo.webp","path":"images/shuo.webp","modified":1,"renderable":0},{"_id":"source/images/wang.webp","path":"images/wang.webp","modified":1,"renderable":0},{"_id":"source/images/weierstrassa=0.5b=13.webp","path":"images/weierstrassa=0.5b=13.webp","modified":1,"renderable":0},{"_id":"source/images/what.webp","path":"images/what.webp","modified":1,"renderable":0},{"_id":"source/images/wii-remote-2.webp","path":"images/wii-remote-2.webp","modified":1,"renderable":0},{"_id":"source/images/wii-remote.webp","path":"images/wii-remote.webp","modified":1,"renderable":0},{"_id":"source/images/关系-0.webp","path":"images/关系-0.webp","modified":1,"renderable":0},{"_id":"source/images/关系-1.webp","path":"images/关系-1.webp","modified":1,"renderable":0},{"_id":"source/images/关系-2.webp","path":"images/关系-2.webp","modified":1,"renderable":0},{"_id":"source/images/函数-1.webp","path":"images/函数-1.webp","modified":1,"renderable":0},{"_id":"source/images/运算-1.webp","path":"images/运算-1.webp","modified":1,"renderable":0},{"_id":"source/images/运算-2.webp","path":"images/运算-2.webp","modified":1,"renderable":0},{"_id":"source/images/马斯洛需求金字塔.webp","path":"images/马斯洛需求金字塔.webp","modified":1,"renderable":0},{"_id":"source/images/打燕窝.webp","path":"images/打燕窝.webp","modified":1,"renderable":0},{"_id":"source/images/打燕窝地理位置.webp","path":"images/打燕窝地理位置.webp","modified":1,"renderable":0},{"_id":"source/images/game/4399-on-vscode-0.webp","path":"images/game/4399-on-vscode-0.webp","modified":1,"renderable":0},{"_id":"source/images/game/4399-on-vscode-2.webp","path":"images/game/4399-on-vscode-2.webp","modified":1,"renderable":0},{"_id":"source/images/game/C117.webp","path":"images/game/C117.webp","modified":1,"renderable":0},{"_id":"source/images/game/any.webp","path":"images/game/any.webp","modified":1,"renderable":0},{"_id":"source/images/game/belfry.webp","path":"images/game/belfry.webp","modified":1,"renderable":0},{"_id":"source/images/game/metal-slug.webp","path":"images/game/metal-slug.webp","modified":1,"renderable":0},{"_id":"source/images/game/paper-attack.gif","path":"images/game/paper-attack.gif","modified":1,"renderable":0},{"_id":"source/images/game/peace-1.webp","path":"images/game/peace-1.webp","modified":1,"renderable":0},{"_id":"source/images/game/4399-on-vscode-1.webp","path":"images/game/4399-on-vscode-1.webp","modified":1,"renderable":0},{"_id":"source/images/game/peace-2.webp","path":"images/game/peace-2.webp","modified":1,"renderable":0},{"_id":"source/images/game/pm-1.gif","path":"images/game/pm-1.gif","modified":1,"renderable":0},{"_id":"source/images/game/pm-2.webp","path":"images/game/pm-2.webp","modified":1,"renderable":0},{"_id":"source/images/game/river.webp","path":"images/game/river.webp","modified":1,"renderable":0},{"_id":"source/images/game/smg-cpu-efb.webp","path":"images/game/smg-cpu-efb.webp","modified":1,"renderable":0},{"_id":"source/images/game/smx.gif","path":"images/game/smx.gif","modified":1,"renderable":0},{"_id":"source/images/game/spm-1.gif","path":"images/game/spm-1.gif","modified":1,"renderable":0},{"_id":"source/images/game/spm-2.gif","path":"images/game/spm-2.gif","modified":1,"renderable":0},{"_id":"source/images/old/11.1.webp","path":"images/old/11.1.webp","modified":1,"renderable":0},{"_id":"source/images/old/11.2.webp","path":"images/old/11.2.webp","modified":1,"renderable":0},{"_id":"source/images/old/2.1.webp","path":"images/old/2.1.webp","modified":1,"renderable":0},{"_id":"source/images/old/2.webp","path":"images/old/2.webp","modified":1,"renderable":0},{"_id":"source/images/old/20090000-转学前.webp","path":"images/old/20090000-转学前.webp","modified":1,"renderable":0},{"_id":"source/images/old/20121221-我喜欢你，狐狸.webp","path":"images/old/20121221-我喜欢你，狐狸.webp","modified":1,"renderable":0},{"_id":"source/images/old/20130000-约初中.webp","path":"images/old/20130000-约初中.webp","modified":1,"renderable":0},{"_id":"source/images/old/20160514-时间似流水.webp","path":"images/old/20160514-时间似流水.webp","modified":1,"renderable":0},{"_id":"source/images/old/20160800-毕业晚会.webp","path":"images/old/20160800-毕业晚会.webp","modified":1,"renderable":0},{"_id":"source/images/old/20161009-当年凡司机.webp","path":"images/old/20161009-当年凡司机.webp","modified":1,"renderable":0},{"_id":"source/images/old/20161202-黄若凡.webp","path":"images/old/20161202-黄若凡.webp","modified":1,"renderable":0},{"_id":"source/images/old/20170000-团建.webp","path":"images/old/20170000-团建.webp","modified":1,"renderable":0},{"_id":"source/images/old/20190507-十八岁.webp","path":"images/old/20190507-十八岁.webp","modified":1,"renderable":0},{"_id":"source/images/old/20200525-高考前.webp","path":"images/old/20200525-高考前.webp","modified":1,"renderable":0},{"_id":"source/images/old/4.1.webp","path":"images/old/4.1.webp","modified":1,"renderable":0},{"_id":"source/images/old/5.webp","path":"images/old/5.webp","modified":1,"renderable":0},{"_id":"source/images/old/6.1.webp","path":"images/old/6.1.webp","modified":1,"renderable":0},{"_id":"source/images/old/1.webp","path":"images/old/1.webp","modified":1,"renderable":0},{"_id":"source/images/old/4.webp","path":"images/old/4.webp","modified":1,"renderable":0},{"_id":"source/images/old/7.2.webp","path":"images/old/7.2.webp","modified":1,"renderable":0},{"_id":"source/images/old/8.webp","path":"images/old/8.webp","modified":1,"renderable":0},{"_id":"source/images/old/7.1.webp","path":"images/old/7.1.webp","modified":1,"renderable":0},{"_id":"source/images/meme/100级的一事无成.webp","path":"images/meme/100级的一事无成.webp","modified":1,"renderable":0},{"_id":"source/images/meme/12点之前睡着.webp","path":"images/meme/12点之前睡着.webp","modified":1,"renderable":0},{"_id":"source/images/meme/SB110.webp","path":"images/meme/SB110.webp","modified":1,"renderable":0},{"_id":"source/images/meme/wifi.webp","path":"images/meme/wifi.webp","modified":1,"renderable":0},{"_id":"source/images/meme/一周.webp","path":"images/meme/一周.webp","modified":1,"renderable":0},{"_id":"source/images/meme/一条船.webp","path":"images/meme/一条船.webp","modified":1,"renderable":0},{"_id":"source/images/meme/一看二慢三通过.webp","path":"images/meme/一看二慢三通过.webp","modified":1,"renderable":0},{"_id":"source/images/meme/一辈子不关心哲学.webp","path":"images/meme/一辈子不关心哲学.webp","modified":1,"renderable":0},{"_id":"source/images/meme/下大棋.webp","path":"images/meme/下大棋.webp","modified":1,"renderable":0},{"_id":"source/images/meme/不不不是是是.webp","path":"images/meme/不不不是是是.webp","modified":1,"renderable":0},{"_id":"source/images/meme/不想麻烦别人的你.webp","path":"images/meme/不想麻烦别人的你.webp","modified":1,"renderable":0},{"_id":"source/images/meme/不是浪费时间.webp","path":"images/meme/不是浪费时间.webp","modified":1,"renderable":0},{"_id":"source/images/meme/不确定.webp","path":"images/meme/不确定.webp","modified":1,"renderable":0},{"_id":"source/images/meme/中式恐怖.webp","path":"images/meme/中式恐怖.webp","modified":1,"renderable":0},{"_id":"source/images/meme/为什么活.webp","path":"images/meme/为什么活.webp","modified":1,"renderable":0},{"_id":"source/images/meme/了不起.webp","path":"images/meme/了不起.webp","modified":1,"renderable":0},{"_id":"source/images/meme/事儿在哪.webp","path":"images/meme/事儿在哪.webp","modified":1,"renderable":0},{"_id":"source/images/meme/互联网的尽头.webp","path":"images/meme/互联网的尽头.webp","modified":1,"renderable":0},{"_id":"source/images/meme/从不运动的我.webp","path":"images/meme/从不运动的我.webp","modified":1,"renderable":0},{"_id":"source/images/meme/从刚出生说起.webp","path":"images/meme/从刚出生说起.webp","modified":1,"renderable":0},{"_id":"source/images/meme/他俩还认识.webp","path":"images/meme/他俩还认识.webp","modified":1,"renderable":0},{"_id":"source/images/meme/余幼时即厌学.webp","path":"images/meme/余幼时即厌学.webp","modified":1,"renderable":0},{"_id":"source/images/meme/你也值得被爱.webp","path":"images/meme/你也值得被爱.webp","modified":1,"renderable":0},{"_id":"source/images/meme/你最害怕什么.webp","path":"images/meme/你最害怕什么.webp","modified":1,"renderable":0},{"_id":"source/images/meme/做一个对社会有副作用的人.webp","path":"images/meme/做一个对社会有副作用的人.webp","modified":1,"renderable":0},{"_id":"source/images/meme/充电.webp","path":"images/meme/充电.webp","modified":1,"renderable":0},{"_id":"source/images/meme/关上了一扇门.webp","path":"images/meme/关上了一扇门.webp","modified":1,"renderable":0},{"_id":"source/images/meme/关键时刻.webp","path":"images/meme/关键时刻.webp","modified":1,"renderable":0},{"_id":"source/images/meme/内向仔的一生.webp","path":"images/meme/内向仔的一生.webp","modified":1,"renderable":0},{"_id":"source/images/meme/内向者联合起来.webp","path":"images/meme/内向者联合起来.webp","modified":1,"renderable":0},{"_id":"source/images/meme/写12个解.webp","path":"images/meme/写12个解.webp","modified":1,"renderable":0},{"_id":"source/images/meme/几个星期后我的家.webp","path":"images/meme/几个星期后我的家.webp","modified":1,"renderable":0},{"_id":"source/images/meme/分支.webp","path":"images/meme/分支.webp","modified":1,"renderable":0},{"_id":"source/images/meme/到了我这个年纪.webp","path":"images/meme/到了我这个年纪.webp","modified":1,"renderable":0},{"_id":"source/images/meme/医生远离我.webp","path":"images/meme/医生远离我.webp","modified":1,"renderable":0},{"_id":"source/images/meme/半人马.webp","path":"images/meme/半人马.webp","modified":1,"renderable":0},{"_id":"source/images/meme/南极洲交通路线图.webp","path":"images/meme/南极洲交通路线图.webp","modified":1,"renderable":0},{"_id":"source/images/meme/双人游戏.webp","path":"images/meme/双人游戏.webp","modified":1,"renderable":0},{"_id":"source/images/meme/双核苹果.webp","path":"images/meme/双核苹果.webp","modified":1,"renderable":0},{"_id":"source/images/meme/反拍牛顿.webp","path":"images/meme/反拍牛顿.webp","modified":1,"renderable":0},{"_id":"source/images/meme/只要你自信.webp","path":"images/meme/只要你自信.webp","modified":1,"renderable":0},{"_id":"source/images/meme/号卖不掉.webp","path":"images/meme/号卖不掉.webp","modified":1,"renderable":0},{"_id":"source/images/meme/合适的人.webp","path":"images/meme/合适的人.webp","modified":1,"renderable":0},{"_id":"source/images/meme/哲学格言生成器.webp","path":"images/meme/哲学格言生成器.webp","modified":1,"renderable":0},{"_id":"source/images/meme/喜欢星期五.webp","path":"images/meme/喜欢星期五.webp","modified":1,"renderable":0},{"_id":"source/images/meme/喷猫.webp","path":"images/meme/喷猫.webp","modified":1,"renderable":0},{"_id":"source/images/meme/四个星期后的超市.webp","path":"images/meme/四个星期后的超市.webp","modified":1,"renderable":0},{"_id":"source/images/meme/垃圾桶.webp","path":"images/meme/垃圾桶.webp","modified":1,"renderable":0},{"_id":"source/images/meme/墨菲定律.webp","path":"images/meme/墨菲定律.webp","modified":1,"renderable":0},{"_id":"source/images/meme/大括号.webp","path":"images/meme/大括号.webp","modified":1,"renderable":0},{"_id":"source/images/meme/大熊猫吃火锅.webp","path":"images/meme/大熊猫吃火锅.webp","modified":1,"renderable":0},{"_id":"source/images/meme/好吃就行.jpg","path":"images/meme/好吃就行.jpg","modified":1,"renderable":0},{"_id":"source/images/meme/好多了.webp","path":"images/meme/好多了.webp","modified":1,"renderable":0},{"_id":"source/images/meme/如此包装.webp","path":"images/meme/如此包装.webp","modified":1,"renderable":0},{"_id":"source/images/meme/字幕没有加描边.webp","path":"images/meme/字幕没有加描边.webp","modified":1,"renderable":0},{"_id":"source/images/meme/害羞死了.webp","path":"images/meme/害羞死了.webp","modified":1,"renderable":0},{"_id":"source/images/meme/小光板.webp","path":"images/meme/小光板.webp","modified":1,"renderable":0},{"_id":"source/images/meme/小心地滑.webp","path":"images/meme/小心地滑.webp","modified":1,"renderable":0},{"_id":"source/images/meme/小心水分子.webp","path":"images/meme/小心水分子.webp","modified":1,"renderable":0},{"_id":"source/images/meme/峰会改成自习.webp","path":"images/meme/峰会改成自习.webp","modified":1,"renderable":0},{"_id":"source/images/meme/师傅你是做什么工作的.webp","path":"images/meme/师傅你是做什么工作的.webp","modified":1,"renderable":0},{"_id":"source/images/meme/平凡的世界.webp","path":"images/meme/平凡的世界.webp","modified":1,"renderable":0},{"_id":"source/images/meme/平常的痛苦.webp","path":"images/meme/平常的痛苦.webp","modified":1,"renderable":0},{"_id":"source/images/meme/年龄真的大了.webp","path":"images/meme/年龄真的大了.webp","modified":1,"renderable":0},{"_id":"source/images/meme/开门见山.webp","path":"images/meme/开门见山.webp","modified":1,"renderable":0},{"_id":"source/images/meme/弓箭.webp","path":"images/meme/弓箭.webp","modified":1,"renderable":0},{"_id":"source/images/meme/成熟点.webp","path":"images/meme/成熟点.webp","modified":1,"renderable":0},{"_id":"source/images/meme/成熟的大人.webp","path":"images/meme/成熟的大人.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我不会下国际象棋.webp","path":"images/meme/我不会下国际象棋.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我接了.webp","path":"images/meme/我接了.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我是猴子.webp","path":"images/meme/我是猴子.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我爱我家.webp","path":"images/meme/我爱我家.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我的未来全是禁止通行.webp","path":"images/meme/我的未来全是禁止通行.webp","modified":1,"renderable":0},{"_id":"source/images/meme/25个未接电话.webp","path":"images/meme/25个未接电话.webp","modified":1,"renderable":0},{"_id":"source/images/meme/打BOOS.webp","path":"images/meme/打BOOS.webp","modified":1,"renderable":0},{"_id":"source/images/meme/打工不仅能致富.webp","path":"images/meme/打工不仅能致富.webp","modified":1,"renderable":0},{"_id":"source/images/meme/找不到出路的魔方脸.webp","path":"images/meme/找不到出路的魔方脸.webp","modified":1,"renderable":0},{"_id":"source/images/meme/找得到出路的魔方脸.webp","path":"images/meme/找得到出路的魔方脸.webp","modified":1,"renderable":0},{"_id":"source/images/meme/抑郁症.webp","path":"images/meme/抑郁症.webp","modified":1,"renderable":0},{"_id":"source/images/meme/排版.webp","path":"images/meme/排版.webp","modified":1,"renderable":0},{"_id":"source/images/meme/摩托车.webp","path":"images/meme/摩托车.webp","modified":1,"renderable":0},{"_id":"source/images/meme/撞大运.webp","path":"images/meme/撞大运.webp","modified":1,"renderable":0},{"_id":"source/images/meme/收集大半辈子表情包.webp","path":"images/meme/收集大半辈子表情包.webp","modified":1,"renderable":0},{"_id":"source/images/meme/无信号.webp","path":"images/meme/无信号.webp","modified":1,"renderable":0},{"_id":"source/images/meme/改变与得过且过.webp","path":"images/meme/改变与得过且过.webp","modified":1,"renderable":0},{"_id":"source/images/meme/时间到了.webp","path":"images/meme/时间到了.webp","modified":1,"renderable":0},{"_id":"source/images/meme/暖她一整天.webp","path":"images/meme/暖她一整天.webp","modified":1,"renderable":0},{"_id":"source/images/meme/最美好的四个小时.webp","path":"images/meme/最美好的四个小时.webp","modified":1,"renderable":0},{"_id":"source/images/meme/最讨厌懒人.webp","path":"images/meme/最讨厌懒人.webp","modified":1,"renderable":0},{"_id":"source/images/meme/朋友像雪花.webp","path":"images/meme/朋友像雪花.webp","modified":1,"renderable":0},{"_id":"source/images/meme/未来是走那边.webp","path":"images/meme/未来是走那边.webp","modified":1,"renderable":0},{"_id":"source/images/meme/机械电锯.webp","path":"images/meme/机械电锯.webp","modified":1,"renderable":0},{"_id":"source/images/meme/是不是哥们.webp","path":"images/meme/是不是哥们.webp","modified":1,"renderable":0},{"_id":"source/images/meme/欧洲用电量.webp","path":"images/meme/欧洲用电量.webp","modified":1,"renderable":0},{"_id":"source/images/meme/水下无法呼吸.webp","path":"images/meme/水下无法呼吸.webp","modified":1,"renderable":0},{"_id":"source/images/meme/毕姥爷的说话之道.webp","path":"images/meme/毕姥爷的说话之道.webp","modified":1,"renderable":0},{"_id":"source/images/meme/永远的家.webp","path":"images/meme/永远的家.webp","modified":1,"renderable":0},{"_id":"source/images/meme/没人知道你是一条狗.webp","path":"images/meme/没人知道你是一条狗.webp","modified":1,"renderable":0},{"_id":"source/images/meme/没有转角的人生.webp","path":"images/meme/没有转角的人生.webp","modified":1,"renderable":0},{"_id":"source/images/meme/江湖义气.webp","path":"images/meme/江湖义气.webp","modified":1,"renderable":0},{"_id":"source/images/meme/注定孤独一生.webp","path":"images/meme/注定孤独一生.webp","modified":1,"renderable":0},{"_id":"source/images/meme/滑.webp","path":"images/meme/滑.webp","modified":1,"renderable":0},{"_id":"source/images/meme/海鸥为我停留吧.webp","path":"images/meme/海鸥为我停留吧.webp","modified":1,"renderable":0},{"_id":"source/images/meme/满电猫猫.webp","path":"images/meme/满电猫猫.webp","modified":1,"renderable":0},{"_id":"source/images/meme/灭烟台.webp","path":"images/meme/灭烟台.webp","modified":1,"renderable":0},{"_id":"source/images/meme/漫画是假的.webp","path":"images/meme/漫画是假的.webp","modified":1,"renderable":0},{"_id":"source/images/meme/灵魂永远昂首挺胸.webp","path":"images/meme/灵魂永远昂首挺胸.webp","modified":1,"renderable":0},{"_id":"source/images/meme/熬夜的原因.webp","path":"images/meme/熬夜的原因.webp","modified":1,"renderable":0},{"_id":"source/images/meme/烧.webp","path":"images/meme/烧.webp","modified":1,"renderable":0},{"_id":"source/images/meme/猫猫图.webp","path":"images/meme/猫猫图.webp","modified":1,"renderable":0},{"_id":"source/images/meme/猫猫碰拳.webp","path":"images/meme/猫猫碰拳.webp","modified":1,"renderable":0},{"_id":"source/images/meme/王八蛋.webp","path":"images/meme/王八蛋.webp","modified":1,"renderable":0},{"_id":"source/images/meme/猫猫工作.webp","path":"images/meme/猫猫工作.webp","modified":1,"renderable":0},{"_id":"source/images/meme/现在的小孩.webp","path":"images/meme/现在的小孩.webp","modified":1,"renderable":0},{"_id":"source/images/meme/生日快乐.webp","path":"images/meme/生日快乐.webp","modified":1,"renderable":0},{"_id":"source/images/meme/甜上心尖.webp","path":"images/meme/甜上心尖.webp","modified":1,"renderable":0},{"_id":"source/images/meme/生活小常识.webp","path":"images/meme/生活小常识.webp","modified":1,"renderable":0},{"_id":"source/images/meme/番茄炒你儿子.webp","path":"images/meme/番茄炒你儿子.webp","modified":1,"renderable":0},{"_id":"source/images/meme/白铅笔.webp","path":"images/meme/白铅笔.webp","modified":1,"renderable":0},{"_id":"source/images/meme/白鸟过河滩.webp","path":"images/meme/白鸟过河滩.webp","modified":1,"renderable":0},{"_id":"source/images/meme/眉眼弯弯.webp","path":"images/meme/眉眼弯弯.webp","modified":1,"renderable":0},{"_id":"source/images/meme/看夜空看什么.webp","path":"images/meme/看夜空看什么.webp","modified":1,"renderable":0},{"_id":"source/images/meme/睡5个小时.webp","path":"images/meme/睡5个小时.webp","modified":1,"renderable":0},{"_id":"source/images/meme/生活点滴.webp","path":"images/meme/生活点滴.webp","modified":1,"renderable":0},{"_id":"source/images/meme/社恐如何交朋友.webp","path":"images/meme/社恐如何交朋友.webp","modified":1,"renderable":0},{"_id":"source/images/meme/离你家超级远.webp","path":"images/meme/离你家超级远.webp","modified":1,"renderable":0},{"_id":"source/images/meme/穿越.webp","path":"images/meme/穿越.webp","modified":1,"renderable":0},{"_id":"source/images/meme/禅尼丝空腹.webp","path":"images/meme/禅尼丝空腹.webp","modified":1,"renderable":0},{"_id":"source/images/meme/笑容.webp","path":"images/meme/笑容.webp","modified":1,"renderable":0},{"_id":"source/images/meme/给你薯条.webp","path":"images/meme/给你薯条.webp","modified":1,"renderable":0},{"_id":"source/images/meme/网卡.webp","path":"images/meme/网卡.webp","modified":1,"renderable":0},{"_id":"source/images/meme/线粒体.webp","path":"images/meme/线粒体.webp","modified":1,"renderable":0},{"_id":"source/images/meme/罗马空军基地.webp","path":"images/meme/罗马空军基地.webp","modified":1,"renderable":0},{"_id":"source/images/meme/考试一点也不难.webp","path":"images/meme/考试一点也不难.webp","modified":1,"renderable":0},{"_id":"source/images/meme/脑控.webp","path":"images/meme/脑控.webp","modified":1,"renderable":0},{"_id":"source/images/meme/老虎卷.webp","path":"images/meme/老虎卷.webp","modified":1,"renderable":0},{"_id":"source/images/meme/自愿开学.webp","path":"images/meme/自愿开学.webp","modified":1,"renderable":0},{"_id":"source/images/meme/菜杆.webp","path":"images/meme/菜杆.webp","modified":1,"renderable":0},{"_id":"source/images/meme/蒜泥猫.webp","path":"images/meme/蒜泥猫.webp","modified":1,"renderable":0},{"_id":"source/images/meme/芬达海.webp","path":"images/meme/芬达海.webp","modified":1,"renderable":0},{"_id":"source/images/meme/蓝移.webp","path":"images/meme/蓝移.webp","modified":1,"renderable":0},{"_id":"source/images/meme/虾射手.webp","path":"images/meme/虾射手.webp","modified":1,"renderable":0},{"_id":"source/images/meme/蔬菜去农药残留.webp","path":"images/meme/蔬菜去农药残留.webp","modified":1,"renderable":0},{"_id":"source/images/meme/蜂蜜蛋糕的组成成分.webp","path":"images/meme/蜂蜜蛋糕的组成成分.webp","modified":1,"renderable":0},{"_id":"source/images/meme/请勿投喂.webp","path":"images/meme/请勿投喂.webp","modified":1,"renderable":0},{"_id":"source/images/meme/谁让你开得那么快.webp","path":"images/meme/谁让你开得那么快.webp","modified":1,"renderable":0},{"_id":"source/images/meme/解冻.webp","path":"images/meme/解冻.webp","modified":1,"renderable":0},{"_id":"source/images/meme/超级摇滚迷.webp","path":"images/meme/超级摇滚迷.webp","modified":1,"renderable":0},{"_id":"source/images/meme/过去和未来不存在.webp","path":"images/meme/过去和未来不存在.webp","modified":1,"renderable":0},{"_id":"source/images/meme/速度比光快的代价.webp","path":"images/meme/速度比光快的代价.webp","modified":1,"renderable":0},{"_id":"source/images/meme/身在福中不知福.webp","path":"images/meme/身在福中不知福.webp","modified":1,"renderable":0},{"_id":"source/images/meme/那一夜.webp","path":"images/meme/那一夜.webp","modified":1,"renderable":0},{"_id":"source/images/meme/闸机.webp","path":"images/meme/闸机.webp","modified":1,"renderable":0},{"_id":"source/images/meme/随500.webp","path":"images/meme/随500.webp","modified":1,"renderable":0},{"_id":"source/images/meme/重力.webp","path":"images/meme/重力.webp","modified":1,"renderable":0},{"_id":"source/images/meme/随6500.webp","path":"images/meme/随6500.webp","modified":1,"renderable":0},{"_id":"source/images/meme/非也兄台.webp","path":"images/meme/非也兄台.webp","modified":1,"renderable":0},{"_id":"source/images/meme/非我也图也.webp","path":"images/meme/非我也图也.webp","modified":1,"renderable":0},{"_id":"source/images/meme/青龙帮.webp","path":"images/meme/青龙帮.webp","modified":1,"renderable":0},{"_id":"source/images/meme/音乐怀旧.webp","path":"images/meme/音乐怀旧.webp","modified":1,"renderable":0},{"_id":"source/images/meme/鲁南精神.webp","path":"images/meme/鲁南精神.webp","modified":1,"renderable":0},{"_id":"source/images/meme/我的画笔和颜料.webp","path":"images/meme/我的画笔和颜料.webp","modified":1,"renderable":0}],"Cache":[{"_id":"source/moon.js","hash":"a85556ec90bbb50f79cfedb339b8a1288be9210c","modified":1757764131469},{"_id":"source/color.js","hash":"a7ec94feaa6f3c2f4be29816244c9f204b4620f6","modified":1757764131377},{"_id":"source/favicon.ico","hash":"d5d5370bbe3e3ce247c6f0825a9e16db2b8cd5c5","modified":1757764131377},{"_id":"source/_posts/GBK与UTF-8与锟斤拷的成因.md","hash":"0f46b89c2d4d3802a9a039e92efd318521fa9bae","modified":1757861354527},{"_id":"source/_posts/Win10 Dolphin模拟器连接Wii手柄教程.md","hash":"71e323f378b9df7a0e6fbdfdb8568fd2a7ec4c76","modified":1757861382235},{"_id":"source/_posts/Hadoop.md","hash":"120adc67493f22e86be99bb329d3e5cbb1691f3b","modified":1757861361567},{"_id":"source/_posts/Hexo.md","hash":"3c33bd3457fac247fb003a89d9a226fae7b9f93b","modified":1758119284743},{"_id":"source/_posts/MEME图合订本.md","hash":"cc568adc4e47c0d786a8eda5d775758bf6f06133","modified":1758548371920},{"_id":"source/_posts/乐理.md","hash":"974a884051783c00ec7f62512359522bf543cd4f","modified":1757861463975},{"_id":"source/_posts/在Termux上使用Flask.md","hash":"3e55afff76d69c12b343623569fa2150b6d1762c","modified":1757861541283},{"_id":"source/_posts/我的缺点.md","hash":"ff83404c656353c7bbc4aaddfa29c1845732cdc5","modified":1758380488084},{"_id":"source/_posts/拉康精神分析理论碎片.md","hash":"fc3b3d0570f09e884f67d871f3949a63dd9534db","modified":1757864718879},{"_id":"source/_posts/汽车线束操作工.md","hash":"806186ec53dc6ae723a1ac74953f0c4a0d2d3ee9","modified":1758810290678},{"_id":"source/_posts/时间和历法.md","hash":"3c77a75808d084645560fa0dc43004b7f8dbe415","modified":1757861479739},{"_id":"source/_posts/数学碎片.md","hash":"355d7421239a019eab2a4ce74328d730449249cc","modified":1757861486883},{"_id":"source/_posts/用GIMP让拍摄的纸上的字更清晰.md","hash":"f1641b20df724510cc2b4e2c541f10b2083ae0ef","modified":1757861528903},{"_id":"source/_posts/笑话的分类.md","hash":"cd72a41f3af33d4ba55083b3fdfd62a484164264","modified":1757861509679},{"_id":"source/_posts/献血的流程.md","hash":"d9ce44928879cc5146901c420d13b89e2d98b5cb","modified":1757948704344},{"_id":"source/_posts/漫无止境的童年.md","hash":"712639296afbf42ce9162b3004175f71ad9303dd","modified":1758467785043},{"_id":"source/_posts/菜谱.md","hash":"b4d3dda4cec115099739ca78af6da433f4199278","modified":1757861388687},{"_id":"source/_posts/用Magisk获取Android手机的root权限.md","hash":"1b93f09bf87fde3233d6661eb658b321cc2c6499","modified":1757861534883},{"_id":"source/_posts/诺爱儿空摘火咬.md","hash":"20544ae687089734156e4323db9b808c937dba8e","modified":1758982419000},{"_id":"source/_posts/经济常识.md","hash":"2ae7bf3586ef33995193ec6bd04265e61a2d6399","modified":1757861424399},{"_id":"source/_posts/给VM里的Ubuntu扩容.md","hash":"9548dfe1c058f3de810ab5ace8108fa451166837","modified":1757861407591},{"_id":"source/_posts/高德地图多边形区域搜索POI的划分方法.md","hash":"6d611d33eb172eed1d6cec81100305dff619dafc","modified":1757861401287},{"_id":"source/_data/styles.styl","hash":"fe18dcdaef129c482dfff4470f1071c3f722f680","modified":1757764131365},{"_id":"source/about/index.md","hash":"90ad3a2e85f0277bf4200ca373d5c4ae1e0e451a","modified":1757764131377},{"_id":"source/_posts/音乐分享.md","hash":"c69a7189c1aec4870ebc627641ce46797ab6a669","modified":1757861522359},{"_id":"source/images/$◇a.webp","hash":"7534f24f02e169e8752e1196dcc400b3a6e35c44","modified":1757764131377},{"_id":"source/images/100mdjht.webp","hash":"ca9fcef5d36483c50fd48ff1e04d431bc002fabf","modified":1757764131377},{"_id":"source/images/-emo.webp","hash":"efa8fe85515ac136b6f66e46fa81d2386522697b","modified":1757764131377},{"_id":"source/images/AEIO.webp","hash":"b932676476eaf3e91cf48210078cafc09255ec74","modified":1757764131381},{"_id":"source/images/CBT-3.webp","hash":"03899c779a7acb3cd125c6fda52f94e6b2c175cc","modified":1757764131381},{"_id":"source/images/2cospix.webp","hash":"0182f634520c7d3394c3e744d7590ca675ceed9d","modified":1757764131377},{"_id":"source/images/alpha-point.webp","hash":"8e78c941d2fb4fdf61a303624e8fc6cb8ff89161","modified":1757764131381},{"_id":"source/images/RSI.webp","hash":"47b4967791513ab538f631ad9c0648ec9ac4a0b9","modified":1757764131381},{"_id":"source/images/P-and-not-P.webp","hash":"33a69ec9e5243c62f8bfc13be1984ee9159b2e97","modified":1757764131381},{"_id":"source/images/desire-1.webp","hash":"dbf9e3b9db4dbe1c88e84c43c3b36cf7975fcf71","modified":1757764131381},{"_id":"source/images/2quan.webp","hash":"188270a7d8efccd7d7e55465afc85b3579fa5646","modified":1757764131381},{"_id":"source/images/desire-2.webp","hash":"bffa53d25ae3cb181016d51d6c8b3a7d10985052","modified":1757764131381},{"_id":"source/images/daodulakang_end.webp","hash":"06e6b029f21a87ccca969fdde8748e7ec180dfc0","modified":1757764131381},{"_id":"source/images/decision-tree.webp","hash":"49d508acbc5145c612d9b8e081c0bc32a11529d5","modified":1757764131381},{"_id":"source/images/desire-3.webp","hash":"99b5398008ad34400c7668d1064a9c1409e4a0e5","modified":1757764131381},{"_id":"source/images/desire-4.webp","hash":"2a85921dfce7d8a64d104c9d4b756bfd3e341757","modified":1757764131381},{"_id":"source/images/dolphin.png","hash":"e37572b12b3c58f96e388e44da41e52849cb7170","modified":1757764131381},{"_id":"source/images/ecliptic.jpg","hash":"7c49def246ed179aa0a949bd5935aea8759c8ea5","modified":1757764131381},{"_id":"source/images/donate-blood-2.webp","hash":"d368f486e0f9bb40f80002531127c8a94ad295e2","modified":1757764131381},{"_id":"source/images/fish.webp","hash":"adddf925162bbef0710becb4954fdd49dbb84d1b","modified":1757764131381},{"_id":"source/images/hw-0.webp","hash":"98a2358b021977ad0eccf7c20a810aa9ebd7e905","modified":1757764131429},{"_id":"source/images/donate-organ.webp","hash":"a2ea74b38943a4fc5fb6b8003225e3f4e87c75fa","modified":1757764131381},{"_id":"source/images/life.webp","hash":"72948f35d6b6efba8619d9aaf2a0c7cd416d9dd0","modified":1757764131429},{"_id":"source/images/magisk.webp","hash":"869fda5c1be1273260e8e55514194dda314d1a95","modified":1757764131429},{"_id":"source/images/moon.jpg","hash":"62d86d630e85e52947cc14fbd167c167322fadaf","modified":1757764131461},{"_id":"source/images/residual-error.webp","hash":"5799b2bd04dc6b51c7291e24dad7fb5fd69fb131","modified":1757764131465},{"_id":"source/images/piano.webp","hash":"ebcd8e497bdfb5254072652493f85f576a487301","modified":1757764131465},{"_id":"source/images/platelet-collection.webp","hash":"de1f4289cc7203d99df6f73ba341b4c1ae880fdd","modified":1757764131465},{"_id":"source/images/rj45.webp","hash":"c3caa5d9ed09a235e735c6343b89735990766508","modified":1757764131465},{"_id":"source/images/shuo.webp","hash":"dd3a6261c9cd92fbe489edc260a451afa0e14a77","modified":1757764131465},{"_id":"source/images/what.webp","hash":"8fbf0a418fa587c1bfdc7aa7dac645d213d98b8d","modified":1757764131465},{"_id":"source/images/wii-remote-2.webp","hash":"86845449c6730504113c284233b2147ebb854fdf","modified":1757764131469},{"_id":"source/images/关系-0.webp","hash":"3347dbfb731074c6e4bb2f1f68e34814e4f470bd","modified":1757764131469},{"_id":"source/images/weierstrassa=0.5b=13.webp","hash":"1b00a4510fb367dd7ab02e474a3ff0a8d3e67178","modified":1757764131465},{"_id":"source/images/wii-remote.webp","hash":"c48be9c8584fdc81f162b0f4f56f109d64771c8d","modified":1757764131469},{"_id":"source/images/donate-blood-1.webp","hash":"b1b316113bd05e846910d07f86834543af18a095","modified":1757764131381},{"_id":"source/images/函数-1.webp","hash":"30ace6e230637c24924c6970855c0b7fab97458b","modified":1757764131469},{"_id":"source/images/关系-1.webp","hash":"eb2acec10052c8ec5adabe370a4c4fc87da669e4","modified":1757764131469},{"_id":"source/images/MapReduce.webp","hash":"4a2a258f8afef89c895c958693e02aee0dca2707","modified":1757764131381},{"_id":"source/images/运算-1.webp","hash":"3955c0e5f4e258822a66077b9e6b1e0c3ea9b40c","modified":1757764131469},{"_id":"source/_data/head.njk","hash":"64a5826ac3ddc11a65963d11d8aaaddc99c19d57","modified":1757764131365},{"_id":"source/images/运算-2.webp","hash":"08141fb33f27cf8916d69cd13f8893a3988510bd","modified":1757764131469},{"_id":"source/images/关系-2.webp","hash":"3b079cdfdab9a12947a03eade659068decb840ab","modified":1757764131469},{"_id":"source/images/马斯洛需求金字塔.webp","hash":"15c43eb33b649ac770543232a005f300eca33d2d","modified":1757764131469},{"_id":"source/images/P==Q.webp","hash":"5dc61dc563a51b15e870871e999e157622ddac7f","modified":1757764131381},{"_id":"source/images/打燕窝地理位置.webp","hash":"c6f69349aaf435da59f017e604a1fda0a519791b","modified":1757764131469},{"_id":"source/images/game/4399-on-vscode-0.webp","hash":"77c16ca38817ef88f2ee012005439ddb69fad531","modified":1757764131381},{"_id":"source/images/game/any.webp","hash":"dc1dcae1462428f19680c6d4fe19c3c9def18a9f","modified":1757764131385},{"_id":"source/images/game/belfry.webp","hash":"01a681d10a95c2039de8b5a70c461c7aecd379ea","modified":1757764131385},{"_id":"source/images/game/smg-cpu-efb.webp","hash":"f00045d1be71b10de532a6e38649d0f18a7e0c32","modified":1757764131405},{"_id":"source/images/old/11.1.webp","hash":"beca39e1643d24bfb6871836cd48775913c6351c","modified":1757764131461},{"_id":"source/images/old/11.2.webp","hash":"8a340c344a4dccc74187cfd8dc63cb8629deaa28","modified":1757764131461},{"_id":"source/images/old/20121221-我喜欢你，狐狸.webp","hash":"a4ccdbc8d1c543ed4eed5e9daa73e86b320caa6f","modified":1757764131461},{"_id":"source/images/old/20161009-当年凡司机.webp","hash":"eeee40bcf7f6aa63a277e532275d51f78e72433d","modified":1757764131461},{"_id":"source/images/old/20160514-时间似流水.webp","hash":"e68476a7df45ac977b762d0d41c43086848ad749","modified":1757764131461},{"_id":"source/images/old/20161202-黄若凡.webp","hash":"5edd134b5b2fb2a80d38850522f8adf560803e6a","modified":1757764131465},{"_id":"source/images/old/20200525-高考前.webp","hash":"e0e5be629efed3134f8c3635d1b969a7a44120f5","modified":1757764131465},{"_id":"source/images/old/20160800-毕业晚会.webp","hash":"35523fb44ce0efb3c24337655764b83225768eaa","modified":1757764131461},{"_id":"source/images/old/20190507-十八岁.webp","hash":"5bbd5592eea10896d8bec20736123c7cb120f778","modified":1757764131465},{"_id":"source/images/old/20170000-团建.webp","hash":"49fdd269d3ae0b03a202319604a4a3518b9533ce","modified":1757764131465},{"_id":"source/images/meme/100级的一事无成.webp","hash":"0b51b40480f6b872a004fc3be03b09df1ef9dd89","modified":1757764131429},{"_id":"source/images/meme/wifi.webp","hash":"39675a321d7c4b7b1d7378ad09215062c05496b7","modified":1757764131433},{"_id":"source/images/meme/SB110.webp","hash":"5248d02dc60719d616dfb525aac801eae8e0c75e","modified":1757764131433},{"_id":"source/images/meme/一条船.webp","hash":"37088fd41b34cc5952c2647f42f3017f0c237086","modified":1757764131433},{"_id":"source/images/meme/一看二慢三通过.webp","hash":"f375a1349ab88de19d74a41bc21b6c75e5f4ec57","modified":1757764131433},{"_id":"source/images/meme/不不不是是是.webp","hash":"ff8a9ac2a7918fd5296b569b900202356520de31","modified":1757764131433},{"_id":"source/images/meme/下大棋.webp","hash":"e16984b14e029a654c5fa95ec68be090e85a2176","modified":1757764131433},{"_id":"source/images/meme/不想麻烦别人的你.webp","hash":"3c68bf42983390a55bd52776a2a757c9adcc6f4f","modified":1757764131433},{"_id":"source/images/old/20090000-转学前.webp","hash":"7f5ace518c36cc2b6948abe673db99facbd2cd50","modified":1757764131461},{"_id":"source/images/meme/不确定.webp","hash":"f96538d231ce655dc941f25f3df2efe93aec9288","modified":1757764131433},{"_id":"source/images/meme/事儿在哪.webp","hash":"0a1dae00257396a37cc57143202261449a60754a","modified":1757764131433},{"_id":"source/images/meme/了不起.webp","hash":"0e8e8ec829cdf3ee05217e59bc4be5ad13cb1d80","modified":1757764131433},{"_id":"source/images/meme/从刚出生说起.webp","hash":"870c8ac75a51424c8c582cf4a283118fb7defe01","modified":1757764131433},{"_id":"source/images/meme/从不运动的我.webp","hash":"a82b6c38ec6ffa314f13b273a36145616de1b3ea","modified":1757764131433},{"_id":"source/images/meme/余幼时即厌学.webp","hash":"2bba9c4c20d518fb239a7a987ce39aef797c8d1c","modified":1757764131433},{"_id":"source/images/meme/你也值得被爱.webp","hash":"55f034ac5cdf8988365c2ebe39a0b91596e7c21d","modified":1757764131433},{"_id":"source/images/meme/关上了一扇门.webp","hash":"11ef60c4eba5b00a9400e7a61c19eb31615d5246","modified":1757764131433},{"_id":"source/images/meme/内向仔的一生.webp","hash":"30d1ed1d983d87153c83ce8c32616949a0b5e349","modified":1757764131437},{"_id":"source/images/meme/你最害怕什么.webp","hash":"f97d098ad79df6b21082ef310a7fed5405575e8e","modified":1757764131433},{"_id":"source/images/meme/写12个解.webp","hash":"3310d06e997edaa1d4d3f384697359311bcddfe5","modified":1757764131437},{"_id":"source/images/meme/内向者联合起来.webp","hash":"fdf131359f3438ff1a0a8f0aa31d5c275e1b6dcf","modified":1757764131437},{"_id":"source/images/meme/医生远离我.webp","hash":"0261239ccff82f23d67d0453f0e6b6322b6a50d3","modified":1757764131437},{"_id":"source/images/meme/到了我这个年纪.webp","hash":"be8c1ed354b481a039b1bcb32767e17671ec845a","modified":1757764131437},{"_id":"source/images/meme/南极洲交通路线图.webp","hash":"840a6d7282df6d268ea1eb2711f4027406b1ce83","modified":1757764131437},{"_id":"source/images/meme/双人游戏.webp","hash":"8daddae253c53e164a7398173986fd9aa8a6cff7","modified":1757764131437},{"_id":"source/images/meme/半人马.webp","hash":"ff27924eb81ea2d49d10ea95dc1e60c5571c981a","modified":1757764131437},{"_id":"source/images/meme/反拍牛顿.webp","hash":"1bec6a5b54166708a7e486378ebb37d7b07cc3f4","modified":1757764131437},{"_id":"source/images/meme/双核苹果.webp","hash":"e916918d080813af8e850b37bd3d02fb55e556ea","modified":1757764131437},{"_id":"source/images/meme/号卖不掉.webp","hash":"90420b2e031cb9a442db0a8b3a7db4dfee064bdc","modified":1757764131437},{"_id":"source/images/meme/喜欢星期五.webp","hash":"2b6f7ac5c02be3bfb8e4f8a2ed02910843f8e77e","modified":1757764131437},{"_id":"source/images/meme/垃圾桶.webp","hash":"2f4ddeaa24347f0ac10ae92f7ee5e98dc4ebfb0a","modified":1757764131441},{"_id":"source/images/meme/大括号.webp","hash":"c8bee6545b362668fb8354f6d5174a33bf5ef2f2","modified":1757764131441},{"_id":"source/images/meme/大熊猫吃火锅.webp","hash":"950b30f9c1f944caec78af5212d856c2b38770b0","modified":1757764131441},{"_id":"source/images/meme/好多了.webp","hash":"3608ab7a6ad0ab5de73e75bf15cf3de59355df8c","modified":1757764131441},{"_id":"source/images/meme/害羞死了.webp","hash":"3fb53ba11daf84074989c577ac4aa29f18642144","modified":1757764131445},{"_id":"source/images/meme/小心地滑.webp","hash":"831b02adcedc8fe8805923fd4de102e420c80b7f","modified":1757764131445},{"_id":"source/images/meme/小光板.webp","hash":"524717535c3177cbdd9c3e85ab9590c7069475eb","modified":1757764131445},{"_id":"source/images/meme/小心水分子.webp","hash":"60b07ff02adf7fb085350df94686b76c6f99f301","modified":1757764131445},{"_id":"source/images/meme/师傅你是做什么工作的.webp","hash":"86743577c97ee715ff351100a24148556d9aa762","modified":1757764131445},{"_id":"source/images/meme/峰会改成自习.webp","hash":"071aa8970b27e634838c313a7e39e7c0b67a95ea","modified":1757764131445},{"_id":"source/images/meme/年龄真的大了.webp","hash":"ea80c0f20885f80425b5928e094766ab427cb833","modified":1757764131445},{"_id":"source/images/meme/平凡的世界.webp","hash":"c6f9b34d21bf674bc722091cfed1166e19d8626c","modified":1757764131445},{"_id":"source/images/meme/弓箭.webp","hash":"0da72f27627f524b9ae3c15ad85b11231bce9e56","modified":1757764131445},{"_id":"source/images/meme/开门见山.webp","hash":"6cd17ae7c4d8490bb9b87e2d44d2f1d75a9dc824","modified":1757764131445},{"_id":"source/images/meme/成熟点.webp","hash":"313ce6225d96ec5a86e1b5e584c94e07adb55438","modified":1757764131445},{"_id":"source/images/meme/我接了.webp","hash":"6aea16695d4bd1ed3a5d363f2d65d1d5879bfb7f","modified":1757764131445},{"_id":"source/images/meme/成熟的大人.webp","hash":"c9cf445ecdf83e4e09953443fa093a292f96c1c7","modified":1757764131445},{"_id":"source/images/meme/我不会下国际象棋.webp","hash":"e114b7f7b83a655fabafccdddede29d98a4591fb","modified":1757764131445},{"_id":"source/images/meme/我是猴子.webp","hash":"771e1baf6bd5a2fad74155239552ead036da0479","modified":1757764131445},{"_id":"source/images/meme/我的未来全是禁止通行.webp","hash":"13044184688a33ba3054008553ab2c816275e6da","modified":1757764131445},{"_id":"source/images/meme/25个未接电话.webp","hash":"c190f2115e504dc388dd9431c5f408a0125cfe41","modified":1757764131429},{"_id":"source/images/meme/打BOOS.webp","hash":"0782407b7dade4d000679904e0823de31715d576","modified":1757764131449},{"_id":"source/images/meme/只要你自信.webp","hash":"5a5621519d1e571b0f0f98f70c7b4f5080126faf","modified":1757764131437},{"_id":"source/images/meme/抑郁症.webp","hash":"94bbd8bf62ed0ec3610e9e1812e73e3f26934d0c","modified":1757764131449},{"_id":"source/images/meme/排版.webp","hash":"d4b5bf7fc8a7a34c9082304f990a9311dc6c9d71","modified":1757764131449},{"_id":"source/images/meme/撞大运.webp","hash":"6ea069d57807d2311a7e3b73e30399fde23e6bf6","modified":1757764131449},{"_id":"source/images/meme/收集大半辈子表情包.webp","hash":"0a1d709511e8162f5717a79f3f375c57931aa5b7","modified":1757764131449},{"_id":"source/images/meme/无信号.webp","hash":"6bfb3746b3c5c2e0f624cccb13278d1189032a68","modified":1757764131449},{"_id":"source/images/meme/时间到了.webp","hash":"cda2cd68bf43c52d6fddef1698dca0c5ad77e291","modified":1757764131449},{"_id":"source/images/meme/暖她一整天.webp","hash":"a94a23b645d96f32a8186721c8e8fde52e75b153","modified":1757764131449},{"_id":"source/images/meme/最讨厌懒人.webp","hash":"eb409b65cd9066ad2935be894e26f12492bc2405","modified":1757764131449},{"_id":"source/images/meme/最美好的四个小时.webp","hash":"13f2331d442bcc3fb1c67742e5c7b283f80a633b","modified":1757764131449},{"_id":"source/images/meme/朋友像雪花.webp","hash":"5d728c7a50cc8966cb616586788348051859bd36","modified":1757764131449},{"_id":"source/images/meme/机械电锯.webp","hash":"1491ccda8c4976f81fd002629664dac92c1511eb","modified":1757764131449},{"_id":"source/images/meme/是不是哥们.webp","hash":"1307cd73cd35fc397f38d904acfb67e8f757c0ab","modified":1757764131449},{"_id":"source/images/meme/欧洲用电量.webp","hash":"4fa57daae4ce3cea9f1301d899c07d3b0f30c7d3","modified":1757764131449},{"_id":"source/images/meme/水下无法呼吸.webp","hash":"00da62d773dbda39cd3a59e3385d6f0b16579c29","modified":1757764131449},{"_id":"source/images/meme/毕姥爷的说话之道.webp","hash":"2c83cc156bd19433394de3d3c0d6fe4a6d0b10e4","modified":1757764131449},{"_id":"source/images/meme/永远的家.webp","hash":"76e8c8966120033eadb7bd3dac1aa73d57aeb7e7","modified":1757764131449},{"_id":"source/images/meme/没人知道你是一条狗.webp","hash":"370c070ebbf8eae40f00de43b56e6b1ca0e81e0b","modified":1757764131449},{"_id":"source/images/meme/没有转角的人生.webp","hash":"e5369753a536d1fa91d28c0ef955e09359dbc573","modified":1757764131449},{"_id":"source/images/meme/滑.webp","hash":"3b8bbb888db9c1dfae106f3371e4e2c93f97c93c","modified":1757764131449},{"_id":"source/images/meme/注定孤独一生.webp","hash":"89d167fa94e23280c921305002d33504c71ebfb6","modified":1757764131449},{"_id":"source/images/meme/江湖义气.webp","hash":"33d2b73b2100973a4f5f6a75c611471ca26b69b7","modified":1757764131449},{"_id":"source/images/meme/海鸥为我停留吧.webp","hash":"75e64b76ed4f4799d7fde1482093cb1b63024800","modified":1757764131449},{"_id":"source/images/meme/满电猫猫.webp","hash":"205c98ffc6d14a4157f163e218d3f9f8ed332f40","modified":1757764131453},{"_id":"source/images/meme/漫画是假的.webp","hash":"f781137eb3636f72579e64d463a66561f496bf81","modified":1757764131453},{"_id":"source/images/meme/灭烟台.webp","hash":"092a1e5b712b60ea61bb476776471041560ae1e7","modified":1757764131453},{"_id":"source/images/meme/灵魂永远昂首挺胸.webp","hash":"fb931ddfeb935c0f40b34ec9dfb43e896870d24a","modified":1757764131453},{"_id":"source/images/meme/熬夜的原因.webp","hash":"ed59f84db83c61ed9abf0870c37406948d4adf81","modified":1757764131453},{"_id":"source/images/meme/猫猫碰拳.webp","hash":"563d1ac77552cfec1bbf0aa71144ac3e2fd68ef4","modified":1757764131453},{"_id":"source/images/meme/生日快乐.webp","hash":"5ec0e7ab0dddac48a0f4772d6bd0ccd32889c2f1","modified":1757764131453},{"_id":"source/images/meme/现在的小孩.webp","hash":"8c695500fde744063cdd592116023fba57aa43f4","modified":1757764131453},{"_id":"source/images/meme/甜上心尖.webp","hash":"3c2c43c5d63562c899511626f99377b3e1f59df1","modified":1757764131453},{"_id":"source/images/meme/白铅笔.webp","hash":"c398d42263091d3fbf9e121fdfe6795c06ce4b0d","modified":1757764131457},{"_id":"source/images/meme/白鸟过河滩.webp","hash":"59b3141a21f109a4220a3fa72baa14a5c2c39ace","modified":1757764131457},{"_id":"source/images/meme/眉眼弯弯.webp","hash":"4497e3e8e10b3ce2605103f28513de5ad12a8ff5","modified":1757764131457},{"_id":"source/images/meme/看夜空看什么.webp","hash":"1716b43c120909ef14bbf6394082737cf2a65290","modified":1757764131457},{"_id":"source/images/meme/生活点滴.webp","hash":"a725dabdc9e5207092968e9df7c89234a04ec823","modified":1757764131457},{"_id":"source/images/meme/社恐如何交朋友.webp","hash":"4216e209d1f6a2f8be4484fbbf5da36b29ba34ad","modified":1757764131457},{"_id":"source/images/meme/睡5个小时.webp","hash":"66cde1b0f746d30b3a8335d16ebf6ad8504bbe6b","modified":1757764131457},{"_id":"source/images/meme/离你家超级远.webp","hash":"46b5d908f727f373dbb06f8568a8b7f0e2185ff8","modified":1757764131457},{"_id":"source/images/meme/网卡.webp","hash":"b8c6c3d40b8ef1fdc8fa788ce0a42fbd48437450","modified":1757764131457},{"_id":"source/images/meme/给你薯条.webp","hash":"467fe8d5a3854923a606c102e7b6a62b7efc6a29","modified":1757764131457},{"_id":"source/images/meme/穿越.webp","hash":"891d422c199164c4ea0e232801b88f4f79d67980","modified":1757764131457},{"_id":"source/images/meme/罗马空军基地.webp","hash":"f9ff3ec34ffc85e402cebcaca838e2f7bbe51867","modified":1757764131457},{"_id":"source/images/meme/线粒体.webp","hash":"ee678c32b24fdab29b8f497b72f23dc4636c53c4","modified":1757764131457},{"_id":"source/images/meme/考试一点也不难.webp","hash":"60401f2b3cd8d1953e0fc0472ecc3b7f522bb58c","modified":1757764131457},{"_id":"source/images/meme/脑控.webp","hash":"2a853da564d3d5433c0675ddaf13e267ca43a399","modified":1757764131457},{"_id":"source/images/meme/自愿开学.webp","hash":"91b5235e5f05d13239f67e01810182c8b032b8be","modified":1757764131457},{"_id":"source/images/meme/菜杆.webp","hash":"ecea318a74c4ae5e670ae30ae3981df686f7db30","modified":1757764131457},{"_id":"source/images/meme/芬达海.webp","hash":"ea45fd397fb214a9cd56bc23d467a63ebf2cc4b4","modified":1757764131457},{"_id":"source/images/meme/蓝移.webp","hash":"fe7803abdfe49a747b72e4c3f3c5318ea8028d5f","modified":1757764131457},{"_id":"source/images/meme/虾射手.webp","hash":"291326148df74657e4d9adea287aafdbfc7f9caf","modified":1757764131457},{"_id":"source/images/meme/蔬菜去农药残留.webp","hash":"facb49d4ce74f52036cb51a5bc4ff69447807bd2","modified":1757764131457},{"_id":"source/images/meme/谁让你开得那么快.webp","hash":"61219a90da27a2f8b139153fe0dcadb2351a4802","modified":1757764131461},{"_id":"source/images/meme/蜂蜜蛋糕的组成成分.webp","hash":"84c60adba4fa249b7f3b9bdfb8c7f8e370ced013","modified":1757764131457},{"_id":"source/images/meme/解冻.webp","hash":"d6a8d3c2de44cf7d934ff61b04fb9f8994e0d649","modified":1757764131457},{"_id":"source/images/meme/超级摇滚迷.webp","hash":"75f72a41bba3490544ca64cf517d464c8906ecfe","modified":1757764131461},{"_id":"source/images/meme/过去和未来不存在.webp","hash":"6aa4de9354a329e250fbd16f9d13190b0598c082","modified":1757764131461},{"_id":"source/images/meme/那一夜.webp","hash":"b97713a3572a9d892dc710c1cbbe4891517e0ffe","modified":1757764131461},{"_id":"source/images/meme/身在福中不知福.webp","hash":"a2b535b28b3dc148a2827463c3dcf17169178d04","modified":1757764131461},{"_id":"source/images/meme/速度比光快的代价.webp","hash":"48914280d47948153a06c4e86dfbeb88e4bd3b41","modified":1757764131461},{"_id":"source/images/meme/闸机.webp","hash":"3ebd1aaf67fd7c7488cc88877a705d95123d9810","modified":1757764131461},{"_id":"source/images/meme/随500.webp","hash":"f28b178ac82f79e55b9b28732ccf0d64fe9cc055","modified":1757764131461},{"_id":"source/images/meme/随6500.webp","hash":"bc5669a608d87e3baf7870b43a6a69351bdd5431","modified":1757764131461},{"_id":"source/images/meme/重力.webp","hash":"26162ab9052661a4dbe3d5e5f3fc64c4f83769fe","modified":1757764131461},{"_id":"source/images/meme/非也兄台.webp","hash":"88b4e8c5ccb0a4f8b6212a3b10d4ce9ca6ab10f0","modified":1757764131461},{"_id":"source/images/meme/非我也图也.webp","hash":"c3fa5b31ec89c80a1ab7aa1c067902849a2ccb86","modified":1757764131461},{"_id":"source/images/meme/鲁南精神.webp","hash":"bdb37d43ac3d327b172c608af9483f26d9373673","modified":1757764131461},{"_id":"source/images/meme/音乐怀旧.webp","hash":"dc1b4dfed227969e836f11c2764edd0f033565c6","modified":1757764131461},{"_id":"source/images/meme/青龙帮.webp","hash":"7b21b56845452a6d5acdb929a4e2529739b2774f","modified":1757764131461},{"_id":"source/images/meme/我的画笔和颜料.webp","hash":"7bbeb6f7ba97fa2f0530ad04f46a6c642d4db39d","modified":1757764131445},{"_id":"source/images/meme/猫猫图.webp","hash":"d48ecf2ebf6bc7b34fca4807102ef7ef0c953fc5","modified":1757764131453},{"_id":"source/_posts/旧事与牢骚.md","hash":"814a66936e7110e053e828d4b86ce711907e92ab","modified":1758850325116},{"_id":"source/_posts/过去的笔记.md","hash":"a6acfb61532cd2a9103ff76e5db363e00b6351a2","modified":1757861417671},{"_id":"source/images/about-1.webp","hash":"8268f9549ed566ef63fa9a940ccea93854e037e1","modified":1757764131381},{"_id":"source/images/hw-1.webp","hash":"58a6647aecc6d6be2420f4ab01ed7f6701aaa5b3","modified":1757764131429},{"_id":"source/images/hw-2.webp","hash":"18e8c51cc1dd7f868e3a7015eb3dc5fe9ff4025e","modified":1757764131429},{"_id":"source/images/wang.webp","hash":"8f5ba16a17d2abf1109cb8c9bda85b6cb9dffa10","modified":1757764131465},{"_id":"source/images/hw-3.webp","hash":"e9852802fe42cc0d31a127dc934208f5815a85dd","modified":1757764131429},{"_id":"source/images/game/C117.webp","hash":"7d4fa3795b4cd91da5a8156a4e04da945375761d","modified":1757764131385},{"_id":"source/images/game/metal-slug.webp","hash":"b57e5e2ca467894570a18e410855ee9af10ecbd5","modified":1757764131385},{"_id":"source/images/game/pm-2.webp","hash":"af971cba04990b72934f3f2e080c038da43cb19e","modified":1757764131401},{"_id":"source/images/old/2.webp","hash":"160ea5d58913c0a0cc77146c2fa1a20b25be308d","modified":1757764131461},{"_id":"source/images/old/5.webp","hash":"46014f4da68c3cea304d3b2ab2d207582161fbd0","modified":1757764131465},{"_id":"source/images/old/6.1.webp","hash":"ef20d3c2e1a787c899085406528da43f68bf6076","modified":1757764131465},{"_id":"source/images/old/4.webp","hash":"b01d2369fe6c752272d7dfd2e6dc9b733e98f990","modified":1757764131465},{"_id":"source/images/old/8.webp","hash":"decd8bf9ba2c950170f5e7ac14831d690b31c199","modified":1757764131465},{"_id":"source/images/old/7.1.webp","hash":"1ad1e2ddab83fb981a50b5f30f2cefe868e1b874","modified":1757764131465},{"_id":"source/images/meme/12点之前睡着.webp","hash":"d4d38c55a2d161b76e01712cc452a7c8d49b8b06","modified":1757764131429},{"_id":"source/images/old/2.1.webp","hash":"4bc0a40f8a9174a7de9cba69f10dddf16033425a","modified":1757764131461},{"_id":"source/images/meme/一周.webp","hash":"049fb1cdd279fcd539b5b22d1473ece012cfe35a","modified":1757764131433},{"_id":"source/images/meme/不是浪费时间.webp","hash":"ea2c39f788c23479882fee62e1240c59161fc652","modified":1757764131433},{"_id":"source/images/meme/一辈子不关心哲学.webp","hash":"442966e529b963714698ff4a21ab99801ead3768","modified":1757764131433},{"_id":"source/images/meme/为什么活.webp","hash":"2d51fce84daa1da3555346afc199d2efe5afbb2e","modified":1757764131433},{"_id":"source/images/meme/互联网的尽头.webp","hash":"2f3f20067485dafa71898e76293622c6e72ab7ec","modified":1757764131433},{"_id":"source/images/meme/中式恐怖.webp","hash":"13d5cf7881295195d966db8467979c0f0792b5ae","modified":1757764131433},{"_id":"source/images/meme/做一个对社会有副作用的人.webp","hash":"9d7730b9af2f361baef572bea755244b8d7d4b69","modified":1757764131433},{"_id":"source/images/meme/他俩还认识.webp","hash":"f41fe7eb58f3914f0fb49a17caa6a103e50b3d08","modified":1757764131433},{"_id":"source/images/meme/充电.webp","hash":"ba8a33aeca0ab1f0208f40c8d4579f53c4bf38ef","modified":1757764131433},{"_id":"source/images/meme/分支.webp","hash":"423c8c5f6235fef21c1cd652755dd85273dd39a0","modified":1757764131437},{"_id":"source/images/meme/几个星期后我的家.webp","hash":"fd72185d3f2068e71fcd87589491967eb9160625","modified":1757764131437},{"_id":"source/images/meme/合适的人.webp","hash":"b6455e31dad413ed467c1d73bbb1e4ebdeb715f6","modified":1757764131437},{"_id":"source/images/meme/哲学格言生成器.webp","hash":"7007ae1ac9a6485187ed6f20865a88a6ce3c12f5","modified":1757764131437},{"_id":"source/images/meme/墨菲定律.webp","hash":"9507af2061d6bb5b51158d601743e26db01eb976","modified":1757764131441},{"_id":"source/images/meme/字幕没有加描边.webp","hash":"03fa867093f855ce4f448ef62e30b48ea03beacb","modified":1757764131445},{"_id":"source/images/meme/我爱我家.webp","hash":"5819fa64371b676601fb89f50a5989063a3fe6f0","modified":1757764131445},{"_id":"source/images/meme/打工不仅能致富.webp","hash":"58f59e08dc2a54544d4b31e983b97e47c5dd3d77","modified":1757764131449},{"_id":"source/images/meme/找不到出路的魔方脸.webp","hash":"a358f06d797b8fc276d4c9c4973368d73ec5b222","modified":1757764131449},{"_id":"source/images/meme/摩托车.webp","hash":"657f250a099c727c9631a7ea51e6764f1eab44ed","modified":1757764131449},{"_id":"source/images/meme/找得到出路的魔方脸.webp","hash":"096e7d801c3846c20400286bb19a49b8f0221ebd","modified":1757764131449},{"_id":"source/images/meme/改变与得过且过.webp","hash":"0b2327ceefa3d615eb06cb587ffdf473e7787cd1","modified":1757764131449},{"_id":"source/images/meme/未来是走那边.webp","hash":"ff82f357ace95cdf79585e5f461cef42baf7526c","modified":1757764131449},{"_id":"source/images/meme/王八蛋.webp","hash":"2c1b85ed532f3473c3a197a25373bb659d517e9a","modified":1757764131453},{"_id":"source/images/meme/生活小常识.webp","hash":"3dc0db9d2c1414493f2147f220fdfd2d0112edf5","modified":1757764131457},{"_id":"source/images/meme/番茄炒你儿子.webp","hash":"e67382f94e9fe307a3a9320ceadf8c17c8ae78fd","modified":1757764131457},{"_id":"source/images/meme/笑容.webp","hash":"d23411cb61b6b0a9a1172d1bb79190be2e40c8d0","modified":1757764131457},{"_id":"source/images/meme/禅尼丝空腹.webp","hash":"491de12e268082212eaaa350e1d9b4d114a97fb5","modified":1757764131457},{"_id":"source/images/meme/老虎卷.webp","hash":"885347cae629fc987138227626a25c53274b67ee","modified":1757764131457},{"_id":"source/images/meme/蒜泥猫.webp","hash":"92075e285027c40e5e45c8b5d1b372231274cd1f","modified":1757764131457},{"_id":"source/images/meme/请勿投喂.webp","hash":"283cadb2b993181fc3624d588b9a386e7234b557","modified":1757764131457},{"_id":"source/_posts/心理学碎片.md","hash":"856521c5ac59e377b5022f0cb42bf401cb762b72","modified":1758808046214},{"_id":"source/images/meme/烧.webp","hash":"4da73010eaadbe337c302e93ae66db3937cb45b6","modified":1757764131453},{"_id":"source/images/打燕窝.webp","hash":"e8fc46b9748aa68053a711c8c139ab353df579a4","modified":1757764131469},{"_id":"source/images/old/7.2.webp","hash":"89b2fa8e2e01585bdd03cdb0b5bff207246c64ab","modified":1757764131465},{"_id":"source/images/old/20130000-约初中.webp","hash":"364d06a78ea6ee8e54f163f2c117883322eefa13","modified":1757764131461},{"_id":"source/images/meme/平常的痛苦.webp","hash":"7f91a4f32a86ccbbf5c8f42be08416e693d0bb24","modified":1757764131445},{"_id":"source/images/game/4399-on-vscode-1.webp","hash":"eb8a8c8cca9f1047f9af3bc4e127196d7530f957","modified":1757764131385},{"_id":"source/images/game/peace-2.webp","hash":"8e8029ce1418e0a4a057b3fcca9adb38b121c16e","modified":1757764131393},{"_id":"source/images/game/4399-on-vscode-2.webp","hash":"9cacad63bfebc4df5be50079bb2ff50ddb60e7a4","modified":1757764131385},{"_id":"source/images/game/river.webp","hash":"6d1ffc1b4dc8730a83ce44ba29474e3afae8338f","modified":1757764131405},{"_id":"source/images/old/4.1.webp","hash":"0763932ff3f545186f14015900c557e90f6dcc7b","modified":1757764131465},{"_id":"source/images/old/1.webp","hash":"891881f897e8ae2ecc7d95e59c8d5c006cefb626","modified":1757764131461},{"_id":"source/images/meme/喷猫.webp","hash":"d70d777d7357a113b03f1f840533f690eb7d5862","modified":1757764131437},{"_id":"source/images/meme/四个星期后的超市.webp","hash":"3a11ad5e89365d86440bb7667e4c7d02949f905b","modified":1757764131437},{"_id":"source/images/game/peace-1.webp","hash":"37addc2ad97569016f22221db82882d858f52c96","modified":1757764131389},{"_id":"source/images/meme/好吃就行.jpg","hash":"301adb876e478456d00abcee388834bfaec53f5b","modified":1757764131441},{"_id":"source/404.html","hash":"615b979b224a4f316271c3d948b7941d21a825f3","modified":1757764131361},{"_id":"source/images/meme/关键时刻.webp","hash":"97f50092633d99490baf51fd382f5d4a209053a7","modified":1757764131433},{"_id":"node_modules/hexo-theme-next/_vendors.yml","hash":"f48411daaf3f99a93ffa3f44791114087a356677","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/package.json","hash":"a746c715ea84a15209dd12ac24cc4a7498399291","modified":1757772894098},{"_id":"node_modules/hexo-theme-next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1757772894122},{"_id":"node_modules/hexo-theme-next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1757772894106},{"_id":"node_modules/hexo-theme-next/README.md","hash":"20d3aab17b7d9b7ab537800a5ee932af8438664a","modified":1757772894130},{"_id":"node_modules/hexo-theme-next/_config.yml","hash":"df15ee5204757684b0c22877d3cf4e8ba7d3686d","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1757772894362},{"_id":"node_modules/hexo-theme-next/languages/de.yml","hash":"79b37df731c29665dee6cd7c90d278e1edfb6e24","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1757772894130},{"_id":"node_modules/hexo-theme-next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1757772894106},{"_id":"node_modules/hexo-theme-next/languages/eo.yml","hash":"e34bb33ae827bf2f0727088599a73bc64bdad1b0","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/es.yml","hash":"dffc63ef42e1266b88e0acf08994fd17a9908d53","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/bn.yml","hash":"564bed75da6e05b11dce6164508f97a15e2fb6c2","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/languages/fa.yml","hash":"f3ffc444599f4ac92d62e9ed00a1490ebc277d70","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/fr.yml","hash":"8ac44e58f71a38b7697a2f7f98a6971ed818cb5b","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/id.yml","hash":"929df147f4f17d638b07de5fe52ca13e2549ab1c","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/it.yml","hash":"16d716ecfd748def2f6486ef5a82d0ab7ceb4890","modified":1757772894370},{"_id":"node_modules/hexo-theme-next/languages/ja.yml","hash":"543222bfc516aab6c33e8534f807972ecb8943a9","modified":1757772894374},{"_id":"node_modules/hexo-theme-next/languages/ko.yml","hash":"d345a303310c8a5f4836c3683f3580f861ebd1b4","modified":1757772894374},{"_id":"node_modules/hexo-theme-next/languages/pt-BR.yml","hash":"76b8576ce228d540a16b1f0af5af2cce20923194","modified":1757772894374},{"_id":"node_modules/hexo-theme-next/languages/nl.yml","hash":"3cb3687696635ec71b4ca40c5fc43b56acc8843e","modified":1757772894374},{"_id":"node_modules/hexo-theme-next/languages/ru.yml","hash":"c6d8de0ff7d8148d09993257cfd3b7aca755696c","modified":1757772894378},{"_id":"node_modules/hexo-theme-next/languages/si.yml","hash":"2d712eedf3f60d04d36c3108cf5a12e2a52e875c","modified":1757772894378},{"_id":"node_modules/hexo-theme-next/languages/tr.yml","hash":"a57e4ed089b893a95f5e1ecff17ce625165f4d46","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/languages/uk.yml","hash":"ff537047b4b4c3ca9a7b64fa7f428a9942751eeb","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/languages/tk.yml","hash":"511726054873f6f8d7ce0d2e803f6731de0ddbe7","modified":1757772894378},{"_id":"node_modules/hexo-theme-next/languages/zh-CN.yml","hash":"741d7efe0262c9cdc2c648014b55599665d90f6b","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/languages/vi.yml","hash":"7ebcba5e1128784195e4681dffc9d34c4e873fec","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/languages/th.yml","hash":"6829e998b39f8f143e20b276bb1f62d95a29de58","modified":1757772894378},{"_id":"node_modules/hexo-theme-next/languages/pt.yml","hash":"b62faaa767a45a613dd042b5f1903675eb5a8cf9","modified":1757772894374},{"_id":"node_modules/hexo-theme-next/languages/en.yml","hash":"ba0fd79a2b1d8db01a034180556061745965ff05","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/languages/zh-HK.yml","hash":"8eb6a9f231ce1bfa54cc54418ccf14f01dcc9a31","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/layout/_layout.njk","hash":"fc0a45112f2dcfc2642404e8934ea32a793c3bd7","modified":1757772894134},{"_id":"node_modules/hexo-theme-next/languages/zh-TW.yml","hash":"5c0f00cdac3f4727b880dd223f622a535736fa8e","modified":1757772894382},{"_id":"node_modules/hexo-theme-next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1757772894138},{"_id":"node_modules/hexo-theme-next/layout/page.njk","hash":"af6d7570621be760536c216a56d74e40a1cceae2","modified":1757772894194},{"_id":"node_modules/hexo-theme-next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1757772894150},{"_id":"node_modules/hexo-theme-next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/post.njk","hash":"0bfce9f133f501a9a4837257e3b862b3bbca15be","modified":1757772894206},{"_id":"node_modules/hexo-theme-next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1757772894030},{"_id":"node_modules/hexo-theme-next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1757772893918},{"_id":"node_modules/hexo-theme-next/scripts/events/index.js","hash":"bd9ea82376cd87df611ea3ae077875c7c595a3df","modified":1757772893994},{"_id":"node_modules/hexo-theme-next/scripts/filters/minify.js","hash":"2063aaa1db448ebcf7b0fdbbc54d3991a368bbd3","modified":1757772894050},{"_id":"node_modules/hexo-theme-next/scripts/filters/post.js","hash":"fdc8a0af90035e89c3fcb754a0eb189b8951a2bc","modified":1757772894074},{"_id":"node_modules/hexo-theme-next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1757772894182},{"_id":"node_modules/hexo-theme-next/scripts/helpers/engine.js","hash":"049b1a0b66563e39f68710bb576a8c7342ae749c","modified":1757772893938},{"_id":"node_modules/hexo-theme-next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1757772893958},{"_id":"node_modules/hexo-theme-next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1757772894058},{"_id":"node_modules/hexo-theme-next/languages/ar.yml","hash":"7d0f39e8684284a04bb9808521c87fecda8bd131","modified":1757772894366},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-config.js","hash":"25bb3ec3c7c456aa1d1650eb139605b7df7394eb","modified":1757772894062},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-paginator.js","hash":"e86c764b546e4fbb87970cabc4135a56f9ef9fe1","modified":1757772894062},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-url.js","hash":"6281d47c1de98eb38f3aa0f6df29bbb19d412173","modified":1757772894062},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-vendors.js","hash":"af3946a595f997eb43d9af87428e4898c9acbc82","modified":1757772894066},{"_id":"node_modules/hexo-theme-next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1757772893818},{"_id":"node_modules/hexo-theme-next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1757772893822},{"_id":"node_modules/hexo-theme-next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1757772893826},{"_id":"node_modules/hexo-theme-next/scripts/tags/group-pictures.js","hash":"f57f7e09eb6220f681fa8385082b0960502ce5c4","modified":1757772893966},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"12a6631617695504d5cf2a94b57d87bd331bef6f","modified":1757772894118},{"_id":"node_modules/hexo-theme-next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1757772894022},{"_id":"node_modules/hexo-theme-next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1757772894018},{"_id":"node_modules/hexo-theme-next/scripts/tags/mermaid.js","hash":"7d7bbc4a9970bd4c5449bc71b94364a8ec61e5d2","modified":1757772894038},{"_id":"node_modules/hexo-theme-next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1757772894066},{"_id":"node_modules/hexo-theme-next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1757772894070},{"_id":"node_modules/hexo-theme-next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1757772894094},{"_id":"node_modules/hexo-theme-next/docs/ru/README.md","hash":"0be2d7a75ffc3d9a963cf89a13bd1b50579f8304","modified":1757772894126},{"_id":"node_modules/hexo-theme-next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1757772894082},{"_id":"node_modules/hexo-theme-next/scripts/tags/wavedrom.js","hash":"b44dfeeb58b41945d469141787f3dbce4b117d08","modified":1757772894094},{"_id":"node_modules/hexo-theme-next/scripts/tags/index.js","hash":"1f6aba7820f1fb58b61969485148db21846e1aa9","modified":1757772893998},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1757772894118},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/README.md","hash":"287f57dbdfd23341800a0ff310f3474272b9dcc8","modified":1757772894126},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1757772893450},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1757772894222},{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1757772894222},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1757772894222},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1757772894362},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","hash":"dadc81256afb127b77eac6763d5ee0ec9c77f0a3","modified":1757772894334},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","hash":"921a58577f411cf4eb5cfd66db0a241f8f88578c","modified":1757772894326},{"_id":"node_modules/hexo-theme-next/source/css/_colors.styl","hash":"ebfe0954e3931431f46f913abe08d0212e06e7c2","modified":1757772894226},{"_id":"node_modules/hexo-theme-next/source/css/_mixins.styl","hash":"bbeae369eaba9a2565fc359a5b79184d21bdd167","modified":1757772894242},{"_id":"node_modules/hexo-theme-next/layout/_macro/post-collapse.njk","hash":"313637fe3569f98fd926e8cd0fcc75d098eb6e6e","modified":1757772894198},{"_id":"node_modules/hexo-theme-next/layout/_partials/footer.njk","hash":"fbf8232cacf0df87e88e74860be66c9f86018302","modified":1757772894166},{"_id":"node_modules/hexo-theme-next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/layout/_partials/pagination.njk","hash":"bc719473ed5948ab6859449d60b8d36cfc1542b4","modified":1757772894194},{"_id":"node_modules/hexo-theme-next/layout/_partials/widgets.njk","hash":"d83fb59f02c5e6630a7770401a05c02f6f07358b","modified":1757772894222},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1757772894362},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1757772893802},{"_id":"node_modules/hexo-theme-next/layout/_scripts/vendors.njk","hash":"be80b9fe415a9a09d74c28e230995fd292dfc123","modified":1757772894214},{"_id":"node_modules/hexo-theme-next/layout/_scripts/index.njk","hash":"51704a2eadb0d363762ebf2e44994696e0843e40","modified":1757772894178},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1757772893882},{"_id":"node_modules/hexo-theme-next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1757772893902},{"_id":"node_modules/hexo-theme-next/layout/_partials/comments.njk","hash":"d0c470b0f6690aa217e9ada848c5e2e73fb27c6f","modified":1757772894158},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","hash":"3864e56a829b698b98ec8d93b8916271ba6fd015","modified":1757772894054},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","hash":"0996078604f356a4f6692b9b0838038b3b10aa8a","modified":1757772894070},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1757772894078},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","hash":"8e2d589585f5270ee90285d3e65b69923c7629d8","modified":1757772894058},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1757772894078},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1757772893878},{"_id":"node_modules/hexo-theme-next/layout/_third-party/addtoany.njk","hash":"ef64c6bfb8540cd874701236b9be47db2496e98e","modified":1757772894134},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","hash":"b2c0fd95770e58c25c9f99e1d66fe0e625e3cdab","modified":1757772894086},{"_id":"node_modules/hexo-theme-next/layout/_third-party/index.njk","hash":"dfd7cdd6ba89f8c3deabc27726c7a350cadafd11","modified":1757772894178},{"_id":"node_modules/hexo-theme-next/layout/_macro/post.njk","hash":"952449064fcb6a5cefc281b585f9149809f857f1","modified":1757772894202},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/highlight.js","hash":"8a8f752260be5b8098393f9879b61ffe904465e8","modified":1757772893986},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1757772894002},{"_id":"node_modules/hexo-theme-next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1757772894162},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/config.js","hash":"9ec51eb61f7fee612ffc5252f489003a0fa301fc","modified":1757772893898},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/utils.js","hash":"5942feb3f31ed3480bf50b0f5a4a305b5bdca3d6","modified":1757772894082},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1757772893886},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1757772894054},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/vendors.js","hash":"e2b4a9d6b08155735ec336eedc506763d5671821","modified":1757772894090},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/changyan.js","hash":"5798cfc8f63665031dd3e01debed051628cec319","modified":1757772893846},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1757772893962},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1757772893906},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqusjs.js","hash":"a600a98e7436edeb31e291abca359885567df3c9","modified":1757772893926},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1757772893922},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1757772894090},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1757772894006},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1757772894022},{"_id":"node_modules/hexo-theme-next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1757772894190},{"_id":"node_modules/hexo-theme-next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1757772894206},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head-unique.njk","hash":"8da52a144060db1a0a088ccb2e6cc8376d1fce70","modified":1757772894170},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Muse.styl","hash":"879b49f693af0c04c285b2dd0c9cccaf77347b7c","modified":1757772894334},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head.njk","hash":"5388b157bba4a40b9312f4a45c6678974ccf0837","modified":1757772894170},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Mist.styl","hash":"2c800eaab6c613e5d091be2111aaa786641aa0c2","modified":1757772894330},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1757772894282},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/brand.njk","hash":"dd9c4c03e99dfde0dfb8edefcb2c933f2f560efc","modified":1757772894142},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Pisces.styl","hash":"20d5c6aa136bbb55e03906d98ee90ad3fbaa80a7","modified":1757772894338},{"_id":"node_modules/hexo-theme-next/source/css/_variables/base.styl","hash":"e814de4dab6aee6153d0a46438c231f94ed05e73","modified":1757772894258},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1757772894174},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1757772894190},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu-item.njk","hash":"41a8b0cc16f60fa085cb719d07216d86b6bc4bf8","modified":1757772894190},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1757772894194},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1757772894150},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1757772894206},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1757772894146},{"_id":"node_modules/hexo-theme-next/layout/_partials/sidebar/site-overview.njk","hash":"bc5708e38b6070dff0cab6bf9480971017ce4dda","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-copyright.njk","hash":"bfff923526d6800218f08dba6ce0bbf5c17755fd","modified":1757772894198},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1757772894198},{"_id":"node_modules/hexo-theme-next/layout/_partials/search/index.njk","hash":"6ad43135bd3aecf933ffdd750763e27ade36f97c","modified":1757772894174},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-reward.njk","hash":"e8b8a7c41e9ec612d0c0c73419529d55d1c16256","modified":1757772894202},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-related.njk","hash":"e0986db00a0201dd3c60570f964829c84ba5bc68","modified":1757772894202},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-followme.njk","hash":"c1e33b4889f75acc490af3c8bde0ec56c518ff41","modified":1757772894198},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","hash":"5276c8f78ee562a8965216dc67d762e59cb4a9f2","modified":1757772893582},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-share.njk","hash":"16696990e4ce65fc8db18c4635082a5d5d06ff07","modified":1757772894202},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1757772893942},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1757772894074},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1757772894066},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1757772894154},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1757772894142},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1757772894166},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1757772894158},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/index.njk","hash":"f900306497b133e8b098bd9f4b96b93d1d96c185","modified":1757772894178},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"9dc00fcb0a05899f048eace9f9160b78956655d5","modified":1757772894190},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1757772894170},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/matomo.njk","hash":"4e89648a8ec8194c5823064cbca39c938a799006","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/plausible.njk","hash":"ef9f2bb7110507f1c4336800af9157d5fa9765bd","modified":1757772894198},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1757772894154},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/umami.njk","hash":"3343750682fbd8535e50f8129be3003ad26015b4","modified":1757772894210},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1757772894162},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1757772894166},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1757772894162},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1757772894214},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1757772894182},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1757772894178},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/algolia-search.njk","hash":"41b28f05e6233fb37700f7151f55868be10a0965","modified":1757772894138},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/katex.njk","hash":"1ebf658690468ea197bdd0416eb7cfa4bd0b083a","modified":1757772894182},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1757772894190},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1757772894194},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/wavedrom.njk","hash":"02202bf563fb5eedde2ccad4d6c5b9109d30a703","modified":1757772894214},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1757772894150},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1757772894182},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1757772894310},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1757772894166},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/mobile.styl","hash":"1dbf2c339adcd27026c3a2ded32ee91ce08cea26","modified":1757772894334},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/index.styl","hash":"2298e521253b3bf376a2412271bc2a7d305051f3","modified":1757772894286},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1757772894186},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1757772894346},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_header.styl","hash":"dafc6d23c80d6fe3e55a7711e94210d2479b629a","modified":1757772894230},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Gemini/index.styl","hash":"9dfe853c901bdc52fc950bacdf15484dbb9bf140","modified":1757772894322},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_layout.styl","hash":"fa4fd8f76464e214fb7318f325b13c2b62f4b478","modified":1757772894238},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/back-to-top.styl","hash":"b8445c828d78a38e2de50bdc86b3bff66285ea0f","modified":1757772894250},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_posts-expand.styl","hash":"485d23ccb42c0d0c8ead7ea8930dd3e06d79a285","modified":1757772894242},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_menu.styl","hash":"f23c53e32d140091b819be2603d1afbbb5d66933","modified":1757772894238},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1757772894322},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_layout.styl","hash":"6569a6640f79d247a8235b3914772c0e2f99ead2","modified":1757772894238},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_header.styl","hash":"3fbfab591f280e2e7f3b0265901c93bc4bd137ed","modified":1757772894234},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_menu.styl","hash":"e31f6adbb22a451f07e4661cff9a2f12e4e99a36","modified":1757772894242},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1757772894246},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1757772894326},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_header.styl","hash":"dc03835e42d82eaf2633cf3b627990ad3e1f5967","modified":1757772894238},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_menu.styl","hash":"549541d3a62d296427426fde8976289cb7ee2cc4","modified":1757772894242},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1757772894246},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sidebar.styl","hash":"bc0b1b8312ec2e076c802419d603e382a1c32232","modified":1757772894246},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sidebar.styl","hash":"c29a827e82d2820ed8977c92994da73721200fac","modified":1757772894246},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_layout.styl","hash":"a92c4eb16bdb7806079467eb022ccf193bb0f794","modified":1757772894238},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1757772894270},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/base.styl","hash":"d137b54b6f5fae958e9724cdee8584745a41f07a","modified":1757772894254},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1757772894274},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1757772894326},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1757772894334},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/pagination.styl","hash":"f4228c759db4a650c8d38745c2edd1dc83c45687","modified":1757772894338},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1757772894358},{"_id":"node_modules/hexo-theme-next/layout/_macro/sidebar.njk","hash":"547c62ab14d9e05d2d9116db9048a677fbe1fb6d","modified":1757772894206},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1757772894318},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1757772893770},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1757772894034},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/toggles.styl","hash":"69c66aab4651e2e7ae9e65f08600144970648c60","modified":1757772894358},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1757772893970},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1757772893966},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1757772893862},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1757772893962},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1757772893922},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1757772894006},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1757772894090},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1757772894014},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1757772894026},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","hash":"111f60e26b82b4d5be4357737e9273617778c9a9","modified":1757772893698},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1757772894034},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1757772894082},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","hash":"4262628e173b16c4c6c18f817173dd103fb9e9a8","modified":1757772894030},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1757772893954},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","hash":"1d1b6d847215b16f26b230859d7e16501190ecc0","modified":1757772894046},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1757772894018},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1757772894070},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1757772893878},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1757772894286},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/index.styl","hash":"6e0d0796ef7fbbb62ffdfb448753a850de82c74f","modified":1757772894302},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/footer/index.styl","hash":"4e967702cf4c637132346bc74ec8854426f1a68c","modified":1757772894302},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1757772893930},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/index.styl","hash":"0944dc38b11e89b472a17607ef049393f2a0439f","modified":1757772894314},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-meta.styl","hash":"a851e9d5aefcd027c95eeb323860b6da70f202d1","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1757772894350},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/related-posts.styl","hash":"b05908f04ef95f2d91e6eba89b12411c378d050f","modified":1757772894346},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","hash":"40dcd10df6edf124088c329346e0cc0bdac74ef1","modified":1757772894098},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"c6a27beb3f741211a14576026f3b4cfc44cc6407","modified":1757772894350},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"0847400d8579b0a2dd1bf662c78954c10adf2680","modified":1757772894350},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"c2e354a565c8c1b32bd0ceacc972b17982758b67","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"46eece42510c2c89bb9209afb0262ad76a4b0b36","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"24752d145c6fb8f5344dca9c7b9640839c02e009","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"741566d6ac5f852b5c8dee6a8996b65e48e7c97f","modified":1757772894354},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1757772894358},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1757772894266},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/menu.styl","hash":"a3dd3edea9c01b66b28a8367185269b9dcc3bdee","modified":1757772894330},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/index.styl","hash":"098d4bd034e986fcf7e443eac4fc2193935461b7","modified":1757772894294},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-collapse.styl","hash":"809bab3414b1eb1ae44444eb821126868f764414","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-body.styl","hash":"56d5b7ff73f466c9ae54f7204ae899281295d749","modified":1757772894338},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-followme.styl","hash":"1ecfd64507954810b07a9d21fb5305b5378feda0","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-footer.styl","hash":"11497388f124bfbb4001495a67d3629a9f618405","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-reward.styl","hash":"b47fb36915962309553ff7fb1782341585ed2b76","modified":1757772894346},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-widgets.styl","hash":"ebfba158a0a4af3d1dabcacbc58986664de52140","modified":1757772894346},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/disqusjs.styl","hash":"877a537d5b95beb048142e4fdee6f17e6ef9c7bb","modified":1757772894282},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/gitalk.styl","hash":"8f094c4ac17e2ab45569b12d157747f9c7333c12","modified":1757772894286},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/index.styl","hash":"54d12e2c5d9982f7b9e5b23be5133954a8514e9d","modified":1757772894294},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1757772894330},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/search.styl","hash":"be60b8dacd4dc9d2b1b68982dc4f0c5325b9a315","modified":1757772894350},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1757772894270},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-header.styl","hash":"1191f1bfa5c43e54be8e5b3cc0d802984e161747","modified":1757772894342},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1757772894286},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/categories.styl","hash":"51a97a33879289904cb523ddc2d88b5b0c60fa72","modified":1757772894274},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1757772894346},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1757772894358},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1757772894262},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"7f8a7345e6537a62cd9e9a94c8f7065b541d9b04","modified":1757772894326},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1757772894326},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/index.styl","hash":"22cd37bd5df9972d5074710896aba4424ad5161c","modified":1757772894318},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/note.styl","hash":"8213015d9cae45d2c9945f8aba9d8db39c734efc","modified":1757772894334},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1757772894330},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/tabs.styl","hash":"33dd6ad015dde65fd46f34961655442e8e82b52e","modified":1757772894358},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/wavedrom.styl","hash":"af113411ad9cca7674177be36af8dd399680834d","modified":1757772894362},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1757772894338},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/fold.styl","hash":"42a0b65491ad85438596b3fe0b7f23973e4cef34","modified":1757772894282},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1757772894286},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/index.styl","hash":"138f78147bc6bd6005f329ada34dc79b7625542d","modified":1757772894314},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"f634f94828620e88c3f5a8db56f7944f6ba232b0","modified":1757772894278},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1757772894362},{"_id":"source/images/meme/猫猫工作.webp","hash":"94fa5ff515f301967eaefb09786545157f15515f","modified":1757764131453},{"_id":"source/images/game/smx.gif","hash":"c0ab8a713bce6a3614b19d236fa492ee725577f2","modified":1757764131409},{"_id":"source/images/meme/如此包装.webp","hash":"bda9978ce343f2589e149b29ccdc59321273ac07","modified":1757764131445},{"_id":"source/images/game/spm-2.gif","hash":"07a2ec1b86b6ffd1dd7b90cd80228c4fd27f63a8","modified":1757764131429},{"_id":"source/video/3.mp4","hash":"17496ba2828638e067b272db59717d0c1df0806d","modified":1757764131493},{"_id":"source/video/moto.mp4","hash":"6ad882da8e2aceedb54e4e55afa565743af11a82","modified":1757764131505},{"_id":"source/images/game/paper-attack.gif","hash":"c9230c6d087a00f06ea76ad73a14afe6fcfc7b32","modified":1757764131389},{"_id":"source/images/game/pm-1.gif","hash":"11a62de1f0567f8d643541bae89da27faf7b86d2","modified":1757764131401},{"_id":"source/video/2.mp4","hash":"246fd41af88ab7bc4d86ef92b1a45d4d3ef075e5","modified":1757764131485},{"_id":"source/images/game/spm-1.gif","hash":"e9a38cffa8e7158c2ceecac53244f95543ff31ca","modified":1757764131417},{"_id":"source/video/smg-ddxyh.mp4","hash":"7637396c7f9770fba8938890e08f8cf2471a50a0","modified":1757764131513},{"_id":"source/video/smg-top.mp4","hash":"bad49efc2f1771426c3081969e715a096a818399","modified":1757764131605},{"_id":"source/video/smg-pfysyh.mp4","hash":"b5af5a2d2e0f45bac2b68109ed329d60a7d8e2ce","modified":1757764131581}],"Category":[],"Data":[{"_id":"styles","data":".headband {\n  display: none;\n}\n"},{"_id":"head","data":"<script src=\"/blog/moon.js\"></script>"}],"Page":[{"_content":"const elements = {\n  hue: document.getElementById(\"hue\"),\n  saturation: document.getElementById(\"saturation\"),\n  valueInput: document.getElementById(\"value\"),\n  red: document.getElementById(\"red\"),\n  green: document.getElementById(\"green\"),\n  blue: document.getElementById(\"blue\"),\n  hex: document.getElementById(\"hex\"),\n  colorBox: document.getElementById(\"colorBox\"),\n  hueValue: document.getElementById(\"hueValue\"),\n  saturationValue: document.getElementById(\"saturationValue\"),\n  valueValue: document.getElementById(\"valueValue\"),\n  hexError: document.getElementById(\"hexError\"),\n  redValue: document.getElementById(\"redValue\"),\n  greenValue: document.getElementById(\"greenValue\"),\n  blueValue: document.getElementById(\"blueValue\"),\n};\n\nconst hsvToRgb = (h, s, v) => {\n  h *= 6;\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n\n  const [r, g, b] =\n    i % 6 === 0\n      ? [v, t, p]\n      : i % 6 === 1\n      ? [q, v, p]\n      : i % 6 === 2\n      ? [p, v, t]\n      : i % 6 === 3\n      ? [p, q, v]\n      : i % 6 === 4\n      ? [t, p, v]\n      : [v, p, q];\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n};\n\nconst rgbToHsv = (r, g, b) => {\n  [r, g, b] = [r / 255, g / 255, b / 255];\n  const max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  const d = max - min;\n  const s = max === 0 ? 0 : d / max;\n  let h = 0;\n\n  if (max !== min) {\n    h =\n      max === r\n        ? (g - b) / d + (g < b ? 6 : 0)\n        : max === g\n        ? (b - r) / d + 2\n        : (r - g) / d + 4;\n    h /= 6;\n  }\n\n  return { h, s, v: max };\n};\n\nconst rgbToHex = (r, g, b) =>\n  `#${[r, g, b]\n    .map((x) => x.toString(16).padStart(2, \"0\"))\n    .join(\"\")\n    .toUpperCase()}`;\n\nconst updateColor = (rgb, hsv) => {\n  // 更新RGB字段\n  elements.red.value = rgb.r;\n  elements.redValue.textContent = rgb.r;\n  elements.green.value = rgb.g;\n  elements.greenValue.textContent = rgb.g;\n  elements.blue.value = rgb.b;\n  elements.blueValue.textContent = rgb.b;\n\n  // 更新HSV字段\n  if (hsv) {\n    elements.hue.value = hsv.h.toFixed(2);\n    elements.hueValue.textContent = hsv.h.toFixed(2);\n    elements.saturation.value = hsv.s.toFixed(2);\n    elements.saturationValue.textContent = hsv.s.toFixed(2);\n    elements.valueInput.value = hsv.v.toFixed(2);\n    elements.valueValue.textContent = hsv.v.toFixed(2);\n  } else {\n    const { h, s, v } = rgbToHsv(rgb.r, rgb.g, rgb.b);\n    elements.hue.value = h.toFixed(2);\n    elements.hueValue.textContent = h.toFixed(2);\n    elements.saturation.value = s.toFixed(2);\n    elements.saturationValue.textContent = s.toFixed(2);\n    elements.valueInput.value = v.toFixed(2);\n    elements.valueValue.textContent = v.toFixed(2);\n  }\n\n  // 更新HEX字段\n  elements.hex.value = rgbToHex(rgb.r, rgb.g, rgb.b);\n\n  // 更新颜色框\n  elements.colorBox.style.backgroundColor = `rgb(${rgb.r},${rgb.g},${rgb.b})`;\n\n  // 清除错误信息\n  elements.hexError.textContent = \"\";\n};\n\nconst handleInput = (source) => {\n  let r, g, b;\n\n  if (source === \"hsv\") {\n    const h = parseFloat(elements.hue.value);\n    const s = parseFloat(elements.saturation.value);\n    const v = parseFloat(elements.valueInput.value);\n    ({ r, g, b } = hsvToRgb(h, s, v));\n    // 传递hsv参数以直接使用输入值\n    updateColor({ r, g, b }, { h, s, v });\n  } else if (source === \"rgb\") {\n    r = parseInt(elements.red.value);\n    g = parseInt(elements.green.value);\n    b = parseInt(elements.blue.value);\n    updateColor({ r, g, b });\n  } else if (source === \"hex\") {\n    const hexValue = elements.hex.value.trim();\n\n    // 清除之前的错误信息\n    elements.hexError.textContent = \"\";\n\n    // 检查 HEX 格式是否有效\n    if (!/^#?([0-9A-Fa-f]{0,6})$/.test(hexValue)) {\n      elements.hexError.textContent = \"Invalid HEX format\";\n      return;\n    }\n\n    // 去掉 # 号\n    let hexClean = hexValue.replace(/^#/, \"\");\n\n    // 如果 HEX 值不完整，不更新颜色\n    if (hexClean.length !== 6) {\n      elements.hexError.textContent = \"Incomplete HEX value\";\n      return;\n    }\n\n    // 解析 HEX 值\n    r = parseInt(hexClean.substr(0, 2), 16);\n    g = parseInt(hexClean.substr(2, 2), 16);\n    b = parseInt(hexClean.substr(4, 2), 16);\n\n    if (isNaN(r) || isNaN(g) || isNaN(b)) {\n      elements.hexError.textContent = \"Invalid HEX value\";\n      return;\n    }\n    updateColor({ r, g, b });\n  }\n};\n\n// 事件监听器保持不变\nelements.hue.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.saturation.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.valueInput.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.red.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.green.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.blue.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.hex.addEventListener(\"input\", () => handleInput(\"hex\"));\n\n// 初始更新\nhandleInput(\"hsv\");\n","source":"color.js","raw":"const elements = {\n  hue: document.getElementById(\"hue\"),\n  saturation: document.getElementById(\"saturation\"),\n  valueInput: document.getElementById(\"value\"),\n  red: document.getElementById(\"red\"),\n  green: document.getElementById(\"green\"),\n  blue: document.getElementById(\"blue\"),\n  hex: document.getElementById(\"hex\"),\n  colorBox: document.getElementById(\"colorBox\"),\n  hueValue: document.getElementById(\"hueValue\"),\n  saturationValue: document.getElementById(\"saturationValue\"),\n  valueValue: document.getElementById(\"valueValue\"),\n  hexError: document.getElementById(\"hexError\"),\n  redValue: document.getElementById(\"redValue\"),\n  greenValue: document.getElementById(\"greenValue\"),\n  blueValue: document.getElementById(\"blueValue\"),\n};\n\nconst hsvToRgb = (h, s, v) => {\n  h *= 6;\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n\n  const [r, g, b] =\n    i % 6 === 0\n      ? [v, t, p]\n      : i % 6 === 1\n      ? [q, v, p]\n      : i % 6 === 2\n      ? [p, v, t]\n      : i % 6 === 3\n      ? [p, q, v]\n      : i % 6 === 4\n      ? [t, p, v]\n      : [v, p, q];\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n};\n\nconst rgbToHsv = (r, g, b) => {\n  [r, g, b] = [r / 255, g / 255, b / 255];\n  const max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  const d = max - min;\n  const s = max === 0 ? 0 : d / max;\n  let h = 0;\n\n  if (max !== min) {\n    h =\n      max === r\n        ? (g - b) / d + (g < b ? 6 : 0)\n        : max === g\n        ? (b - r) / d + 2\n        : (r - g) / d + 4;\n    h /= 6;\n  }\n\n  return { h, s, v: max };\n};\n\nconst rgbToHex = (r, g, b) =>\n  `#${[r, g, b]\n    .map((x) => x.toString(16).padStart(2, \"0\"))\n    .join(\"\")\n    .toUpperCase()}`;\n\nconst updateColor = (rgb, hsv) => {\n  // 更新RGB字段\n  elements.red.value = rgb.r;\n  elements.redValue.textContent = rgb.r;\n  elements.green.value = rgb.g;\n  elements.greenValue.textContent = rgb.g;\n  elements.blue.value = rgb.b;\n  elements.blueValue.textContent = rgb.b;\n\n  // 更新HSV字段\n  if (hsv) {\n    elements.hue.value = hsv.h.toFixed(2);\n    elements.hueValue.textContent = hsv.h.toFixed(2);\n    elements.saturation.value = hsv.s.toFixed(2);\n    elements.saturationValue.textContent = hsv.s.toFixed(2);\n    elements.valueInput.value = hsv.v.toFixed(2);\n    elements.valueValue.textContent = hsv.v.toFixed(2);\n  } else {\n    const { h, s, v } = rgbToHsv(rgb.r, rgb.g, rgb.b);\n    elements.hue.value = h.toFixed(2);\n    elements.hueValue.textContent = h.toFixed(2);\n    elements.saturation.value = s.toFixed(2);\n    elements.saturationValue.textContent = s.toFixed(2);\n    elements.valueInput.value = v.toFixed(2);\n    elements.valueValue.textContent = v.toFixed(2);\n  }\n\n  // 更新HEX字段\n  elements.hex.value = rgbToHex(rgb.r, rgb.g, rgb.b);\n\n  // 更新颜色框\n  elements.colorBox.style.backgroundColor = `rgb(${rgb.r},${rgb.g},${rgb.b})`;\n\n  // 清除错误信息\n  elements.hexError.textContent = \"\";\n};\n\nconst handleInput = (source) => {\n  let r, g, b;\n\n  if (source === \"hsv\") {\n    const h = parseFloat(elements.hue.value);\n    const s = parseFloat(elements.saturation.value);\n    const v = parseFloat(elements.valueInput.value);\n    ({ r, g, b } = hsvToRgb(h, s, v));\n    // 传递hsv参数以直接使用输入值\n    updateColor({ r, g, b }, { h, s, v });\n  } else if (source === \"rgb\") {\n    r = parseInt(elements.red.value);\n    g = parseInt(elements.green.value);\n    b = parseInt(elements.blue.value);\n    updateColor({ r, g, b });\n  } else if (source === \"hex\") {\n    const hexValue = elements.hex.value.trim();\n\n    // 清除之前的错误信息\n    elements.hexError.textContent = \"\";\n\n    // 检查 HEX 格式是否有效\n    if (!/^#?([0-9A-Fa-f]{0,6})$/.test(hexValue)) {\n      elements.hexError.textContent = \"Invalid HEX format\";\n      return;\n    }\n\n    // 去掉 # 号\n    let hexClean = hexValue.replace(/^#/, \"\");\n\n    // 如果 HEX 值不完整，不更新颜色\n    if (hexClean.length !== 6) {\n      elements.hexError.textContent = \"Incomplete HEX value\";\n      return;\n    }\n\n    // 解析 HEX 值\n    r = parseInt(hexClean.substr(0, 2), 16);\n    g = parseInt(hexClean.substr(2, 2), 16);\n    b = parseInt(hexClean.substr(4, 2), 16);\n\n    if (isNaN(r) || isNaN(g) || isNaN(b)) {\n      elements.hexError.textContent = \"Invalid HEX value\";\n      return;\n    }\n    updateColor({ r, g, b });\n  }\n};\n\n// 事件监听器保持不变\nelements.hue.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.saturation.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.valueInput.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.red.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.green.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.blue.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.hex.addEventListener(\"input\", () => handleInput(\"hex\"));\n\n// 初始更新\nhandleInput(\"hsv\");\n","date":"2025-09-13T11:48:51.377Z","updated":"2025-09-13T11:48:51.377Z","path":"color.js","layout":"false","title":"","comments":1,"_id":"cmg2e3ln100005ws6bxnq0paw","content":"const elements = {\n  hue: document.getElementById(\"hue\"),\n  saturation: document.getElementById(\"saturation\"),\n  valueInput: document.getElementById(\"value\"),\n  red: document.getElementById(\"red\"),\n  green: document.getElementById(\"green\"),\n  blue: document.getElementById(\"blue\"),\n  hex: document.getElementById(\"hex\"),\n  colorBox: document.getElementById(\"colorBox\"),\n  hueValue: document.getElementById(\"hueValue\"),\n  saturationValue: document.getElementById(\"saturationValue\"),\n  valueValue: document.getElementById(\"valueValue\"),\n  hexError: document.getElementById(\"hexError\"),\n  redValue: document.getElementById(\"redValue\"),\n  greenValue: document.getElementById(\"greenValue\"),\n  blueValue: document.getElementById(\"blueValue\"),\n};\n\nconst hsvToRgb = (h, s, v) => {\n  h *= 6;\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n\n  const [r, g, b] =\n    i % 6 === 0\n      ? [v, t, p]\n      : i % 6 === 1\n      ? [q, v, p]\n      : i % 6 === 2\n      ? [p, v, t]\n      : i % 6 === 3\n      ? [p, q, v]\n      : i % 6 === 4\n      ? [t, p, v]\n      : [v, p, q];\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n};\n\nconst rgbToHsv = (r, g, b) => {\n  [r, g, b] = [r / 255, g / 255, b / 255];\n  const max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  const d = max - min;\n  const s = max === 0 ? 0 : d / max;\n  let h = 0;\n\n  if (max !== min) {\n    h =\n      max === r\n        ? (g - b) / d + (g < b ? 6 : 0)\n        : max === g\n        ? (b - r) / d + 2\n        : (r - g) / d + 4;\n    h /= 6;\n  }\n\n  return { h, s, v: max };\n};\n\nconst rgbToHex = (r, g, b) =>\n  `#${[r, g, b]\n    .map((x) => x.toString(16).padStart(2, \"0\"))\n    .join(\"\")\n    .toUpperCase()}`;\n\nconst updateColor = (rgb, hsv) => {\n  // 更新RGB字段\n  elements.red.value = rgb.r;\n  elements.redValue.textContent = rgb.r;\n  elements.green.value = rgb.g;\n  elements.greenValue.textContent = rgb.g;\n  elements.blue.value = rgb.b;\n  elements.blueValue.textContent = rgb.b;\n\n  // 更新HSV字段\n  if (hsv) {\n    elements.hue.value = hsv.h.toFixed(2);\n    elements.hueValue.textContent = hsv.h.toFixed(2);\n    elements.saturation.value = hsv.s.toFixed(2);\n    elements.saturationValue.textContent = hsv.s.toFixed(2);\n    elements.valueInput.value = hsv.v.toFixed(2);\n    elements.valueValue.textContent = hsv.v.toFixed(2);\n  } else {\n    const { h, s, v } = rgbToHsv(rgb.r, rgb.g, rgb.b);\n    elements.hue.value = h.toFixed(2);\n    elements.hueValue.textContent = h.toFixed(2);\n    elements.saturation.value = s.toFixed(2);\n    elements.saturationValue.textContent = s.toFixed(2);\n    elements.valueInput.value = v.toFixed(2);\n    elements.valueValue.textContent = v.toFixed(2);\n  }\n\n  // 更新HEX字段\n  elements.hex.value = rgbToHex(rgb.r, rgb.g, rgb.b);\n\n  // 更新颜色框\n  elements.colorBox.style.backgroundColor = `rgb(${rgb.r},${rgb.g},${rgb.b})`;\n\n  // 清除错误信息\n  elements.hexError.textContent = \"\";\n};\n\nconst handleInput = (source) => {\n  let r, g, b;\n\n  if (source === \"hsv\") {\n    const h = parseFloat(elements.hue.value);\n    const s = parseFloat(elements.saturation.value);\n    const v = parseFloat(elements.valueInput.value);\n    ({ r, g, b } = hsvToRgb(h, s, v));\n    // 传递hsv参数以直接使用输入值\n    updateColor({ r, g, b }, { h, s, v });\n  } else if (source === \"rgb\") {\n    r = parseInt(elements.red.value);\n    g = parseInt(elements.green.value);\n    b = parseInt(elements.blue.value);\n    updateColor({ r, g, b });\n  } else if (source === \"hex\") {\n    const hexValue = elements.hex.value.trim();\n\n    // 清除之前的错误信息\n    elements.hexError.textContent = \"\";\n\n    // 检查 HEX 格式是否有效\n    if (!/^#?([0-9A-Fa-f]{0,6})$/.test(hexValue)) {\n      elements.hexError.textContent = \"Invalid HEX format\";\n      return;\n    }\n\n    // 去掉 # 号\n    let hexClean = hexValue.replace(/^#/, \"\");\n\n    // 如果 HEX 值不完整，不更新颜色\n    if (hexClean.length !== 6) {\n      elements.hexError.textContent = \"Incomplete HEX value\";\n      return;\n    }\n\n    // 解析 HEX 值\n    r = parseInt(hexClean.substr(0, 2), 16);\n    g = parseInt(hexClean.substr(2, 2), 16);\n    b = parseInt(hexClean.substr(4, 2), 16);\n\n    if (isNaN(r) || isNaN(g) || isNaN(b)) {\n      elements.hexError.textContent = \"Invalid HEX value\";\n      return;\n    }\n    updateColor({ r, g, b });\n  }\n};\n\n// 事件监听器保持不变\nelements.hue.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.saturation.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.valueInput.addEventListener(\"input\", () => handleInput(\"hsv\"));\nelements.red.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.green.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.blue.addEventListener(\"input\", () => handleInput(\"rgb\"));\nelements.hex.addEventListener(\"input\", () => handleInput(\"hex\"));\n\n// 初始更新\nhandleInput(\"hsv\");\n"},{"_content":"(function() {\n    function getMoonPhaseEmoji() {\n      // 基准新月日期（UTC时间）\n      const baseDate = new Date('2023-01-21T00:00:00Z');\n      const currentDate = new Date();\n      \n      // 计算天数差\n      const timeDiff = currentDate - baseDate;\n      const dayDiff = timeDiff / (1000 * 3600 * 24);\n      \n      // 计算月相阶段（0-8）\n      const phase = (dayDiff % 29.53) / 29.53 * 8;\n      \n      // 月相emoji映射\n      const phases = ['🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘', '🌑'];\n      const index = Math.floor(phase);\n      \n      return phases[index];\n    }\n  \n    // 替换标题中的​ ZERO WIDTH SPACE\n    const placeholder = '​';\n    const emoji = getMoonPhaseEmoji();\n    document.title = document.title.replace(placeholder, emoji+\" \");\n  })();","source":"moon.js","raw":"(function() {\n    function getMoonPhaseEmoji() {\n      // 基准新月日期（UTC时间）\n      const baseDate = new Date('2023-01-21T00:00:00Z');\n      const currentDate = new Date();\n      \n      // 计算天数差\n      const timeDiff = currentDate - baseDate;\n      const dayDiff = timeDiff / (1000 * 3600 * 24);\n      \n      // 计算月相阶段（0-8）\n      const phase = (dayDiff % 29.53) / 29.53 * 8;\n      \n      // 月相emoji映射\n      const phases = ['🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘', '🌑'];\n      const index = Math.floor(phase);\n      \n      return phases[index];\n    }\n  \n    // 替换标题中的​ ZERO WIDTH SPACE\n    const placeholder = '​';\n    const emoji = getMoonPhaseEmoji();\n    document.title = document.title.replace(placeholder, emoji+\" \");\n  })();","date":"2025-09-13T11:48:51.469Z","updated":"2025-09-13T11:48:51.469Z","path":"moon.js","layout":"false","title":"","comments":1,"_id":"cmg2e3lna00025ws63hfm8c4m","content":"(function() {\n    function getMoonPhaseEmoji() {\n      // 基准新月日期（UTC时间）\n      const baseDate = new Date('2023-01-21T00:00:00Z');\n      const currentDate = new Date();\n      \n      // 计算天数差\n      const timeDiff = currentDate - baseDate;\n      const dayDiff = timeDiff / (1000 * 3600 * 24);\n      \n      // 计算月相阶段（0-8）\n      const phase = (dayDiff % 29.53) / 29.53 * 8;\n      \n      // 月相emoji映射\n      const phases = ['🌑', '🌒', '🌓', '🌔', '🌕', '🌖', '🌗', '🌘', '🌑'];\n      const index = Math.floor(phase);\n      \n      return phases[index];\n    }\n  \n    // 替换标题中的​ ZERO WIDTH SPACE\n    const placeholder = '​';\n    const emoji = getMoonPhaseEmoji();\n    document.title = document.title.replace(placeholder, emoji+\" \");\n  })();"},{"title":"关于","date":"2023-05-27T06:48:35.000Z","mathjax":true,"_content":"\n[中国居民膳食指南 2022](http://dg.cnsoc.org/article/04/x8zaxCk7QQ2wXw9UnNXJ_A.html)\n| [BMI](https://cn.onlinebmicalculator.com/)\n\n## 软件\n\n[右键菜单管理](https://github.com/BluePointLilac/ContextMenuManager)\n| [沉浸式翻译](https://immersivetranslate.com/docs/)\n| [Pot](https://github.com/pot-app/pot-desktop)\n| [Mermaid 中文网](https://mermaid.nodejs.cn/)\n| [Mermaid 在线编辑器](https://www.min2k.com/intro/online-mermaid.html)\n| [PlantUML](https://www.plantuml.com/)\n| [Geogebra](https://www.geogebra.org/calculator)\n\nRELEASE / GA > RC > M > SNAPSHOT，正式版 / 通用可用版 > 发布候选版 > 里程碑版 > 快照版\n\nx64 == x86_64 == AMD64 != ARM64 == AARCH64\n\n## 怎么把这个网站搞出来的\n\n[Hexo](https://hexo.io/zh-cn/docs/) 是一个博客框架，它把带 [YAML Front matter](https://jekyllrb.com/docs/front-matter/) 的 [Markdown](https://markdown.com.cn/) 文件通过 [Node.js](https://nodejs.org) 和 [Pandoc](https://pandoc.org/) 渲染成静态的 html 文件。[NexT](https://theme-next.js.org/)是针对 Hexo 的主题，可以理解为 CSS。\n\n[Github Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages) 用于托管静态网页，就是放在上面就不能动了，没有数据库，更新页面要重新上传。创建一个名为 `yourusername.github.io` 的仓库，分支为 `gh-pages`。然后可以访问 `yourusername.github.io`。之后再创建的名为 `sample` 且分支为 `gh-pages` 的仓库，为 `yourusername.github.io/sample`。\n\n[Dynadot](https://www.dynadot.com/) 是一个域名提供商，买一个域名。设置 DNS 为 Dynadot DNS。域名记录，A 记录指向 `185.199.109.153`，AAAA 记录指向 `2606:50c0:8001::153`。这两个是 Github Pages 的公共 IP，可以通过 ping `yourusername.github.io`。子域名 www 的 CNAME 记录指向 `yourusername.github.io`。对应仓库（根仓库）的根目录加一个 `CNAME` 文件，内容为购买的域名。仓库设置 -> pages -> Custom domain -> Enforce HTTPS。然后等 Github 检查 DNS，排队从 Let's Encrypt 获取 SSL 证书。\n\n你可以使用[Whois](https://www.whois.com/whois)来查询这些一键生成的页面背后的操作者是谁。在 Github 查看[笔记修改历史](https://github.com/ruofancooh/blog-source/commits/main)。[分类页](/blog/categories)\n\n## 电磁波\n\n$$\n\\lambda = \\frac{3 \\times 10^8 \\mathrm{m/s}}{f}\n$$\n\n| 名字/描述               | 频率约（Hz）   |\n| ----------------------- | -------------- |\n| AM 广播                 | 535K ~ 1606K   |\n| FM 广播                 | 87M ~ 108M     |\n| 手机移动数据和通话      | 700M ~ 4900M   |\n| 卫星定位（GPS L1 频段） | 1575.42M       |\n| 蓝牙、Wi-Fi             | 2.4G ~ 2.4835G |\n| 微波炉                  | 2.45G          |\n| Wi-Fi （5GHz 频段）     | 5.15G ~ 5.825G |\n| 红外线                  | 300G ~ 400T    |\n| 可见光                  | 390T ~ 750T    |\n| 紫外线                  | 750T ~ 30P     |\n| X 射线                  | 30P ~ 30E      |\n| γ 射线                  | 30E 以上       |\n\n## 他山\n\n[蓝或者绿](https://ismy.blue)\n| [汉典](https://www.zdic.net/)\n| [小鹤音形](https://flypy.cc/)\n| [JavaScript 艺术之旅](https://github.com/tanpero/JavaScript-Art-Tour)\n| [老生常谈](https://Laosheng.top/)\n| [涟波词集](https://kevinz.cn/lyricbook/?a=Kevinz)\n| [Hexo-NexT 文档](https://hexo-next.readthedocs.io/zh_CN/latest/)\n| [Hexo 博客 NexT 主题的安装使用](http://home.ustc.edu.cn/~liujunyan/blog/hexo-next-theme-config/)\n| [MDN Web 文档](https://developer.mozilla.org/zh-CN/docs/Web)\n| [OI-Wiki](https://oi-wiki.org/)\n| [WHO](https://www.who.int/zh/news-room/fact-sheets/detail/mental-disorders)\n| [阮一峰的博客](https://www.ruanyifeng.com/blog/)\n| [看懂 UML 类图和时序图](https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html)\n| [重构大师](https://refactoringguru.cn/)\n| [SYMBL](https://symbl.cc/cn/)\n| [VisuAlgo](https://visualgo.net/zh/)\n| [sort.js](https://github.com/zhaosaisai/sort.js)\n| [小时百科](https://wuli.wiki/online/index.html)\n| [写作只能塑造真实的自己](https://github.com/Macin20/why-we-write)\n| [网道](https://wangdoc.com/)\n| [永远森林](https://永远森林.com/)\n| [语文](http://www.dzkbw.com/books/rjb/yuwen/xs1s_2016/)\n| [主义主义](https://www.processon.com/view/link/6081a821e401fd45d70436af)\n| [幻想西游](https://github.com/zither/xiyou)\n| [QQ 家园](https://3gqqjy.com/)\n| [轨道理论](https://tieba.baidu.com/p/7991674588)\n| [PVZ](http://www.lonelystar.org/download.htm)\n| [扫雷网](http://saolei.wang)\n| [北大侠客行](https://pkuxkx.net/)\n| [超吧网盘](http://opengl106.ysepan.com/)\n| [纪念碑谷](https://www.taptap.cn/app/18356)\n| [艾希](https://www.taptap.cn/app/11190)\n| [老男人游戏网](https://www.oldmantvg.net/)\n","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2023-05-27 14:48:35\nmathjax: true\n---\n\n[中国居民膳食指南 2022](http://dg.cnsoc.org/article/04/x8zaxCk7QQ2wXw9UnNXJ_A.html)\n| [BMI](https://cn.onlinebmicalculator.com/)\n\n## 软件\n\n[右键菜单管理](https://github.com/BluePointLilac/ContextMenuManager)\n| [沉浸式翻译](https://immersivetranslate.com/docs/)\n| [Pot](https://github.com/pot-app/pot-desktop)\n| [Mermaid 中文网](https://mermaid.nodejs.cn/)\n| [Mermaid 在线编辑器](https://www.min2k.com/intro/online-mermaid.html)\n| [PlantUML](https://www.plantuml.com/)\n| [Geogebra](https://www.geogebra.org/calculator)\n\nRELEASE / GA > RC > M > SNAPSHOT，正式版 / 通用可用版 > 发布候选版 > 里程碑版 > 快照版\n\nx64 == x86_64 == AMD64 != ARM64 == AARCH64\n\n## 怎么把这个网站搞出来的\n\n[Hexo](https://hexo.io/zh-cn/docs/) 是一个博客框架，它把带 [YAML Front matter](https://jekyllrb.com/docs/front-matter/) 的 [Markdown](https://markdown.com.cn/) 文件通过 [Node.js](https://nodejs.org) 和 [Pandoc](https://pandoc.org/) 渲染成静态的 html 文件。[NexT](https://theme-next.js.org/)是针对 Hexo 的主题，可以理解为 CSS。\n\n[Github Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages) 用于托管静态网页，就是放在上面就不能动了，没有数据库，更新页面要重新上传。创建一个名为 `yourusername.github.io` 的仓库，分支为 `gh-pages`。然后可以访问 `yourusername.github.io`。之后再创建的名为 `sample` 且分支为 `gh-pages` 的仓库，为 `yourusername.github.io/sample`。\n\n[Dynadot](https://www.dynadot.com/) 是一个域名提供商，买一个域名。设置 DNS 为 Dynadot DNS。域名记录，A 记录指向 `185.199.109.153`，AAAA 记录指向 `2606:50c0:8001::153`。这两个是 Github Pages 的公共 IP，可以通过 ping `yourusername.github.io`。子域名 www 的 CNAME 记录指向 `yourusername.github.io`。对应仓库（根仓库）的根目录加一个 `CNAME` 文件，内容为购买的域名。仓库设置 -> pages -> Custom domain -> Enforce HTTPS。然后等 Github 检查 DNS，排队从 Let's Encrypt 获取 SSL 证书。\n\n你可以使用[Whois](https://www.whois.com/whois)来查询这些一键生成的页面背后的操作者是谁。在 Github 查看[笔记修改历史](https://github.com/ruofancooh/blog-source/commits/main)。[分类页](/blog/categories)\n\n## 电磁波\n\n$$\n\\lambda = \\frac{3 \\times 10^8 \\mathrm{m/s}}{f}\n$$\n\n| 名字/描述               | 频率约（Hz）   |\n| ----------------------- | -------------- |\n| AM 广播                 | 535K ~ 1606K   |\n| FM 广播                 | 87M ~ 108M     |\n| 手机移动数据和通话      | 700M ~ 4900M   |\n| 卫星定位（GPS L1 频段） | 1575.42M       |\n| 蓝牙、Wi-Fi             | 2.4G ~ 2.4835G |\n| 微波炉                  | 2.45G          |\n| Wi-Fi （5GHz 频段）     | 5.15G ~ 5.825G |\n| 红外线                  | 300G ~ 400T    |\n| 可见光                  | 390T ~ 750T    |\n| 紫外线                  | 750T ~ 30P     |\n| X 射线                  | 30P ~ 30E      |\n| γ 射线                  | 30E 以上       |\n\n## 他山\n\n[蓝或者绿](https://ismy.blue)\n| [汉典](https://www.zdic.net/)\n| [小鹤音形](https://flypy.cc/)\n| [JavaScript 艺术之旅](https://github.com/tanpero/JavaScript-Art-Tour)\n| [老生常谈](https://Laosheng.top/)\n| [涟波词集](https://kevinz.cn/lyricbook/?a=Kevinz)\n| [Hexo-NexT 文档](https://hexo-next.readthedocs.io/zh_CN/latest/)\n| [Hexo 博客 NexT 主题的安装使用](http://home.ustc.edu.cn/~liujunyan/blog/hexo-next-theme-config/)\n| [MDN Web 文档](https://developer.mozilla.org/zh-CN/docs/Web)\n| [OI-Wiki](https://oi-wiki.org/)\n| [WHO](https://www.who.int/zh/news-room/fact-sheets/detail/mental-disorders)\n| [阮一峰的博客](https://www.ruanyifeng.com/blog/)\n| [看懂 UML 类图和时序图](https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html)\n| [重构大师](https://refactoringguru.cn/)\n| [SYMBL](https://symbl.cc/cn/)\n| [VisuAlgo](https://visualgo.net/zh/)\n| [sort.js](https://github.com/zhaosaisai/sort.js)\n| [小时百科](https://wuli.wiki/online/index.html)\n| [写作只能塑造真实的自己](https://github.com/Macin20/why-we-write)\n| [网道](https://wangdoc.com/)\n| [永远森林](https://永远森林.com/)\n| [语文](http://www.dzkbw.com/books/rjb/yuwen/xs1s_2016/)\n| [主义主义](https://www.processon.com/view/link/6081a821e401fd45d70436af)\n| [幻想西游](https://github.com/zither/xiyou)\n| [QQ 家园](https://3gqqjy.com/)\n| [轨道理论](https://tieba.baidu.com/p/7991674588)\n| [PVZ](http://www.lonelystar.org/download.htm)\n| [扫雷网](http://saolei.wang)\n| [北大侠客行](https://pkuxkx.net/)\n| [超吧网盘](http://opengl106.ysepan.com/)\n| [纪念碑谷](https://www.taptap.cn/app/18356)\n| [艾希](https://www.taptap.cn/app/11190)\n| [老男人游戏网](https://www.oldmantvg.net/)\n","updated":"2025-09-13T11:48:51.377Z","path":"about/index.html","comments":1,"layout":"page","_id":"cmg2e3lnd00045ws673qg6xfh","content":"<p><a href=\"http://dg.cnsoc.org/article/04/x8zaxCk7QQ2wXw9UnNXJ_A.html\">中国居民膳食指南\n2022</a> | <a href=\"https://cn.onlinebmicalculator.com/\">BMI</a></p>\n<h2 id=\"软件\">软件</h2>\n<p><a href=\"https://github.com/BluePointLilac/ContextMenuManager\">右键菜单管理</a>\n| <a href=\"https://immersivetranslate.com/docs/\">沉浸式翻译</a> | <a href=\"https://github.com/pot-app/pot-desktop\">Pot</a> | <a href=\"https://mermaid.nodejs.cn/\">Mermaid 中文网</a> | <a href=\"https://www.min2k.com/intro/online-mermaid.html\">Mermaid\n在线编辑器</a> | <a href=\"https://www.plantuml.com/\">PlantUML</a> | <a href=\"https://www.geogebra.org/calculator\">Geogebra</a></p>\n<p>RELEASE / GA &gt; RC &gt; M &gt; SNAPSHOT，正式版 / 通用可用版 &gt;\n发布候选版 &gt; 里程碑版 &gt; 快照版</p>\n<p>x64 == x86_64 == AMD64 != ARM64 == AARCH64</p>\n<h2 id=\"怎么把这个网站搞出来的\">怎么把这个网站搞出来的</h2>\n<p><a href=\"https://hexo.io/zh-cn/docs/\">Hexo</a> 是一个博客框架，它把带\n<a href=\"https://jekyllrb.com/docs/front-matter/\">YAML Front matter</a>\n的 <a href=\"https://markdown.com.cn/\">Markdown</a> 文件通过 <a href=\"https://nodejs.org\">Node.js</a> 和 <a href=\"https://pandoc.org/\">Pandoc</a> 渲染成静态的 html 文件。<a href=\"https://theme-next.js.org/\">NexT</a> 是针对 Hexo 的主题，可以理解为\nCSS。</p>\n<p><a href=\"https://docs.github.com/zh/pages/getting-started-with-github-pages\">Github\nPages</a>\n用于托管静态网页，就是放在上面就不能动了，没有数据库，更新页面要重新上传。创建一个名为\n<code>yourusername.github.io</code> 的仓库，分支为\n<code>gh-pages</code>。然后可以访问\n<code>yourusername.github.io</code>。之后再创建的名为\n<code>sample</code> 且分支为 <code>gh-pages</code> 的仓库，为\n<code>yourusername.github.io/sample</code>。</p>\n<p><a href=\"https://www.dynadot.com/\">Dynadot</a>\n是一个域名提供商，买一个域名。设置 DNS 为 Dynadot DNS。域名记录，A\n记录指向 <code>185.199.109.153</code>，AAAA 记录指向\n<code>2606:50c0:8001::153</code>。这两个是 Github Pages 的公共\nIP，可以通过 ping <code>yourusername.github.io</code>。子域名 www 的\nCNAME 记录指向\n<code>yourusername.github.io</code>。对应仓库（根仓库）的根目录加一个\n<code>CNAME</code> 文件，内容为购买的域名。仓库设置 -&gt; pages -&gt;\nCustom domain -&gt; Enforce HTTPS。然后等 Github 检查 DNS，排队从 Let's\nEncrypt 获取 SSL 证书。</p>\n<p>你可以使用 <a href=\"https://www.whois.com/whois\">Whois</a> 来查询这些一键生成的页面背后的操作者是谁。在\nGithub 查看<a href=\"https://github.com/ruofancooh/blog-source/commits/main\">笔记修改历史</a>。<a href=\"/blog/categories\">分类页</a></p>\n<h2 id=\"电磁波\">电磁波</h2>\n<p><span class=\"math display\">\\[\n\\lambda = \\frac{3 \\times 10^8 \\mathrm{m/s}}{f}\n\\]</span></p>\n<table>\n<thead>\n<tr>\n<th>名字 / 描述</th>\n<th>频率约（Hz）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AM 广播</td>\n<td> 535K ~ 1606K</td>\n</tr>\n<tr>\n<td>FM 广播</td>\n<td> 87M ~ 108M</td>\n</tr>\n<tr>\n<td> 手机移动数据和通话</td>\n<td> 700M ~ 4900M</td>\n</tr>\n<tr>\n<td> 卫星定位（GPS L1 频段）</td>\n<td>1575.42M</td>\n</tr>\n<tr>\n<td> 蓝牙、Wi-Fi</td>\n<td>2.4G ~ 2.4835G</td>\n</tr>\n<tr>\n<td> 微波炉</td>\n<td> 2.45G</td>\n</tr>\n<tr>\n<td>Wi-Fi （5GHz 频段）</td>\n<td>5.15G ~ 5.825G</td>\n</tr>\n<tr>\n<td> 红外线</td>\n<td> 300G ~ 400T</td>\n</tr>\n<tr>\n<td> 可见光</td>\n<td> 390T ~ 750T</td>\n</tr>\n<tr>\n<td> 紫外线</td>\n<td> 750T ~ 30P</td>\n</tr>\n<tr>\n<td>X 射线</td>\n<td> 30P ~ 30E</td>\n</tr>\n<tr>\n<td>γ 射线</td>\n<td> 30E 以上</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"他山\">他山</h2>\n<p><a href=\"https://ismy.blue\">蓝或者绿</a> | <a href=\"https://www.zdic.net/\">汉典</a> | <a href=\"https://flypy.cc/\">小鹤音形</a> | <a href=\"https://github.com/tanpero/JavaScript-Art-Tour\">JavaScript\n艺术之旅</a> | <a href=\"https://Laosheng.top/\">老生常谈</a> | <a href=\"https://kevinz.cn/lyricbook/?a=Kevinz\">涟波词集</a> | <a href=\"https://hexo-next.readthedocs.io/zh_CN/latest/\">Hexo-NexT 文档</a>\n| <a href=\"http://home.ustc.edu.cn/~liujunyan/blog/hexo-next-theme-config/\">Hexo\n博客 NexT 主题的安装使用</a> | <a href=\"https://developer.mozilla.org/zh-CN/docs/Web\">MDN Web 文档</a> |\n<a href=\"https://oi-wiki.org/\">OI-Wiki</a> | <a href=\"https://www.who.int/zh/news-room/fact-sheets/detail/mental-disorders\">WHO</a>\n| <a href=\"https://www.ruanyifeng.com/blog/\">阮一峰的博客</a> | <a href=\"https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html\">看懂\nUML 类图和时序图</a> | <a href=\"https://refactoringguru.cn/\">重构大师</a> | <a href=\"https://symbl.cc/cn/\">SYMBL</a> | <a href=\"https://visualgo.net/zh/\">VisuAlgo</a> | <a href=\"https://github.com/zhaosaisai/sort.js\">sort.js</a> | <a href=\"https://wuli.wiki/online/index.html\">小时百科</a> | <a href=\"https://github.com/Macin20/why-we-write\">写作只能塑造真实的自己</a>\n| <a href=\"https://wangdoc.com/\">网道</a> | <a href=\"https://永远森林.com/\">永远森林</a> | <a href=\"http://www.dzkbw.com/books/rjb/yuwen/xs1s_2016/\">语文</a> | <a href=\"https://www.processon.com/view/link/6081a821e401fd45d70436af\">主义主义</a>\n| <a href=\"https://github.com/zither/xiyou\">幻想西游</a> | <a href=\"https://3gqqjy.com/\">QQ 家园</a> | <a href=\"https://tieba.baidu.com/p/7991674588\">轨道理论</a> | <a href=\"http://www.lonelystar.org/download.htm\">PVZ</a> | <a href=\"http://saolei.wang\">扫雷网</a> | <a href=\"https://pkuxkx.net/\">北大侠客行</a> | <a href=\"http://opengl106.ysepan.com/\">超吧网盘</a> | <a href=\"https://www.taptap.cn/app/18356\">纪念碑谷</a> | <a href=\"https://www.taptap.cn/app/11190\">艾希</a> | <a href=\"https://www.oldmantvg.net/\">老男人游戏网</a></p>\n","excerpt":"","more":"<p><a href=\"http://dg.cnsoc.org/article/04/x8zaxCk7QQ2wXw9UnNXJ_A.html\">中国居民膳食指南\n2022</a> | <a href=\"https://cn.onlinebmicalculator.com/\">BMI</a></p>\n<h2 id=\"软件\">软件</h2>\n<p><a href=\"https://github.com/BluePointLilac/ContextMenuManager\">右键菜单管理</a>\n| <a href=\"https://immersivetranslate.com/docs/\">沉浸式翻译</a> | <a href=\"https://github.com/pot-app/pot-desktop\">Pot</a> | <a href=\"https://mermaid.nodejs.cn/\">Mermaid 中文网</a> | <a href=\"https://www.min2k.com/intro/online-mermaid.html\">Mermaid\n在线编辑器</a> | <a href=\"https://www.plantuml.com/\">PlantUML</a> | <a href=\"https://www.geogebra.org/calculator\">Geogebra</a></p>\n<p>RELEASE / GA &gt; RC &gt; M &gt; SNAPSHOT，正式版 / 通用可用版 &gt;\n发布候选版 &gt; 里程碑版 &gt; 快照版</p>\n<p>x64 == x86_64 == AMD64 != ARM64 == AARCH64</p>\n<h2 id=\"怎么把这个网站搞出来的\">怎么把这个网站搞出来的</h2>\n<p><a href=\"https://hexo.io/zh-cn/docs/\">Hexo</a> 是一个博客框架，它把带\n<a href=\"https://jekyllrb.com/docs/front-matter/\">YAML Front matter</a>\n的 <a href=\"https://markdown.com.cn/\">Markdown</a> 文件通过 <a href=\"https://nodejs.org\">Node.js</a> 和 <a href=\"https://pandoc.org/\">Pandoc</a> 渲染成静态的 html 文件。<a href=\"https://theme-next.js.org/\">NexT</a> 是针对 Hexo 的主题，可以理解为\nCSS。</p>\n<p><a href=\"https://docs.github.com/zh/pages/getting-started-with-github-pages\">Github\nPages</a>\n用于托管静态网页，就是放在上面就不能动了，没有数据库，更新页面要重新上传。创建一个名为\n<code>yourusername.github.io</code> 的仓库，分支为\n<code>gh-pages</code>。然后可以访问\n<code>yourusername.github.io</code>。之后再创建的名为\n<code>sample</code> 且分支为 <code>gh-pages</code> 的仓库，为\n<code>yourusername.github.io/sample</code>。</p>\n<p><a href=\"https://www.dynadot.com/\">Dynadot</a>\n是一个域名提供商，买一个域名。设置 DNS 为 Dynadot DNS。域名记录，A\n记录指向 <code>185.199.109.153</code>，AAAA 记录指向\n<code>2606:50c0:8001::153</code>。这两个是 Github Pages 的公共\nIP，可以通过 ping <code>yourusername.github.io</code>。子域名 www 的\nCNAME 记录指向\n<code>yourusername.github.io</code>。对应仓库（根仓库）的根目录加一个\n<code>CNAME</code> 文件，内容为购买的域名。仓库设置 -&gt; pages -&gt;\nCustom domain -&gt; Enforce HTTPS。然后等 Github 检查 DNS，排队从 Let's\nEncrypt 获取 SSL 证书。</p>\n<p>你可以使用 <a href=\"https://www.whois.com/whois\">Whois</a> 来查询这些一键生成的页面背后的操作者是谁。在\nGithub 查看<a href=\"https://github.com/ruofancooh/blog-source/commits/main\">笔记修改历史</a>。<a href=\"/blog/categories\">分类页</a></p>\n<h2 id=\"电磁波\">电磁波</h2>\n<p><span class=\"math display\">\\[\n\\lambda = \\frac{3 \\times 10^8 \\mathrm{m/s}}{f}\n\\]</span></p>\n<table>\n<thead>\n<tr>\n<th>名字 / 描述</th>\n<th>频率约（Hz）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AM 广播</td>\n<td> 535K ~ 1606K</td>\n</tr>\n<tr>\n<td>FM 广播</td>\n<td> 87M ~ 108M</td>\n</tr>\n<tr>\n<td> 手机移动数据和通话</td>\n<td> 700M ~ 4900M</td>\n</tr>\n<tr>\n<td> 卫星定位（GPS L1 频段）</td>\n<td>1575.42M</td>\n</tr>\n<tr>\n<td> 蓝牙、Wi-Fi</td>\n<td>2.4G ~ 2.4835G</td>\n</tr>\n<tr>\n<td> 微波炉</td>\n<td> 2.45G</td>\n</tr>\n<tr>\n<td>Wi-Fi （5GHz 频段）</td>\n<td>5.15G ~ 5.825G</td>\n</tr>\n<tr>\n<td> 红外线</td>\n<td> 300G ~ 400T</td>\n</tr>\n<tr>\n<td> 可见光</td>\n<td> 390T ~ 750T</td>\n</tr>\n<tr>\n<td> 紫外线</td>\n<td> 750T ~ 30P</td>\n</tr>\n<tr>\n<td>X 射线</td>\n<td> 30P ~ 30E</td>\n</tr>\n<tr>\n<td>γ 射线</td>\n<td> 30E 以上</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"他山\">他山</h2>\n<p><a href=\"https://ismy.blue\">蓝或者绿</a> | <a href=\"https://www.zdic.net/\">汉典</a> | <a href=\"https://flypy.cc/\">小鹤音形</a> | <a href=\"https://github.com/tanpero/JavaScript-Art-Tour\">JavaScript\n艺术之旅</a> | <a href=\"https://Laosheng.top/\">老生常谈</a> | <a href=\"https://kevinz.cn/lyricbook/?a=Kevinz\">涟波词集</a> | <a href=\"https://hexo-next.readthedocs.io/zh_CN/latest/\">Hexo-NexT 文档</a>\n| <a href=\"http://home.ustc.edu.cn/~liujunyan/blog/hexo-next-theme-config/\">Hexo\n博客 NexT 主题的安装使用</a> | <a href=\"https://developer.mozilla.org/zh-CN/docs/Web\">MDN Web 文档</a> |\n<a href=\"https://oi-wiki.org/\">OI-Wiki</a> | <a href=\"https://www.who.int/zh/news-room/fact-sheets/detail/mental-disorders\">WHO</a>\n| <a href=\"https://www.ruanyifeng.com/blog/\">阮一峰的博客</a> | <a href=\"https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html\">看懂\nUML 类图和时序图</a> | <a href=\"https://refactoringguru.cn/\">重构大师</a> | <a href=\"https://symbl.cc/cn/\">SYMBL</a> | <a href=\"https://visualgo.net/zh/\">VisuAlgo</a> | <a href=\"https://github.com/zhaosaisai/sort.js\">sort.js</a> | <a href=\"https://wuli.wiki/online/index.html\">小时百科</a> | <a href=\"https://github.com/Macin20/why-we-write\">写作只能塑造真实的自己</a>\n| <a href=\"https://wangdoc.com/\">网道</a> | <a href=\"https://永远森林.com/\">永远森林</a> | <a href=\"http://www.dzkbw.com/books/rjb/yuwen/xs1s_2016/\">语文</a> | <a href=\"https://www.processon.com/view/link/6081a821e401fd45d70436af\">主义主义</a>\n| <a href=\"https://github.com/zither/xiyou\">幻想西游</a> | <a href=\"https://3gqqjy.com/\">QQ 家园</a> | <a href=\"https://tieba.baidu.com/p/7991674588\">轨道理论</a> | <a href=\"http://www.lonelystar.org/download.htm\">PVZ</a> | <a href=\"http://saolei.wang\">扫雷网</a> | <a href=\"https://pkuxkx.net/\">北大侠客行</a> | <a href=\"http://opengl106.ysepan.com/\">超吧网盘</a> | <a href=\"https://www.taptap.cn/app/18356\">纪念碑谷</a> | <a href=\"https://www.taptap.cn/app/11190\">艾希</a> | <a href=\"https://www.oldmantvg.net/\">老男人游戏网</a></p>\n"}],"Post":[{"title":"GBK 与 UTF-8 与锟斤拷的成因","date":"2024-11-15T11:00:00.000Z","_content":"\n一位十六进制数表示四位二进制数，两位十六进制数表示一个字节。\n\nASCII 有 128 个符号，使用一个字节表示，范围是 00000000-01111111 即 00-7F\n\n参考：[字符编码/解码](https://www.toolhelper.cn/EncodeDecode/EncodeDecode) | [SYMBL](https://symbl.cc/) | [HexED.it](https://hexed.it/)\n\n## GBK\n\n是 GB2312 的超集，有 21886 个符号，使用两个字节表示一个符号。当文本中同时包含 GBK 与 ASCII 字符时，GBK 对 ASCII 字符仍用一个字节表示。\n\n总体编码范围为 8140-FEFE 之间，首字节在 81-FE 之间，避开了 ASCII 的 00-7F，尾字节在 40-FE 之间。\n\n## UTF-8\n\nUnicode：为一个符号分配一个码，常用汉字的范围在 U+4E00 到 U+9FFF\n\nUTF-8：使用 1 到 4 个字节表示一个 Unicode 码。其中用 1 个字节表示的与 ASCII 兼容。\n\n用 n 个字节（n>1）表示的，头个字节以 n 个 1 带 1 个 0 开头，后面字节全以 10 开头（在 80-BF 的范围内）。\n\n| Unicode                 | UTF-8                               | 第二列各个字节的十六进制范围 |\n| ----------------------- | ----------------------------------- | ---------------------------- |\n| 0000 0000-0000 007F     | 0xxxxxxx                            | 00-7F                        |\n| 0000 0080-0000 07FF     | 110xxxxx 10xxxxxx                   | C0-DF 80-BF                  |\n| **0000 0800-0000 FFFF** | **1110xxxx 10xxxxxx 10xxxxxx**      | E0-EF 80-BF 80-BF            |\n| 0001 0000-0010 FFFF     | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx | F0-F7 80-BF 80-BF 80-BF      |\n\n<style>\n    .r{\n        color:red\n    }\n    .o{\n        color:orange\n    }\n    .g{\n        color:green\n    }\n    .b{\n        color:blue\n    }\n</style>\n\n如【这】的 Unicode 是 **U+<span class=\"r\">8</span><span class=\"o\">F</span><span class=\"g\">D</span><span class=\"b\">9</span>** 等于**<span class=\"r\">1000</span>\n<span class=\"o\">1111</span>\n<span class=\"g\">1101</span>\n<span class=\"b\">1001</span>**，把它补到空位 x 里：\n\n**1110<span class=\"r\">1000</span>\n10<span class=\"o\">1111</span><span class=\"g\">11</span>\n10<span class=\"g\">01</span><span class=\"b\">1001</span>**\n\n= E8BF99\n\n## 锟斤拷的成因\n\n1. 有一个文件 A\n2. 用 UTF-8 编码读 A，其中不符合 UTF-8 规范的十六进制值被解析为字符 �（Replacement Character）\n3. 把 A 保存为 UTF-8 格式的新文件 B，则 � 被记录为 EFBFBD\n4. 再用 GBK 编码读文件 B，如果有相邻的两个 �，即 EFBFBDEFBFBD，则读为 EFBF BDEF BFBD\n5. 在 GBK 里，EFBF = 锟，BDEF = 斤，BFBD = 拷\n\n- 汉字：这是一段测试文本\n- GBK：D5E2 CAC7 D2BB B6CE B2E2 CAD4 CEC4 B1BE\n- 用 UTF-8 编码读它：D5 E2 CA C7 D2BB B6 CEB2 E2 CA D4 CE C4B1 BE\n  - D5 表示两字节字符的开始，以 110 开头，但它后面的 E2 并不在 80-BF 的范围之内，于是 D5 被解析为一个 �\n  - E2 表示三字节字符的开始，但它后面的 CA 并不在 80-BF 的范围之内，于是 E2 被解析为一个 �\n  - ……\n  - D2 表示两字节字符的开始，它后面的 BB 在 80-BF 的范围之内\n    - 于是：D2 BB = 110<span class=\"r\">10010</span> 10<span class=\"b\">111011</span>\n    - 0<span class=\"r\">100 10</span><span class=\"b\">11 1011</span> = 4BB\n    - U+04BB 为 һ（Cyrillic Small Letter Shha）\n  - ……\n  - CE 表示两字节字符的开始，它后面的 B2 在 80-BF 的范围之内\n    - 于是：CE B2 = 110<span class=\"r\">01110</span> 10<span class=\"b\">110010</span>\n    - 0<span class=\"r\">011 10</span><span class=\"b\">11 0010</span> = 3B2\n    - U+03B2 为 β（Greek Small Letter Beta）\n  - ……\n  - 读的结果是：����һ�β����ı�\n- 用 UTF-8 的格式保存时\n  - � = U+FFFD = U+11111111 11111101\n    - 补到 1110xxxx 10xxxxxx 10xxxxxx 里\n    - 11101111 10111111 10111101 = EFBFBD\n  - 保存的结果是：EFBFBD EFBFBD EFBFBD EFBFBD D2BB EFBFBD CEB2 EFBFBD EFBFBD EFBFBD EFBFBD C4B1 EFBFBD\n- 再用 GBK 编码读\n  - EFBF BDEF BFBD EFBF BDEF BFBD D2BB EFBF BDCE B2EF BFBD EFBF BDEF BFBD EFBF BDC4 B1EF BFBD\n  - 结果是：锟斤拷锟斤拷一锟轿诧拷锟斤拷锟侥憋拷\n","source":"_posts/GBK与UTF-8与锟斤拷的成因.md","raw":"---\ntitle: GBK与UTF-8与锟斤拷的成因\ndate: 2024-11-15 19:00:00\npermalink: gbk-utf8.html\n---\n\n一位十六进制数表示四位二进制数，两位十六进制数表示一个字节。\n\nASCII 有 128 个符号，使用一个字节表示，范围是 00000000-01111111 即 00-7F\n\n参考：[字符编码/解码](https://www.toolhelper.cn/EncodeDecode/EncodeDecode) | [SYMBL](https://symbl.cc/) | [HexED.it](https://hexed.it/)\n\n## GBK\n\n是 GB2312 的超集，有 21886 个符号，使用两个字节表示一个符号。当文本中同时包含 GBK 与 ASCII 字符时，GBK 对 ASCII 字符仍用一个字节表示。\n\n总体编码范围为 8140-FEFE 之间，首字节在 81-FE 之间，避开了 ASCII 的 00-7F，尾字节在 40-FE 之间。\n\n## UTF-8\n\nUnicode：为一个符号分配一个码，常用汉字的范围在 U+4E00 到 U+9FFF\n\nUTF-8：使用 1 到 4 个字节表示一个 Unicode 码。其中用 1 个字节表示的与 ASCII 兼容。\n\n用 n 个字节（n>1）表示的，头个字节以 n 个 1 带 1 个 0 开头，后面字节全以 10 开头（在 80-BF 的范围内）。\n\n| Unicode                 | UTF-8                               | 第二列各个字节的十六进制范围 |\n| ----------------------- | ----------------------------------- | ---------------------------- |\n| 0000 0000-0000 007F     | 0xxxxxxx                            | 00-7F                        |\n| 0000 0080-0000 07FF     | 110xxxxx 10xxxxxx                   | C0-DF 80-BF                  |\n| **0000 0800-0000 FFFF** | **1110xxxx 10xxxxxx 10xxxxxx**      | E0-EF 80-BF 80-BF            |\n| 0001 0000-0010 FFFF     | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx | F0-F7 80-BF 80-BF 80-BF      |\n\n<style>\n    .r{\n        color:red\n    }\n    .o{\n        color:orange\n    }\n    .g{\n        color:green\n    }\n    .b{\n        color:blue\n    }\n</style>\n\n如【这】的 Unicode 是 **U+<span class=\"r\">8</span><span class=\"o\">F</span><span class=\"g\">D</span><span class=\"b\">9</span>** 等于**<span class=\"r\">1000</span>\n<span class=\"o\">1111</span>\n<span class=\"g\">1101</span>\n<span class=\"b\">1001</span>**，把它补到空位 x 里：\n\n**1110<span class=\"r\">1000</span>\n10<span class=\"o\">1111</span><span class=\"g\">11</span>\n10<span class=\"g\">01</span><span class=\"b\">1001</span>**\n\n= E8BF99\n\n## 锟斤拷的成因\n\n1. 有一个文件 A\n2. 用 UTF-8 编码读 A，其中不符合 UTF-8 规范的十六进制值被解析为字符 �（Replacement Character）\n3. 把 A 保存为 UTF-8 格式的新文件 B，则 � 被记录为 EFBFBD\n4. 再用 GBK 编码读文件 B，如果有相邻的两个 �，即 EFBFBDEFBFBD，则读为 EFBF BDEF BFBD\n5. 在 GBK 里，EFBF = 锟，BDEF = 斤，BFBD = 拷\n\n- 汉字：这是一段测试文本\n- GBK：D5E2 CAC7 D2BB B6CE B2E2 CAD4 CEC4 B1BE\n- 用 UTF-8 编码读它：D5 E2 CA C7 D2BB B6 CEB2 E2 CA D4 CE C4B1 BE\n  - D5 表示两字节字符的开始，以 110 开头，但它后面的 E2 并不在 80-BF 的范围之内，于是 D5 被解析为一个 �\n  - E2 表示三字节字符的开始，但它后面的 CA 并不在 80-BF 的范围之内，于是 E2 被解析为一个 �\n  - ……\n  - D2 表示两字节字符的开始，它后面的 BB 在 80-BF 的范围之内\n    - 于是：D2 BB = 110<span class=\"r\">10010</span> 10<span class=\"b\">111011</span>\n    - 0<span class=\"r\">100 10</span><span class=\"b\">11 1011</span> = 4BB\n    - U+04BB 为 һ（Cyrillic Small Letter Shha）\n  - ……\n  - CE 表示两字节字符的开始，它后面的 B2 在 80-BF 的范围之内\n    - 于是：CE B2 = 110<span class=\"r\">01110</span> 10<span class=\"b\">110010</span>\n    - 0<span class=\"r\">011 10</span><span class=\"b\">11 0010</span> = 3B2\n    - U+03B2 为 β（Greek Small Letter Beta）\n  - ……\n  - 读的结果是：����һ�β����ı�\n- 用 UTF-8 的格式保存时\n  - � = U+FFFD = U+11111111 11111101\n    - 补到 1110xxxx 10xxxxxx 10xxxxxx 里\n    - 11101111 10111111 10111101 = EFBFBD\n  - 保存的结果是：EFBFBD EFBFBD EFBFBD EFBFBD D2BB EFBFBD CEB2 EFBFBD EFBFBD EFBFBD EFBFBD C4B1 EFBFBD\n- 再用 GBK 编码读\n  - EFBF BDEF BFBD EFBF BDEF BFBD D2BB EFBF BDCE B2EF BFBD EFBF BDEF BFBD EFBF BDC4 B1EF BFBD\n  - 结果是：锟斤拷锟斤拷一锟轿诧拷锟斤拷锟侥憋拷\n","slug":"GBK与UTF-8与锟斤拷的成因","published":1,"updated":"2025-09-14T14:49:14.527Z","__permalink":"gbk-utf8.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3ln700015ws62h9jhnpm","content":"<p>一位十六进制数表示四位二进制数，两位十六进制数表示一个字节。</p>\n<p>ASCII 有 128 个符号，使用一个字节表示，范围是 00000000-01111111 即\n00-7F</p>\n<p>参考：<a href=\"https://www.toolhelper.cn/EncodeDecode/EncodeDecode\">字符编码 / 解码</a>\n| <a href=\"https://symbl.cc/\">SYMBL</a> | <a href=\"https://hexed.it/\">HexED.it</a></p>\n<h2 id=\"gbk\">GBK</h2>\n<p>是 GB2312 的超集，有 21886\n个符号，使用两个字节表示一个符号。当文本中同时包含 GBK 与 ASCII\n字符时，GBK 对 ASCII 字符仍用一个字节表示。</p>\n<p>总体编码范围为 8140-FEFE 之间，首字节在 81-FE 之间，避开了 ASCII 的\n00-7F，尾字节在 40-FE 之间。</p>\n<h2 id=\"utf-8\">UTF-8</h2>\n<p>Unicode：为一个符号分配一个码，常用汉字的范围在 U+4E00 到 U+9FFF</p>\n<p>UTF-8：使用 1 到 4 个字节表示一个 Unicode 码。其中用 1 个字节表示的与\nASCII 兼容。</p>\n<p>用 n 个字节（n&gt;1）表示的，头个字节以 n 个 1 带 1 个 0\n开头，后面字节全以 10 开头（在 80-BF 的范围内）。</p>\n<table>\n<colgroup>\n<col style=\"width: 26%\">\n<col style=\"width: 40%\">\n<col style=\"width: 32%\">\n</colgroup>\n<thead>\n<tr>\n<th>Unicode</th>\n<th>UTF-8</th>\n<th> 第二列各个字节的十六进制范围</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 0000 0000-0000 007F</td>\n<td>0xxxxxxx</td>\n<td>00-7F</td>\n</tr>\n<tr>\n<td>0000 0080-0000 07FF</td>\n<td>110xxxxx 10xxxxxx</td>\n<td>C0-DF 80-BF</td>\n</tr>\n<tr>\n<td><strong>0000 0800-0000 FFFF</strong></td>\n<td><strong>1110xxxx 10xxxxxx 10xxxxxx</strong></td>\n<td>E0-EF 80-BF 80-BF</td>\n</tr>\n<tr>\n<td>0001 0000-0010 FFFF</td>\n<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>\n<td>F0-F7 80-BF 80-BF 80-BF</td>\n</tr>\n</tbody>\n</table>\n<style>\n    .r{\n        color:red\n    }\n    .o{\n        color:orange\n    }\n    .g{\n        color:green\n    }\n    .b{\n        color:blue\n    }\n</style>\n<p>如【这】的 Unicode 是 <strong>U+<span class=\"r\">8</span><span class=\"o\">F</span><span class=\"g\">D</span><span class=\"b\">9</span></strong> 等于<strong><span class=\"r\"> 1000</span>\n<span class=\"o\">1111</span> <span class=\"g\">1101</span> <span class=\"b\">1001</span></strong>，把它补到空位 x 里：</p>\n<p><strong>1110<span class=\"r\">1000</span> 10<span class=\"o\">1111</span><span class=\"g\">11</span> 10<span class=\"g\">01</span><span class=\"b\">1001</span></strong></p>\n<p>= E8BF99</p>\n<h2 id=\"锟斤拷的成因\">锟斤拷的成因</h2>\n<ol type=\"1\">\n<li>有一个文件 A</li>\n<li> 用 UTF-8 编码读 A，其中不符合 UTF-8 规范的十六进制值被解析为字符\n�（Replacement Character）</li>\n<li>把 A 保存为 UTF-8 格式的新文件 B，则 � 被记录为 EFBFBD</li>\n<li> 再用 GBK 编码读文件 B，如果有相邻的两个 �，即 EFBFBDEFBFBD，则读为\nEFBF BDEF BFBD</li>\n<li> 在 GBK 里，EFBF = 锟，BDEF = 斤，BFBD = 拷</li>\n</ol>\n<ul>\n<li>汉字：这是一段测试文本</li>\n<li> GBK：D5E2 CAC7 D2BB B6CE B2E2 CAD4 CEC4 B1BE</li>\n<li> 用 UTF-8 编码读它：D5 E2 CA C7 D2BB B6 CEB2 E2 CA D4 CE C4B1 BE\n<ul>\n<li>D5 表示两字节字符的开始，以 110 开头，但它后面的 E2 并不在 80-BF\n的范围之内，于是 D5 被解析为一个 �</li>\n<li>E2 表示三字节字符的开始，但它后面的 CA 并不在 80-BF 的范围之内，于是\nE2 被解析为一个 �</li>\n<li>……</li>\n<li>D2 表示两字节字符的开始，它后面的 BB 在 80-BF 的范围之内\n<ul>\n<li>于是：D2 BB = 110<span class=\"r\">10010</span> 10<span class=\"b\">111011</span></li>\n<li>0<span class=\"r\">100 10</span><span class=\"b\">11 1011</span> =\n4BB</li>\n<li>U+04BB 为 һ（Cyrillic Small Letter Shha）</li>\n</ul></li>\n<li>……</li>\n<li>CE 表示两字节字符的开始，它后面的 B2 在 80-BF 的范围之内\n<ul>\n<li>于是：CE B2 = 110<span class=\"r\">01110</span> 10<span class=\"b\">110010</span></li>\n<li>0<span class=\"r\">011 10</span><span class=\"b\">11 0010</span> =\n3B2</li>\n<li>U+03B2 为 β（Greek Small Letter Beta）</li>\n</ul></li>\n<li>……</li>\n<li> 读的结果是：����һ�β����ı�</li>\n</ul></li>\n<li>用 UTF-8 的格式保存时\n<ul>\n<li>� = U+FFFD = U+11111111 11111101\n<ul>\n<li>补到 1110xxxx 10xxxxxx 10xxxxxx 里</li>\n<li> 11101111 10111111 10111101 = EFBFBD</li>\n</ul></li>\n<li> 保存的结果是：EFBFBD EFBFBD EFBFBD EFBFBD D2BB EFBFBD CEB2 EFBFBD\nEFBFBD EFBFBD EFBFBD C4B1 EFBFBD</li>\n</ul></li>\n<li> 再用 GBK 编码读\n<ul>\n<li>EFBF BDEF BFBD EFBF BDEF BFBD D2BB EFBF BDCE B2EF BFBD EFBF BDEF\nBFBD EFBF BDC4 B1EF BFBD</li>\n<li> 结果是：锟斤拷锟斤拷一锟轿诧拷锟斤拷锟侥憋拷</li>\n</ul></li>\n</ul>\n","excerpt":"","more":"<p>一位十六进制数表示四位二进制数，两位十六进制数表示一个字节。</p>\n<p>ASCII 有 128 个符号，使用一个字节表示，范围是 00000000-01111111 即\n00-7F</p>\n<p>参考：<a href=\"https://www.toolhelper.cn/EncodeDecode/EncodeDecode\">字符编码 / 解码</a>\n| <a href=\"https://symbl.cc/\">SYMBL</a> | <a href=\"https://hexed.it/\">HexED.it</a></p>\n<h2 id=\"gbk\">GBK</h2>\n<p>是 GB2312 的超集，有 21886\n个符号，使用两个字节表示一个符号。当文本中同时包含 GBK 与 ASCII\n字符时，GBK 对 ASCII 字符仍用一个字节表示。</p>\n<p>总体编码范围为 8140-FEFE 之间，首字节在 81-FE 之间，避开了 ASCII 的\n00-7F，尾字节在 40-FE 之间。</p>\n<h2 id=\"utf-8\">UTF-8</h2>\n<p>Unicode：为一个符号分配一个码，常用汉字的范围在 U+4E00 到 U+9FFF</p>\n<p>UTF-8：使用 1 到 4 个字节表示一个 Unicode 码。其中用 1 个字节表示的与\nASCII 兼容。</p>\n<p>用 n 个字节（n&gt;1）表示的，头个字节以 n 个 1 带 1 个 0\n开头，后面字节全以 10 开头（在 80-BF 的范围内）。</p>\n<table>\n<colgroup>\n<col style=\"width: 26%\">\n<col style=\"width: 40%\">\n<col style=\"width: 32%\">\n</colgroup>\n<thead>\n<tr>\n<th>Unicode</th>\n<th>UTF-8</th>\n<th> 第二列各个字节的十六进制范围</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 0000 0000-0000 007F</td>\n<td>0xxxxxxx</td>\n<td>00-7F</td>\n</tr>\n<tr>\n<td>0000 0080-0000 07FF</td>\n<td>110xxxxx 10xxxxxx</td>\n<td>C0-DF 80-BF</td>\n</tr>\n<tr>\n<td><strong>0000 0800-0000 FFFF</strong></td>\n<td><strong>1110xxxx 10xxxxxx 10xxxxxx</strong></td>\n<td>E0-EF 80-BF 80-BF</td>\n</tr>\n<tr>\n<td>0001 0000-0010 FFFF</td>\n<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>\n<td>F0-F7 80-BF 80-BF 80-BF</td>\n</tr>\n</tbody>\n</table>\n<style>\n    .r{\n        color:red\n    }\n    .o{\n        color:orange\n    }\n    .g{\n        color:green\n    }\n    .b{\n        color:blue\n    }\n</style>\n<p>如【这】的 Unicode 是 <strong>U+<span class=\"r\">8</span><span class=\"o\">F</span><span class=\"g\">D</span><span class=\"b\">9</span></strong> 等于<strong><span class=\"r\"> 1000</span>\n<span class=\"o\">1111</span> <span class=\"g\">1101</span> <span class=\"b\">1001</span></strong>，把它补到空位 x 里：</p>\n<p><strong>1110<span class=\"r\">1000</span> 10<span class=\"o\">1111</span><span class=\"g\">11</span> 10<span class=\"g\">01</span><span class=\"b\">1001</span></strong></p>\n<p>= E8BF99</p>\n<h2 id=\"锟斤拷的成因\">锟斤拷的成因</h2>\n<ol type=\"1\">\n<li>有一个文件 A</li>\n<li> 用 UTF-8 编码读 A，其中不符合 UTF-8 规范的十六进制值被解析为字符\n�（Replacement Character）</li>\n<li>把 A 保存为 UTF-8 格式的新文件 B，则 � 被记录为 EFBFBD</li>\n<li> 再用 GBK 编码读文件 B，如果有相邻的两个 �，即 EFBFBDEFBFBD，则读为\nEFBF BDEF BFBD</li>\n<li> 在 GBK 里，EFBF = 锟，BDEF = 斤，BFBD = 拷</li>\n</ol>\n<ul>\n<li>汉字：这是一段测试文本</li>\n<li> GBK：D5E2 CAC7 D2BB B6CE B2E2 CAD4 CEC4 B1BE</li>\n<li> 用 UTF-8 编码读它：D5 E2 CA C7 D2BB B6 CEB2 E2 CA D4 CE C4B1 BE\n<ul>\n<li>D5 表示两字节字符的开始，以 110 开头，但它后面的 E2 并不在 80-BF\n的范围之内，于是 D5 被解析为一个 �</li>\n<li>E2 表示三字节字符的开始，但它后面的 CA 并不在 80-BF 的范围之内，于是\nE2 被解析为一个 �</li>\n<li>……</li>\n<li>D2 表示两字节字符的开始，它后面的 BB 在 80-BF 的范围之内\n<ul>\n<li>于是：D2 BB = 110<span class=\"r\">10010</span> 10<span class=\"b\">111011</span></li>\n<li>0<span class=\"r\">100 10</span><span class=\"b\">11 1011</span> =\n4BB</li>\n<li>U+04BB 为 һ（Cyrillic Small Letter Shha）</li>\n</ul></li>\n<li>……</li>\n<li>CE 表示两字节字符的开始，它后面的 B2 在 80-BF 的范围之内\n<ul>\n<li>于是：CE B2 = 110<span class=\"r\">01110</span> 10<span class=\"b\">110010</span></li>\n<li>0<span class=\"r\">011 10</span><span class=\"b\">11 0010</span> =\n3B2</li>\n<li>U+03B2 为 β（Greek Small Letter Beta）</li>\n</ul></li>\n<li>……</li>\n<li> 读的结果是：����һ�β����ı�</li>\n</ul></li>\n<li>用 UTF-8 的格式保存时\n<ul>\n<li>� = U+FFFD = U+11111111 11111101\n<ul>\n<li>补到 1110xxxx 10xxxxxx 10xxxxxx 里</li>\n<li> 11101111 10111111 10111101 = EFBFBD</li>\n</ul></li>\n<li> 保存的结果是：EFBFBD EFBFBD EFBFBD EFBFBD D2BB EFBFBD CEB2 EFBFBD\nEFBFBD EFBFBD EFBFBD C4B1 EFBFBD</li>\n</ul></li>\n<li> 再用 GBK 编码读\n<ul>\n<li>EFBF BDEF BFBD EFBF BDEF BFBD D2BB EFBF BDCE B2EF BFBD EFBF BDEF\nBFBD EFBF BDC4 B1EF BFBD</li>\n<li> 结果是：锟斤拷锟斤拷一锟轿诧拷锟斤拷锟侥憋拷</li>\n</ul></li>\n</ul>\n"},{"title":"Hadoop","date":"2024-04-26T09:45:00.000Z","_content":"\n一种不看完整教程安装软件的方法：\n\n1. 在软件安装的目录里面，通常有一个 doc 文件夹\n2. 在解压软件包之后，什么配置都别写，上来先启动了再说\n3. 找到软件的日志文件在哪里\n4. 在日志里搜索 `WARN` `ERROR`\n5. 在网上搜索或者问 GPT 为什么会出现这个错误\n\n## VSCode 远程附加调试\n\nhadoop-env.sh\n\n```sh\nexport 某某_OPTS=\"-agentlib:jdwp=transport=dt_socket,address=8888,server=y,suspend=n\"\n```\n\nlaunch.json\n\n```json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"java\",\n      \"name\": \"Hadoop 某某\",\n      \"request\": \"attach\",\n      \"hostName\": \"ubuntu101\",\n      \"port\": 8888\n    }\n  ]\n}\n```\n\n## Java 代码运行环境的问题\n\n“连接 HDFS”是什么意思？再往前问：你是如何知道你的“集群”是正在运行着的？用 `jps` 查看 Java 进程。\n\n`jps` 查看的是什么？是所有正在运行着的 JVM 实例，每一个进程是一个单独的 JVM。\n\n“连接 HDFS”的意思是：再运行一个新的 JVM，称为“客户端”。这个 JVM 要与另一个 JVM 通信，那个 JVM 叫 NameNode。怎么通信？虽然不知道细节，但你可能看过这样的代码：\n\n```java\npackage com.example;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileStatus;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\n\npublic class App {\n    public static void main(String[] args) throws IOException, URISyntaxException {\n        Configuration conf = new Configuration();\n        FileSystem fs = FileSystem.get(new URI(\"hdfs://ubuntu101:9820\"), conf);\n        FileStatus[] fileStatuses = fs.listStatus(new Path(\"/\"));\n        for (FileStatus status : fileStatuses) {\n            System.out.println(status.getPath());\n        }\n        fs.close();\n    }\n}\n```\n\n现在的问题在于：\n\n1. <b>它 `import` 的东西是怎么来的？</span></b>\n2. <b>在它编译完之后，放到 JVM 上运行的时候（即“运行时”），它还需不需要它 `import` 的东西？</span></b>\n3. <b>它运行时的 JVM 在哪里，在虚拟机上还是在物理机上？如果在物理机上，它能不能与虚拟机通信？</span></b>\n4. <b>IDE 起的是什么作用？</span></b>\n\n先回答第四个问题：IDE 起的是工具人的作用。如果你用的 IDEA，并且成功连接 HDFS 了，你会在 IDEA 的命令行看到：\n\n```sh\n/lib/jvm/java-8-openjdk-amd64/bin/java -javaagent:/opt/idea-IC-241.15989.150/lib/idea_rt.jar=43273:/opt/idea-IC-241.15989.150/bin\\\n                                        -Dfile.encoding=UTF-8\\\n                                        -classpath /lib/jvm/java-8-openjdk-amd64/jre/lib/charsets.jar:/后面全都是Jar包的路径\n```\n\n它就是执行了一条命令：打开你的 JDK 目录里的 `java` ，然后向这个东西传了几个参数：工具人、文件编码、classpath\n\n关键的就是 classpath，你需要保证你代码“运行时”的东西能在 classpath 里找到。\n\n再回答第二个问题：它 `import` 的东西都是它的“运行时”需要的东西吗？\n\n不一定，这是它“编译时”需要的东西。当他报错报找不到某个类的时候，就是它“运行时”需要的东西。\n\n再回答第一个问题：搞到这些 jar 包。\n\n- 用 Maven\n- 如果你看过你 Hadoop 的安装目录，你会看到一个 `share` 文件夹\n\n对于第三个问题的解决思路：\n\n- 在虚拟机上运行客户端，连接虚拟机上的 NameNode\n- 在物理机上运行客户端，连接物理机上的 NameNode（如果你物理机搞成功了）\n- 在物理机上运行客户端，通过 winutils 这个中间人与虚拟机上的 NameNode 通信\n\n笔者最终的解决方案是：在虚拟机上安装 IDE，把 `$HADOOP_HOME/share/hadoop` 里的 Jar 包导进 IDE 里（这里用的是 IDEA），按播放键运行。如果报找不到类的错误，注意：在 `$HADOOP_HOME/share/hadoop/子文件夹` 下还有一个叫 `lib` 的文件夹。\n\n## 安装 Ubuntu 22.04.3\n\n1. 下载 Linux 操作系统镜像，可以理解为操作系统的“安装包”。https://launchpad.net/ubuntu/+cdmirrors\n2. 下载一个支持在 Windows 操作系统下运行 Linux 镜像的软件（宿主），它相当于一个没装操作系统的电脑，但是装了引导加载程序 GRUB\n   - 使用 VM Player\n3. 在宿主里“创建两台虚拟机”，相当于对这一份镜像，安装了两个新的操作系统，运行在你的宿主和 Windows 操作系统上\n\n前面三步改用 WSL（适用于 Linux 的 Windows 子系统）https://learn.microsoft.com/zh-cn/windows/wsl/\n\n4. 配置网络，给虚拟机和物理机搭上鹊桥\n\n   - 不同虚拟机采用不同静态 IP\n   - 把虚拟机网卡路由到宿主的网关，在 `C:\\ProgramData\\VMware\\vmnetnat.conf` 查看 VM 的 NAT 网关地址\n   - 修改 `/etc/hostname` 为自定义主机名\n   - `/etc/hosts` `C:\\Windows\\System32\\drivers\\etc\\hosts`\n\n如果你用的是 WSL，你在它上面开一个端口，可以直接在物理机上使用 `localhost:port` 访问。**如果你装了两台 WSL，它们的 IP 会是相同的**，这个问题不好解决。据说学大数据的都找不到大数据相关工作。那我们就退而求其次，根本没有必要搭分布式集群，在一台机器上搭个伪分布式就行了，文件分片只分一片。这样配置文件还不至于备份来备份去，只保留一份配置文件。\n\n5. 配置 Ubuntu 软件源 https://mirrors.ustc.edu.cn/help/ubuntu.html\n6. 安装 JDK https://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions\n\n7. 写环境变量\n\n8. 配置 SSH https://wangdoc.com/ssh/\n\n### 网络\n\n如果你用的 WSL + 单机伪分布式，只需要修改 `/etc/wsl.conf`：\n\n```conf\n[network]\nhostname=localhost\n```\n\n```sh\nexit\nwsl --shutdown\nwsl\n```\n\n如果你用的 VM + Ubuntu 22.04:\n\n编辑`/etc/netplan`下的`00-installer-config.yaml`文件。[netplan 文档](https://netplan.readthedocs.io/en/stable/netplan-tutorial/)\n\n选择`192.168.78`的依据是：\n\n- 在物理机使用`ipconfig`命令得到的【VMnet8】的 IPv4 地址`192.168.78.1`\n- 查看 `C:\\ProgramData\\VMware\\vmnetnat.conf` 里的 NAT 网关地址`192.168.78.2`\n\n```yaml\nnetwork:\n  version: 2\n  ethernets:\n    ens33:\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.78.101/24 # 每台机器设置成不同的\n      routes:\n        - to: default\n          via: 192.168.78.2\n      nameservers:\n        addresses:\n          - 192.168.78.2\n```\n\n```sh\nsudo netplan try\n```\n\n### SSH\n\n如果你用的 WSL + 单机伪分布式，下面两条命令只用做一次。\n\n如果你搭的分布式：每台机器上都执行：\n\n```sh\nssh-keygen -t rsa -m PEM\n```\n\n笔者这里的版本是 `OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022`，要加上 `-m PEM`，确保私钥以 -----BEGIN **RSA** PRIVATE KEY----- 开头。[后续错误](https://www.cnblogs.com/simple-li/p/14654812.html)\n\n每台机器上都执行：\n\n```sh\nssh-copy-id ubuntu101\nssh-copy-id ubuntu102\n...\n```\n\n### 存储空间\n\n```sh\nsudo du -h --max-depth=1\n```\n\n- 给虚拟机扩容：`https://hrfis.me/blog/linux.html#扩容`\n- 使用 https://www.diskgenius.cn/ 可以把你 D 盘的空间向 C 盘匀一点。如果你有多余的恢复分区，可以把它删了，只保留一个。\n- 使用 https://github.com/redtrillix/SpaceSniffer 可以可视化地展示你硬盘的占用情况。\n\n### 中文字体\n\n```sh\nsudo apt install language-pack-zh-hans\nsudo vi /etc/default/locale\nsudo mv /mnt/c/path/to/font ~ /usr/share/fonts\n```\n\n```conf\nLANG=zh_CN.UTF-8\nLANGUAGE=\"zh_CN:zh:en_US:en\"\n```\n\n## Hadoop 3.3.6\n\n9. 下载 Hadoop 软件包\n   - 在虚拟机上直接用 `wget`\n   - 用物理机下载它，从物理机的文件系统上再转移到虚拟机的文件系统上（在你的物理机硬盘上表现为 `.vmdk` 文件）\n     - VM Player 有共享文件夹功能，把你物理机硬盘的某一个文件夹挂载到虚拟机的 `/mnt/hgfs/Shared`\n     - 如果使用 WSL，你的物理机硬盘会被挂载到虚拟机的 `/mnt`\n     - 使用 XFtp 软件，与你的虚拟机进行 SSH 网络协议连接\n10. 在两台虚拟机上都把软件包解压。`/opt` 目录是空的，option 的意思，让你自己选择装不装到这里。\n\n### 配置\n\n11. 修改它们的配置文件，要保证每台机器配置文件内容相同。使用 VSCode 的 Remote-SSH 插件可以直接修改虚拟机内的文件，如果你用的是 WSL 更方便。\n\n在 $HADOOP_HOME/share/doc/hadoop/index.html 左下角有默认的配置文件。\n\n- `hadoop-env.sh` 指定 JAVA_HOME，启动 JVM 时的参数\n- `core-site.xml` 指定 hdfs 的 URI，文件系统存在本地哪个目录\n- `hdfs-site.xml` 指定谁当 NN、2NN，副本个数\n- `mapred-site.xml` 指定 MR 框架，MR 历史服务器\n- `yarn-site.xml` 指定 RM，YARN 历史服务器\n- `workers` 指定谁当 DataNode\n\n勤看日志。当 CPU 占用高，写磁盘不到 1MB/s，可能是出问题了在一直写 log。\n\n- 我们为什么要在 `hadoop-env.sh` 里写 `JAVA_HOME`？因为没写的时候，它会报错： JAVA_HOME is not set and could not be found；\n- 我们为什么要配置 SSH？因为没配置它会报错：Could not resolve hostname xxx: Name or service not known；\n- 我们为什么要在 `core-site.xml` 里配置 `fs.defaultFS` ？因为没配置它会报错：Cannot set priority of namenode process xxx。在日志文件里有：No services to connect, missing NameNode address；\n- 我们为什么要在 `core-site.xml` 里配置 `hadoop.tmp.dir` ？因为它默认存在 `/tmp` 文件夹下，而 `/tmp` 文件夹一重启就没了；\n- 我们为什么要在 `hdfs-site.xml` 里配置 `dfs.namenode.http-address` ？因为我们想用浏览器访问 HDFS；\n- 我们为什么要在 `core-site.xml` 里配置 `hadoop.http.staticuser.user` ？因为如果不配置，只有读的权限，没有写的权限；\n- ~~我们为什么可以不在 `hadoop-env.sh` 里配置各种用户名？因为还没有遇到报错的时候~~\n\n12. 在 NameNode 上执行 `hdfs -namenode format`，把 Hadoop 的文件系统 HDFS 初始化。在你的物理机文件系统上有一个虚拟机文件系统，在虚拟机文件系统上又有一个 HDFS\n\n### MapReduce\n\n1. `start-dfs.sh` 再 `jps` 查看 JVM 进程，你会看到 NN、2NN、DN\n2. 不需要 `start-yarn.sh`（如果你没有指定 MR 框架为 YARN，它默认为 local）\n3.\n\n```sh\ncd\nvi 1.txt\nhdfs dfs -put 1.txt /wcinput\nhadoop jar $HADOOP_HOME/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput /wcoutput\n```\n\n#### 配置\n\n```xml\n<property>\n  <name>mapreduce.framework.name</name>\n  <value>yarn</value>\n</property>\n<property>\n  <name>yarn.app.mapreduce.am.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n<property>\n  <name>mapreduce.map.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n<property>\n  <name>mapreduce.reduce.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n```\n\n#### MapReduce 编程入门\n\n[官方教程](https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/site/markdown/MapReduceTutorial.md)\n\n<img src=\"/blog/images/MapReduce.webp\">\n\n我们想统计一篇英文文章里的单词，每个都出现了多少次。假设这个文本文件只有英文单词、空格和换行符（LF 或者 CRLF）。\n\n需要继承 Mapper 类，重写它的 map() 方法。这个方法里传了三个参数：该行的偏移量、该行的文本内容、环境上下文。在这个方法里，对每一行按空格进行分割，形成一个 String[]，遍历这个 String[]，把它写到上下文里，这样写的就是一系列 `<word,1>`。\n\n```java\npublic class WordCountMapper extends Mapper<LongWritable, Text, Text, IntWritable> {\n    // KEYIN（偏移量），VALUEIN（每一行的文本），KEYOUT（单词），VALUEOUT（1）\n    // 对每一行进行分割\n    private Text wordText = new Text();// 向 context 里写的 KEYOUT。Text 相当于一个盒子\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n        String line = value.toString();\n        String[] words = line.split(\" \");\n\n        int i = 1;\n        System.out.println(i++ + \" | \" + key + \" | \" + value + \" | \" + line);\n        // input 有三行文本\n        // 输出了三次，每次为：1 | 偏移量 | 该行内容（不带换行符） | 该行内容（不带换行符）\n        // 其中 1 没有变，说明是分布执行的\n        // 第一次偏移量为 0，第一行有 35 个英文字母 + 空格，UTF-8 编码，加上 CRLF，第二次偏移量是 37\n\n        for (String word : words) {\n            wordText.set(word);\n            context.write(wordText, new IntWritable(1));\n            System.out.println(context.getCurrentKey() + \" | \" + context.getCurrentValue());\n            // 这行语句每次输出的 key 和 value 和当前 map() 传的参相同\n        }\n    }\n}\n```\n\n继承 Reducer 类，重写 reduce() 方法。\n\n```java\npublic class WordCountReducer extends Reducer<Text, IntWritable, Text, IntWritable> {\n    // KEYIN 和 VALUEIN 来自 WordCountMapper.map() 里向 context 里写的\n    // 每一个 reducer 处理的是 【相同的KEYIN】 的 【VALUEIN集合】\n    IntWritable outV = new IntWritable();// VALUEOUT\n\n    @Override\n    protected void reduce(Text key, Iterable<IntWritable> values, Context context)\n            throws IOException, InterruptedException {\n        int sum = 0;// 单词计数\n\n        for (IntWritable count : values) {\n            sum += count.get();\n            System.out.println(count.get());// values 的每一个 count 都是 1\n        }\n\n        outV.set(sum);\n        context.write(key, outV);\n    }\n}\n```\n\n继承 Driver 类，进行一些配置。\n\n```java\npublic class WordCountDriver {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n        job.setJarByClass(WordCountDriver.class);\n        job.setMapperClass(WordCountMapper.class);\n        job.setReducerClass(WordCountReducer.class);\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(IntWritable.class);\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(IntWritable.class);\n        FileInputFormat.setInputPaths(job, new Path(\"input.txt\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"output\"));\n        boolean result = job.waitForCompletion(true);\n        System.exit(result ? 0 : 1);\n    }\n}\n```\n\n`FileAlreadyExistsException`：不要提前建好输出文件夹\n\n### HDFS\n\n```sh\nstart-dfs.sh\n```\n\n```sh\nhdfs oev -p XML -i edits_xxxx -o ./edits_xxxx.xml\n```\n\n```sh\nhdfs oiv -p XML -i fsimage_xxxx -o ./fsimage_xxxx.xml\n```\n\nEditLog 和 FsImage 在：\n\n- NN 的 `${hadoop.tmp.dir}/dfs/name/current`\n- 2NN 的 `${hadoop.tmp.dir}/data/dfs/namesecondary/current`\n\n### YARN\n\n```sh\nstart-yarn.sh\n```\n\n#### 配置\n\n```xml\n<property>\n  <name>yarn.resourcemanager.hostname</name>\n  <value>localhost</value>\n</property>\n<property>\n  <name>yarn.nodemanager.aux-services</name>\n  <value>mapreduce_shuffle</value>\n</property>\n```\n\n## ZooKeeper\n\n如果你只用一台机器，应该不用装。\n\nZooKeeper 特点是只要有半数以上的节点正常工作，整个集群就能正常工作，所以适合装到奇数台服务器上。\n\n配置 `zkData/myid`\n\n配置 `conf/zoo.cfg`\n\n```\ndataDir=/usr/local/zookeeper-3.8.2/zkData\nserver.101=master:2888:3888\nserver.102=worker1:2888:3888\n```\n\n## HBase 2.5.8\n\n它自带 ZooKeeper 3.8.3，StandAlone 模式下只有一个 HMaster 进程：其中包括 HMaster，单个 HRegionServer 和 ZooKeeper 守护进程。\n\n它的数据可以存在本地或 HDFS 上，这里配置存在 HDFS 上。\n\nhttps://hbase.apache.org/book.html#standalone_dist\n\nhttps://hbase.apache.org/book.html#shell_exercises\n\n### 命令\n\n```sh\nstart-dfs.sh\nstart-hbase.sh\nhbase shell\n```\n\n```sh\nhelp\nlist\ncreate 'tablename','cfname1','cfname2'\nput 'tablename','rowkey','cfname1:qualifiername1','value'\nput 'tablename','rowkey','cfname2:','value'\nscan 'tablename'\nscan 'tablename',{COLUMNS=>'cfname1'}\nget 'tablename','rowkey'\ndescribe 'tablename'\ntruncate 'tablename'\ndrop 'tablename'\n```\n\n### 配置\n\n如果你没有在 `hbase-env.sh` 里配置 `JAVA_HOME`，你会看到：\n\n```\n127.0.0.1: +======================================================================+\n127.0.0.1: |                    Error: JAVA_HOME is not set                       |\n127.0.0.1: +----------------------------------------------------------------------+\n127.0.0.1: | Please download the latest Sun JDK from the Sun Java web site        |\n127.0.0.1: |     > http://www.oracle.com/technetwork/java/javase/downloads        |\n127.0.0.1: |                                                                      |\n127.0.0.1: | HBase requires Java 1.8 or later.                                    |\n127.0.0.1: +======================================================================+\n```\n\n`hbase-site.xml`：\n\n```xml\n  <property>\n    <name>hbase.cluster.distributed</name>\n    <value>false</value>\n  </property>\n  <property>\n    <name>hbase.rootdir</name>\n    <value>hdfs://localhost:9820/hbase</value>\n  </property>\n   <property>\n    <name>hbase.wal.provider</name>\n    <value>filesystem</value>\n  </property>\n```\n\n如果不设置 zkData 目录，它会在 `/tmp/hbase-yourname` 下。\n\n第三个配置项是为了解决：参见 https://hbase.apache.org/book.html#wal.providers\n\n```log\nERROR [RS-EventLoopGroup-3-2] util.NettyFutureUtils (NettyFutureUtils.java:lambda$addListener$0(58)) - Unexpected error caught when processing netty\njava.lang.IllegalArgumentException: object is not an instance of declaring class\n```\n\n## Spark 3.5.1\n\n### 命令\n\n```sh\nstart-master.sh\nstart-workers.sh\n```\n\n```sh\nspark-submit --class org.apache.spark.examples.SparkPi --master yarn $SPARK_HOME/examples/jars/spark-examples_2.12-3.5.1.jar\n```\n\n```sh\nspark-shell --master yarn\nval textFile = sc.textFile(\"hdfs://localhost:9820/wcinput\")\ntextFile.count()\n```\n\n### 配置\n\n`spark-env.sh`：\n\n```sh\nexport SPARK_DIST_CLASSPATH=$(/opt/hadoop-3.3.6/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=/opt/hadoop-3.3.6/etc/hadoop\nexport SPARK_MASTER_HOST=localhost\n```\n\n`workers`：\n\n```\nlocalhost\n```\n\n## Hive 4.0.0\n\nhttps://developer.aliyun.com/article/632261\n\nHive 的数据默认存在 HDFS 里，元数据可以存在 MySQL 上。\n\n分外部表和内部表。内部表默认存在 HDFS，外部表可以存在 HBase 里。\n\n### 配置元数据存在 MySQL 上\n\nhttps://www.mysqltutorial.org/getting-started-with-mysql/install-mysql-ubuntu/\n\n```sh\nsudo systemctl start mysql.service\nmysql -u root -p\ncreate database hive;\n```\n\n把 MySQL 驱动程序 https://dev.mysql.com/downloads/connector/j/ JAR 包复制到 `$HIVE_HOME/lib`\n\n`hive-site.xml`：\n\n```xml\n  <property>\n    <name>javax.jdo.option.ConnectionURL</name>\n    <value>jdbc:mysql://localhost:3306/hive</value>\n    <description>\n      JDBC connect string for a JDBC metastore.\n      To use SSL to encrypt/authenticate the connection, provide database-specific SSL flag in the connection URL.\n      For example, jdbc:postgresql://myhost/db?ssl=true for postgres database.\n    </description>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionDriverName</name>\n    <value>com.mysql.jdbc.Driver</value>\n    <description>Driver class name for a JDBC metastore</description>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionUserName</name>\n    <value>root</value>\n    <description>Username to use against metastore database</description>\n  </property>\n    <property>\n    <name>javax.jdo.option.ConnectionPassword</name>\n    <value>xxx</value>\n    <description>password to use against metastore database</description>\n  </property>\n```\n\n```sh\nschematool -dbType mysql -initSchema\n```\n\n```sh\nmysql -u root -p\nuse hive;\nshow tables;\nselect * from DBS;\n```\n\n### 启动 MySQL、DFS、YARN 和 HiveServer2，再用 beeline 连接 HS2\n\n它的日志默认在 `${java.io.tmpdir}/yourname/hive.log`\n\n```sh\njava -XshowSettings:properties -version\nsudo systemctl start mysql.service\nstart-dfs.sh\nstart-yarn.sh\nhiveserver2\nbeeline -u \"jdbc:hive2://localhost:10000/;user=yourname\"\nhelp\n```\n\n运行建表脚本：\n\n```sh\n0: jdbc:hive2://localhost:10000/> !run /path/to/create_table1.hql\n```\n\n执行 HQL：\n\n```sh\n0: jdbc:hive2://localhost:10000/> show tables;\n0: jdbc:hive2://localhost:10000/> select * from table1;\n0: jdbc:hive2://localhost:10000/> drop table table1;\n```\n\n### 创建内部分区表\n\n它的 LOAD DATA INTO TABLE 操作会调用 MapReduce\n\n加 LOCAL 是本地的，不加是 HDFS 的（？）\n\nHQL 示例：\n\n```sql\nCREATE TABLE table1 (\n  id STRING,\n  name STRING,\n  age INT,\n  department STRING\n)\nPARTITIONED BY (city STRING)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t'\nSTORED AS TEXTFILE;\n\nALTER TABLE table1 ADD PARTITION (city='nanjing');\nALTER TABLE table1 ADD PARTITION (city='wuhan');\nALTER TABLE table1 ADD PARTITION (city='shanghai');\nALTER TABLE table1 ADD PARTITION (city='beijing');\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data1.txt' INTO TABLE table1;\n\nSELECT * FROM table1;\n```\n\n文本文件示例：\n\n```\n1\tAlice\t25\tHR\tnanjing\n2\tBob\t30\tFinance\twuhan\n3\tCharlie\t28\tSales\tshanghai\n4\tDavid\t35\tMarketing\tbeijing\n5\tEve\t32\tIT\tnanjing\n6\tFrank\t27\tHR\twuhan\n```\n\n### 创建有结构列的内部分区表\n\n```sql\nCREATE TABLE table2 (\n  id INT,\n  name STRING,\n  hobbies ARRAY<STRING>,\n  address_map MAP<STRING, STRING>\n)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ','\nCOLLECTION ITEMS TERMINATED BY ';'\nMAP KEYS TERMINATED BY ':';\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data2.txt' INTO TABLE table2;\n\nSELECT * FROM table2;\n```\n\n```\n1,Lilei,book;tv;code,beijing:chaoyang;shanghai:pudong\n2,Hanmeimei,book;Lilei;code;basketball,beijing:haidian;shanghai:huangpu\n```\n\n### 创建外部分桶表到 HBase，用临时表数据覆写\n\n```sql\nCREATE EXTERNAL TABLE table3 (\n    rowid STRING,\n    name STRING,\n    sex STRING,\n    age INT\n)\nCLUSTERED BY (rowid) INTO 5 BUCKETS\nSTORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\nWITH SERDEPROPERTIES (\n    \"hbase.columns.mapping\" = \":key,cf:name,cf:sex,cf:age\"\n)\nTBLPROPERTIES (\n    \"hbase.table.name\" = \"table3\"\n);\n```\n\n```\nCREATE TEMPORARY TABLE table4 (\n  rowid STRING,\n  name STRING,\n  department STRING,\n  age INT\n)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ':';\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data3.txt' INTO TABLE table4;\n\nINSERT OVERWRITE TABLE table3\nSELECT * FROM table4;\n\nSELECT * FROM table3;\n```\n\n重启 Hive 客户端后，临时表 table4 会消失\n\n```\n1:John:Male:25\n2:Smith:Female:30\n3:Bob:Male:40\n4:Alice:Female:22\n5:Michael:Male:35\n6:Emily:Female:28\n```\n\n### 配置\n\n```log\njava.lang.RuntimeException: Error applying authorization policy on hive configuration: java.net.URISyntaxException: Relative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bsystem:user.name%7D\n\tat org.apache.hive.service.cli.CLIService.init(CLIService.java:122) ~[hive-service-4.0.0.jar:4.0.0]\n```\n\n在 `hive-site.xml` 里把报错信息里报的开头的 `system` 去了\n\n```log\njava.lang.RuntimeException: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: xxx is not allowed to impersonate anonymous\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:89) ~[hive-service-4.0.0.jar:4.0.0]\n```\n\n`core-site.xml`：\n\n```xml\n  <property>\n\t  <name>hadoop.proxyuser.xxx.hosts</name>\n\t  <value>*</value>\n  </property>\n  <property>\n\t  <name>hadoop.proxyuser.xxx.groups</name>\n\t  <value>*</value>\n  </property>\n```\n\n## Flume 1.11.0\n\n<img src=\"https://flume.apache.org/_images/DevGuide_image00.png\">\n\nFlume 是一个水槽，用于采集、聚合和传输流数据（事件）。对于每一个代理 agent，有源 source、汇 sink、渠道 channel。\n\nhttps://flume.apache.org/documentation.html\n\n### 启动参数\n\n```sh\nflume-ng agent --conf conf -f <配置文件路径> -n <代理名>\n```\n\n注意：下面的配置不一定对。笔者不小心把配置文件夹删了，但是保留的还有配置内容截图。所以下面的实际是 [OCR](https://web.baimiaoapp.com/) 过来后再修改的。之前是实验成功了的，而之后没有做过实验。\n\n### Hello（netcat 源与 logger 接收器）\n\n```conf\n# 代理名为 a1\n# 以 s 结尾说明可以有多个 source、sink、channel\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 设置 a1 的渠道 c1 为内存通道\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# 把 a1 的源和汇 r1 和 k1 绑定到 a1 的渠道 c1 上\n# source 可以指定多个渠道，sink 只能指定一个\n# 以多种方式流向一个结果\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n\n# 设置 a1 的源 r1 为一个 netcat-like source\n# 行为像 nc -lk [host] [port]\n# 它侦听给定端口并将每行文本转换为一个事件\na1.sources.r1.type = netcat\na1.sources.r1.bind = localhost\na1.sources.r1.port = 44444\n\n# 设置 a1 的汇 k1 为 logger 类型，写到 flume.log 里面\na1.sinks.k1.type = logger\n```\n\n### 实时监控单个追加文件（exec 源与 hdfs 接收器）\n\nExec Source 在启动时运行给定的 Unix 命令，并期望该进程在标准输出时连续生成数据。使用 `tail –F <filename>` 命令可以看到文件末尾的实时追加。\n\n这里监控本机的 datanode 日志，并上传到 HDFS。\n\n```conf\n# 代理\na2.sources = r2\na2.sinks = k2\na2.channels = c2\n\n# 渠道\na2.channels.c2.type = memory\na2.channels.c2.capacity = 1000\na2.channels.c2.transactionCapacity = 100\n\n# 源\na2.sources.r2.type = exec\na2.sources.r2.command = tail -F /opt/hadoop-ha/hadoop-3.3.6/logs/hadoop-rc-datanode-ubuntu101.log\na2.sources.r2.channels= c2\n\n# 汇\na2.sinks.k2.type = hdfs\na2.sinks.k2.hdfs.path = hdfs://mycluster/flume/%Y%m%d/%H\na2.sinks.k2.hdfs.filePrefix = logs-\na2.sinks.k2.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔a2.sinks.k2.hdfs.useLocalTimeStamp = true\na2.sinks.k2.hdfs.round = true\na2.sinks.k2.hdfs.roundValue = 1\na2.sinks.k2.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na2.sinks.k2.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na2.sinks.k2.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na2.sinks.k2.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na2.sinks.k2.hdfs.rollCount = 0\na2.sinks.k2.channel = c2\n```\n\n### 实时监控多个新文件（spooldir 源与 hdfs 接收器）\n\nSpooling Directory Source 监视指定目录中的新文件，并在新文件出现时解析事件。\n\n这里监控 `/opt/flume-1.11.0/upload` 目录。向目录里添加文件后，上传到 HDFS。\n\n```conf\n# 代理\na3.sources = r3\na3.sinks = k3\na3.channels = c3\n# 渠道\na3.channels.c3.type = memory\na3.channels.c3.capacity = 1000\na3.channels.c3.transactionCapacity = 100\n# 源\na3.sources.r3.type = spooldir\na3.sources.r3.spoolDir = /opt/flume-1.11.0/upload\na3.sources.r3.fileSuffix = .COMPLETED\n# 是否添加存储绝对路径文件名的标头\na3.sources.r3.fileHeader = true\n# 忽略以.tmp 结尾的文件\n# [^ ]*匹配任意不是空格的字符零次或多次\na3.sources.r3.ignorePattern = ^([^ ]*\\.tmp)$\n\na3.sources.r3.channels = c3\n\n# 汇\na3.sinks.k3.type = hdfs\na3.sinks.k3.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H\na3.sinks.k3.hdfs.filePrefix = upload-\na3.sinks.k3.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na3.sinks.k3.hdfs.useLocalTimeStamp = true\na3.sinks.k3.hdfs.round = true\na3.sinks.k3.hdfs.roundValue = 1\na3.sinks.k3.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na3.sinks.k3.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na3.sinks.k3.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na3.sinks.k3.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na3.sinks.k3.hdfs.rollCount = 0\n\na3.sinks.k3.channel = c3\n```\n\n### 实时监控多个追加文件（TAILDIR 源与 hdfs 接收器）\n\nTaildir Source：监视指定的文件，并在检测到附加到每个文件的新行后几乎实时地跟踪它们。如果正在写入新行，则此源将重试读取它们，等待写入完成。\n\n监控 flume 目录里的 upload 目录和 upload1 目录。\n\n```conf\n# 代理\na4.sources = r4\na4.sinks = k4\na4.channels = c4\n# 渠道\na4.channels.c4.type = memory\na4.channels.c4.capacity = 1000\na4.channels.c4.transactionCapacity = 100\n# 源\na4.sources.r4.type = TAILDIR\n# JSON 格式的文件，用于记录每个尾部文件的inode、绝对路径和最后位置\na4.sources.r4.positionFile = /opt/flume-1.11.0/taildir_position.json\na4.sources.r4.filegroups = f1 f2\n# 正则表达式只能用于文件名\na4.sources.r4.filegroups.f1 = /opt/flume-1.11.0/upload/.*\na4.sources.r4.filegroups.f2 = /opt/flume-1.11.0/upload1/.*\na4.sources.r4.channels = c4\n\n\n# 汇\na4.sinks.k4.type = hdfs\na4.sinks.k4.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H\na4.sinks.k4.hdfs.filePrefix = upload-\na4.sinks.k4.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na4.sinks.k4.hdfs.useLocalTimeStamp = true\na4.sinks.k4.hdfs.round = true\na4.sinks.k4.hdfs.roundValue = 1\na4.sinks.k4.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na4.sinks.k4.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na4.sinks.k4.hdfs.rollInterval = 20\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na4.sinks.k4.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na4.sinks.k4.hdfs.rollCount = 0\n\na4.sinks.k4.channel = c4\n```\n\n查看 `taildir_position.json`：其中 inode 号码是操作系统里文件的唯一 id，pos 是 flume 的读取到的最新的文件位置（偏移量）\n\nTaildir source 是存在问题的：如果文件名变了，会重新上传。如果日志的文件名在一天过后变了，它会被重新上传一份。解决方案有修改 flume 的源码，或者修改生成日志文件名部分的源码。\n\n### 监控 MapReduce 结果，上传到 HDFS\n\n（1）使用 Flume 的 spooldir 源递归监控 `/opt/result/` 目录下的文件，汇总到 hdfs 接收器 `hdfs://mycluster/flume/mrresult`。\n\n（2）将文献上传到 HDFS 的 `/wcinput` 目录，执行 MR 输出到本地路径 `file:///opt/result/mrresult`\n\n注意：如果提前建好 MR 的输出目录，MR 会报错。而如果不提前建好 flume 的监控目录，flume 会报错。\n\n所以只提前建好外层目录，用 flume 递归监控外层目录，MR 输出到内层目录。\n\n```conf\n# 代理\na5.sources = r5\na5.sinks = k5\na5.channels = c5\n# 渠道\na5.channels.c5.type = memory\na5.channels.c5.capacity = 1000\na5.channels.c5.transactionCapacity = 100\n# 源\na5.sources.r5.type = spooldir\na5.sources.r5.spoolDir = /opt/result\n# 递归监视子目录\na5.sources.r5.recursiveDirectorySearch = true\n# 指定文件名\na5.sources.r5.includePattern = ^part-r-00000$\n\na5.sources.r5.fileSuffix = .COMPLETED\n# 是否添加存储绝对路径文件名的标头\na5.sources.r5.fileHeader = true\n# 忽略以.tmp 结尾的文件\n# [^ ]*匹配任意不是空格的字符零次或多次\na5.sources.r5.ignorePattern = ^([^ ]*\\.tmp)$\n\na5.sources.r5.channels = c5\n\n# 汇\na5.sinks.k5.type = hdfs\na5.sinks.k5.hdfs.path = hdfs://mycluster/flume/mrresult\na5.sinks.k5.hdfs.filePrefix = upload-\na5.sinks.k5.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na5.sinks.k5.hdfs.useLocalTimeStamp = true\na5.sinks.k5.hdfs.round = true\na5.sinks.k5.hdfs.roundValue = 1\na5.sinks.k5.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na5.sinks.k5.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na5.sinks.k5.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na5.sinks.k5.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na5.sinks.k5.hdfs.rollCount = 0\n\na5.sinks.k5.channel = c5\n```\n\n执行 MR：\n\n```sh\nhadoop jar $HADOOP_HOME/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput file:///opt/result/mrresult\n```\n\n## 超链接\n\n- [rsync 用法教程](https://www.ruanyifeng.com/blog/2020/08/rsync.html)\n- [FileSystem Shell](https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/FileSystemShell.html)\n- [FileSystem API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileSystem.html)\n- [FileUtil API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileUtil.html)\n- [FileStatus API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileStatus.html)\n- [zookeeper CLI](https://zookeeper.apache.org/doc/r3.8.2/zookeeperCLI.html)\n- [zookeeper Server API](https://zookeeper.apache.org/doc/r3.8.2/apidocs/zookeeper-server/index.html)\n\n## 持久化\n\n### 命令\n\n所谓使用命令，就是使用别人已经写好的软件。\n\n环境变量 `PATH` 和物理路径，就是域名和 IP 地址的区别，要过一道中间商。域名和 IP 地址的中间商叫 DNS，`PATH` 和物理路径的中间商叫命令行解释器。\n\n你输入一个命令，命令行解释器会在 `PATH` 里寻找你命令的源文件入口在哪，然后向它传递参数。\n\n你可以使用 `which xxx` 或 `readlink -f $(which xxx)` 找你的命令源文件在哪里；使用 `which which` 找你的 `which` 在哪里。\n\n查看虚拟机的 IP 地址：`ifconfig` `ip addr`\n\n### 集群脚本\n\n前提是你搭了集群。笔者已经放弃集群了，太麻烦了。\n\n**all：对集群的所有机器执行操作**\n\n```sh\n#!/bin/bash\nif [ $# -eq 0 ]; then\n    echo \"Error: Please provide at least one argument.\"\n    exit 1\nelse\n    for host in ubuntu101 ubuntu102\n    do\n        echo \"============ $host ===========\"\n        ssh $host \"$@\"\n    done\nfi\n```\n\n**xsync：同步文件/目录到所有机器**\n\n先测试从一台机器上同步到另一台机器上：\n\n```sh\nrsync -av /path/to/src ubuntu102:/path/to/dst\n```\n\n从某台机器上同步到所有机器上：\n\n```sh\n#!/bin/bash\nif [ $# -lt 1 ]\nthen\n    echo Not Enough Argument!\n    exit;\nfi\n\nfor host in ubuntu101 ubuntu102 ubuntu103\ndo\n    echo ==================== $host ====================\n    for file in $@\n    do\n        if [ -e $file ]\n        then\n            pdir=$(cd -P $(dirname $file); pwd)\n            fname=$(basename $file)\n            ssh $host \"mkdir -p $pdir\"\n            rsync -av $pdir/$fname $host:$pdir\n        else\n            echo $file does not exists!\n        fi\n    done\ndone\n```\n\n**myhadoop**\n\n```sh\n#!/bin/bash\ncase \"$1\" in\n    \"start\")\n        echo \"============ 启动 hadoop 集群 ============\"\n\n        echo \"-------- 启动 HDFS --------\"\n        ssh \"ubuntu101\" \"$HADOOP_HOME/sbin/start-dfs.sh\"\n        echo \"-------- 启动 YARN --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/sbin/start-yarn.sh\"\n        echo \"-------- 启动 historyserver --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/bin/mapred --daemon start historyserver\"\n\n        all jps\n        ;;\n    \"stop\")\n        echo \"============ 关闭 hadoop 集群 ============\"\n\n        echo \"-------- 关闭 historyserver --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/bin/mapred --daemon stop historyserver\"\n        echo \"-------- 关闭 YARN --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/sbin/stop-yarn.sh\"\n        echo \"-------- 关闭 HDFS --------\"\n        ssh \"ubuntu101\" \"$HADOOP_HOME/sbin/stop-dfs.sh\"\n\n        all jps\n        ;;\n    *)\n        echo \"Invalid parameter!\"\n        exit 1\n        ;;\nesac\n```\n\n## 搭建 Hadoop 高可用集群\n\nHDFS 和 YARN 都是主从架构，当主节点挂了或者系统升级，集群会无法正常工作。高可用是指 7x24 小时系统可用，为此设置多个主节点。\n\n对于 HDFS，主节点是 NameNode，它负责保存文件系统快照、操作日志、处理客户端读写请求，2NN 负责定期合并文件系统快照和操作日志。为实现高可用，设置多个 NameNode 和 JournalNode。同一时间只能有一个 NameNode 为 Active，它负责生成快照文件 FsImage，其他 NameNode 为 Standby，拉取同步 FsImage，还起到 2NN 的作用。JournalNode 负责保证 EditLog 的一致性。Zookeeper 负责监控集群，如果 Active 的 NameNode 挂了，通过 ZKFC 进行故障转移。\n\n对于 YARN，主节点是 ResourceManager，从节点是 NodeManager。为此配置多个 ResourceManager。\n\nhttps://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html\n\n## HDFS-HA\n\n把原来的非高可用的 Hadoop 文件夹单独复制一份，重新写配置文件和环境变量、删除 data 和 logs 文件夹。先启动所有 journalnode 服务，再格式化一台机器的 namenode，启动该机器的 namenode 服务，然后在另两台机器上同步 namenode1 的元数据信息，并启动 namenode 服务。\n\n### 配置\n\n三台机器上分别都配一个 NameNode、JournalNode、DataNode\n\n`core-site.xml`:\n\n| name                        | value                                  |\n| --------------------------- | -------------------------------------- |\n| fs.defaultFS                | hdfs://mycluster                       |\n| hadoop.tmp.dir              | /usr/local/hadoop-ha/hadoop-3.3.6/data |\n| hadoop.http.staticuser.user | rc                                     |\n\n`hdfs-site.xml`:\n\n注意 `dfs.journalnode.edits.dir` 不能以 `file://` 开头，前两个要以 `file://` 开头，不然报错。以及小心各种拼写错误。\n\n| name                                          | value                                                                     |\n| --------------------------------------------- | ------------------------------------------------------------------------- |\n| dfs.nameservices                              | mycluster                                                                 |\n| dfs.namenode.name.dir                         | `file://${hadoop.tmp.dir}/name`                                           |\n| dfs.datanode.data.dir                         | `file://${hadoop.tmp.dir}/data`                                           |\n| dfs.journalnode.edits.dir                     | `${hadoop.tmp.dir}/journalnode`                                           |\n| dfs.ha.namenodes.mycluster                    | namenode1,namenode2,namenode3                                             |\n| dfs.namenode.rpc-address.mycluster.namenode1  | ubuntu101:8020                                                            |\n| dfs.namenode.rpc-address.mycluster.namenode2  | ubuntu102:8020                                                            |\n| dfs.namenode.rpc-address.mycluster.namenode3  | ubuntu103:8020                                                            |\n| dfs.namenode.http-address.mycluster.namenode1 | ubuntu101:9870                                                            |\n| dfs.namenode.http-address.mycluster.namenode2 | ubuntu102:9870                                                            |\n| dfs.namenode.http-address.mycluster.namenode3 | ubuntu103:9870                                                            |\n| dfs.namenode.shared.edits.dir                 | qjournal://ubuntu101:8485;ubuntu102:8485;ubuntu103:8485/mycluster         |\n| dfs.client.failover.proxy.provider.mycluster  | org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider |\n| dfs.ha.fencing.methods                        | sshfence                                                                  |\n| dfs.ha.fencing.ssh.private-key-files          | /home/rc/.ssh/id_rsa                                                      |\n\n### 实验\n\n在每一台机器上启动 JournalNode 服务：\n\n```sh\nhdfs --daemon start journalnode\n```\n\n在 101 机器上对 namenode 进行格式化，并启动 namenode：\n\n```sh\nhdfs namenode -format\nhdfs --daemon start namenode\n```\n\n在 Web 界面查看，为 Standby。\n\n在另两台机器上同步 namenode1 的元数据信息，并启动 namenode：\n\n```sh\nhdfs namenode -bootstrapStandby\nhdfs --daemon start namenode\n```\n\n在每一台机器上启动 DataNode：\n\n```sh\nhdfs --daemon start datanode\n```\n\n把 namenode2 切换成 Active 状态：\n\n```sh\nhdfs haadmin -transitionToActive namenode2\n```\n\n模拟 namenode2 挂掉：\n\n```sh\nkill -9 <进程号>\n```\n\n这时 namenode1 和 namenode3 还是 Standby。如果手动激活某一个，会显示 102 拒绝连接。\n\n重启 namenode2 后，三个 namenode 还是 Standby。这时再激活某一个，激活成功。这说明当所有的 namenode 都启动成功时，才可以激活某一个 namenode。这失去了高可用的意义和作用。为什么会这样呢？因为我们前面配置了隔离机制，同一时刻只能有一台 Active 的 namenode 响应客户端。如果有 namenode 挂了，其他 namenode 只是联系不上它，不知道是不是真的挂了。如果它没挂且是 Active，再激活其他机器，会出现两台 Active。为了准确无误地知道它是否挂了，需要配置 ZooKeeper 监控集群。\n\n### 自动故障转移配置\n\n在三台机器上都加一个 Zookeeper 和 ZKFC。\n\n在上面的配置文件基础上增加。\n\n`hdfs-site.xml`:\n\n| name                              | value |\n| --------------------------------- | ----- |\n| dfs.ha.automatic-failover.enabled | true  |\n\n`core-site.xml`:\n\n端口号要与 ZooKeeper 配置文件里的一致。\n\n| name                | value                                        |\n| ------------------- | -------------------------------------------- |\n| ha.zookeeper.quorum | ubuntu101:2181,ubuntu102:2181,ubuntu103:2181 |\n\n### 自动故障转移实验\n\n必须在 stop-dfs 之后，并启动 ZooKeeper 集群成功后，再在任意一台机器上初始化 HA 在 Zookeeper 中状态。\n\n```sh\nhdfs zkfc –formatZK\n```\n\n然后 start-dfs。formatZK 成功后，以后启动集群需要先启动 ZK 服务端，后启动 dfs。如果先启动 dfs，这时会有 ZKFC 进程，再启动 ZK 服务端后，ZKFC 进程被挤掉了，所有 namenode 都是 Standby。\n\n查看当前活跃节点：\n\n```sh\nhdfs haadmin -getAllServiceState\n```\n\n或者在 ZK 客户端查看选举锁：\n\n```sh\nget -s /hadoop-ha/mycluster/ActiveStandbyElectorLock\n```\n\n验证集群会不会进行故障转移：kill 掉 Active 的 namenode\n\n## YARN-HA\n\n### 配置\n\n三台机器上分别都配一个 ResourceManager、NodeManager、ZooKeeper\n\n`yarn-site.xml`:\n\n| name                                              | value                                                                                                                         |\n| ------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |\n| yarn.nodemanager.aux-services                     | mapreduce_shuffle                                                                                                             |\n| yarn.resourcemanager.ha.enabled                   | true                                                                                                                          |\n| yarn.resourcemanager.recovery.enabled             | true                                                                                                                          |\n| yarn.resourcemanager.store.class                  | org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore                                                         |\n| yarn.resourcemanager.zk-address                   | ubuntu101:2181,ubuntu102:2181,ubuntu103:2181                                                                                  |\n| yarn.resourcemanager.cluster-id                   | cluster-yarn1                                                                                                                 |\n| yarn.resourcemanager.ha.rm-ids                    | rm1,rm2,rm3                                                                                                                   |\n| yarn.resourcemanager.hostname.rm1                 | ubuntu101                                                                                                                     |\n| yarn.resourcemanager.hostname.rm2                 | ubuntu102                                                                                                                     |\n| yarn.resourcemanager.hostname.rm3                 | ubuntu103                                                                                                                     |\n| yarn.resourcemanager.webapp.address.rm1           | ubuntu101:8088                                                                                                                |\n| yarn.resourcemanager.webapp.address.rm2           | ubuntu102:8088                                                                                                                |\n| yarn.resourcemanager.webapp.address.rm3           | ubuntu103:8088                                                                                                                |\n| yarn.resourcemanager.address.rm1                  | ubuntu101:8032                                                                                                                |\n| yarn.resourcemanager.address.rm2                  | ubuntu102:8032                                                                                                                |\n| yarn.resourcemanager.address.rm3                  | ubuntu103:8032                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm1        | ubuntu101:8030                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm2        | ubuntu102:8030                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm3        | ubuntu103:8030                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm1 | ubuntu101:8031                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm2 | ubuntu102:8031                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm3 | ubuntu103:8031                                                                                                                |\n| yarn.nodemanager.env-whitelist                    | JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME |\n\n### 实验\n\n查看当前活跃节点：\n\n```sh\nyarn rmadmin -getAllServiceState\n```\n\n如果浏览器访问 Standby 节点的 8088 端口（RM），会自动跳转到 Active 节点。\n\n## 解决 JSch 认证失败\n\n问题出现在配置 HDFS HA 自动故障转移时。杀掉活跃的 NN 之后，它没有被隔离成功。\n\nJSch 是一个库，它在 Java 程序里建立 SSH 连接。\n\n### 在杀掉 Acitive 的 NN 过程中\n\n被杀的 Acitive 的 NN 上的 ZKFC 日志：\n\n1. [08:38:38,534] hadoop 高可用健康监测者抛出 EOF 异常，进入 SERVICE_NOT_RESPONDING 状态\n2. [08:38:38,615]\n   - org.apache.hadoop.hdfs.tools.DFSZKFailoverController: 获取不到本地 NN 的线程转储，由于连接被拒绝\n   - org.apache.hadoop.ha.ZKFailoverController: 退出 NN 的主选举，并标记需要隔离\n   - hadoop 高可用激活/备用选举者开始重新选举\n3. [08:38:38,636] ZK 客户端不能从服务端读取会话的附加信息，说服务端好像把套接字关闭了\n4. [08:38:38,739] 会话被关闭，ZK 客户端上对应的事件线程被终止\n5. 之后 hadoop 高可用健康监测者一直尝试重新连接 NN，连不上\n\n原来 Standby 的 NN 上的 ZKFC 日志：\n\n1. [08:38:38,719] 选举者检查到了需要被隔离的原活跃节点，ZKFC 找到了隔离目标\n2. [08:38:39,738] org.apache.hadoop.ha.FailoverController 联系不上被杀的 NN\n3. [08:38:39,748] 高可用节点隔离者开始隔离，用 org.apache.hadoop.ha.SshFenceByTcpPort，里面用了 JSch 库建立客户端（本机）与服务端（被杀的）之间的 SSH 连接\n4. [08:38:40,113] SSH 认证失败，隔离方法没有成功，选举失败\n5. 之后选举者一直在重建 ZK 连接，重新连 NN 连不上，重新隔离失败\n\n### 软件版本\n\n客户端（Standby 上的 org.apache.hadoop.ha.SshFenceByTcpPort.jsch）：\n\n- Hadoop 3.3.6 [SshFenceByTcpPort 源码](https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/SshFenceByTcpPort.java)\n- JSch 0.1.55\n\n服务端（被杀的）：\n\n- OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022 里的 sshd\n\n生成密钥时用的命令：\n\n```sh\nssh-keygen -t rsa -m PEM\n```\n\n### 关键日志\n\n原来为 Standby 的 NN 上的 ZKFC 日志：\n\n```log\nINFO org.apache.hadoop.ha.SshFenceByTcpPort.jsch:\n//...\nRemote version string: SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.6\nLocal version string: SSH-2.0-JSCH-0.1.54\n// JSch 0.1.55 的源码里，写的字符串就是 0.1.54，这个应该不影响\n//...\nAuthentications that can continue: publickey,keyboard-interactive,password\nNext authentication method: publickey\n// 这里用公钥认证失败了\nAuthentications that can continue: password\nNext authentication method: password\nDisconnecting from ubuntu103 port 22\nWARN org.apache.hadoop.ha.SshFenceByTcpPort: Unable to connect to ubuntu103 as user rc\ncom.jcraft.jsch.JSchException: Auth fail\n```\n\n### 解决思路\n\n看 sshd 的日志：\n\n```\nuserauth_pubkey: key type ssh-rsa not in PubkeyAcceptedAlgorithms\nerror: Received disconnect from 192.168.78.101 port 49968:3: com.jcraft.jsch.JSchException: Auth fail\nDisconnected from authenticating user rc 192.168.78.101 port 49968\n```\n\n```sh\nsudo vi /etc/ssh/sshd_config\n```\n\n```\nPubkeyAuthentication yes\nPubkeyAcceptedAlgorithms +ssh-rsa\n```\n\n```sh\nsudo systemctl restart sshd\n```\n\n## 不是问题的问题\n\n用\n\n```sh\nhdfs haadmin -getAllServiceState\n```\n\n查看 Active 转移成功了，但是联系不上被杀的那一方。\n\n具体地说，转移成功之后，三个方的 DN 都一直在尝试连被杀那一方的 NN，一直在写日志。除此之外上传下载都没问题。\n\n这应该是集群自带的心跳机制，不是问题。\n","source":"_posts/Hadoop.md","raw":"---\ntitle: Hadoop\ndate: 2024-04-26 17:45:00\npermalink: hadoop.html\n---\n\n一种不看完整教程安装软件的方法：\n\n1. 在软件安装的目录里面，通常有一个 doc 文件夹\n2. 在解压软件包之后，什么配置都别写，上来先启动了再说\n3. 找到软件的日志文件在哪里\n4. 在日志里搜索 `WARN` `ERROR`\n5. 在网上搜索或者问 GPT 为什么会出现这个错误\n\n## VSCode 远程附加调试\n\nhadoop-env.sh\n\n```sh\nexport 某某_OPTS=\"-agentlib:jdwp=transport=dt_socket,address=8888,server=y,suspend=n\"\n```\n\nlaunch.json\n\n```json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"java\",\n      \"name\": \"Hadoop 某某\",\n      \"request\": \"attach\",\n      \"hostName\": \"ubuntu101\",\n      \"port\": 8888\n    }\n  ]\n}\n```\n\n## Java 代码运行环境的问题\n\n“连接 HDFS”是什么意思？再往前问：你是如何知道你的“集群”是正在运行着的？用 `jps` 查看 Java 进程。\n\n`jps` 查看的是什么？是所有正在运行着的 JVM 实例，每一个进程是一个单独的 JVM。\n\n“连接 HDFS”的意思是：再运行一个新的 JVM，称为“客户端”。这个 JVM 要与另一个 JVM 通信，那个 JVM 叫 NameNode。怎么通信？虽然不知道细节，但你可能看过这样的代码：\n\n```java\npackage com.example;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.FileStatus;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\n\npublic class App {\n    public static void main(String[] args) throws IOException, URISyntaxException {\n        Configuration conf = new Configuration();\n        FileSystem fs = FileSystem.get(new URI(\"hdfs://ubuntu101:9820\"), conf);\n        FileStatus[] fileStatuses = fs.listStatus(new Path(\"/\"));\n        for (FileStatus status : fileStatuses) {\n            System.out.println(status.getPath());\n        }\n        fs.close();\n    }\n}\n```\n\n现在的问题在于：\n\n1. <b>它 `import` 的东西是怎么来的？</span></b>\n2. <b>在它编译完之后，放到 JVM 上运行的时候（即“运行时”），它还需不需要它 `import` 的东西？</span></b>\n3. <b>它运行时的 JVM 在哪里，在虚拟机上还是在物理机上？如果在物理机上，它能不能与虚拟机通信？</span></b>\n4. <b>IDE 起的是什么作用？</span></b>\n\n先回答第四个问题：IDE 起的是工具人的作用。如果你用的 IDEA，并且成功连接 HDFS 了，你会在 IDEA 的命令行看到：\n\n```sh\n/lib/jvm/java-8-openjdk-amd64/bin/java -javaagent:/opt/idea-IC-241.15989.150/lib/idea_rt.jar=43273:/opt/idea-IC-241.15989.150/bin\\\n                                        -Dfile.encoding=UTF-8\\\n                                        -classpath /lib/jvm/java-8-openjdk-amd64/jre/lib/charsets.jar:/后面全都是Jar包的路径\n```\n\n它就是执行了一条命令：打开你的 JDK 目录里的 `java` ，然后向这个东西传了几个参数：工具人、文件编码、classpath\n\n关键的就是 classpath，你需要保证你代码“运行时”的东西能在 classpath 里找到。\n\n再回答第二个问题：它 `import` 的东西都是它的“运行时”需要的东西吗？\n\n不一定，这是它“编译时”需要的东西。当他报错报找不到某个类的时候，就是它“运行时”需要的东西。\n\n再回答第一个问题：搞到这些 jar 包。\n\n- 用 Maven\n- 如果你看过你 Hadoop 的安装目录，你会看到一个 `share` 文件夹\n\n对于第三个问题的解决思路：\n\n- 在虚拟机上运行客户端，连接虚拟机上的 NameNode\n- 在物理机上运行客户端，连接物理机上的 NameNode（如果你物理机搞成功了）\n- 在物理机上运行客户端，通过 winutils 这个中间人与虚拟机上的 NameNode 通信\n\n笔者最终的解决方案是：在虚拟机上安装 IDE，把 `$HADOOP_HOME/share/hadoop` 里的 Jar 包导进 IDE 里（这里用的是 IDEA），按播放键运行。如果报找不到类的错误，注意：在 `$HADOOP_HOME/share/hadoop/子文件夹` 下还有一个叫 `lib` 的文件夹。\n\n## 安装 Ubuntu 22.04.3\n\n1. 下载 Linux 操作系统镜像，可以理解为操作系统的“安装包”。https://launchpad.net/ubuntu/+cdmirrors\n2. 下载一个支持在 Windows 操作系统下运行 Linux 镜像的软件（宿主），它相当于一个没装操作系统的电脑，但是装了引导加载程序 GRUB\n   - 使用 VM Player\n3. 在宿主里“创建两台虚拟机”，相当于对这一份镜像，安装了两个新的操作系统，运行在你的宿主和 Windows 操作系统上\n\n前面三步改用 WSL（适用于 Linux 的 Windows 子系统）https://learn.microsoft.com/zh-cn/windows/wsl/\n\n4. 配置网络，给虚拟机和物理机搭上鹊桥\n\n   - 不同虚拟机采用不同静态 IP\n   - 把虚拟机网卡路由到宿主的网关，在 `C:\\ProgramData\\VMware\\vmnetnat.conf` 查看 VM 的 NAT 网关地址\n   - 修改 `/etc/hostname` 为自定义主机名\n   - `/etc/hosts` `C:\\Windows\\System32\\drivers\\etc\\hosts`\n\n如果你用的是 WSL，你在它上面开一个端口，可以直接在物理机上使用 `localhost:port` 访问。**如果你装了两台 WSL，它们的 IP 会是相同的**，这个问题不好解决。据说学大数据的都找不到大数据相关工作。那我们就退而求其次，根本没有必要搭分布式集群，在一台机器上搭个伪分布式就行了，文件分片只分一片。这样配置文件还不至于备份来备份去，只保留一份配置文件。\n\n5. 配置 Ubuntu 软件源 https://mirrors.ustc.edu.cn/help/ubuntu.html\n6. 安装 JDK https://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions\n\n7. 写环境变量\n\n8. 配置 SSH https://wangdoc.com/ssh/\n\n### 网络\n\n如果你用的 WSL + 单机伪分布式，只需要修改 `/etc/wsl.conf`：\n\n```conf\n[network]\nhostname=localhost\n```\n\n```sh\nexit\nwsl --shutdown\nwsl\n```\n\n如果你用的 VM + Ubuntu 22.04:\n\n编辑`/etc/netplan`下的`00-installer-config.yaml`文件。[netplan 文档](https://netplan.readthedocs.io/en/stable/netplan-tutorial/)\n\n选择`192.168.78`的依据是：\n\n- 在物理机使用`ipconfig`命令得到的【VMnet8】的 IPv4 地址`192.168.78.1`\n- 查看 `C:\\ProgramData\\VMware\\vmnetnat.conf` 里的 NAT 网关地址`192.168.78.2`\n\n```yaml\nnetwork:\n  version: 2\n  ethernets:\n    ens33:\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.78.101/24 # 每台机器设置成不同的\n      routes:\n        - to: default\n          via: 192.168.78.2\n      nameservers:\n        addresses:\n          - 192.168.78.2\n```\n\n```sh\nsudo netplan try\n```\n\n### SSH\n\n如果你用的 WSL + 单机伪分布式，下面两条命令只用做一次。\n\n如果你搭的分布式：每台机器上都执行：\n\n```sh\nssh-keygen -t rsa -m PEM\n```\n\n笔者这里的版本是 `OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022`，要加上 `-m PEM`，确保私钥以 -----BEGIN **RSA** PRIVATE KEY----- 开头。[后续错误](https://www.cnblogs.com/simple-li/p/14654812.html)\n\n每台机器上都执行：\n\n```sh\nssh-copy-id ubuntu101\nssh-copy-id ubuntu102\n...\n```\n\n### 存储空间\n\n```sh\nsudo du -h --max-depth=1\n```\n\n- 给虚拟机扩容：`https://hrfis.me/blog/linux.html#扩容`\n- 使用 https://www.diskgenius.cn/ 可以把你 D 盘的空间向 C 盘匀一点。如果你有多余的恢复分区，可以把它删了，只保留一个。\n- 使用 https://github.com/redtrillix/SpaceSniffer 可以可视化地展示你硬盘的占用情况。\n\n### 中文字体\n\n```sh\nsudo apt install language-pack-zh-hans\nsudo vi /etc/default/locale\nsudo mv /mnt/c/path/to/font ~ /usr/share/fonts\n```\n\n```conf\nLANG=zh_CN.UTF-8\nLANGUAGE=\"zh_CN:zh:en_US:en\"\n```\n\n## Hadoop 3.3.6\n\n9. 下载 Hadoop 软件包\n   - 在虚拟机上直接用 `wget`\n   - 用物理机下载它，从物理机的文件系统上再转移到虚拟机的文件系统上（在你的物理机硬盘上表现为 `.vmdk` 文件）\n     - VM Player 有共享文件夹功能，把你物理机硬盘的某一个文件夹挂载到虚拟机的 `/mnt/hgfs/Shared`\n     - 如果使用 WSL，你的物理机硬盘会被挂载到虚拟机的 `/mnt`\n     - 使用 XFtp 软件，与你的虚拟机进行 SSH 网络协议连接\n10. 在两台虚拟机上都把软件包解压。`/opt` 目录是空的，option 的意思，让你自己选择装不装到这里。\n\n### 配置\n\n11. 修改它们的配置文件，要保证每台机器配置文件内容相同。使用 VSCode 的 Remote-SSH 插件可以直接修改虚拟机内的文件，如果你用的是 WSL 更方便。\n\n在 $HADOOP_HOME/share/doc/hadoop/index.html 左下角有默认的配置文件。\n\n- `hadoop-env.sh` 指定 JAVA_HOME，启动 JVM 时的参数\n- `core-site.xml` 指定 hdfs 的 URI，文件系统存在本地哪个目录\n- `hdfs-site.xml` 指定谁当 NN、2NN，副本个数\n- `mapred-site.xml` 指定 MR 框架，MR 历史服务器\n- `yarn-site.xml` 指定 RM，YARN 历史服务器\n- `workers` 指定谁当 DataNode\n\n勤看日志。当 CPU 占用高，写磁盘不到 1MB/s，可能是出问题了在一直写 log。\n\n- 我们为什么要在 `hadoop-env.sh` 里写 `JAVA_HOME`？因为没写的时候，它会报错： JAVA_HOME is not set and could not be found；\n- 我们为什么要配置 SSH？因为没配置它会报错：Could not resolve hostname xxx: Name or service not known；\n- 我们为什么要在 `core-site.xml` 里配置 `fs.defaultFS` ？因为没配置它会报错：Cannot set priority of namenode process xxx。在日志文件里有：No services to connect, missing NameNode address；\n- 我们为什么要在 `core-site.xml` 里配置 `hadoop.tmp.dir` ？因为它默认存在 `/tmp` 文件夹下，而 `/tmp` 文件夹一重启就没了；\n- 我们为什么要在 `hdfs-site.xml` 里配置 `dfs.namenode.http-address` ？因为我们想用浏览器访问 HDFS；\n- 我们为什么要在 `core-site.xml` 里配置 `hadoop.http.staticuser.user` ？因为如果不配置，只有读的权限，没有写的权限；\n- ~~我们为什么可以不在 `hadoop-env.sh` 里配置各种用户名？因为还没有遇到报错的时候~~\n\n12. 在 NameNode 上执行 `hdfs -namenode format`，把 Hadoop 的文件系统 HDFS 初始化。在你的物理机文件系统上有一个虚拟机文件系统，在虚拟机文件系统上又有一个 HDFS\n\n### MapReduce\n\n1. `start-dfs.sh` 再 `jps` 查看 JVM 进程，你会看到 NN、2NN、DN\n2. 不需要 `start-yarn.sh`（如果你没有指定 MR 框架为 YARN，它默认为 local）\n3.\n\n```sh\ncd\nvi 1.txt\nhdfs dfs -put 1.txt /wcinput\nhadoop jar $HADOOP_HOME/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput /wcoutput\n```\n\n#### 配置\n\n```xml\n<property>\n  <name>mapreduce.framework.name</name>\n  <value>yarn</value>\n</property>\n<property>\n  <name>yarn.app.mapreduce.am.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n<property>\n  <name>mapreduce.map.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n<property>\n  <name>mapreduce.reduce.env</name>\n  <value>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6</value>\n</property>\n```\n\n#### MapReduce 编程入门\n\n[官方教程](https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/site/markdown/MapReduceTutorial.md)\n\n<img src=\"/blog/images/MapReduce.webp\">\n\n我们想统计一篇英文文章里的单词，每个都出现了多少次。假设这个文本文件只有英文单词、空格和换行符（LF 或者 CRLF）。\n\n需要继承 Mapper 类，重写它的 map() 方法。这个方法里传了三个参数：该行的偏移量、该行的文本内容、环境上下文。在这个方法里，对每一行按空格进行分割，形成一个 String[]，遍历这个 String[]，把它写到上下文里，这样写的就是一系列 `<word,1>`。\n\n```java\npublic class WordCountMapper extends Mapper<LongWritable, Text, Text, IntWritable> {\n    // KEYIN（偏移量），VALUEIN（每一行的文本），KEYOUT（单词），VALUEOUT（1）\n    // 对每一行进行分割\n    private Text wordText = new Text();// 向 context 里写的 KEYOUT。Text 相当于一个盒子\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n        String line = value.toString();\n        String[] words = line.split(\" \");\n\n        int i = 1;\n        System.out.println(i++ + \" | \" + key + \" | \" + value + \" | \" + line);\n        // input 有三行文本\n        // 输出了三次，每次为：1 | 偏移量 | 该行内容（不带换行符） | 该行内容（不带换行符）\n        // 其中 1 没有变，说明是分布执行的\n        // 第一次偏移量为 0，第一行有 35 个英文字母 + 空格，UTF-8 编码，加上 CRLF，第二次偏移量是 37\n\n        for (String word : words) {\n            wordText.set(word);\n            context.write(wordText, new IntWritable(1));\n            System.out.println(context.getCurrentKey() + \" | \" + context.getCurrentValue());\n            // 这行语句每次输出的 key 和 value 和当前 map() 传的参相同\n        }\n    }\n}\n```\n\n继承 Reducer 类，重写 reduce() 方法。\n\n```java\npublic class WordCountReducer extends Reducer<Text, IntWritable, Text, IntWritable> {\n    // KEYIN 和 VALUEIN 来自 WordCountMapper.map() 里向 context 里写的\n    // 每一个 reducer 处理的是 【相同的KEYIN】 的 【VALUEIN集合】\n    IntWritable outV = new IntWritable();// VALUEOUT\n\n    @Override\n    protected void reduce(Text key, Iterable<IntWritable> values, Context context)\n            throws IOException, InterruptedException {\n        int sum = 0;// 单词计数\n\n        for (IntWritable count : values) {\n            sum += count.get();\n            System.out.println(count.get());// values 的每一个 count 都是 1\n        }\n\n        outV.set(sum);\n        context.write(key, outV);\n    }\n}\n```\n\n继承 Driver 类，进行一些配置。\n\n```java\npublic class WordCountDriver {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n        job.setJarByClass(WordCountDriver.class);\n        job.setMapperClass(WordCountMapper.class);\n        job.setReducerClass(WordCountReducer.class);\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(IntWritable.class);\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(IntWritable.class);\n        FileInputFormat.setInputPaths(job, new Path(\"input.txt\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"output\"));\n        boolean result = job.waitForCompletion(true);\n        System.exit(result ? 0 : 1);\n    }\n}\n```\n\n`FileAlreadyExistsException`：不要提前建好输出文件夹\n\n### HDFS\n\n```sh\nstart-dfs.sh\n```\n\n```sh\nhdfs oev -p XML -i edits_xxxx -o ./edits_xxxx.xml\n```\n\n```sh\nhdfs oiv -p XML -i fsimage_xxxx -o ./fsimage_xxxx.xml\n```\n\nEditLog 和 FsImage 在：\n\n- NN 的 `${hadoop.tmp.dir}/dfs/name/current`\n- 2NN 的 `${hadoop.tmp.dir}/data/dfs/namesecondary/current`\n\n### YARN\n\n```sh\nstart-yarn.sh\n```\n\n#### 配置\n\n```xml\n<property>\n  <name>yarn.resourcemanager.hostname</name>\n  <value>localhost</value>\n</property>\n<property>\n  <name>yarn.nodemanager.aux-services</name>\n  <value>mapreduce_shuffle</value>\n</property>\n```\n\n## ZooKeeper\n\n如果你只用一台机器，应该不用装。\n\nZooKeeper 特点是只要有半数以上的节点正常工作，整个集群就能正常工作，所以适合装到奇数台服务器上。\n\n配置 `zkData/myid`\n\n配置 `conf/zoo.cfg`\n\n```\ndataDir=/usr/local/zookeeper-3.8.2/zkData\nserver.101=master:2888:3888\nserver.102=worker1:2888:3888\n```\n\n## HBase 2.5.8\n\n它自带 ZooKeeper 3.8.3，StandAlone 模式下只有一个 HMaster 进程：其中包括 HMaster，单个 HRegionServer 和 ZooKeeper 守护进程。\n\n它的数据可以存在本地或 HDFS 上，这里配置存在 HDFS 上。\n\nhttps://hbase.apache.org/book.html#standalone_dist\n\nhttps://hbase.apache.org/book.html#shell_exercises\n\n### 命令\n\n```sh\nstart-dfs.sh\nstart-hbase.sh\nhbase shell\n```\n\n```sh\nhelp\nlist\ncreate 'tablename','cfname1','cfname2'\nput 'tablename','rowkey','cfname1:qualifiername1','value'\nput 'tablename','rowkey','cfname2:','value'\nscan 'tablename'\nscan 'tablename',{COLUMNS=>'cfname1'}\nget 'tablename','rowkey'\ndescribe 'tablename'\ntruncate 'tablename'\ndrop 'tablename'\n```\n\n### 配置\n\n如果你没有在 `hbase-env.sh` 里配置 `JAVA_HOME`，你会看到：\n\n```\n127.0.0.1: +======================================================================+\n127.0.0.1: |                    Error: JAVA_HOME is not set                       |\n127.0.0.1: +----------------------------------------------------------------------+\n127.0.0.1: | Please download the latest Sun JDK from the Sun Java web site        |\n127.0.0.1: |     > http://www.oracle.com/technetwork/java/javase/downloads        |\n127.0.0.1: |                                                                      |\n127.0.0.1: | HBase requires Java 1.8 or later.                                    |\n127.0.0.1: +======================================================================+\n```\n\n`hbase-site.xml`：\n\n```xml\n  <property>\n    <name>hbase.cluster.distributed</name>\n    <value>false</value>\n  </property>\n  <property>\n    <name>hbase.rootdir</name>\n    <value>hdfs://localhost:9820/hbase</value>\n  </property>\n   <property>\n    <name>hbase.wal.provider</name>\n    <value>filesystem</value>\n  </property>\n```\n\n如果不设置 zkData 目录，它会在 `/tmp/hbase-yourname` 下。\n\n第三个配置项是为了解决：参见 https://hbase.apache.org/book.html#wal.providers\n\n```log\nERROR [RS-EventLoopGroup-3-2] util.NettyFutureUtils (NettyFutureUtils.java:lambda$addListener$0(58)) - Unexpected error caught when processing netty\njava.lang.IllegalArgumentException: object is not an instance of declaring class\n```\n\n## Spark 3.5.1\n\n### 命令\n\n```sh\nstart-master.sh\nstart-workers.sh\n```\n\n```sh\nspark-submit --class org.apache.spark.examples.SparkPi --master yarn $SPARK_HOME/examples/jars/spark-examples_2.12-3.5.1.jar\n```\n\n```sh\nspark-shell --master yarn\nval textFile = sc.textFile(\"hdfs://localhost:9820/wcinput\")\ntextFile.count()\n```\n\n### 配置\n\n`spark-env.sh`：\n\n```sh\nexport SPARK_DIST_CLASSPATH=$(/opt/hadoop-3.3.6/bin/hadoop classpath)\nexport HADOOP_CONF_DIR=/opt/hadoop-3.3.6/etc/hadoop\nexport SPARK_MASTER_HOST=localhost\n```\n\n`workers`：\n\n```\nlocalhost\n```\n\n## Hive 4.0.0\n\nhttps://developer.aliyun.com/article/632261\n\nHive 的数据默认存在 HDFS 里，元数据可以存在 MySQL 上。\n\n分外部表和内部表。内部表默认存在 HDFS，外部表可以存在 HBase 里。\n\n### 配置元数据存在 MySQL 上\n\nhttps://www.mysqltutorial.org/getting-started-with-mysql/install-mysql-ubuntu/\n\n```sh\nsudo systemctl start mysql.service\nmysql -u root -p\ncreate database hive;\n```\n\n把 MySQL 驱动程序 https://dev.mysql.com/downloads/connector/j/ JAR 包复制到 `$HIVE_HOME/lib`\n\n`hive-site.xml`：\n\n```xml\n  <property>\n    <name>javax.jdo.option.ConnectionURL</name>\n    <value>jdbc:mysql://localhost:3306/hive</value>\n    <description>\n      JDBC connect string for a JDBC metastore.\n      To use SSL to encrypt/authenticate the connection, provide database-specific SSL flag in the connection URL.\n      For example, jdbc:postgresql://myhost/db?ssl=true for postgres database.\n    </description>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionDriverName</name>\n    <value>com.mysql.jdbc.Driver</value>\n    <description>Driver class name for a JDBC metastore</description>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionUserName</name>\n    <value>root</value>\n    <description>Username to use against metastore database</description>\n  </property>\n    <property>\n    <name>javax.jdo.option.ConnectionPassword</name>\n    <value>xxx</value>\n    <description>password to use against metastore database</description>\n  </property>\n```\n\n```sh\nschematool -dbType mysql -initSchema\n```\n\n```sh\nmysql -u root -p\nuse hive;\nshow tables;\nselect * from DBS;\n```\n\n### 启动 MySQL、DFS、YARN 和 HiveServer2，再用 beeline 连接 HS2\n\n它的日志默认在 `${java.io.tmpdir}/yourname/hive.log`\n\n```sh\njava -XshowSettings:properties -version\nsudo systemctl start mysql.service\nstart-dfs.sh\nstart-yarn.sh\nhiveserver2\nbeeline -u \"jdbc:hive2://localhost:10000/;user=yourname\"\nhelp\n```\n\n运行建表脚本：\n\n```sh\n0: jdbc:hive2://localhost:10000/> !run /path/to/create_table1.hql\n```\n\n执行 HQL：\n\n```sh\n0: jdbc:hive2://localhost:10000/> show tables;\n0: jdbc:hive2://localhost:10000/> select * from table1;\n0: jdbc:hive2://localhost:10000/> drop table table1;\n```\n\n### 创建内部分区表\n\n它的 LOAD DATA INTO TABLE 操作会调用 MapReduce\n\n加 LOCAL 是本地的，不加是 HDFS 的（？）\n\nHQL 示例：\n\n```sql\nCREATE TABLE table1 (\n  id STRING,\n  name STRING,\n  age INT,\n  department STRING\n)\nPARTITIONED BY (city STRING)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY '\\t'\nSTORED AS TEXTFILE;\n\nALTER TABLE table1 ADD PARTITION (city='nanjing');\nALTER TABLE table1 ADD PARTITION (city='wuhan');\nALTER TABLE table1 ADD PARTITION (city='shanghai');\nALTER TABLE table1 ADD PARTITION (city='beijing');\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data1.txt' INTO TABLE table1;\n\nSELECT * FROM table1;\n```\n\n文本文件示例：\n\n```\n1\tAlice\t25\tHR\tnanjing\n2\tBob\t30\tFinance\twuhan\n3\tCharlie\t28\tSales\tshanghai\n4\tDavid\t35\tMarketing\tbeijing\n5\tEve\t32\tIT\tnanjing\n6\tFrank\t27\tHR\twuhan\n```\n\n### 创建有结构列的内部分区表\n\n```sql\nCREATE TABLE table2 (\n  id INT,\n  name STRING,\n  hobbies ARRAY<STRING>,\n  address_map MAP<STRING, STRING>\n)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ','\nCOLLECTION ITEMS TERMINATED BY ';'\nMAP KEYS TERMINATED BY ':';\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data2.txt' INTO TABLE table2;\n\nSELECT * FROM table2;\n```\n\n```\n1,Lilei,book;tv;code,beijing:chaoyang;shanghai:pudong\n2,Hanmeimei,book;Lilei;code;basketball,beijing:haidian;shanghai:huangpu\n```\n\n### 创建外部分桶表到 HBase，用临时表数据覆写\n\n```sql\nCREATE EXTERNAL TABLE table3 (\n    rowid STRING,\n    name STRING,\n    sex STRING,\n    age INT\n)\nCLUSTERED BY (rowid) INTO 5 BUCKETS\nSTORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\nWITH SERDEPROPERTIES (\n    \"hbase.columns.mapping\" = \":key,cf:name,cf:sex,cf:age\"\n)\nTBLPROPERTIES (\n    \"hbase.table.name\" = \"table3\"\n);\n```\n\n```\nCREATE TEMPORARY TABLE table4 (\n  rowid STRING,\n  name STRING,\n  department STRING,\n  age INT\n)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ':';\n\nLOAD DATA LOCAL INPATH '/home/rc/hive_test/data3.txt' INTO TABLE table4;\n\nINSERT OVERWRITE TABLE table3\nSELECT * FROM table4;\n\nSELECT * FROM table3;\n```\n\n重启 Hive 客户端后，临时表 table4 会消失\n\n```\n1:John:Male:25\n2:Smith:Female:30\n3:Bob:Male:40\n4:Alice:Female:22\n5:Michael:Male:35\n6:Emily:Female:28\n```\n\n### 配置\n\n```log\njava.lang.RuntimeException: Error applying authorization policy on hive configuration: java.net.URISyntaxException: Relative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bsystem:user.name%7D\n\tat org.apache.hive.service.cli.CLIService.init(CLIService.java:122) ~[hive-service-4.0.0.jar:4.0.0]\n```\n\n在 `hive-site.xml` 里把报错信息里报的开头的 `system` 去了\n\n```log\njava.lang.RuntimeException: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: xxx is not allowed to impersonate anonymous\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:89) ~[hive-service-4.0.0.jar:4.0.0]\n```\n\n`core-site.xml`：\n\n```xml\n  <property>\n\t  <name>hadoop.proxyuser.xxx.hosts</name>\n\t  <value>*</value>\n  </property>\n  <property>\n\t  <name>hadoop.proxyuser.xxx.groups</name>\n\t  <value>*</value>\n  </property>\n```\n\n## Flume 1.11.0\n\n<img src=\"https://flume.apache.org/_images/DevGuide_image00.png\">\n\nFlume 是一个水槽，用于采集、聚合和传输流数据（事件）。对于每一个代理 agent，有源 source、汇 sink、渠道 channel。\n\nhttps://flume.apache.org/documentation.html\n\n### 启动参数\n\n```sh\nflume-ng agent --conf conf -f <配置文件路径> -n <代理名>\n```\n\n注意：下面的配置不一定对。笔者不小心把配置文件夹删了，但是保留的还有配置内容截图。所以下面的实际是 [OCR](https://web.baimiaoapp.com/) 过来后再修改的。之前是实验成功了的，而之后没有做过实验。\n\n### Hello（netcat 源与 logger 接收器）\n\n```conf\n# 代理名为 a1\n# 以 s 结尾说明可以有多个 source、sink、channel\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 设置 a1 的渠道 c1 为内存通道\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# 把 a1 的源和汇 r1 和 k1 绑定到 a1 的渠道 c1 上\n# source 可以指定多个渠道，sink 只能指定一个\n# 以多种方式流向一个结果\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n\n# 设置 a1 的源 r1 为一个 netcat-like source\n# 行为像 nc -lk [host] [port]\n# 它侦听给定端口并将每行文本转换为一个事件\na1.sources.r1.type = netcat\na1.sources.r1.bind = localhost\na1.sources.r1.port = 44444\n\n# 设置 a1 的汇 k1 为 logger 类型，写到 flume.log 里面\na1.sinks.k1.type = logger\n```\n\n### 实时监控单个追加文件（exec 源与 hdfs 接收器）\n\nExec Source 在启动时运行给定的 Unix 命令，并期望该进程在标准输出时连续生成数据。使用 `tail –F <filename>` 命令可以看到文件末尾的实时追加。\n\n这里监控本机的 datanode 日志，并上传到 HDFS。\n\n```conf\n# 代理\na2.sources = r2\na2.sinks = k2\na2.channels = c2\n\n# 渠道\na2.channels.c2.type = memory\na2.channels.c2.capacity = 1000\na2.channels.c2.transactionCapacity = 100\n\n# 源\na2.sources.r2.type = exec\na2.sources.r2.command = tail -F /opt/hadoop-ha/hadoop-3.3.6/logs/hadoop-rc-datanode-ubuntu101.log\na2.sources.r2.channels= c2\n\n# 汇\na2.sinks.k2.type = hdfs\na2.sinks.k2.hdfs.path = hdfs://mycluster/flume/%Y%m%d/%H\na2.sinks.k2.hdfs.filePrefix = logs-\na2.sinks.k2.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔a2.sinks.k2.hdfs.useLocalTimeStamp = true\na2.sinks.k2.hdfs.round = true\na2.sinks.k2.hdfs.roundValue = 1\na2.sinks.k2.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na2.sinks.k2.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na2.sinks.k2.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na2.sinks.k2.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na2.sinks.k2.hdfs.rollCount = 0\na2.sinks.k2.channel = c2\n```\n\n### 实时监控多个新文件（spooldir 源与 hdfs 接收器）\n\nSpooling Directory Source 监视指定目录中的新文件，并在新文件出现时解析事件。\n\n这里监控 `/opt/flume-1.11.0/upload` 目录。向目录里添加文件后，上传到 HDFS。\n\n```conf\n# 代理\na3.sources = r3\na3.sinks = k3\na3.channels = c3\n# 渠道\na3.channels.c3.type = memory\na3.channels.c3.capacity = 1000\na3.channels.c3.transactionCapacity = 100\n# 源\na3.sources.r3.type = spooldir\na3.sources.r3.spoolDir = /opt/flume-1.11.0/upload\na3.sources.r3.fileSuffix = .COMPLETED\n# 是否添加存储绝对路径文件名的标头\na3.sources.r3.fileHeader = true\n# 忽略以.tmp 结尾的文件\n# [^ ]*匹配任意不是空格的字符零次或多次\na3.sources.r3.ignorePattern = ^([^ ]*\\.tmp)$\n\na3.sources.r3.channels = c3\n\n# 汇\na3.sinks.k3.type = hdfs\na3.sinks.k3.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H\na3.sinks.k3.hdfs.filePrefix = upload-\na3.sinks.k3.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na3.sinks.k3.hdfs.useLocalTimeStamp = true\na3.sinks.k3.hdfs.round = true\na3.sinks.k3.hdfs.roundValue = 1\na3.sinks.k3.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na3.sinks.k3.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na3.sinks.k3.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na3.sinks.k3.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na3.sinks.k3.hdfs.rollCount = 0\n\na3.sinks.k3.channel = c3\n```\n\n### 实时监控多个追加文件（TAILDIR 源与 hdfs 接收器）\n\nTaildir Source：监视指定的文件，并在检测到附加到每个文件的新行后几乎实时地跟踪它们。如果正在写入新行，则此源将重试读取它们，等待写入完成。\n\n监控 flume 目录里的 upload 目录和 upload1 目录。\n\n```conf\n# 代理\na4.sources = r4\na4.sinks = k4\na4.channels = c4\n# 渠道\na4.channels.c4.type = memory\na4.channels.c4.capacity = 1000\na4.channels.c4.transactionCapacity = 100\n# 源\na4.sources.r4.type = TAILDIR\n# JSON 格式的文件，用于记录每个尾部文件的inode、绝对路径和最后位置\na4.sources.r4.positionFile = /opt/flume-1.11.0/taildir_position.json\na4.sources.r4.filegroups = f1 f2\n# 正则表达式只能用于文件名\na4.sources.r4.filegroups.f1 = /opt/flume-1.11.0/upload/.*\na4.sources.r4.filegroups.f2 = /opt/flume-1.11.0/upload1/.*\na4.sources.r4.channels = c4\n\n\n# 汇\na4.sinks.k4.type = hdfs\na4.sinks.k4.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H\na4.sinks.k4.hdfs.filePrefix = upload-\na4.sinks.k4.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na4.sinks.k4.hdfs.useLocalTimeStamp = true\na4.sinks.k4.hdfs.round = true\na4.sinks.k4.hdfs.roundValue = 1\na4.sinks.k4.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na4.sinks.k4.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na4.sinks.k4.hdfs.rollInterval = 20\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na4.sinks.k4.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na4.sinks.k4.hdfs.rollCount = 0\n\na4.sinks.k4.channel = c4\n```\n\n查看 `taildir_position.json`：其中 inode 号码是操作系统里文件的唯一 id，pos 是 flume 的读取到的最新的文件位置（偏移量）\n\nTaildir source 是存在问题的：如果文件名变了，会重新上传。如果日志的文件名在一天过后变了，它会被重新上传一份。解决方案有修改 flume 的源码，或者修改生成日志文件名部分的源码。\n\n### 监控 MapReduce 结果，上传到 HDFS\n\n（1）使用 Flume 的 spooldir 源递归监控 `/opt/result/` 目录下的文件，汇总到 hdfs 接收器 `hdfs://mycluster/flume/mrresult`。\n\n（2）将文献上传到 HDFS 的 `/wcinput` 目录，执行 MR 输出到本地路径 `file:///opt/result/mrresult`\n\n注意：如果提前建好 MR 的输出目录，MR 会报错。而如果不提前建好 flume 的监控目录，flume 会报错。\n\n所以只提前建好外层目录，用 flume 递归监控外层目录，MR 输出到内层目录。\n\n```conf\n# 代理\na5.sources = r5\na5.sinks = k5\na5.channels = c5\n# 渠道\na5.channels.c5.type = memory\na5.channels.c5.capacity = 1000\na5.channels.c5.transactionCapacity = 100\n# 源\na5.sources.r5.type = spooldir\na5.sources.r5.spoolDir = /opt/result\n# 递归监视子目录\na5.sources.r5.recursiveDirectorySearch = true\n# 指定文件名\na5.sources.r5.includePattern = ^part-r-00000$\n\na5.sources.r5.fileSuffix = .COMPLETED\n# 是否添加存储绝对路径文件名的标头\na5.sources.r5.fileHeader = true\n# 忽略以.tmp 结尾的文件\n# [^ ]*匹配任意不是空格的字符零次或多次\na5.sources.r5.ignorePattern = ^([^ ]*\\.tmp)$\n\na5.sources.r5.channels = c5\n\n# 汇\na5.sinks.k5.type = hdfs\na5.sinks.k5.hdfs.path = hdfs://mycluster/flume/mrresult\na5.sinks.k5.hdfs.filePrefix = upload-\na5.sinks.k5.hdfs.fileType = DataStream\n# 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔\na5.sinks.k5.hdfs.useLocalTimeStamp = true\na5.sinks.k5.hdfs.round = true\na5.sinks.k5.hdfs.roundValue = 1\na5.sinks.k5.hdfs.roundUnit = hour\n# 最多积攒多少个事件后，才将文件 flush 到 HDFS\na5.sinks.k5.hdfs.batchSize = 100\n# 指定多少秒生成一个新的文件（滚动）\na5.sinks.k5.hdfs.rollInterval = 60\n# 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）\na5.sinks.k5.hdfs.rollSize = 134217700\n# 不指定滚动文件的事件数量\na5.sinks.k5.hdfs.rollCount = 0\n\na5.sinks.k5.channel = c5\n```\n\n执行 MR：\n\n```sh\nhadoop jar $HADOOP_HOME/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput file:///opt/result/mrresult\n```\n\n## 超链接\n\n- [rsync 用法教程](https://www.ruanyifeng.com/blog/2020/08/rsync.html)\n- [FileSystem Shell](https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/FileSystemShell.html)\n- [FileSystem API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileSystem.html)\n- [FileUtil API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileUtil.html)\n- [FileStatus API](https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileStatus.html)\n- [zookeeper CLI](https://zookeeper.apache.org/doc/r3.8.2/zookeeperCLI.html)\n- [zookeeper Server API](https://zookeeper.apache.org/doc/r3.8.2/apidocs/zookeeper-server/index.html)\n\n## 持久化\n\n### 命令\n\n所谓使用命令，就是使用别人已经写好的软件。\n\n环境变量 `PATH` 和物理路径，就是域名和 IP 地址的区别，要过一道中间商。域名和 IP 地址的中间商叫 DNS，`PATH` 和物理路径的中间商叫命令行解释器。\n\n你输入一个命令，命令行解释器会在 `PATH` 里寻找你命令的源文件入口在哪，然后向它传递参数。\n\n你可以使用 `which xxx` 或 `readlink -f $(which xxx)` 找你的命令源文件在哪里；使用 `which which` 找你的 `which` 在哪里。\n\n查看虚拟机的 IP 地址：`ifconfig` `ip addr`\n\n### 集群脚本\n\n前提是你搭了集群。笔者已经放弃集群了，太麻烦了。\n\n**all：对集群的所有机器执行操作**\n\n```sh\n#!/bin/bash\nif [ $# -eq 0 ]; then\n    echo \"Error: Please provide at least one argument.\"\n    exit 1\nelse\n    for host in ubuntu101 ubuntu102\n    do\n        echo \"============ $host ===========\"\n        ssh $host \"$@\"\n    done\nfi\n```\n\n**xsync：同步文件/目录到所有机器**\n\n先测试从一台机器上同步到另一台机器上：\n\n```sh\nrsync -av /path/to/src ubuntu102:/path/to/dst\n```\n\n从某台机器上同步到所有机器上：\n\n```sh\n#!/bin/bash\nif [ $# -lt 1 ]\nthen\n    echo Not Enough Argument!\n    exit;\nfi\n\nfor host in ubuntu101 ubuntu102 ubuntu103\ndo\n    echo ==================== $host ====================\n    for file in $@\n    do\n        if [ -e $file ]\n        then\n            pdir=$(cd -P $(dirname $file); pwd)\n            fname=$(basename $file)\n            ssh $host \"mkdir -p $pdir\"\n            rsync -av $pdir/$fname $host:$pdir\n        else\n            echo $file does not exists!\n        fi\n    done\ndone\n```\n\n**myhadoop**\n\n```sh\n#!/bin/bash\ncase \"$1\" in\n    \"start\")\n        echo \"============ 启动 hadoop 集群 ============\"\n\n        echo \"-------- 启动 HDFS --------\"\n        ssh \"ubuntu101\" \"$HADOOP_HOME/sbin/start-dfs.sh\"\n        echo \"-------- 启动 YARN --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/sbin/start-yarn.sh\"\n        echo \"-------- 启动 historyserver --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/bin/mapred --daemon start historyserver\"\n\n        all jps\n        ;;\n    \"stop\")\n        echo \"============ 关闭 hadoop 集群 ============\"\n\n        echo \"-------- 关闭 historyserver --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/bin/mapred --daemon stop historyserver\"\n        echo \"-------- 关闭 YARN --------\"\n        ssh \"ubuntu102\" \"$HADOOP_HOME/sbin/stop-yarn.sh\"\n        echo \"-------- 关闭 HDFS --------\"\n        ssh \"ubuntu101\" \"$HADOOP_HOME/sbin/stop-dfs.sh\"\n\n        all jps\n        ;;\n    *)\n        echo \"Invalid parameter!\"\n        exit 1\n        ;;\nesac\n```\n\n## 搭建 Hadoop 高可用集群\n\nHDFS 和 YARN 都是主从架构，当主节点挂了或者系统升级，集群会无法正常工作。高可用是指 7x24 小时系统可用，为此设置多个主节点。\n\n对于 HDFS，主节点是 NameNode，它负责保存文件系统快照、操作日志、处理客户端读写请求，2NN 负责定期合并文件系统快照和操作日志。为实现高可用，设置多个 NameNode 和 JournalNode。同一时间只能有一个 NameNode 为 Active，它负责生成快照文件 FsImage，其他 NameNode 为 Standby，拉取同步 FsImage，还起到 2NN 的作用。JournalNode 负责保证 EditLog 的一致性。Zookeeper 负责监控集群，如果 Active 的 NameNode 挂了，通过 ZKFC 进行故障转移。\n\n对于 YARN，主节点是 ResourceManager，从节点是 NodeManager。为此配置多个 ResourceManager。\n\nhttps://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html\n\n## HDFS-HA\n\n把原来的非高可用的 Hadoop 文件夹单独复制一份，重新写配置文件和环境变量、删除 data 和 logs 文件夹。先启动所有 journalnode 服务，再格式化一台机器的 namenode，启动该机器的 namenode 服务，然后在另两台机器上同步 namenode1 的元数据信息，并启动 namenode 服务。\n\n### 配置\n\n三台机器上分别都配一个 NameNode、JournalNode、DataNode\n\n`core-site.xml`:\n\n| name                        | value                                  |\n| --------------------------- | -------------------------------------- |\n| fs.defaultFS                | hdfs://mycluster                       |\n| hadoop.tmp.dir              | /usr/local/hadoop-ha/hadoop-3.3.6/data |\n| hadoop.http.staticuser.user | rc                                     |\n\n`hdfs-site.xml`:\n\n注意 `dfs.journalnode.edits.dir` 不能以 `file://` 开头，前两个要以 `file://` 开头，不然报错。以及小心各种拼写错误。\n\n| name                                          | value                                                                     |\n| --------------------------------------------- | ------------------------------------------------------------------------- |\n| dfs.nameservices                              | mycluster                                                                 |\n| dfs.namenode.name.dir                         | `file://${hadoop.tmp.dir}/name`                                           |\n| dfs.datanode.data.dir                         | `file://${hadoop.tmp.dir}/data`                                           |\n| dfs.journalnode.edits.dir                     | `${hadoop.tmp.dir}/journalnode`                                           |\n| dfs.ha.namenodes.mycluster                    | namenode1,namenode2,namenode3                                             |\n| dfs.namenode.rpc-address.mycluster.namenode1  | ubuntu101:8020                                                            |\n| dfs.namenode.rpc-address.mycluster.namenode2  | ubuntu102:8020                                                            |\n| dfs.namenode.rpc-address.mycluster.namenode3  | ubuntu103:8020                                                            |\n| dfs.namenode.http-address.mycluster.namenode1 | ubuntu101:9870                                                            |\n| dfs.namenode.http-address.mycluster.namenode2 | ubuntu102:9870                                                            |\n| dfs.namenode.http-address.mycluster.namenode3 | ubuntu103:9870                                                            |\n| dfs.namenode.shared.edits.dir                 | qjournal://ubuntu101:8485;ubuntu102:8485;ubuntu103:8485/mycluster         |\n| dfs.client.failover.proxy.provider.mycluster  | org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider |\n| dfs.ha.fencing.methods                        | sshfence                                                                  |\n| dfs.ha.fencing.ssh.private-key-files          | /home/rc/.ssh/id_rsa                                                      |\n\n### 实验\n\n在每一台机器上启动 JournalNode 服务：\n\n```sh\nhdfs --daemon start journalnode\n```\n\n在 101 机器上对 namenode 进行格式化，并启动 namenode：\n\n```sh\nhdfs namenode -format\nhdfs --daemon start namenode\n```\n\n在 Web 界面查看，为 Standby。\n\n在另两台机器上同步 namenode1 的元数据信息，并启动 namenode：\n\n```sh\nhdfs namenode -bootstrapStandby\nhdfs --daemon start namenode\n```\n\n在每一台机器上启动 DataNode：\n\n```sh\nhdfs --daemon start datanode\n```\n\n把 namenode2 切换成 Active 状态：\n\n```sh\nhdfs haadmin -transitionToActive namenode2\n```\n\n模拟 namenode2 挂掉：\n\n```sh\nkill -9 <进程号>\n```\n\n这时 namenode1 和 namenode3 还是 Standby。如果手动激活某一个，会显示 102 拒绝连接。\n\n重启 namenode2 后，三个 namenode 还是 Standby。这时再激活某一个，激活成功。这说明当所有的 namenode 都启动成功时，才可以激活某一个 namenode。这失去了高可用的意义和作用。为什么会这样呢？因为我们前面配置了隔离机制，同一时刻只能有一台 Active 的 namenode 响应客户端。如果有 namenode 挂了，其他 namenode 只是联系不上它，不知道是不是真的挂了。如果它没挂且是 Active，再激活其他机器，会出现两台 Active。为了准确无误地知道它是否挂了，需要配置 ZooKeeper 监控集群。\n\n### 自动故障转移配置\n\n在三台机器上都加一个 Zookeeper 和 ZKFC。\n\n在上面的配置文件基础上增加。\n\n`hdfs-site.xml`:\n\n| name                              | value |\n| --------------------------------- | ----- |\n| dfs.ha.automatic-failover.enabled | true  |\n\n`core-site.xml`:\n\n端口号要与 ZooKeeper 配置文件里的一致。\n\n| name                | value                                        |\n| ------------------- | -------------------------------------------- |\n| ha.zookeeper.quorum | ubuntu101:2181,ubuntu102:2181,ubuntu103:2181 |\n\n### 自动故障转移实验\n\n必须在 stop-dfs 之后，并启动 ZooKeeper 集群成功后，再在任意一台机器上初始化 HA 在 Zookeeper 中状态。\n\n```sh\nhdfs zkfc –formatZK\n```\n\n然后 start-dfs。formatZK 成功后，以后启动集群需要先启动 ZK 服务端，后启动 dfs。如果先启动 dfs，这时会有 ZKFC 进程，再启动 ZK 服务端后，ZKFC 进程被挤掉了，所有 namenode 都是 Standby。\n\n查看当前活跃节点：\n\n```sh\nhdfs haadmin -getAllServiceState\n```\n\n或者在 ZK 客户端查看选举锁：\n\n```sh\nget -s /hadoop-ha/mycluster/ActiveStandbyElectorLock\n```\n\n验证集群会不会进行故障转移：kill 掉 Active 的 namenode\n\n## YARN-HA\n\n### 配置\n\n三台机器上分别都配一个 ResourceManager、NodeManager、ZooKeeper\n\n`yarn-site.xml`:\n\n| name                                              | value                                                                                                                         |\n| ------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |\n| yarn.nodemanager.aux-services                     | mapreduce_shuffle                                                                                                             |\n| yarn.resourcemanager.ha.enabled                   | true                                                                                                                          |\n| yarn.resourcemanager.recovery.enabled             | true                                                                                                                          |\n| yarn.resourcemanager.store.class                  | org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore                                                         |\n| yarn.resourcemanager.zk-address                   | ubuntu101:2181,ubuntu102:2181,ubuntu103:2181                                                                                  |\n| yarn.resourcemanager.cluster-id                   | cluster-yarn1                                                                                                                 |\n| yarn.resourcemanager.ha.rm-ids                    | rm1,rm2,rm3                                                                                                                   |\n| yarn.resourcemanager.hostname.rm1                 | ubuntu101                                                                                                                     |\n| yarn.resourcemanager.hostname.rm2                 | ubuntu102                                                                                                                     |\n| yarn.resourcemanager.hostname.rm3                 | ubuntu103                                                                                                                     |\n| yarn.resourcemanager.webapp.address.rm1           | ubuntu101:8088                                                                                                                |\n| yarn.resourcemanager.webapp.address.rm2           | ubuntu102:8088                                                                                                                |\n| yarn.resourcemanager.webapp.address.rm3           | ubuntu103:8088                                                                                                                |\n| yarn.resourcemanager.address.rm1                  | ubuntu101:8032                                                                                                                |\n| yarn.resourcemanager.address.rm2                  | ubuntu102:8032                                                                                                                |\n| yarn.resourcemanager.address.rm3                  | ubuntu103:8032                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm1        | ubuntu101:8030                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm2        | ubuntu102:8030                                                                                                                |\n| yarn.resourcemanager.scheduler.address.rm3        | ubuntu103:8030                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm1 | ubuntu101:8031                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm2 | ubuntu102:8031                                                                                                                |\n| yarn.resourcemanager.resource-tracker.address.rm3 | ubuntu103:8031                                                                                                                |\n| yarn.nodemanager.env-whitelist                    | JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME |\n\n### 实验\n\n查看当前活跃节点：\n\n```sh\nyarn rmadmin -getAllServiceState\n```\n\n如果浏览器访问 Standby 节点的 8088 端口（RM），会自动跳转到 Active 节点。\n\n## 解决 JSch 认证失败\n\n问题出现在配置 HDFS HA 自动故障转移时。杀掉活跃的 NN 之后，它没有被隔离成功。\n\nJSch 是一个库，它在 Java 程序里建立 SSH 连接。\n\n### 在杀掉 Acitive 的 NN 过程中\n\n被杀的 Acitive 的 NN 上的 ZKFC 日志：\n\n1. [08:38:38,534] hadoop 高可用健康监测者抛出 EOF 异常，进入 SERVICE_NOT_RESPONDING 状态\n2. [08:38:38,615]\n   - org.apache.hadoop.hdfs.tools.DFSZKFailoverController: 获取不到本地 NN 的线程转储，由于连接被拒绝\n   - org.apache.hadoop.ha.ZKFailoverController: 退出 NN 的主选举，并标记需要隔离\n   - hadoop 高可用激活/备用选举者开始重新选举\n3. [08:38:38,636] ZK 客户端不能从服务端读取会话的附加信息，说服务端好像把套接字关闭了\n4. [08:38:38,739] 会话被关闭，ZK 客户端上对应的事件线程被终止\n5. 之后 hadoop 高可用健康监测者一直尝试重新连接 NN，连不上\n\n原来 Standby 的 NN 上的 ZKFC 日志：\n\n1. [08:38:38,719] 选举者检查到了需要被隔离的原活跃节点，ZKFC 找到了隔离目标\n2. [08:38:39,738] org.apache.hadoop.ha.FailoverController 联系不上被杀的 NN\n3. [08:38:39,748] 高可用节点隔离者开始隔离，用 org.apache.hadoop.ha.SshFenceByTcpPort，里面用了 JSch 库建立客户端（本机）与服务端（被杀的）之间的 SSH 连接\n4. [08:38:40,113] SSH 认证失败，隔离方法没有成功，选举失败\n5. 之后选举者一直在重建 ZK 连接，重新连 NN 连不上，重新隔离失败\n\n### 软件版本\n\n客户端（Standby 上的 org.apache.hadoop.ha.SshFenceByTcpPort.jsch）：\n\n- Hadoop 3.3.6 [SshFenceByTcpPort 源码](https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/SshFenceByTcpPort.java)\n- JSch 0.1.55\n\n服务端（被杀的）：\n\n- OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022 里的 sshd\n\n生成密钥时用的命令：\n\n```sh\nssh-keygen -t rsa -m PEM\n```\n\n### 关键日志\n\n原来为 Standby 的 NN 上的 ZKFC 日志：\n\n```log\nINFO org.apache.hadoop.ha.SshFenceByTcpPort.jsch:\n//...\nRemote version string: SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.6\nLocal version string: SSH-2.0-JSCH-0.1.54\n// JSch 0.1.55 的源码里，写的字符串就是 0.1.54，这个应该不影响\n//...\nAuthentications that can continue: publickey,keyboard-interactive,password\nNext authentication method: publickey\n// 这里用公钥认证失败了\nAuthentications that can continue: password\nNext authentication method: password\nDisconnecting from ubuntu103 port 22\nWARN org.apache.hadoop.ha.SshFenceByTcpPort: Unable to connect to ubuntu103 as user rc\ncom.jcraft.jsch.JSchException: Auth fail\n```\n\n### 解决思路\n\n看 sshd 的日志：\n\n```\nuserauth_pubkey: key type ssh-rsa not in PubkeyAcceptedAlgorithms\nerror: Received disconnect from 192.168.78.101 port 49968:3: com.jcraft.jsch.JSchException: Auth fail\nDisconnected from authenticating user rc 192.168.78.101 port 49968\n```\n\n```sh\nsudo vi /etc/ssh/sshd_config\n```\n\n```\nPubkeyAuthentication yes\nPubkeyAcceptedAlgorithms +ssh-rsa\n```\n\n```sh\nsudo systemctl restart sshd\n```\n\n## 不是问题的问题\n\n用\n\n```sh\nhdfs haadmin -getAllServiceState\n```\n\n查看 Active 转移成功了，但是联系不上被杀的那一方。\n\n具体地说，转移成功之后，三个方的 DN 都一直在尝试连被杀那一方的 NN，一直在写日志。除此之外上传下载都没问题。\n\n这应该是集群自带的心跳机制，不是问题。\n","slug":"Hadoop","published":1,"updated":"2025-09-14T14:49:21.567Z","__permalink":"hadoop.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lna00035ws6dh338noi","content":"<p>一种不看完整教程安装软件的方法：</p>\n<ol type=\"1\">\n<li>在软件安装的目录里面，通常有一个 doc 文件夹</li>\n<li>在解压软件包之后，什么配置都别写，上来先启动了再说</li>\n<li>找到软件的日志文件在哪里</li>\n<li>在日志里搜索 <code>WARN</code> <code>ERROR</code></li>\n<li>在网上搜索或者问 GPT 为什么会出现这个错误</li>\n</ol>\n<h2 id=\"vscode-远程附加调试\">VSCode 远程附加调试</h2>\n<p>hadoop-env.sh</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> 某某_OPTS=<span class=\"string\">\"-agentlib:jdwp=transport=dt_socket,address=8888,server=y,suspend=n\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p>launch.json</p>\n<figure class=\"highlight json\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"0.2.0\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"configurations\"</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">{</span></span><br><span class=\"line\">      <span class=\"attr\">\"type\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"java\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"Hadoop 某某\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"request\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"attach\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"hostName\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"ubuntu101\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"port\"</span><span class=\"punctuation\">:</span> <span class=\"number\">8888</span></span><br><span class=\"line\">    <span class=\"punctuation\">}</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"java-代码运行环境的问题\">Java 代码运行环境的问题</h2>\n<p>“连接\nHDFS” 是什么意思？再往前问：你是如何知道你的 “集群” 是正在运行着的？用\n<code>jps</code> 查看 Java 进程。</p>\n<p><code>jps</code> 查看的是什么？是所有正在运行着的 JVM\n实例，每一个进程是一个单独的 JVM。</p>\n<p>“连接 HDFS” 的意思是：再运行一个新的 JVM，称为 “客户端”。这个 JVM\n要与另一个 JVM 通信，那个 JVM 叫\nNameNode。怎么通信？虽然不知道细节，但你可能看过这样的代码：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URISyntaxException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.Path;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">App</span> {</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, URISyntaxException {</span><br><span class=\"line\">        <span class=\"type\">Configuration</span> <span class=\"variable\">conf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Configuration</span>();</span><br><span class=\"line\">        <span class=\"type\">FileSystem</span> <span class=\"variable\">fs</span> <span class=\"operator\">=</span> FileSystem.get(<span class=\"keyword\">new</span> <span class=\"title class_\">URI</span>(<span class=\"string\">\"hdfs://ubuntu101:9820\"</span>), conf);</span><br><span class=\"line\">        FileStatus[] fileStatuses = fs.listStatus(<span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"/\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (FileStatus status : fileStatuses) {</span><br><span class=\"line\">            System.out.println(status.getPath());</span><br><span class=\"line\">        }</span><br><span class=\"line\">        fs.close();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>现在的问题在于：</p>\n<ol type=\"1\">\n<li><b>它 <code>import</code> 的东西是怎么来的？</b></li>\n<li><b>在它编译完之后，放到 JVM\n上运行的时候（即 “运行时”），它还需不需要它 <code>import</code>\n的东西？</b></li>\n<li><b>它运行时的 JVM\n在哪里，在虚拟机上还是在物理机上？如果在物理机上，它能不能与虚拟机通信？</b></li>\n<li><b>IDE 起的是什么作用？</b></li>\n</ol>\n<p>先回答第四个问题：IDE 起的是工具人的作用。如果你用的\nIDEA，并且成功连接 HDFS 了，你会在 IDEA 的命令行看到：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/lib/jvm/java-8-openjdk-amd64/bin/java -javaagent:/opt/idea-IC-241.15989.150/lib/idea_rt.jar=43273:/opt/idea-IC-241.15989.150/bin\\</span><br><span class=\"line\">                                        -Dfile.encoding=UTF-8\\</span><br><span class=\"line\">                                        -classpath /lib/jvm/java-8-openjdk-amd64/jre/lib/charsets.jar:/后面全都是Jar包的路径</span><br></pre></td></tr></tbody></table></figure>\n<p>它就是执行了一条命令：打开你的 JDK 目录里的 <code>java</code>\n，然后向这个东西传了几个参数：工具人、文件编码、classpath</p>\n<p>关键的就是 classpath，你需要保证你代码 “运行时” 的东西能在 classpath\n里找到。</p>\n<p>再回答第二个问题：它 <code>import</code>\n的东西都是它的 “运行时” 需要的东西吗？</p>\n<p>不一定，这是它 “编译时” 需要的东西。当他报错报找不到某个类的时候，就是它 “运行时” 需要的东西。</p>\n<p>再回答第一个问题：搞到这些 jar 包。</p>\n<ul>\n<li>用 Maven</li>\n<li> 如果你看过你 Hadoop 的安装目录，你会看到一个 <code>share</code>\n文件夹</li>\n</ul>\n<p>对于第三个问题的解决思路：</p>\n<ul>\n<li>在虚拟机上运行客户端，连接虚拟机上的 NameNode</li>\n<li> 在物理机上运行客户端，连接物理机上的\nNameNode（如果你物理机搞成功了）</li>\n<li>在物理机上运行客户端，通过 winutils 这个中间人与虚拟机上的 NameNode\n通信</li>\n</ul>\n<p>笔者最终的解决方案是：在虚拟机上安装 IDE，把\n<code>$HADOOP_HOME/share/hadoop</code> 里的 Jar 包导进 IDE\n里（这里用的是 IDEA），按播放键运行。如果报找不到类的错误，注意：在\n<code>$HADOOP_HOME/share/hadoop/子文件夹</code> 下还有一个叫\n<code>lib</code> 的文件夹。</p>\n<h2 id=\"安装-ubuntu-22.04.3\">安装 Ubuntu 22.04.3</h2>\n<ol type=\"1\">\n<li>下载 Linux\n操作系统镜像，可以理解为操作系统的 “安装包”。https://launchpad.net/ubuntu/+cdmirrors</li>\n<li> 下载一个支持在 Windows 操作系统下运行 Linux\n镜像的软件（宿主），它相当于一个没装操作系统的电脑，但是装了引导加载程序\nGRUB\n<ul>\n<li>使用 VM Player</li>\n</ul></li>\n<li> 在宿主里 “创建两台虚拟机”，相当于对这一份镜像，安装了两个新的操作系统，运行在你的宿主和\nWindows 操作系统上</li>\n</ol>\n<p>前面三步改用 WSL（适用于 Linux 的 Windows\n子系统）https://learn.microsoft.com/zh-cn/windows/wsl/</p>\n<ol start=\"4\" type=\"1\">\n<li><p>配置网络，给虚拟机和物理机搭上鹊桥</p>\n<ul>\n<li>不同虚拟机采用不同静态 IP</li>\n<li> 把虚拟机网卡路由到宿主的网关，在\n<code>C:\\ProgramData\\VMware\\vmnetnat.conf</code> 查看 VM 的 NAT\n网关地址</li>\n<li>修改 <code>/etc/hostname</code> 为自定义主机名</li>\n<li><code>/etc/hosts</code>\n<code>C:\\Windows\\System32\\drivers\\etc\\hosts</code></li>\n</ul></li>\n</ol>\n<p>如果你用的是 WSL，你在它上面开一个端口，可以直接在物理机上使用\n<code>localhost:port</code> 访问。<strong>如果你装了两台 WSL，它们的 IP\n会是相同的</strong>，这个问题不好解决。据说学大数据的都找不到大数据相关工作。那我们就退而求其次，根本没有必要搭分布式集群，在一台机器上搭个伪分布式就行了，文件分片只分一片。这样配置文件还不至于备份来备份去，只保留一份配置文件。</p>\n<ol start=\"5\" type=\"1\">\n<li><p>配置 Ubuntu 软件源\nhttps://mirrors.ustc.edu.cn/help/ubuntu.html</p></li>\n<li><p> 安装 JDK\nhttps://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions</p></li>\n<li><p> 写环境变量</p></li>\n<li><p>配置 SSH https://wangdoc.com/ssh/</p></li>\n</ol>\n<h3 id=\"网络\">网络</h3>\n<p>如果你用的 WSL + 单机伪分布式，只需要修改\n<code>/etc/wsl.conf</code>：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[network]</span><br><span class=\"line\">hostname=localhost</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">wsl --shutdown</span><br><span class=\"line\">wsl</span><br></pre></td></tr></tbody></table></figure>\n<p>如果你用的 VM + Ubuntu 22.04:</p>\n<p>编辑 <code>/etc/netplan</code> 下的 <code>00-installer-config.yaml</code> 文件。<a href=\"https://netplan.readthedocs.io/en/stable/netplan-tutorial/\">netplan\n文档</a></p>\n<p>选择 <code>192.168.78</code> 的依据是：</p>\n<ul>\n<li>在物理机使用 <code>ipconfig</code> 命令得到的【VMnet8】的 IPv4\n地址 <code>192.168.78.1</code></li>\n<li>查看 <code>C:\\ProgramData\\VMware\\vmnetnat.conf</code> 里的 NAT\n网关地址 <code>192.168.78.2</code></li>\n</ul>\n<figure class=\"highlight yaml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">ens33:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.101</span><span class=\"string\">/24</span> <span class=\"comment\"># 每台机器设置成不同的</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.2</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.2</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> netplan try</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"ssh\">SSH</h3>\n<p>如果你用的 WSL + 单机伪分布式，下面两条命令只用做一次。</p>\n<p>如果你搭的分布式：每台机器上都执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -m PEM</span><br></pre></td></tr></tbody></table></figure>\n<p>笔者这里的版本是\n<code>OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022</code>，要加上\n<code>-m PEM</code>，确保私钥以 -----BEGIN <strong>RSA</strong> PRIVATE\nKEY----- 开头。<a href=\"https://www.cnblogs.com/simple-li/p/14654812.html\">后续错误</a></p>\n<p>每台机器上都执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id ubuntu101</span><br><span class=\"line\">ssh-copy-id ubuntu102</span><br><span class=\"line\">...</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"存储空间\">存储空间</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">du</span> -h --max-depth=1</span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li>给虚拟机扩容：<code>https://hrfis.me/blog/linux.html#扩容</code></li>\n<li>使用 https://www.diskgenius.cn/ 可以把你 D 盘的空间向 C\n盘匀一点。如果你有多余的恢复分区，可以把它删了，只保留一个。</li>\n<li>使用 https://github.com/redtrillix/SpaceSniffer\n可以可视化地展示你硬盘的占用情况。</li>\n</ul>\n<h3 id=\"中文字体\">中文字体</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> apt install language-pack-zh-hans</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vi /etc/default/locale</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mv</span> /mnt/c/path/to/font ~ /usr/share/fonts</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LANG=zh_CN.UTF-8</span><br><span class=\"line\">LANGUAGE=\"zh_CN:zh:en_US:en\"</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hadoop-3.3.6\">Hadoop 3.3.6</h2>\n<ol start=\"9\" type=\"1\">\n<li>下载 Hadoop 软件包\n<ul>\n<li>在虚拟机上直接用 <code>wget</code></li>\n<li>用物理机下载它，从物理机的文件系统上再转移到虚拟机的文件系统上（在你的物理机硬盘上表现为\n<code>.vmdk</code> 文件）\n<ul>\n<li>VM Player\n有共享文件夹功能，把你物理机硬盘的某一个文件夹挂载到虚拟机的\n<code>/mnt/hgfs/Shared</code></li>\n<li>如果使用 WSL，你的物理机硬盘会被挂载到虚拟机的\n<code>/mnt</code></li>\n<li>使用 XFtp 软件，与你的虚拟机进行 SSH 网络协议连接</li>\n</ul></li>\n</ul></li>\n<li>在两台虚拟机上都把软件包解压。<code>/opt</code> 目录是空的，option\n的意思，让你自己选择装不装到这里。</li>\n</ol>\n<h3 id=\"配置\">配置</h3>\n<ol start=\"11\" type=\"1\">\n<li>修改它们的配置文件，要保证每台机器配置文件内容相同。使用 VSCode 的\nRemote-SSH 插件可以直接修改虚拟机内的文件，如果你用的是 WSL\n更方便。</li>\n</ol>\n<p>在 $HADOOP_HOME/share/doc/hadoop/index.html\n左下角有默认的配置文件。</p>\n<ul>\n<li><code>hadoop-env.sh</code> 指定 JAVA_HOME，启动 JVM 时的参数</li>\n<li><code>core-site.xml</code> 指定 hdfs 的\nURI，文件系统存在本地哪个目录</li>\n<li><code>hdfs-site.xml</code> 指定谁当 NN、2NN，副本个数</li>\n<li><code>mapred-site.xml</code> 指定 MR 框架，MR 历史服务器</li>\n<li><code>yarn-site.xml</code> 指定 RM，YARN 历史服务器</li>\n<li><code>workers</code> 指定谁当 DataNode</li>\n</ul>\n<p>勤看日志。当 CPU 占用高，写磁盘不到 1MB/s，可能是出问题了在一直写\nlog。</p>\n<ul>\n<li>我们为什么要在 <code>hadoop-env.sh</code> 里写\n<code>JAVA_HOME</code>？因为没写的时候，它会报错： JAVA_HOME is not set\nand could not be found；</li>\n<li>我们为什么要配置 SSH？因为没配置它会报错：Could not resolve hostname\nxxx: Name or service not known；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>fs.defaultFS</code> ？因为没配置它会报错：Cannot set priority of\nnamenode process xxx。在日志文件里有：No services to connect, missing\nNameNode address；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>hadoop.tmp.dir</code> ？因为它默认存在 <code>/tmp</code>\n文件夹下，而 <code>/tmp</code> 文件夹一重启就没了；</li>\n<li>我们为什么要在 <code>hdfs-site.xml</code> 里配置\n<code>dfs.namenode.http-address</code> ？因为我们想用浏览器访问\nHDFS；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>hadoop.http.staticuser.user</code>\n？因为如果不配置，只有读的权限，没有写的权限；</li>\n<li><del>我们为什么可以不在 <code>hadoop-env.sh</code>\n里配置各种用户名？因为还没有遇到报错的时候</del></li>\n</ul>\n<ol start=\"12\" type=\"1\">\n<li>在 NameNode 上执行 <code>hdfs -namenode format</code>，把 Hadoop\n的文件系统 HDFS\n初始化。在你的物理机文件系统上有一个虚拟机文件系统，在虚拟机文件系统上又有一个\nHDFS</li>\n</ol>\n<h3 id=\"mapreduce\">MapReduce</h3>\n<ol type=\"1\">\n<li><code>start-dfs.sh</code> 再 <code>jps</code> 查看 JVM\n进程，你会看到 NN、2NN、DN</li>\n<li> 不需要 <code>start-yarn.sh</code>（如果你没有指定 MR 框架为\nYARN，它默认为 local）</li>\n<li></li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span></span><br><span class=\"line\">vi 1.txt</span><br><span class=\"line\">hdfs dfs -put 1.txt /wcinput</span><br><span class=\"line\">hadoop jar <span class=\"variable\">$HADOOP_HOME</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput /wcoutput</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"配置-1\">配置</h4>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.map.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.reduce.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"mapreduce-编程入门\">MapReduce 编程入门</h4>\n<p><a href=\"https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/site/markdown/MapReduceTutorial.md\">官方教程</a></p>\n<p><img src=\"/blog/images/MapReduce.webp\"></p>\n<p>我们想统计一篇英文文章里的单词，每个都出现了多少次。假设这个文本文件只有英文单词、空格和换行符（LF\n或者 CRLF）。</p>\n<p>需要继承 Mapper 类，重写它的 map ()\n方法。这个方法里传了三个参数：该行的偏移量、该行的文本内容、环境上下文。在这个方法里，对每一行按空格进行分割，形成一个\nString []，遍历这个 String []，把它写到上下文里，这样写的就是一系列\n<code>&lt;word,1&gt;</code>。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Mapper</span>&lt;LongWritable, Text, Text, IntWritable&gt; {</span><br><span class=\"line\">    <span class=\"comment\">// KEYIN（偏移量），VALUEIN（每一行的文本），KEYOUT（单词），VALUEOUT（1）</span></span><br><span class=\"line\">    <span class=\"comment\">// 对每一行进行分割</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Text</span> <span class=\"variable\">wordText</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Text</span>();<span class=\"comment\">// 向 context 里写的 KEYOUT。Text 相当于一个盒子</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">map</span><span class=\"params\">(LongWritable key, Text value, Context context)</span> <span class=\"keyword\">throws</span> IOException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">line</span> <span class=\"operator\">=</span> value.toString();</span><br><span class=\"line\">        String[] words = line.split(<span class=\"string\">\" \"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        System.out.println(i++ + <span class=\"string\">\" | \"</span> + key + <span class=\"string\">\" | \"</span> + value + <span class=\"string\">\" | \"</span> + line);</span><br><span class=\"line\">        <span class=\"comment\">// input 有三行文本</span></span><br><span class=\"line\">        <span class=\"comment\">// 输出了三次，每次为：1 | 偏移量 | 该行内容（不带换行符） | 该行内容（不带换行符）</span></span><br><span class=\"line\">        <span class=\"comment\">// 其中 1 没有变，说明是分布执行的</span></span><br><span class=\"line\">        <span class=\"comment\">// 第一次偏移量为 0，第一行有 35 个英文字母 + 空格，UTF-8 编码，加上 CRLF，第二次偏移量是 37</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String word : words) {</span><br><span class=\"line\">            wordText.set(word);</span><br><span class=\"line\">            context.write(wordText, <span class=\"keyword\">new</span> <span class=\"title class_\">IntWritable</span>(<span class=\"number\">1</span>));</span><br><span class=\"line\">            System.out.println(context.getCurrentKey() + <span class=\"string\">\" | \"</span> + context.getCurrentValue());</span><br><span class=\"line\">            <span class=\"comment\">// 这行语句每次输出的 key 和 value 和当前 map() 传的参相同</span></span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>继承 Reducer 类，重写 reduce () 方法。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountReducer</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Reducer</span>&lt;Text, IntWritable, Text, IntWritable&gt; {</span><br><span class=\"line\">    <span class=\"comment\">// KEYIN 和 VALUEIN 来自 WordCountMapper.map() 里向 context 里写的</span></span><br><span class=\"line\">    <span class=\"comment\">// 每一个 reducer 处理的是 【相同的KEYIN】 的 【VALUEIN集合】</span></span><br><span class=\"line\">    <span class=\"type\">IntWritable</span> <span class=\"variable\">outV</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IntWritable</span>();<span class=\"comment\">// VALUEOUT</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">reduce</span><span class=\"params\">(Text key, Iterable&lt;IntWritable&gt; values, Context context)</span></span><br><span class=\"line\">            <span class=\"keyword\">throws</span> IOException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;<span class=\"comment\">// 单词计数</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (IntWritable count : values) {</span><br><span class=\"line\">            sum += count.get();</span><br><span class=\"line\">            System.out.println(count.get());<span class=\"comment\">// values 的每一个 count 都是 1</span></span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        outV.set(sum);</span><br><span class=\"line\">        context.write(key, outV);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>继承 Driver 类，进行一些配置。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountDriver</span> {</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, ClassNotFoundException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">Configuration</span> <span class=\"variable\">conf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Configuration</span>();</span><br><span class=\"line\">        <span class=\"type\">Job</span> <span class=\"variable\">job</span> <span class=\"operator\">=</span> Job.getInstance(conf);</span><br><span class=\"line\">        job.setJarByClass(WordCountDriver.class);</span><br><span class=\"line\">        job.setMapperClass(WordCountMapper.class);</span><br><span class=\"line\">        job.setReducerClass(WordCountReducer.class);</span><br><span class=\"line\">        job.setMapOutputKeyClass(Text.class);</span><br><span class=\"line\">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class=\"line\">        job.setOutputKeyClass(Text.class);</span><br><span class=\"line\">        job.setOutputValueClass(IntWritable.class);</span><br><span class=\"line\">        FileInputFormat.setInputPaths(job, <span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"input.txt\"</span>));</span><br><span class=\"line\">        FileOutputFormat.setOutputPath(job, <span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"output\"</span>));</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> job.waitForCompletion(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        System.exit(result ? <span class=\"number\">0</span> : <span class=\"number\">1</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p><code>FileAlreadyExistsException</code>：不要提前建好输出文件夹</p>\n<h3 id=\"hdfs\">HDFS</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-dfs.sh</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs oev -p XML -i edits_xxxx -o ./edits_xxxx.xml</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs oiv -p XML -i fsimage_xxxx -o ./fsimage_xxxx.xml</span><br></pre></td></tr></tbody></table></figure>\n<p>EditLog 和 FsImage 在：</p>\n<ul>\n<li>NN 的 <code>${hadoop.tmp.dir}/dfs/name/current</code></li>\n<li>2NN 的\n<code>${hadoop.tmp.dir}/data/dfs/namesecondary/current</code></li>\n</ul>\n<h3 id=\"yarn\">YARN</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-yarn.sh</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"配置-2\">配置</h4>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>localhost<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"zookeeper\">ZooKeeper</h2>\n<p>如果你只用一台机器，应该不用装。</p>\n<p>ZooKeeper\n特点是只要有半数以上的节点正常工作，整个集群就能正常工作，所以适合装到奇数台服务器上。</p>\n<p>配置 <code>zkData/myid</code></p>\n<p>配置 <code>conf/zoo.cfg</code></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dataDir=/usr/local/zookeeper-3.8.2/zkData</span><br><span class=\"line\">server.101=master:2888:3888</span><br><span class=\"line\">server.102=worker1:2888:3888</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hbase-2.5.8\">HBase 2.5.8</h2>\n<p>它自带 ZooKeeper 3.8.3，StandAlone 模式下只有一个 HMaster\n进程：其中包括 HMaster，单个 HRegionServer 和 ZooKeeper 守护进程。</p>\n<p>它的数据可以存在本地或 HDFS 上，这里配置存在 HDFS 上。</p>\n<p>https://hbase.apache.org/book.html#standalone_dist</p>\n<p>https://hbase.apache.org/book.html#shell_exercises</p>\n<h3 id=\"命令\">命令</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-dfs.sh</span><br><span class=\"line\">start-hbase.sh</span><br><span class=\"line\">hbase shell</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">help</span></span><br><span class=\"line\">list</span><br><span class=\"line\">create <span class=\"string\">'tablename'</span>,<span class=\"string\">'cfname1'</span>,<span class=\"string\">'cfname2'</span></span><br><span class=\"line\">put <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span>,<span class=\"string\">'cfname1:qualifiername1'</span>,<span class=\"string\">'value'</span></span><br><span class=\"line\">put <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span>,<span class=\"string\">'cfname2:'</span>,<span class=\"string\">'value'</span></span><br><span class=\"line\">scan <span class=\"string\">'tablename'</span></span><br><span class=\"line\">scan <span class=\"string\">'tablename'</span>,{COLUMNS=&gt;<span class=\"string\">'cfname1'</span>}</span><br><span class=\"line\">get <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span></span><br><span class=\"line\">describe <span class=\"string\">'tablename'</span></span><br><span class=\"line\"><span class=\"built_in\">truncate</span> <span class=\"string\">'tablename'</span></span><br><span class=\"line\">drop <span class=\"string\">'tablename'</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-3\">配置</h3>\n<p>如果你没有在 <code>hbase-env.sh</code> 里配置\n<code>JAVA_HOME</code>，你会看到：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1: +======================================================================+</span><br><span class=\"line\">127.0.0.1: |                    Error: JAVA_HOME is not set                       |</span><br><span class=\"line\">127.0.0.1: +----------------------------------------------------------------------+</span><br><span class=\"line\">127.0.0.1: | Please download the latest Sun JDK from the Sun Java web site        |</span><br><span class=\"line\">127.0.0.1: |     &gt; http://www.oracle.com/technetwork/java/javase/downloads        |</span><br><span class=\"line\">127.0.0.1: |                                                                      |</span><br><span class=\"line\">127.0.0.1: | HBase requires Java 1.8 or later.                                    |</span><br><span class=\"line\">127.0.0.1: +======================================================================+</span><br></pre></td></tr></tbody></table></figure>\n<p><code>hbase-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.cluster.distributed<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.rootdir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://localhost:9820/hbase<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.wal.provider<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>filesystem<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<p>如果不设置 zkData 目录，它会在 <code>/tmp/hbase-yourname</code>\n下。</p>\n<p>第三个配置项是为了解决：参见\nhttps://hbase.apache.org/book.html#wal.providers</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ERROR [RS-EventLoopGroup-3-2] util.NettyFutureUtils (NettyFutureUtils.java:lambda$addListener$0(58)) - Unexpected error caught when processing netty</span><br><span class=\"line\">java.lang.IllegalArgumentException: object is not an instance of declaring class</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"spark-3.5.1\">Spark 3.5.1</h2>\n<h3 id=\"命令-1\">命令</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-master.sh</span><br><span class=\"line\">start-workers.sh</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark-submit --class org.apache.spark.examples.SparkPi --master yarn <span class=\"variable\">$SPARK_HOME</span>/examples/jars/spark-examples_2.12-3.5.1.jar</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark-shell --master yarn</span><br><span class=\"line\">val textFile = sc.textFile(<span class=\"string\">\"hdfs://localhost:9820/wcinput\"</span>)</span><br><span class=\"line\">textFile.count()</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-4\">配置</h3>\n<p><code>spark-env.sh</code>：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> SPARK_DIST_CLASSPATH=$(/opt/hadoop-3.3.6/bin/hadoop classpath)</span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_CONF_DIR=/opt/hadoop-3.3.6/etc/hadoop</span><br><span class=\"line\"><span class=\"built_in\">export</span> SPARK_MASTER_HOST=localhost</span><br></pre></td></tr></tbody></table></figure>\n<p><code>workers</code>：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">localhost</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hive-4.0.0\">Hive 4.0.0</h2>\n<p>https://developer.aliyun.com/article/632261</p>\n<p>Hive 的数据默认存在 HDFS 里，元数据可以存在 MySQL 上。</p>\n<p>分外部表和内部表。内部表默认存在 HDFS，外部表可以存在 HBase 里。</p>\n<h3 id=\"配置元数据存在-mysql-上\">配置元数据存在 MySQL 上</h3>\n<p>https://www.mysqltutorial.org/getting-started-with-mysql/install-mysql-ubuntu/</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start mysql.service</span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\">create database hive;</span><br></pre></td></tr></tbody></table></figure>\n<p>把 MySQL 驱动程序 https://dev.mysql.com/downloads/connector/j/ JAR\n包复制到 <code>$HIVE_HOME/lib</code></p>\n<p><code>hive-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\">    JDBC connect string for a JDBC metastore.</span><br><span class=\"line\">    To use SSL to encrypt/authenticate the connection, provide database-specific SSL flag in the connection URL.</span><br><span class=\"line\">    For example, jdbc:postgresql://myhost/db?ssl=true for postgres database.</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>com.mysql.jdbc.Driver<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Driver class name for a JDBC metastore<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>root<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Username to use against metastore database<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>password to use against metastore database<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">schematool -dbType mysql -initSchema</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br><span class=\"line\">use hive;</span><br><span class=\"line\">show tables;</span><br><span class=\"line\"><span class=\"keyword\">select</span> * from DBS;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"启动-mysqldfsyarn-和-hiveserver2再用-beeline-连接-hs2\">启动\nMySQL、DFS、YARN 和 HiveServer2，再用 beeline 连接 HS2</h3>\n<p>它的日志默认在 <code>${java.io.tmpdir}/yourname/hive.log</code></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -XshowSettings:properties -version</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start mysql.service</span><br><span class=\"line\">start-dfs.sh</span><br><span class=\"line\">start-yarn.sh</span><br><span class=\"line\">hiveserver2</span><br><span class=\"line\">beeline -u <span class=\"string\">\"jdbc:hive2://localhost:10000/;user=yourname\"</span></span><br><span class=\"line\"><span class=\"built_in\">help</span></span><br></pre></td></tr></tbody></table></figure>\n<p>运行建表脚本：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; !run /path/to/create_table1.hql</span><br></pre></td></tr></tbody></table></figure>\n<p>执行 HQL：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; show tables;</span><br><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; <span class=\"keyword\">select</span> * from table1;</span><br><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; drop table table1;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建内部分区表\">创建内部分区表</h3>\n<p>它的 LOAD DATA INTO TABLE 操作会调用 MapReduce</p>\n<p>加 LOCAL 是本地的，不加是 HDFS 的（？）</p>\n<p>HQL 示例：</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> table1 (</span><br><span class=\"line\">  id STRING,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  age <span class=\"type\">INT</span>,</span><br><span class=\"line\">  department STRING</span><br><span class=\"line\">)</span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span> (city STRING)</span><br><span class=\"line\"><span class=\"type\">ROW</span> FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">'\\t'</span></span><br><span class=\"line\">STORED <span class=\"keyword\">AS</span> TEXTFILE;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'nanjing'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'wuhan'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'shanghai'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'beijing'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA <span class=\"keyword\">LOCAL</span> INPATH <span class=\"string\">'/home/rc/hive_test/data1.txt'</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">TABLE</span> table1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> table1;</span><br></pre></td></tr></tbody></table></figure>\n<p>文本文件示例：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1\tAlice\t25\tHR\tnanjing</span><br><span class=\"line\">2\tBob\t30\tFinance\twuhan</span><br><span class=\"line\">3\tCharlie\t28\tSales\tshanghai</span><br><span class=\"line\">4\tDavid\t35\tMarketing\tbeijing</span><br><span class=\"line\">5\tEve\t32\tIT\tnanjing</span><br><span class=\"line\">6\tFrank\t27\tHR\twuhan</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建有结构列的内部分区表\">创建有结构列的内部分区表</h3>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> table2 (</span><br><span class=\"line\">  id <span class=\"type\">INT</span>,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  hobbies <span class=\"keyword\">ARRAY</span><span class=\"operator\">&lt;</span>STRING<span class=\"operator\">&gt;</span>,</span><br><span class=\"line\">  address_map MAP<span class=\"operator\">&lt;</span>STRING, STRING<span class=\"operator\">&gt;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"type\">ROW</span> FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">','</span></span><br><span class=\"line\">COLLECTION ITEMS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">';'</span></span><br><span class=\"line\">MAP KEYS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">':'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA <span class=\"keyword\">LOCAL</span> INPATH <span class=\"string\">'/home/rc/hive_test/data2.txt'</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">TABLE</span> table2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> table2;</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,Lilei,book;tv;code,beijing:chaoyang;shanghai:pudong</span><br><span class=\"line\">2,Hanmeimei,book;Lilei;code;basketball,beijing:haidian;shanghai:huangpu</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建外部分桶表到-hbase用临时表数据覆写\">创建外部分桶表到\nHBase，用临时表数据覆写</h3>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">EXTERNAL</span> <span class=\"keyword\">TABLE</span> table3 (</span><br><span class=\"line\">    rowid STRING,</span><br><span class=\"line\">    name STRING,</span><br><span class=\"line\">    sex STRING,</span><br><span class=\"line\">    age <span class=\"type\">INT</span></span><br><span class=\"line\">)</span><br><span class=\"line\">CLUSTERED <span class=\"keyword\">BY</span> (rowid) <span class=\"keyword\">INTO</span> <span class=\"number\">5</span> BUCKETS</span><br><span class=\"line\">STORED <span class=\"keyword\">BY</span> <span class=\"string\">'org.apache.hadoop.hive.hbase.HBaseStorageHandler'</span></span><br><span class=\"line\"><span class=\"keyword\">WITH</span> SERDEPROPERTIES (</span><br><span class=\"line\">    \"hbase.columns.mapping\" <span class=\"operator\">=</span> \":key,cf:name,cf:sex,cf:age\"</span><br><span class=\"line\">)</span><br><span class=\"line\">TBLPROPERTIES (</span><br><span class=\"line\">    \"hbase.table.name\" <span class=\"operator\">=</span> \"table3\"</span><br><span class=\"line\">);</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TEMPORARY TABLE table4 (</span><br><span class=\"line\">  rowid STRING,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  department STRING,</span><br><span class=\"line\">  age INT</span><br><span class=\"line\">)</span><br><span class=\"line\">ROW FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED BY ':';</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA LOCAL INPATH '/home/rc/hive_test/data3.txt' INTO TABLE table4;</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT OVERWRITE TABLE table3</span><br><span class=\"line\">SELECT * FROM table4;</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT * FROM table3;</span><br></pre></td></tr></tbody></table></figure>\n<p>重启 Hive 客户端后，临时表 table4 会消失</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1:John:Male:25</span><br><span class=\"line\">2:Smith:Female:30</span><br><span class=\"line\">3:Bob:Male:40</span><br><span class=\"line\">4:Alice:Female:22</span><br><span class=\"line\">5:Michael:Male:35</span><br><span class=\"line\">6:Emily:Female:28</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-5\">配置</h3>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.RuntimeException: Error applying authorization policy on hive configuration: java.net.URISyntaxException: Relative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bsystem:user.name%7D</span><br><span class=\"line\">\tat org.apache.hive.service.cli.CLIService.init(CLIService.java:122) ~[hive-service-4.0.0.jar:4.0.0]</span><br></pre></td></tr></tbody></table></figure>\n<p>在 <code>hive-site.xml</code> 里把报错信息里报的开头的\n<code>system</code> 去了</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.RuntimeException: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: xxx is not allowed to impersonate anonymous</span><br><span class=\"line\">\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:89) ~[hive-service-4.0.0.jar:4.0.0]</span><br></pre></td></tr></tbody></table></figure>\n<p><code>core-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.proxyuser.xxx.hosts<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.proxyuser.xxx.groups<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"flume-1.11.0\">Flume 1.11.0</h2>\n<p><img src=\"https://flume.apache.org/_images/DevGuide_image00.png\"></p>\n<p>Flume 是一个水槽，用于采集、聚合和传输流数据（事件）。对于每一个代理\nagent，有源 source、汇 sink、渠道 channel。</p>\n<p>https://flume.apache.org/documentation.html</p>\n<h3 id=\"启动参数\">启动参数</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf conf -f &lt;配置文件路径&gt; -n &lt;代理名&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>注意：下面的配置不一定对。笔者不小心把配置文件夹删了，但是保留的还有配置内容截图。所以下面的实际是\n<a href=\"https://web.baimiaoapp.com/\">OCR</a>\n过来后再修改的。之前是实验成功了的，而之后没有做过实验。</p>\n<h3 id=\"hellonetcat-源与-logger-接收器\">Hello（netcat 源与 logger\n接收器）</h3>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理名为 a1</span><br><span class=\"line\"># 以 s 结尾说明可以有多个 source、sink、channel</span><br><span class=\"line\">a1.sources = r1</span><br><span class=\"line\">a1.sinks = k1</span><br><span class=\"line\">a1.channels = c1</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的渠道 c1 为内存通道</span><br><span class=\"line\">a1.channels.c1.type = memory</span><br><span class=\"line\">a1.channels.c1.capacity = 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity = 100</span><br><span class=\"line\"></span><br><span class=\"line\"># 把 a1 的源和汇 r1 和 k1 绑定到 a1 的渠道 c1 上</span><br><span class=\"line\"># source 可以指定多个渠道，sink 只能指定一个</span><br><span class=\"line\"># 以多种方式流向一个结果</span><br><span class=\"line\">a1.sources.r1.channels = c1</span><br><span class=\"line\">a1.sinks.k1.channel = c1</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的源 r1 为一个 netcat-like source</span><br><span class=\"line\"># 行为像 nc -lk [host] [port]</span><br><span class=\"line\"># 它侦听给定端口并将每行文本转换为一个事件</span><br><span class=\"line\">a1.sources.r1.type = netcat</span><br><span class=\"line\">a1.sources.r1.bind = localhost</span><br><span class=\"line\">a1.sources.r1.port = 44444</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的汇 k1 为 logger 类型，写到 flume.log 里面</span><br><span class=\"line\">a1.sinks.k1.type = logger</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控单个追加文件exec-源与-hdfs-接收器\">实时监控单个追加文件（exec\n源与 hdfs 接收器）</h3>\n<p>Exec Source 在启动时运行给定的 Unix\n命令，并期望该进程在标准输出时连续生成数据。使用\n<code>tail –F &lt;filename&gt;</code>\n命令可以看到文件末尾的实时追加。</p>\n<p>这里监控本机的 datanode 日志，并上传到 HDFS。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a2.sources = r2</span><br><span class=\"line\">a2.sinks = k2</span><br><span class=\"line\">a2.channels = c2</span><br><span class=\"line\"></span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a2.channels.c2.type = memory</span><br><span class=\"line\">a2.channels.c2.capacity = 1000</span><br><span class=\"line\">a2.channels.c2.transactionCapacity = 100</span><br><span class=\"line\"></span><br><span class=\"line\"># 源</span><br><span class=\"line\">a2.sources.r2.type = exec</span><br><span class=\"line\">a2.sources.r2.command = tail -F /opt/hadoop-ha/hadoop-3.3.6/logs/hadoop-rc-datanode-ubuntu101.log</span><br><span class=\"line\">a2.sources.r2.channels= c2</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a2.sinks.k2.type = hdfs</span><br><span class=\"line\">a2.sinks.k2.hdfs.path = hdfs://mycluster/flume/%Y%m%d/%H</span><br><span class=\"line\">a2.sinks.k2.hdfs.filePrefix = logs-</span><br><span class=\"line\">a2.sinks.k2.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔a2.sinks.k2.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a2.sinks.k2.hdfs.round = true</span><br><span class=\"line\">a2.sinks.k2.hdfs.roundValue = 1</span><br><span class=\"line\">a2.sinks.k2.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a2.sinks.k2.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollCount = 0</span><br><span class=\"line\">a2.sinks.k2.channel = c2</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控多个新文件spooldir-源与-hdfs-接收器\">实时监控多个新文件（spooldir\n源与 hdfs 接收器）</h3>\n<p>Spooling Directory Source\n监视指定目录中的新文件，并在新文件出现时解析事件。</p>\n<p>这里监控 <code>/opt/flume-1.11.0/upload</code>\n目录。向目录里添加文件后，上传到 HDFS。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a3.sources = r3</span><br><span class=\"line\">a3.sinks = k3</span><br><span class=\"line\">a3.channels = c3</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a3.channels.c3.type = memory</span><br><span class=\"line\">a3.channels.c3.capacity = 1000</span><br><span class=\"line\">a3.channels.c3.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a3.sources.r3.type = spooldir</span><br><span class=\"line\">a3.sources.r3.spoolDir = /opt/flume-1.11.0/upload</span><br><span class=\"line\">a3.sources.r3.fileSuffix = .COMPLETED</span><br><span class=\"line\"># 是否添加存储绝对路径文件名的标头</span><br><span class=\"line\">a3.sources.r3.fileHeader = true</span><br><span class=\"line\"># 忽略以.tmp 结尾的文件</span><br><span class=\"line\"># [^ ]*匹配任意不是空格的字符零次或多次</span><br><span class=\"line\">a3.sources.r3.ignorePattern = ^([^ ]*\\.tmp)$</span><br><span class=\"line\"></span><br><span class=\"line\">a3.sources.r3.channels = c3</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a3.sinks.k3.type = hdfs</span><br><span class=\"line\">a3.sinks.k3.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H</span><br><span class=\"line\">a3.sinks.k3.hdfs.filePrefix = upload-</span><br><span class=\"line\">a3.sinks.k3.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a3.sinks.k3.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a3.sinks.k3.hdfs.round = true</span><br><span class=\"line\">a3.sinks.k3.hdfs.roundValue = 1</span><br><span class=\"line\">a3.sinks.k3.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a3.sinks.k3.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a3.sinks.k3.channel = c3</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控多个追加文件taildir-源与-hdfs-接收器\">实时监控多个追加文件（TAILDIR\n源与 hdfs 接收器）</h3>\n<p>Taildir\nSource：监视指定的文件，并在检测到附加到每个文件的新行后几乎实时地跟踪它们。如果正在写入新行，则此源将重试读取它们，等待写入完成。</p>\n<p>监控 flume 目录里的 upload 目录和 upload1 目录。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a4.sources = r4</span><br><span class=\"line\">a4.sinks = k4</span><br><span class=\"line\">a4.channels = c4</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a4.channels.c4.type = memory</span><br><span class=\"line\">a4.channels.c4.capacity = 1000</span><br><span class=\"line\">a4.channels.c4.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a4.sources.r4.type = TAILDIR</span><br><span class=\"line\"># JSON 格式的文件，用于记录每个尾部文件的inode、绝对路径和最后位置</span><br><span class=\"line\">a4.sources.r4.positionFile = /opt/flume-1.11.0/taildir_position.json</span><br><span class=\"line\">a4.sources.r4.filegroups = f1 f2</span><br><span class=\"line\"># 正则表达式只能用于文件名</span><br><span class=\"line\">a4.sources.r4.filegroups.f1 = /opt/flume-1.11.0/upload/.*</span><br><span class=\"line\">a4.sources.r4.filegroups.f2 = /opt/flume-1.11.0/upload1/.*</span><br><span class=\"line\">a4.sources.r4.channels = c4</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a4.sinks.k4.type = hdfs</span><br><span class=\"line\">a4.sinks.k4.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H</span><br><span class=\"line\">a4.sinks.k4.hdfs.filePrefix = upload-</span><br><span class=\"line\">a4.sinks.k4.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a4.sinks.k4.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a4.sinks.k4.hdfs.round = true</span><br><span class=\"line\">a4.sinks.k4.hdfs.roundValue = 1</span><br><span class=\"line\">a4.sinks.k4.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a4.sinks.k4.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollInterval = 20</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a4.sinks.k4.channel = c4</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 <code>taildir_position.json</code>：其中 inode\n号码是操作系统里文件的唯一 id，pos 是 flume\n的读取到的最新的文件位置（偏移量）</p>\n<p>Taildir source\n是存在问题的：如果文件名变了，会重新上传。如果日志的文件名在一天过后变了，它会被重新上传一份。解决方案有修改\nflume 的源码，或者修改生成日志文件名部分的源码。</p>\n<h3 id=\"监控-mapreduce-结果上传到-hdfs\">监控 MapReduce 结果，上传到\nHDFS</h3>\n<p>（1）使用 Flume 的 spooldir 源递归监控 <code>/opt/result/</code>\n目录下的文件，汇总到 hdfs 接收器\n<code>hdfs://mycluster/flume/mrresult</code>。</p>\n<p>（2）将文献上传到 HDFS 的 <code>/wcinput</code> 目录，执行 MR\n输出到本地路径 <code>file:///opt/result/mrresult</code></p>\n<p>注意：如果提前建好 MR 的输出目录，MR 会报错。而如果不提前建好 flume\n的监控目录，flume 会报错。</p>\n<p>所以只提前建好外层目录，用 flume 递归监控外层目录，MR\n输出到内层目录。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a5.sources = r5</span><br><span class=\"line\">a5.sinks = k5</span><br><span class=\"line\">a5.channels = c5</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a5.channels.c5.type = memory</span><br><span class=\"line\">a5.channels.c5.capacity = 1000</span><br><span class=\"line\">a5.channels.c5.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a5.sources.r5.type = spooldir</span><br><span class=\"line\">a5.sources.r5.spoolDir = /opt/result</span><br><span class=\"line\"># 递归监视子目录</span><br><span class=\"line\">a5.sources.r5.recursiveDirectorySearch = true</span><br><span class=\"line\"># 指定文件名</span><br><span class=\"line\">a5.sources.r5.includePattern = ^part-r-00000$</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sources.r5.fileSuffix = .COMPLETED</span><br><span class=\"line\"># 是否添加存储绝对路径文件名的标头</span><br><span class=\"line\">a5.sources.r5.fileHeader = true</span><br><span class=\"line\"># 忽略以.tmp 结尾的文件</span><br><span class=\"line\"># [^ ]*匹配任意不是空格的字符零次或多次</span><br><span class=\"line\">a5.sources.r5.ignorePattern = ^([^ ]*\\.tmp)$</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sources.r5.channels = c5</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a5.sinks.k5.type = hdfs</span><br><span class=\"line\">a5.sinks.k5.hdfs.path = hdfs://mycluster/flume/mrresult</span><br><span class=\"line\">a5.sinks.k5.hdfs.filePrefix = upload-</span><br><span class=\"line\">a5.sinks.k5.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a5.sinks.k5.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a5.sinks.k5.hdfs.round = true</span><br><span class=\"line\">a5.sinks.k5.hdfs.roundValue = 1</span><br><span class=\"line\">a5.sinks.k5.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a5.sinks.k5.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sinks.k5.channel = c5</span><br></pre></td></tr></tbody></table></figure>\n<p>执行 MR：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop jar <span class=\"variable\">$HADOOP_HOME</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput file:///opt/result/mrresult</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"超链接\">超链接</h2>\n<ul>\n<li><a href=\"https://www.ruanyifeng.com/blog/2020/08/rsync.html\">rsync\n用法教程</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/FileSystemShell.html\">FileSystem\nShell</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileSystem.html\">FileSystem\nAPI</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileUtil.html\">FileUtil\nAPI</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileStatus.html\">FileStatus\nAPI</a></li>\n<li><a href=\"https://zookeeper.apache.org/doc/r3.8.2/zookeeperCLI.html\">zookeeper\nCLI</a></li>\n<li><a href=\"https://zookeeper.apache.org/doc/r3.8.2/apidocs/zookeeper-server/index.html\">zookeeper\nServer API</a></li>\n</ul>\n<h2 id=\"持久化\">持久化</h2>\n<h3 id=\"命令-2\">命令</h3>\n<p>所谓使用命令，就是使用别人已经写好的软件。</p>\n<p>环境变量 <code>PATH</code> 和物理路径，就是域名和 IP\n地址的区别，要过一道中间商。域名和 IP 地址的中间商叫\nDNS，<code>PATH</code> 和物理路径的中间商叫命令行解释器。</p>\n<p>你输入一个命令，命令行解释器会在 <code>PATH</code>\n里寻找你命令的源文件入口在哪，然后向它传递参数。</p>\n<p>你可以使用 <code>which xxx</code> 或\n<code>readlink -f $(which xxx)</code> 找你的命令源文件在哪里；使用\n<code>which which</code> 找你的 <code>which</code> 在哪里。</p>\n<p>查看虚拟机的 IP 地址：<code>ifconfig</code> <code>ip addr</code></p>\n<h3 id=\"集群脚本\">集群脚本</h3>\n<p>前提是你搭了集群。笔者已经放弃集群了，太麻烦了。</p>\n<p><strong>all：对集群的所有机器执行操作</strong></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Error: Please provide at least one argument.\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> host <span class=\"keyword\">in</span> ubuntu101 ubuntu102</span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ <span class=\"variable\">$host</span> ===========\"</span></span><br><span class=\"line\">        ssh <span class=\"variable\">$host</span> <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></tbody></table></figure>\n<p><strong>xsync：同步文件 / 目录到所有机器</strong></p>\n<p>先测试从一台机器上同步到另一台机器上：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rsync -av /path/to/src ubuntu102:/path/to/dst</span><br></pre></td></tr></tbody></table></figure>\n<p>从某台机器上同步到所有机器上：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> -lt 1 ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> Not Enough Argument!</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>;</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> host <span class=\"keyword\">in</span> ubuntu101 ubuntu102 ubuntu103</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> ==================== <span class=\"variable\">$host</span> ====================</span><br><span class=\"line\">    <span class=\"keyword\">for</span> file <span class=\"keyword\">in</span> <span class=\"variable\">$@</span></span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ -e <span class=\"variable\">$file</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">            pdir=$(<span class=\"built_in\">cd</span> -P $(<span class=\"built_in\">dirname</span> <span class=\"variable\">$file</span>); <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">            fname=$(<span class=\"built_in\">basename</span> <span class=\"variable\">$file</span>)</span><br><span class=\"line\">            ssh <span class=\"variable\">$host</span> <span class=\"string\">\"mkdir -p <span class=\"variable\">$pdir</span>\"</span></span><br><span class=\"line\">            rsync -av <span class=\"variable\">$pdir</span>/<span class=\"variable\">$fname</span> <span class=\"variable\">$host</span>:<span class=\"variable\">$pdir</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">echo</span> <span class=\"variable\">$file</span> does not exists!</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></tbody></table></figure>\n<p><strong>myhadoop</strong></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">    <span class=\"string\">\"start\"</span>)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ 启动 hadoop 集群 ============\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 HDFS --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu101\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/start-dfs.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 YARN --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/start-yarn.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 historyserver --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/bin/mapred --daemon start historyserver\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        all jps</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    <span class=\"string\">\"stop\"</span>)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ 关闭 hadoop 集群 ============\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 historyserver --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/bin/mapred --daemon stop historyserver\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 YARN --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/stop-yarn.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 HDFS --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu101\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/stop-dfs.sh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        all jps</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"Invalid parameter!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"搭建-hadoop-高可用集群\">搭建 Hadoop 高可用集群</h2>\n<p>HDFS 和 YARN\n都是主从架构，当主节点挂了或者系统升级，集群会无法正常工作。高可用是指\n7x24 小时系统可用，为此设置多个主节点。</p>\n<p>对于 HDFS，主节点是\nNameNode，它负责保存文件系统快照、操作日志、处理客户端读写请求，2NN\n负责定期合并文件系统快照和操作日志。为实现高可用，设置多个 NameNode 和\nJournalNode。同一时间只能有一个 NameNode 为 Active，它负责生成快照文件\nFsImage，其他 NameNode 为 Standby，拉取同步 FsImage，还起到 2NN\n的作用。JournalNode 负责保证 EditLog 的一致性。Zookeeper\n负责监控集群，如果 Active 的 NameNode 挂了，通过 ZKFC 进行故障转移。</p>\n<p>对于 YARN，主节点是 ResourceManager，从节点是\nNodeManager。为此配置多个 ResourceManager。</p>\n<p>https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html</p>\n<h2 id=\"hdfs-ha\">HDFS-HA</h2>\n<p>把原来的非高可用的 Hadoop\n文件夹单独复制一份，重新写配置文件和环境变量、删除 data 和 logs\n文件夹。先启动所有 journalnode 服务，再格式化一台机器的\nnamenode，启动该机器的 namenode 服务，然后在另两台机器上同步 namenode1\n的元数据信息，并启动 namenode 服务。</p>\n<h3 id=\"配置-6\">配置</h3>\n<p>三台机器上分别都配一个 NameNode、JournalNode、DataNode</p>\n<p><code>core-site.xml</code>:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>fs.defaultFS</td>\n<td>hdfs://mycluster</td>\n</tr>\n<tr>\n<td>hadoop.tmp.dir</td>\n<td>/usr/local/hadoop-ha/hadoop-3.3.6/data</td>\n</tr>\n<tr>\n<td>hadoop.http.staticuser.user</td>\n<td>rc</td>\n</tr>\n</tbody>\n</table>\n<p><code>hdfs-site.xml</code>:</p>\n<p>注意 <code>dfs.journalnode.edits.dir</code> 不能以\n<code>file://</code> 开头，前两个要以 <code>file://</code>\n开头，不然报错。以及小心各种拼写错误。</p>\n<table>\n<colgroup>\n<col style=\"width: 38%\">\n<col style=\"width: 61%\">\n</colgroup>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dfs.nameservices</td>\n<td>mycluster</td>\n</tr>\n<tr>\n<td>dfs.namenode.name.dir</td>\n<td><code>file://${hadoop.tmp.dir}/name</code></td>\n</tr>\n<tr>\n<td>dfs.datanode.data.dir</td>\n<td><code>file://${hadoop.tmp.dir}/data</code></td>\n</tr>\n<tr>\n<td>dfs.journalnode.edits.dir</td>\n<td><code>${hadoop.tmp.dir}/journalnode</code></td>\n</tr>\n<tr>\n<td>dfs.ha.namenodes.mycluster</td>\n<td>namenode1,namenode2,namenode3</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode1</td>\n<td>ubuntu101:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode2</td>\n<td>ubuntu102:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode3</td>\n<td>ubuntu103:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode1</td>\n<td>ubuntu101:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode2</td>\n<td>ubuntu102:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode3</td>\n<td>ubuntu103:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.shared.edits.dir</td>\n<td>qjournal://ubuntu101:8485;ubuntu102:8485;ubuntu103:8485/mycluster</td>\n</tr>\n<tr>\n<td>dfs.client.failover.proxy.provider.mycluster</td>\n<td>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</td>\n</tr>\n<tr>\n<td>dfs.ha.fencing.methods</td>\n<td>sshfence</td>\n</tr>\n<tr>\n<td>dfs.ha.fencing.ssh.private-key-files</td>\n<td>/home/rc/.ssh/id_rsa</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"实验\">实验</h3>\n<p>在每一台机器上启动 JournalNode 服务：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs --daemon start journalnode</span><br></pre></td></tr></tbody></table></figure>\n<p>在 101 机器上对 namenode 进行格式化，并启动 namenode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -format</span><br><span class=\"line\">hdfs --daemon start namenode</span><br></pre></td></tr></tbody></table></figure>\n<p>在 Web 界面查看，为 Standby。</p>\n<p>在另两台机器上同步 namenode1 的元数据信息，并启动 namenode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -bootstrapStandby</span><br><span class=\"line\">hdfs --daemon start namenode</span><br></pre></td></tr></tbody></table></figure>\n<p>在每一台机器上启动 DataNode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs --daemon start datanode</span><br></pre></td></tr></tbody></table></figure>\n<p>把 namenode2 切换成 Active 状态：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -transitionToActive namenode2</span><br></pre></td></tr></tbody></table></figure>\n<p>模拟 namenode2 挂掉：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">kill</span> -9 &lt;进程号&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>这时 namenode1 和 namenode3 还是 Standby。如果手动激活某一个，会显示\n102 拒绝连接。</p>\n<p>重启 namenode2 后，三个 namenode 还是\nStandby。这时再激活某一个，激活成功。这说明当所有的 namenode\n都启动成功时，才可以激活某一个\nnamenode。这失去了高可用的意义和作用。为什么会这样呢？因为我们前面配置了隔离机制，同一时刻只能有一台\nActive 的 namenode 响应客户端。如果有 namenode 挂了，其他 namenode\n只是联系不上它，不知道是不是真的挂了。如果它没挂且是\nActive，再激活其他机器，会出现两台\nActive。为了准确无误地知道它是否挂了，需要配置 ZooKeeper 监控集群。</p>\n<h3 id=\"自动故障转移配置\">自动故障转移配置</h3>\n<p>在三台机器上都加一个 Zookeeper 和 ZKFC。</p>\n<p>在上面的配置文件基础上增加。</p>\n<p><code>hdfs-site.xml</code>:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dfs.ha.automatic-failover.enabled</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p><code>core-site.xml</code>:</p>\n<p>端口号要与 ZooKeeper 配置文件里的一致。</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ha.zookeeper.quorum</td>\n<td>ubuntu101:2181,ubuntu102:2181,ubuntu103:2181</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"自动故障转移实验\">自动故障转移实验</h3>\n<p>必须在 stop-dfs 之后，并启动 ZooKeeper\n集群成功后，再在任意一台机器上初始化 HA 在 Zookeeper 中状态。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs zkfc –formatZK</span><br></pre></td></tr></tbody></table></figure>\n<p>然后 start-dfs。formatZK 成功后，以后启动集群需要先启动 ZK\n服务端，后启动 dfs。如果先启动 dfs，这时会有 ZKFC 进程，再启动 ZK\n服务端后，ZKFC 进程被挤掉了，所有 namenode 都是 Standby。</p>\n<p>查看当前活跃节点：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>或者在 ZK 客户端查看选举锁：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">get -s /hadoop-ha/mycluster/ActiveStandbyElectorLock</span><br></pre></td></tr></tbody></table></figure>\n<p>验证集群会不会进行故障转移：kill 掉 Active 的 namenode</p>\n<h2 id=\"yarn-ha\">YARN-HA</h2>\n<h3 id=\"配置-7\">配置</h3>\n<p>三台机器上分别都配一个 ResourceManager、NodeManager、ZooKeeper</p>\n<p><code>yarn-site.xml</code>:</p>\n<table>\n<colgroup>\n<col style=\"width: 28%\">\n<col style=\"width: 71%\">\n</colgroup>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>yarn.nodemanager.aux-services</td>\n<td>mapreduce_shuffle</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.ha.enabled</td>\n<td>true</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.recovery.enabled</td>\n<td>true</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.store.class</td>\n<td>org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.zk-address</td>\n<td>ubuntu101:2181,ubuntu102:2181,ubuntu103:2181</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.cluster-id</td>\n<td>cluster-yarn1</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.ha.rm-ids</td>\n<td>rm1,rm2,rm3</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm1</td>\n<td>ubuntu101</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm2</td>\n<td>ubuntu102</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm3</td>\n<td>ubuntu103</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm1</td>\n<td>ubuntu101:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm2</td>\n<td>ubuntu102:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm3</td>\n<td>ubuntu103:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm1</td>\n<td>ubuntu101:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm2</td>\n<td>ubuntu102:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm3</td>\n<td>ubuntu103:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm1</td>\n<td>ubuntu101:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm2</td>\n<td>ubuntu102:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm3</td>\n<td>ubuntu103:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm1</td>\n<td>ubuntu101:8031</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm2</td>\n<td>ubuntu102:8031</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm3</td>\n<td>ubuntu103:8031</td>\n</tr>\n<tr>\n<td>yarn.nodemanager.env-whitelist</td>\n<td>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"实验-1\">实验</h3>\n<p>查看当前活跃节点：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn rmadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>如果浏览器访问 Standby 节点的 8088 端口（RM），会自动跳转到 Active\n节点。</p>\n<h2 id=\"解决-jsch-认证失败\">解决 JSch 认证失败</h2>\n<p>问题出现在配置 HDFS HA 自动故障转移时。杀掉活跃的 NN\n之后，它没有被隔离成功。</p>\n<p>JSch 是一个库，它在 Java 程序里建立 SSH 连接。</p>\n<h3 id=\"在杀掉-acitive-的-nn-过程中\">在杀掉 Acitive 的 NN 过程中</h3>\n<p>被杀的 Acitive 的 NN 上的 ZKFC 日志：</p>\n<ol type=\"1\">\n<li>[08:38:38,534] hadoop 高可用健康监测者抛出 EOF 异常，进入\nSERVICE_NOT_RESPONDING 状态</li>\n<li> [08:38:38,615]\n<ul>\n<li>org.apache.hadoop.hdfs.tools.DFSZKFailoverController: 获取不到本地\nNN 的线程转储，由于连接被拒绝</li>\n<li> org.apache.hadoop.ha.ZKFailoverController: 退出 NN\n的主选举，并标记需要隔离</li>\n<li> hadoop 高可用激活 / 备用选举者开始重新选举</li>\n</ul></li>\n<li> [08:38:38,636] ZK\n客户端不能从服务端读取会话的附加信息，说服务端好像把套接字关闭了</li>\n<li> [08:38:38,739] 会话被关闭，ZK 客户端上对应的事件线程被终止</li>\n<li>之后 hadoop 高可用健康监测者一直尝试重新连接 NN，连不上</li>\n</ol>\n<p>原来 Standby 的 NN 上的 ZKFC 日志：</p>\n<ol type=\"1\">\n<li>[08:38:38,719] 选举者检查到了需要被隔离的原活跃节点，ZKFC\n找到了隔离目标</li>\n<li> [08:38:39,738] org.apache.hadoop.ha.FailoverController\n联系不上被杀的 NN</li>\n<li>[08:38:39,748] 高可用节点隔离者开始隔离，用\norg.apache.hadoop.ha.SshFenceByTcpPort，里面用了 JSch\n库建立客户端（本机）与服务端（被杀的）之间的 SSH 连接</li>\n<li> [08:38:40,113] SSH 认证失败，隔离方法没有成功，选举失败</li>\n<li>之后选举者一直在重建 ZK 连接，重新连 NN 连不上，重新隔离失败</li>\n</ol>\n<h3 id=\"软件版本\">软件版本</h3>\n<p>客户端（Standby 上的\norg.apache.hadoop.ha.SshFenceByTcpPort.jsch）：</p>\n<ul>\n<li>Hadoop 3.3.6 <a href=\"https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/SshFenceByTcpPort.java\">SshFenceByTcpPort\n源码</a></li>\n<li> JSch 0.1.55</li>\n</ul>\n<p>服务端（被杀的）：</p>\n<ul>\n<li>OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022 里的\nsshd</li>\n</ul>\n<p>生成密钥时用的命令：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -m PEM</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"关键日志\">关键日志</h3>\n<p>原来为 Standby 的 NN 上的 ZKFC 日志：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO org.apache.hadoop.ha.SshFenceByTcpPort.jsch:</span><br><span class=\"line\">//...</span><br><span class=\"line\">Remote version string: SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.6</span><br><span class=\"line\">Local version string: SSH-2.0-JSCH-0.1.54</span><br><span class=\"line\">// JSch 0.1.55 的源码里，写的字符串就是 0.1.54，这个应该不影响</span><br><span class=\"line\">//...</span><br><span class=\"line\">Authentications that can continue: publickey,keyboard-interactive,password</span><br><span class=\"line\">Next authentication method: publickey</span><br><span class=\"line\">// 这里用公钥认证失败了</span><br><span class=\"line\">Authentications that can continue: password</span><br><span class=\"line\">Next authentication method: password</span><br><span class=\"line\">Disconnecting from ubuntu103 port 22</span><br><span class=\"line\">WARN org.apache.hadoop.ha.SshFenceByTcpPort: Unable to connect to ubuntu103 as user rc</span><br><span class=\"line\">com.jcraft.jsch.JSchException: Auth fail</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"解决思路\">解决思路</h3>\n<p>看 sshd 的日志：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userauth_pubkey: key type ssh-rsa not in PubkeyAcceptedAlgorithms</span><br><span class=\"line\">error: Received disconnect from 192.168.78.101 port 49968:3: com.jcraft.jsch.JSchException: Auth fail</span><br><span class=\"line\">Disconnected from authenticating user rc 192.168.78.101 port 49968</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> vi /etc/ssh/sshd_config</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PubkeyAuthentication yes</span><br><span class=\"line\">PubkeyAcceptedAlgorithms +ssh-rsa</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart sshd</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"不是问题的问题\">不是问题的问题</h2>\n<p>用</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 Active 转移成功了，但是联系不上被杀的那一方。</p>\n<p>具体地说，转移成功之后，三个方的 DN 都一直在尝试连被杀那一方的\nNN，一直在写日志。除此之外上传下载都没问题。</p>\n<p>这应该是集群自带的心跳机制，不是问题。</p>\n","excerpt":"","more":"<p>一种不看完整教程安装软件的方法：</p>\n<ol type=\"1\">\n<li>在软件安装的目录里面，通常有一个 doc 文件夹</li>\n<li>在解压软件包之后，什么配置都别写，上来先启动了再说</li>\n<li>找到软件的日志文件在哪里</li>\n<li>在日志里搜索 <code>WARN</code> <code>ERROR</code></li>\n<li>在网上搜索或者问 GPT 为什么会出现这个错误</li>\n</ol>\n<h2 id=\"vscode-远程附加调试\">VSCode 远程附加调试</h2>\n<p>hadoop-env.sh</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> 某某_OPTS=<span class=\"string\">\"-agentlib:jdwp=transport=dt_socket,address=8888,server=y,suspend=n\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p>launch.json</p>\n<figure class=\"highlight json\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"0.2.0\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"configurations\"</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">{</span></span><br><span class=\"line\">      <span class=\"attr\">\"type\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"java\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"Hadoop 某某\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"request\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"attach\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"hostName\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"ubuntu101\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">\"port\"</span><span class=\"punctuation\">:</span> <span class=\"number\">8888</span></span><br><span class=\"line\">    <span class=\"punctuation\">}</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"java-代码运行环境的问题\">Java 代码运行环境的问题</h2>\n<p>“连接\nHDFS” 是什么意思？再往前问：你是如何知道你的 “集群” 是正在运行着的？用\n<code>jps</code> 查看 Java 进程。</p>\n<p><code>jps</code> 查看的是什么？是所有正在运行着的 JVM\n实例，每一个进程是一个单独的 JVM。</p>\n<p>“连接 HDFS” 的意思是：再运行一个新的 JVM，称为 “客户端”。这个 JVM\n要与另一个 JVM 通信，那个 JVM 叫\nNameNode。怎么通信？虽然不知道细节，但你可能看过这样的代码：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URISyntaxException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileStatus;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.hadoop.fs.Path;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">App</span> {</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, URISyntaxException {</span><br><span class=\"line\">        <span class=\"type\">Configuration</span> <span class=\"variable\">conf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Configuration</span>();</span><br><span class=\"line\">        <span class=\"type\">FileSystem</span> <span class=\"variable\">fs</span> <span class=\"operator\">=</span> FileSystem.get(<span class=\"keyword\">new</span> <span class=\"title class_\">URI</span>(<span class=\"string\">\"hdfs://ubuntu101:9820\"</span>), conf);</span><br><span class=\"line\">        FileStatus[] fileStatuses = fs.listStatus(<span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"/\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (FileStatus status : fileStatuses) {</span><br><span class=\"line\">            System.out.println(status.getPath());</span><br><span class=\"line\">        }</span><br><span class=\"line\">        fs.close();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>现在的问题在于：</p>\n<ol type=\"1\">\n<li><b>它 <code>import</code> 的东西是怎么来的？</b></li>\n<li><b>在它编译完之后，放到 JVM\n上运行的时候（即 “运行时”），它还需不需要它 <code>import</code>\n的东西？</b></li>\n<li><b>它运行时的 JVM\n在哪里，在虚拟机上还是在物理机上？如果在物理机上，它能不能与虚拟机通信？</b></li>\n<li><b>IDE 起的是什么作用？</b></li>\n</ol>\n<p>先回答第四个问题：IDE 起的是工具人的作用。如果你用的\nIDEA，并且成功连接 HDFS 了，你会在 IDEA 的命令行看到：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/lib/jvm/java-8-openjdk-amd64/bin/java -javaagent:/opt/idea-IC-241.15989.150/lib/idea_rt.jar=43273:/opt/idea-IC-241.15989.150/bin\\</span><br><span class=\"line\">                                        -Dfile.encoding=UTF-8\\</span><br><span class=\"line\">                                        -classpath /lib/jvm/java-8-openjdk-amd64/jre/lib/charsets.jar:/后面全都是Jar包的路径</span><br></pre></td></tr></tbody></table></figure>\n<p>它就是执行了一条命令：打开你的 JDK 目录里的 <code>java</code>\n，然后向这个东西传了几个参数：工具人、文件编码、classpath</p>\n<p>关键的就是 classpath，你需要保证你代码 “运行时” 的东西能在 classpath\n里找到。</p>\n<p>再回答第二个问题：它 <code>import</code>\n的东西都是它的 “运行时” 需要的东西吗？</p>\n<p>不一定，这是它 “编译时” 需要的东西。当他报错报找不到某个类的时候，就是它 “运行时” 需要的东西。</p>\n<p>再回答第一个问题：搞到这些 jar 包。</p>\n<ul>\n<li>用 Maven</li>\n<li> 如果你看过你 Hadoop 的安装目录，你会看到一个 <code>share</code>\n文件夹</li>\n</ul>\n<p>对于第三个问题的解决思路：</p>\n<ul>\n<li>在虚拟机上运行客户端，连接虚拟机上的 NameNode</li>\n<li> 在物理机上运行客户端，连接物理机上的\nNameNode（如果你物理机搞成功了）</li>\n<li>在物理机上运行客户端，通过 winutils 这个中间人与虚拟机上的 NameNode\n通信</li>\n</ul>\n<p>笔者最终的解决方案是：在虚拟机上安装 IDE，把\n<code>$HADOOP_HOME/share/hadoop</code> 里的 Jar 包导进 IDE\n里（这里用的是 IDEA），按播放键运行。如果报找不到类的错误，注意：在\n<code>$HADOOP_HOME/share/hadoop/子文件夹</code> 下还有一个叫\n<code>lib</code> 的文件夹。</p>\n<h2 id=\"安装-ubuntu-22.04.3\">安装 Ubuntu 22.04.3</h2>\n<ol type=\"1\">\n<li>下载 Linux\n操作系统镜像，可以理解为操作系统的 “安装包”。https://launchpad.net/ubuntu/+cdmirrors</li>\n<li> 下载一个支持在 Windows 操作系统下运行 Linux\n镜像的软件（宿主），它相当于一个没装操作系统的电脑，但是装了引导加载程序\nGRUB\n<ul>\n<li>使用 VM Player</li>\n</ul></li>\n<li> 在宿主里 “创建两台虚拟机”，相当于对这一份镜像，安装了两个新的操作系统，运行在你的宿主和\nWindows 操作系统上</li>\n</ol>\n<p>前面三步改用 WSL（适用于 Linux 的 Windows\n子系统）https://learn.microsoft.com/zh-cn/windows/wsl/</p>\n<ol start=\"4\" type=\"1\">\n<li><p>配置网络，给虚拟机和物理机搭上鹊桥</p>\n<ul>\n<li>不同虚拟机采用不同静态 IP</li>\n<li> 把虚拟机网卡路由到宿主的网关，在\n<code>C:\\ProgramData\\VMware\\vmnetnat.conf</code> 查看 VM 的 NAT\n网关地址</li>\n<li>修改 <code>/etc/hostname</code> 为自定义主机名</li>\n<li><code>/etc/hosts</code>\n<code>C:\\Windows\\System32\\drivers\\etc\\hosts</code></li>\n</ul></li>\n</ol>\n<p>如果你用的是 WSL，你在它上面开一个端口，可以直接在物理机上使用\n<code>localhost:port</code> 访问。<strong>如果你装了两台 WSL，它们的 IP\n会是相同的</strong>，这个问题不好解决。据说学大数据的都找不到大数据相关工作。那我们就退而求其次，根本没有必要搭分布式集群，在一台机器上搭个伪分布式就行了，文件分片只分一片。这样配置文件还不至于备份来备份去，只保留一份配置文件。</p>\n<ol start=\"5\" type=\"1\">\n<li><p>配置 Ubuntu 软件源\nhttps://mirrors.ustc.edu.cn/help/ubuntu.html</p></li>\n<li><p> 安装 JDK\nhttps://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions</p></li>\n<li><p> 写环境变量</p></li>\n<li><p>配置 SSH https://wangdoc.com/ssh/</p></li>\n</ol>\n<h3 id=\"网络\">网络</h3>\n<p>如果你用的 WSL + 单机伪分布式，只需要修改\n<code>/etc/wsl.conf</code>：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[network]</span><br><span class=\"line\">hostname=localhost</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">exit</span></span><br><span class=\"line\">wsl --shutdown</span><br><span class=\"line\">wsl</span><br></pre></td></tr></tbody></table></figure>\n<p>如果你用的 VM + Ubuntu 22.04:</p>\n<p>编辑 <code>/etc/netplan</code> 下的 <code>00-installer-config.yaml</code> 文件。<a href=\"https://netplan.readthedocs.io/en/stable/netplan-tutorial/\">netplan\n文档</a></p>\n<p>选择 <code>192.168.78</code> 的依据是：</p>\n<ul>\n<li>在物理机使用 <code>ipconfig</code> 命令得到的【VMnet8】的 IPv4\n地址 <code>192.168.78.1</code></li>\n<li>查看 <code>C:\\ProgramData\\VMware\\vmnetnat.conf</code> 里的 NAT\n网关地址 <code>192.168.78.2</code></li>\n</ul>\n<figure class=\"highlight yaml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\">  <span class=\"attr\">version:</span> <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"attr\">ethernets:</span></span><br><span class=\"line\">    <span class=\"attr\">ens33:</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp4:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">dhcp6:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">addresses:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.101</span><span class=\"string\">/24</span> <span class=\"comment\"># 每台机器设置成不同的</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">to:</span> <span class=\"string\">default</span></span><br><span class=\"line\">          <span class=\"attr\">via:</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.2</span></span><br><span class=\"line\">      <span class=\"attr\">nameservers:</span></span><br><span class=\"line\">        <span class=\"attr\">addresses:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"number\">192.168</span><span class=\"number\">.78</span><span class=\"number\">.2</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> netplan try</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"ssh\">SSH</h3>\n<p>如果你用的 WSL + 单机伪分布式，下面两条命令只用做一次。</p>\n<p>如果你搭的分布式：每台机器上都执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -m PEM</span><br></pre></td></tr></tbody></table></figure>\n<p>笔者这里的版本是\n<code>OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022</code>，要加上\n<code>-m PEM</code>，确保私钥以 -----BEGIN <strong>RSA</strong> PRIVATE\nKEY----- 开头。<a href=\"https://www.cnblogs.com/simple-li/p/14654812.html\">后续错误</a></p>\n<p>每台机器上都执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id ubuntu101</span><br><span class=\"line\">ssh-copy-id ubuntu102</span><br><span class=\"line\">...</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"存储空间\">存储空间</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">du</span> -h --max-depth=1</span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li>给虚拟机扩容：<code>https://hrfis.me/blog/linux.html#扩容</code></li>\n<li>使用 https://www.diskgenius.cn/ 可以把你 D 盘的空间向 C\n盘匀一点。如果你有多余的恢复分区，可以把它删了，只保留一个。</li>\n<li>使用 https://github.com/redtrillix/SpaceSniffer\n可以可视化地展示你硬盘的占用情况。</li>\n</ul>\n<h3 id=\"中文字体\">中文字体</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> apt install language-pack-zh-hans</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vi /etc/default/locale</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mv</span> /mnt/c/path/to/font ~ /usr/share/fonts</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LANG=zh_CN.UTF-8</span><br><span class=\"line\">LANGUAGE=\"zh_CN:zh:en_US:en\"</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hadoop-3.3.6\">Hadoop 3.3.6</h2>\n<ol start=\"9\" type=\"1\">\n<li>下载 Hadoop 软件包\n<ul>\n<li>在虚拟机上直接用 <code>wget</code></li>\n<li>用物理机下载它，从物理机的文件系统上再转移到虚拟机的文件系统上（在你的物理机硬盘上表现为\n<code>.vmdk</code> 文件）\n<ul>\n<li>VM Player\n有共享文件夹功能，把你物理机硬盘的某一个文件夹挂载到虚拟机的\n<code>/mnt/hgfs/Shared</code></li>\n<li>如果使用 WSL，你的物理机硬盘会被挂载到虚拟机的\n<code>/mnt</code></li>\n<li>使用 XFtp 软件，与你的虚拟机进行 SSH 网络协议连接</li>\n</ul></li>\n</ul></li>\n<li>在两台虚拟机上都把软件包解压。<code>/opt</code> 目录是空的，option\n的意思，让你自己选择装不装到这里。</li>\n</ol>\n<h3 id=\"配置\">配置</h3>\n<ol start=\"11\" type=\"1\">\n<li>修改它们的配置文件，要保证每台机器配置文件内容相同。使用 VSCode 的\nRemote-SSH 插件可以直接修改虚拟机内的文件，如果你用的是 WSL\n更方便。</li>\n</ol>\n<p>在 $HADOOP_HOME/share/doc/hadoop/index.html\n左下角有默认的配置文件。</p>\n<ul>\n<li><code>hadoop-env.sh</code> 指定 JAVA_HOME，启动 JVM 时的参数</li>\n<li><code>core-site.xml</code> 指定 hdfs 的\nURI，文件系统存在本地哪个目录</li>\n<li><code>hdfs-site.xml</code> 指定谁当 NN、2NN，副本个数</li>\n<li><code>mapred-site.xml</code> 指定 MR 框架，MR 历史服务器</li>\n<li><code>yarn-site.xml</code> 指定 RM，YARN 历史服务器</li>\n<li><code>workers</code> 指定谁当 DataNode</li>\n</ul>\n<p>勤看日志。当 CPU 占用高，写磁盘不到 1MB/s，可能是出问题了在一直写\nlog。</p>\n<ul>\n<li>我们为什么要在 <code>hadoop-env.sh</code> 里写\n<code>JAVA_HOME</code>？因为没写的时候，它会报错： JAVA_HOME is not set\nand could not be found；</li>\n<li>我们为什么要配置 SSH？因为没配置它会报错：Could not resolve hostname\nxxx: Name or service not known；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>fs.defaultFS</code> ？因为没配置它会报错：Cannot set priority of\nnamenode process xxx。在日志文件里有：No services to connect, missing\nNameNode address；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>hadoop.tmp.dir</code> ？因为它默认存在 <code>/tmp</code>\n文件夹下，而 <code>/tmp</code> 文件夹一重启就没了；</li>\n<li>我们为什么要在 <code>hdfs-site.xml</code> 里配置\n<code>dfs.namenode.http-address</code> ？因为我们想用浏览器访问\nHDFS；</li>\n<li>我们为什么要在 <code>core-site.xml</code> 里配置\n<code>hadoop.http.staticuser.user</code>\n？因为如果不配置，只有读的权限，没有写的权限；</li>\n<li><del>我们为什么可以不在 <code>hadoop-env.sh</code>\n里配置各种用户名？因为还没有遇到报错的时候</del></li>\n</ul>\n<ol start=\"12\" type=\"1\">\n<li>在 NameNode 上执行 <code>hdfs -namenode format</code>，把 Hadoop\n的文件系统 HDFS\n初始化。在你的物理机文件系统上有一个虚拟机文件系统，在虚拟机文件系统上又有一个\nHDFS</li>\n</ol>\n<h3 id=\"mapreduce\">MapReduce</h3>\n<ol type=\"1\">\n<li><code>start-dfs.sh</code> 再 <code>jps</code> 查看 JVM\n进程，你会看到 NN、2NN、DN</li>\n<li> 不需要 <code>start-yarn.sh</code>（如果你没有指定 MR 框架为\nYARN，它默认为 local）</li>\n<li></li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span></span><br><span class=\"line\">vi 1.txt</span><br><span class=\"line\">hdfs dfs -put 1.txt /wcinput</span><br><span class=\"line\">hadoop jar <span class=\"variable\">$HADOOP_HOME</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput /wcoutput</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"配置-1\">配置</h4>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.map.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.reduce.env<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>HADOOP_MAPRED_HOME=/opt/hadoop-3.3.6<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"mapreduce-编程入门\">MapReduce 编程入门</h4>\n<p><a href=\"https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/site/markdown/MapReduceTutorial.md\">官方教程</a></p>\n<p><img src=\"/blog/images/MapReduce.webp\"></p>\n<p>我们想统计一篇英文文章里的单词，每个都出现了多少次。假设这个文本文件只有英文单词、空格和换行符（LF\n或者 CRLF）。</p>\n<p>需要继承 Mapper 类，重写它的 map ()\n方法。这个方法里传了三个参数：该行的偏移量、该行的文本内容、环境上下文。在这个方法里，对每一行按空格进行分割，形成一个\nString []，遍历这个 String []，把它写到上下文里，这样写的就是一系列\n<code>&lt;word,1&gt;</code>。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Mapper</span>&lt;LongWritable, Text, Text, IntWritable&gt; {</span><br><span class=\"line\">    <span class=\"comment\">// KEYIN（偏移量），VALUEIN（每一行的文本），KEYOUT（单词），VALUEOUT（1）</span></span><br><span class=\"line\">    <span class=\"comment\">// 对每一行进行分割</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">Text</span> <span class=\"variable\">wordText</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Text</span>();<span class=\"comment\">// 向 context 里写的 KEYOUT。Text 相当于一个盒子</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">map</span><span class=\"params\">(LongWritable key, Text value, Context context)</span> <span class=\"keyword\">throws</span> IOException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">line</span> <span class=\"operator\">=</span> value.toString();</span><br><span class=\"line\">        String[] words = line.split(<span class=\"string\">\" \"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        System.out.println(i++ + <span class=\"string\">\" | \"</span> + key + <span class=\"string\">\" | \"</span> + value + <span class=\"string\">\" | \"</span> + line);</span><br><span class=\"line\">        <span class=\"comment\">// input 有三行文本</span></span><br><span class=\"line\">        <span class=\"comment\">// 输出了三次，每次为：1 | 偏移量 | 该行内容（不带换行符） | 该行内容（不带换行符）</span></span><br><span class=\"line\">        <span class=\"comment\">// 其中 1 没有变，说明是分布执行的</span></span><br><span class=\"line\">        <span class=\"comment\">// 第一次偏移量为 0，第一行有 35 个英文字母 + 空格，UTF-8 编码，加上 CRLF，第二次偏移量是 37</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String word : words) {</span><br><span class=\"line\">            wordText.set(word);</span><br><span class=\"line\">            context.write(wordText, <span class=\"keyword\">new</span> <span class=\"title class_\">IntWritable</span>(<span class=\"number\">1</span>));</span><br><span class=\"line\">            System.out.println(context.getCurrentKey() + <span class=\"string\">\" | \"</span> + context.getCurrentValue());</span><br><span class=\"line\">            <span class=\"comment\">// 这行语句每次输出的 key 和 value 和当前 map() 传的参相同</span></span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>继承 Reducer 类，重写 reduce () 方法。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountReducer</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Reducer</span>&lt;Text, IntWritable, Text, IntWritable&gt; {</span><br><span class=\"line\">    <span class=\"comment\">// KEYIN 和 VALUEIN 来自 WordCountMapper.map() 里向 context 里写的</span></span><br><span class=\"line\">    <span class=\"comment\">// 每一个 reducer 处理的是 【相同的KEYIN】 的 【VALUEIN集合】</span></span><br><span class=\"line\">    <span class=\"type\">IntWritable</span> <span class=\"variable\">outV</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IntWritable</span>();<span class=\"comment\">// VALUEOUT</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">reduce</span><span class=\"params\">(Text key, Iterable&lt;IntWritable&gt; values, Context context)</span></span><br><span class=\"line\">            <span class=\"keyword\">throws</span> IOException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;<span class=\"comment\">// 单词计数</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (IntWritable count : values) {</span><br><span class=\"line\">            sum += count.get();</span><br><span class=\"line\">            System.out.println(count.get());<span class=\"comment\">// values 的每一个 count 都是 1</span></span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        outV.set(sum);</span><br><span class=\"line\">        context.write(key, outV);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>继承 Driver 类，进行一些配置。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WordCountDriver</span> {</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, ClassNotFoundException, InterruptedException {</span><br><span class=\"line\">        <span class=\"type\">Configuration</span> <span class=\"variable\">conf</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Configuration</span>();</span><br><span class=\"line\">        <span class=\"type\">Job</span> <span class=\"variable\">job</span> <span class=\"operator\">=</span> Job.getInstance(conf);</span><br><span class=\"line\">        job.setJarByClass(WordCountDriver.class);</span><br><span class=\"line\">        job.setMapperClass(WordCountMapper.class);</span><br><span class=\"line\">        job.setReducerClass(WordCountReducer.class);</span><br><span class=\"line\">        job.setMapOutputKeyClass(Text.class);</span><br><span class=\"line\">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class=\"line\">        job.setOutputKeyClass(Text.class);</span><br><span class=\"line\">        job.setOutputValueClass(IntWritable.class);</span><br><span class=\"line\">        FileInputFormat.setInputPaths(job, <span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"input.txt\"</span>));</span><br><span class=\"line\">        FileOutputFormat.setOutputPath(job, <span class=\"keyword\">new</span> <span class=\"title class_\">Path</span>(<span class=\"string\">\"output\"</span>));</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> job.waitForCompletion(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        System.exit(result ? <span class=\"number\">0</span> : <span class=\"number\">1</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p><code>FileAlreadyExistsException</code>：不要提前建好输出文件夹</p>\n<h3 id=\"hdfs\">HDFS</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-dfs.sh</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs oev -p XML -i edits_xxxx -o ./edits_xxxx.xml</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs oiv -p XML -i fsimage_xxxx -o ./fsimage_xxxx.xml</span><br></pre></td></tr></tbody></table></figure>\n<p>EditLog 和 FsImage 在：</p>\n<ul>\n<li>NN 的 <code>${hadoop.tmp.dir}/dfs/name/current</code></li>\n<li>2NN 的\n<code>${hadoop.tmp.dir}/data/dfs/namesecondary/current</code></li>\n</ul>\n<h3 id=\"yarn\">YARN</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-yarn.sh</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"配置-2\">配置</h4>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>localhost<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"zookeeper\">ZooKeeper</h2>\n<p>如果你只用一台机器，应该不用装。</p>\n<p>ZooKeeper\n特点是只要有半数以上的节点正常工作，整个集群就能正常工作，所以适合装到奇数台服务器上。</p>\n<p>配置 <code>zkData/myid</code></p>\n<p>配置 <code>conf/zoo.cfg</code></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dataDir=/usr/local/zookeeper-3.8.2/zkData</span><br><span class=\"line\">server.101=master:2888:3888</span><br><span class=\"line\">server.102=worker1:2888:3888</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hbase-2.5.8\">HBase 2.5.8</h2>\n<p>它自带 ZooKeeper 3.8.3，StandAlone 模式下只有一个 HMaster\n进程：其中包括 HMaster，单个 HRegionServer 和 ZooKeeper 守护进程。</p>\n<p>它的数据可以存在本地或 HDFS 上，这里配置存在 HDFS 上。</p>\n<p>https://hbase.apache.org/book.html#standalone_dist</p>\n<p>https://hbase.apache.org/book.html#shell_exercises</p>\n<h3 id=\"命令\">命令</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-dfs.sh</span><br><span class=\"line\">start-hbase.sh</span><br><span class=\"line\">hbase shell</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">help</span></span><br><span class=\"line\">list</span><br><span class=\"line\">create <span class=\"string\">'tablename'</span>,<span class=\"string\">'cfname1'</span>,<span class=\"string\">'cfname2'</span></span><br><span class=\"line\">put <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span>,<span class=\"string\">'cfname1:qualifiername1'</span>,<span class=\"string\">'value'</span></span><br><span class=\"line\">put <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span>,<span class=\"string\">'cfname2:'</span>,<span class=\"string\">'value'</span></span><br><span class=\"line\">scan <span class=\"string\">'tablename'</span></span><br><span class=\"line\">scan <span class=\"string\">'tablename'</span>,{COLUMNS=&gt;<span class=\"string\">'cfname1'</span>}</span><br><span class=\"line\">get <span class=\"string\">'tablename'</span>,<span class=\"string\">'rowkey'</span></span><br><span class=\"line\">describe <span class=\"string\">'tablename'</span></span><br><span class=\"line\"><span class=\"built_in\">truncate</span> <span class=\"string\">'tablename'</span></span><br><span class=\"line\">drop <span class=\"string\">'tablename'</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-3\">配置</h3>\n<p>如果你没有在 <code>hbase-env.sh</code> 里配置\n<code>JAVA_HOME</code>，你会看到：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1: +======================================================================+</span><br><span class=\"line\">127.0.0.1: |                    Error: JAVA_HOME is not set                       |</span><br><span class=\"line\">127.0.0.1: +----------------------------------------------------------------------+</span><br><span class=\"line\">127.0.0.1: | Please download the latest Sun JDK from the Sun Java web site        |</span><br><span class=\"line\">127.0.0.1: |     &gt; http://www.oracle.com/technetwork/java/javase/downloads        |</span><br><span class=\"line\">127.0.0.1: |                                                                      |</span><br><span class=\"line\">127.0.0.1: | HBase requires Java 1.8 or later.                                    |</span><br><span class=\"line\">127.0.0.1: +======================================================================+</span><br></pre></td></tr></tbody></table></figure>\n<p><code>hbase-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.cluster.distributed<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.rootdir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://localhost:9820/hbase<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hbase.wal.provider<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>filesystem<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<p>如果不设置 zkData 目录，它会在 <code>/tmp/hbase-yourname</code>\n下。</p>\n<p>第三个配置项是为了解决：参见\nhttps://hbase.apache.org/book.html#wal.providers</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ERROR [RS-EventLoopGroup-3-2] util.NettyFutureUtils (NettyFutureUtils.java:lambda$addListener$0(58)) - Unexpected error caught when processing netty</span><br><span class=\"line\">java.lang.IllegalArgumentException: object is not an instance of declaring class</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"spark-3.5.1\">Spark 3.5.1</h2>\n<h3 id=\"命令-1\">命令</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-master.sh</span><br><span class=\"line\">start-workers.sh</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark-submit --class org.apache.spark.examples.SparkPi --master yarn <span class=\"variable\">$SPARK_HOME</span>/examples/jars/spark-examples_2.12-3.5.1.jar</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark-shell --master yarn</span><br><span class=\"line\">val textFile = sc.textFile(<span class=\"string\">\"hdfs://localhost:9820/wcinput\"</span>)</span><br><span class=\"line\">textFile.count()</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-4\">配置</h3>\n<p><code>spark-env.sh</code>：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> SPARK_DIST_CLASSPATH=$(/opt/hadoop-3.3.6/bin/hadoop classpath)</span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_CONF_DIR=/opt/hadoop-3.3.6/etc/hadoop</span><br><span class=\"line\"><span class=\"built_in\">export</span> SPARK_MASTER_HOST=localhost</span><br></pre></td></tr></tbody></table></figure>\n<p><code>workers</code>：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">localhost</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"hive-4.0.0\">Hive 4.0.0</h2>\n<p>https://developer.aliyun.com/article/632261</p>\n<p>Hive 的数据默认存在 HDFS 里，元数据可以存在 MySQL 上。</p>\n<p>分外部表和内部表。内部表默认存在 HDFS，外部表可以存在 HBase 里。</p>\n<h3 id=\"配置元数据存在-mysql-上\">配置元数据存在 MySQL 上</h3>\n<p>https://www.mysqltutorial.org/getting-started-with-mysql/install-mysql-ubuntu/</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start mysql.service</span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\">create database hive;</span><br></pre></td></tr></tbody></table></figure>\n<p>把 MySQL 驱动程序 https://dev.mysql.com/downloads/connector/j/ JAR\n包复制到 <code>$HIVE_HOME/lib</code></p>\n<p><code>hive-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\">    JDBC connect string for a JDBC metastore.</span><br><span class=\"line\">    To use SSL to encrypt/authenticate the connection, provide database-specific SSL flag in the connection URL.</span><br><span class=\"line\">    For example, jdbc:postgresql://myhost/db?ssl=true for postgres database.</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>com.mysql.jdbc.Driver<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Driver class name for a JDBC metastore<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>root<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Username to use against metastore database<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>password to use against metastore database<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">schematool -dbType mysql -initSchema</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br><span class=\"line\">use hive;</span><br><span class=\"line\">show tables;</span><br><span class=\"line\"><span class=\"keyword\">select</span> * from DBS;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"启动-mysqldfsyarn-和-hiveserver2再用-beeline-连接-hs2\">启动\nMySQL、DFS、YARN 和 HiveServer2，再用 beeline 连接 HS2</h3>\n<p>它的日志默认在 <code>${java.io.tmpdir}/yourname/hive.log</code></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -XshowSettings:properties -version</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl start mysql.service</span><br><span class=\"line\">start-dfs.sh</span><br><span class=\"line\">start-yarn.sh</span><br><span class=\"line\">hiveserver2</span><br><span class=\"line\">beeline -u <span class=\"string\">\"jdbc:hive2://localhost:10000/;user=yourname\"</span></span><br><span class=\"line\"><span class=\"built_in\">help</span></span><br></pre></td></tr></tbody></table></figure>\n<p>运行建表脚本：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; !run /path/to/create_table1.hql</span><br></pre></td></tr></tbody></table></figure>\n<p>执行 HQL：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; show tables;</span><br><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; <span class=\"keyword\">select</span> * from table1;</span><br><span class=\"line\">0: jdbc:hive2://localhost:10000/&gt; drop table table1;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建内部分区表\">创建内部分区表</h3>\n<p>它的 LOAD DATA INTO TABLE 操作会调用 MapReduce</p>\n<p>加 LOCAL 是本地的，不加是 HDFS 的（？）</p>\n<p>HQL 示例：</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> table1 (</span><br><span class=\"line\">  id STRING,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  age <span class=\"type\">INT</span>,</span><br><span class=\"line\">  department STRING</span><br><span class=\"line\">)</span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span> (city STRING)</span><br><span class=\"line\"><span class=\"type\">ROW</span> FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">'\\t'</span></span><br><span class=\"line\">STORED <span class=\"keyword\">AS</span> TEXTFILE;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'nanjing'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'wuhan'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'shanghai'</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> table1 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PARTITION</span> (city<span class=\"operator\">=</span><span class=\"string\">'beijing'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA <span class=\"keyword\">LOCAL</span> INPATH <span class=\"string\">'/home/rc/hive_test/data1.txt'</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">TABLE</span> table1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> table1;</span><br></pre></td></tr></tbody></table></figure>\n<p>文本文件示例：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1\tAlice\t25\tHR\tnanjing</span><br><span class=\"line\">2\tBob\t30\tFinance\twuhan</span><br><span class=\"line\">3\tCharlie\t28\tSales\tshanghai</span><br><span class=\"line\">4\tDavid\t35\tMarketing\tbeijing</span><br><span class=\"line\">5\tEve\t32\tIT\tnanjing</span><br><span class=\"line\">6\tFrank\t27\tHR\twuhan</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建有结构列的内部分区表\">创建有结构列的内部分区表</h3>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> table2 (</span><br><span class=\"line\">  id <span class=\"type\">INT</span>,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  hobbies <span class=\"keyword\">ARRAY</span><span class=\"operator\">&lt;</span>STRING<span class=\"operator\">&gt;</span>,</span><br><span class=\"line\">  address_map MAP<span class=\"operator\">&lt;</span>STRING, STRING<span class=\"operator\">&gt;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"type\">ROW</span> FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">','</span></span><br><span class=\"line\">COLLECTION ITEMS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">';'</span></span><br><span class=\"line\">MAP KEYS TERMINATED <span class=\"keyword\">BY</span> <span class=\"string\">':'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA <span class=\"keyword\">LOCAL</span> INPATH <span class=\"string\">'/home/rc/hive_test/data2.txt'</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">TABLE</span> table2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> table2;</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,Lilei,book;tv;code,beijing:chaoyang;shanghai:pudong</span><br><span class=\"line\">2,Hanmeimei,book;Lilei;code;basketball,beijing:haidian;shanghai:huangpu</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建外部分桶表到-hbase用临时表数据覆写\">创建外部分桶表到\nHBase，用临时表数据覆写</h3>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">EXTERNAL</span> <span class=\"keyword\">TABLE</span> table3 (</span><br><span class=\"line\">    rowid STRING,</span><br><span class=\"line\">    name STRING,</span><br><span class=\"line\">    sex STRING,</span><br><span class=\"line\">    age <span class=\"type\">INT</span></span><br><span class=\"line\">)</span><br><span class=\"line\">CLUSTERED <span class=\"keyword\">BY</span> (rowid) <span class=\"keyword\">INTO</span> <span class=\"number\">5</span> BUCKETS</span><br><span class=\"line\">STORED <span class=\"keyword\">BY</span> <span class=\"string\">'org.apache.hadoop.hive.hbase.HBaseStorageHandler'</span></span><br><span class=\"line\"><span class=\"keyword\">WITH</span> SERDEPROPERTIES (</span><br><span class=\"line\">    \"hbase.columns.mapping\" <span class=\"operator\">=</span> \":key,cf:name,cf:sex,cf:age\"</span><br><span class=\"line\">)</span><br><span class=\"line\">TBLPROPERTIES (</span><br><span class=\"line\">    \"hbase.table.name\" <span class=\"operator\">=</span> \"table3\"</span><br><span class=\"line\">);</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TEMPORARY TABLE table4 (</span><br><span class=\"line\">  rowid STRING,</span><br><span class=\"line\">  name STRING,</span><br><span class=\"line\">  department STRING,</span><br><span class=\"line\">  age INT</span><br><span class=\"line\">)</span><br><span class=\"line\">ROW FORMAT DELIMITED</span><br><span class=\"line\">FIELDS TERMINATED BY ':';</span><br><span class=\"line\"></span><br><span class=\"line\">LOAD DATA LOCAL INPATH '/home/rc/hive_test/data3.txt' INTO TABLE table4;</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT OVERWRITE TABLE table3</span><br><span class=\"line\">SELECT * FROM table4;</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT * FROM table3;</span><br></pre></td></tr></tbody></table></figure>\n<p>重启 Hive 客户端后，临时表 table4 会消失</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1:John:Male:25</span><br><span class=\"line\">2:Smith:Female:30</span><br><span class=\"line\">3:Bob:Male:40</span><br><span class=\"line\">4:Alice:Female:22</span><br><span class=\"line\">5:Michael:Male:35</span><br><span class=\"line\">6:Emily:Female:28</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"配置-5\">配置</h3>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.RuntimeException: Error applying authorization policy on hive configuration: java.net.URISyntaxException: Relative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bsystem:user.name%7D</span><br><span class=\"line\">\tat org.apache.hive.service.cli.CLIService.init(CLIService.java:122) ~[hive-service-4.0.0.jar:4.0.0]</span><br></pre></td></tr></tbody></table></figure>\n<p>在 <code>hive-site.xml</code> 里把报错信息里报的开头的\n<code>system</code> 去了</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.RuntimeException: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: xxx is not allowed to impersonate anonymous</span><br><span class=\"line\">\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:89) ~[hive-service-4.0.0.jar:4.0.0]</span><br></pre></td></tr></tbody></table></figure>\n<p><code>core-site.xml</code>：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.proxyuser.xxx.hosts<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.proxyuser.xxx.groups<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"flume-1.11.0\">Flume 1.11.0</h2>\n<p><img src=\"https://flume.apache.org/_images/DevGuide_image00.png\"></p>\n<p>Flume 是一个水槽，用于采集、聚合和传输流数据（事件）。对于每一个代理\nagent，有源 source、汇 sink、渠道 channel。</p>\n<p>https://flume.apache.org/documentation.html</p>\n<h3 id=\"启动参数\">启动参数</h3>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf conf -f &lt;配置文件路径&gt; -n &lt;代理名&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>注意：下面的配置不一定对。笔者不小心把配置文件夹删了，但是保留的还有配置内容截图。所以下面的实际是\n<a href=\"https://web.baimiaoapp.com/\">OCR</a>\n过来后再修改的。之前是实验成功了的，而之后没有做过实验。</p>\n<h3 id=\"hellonetcat-源与-logger-接收器\">Hello（netcat 源与 logger\n接收器）</h3>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理名为 a1</span><br><span class=\"line\"># 以 s 结尾说明可以有多个 source、sink、channel</span><br><span class=\"line\">a1.sources = r1</span><br><span class=\"line\">a1.sinks = k1</span><br><span class=\"line\">a1.channels = c1</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的渠道 c1 为内存通道</span><br><span class=\"line\">a1.channels.c1.type = memory</span><br><span class=\"line\">a1.channels.c1.capacity = 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity = 100</span><br><span class=\"line\"></span><br><span class=\"line\"># 把 a1 的源和汇 r1 和 k1 绑定到 a1 的渠道 c1 上</span><br><span class=\"line\"># source 可以指定多个渠道，sink 只能指定一个</span><br><span class=\"line\"># 以多种方式流向一个结果</span><br><span class=\"line\">a1.sources.r1.channels = c1</span><br><span class=\"line\">a1.sinks.k1.channel = c1</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的源 r1 为一个 netcat-like source</span><br><span class=\"line\"># 行为像 nc -lk [host] [port]</span><br><span class=\"line\"># 它侦听给定端口并将每行文本转换为一个事件</span><br><span class=\"line\">a1.sources.r1.type = netcat</span><br><span class=\"line\">a1.sources.r1.bind = localhost</span><br><span class=\"line\">a1.sources.r1.port = 44444</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置 a1 的汇 k1 为 logger 类型，写到 flume.log 里面</span><br><span class=\"line\">a1.sinks.k1.type = logger</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控单个追加文件exec-源与-hdfs-接收器\">实时监控单个追加文件（exec\n源与 hdfs 接收器）</h3>\n<p>Exec Source 在启动时运行给定的 Unix\n命令，并期望该进程在标准输出时连续生成数据。使用\n<code>tail –F &lt;filename&gt;</code>\n命令可以看到文件末尾的实时追加。</p>\n<p>这里监控本机的 datanode 日志，并上传到 HDFS。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a2.sources = r2</span><br><span class=\"line\">a2.sinks = k2</span><br><span class=\"line\">a2.channels = c2</span><br><span class=\"line\"></span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a2.channels.c2.type = memory</span><br><span class=\"line\">a2.channels.c2.capacity = 1000</span><br><span class=\"line\">a2.channels.c2.transactionCapacity = 100</span><br><span class=\"line\"></span><br><span class=\"line\"># 源</span><br><span class=\"line\">a2.sources.r2.type = exec</span><br><span class=\"line\">a2.sources.r2.command = tail -F /opt/hadoop-ha/hadoop-3.3.6/logs/hadoop-rc-datanode-ubuntu101.log</span><br><span class=\"line\">a2.sources.r2.channels= c2</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a2.sinks.k2.type = hdfs</span><br><span class=\"line\">a2.sinks.k2.hdfs.path = hdfs://mycluster/flume/%Y%m%d/%H</span><br><span class=\"line\">a2.sinks.k2.hdfs.filePrefix = logs-</span><br><span class=\"line\">a2.sinks.k2.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔a2.sinks.k2.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a2.sinks.k2.hdfs.round = true</span><br><span class=\"line\">a2.sinks.k2.hdfs.roundValue = 1</span><br><span class=\"line\">a2.sinks.k2.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a2.sinks.k2.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a2.sinks.k2.hdfs.rollCount = 0</span><br><span class=\"line\">a2.sinks.k2.channel = c2</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控多个新文件spooldir-源与-hdfs-接收器\">实时监控多个新文件（spooldir\n源与 hdfs 接收器）</h3>\n<p>Spooling Directory Source\n监视指定目录中的新文件，并在新文件出现时解析事件。</p>\n<p>这里监控 <code>/opt/flume-1.11.0/upload</code>\n目录。向目录里添加文件后，上传到 HDFS。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a3.sources = r3</span><br><span class=\"line\">a3.sinks = k3</span><br><span class=\"line\">a3.channels = c3</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a3.channels.c3.type = memory</span><br><span class=\"line\">a3.channels.c3.capacity = 1000</span><br><span class=\"line\">a3.channels.c3.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a3.sources.r3.type = spooldir</span><br><span class=\"line\">a3.sources.r3.spoolDir = /opt/flume-1.11.0/upload</span><br><span class=\"line\">a3.sources.r3.fileSuffix = .COMPLETED</span><br><span class=\"line\"># 是否添加存储绝对路径文件名的标头</span><br><span class=\"line\">a3.sources.r3.fileHeader = true</span><br><span class=\"line\"># 忽略以.tmp 结尾的文件</span><br><span class=\"line\"># [^ ]*匹配任意不是空格的字符零次或多次</span><br><span class=\"line\">a3.sources.r3.ignorePattern = ^([^ ]*\\.tmp)$</span><br><span class=\"line\"></span><br><span class=\"line\">a3.sources.r3.channels = c3</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a3.sinks.k3.type = hdfs</span><br><span class=\"line\">a3.sinks.k3.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H</span><br><span class=\"line\">a3.sinks.k3.hdfs.filePrefix = upload-</span><br><span class=\"line\">a3.sinks.k3.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a3.sinks.k3.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a3.sinks.k3.hdfs.round = true</span><br><span class=\"line\">a3.sinks.k3.hdfs.roundValue = 1</span><br><span class=\"line\">a3.sinks.k3.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a3.sinks.k3.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a3.sinks.k3.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a3.sinks.k3.channel = c3</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"实时监控多个追加文件taildir-源与-hdfs-接收器\">实时监控多个追加文件（TAILDIR\n源与 hdfs 接收器）</h3>\n<p>Taildir\nSource：监视指定的文件，并在检测到附加到每个文件的新行后几乎实时地跟踪它们。如果正在写入新行，则此源将重试读取它们，等待写入完成。</p>\n<p>监控 flume 目录里的 upload 目录和 upload1 目录。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a4.sources = r4</span><br><span class=\"line\">a4.sinks = k4</span><br><span class=\"line\">a4.channels = c4</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a4.channels.c4.type = memory</span><br><span class=\"line\">a4.channels.c4.capacity = 1000</span><br><span class=\"line\">a4.channels.c4.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a4.sources.r4.type = TAILDIR</span><br><span class=\"line\"># JSON 格式的文件，用于记录每个尾部文件的inode、绝对路径和最后位置</span><br><span class=\"line\">a4.sources.r4.positionFile = /opt/flume-1.11.0/taildir_position.json</span><br><span class=\"line\">a4.sources.r4.filegroups = f1 f2</span><br><span class=\"line\"># 正则表达式只能用于文件名</span><br><span class=\"line\">a4.sources.r4.filegroups.f1 = /opt/flume-1.11.0/upload/.*</span><br><span class=\"line\">a4.sources.r4.filegroups.f2 = /opt/flume-1.11.0/upload1/.*</span><br><span class=\"line\">a4.sources.r4.channels = c4</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a4.sinks.k4.type = hdfs</span><br><span class=\"line\">a4.sinks.k4.hdfs.path = hdfs://mycluster/flume/upload/%Y%m%d/%H</span><br><span class=\"line\">a4.sinks.k4.hdfs.filePrefix = upload-</span><br><span class=\"line\">a4.sinks.k4.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a4.sinks.k4.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a4.sinks.k4.hdfs.round = true</span><br><span class=\"line\">a4.sinks.k4.hdfs.roundValue = 1</span><br><span class=\"line\">a4.sinks.k4.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a4.sinks.k4.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollInterval = 20</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a4.sinks.k4.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a4.sinks.k4.channel = c4</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 <code>taildir_position.json</code>：其中 inode\n号码是操作系统里文件的唯一 id，pos 是 flume\n的读取到的最新的文件位置（偏移量）</p>\n<p>Taildir source\n是存在问题的：如果文件名变了，会重新上传。如果日志的文件名在一天过后变了，它会被重新上传一份。解决方案有修改\nflume 的源码，或者修改生成日志文件名部分的源码。</p>\n<h3 id=\"监控-mapreduce-结果上传到-hdfs\">监控 MapReduce 结果，上传到\nHDFS</h3>\n<p>（1）使用 Flume 的 spooldir 源递归监控 <code>/opt/result/</code>\n目录下的文件，汇总到 hdfs 接收器\n<code>hdfs://mycluster/flume/mrresult</code>。</p>\n<p>（2）将文献上传到 HDFS 的 <code>/wcinput</code> 目录，执行 MR\n输出到本地路径 <code>file:///opt/result/mrresult</code></p>\n<p>注意：如果提前建好 MR 的输出目录，MR 会报错。而如果不提前建好 flume\n的监控目录，flume 会报错。</p>\n<p>所以只提前建好外层目录，用 flume 递归监控外层目录，MR\n输出到内层目录。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 代理</span><br><span class=\"line\">a5.sources = r5</span><br><span class=\"line\">a5.sinks = k5</span><br><span class=\"line\">a5.channels = c5</span><br><span class=\"line\"># 渠道</span><br><span class=\"line\">a5.channels.c5.type = memory</span><br><span class=\"line\">a5.channels.c5.capacity = 1000</span><br><span class=\"line\">a5.channels.c5.transactionCapacity = 100</span><br><span class=\"line\"># 源</span><br><span class=\"line\">a5.sources.r5.type = spooldir</span><br><span class=\"line\">a5.sources.r5.spoolDir = /opt/result</span><br><span class=\"line\"># 递归监视子目录</span><br><span class=\"line\">a5.sources.r5.recursiveDirectorySearch = true</span><br><span class=\"line\"># 指定文件名</span><br><span class=\"line\">a5.sources.r5.includePattern = ^part-r-00000$</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sources.r5.fileSuffix = .COMPLETED</span><br><span class=\"line\"># 是否添加存储绝对路径文件名的标头</span><br><span class=\"line\">a5.sources.r5.fileHeader = true</span><br><span class=\"line\"># 忽略以.tmp 结尾的文件</span><br><span class=\"line\"># [^ ]*匹配任意不是空格的字符零次或多次</span><br><span class=\"line\">a5.sources.r5.ignorePattern = ^([^ ]*\\.tmp)$</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sources.r5.channels = c5</span><br><span class=\"line\"></span><br><span class=\"line\"># 汇</span><br><span class=\"line\">a5.sinks.k5.type = hdfs</span><br><span class=\"line\">a5.sinks.k5.hdfs.path = hdfs://mycluster/flume/mrresult</span><br><span class=\"line\">a5.sinks.k5.hdfs.filePrefix = upload-</span><br><span class=\"line\">a5.sinks.k5.hdfs.fileType = DataStream</span><br><span class=\"line\"># 使用本地事件戳，把时间戳向下舍入，结合上面的配置是以小时作为子文件夹，即按小时分隔</span><br><span class=\"line\">a5.sinks.k5.hdfs.useLocalTimeStamp = true</span><br><span class=\"line\">a5.sinks.k5.hdfs.round = true</span><br><span class=\"line\">a5.sinks.k5.hdfs.roundValue = 1</span><br><span class=\"line\">a5.sinks.k5.hdfs.roundUnit = hour</span><br><span class=\"line\"># 最多积攒多少个事件后，才将文件 flush 到 HDFS</span><br><span class=\"line\">a5.sinks.k5.hdfs.batchSize = 100</span><br><span class=\"line\"># 指定多少秒生成一个新的文件（滚动）</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollInterval = 60</span><br><span class=\"line\"># 生成的文件最大大小（字节），略小于128M（HDFS的文件分块大小）</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollSize = 134217700</span><br><span class=\"line\"># 不指定滚动文件的事件数量</span><br><span class=\"line\">a5.sinks.k5.hdfs.rollCount = 0</span><br><span class=\"line\"></span><br><span class=\"line\">a5.sinks.k5.channel = c5</span><br></pre></td></tr></tbody></table></figure>\n<p>执行 MR：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop jar <span class=\"variable\">$HADOOP_HOME</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.6.jar wordcount /wcinput file:///opt/result/mrresult</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"超链接\">超链接</h2>\n<ul>\n<li><a href=\"https://www.ruanyifeng.com/blog/2020/08/rsync.html\">rsync\n用法教程</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-common/FileSystemShell.html\">FileSystem\nShell</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileSystem.html\">FileSystem\nAPI</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileUtil.html\">FileUtil\nAPI</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r3.3.6/api/org/apache/hadoop/fs/FileStatus.html\">FileStatus\nAPI</a></li>\n<li><a href=\"https://zookeeper.apache.org/doc/r3.8.2/zookeeperCLI.html\">zookeeper\nCLI</a></li>\n<li><a href=\"https://zookeeper.apache.org/doc/r3.8.2/apidocs/zookeeper-server/index.html\">zookeeper\nServer API</a></li>\n</ul>\n<h2 id=\"持久化\">持久化</h2>\n<h3 id=\"命令-2\">命令</h3>\n<p>所谓使用命令，就是使用别人已经写好的软件。</p>\n<p>环境变量 <code>PATH</code> 和物理路径，就是域名和 IP\n地址的区别，要过一道中间商。域名和 IP 地址的中间商叫\nDNS，<code>PATH</code> 和物理路径的中间商叫命令行解释器。</p>\n<p>你输入一个命令，命令行解释器会在 <code>PATH</code>\n里寻找你命令的源文件入口在哪，然后向它传递参数。</p>\n<p>你可以使用 <code>which xxx</code> 或\n<code>readlink -f $(which xxx)</code> 找你的命令源文件在哪里；使用\n<code>which which</code> 找你的 <code>which</code> 在哪里。</p>\n<p>查看虚拟机的 IP 地址：<code>ifconfig</code> <code>ip addr</code></p>\n<h3 id=\"集群脚本\">集群脚本</h3>\n<p>前提是你搭了集群。笔者已经放弃集群了，太麻烦了。</p>\n<p><strong>all：对集群的所有机器执行操作</strong></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Error: Please provide at least one argument.\"</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> host <span class=\"keyword\">in</span> ubuntu101 ubuntu102</span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ <span class=\"variable\">$host</span> ===========\"</span></span><br><span class=\"line\">        ssh <span class=\"variable\">$host</span> <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span></span><br><span class=\"line\">    <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></tbody></table></figure>\n<p><strong>xsync：同步文件 / 目录到所有机器</strong></p>\n<p>先测试从一台机器上同步到另一台机器上：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rsync -av /path/to/src ubuntu102:/path/to/dst</span><br></pre></td></tr></tbody></table></figure>\n<p>从某台机器上同步到所有机器上：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> -lt 1 ]</span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> Not Enough Argument!</span><br><span class=\"line\">    <span class=\"built_in\">exit</span>;</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> host <span class=\"keyword\">in</span> ubuntu101 ubuntu102 ubuntu103</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> ==================== <span class=\"variable\">$host</span> ====================</span><br><span class=\"line\">    <span class=\"keyword\">for</span> file <span class=\"keyword\">in</span> <span class=\"variable\">$@</span></span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ -e <span class=\"variable\">$file</span> ]</span><br><span class=\"line\">        <span class=\"keyword\">then</span></span><br><span class=\"line\">            pdir=$(<span class=\"built_in\">cd</span> -P $(<span class=\"built_in\">dirname</span> <span class=\"variable\">$file</span>); <span class=\"built_in\">pwd</span>)</span><br><span class=\"line\">            fname=$(<span class=\"built_in\">basename</span> <span class=\"variable\">$file</span>)</span><br><span class=\"line\">            ssh <span class=\"variable\">$host</span> <span class=\"string\">\"mkdir -p <span class=\"variable\">$pdir</span>\"</span></span><br><span class=\"line\">            rsync -av <span class=\"variable\">$pdir</span>/<span class=\"variable\">$fname</span> <span class=\"variable\">$host</span>:<span class=\"variable\">$pdir</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">echo</span> <span class=\"variable\">$file</span> does not exists!</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></tbody></table></figure>\n<p><strong>myhadoop</strong></p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">    <span class=\"string\">\"start\"</span>)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ 启动 hadoop 集群 ============\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 HDFS --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu101\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/start-dfs.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 YARN --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/start-yarn.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 启动 historyserver --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/bin/mapred --daemon start historyserver\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        all jps</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    <span class=\"string\">\"stop\"</span>)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"============ 关闭 hadoop 集群 ============\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 historyserver --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/bin/mapred --daemon stop historyserver\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 YARN --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu102\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/stop-yarn.sh\"</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"-------- 关闭 HDFS --------\"</span></span><br><span class=\"line\">        ssh <span class=\"string\">\"ubuntu101\"</span> <span class=\"string\">\"<span class=\"variable\">$HADOOP_HOME</span>/sbin/stop-dfs.sh\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        all jps</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">\"Invalid parameter!\"</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">        ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"搭建-hadoop-高可用集群\">搭建 Hadoop 高可用集群</h2>\n<p>HDFS 和 YARN\n都是主从架构，当主节点挂了或者系统升级，集群会无法正常工作。高可用是指\n7x24 小时系统可用，为此设置多个主节点。</p>\n<p>对于 HDFS，主节点是\nNameNode，它负责保存文件系统快照、操作日志、处理客户端读写请求，2NN\n负责定期合并文件系统快照和操作日志。为实现高可用，设置多个 NameNode 和\nJournalNode。同一时间只能有一个 NameNode 为 Active，它负责生成快照文件\nFsImage，其他 NameNode 为 Standby，拉取同步 FsImage，还起到 2NN\n的作用。JournalNode 负责保证 EditLog 的一致性。Zookeeper\n负责监控集群，如果 Active 的 NameNode 挂了，通过 ZKFC 进行故障转移。</p>\n<p>对于 YARN，主节点是 ResourceManager，从节点是\nNodeManager。为此配置多个 ResourceManager。</p>\n<p>https://hadoop.apache.org/docs/r3.3.6/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html</p>\n<h2 id=\"hdfs-ha\">HDFS-HA</h2>\n<p>把原来的非高可用的 Hadoop\n文件夹单独复制一份，重新写配置文件和环境变量、删除 data 和 logs\n文件夹。先启动所有 journalnode 服务，再格式化一台机器的\nnamenode，启动该机器的 namenode 服务，然后在另两台机器上同步 namenode1\n的元数据信息，并启动 namenode 服务。</p>\n<h3 id=\"配置-6\">配置</h3>\n<p>三台机器上分别都配一个 NameNode、JournalNode、DataNode</p>\n<p><code>core-site.xml</code>:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>fs.defaultFS</td>\n<td>hdfs://mycluster</td>\n</tr>\n<tr>\n<td>hadoop.tmp.dir</td>\n<td>/usr/local/hadoop-ha/hadoop-3.3.6/data</td>\n</tr>\n<tr>\n<td>hadoop.http.staticuser.user</td>\n<td>rc</td>\n</tr>\n</tbody>\n</table>\n<p><code>hdfs-site.xml</code>:</p>\n<p>注意 <code>dfs.journalnode.edits.dir</code> 不能以\n<code>file://</code> 开头，前两个要以 <code>file://</code>\n开头，不然报错。以及小心各种拼写错误。</p>\n<table>\n<colgroup>\n<col style=\"width: 38%\">\n<col style=\"width: 61%\">\n</colgroup>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dfs.nameservices</td>\n<td>mycluster</td>\n</tr>\n<tr>\n<td>dfs.namenode.name.dir</td>\n<td><code>file://${hadoop.tmp.dir}/name</code></td>\n</tr>\n<tr>\n<td>dfs.datanode.data.dir</td>\n<td><code>file://${hadoop.tmp.dir}/data</code></td>\n</tr>\n<tr>\n<td>dfs.journalnode.edits.dir</td>\n<td><code>${hadoop.tmp.dir}/journalnode</code></td>\n</tr>\n<tr>\n<td>dfs.ha.namenodes.mycluster</td>\n<td>namenode1,namenode2,namenode3</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode1</td>\n<td>ubuntu101:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode2</td>\n<td>ubuntu102:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.rpc-address.mycluster.namenode3</td>\n<td>ubuntu103:8020</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode1</td>\n<td>ubuntu101:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode2</td>\n<td>ubuntu102:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.http-address.mycluster.namenode3</td>\n<td>ubuntu103:9870</td>\n</tr>\n<tr>\n<td>dfs.namenode.shared.edits.dir</td>\n<td>qjournal://ubuntu101:8485;ubuntu102:8485;ubuntu103:8485/mycluster</td>\n</tr>\n<tr>\n<td>dfs.client.failover.proxy.provider.mycluster</td>\n<td>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</td>\n</tr>\n<tr>\n<td>dfs.ha.fencing.methods</td>\n<td>sshfence</td>\n</tr>\n<tr>\n<td>dfs.ha.fencing.ssh.private-key-files</td>\n<td>/home/rc/.ssh/id_rsa</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"实验\">实验</h3>\n<p>在每一台机器上启动 JournalNode 服务：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs --daemon start journalnode</span><br></pre></td></tr></tbody></table></figure>\n<p>在 101 机器上对 namenode 进行格式化，并启动 namenode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -format</span><br><span class=\"line\">hdfs --daemon start namenode</span><br></pre></td></tr></tbody></table></figure>\n<p>在 Web 界面查看，为 Standby。</p>\n<p>在另两台机器上同步 namenode1 的元数据信息，并启动 namenode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -bootstrapStandby</span><br><span class=\"line\">hdfs --daemon start namenode</span><br></pre></td></tr></tbody></table></figure>\n<p>在每一台机器上启动 DataNode：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs --daemon start datanode</span><br></pre></td></tr></tbody></table></figure>\n<p>把 namenode2 切换成 Active 状态：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -transitionToActive namenode2</span><br></pre></td></tr></tbody></table></figure>\n<p>模拟 namenode2 挂掉：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">kill</span> -9 &lt;进程号&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>这时 namenode1 和 namenode3 还是 Standby。如果手动激活某一个，会显示\n102 拒绝连接。</p>\n<p>重启 namenode2 后，三个 namenode 还是\nStandby。这时再激活某一个，激活成功。这说明当所有的 namenode\n都启动成功时，才可以激活某一个\nnamenode。这失去了高可用的意义和作用。为什么会这样呢？因为我们前面配置了隔离机制，同一时刻只能有一台\nActive 的 namenode 响应客户端。如果有 namenode 挂了，其他 namenode\n只是联系不上它，不知道是不是真的挂了。如果它没挂且是\nActive，再激活其他机器，会出现两台\nActive。为了准确无误地知道它是否挂了，需要配置 ZooKeeper 监控集群。</p>\n<h3 id=\"自动故障转移配置\">自动故障转移配置</h3>\n<p>在三台机器上都加一个 Zookeeper 和 ZKFC。</p>\n<p>在上面的配置文件基础上增加。</p>\n<p><code>hdfs-site.xml</code>:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dfs.ha.automatic-failover.enabled</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p><code>core-site.xml</code>:</p>\n<p>端口号要与 ZooKeeper 配置文件里的一致。</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ha.zookeeper.quorum</td>\n<td>ubuntu101:2181,ubuntu102:2181,ubuntu103:2181</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"自动故障转移实验\">自动故障转移实验</h3>\n<p>必须在 stop-dfs 之后，并启动 ZooKeeper\n集群成功后，再在任意一台机器上初始化 HA 在 Zookeeper 中状态。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs zkfc –formatZK</span><br></pre></td></tr></tbody></table></figure>\n<p>然后 start-dfs。formatZK 成功后，以后启动集群需要先启动 ZK\n服务端，后启动 dfs。如果先启动 dfs，这时会有 ZKFC 进程，再启动 ZK\n服务端后，ZKFC 进程被挤掉了，所有 namenode 都是 Standby。</p>\n<p>查看当前活跃节点：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>或者在 ZK 客户端查看选举锁：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">get -s /hadoop-ha/mycluster/ActiveStandbyElectorLock</span><br></pre></td></tr></tbody></table></figure>\n<p>验证集群会不会进行故障转移：kill 掉 Active 的 namenode</p>\n<h2 id=\"yarn-ha\">YARN-HA</h2>\n<h3 id=\"配置-7\">配置</h3>\n<p>三台机器上分别都配一个 ResourceManager、NodeManager、ZooKeeper</p>\n<p><code>yarn-site.xml</code>:</p>\n<table>\n<colgroup>\n<col style=\"width: 28%\">\n<col style=\"width: 71%\">\n</colgroup>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>yarn.nodemanager.aux-services</td>\n<td>mapreduce_shuffle</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.ha.enabled</td>\n<td>true</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.recovery.enabled</td>\n<td>true</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.store.class</td>\n<td>org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.zk-address</td>\n<td>ubuntu101:2181,ubuntu102:2181,ubuntu103:2181</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.cluster-id</td>\n<td>cluster-yarn1</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.ha.rm-ids</td>\n<td>rm1,rm2,rm3</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm1</td>\n<td>ubuntu101</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm2</td>\n<td>ubuntu102</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.hostname.rm3</td>\n<td>ubuntu103</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm1</td>\n<td>ubuntu101:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm2</td>\n<td>ubuntu102:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.webapp.address.rm3</td>\n<td>ubuntu103:8088</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm1</td>\n<td>ubuntu101:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm2</td>\n<td>ubuntu102:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.address.rm3</td>\n<td>ubuntu103:8032</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm1</td>\n<td>ubuntu101:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm2</td>\n<td>ubuntu102:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.scheduler.address.rm3</td>\n<td>ubuntu103:8030</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm1</td>\n<td>ubuntu101:8031</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm2</td>\n<td>ubuntu102:8031</td>\n</tr>\n<tr>\n<td>yarn.resourcemanager.resource-tracker.address.rm3</td>\n<td>ubuntu103:8031</td>\n</tr>\n<tr>\n<td>yarn.nodemanager.env-whitelist</td>\n<td>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"实验-1\">实验</h3>\n<p>查看当前活跃节点：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn rmadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>如果浏览器访问 Standby 节点的 8088 端口（RM），会自动跳转到 Active\n节点。</p>\n<h2 id=\"解决-jsch-认证失败\">解决 JSch 认证失败</h2>\n<p>问题出现在配置 HDFS HA 自动故障转移时。杀掉活跃的 NN\n之后，它没有被隔离成功。</p>\n<p>JSch 是一个库，它在 Java 程序里建立 SSH 连接。</p>\n<h3 id=\"在杀掉-acitive-的-nn-过程中\">在杀掉 Acitive 的 NN 过程中</h3>\n<p>被杀的 Acitive 的 NN 上的 ZKFC 日志：</p>\n<ol type=\"1\">\n<li>[08:38:38,534] hadoop 高可用健康监测者抛出 EOF 异常，进入\nSERVICE_NOT_RESPONDING 状态</li>\n<li> [08:38:38,615]\n<ul>\n<li>org.apache.hadoop.hdfs.tools.DFSZKFailoverController: 获取不到本地\nNN 的线程转储，由于连接被拒绝</li>\n<li> org.apache.hadoop.ha.ZKFailoverController: 退出 NN\n的主选举，并标记需要隔离</li>\n<li> hadoop 高可用激活 / 备用选举者开始重新选举</li>\n</ul></li>\n<li> [08:38:38,636] ZK\n客户端不能从服务端读取会话的附加信息，说服务端好像把套接字关闭了</li>\n<li> [08:38:38,739] 会话被关闭，ZK 客户端上对应的事件线程被终止</li>\n<li>之后 hadoop 高可用健康监测者一直尝试重新连接 NN，连不上</li>\n</ol>\n<p>原来 Standby 的 NN 上的 ZKFC 日志：</p>\n<ol type=\"1\">\n<li>[08:38:38,719] 选举者检查到了需要被隔离的原活跃节点，ZKFC\n找到了隔离目标</li>\n<li> [08:38:39,738] org.apache.hadoop.ha.FailoverController\n联系不上被杀的 NN</li>\n<li>[08:38:39,748] 高可用节点隔离者开始隔离，用\norg.apache.hadoop.ha.SshFenceByTcpPort，里面用了 JSch\n库建立客户端（本机）与服务端（被杀的）之间的 SSH 连接</li>\n<li> [08:38:40,113] SSH 认证失败，隔离方法没有成功，选举失败</li>\n<li>之后选举者一直在重建 ZK 连接，重新连 NN 连不上，重新隔离失败</li>\n</ol>\n<h3 id=\"软件版本\">软件版本</h3>\n<p>客户端（Standby 上的\norg.apache.hadoop.ha.SshFenceByTcpPort.jsch）：</p>\n<ul>\n<li>Hadoop 3.3.6 <a href=\"https://github.com/apache/hadoop/blob/branch-3.3.6/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ha/SshFenceByTcpPort.java\">SshFenceByTcpPort\n源码</a></li>\n<li> JSch 0.1.55</li>\n</ul>\n<p>服务端（被杀的）：</p>\n<ul>\n<li>OpenSSH_8.9p1 Ubuntu-3ubuntu0.6, OpenSSL 3.0.2 15 Mar 2022 里的\nsshd</li>\n</ul>\n<p>生成密钥时用的命令：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -m PEM</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"关键日志\">关键日志</h3>\n<p>原来为 Standby 的 NN 上的 ZKFC 日志：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO org.apache.hadoop.ha.SshFenceByTcpPort.jsch:</span><br><span class=\"line\">//...</span><br><span class=\"line\">Remote version string: SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.6</span><br><span class=\"line\">Local version string: SSH-2.0-JSCH-0.1.54</span><br><span class=\"line\">// JSch 0.1.55 的源码里，写的字符串就是 0.1.54，这个应该不影响</span><br><span class=\"line\">//...</span><br><span class=\"line\">Authentications that can continue: publickey,keyboard-interactive,password</span><br><span class=\"line\">Next authentication method: publickey</span><br><span class=\"line\">// 这里用公钥认证失败了</span><br><span class=\"line\">Authentications that can continue: password</span><br><span class=\"line\">Next authentication method: password</span><br><span class=\"line\">Disconnecting from ubuntu103 port 22</span><br><span class=\"line\">WARN org.apache.hadoop.ha.SshFenceByTcpPort: Unable to connect to ubuntu103 as user rc</span><br><span class=\"line\">com.jcraft.jsch.JSchException: Auth fail</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"解决思路\">解决思路</h3>\n<p>看 sshd 的日志：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userauth_pubkey: key type ssh-rsa not in PubkeyAcceptedAlgorithms</span><br><span class=\"line\">error: Received disconnect from 192.168.78.101 port 49968:3: com.jcraft.jsch.JSchException: Auth fail</span><br><span class=\"line\">Disconnected from authenticating user rc 192.168.78.101 port 49968</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> vi /etc/ssh/sshd_config</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PubkeyAuthentication yes</span><br><span class=\"line\">PubkeyAcceptedAlgorithms +ssh-rsa</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart sshd</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"不是问题的问题\">不是问题的问题</h2>\n<p>用</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs haadmin -getAllServiceState</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 Active 转移成功了，但是联系不上被杀的那一方。</p>\n<p>具体地说，转移成功之后，三个方的 DN 都一直在尝试连被杀那一方的\nNN，一直在写日志。除此之外上传下载都没问题。</p>\n<p>这应该是集群自带的心跳机制，不是问题。</p>\n"},{"title":"Hexo","date":"2023-08-27T12:38:00.000Z","_content":"\n## 建站\n\n除了 Hexo 官网文档之外的操作：\n\n1. 设置 npm 镜像源\n\n```sh\nnpm get registry\nnpm config set registry https://registry.npmmirror.com/\n```\n\n2. 安装 Hexo 并初始化之后，安装本地预览服务器，先跑\n\n```sh\nnpm install hexo-server\nhexo server\n```\n\n## 如何在新设备上推送\n\n安装 nodejs，pandoc，python，bs4，ssh，git\n\n克隆笔记源：\n\n```sh\ngit clone https://github.com/ruofancooh/blog-source.git\ncd blog-source\nnpm install\n```\n\n用ssh生成一个公钥\n\n```sh\nssh-keygen -t ed25519 -C \"your_email@example.com\"\ncat ~/.ssh/id_ed25519.pub\n```\n\n把公钥添加到 GitHub Settings → SSH and GPG keys\n\n改push的链接：\n\n```sh\ngit remote set-url origin git@github.com:ruofancooh/blog.git\n```\n\n用三个脚本生成网页：\n\n### bm.py\n\n```py\nimport os\nimport shutil\nfrom pathlib import Path\n\nfrom bs4 import BeautifulSoup\n\nSITE_ROOT = Path(r\"blog\")\nARCHIVES_DIR = SITE_ROOT / \"archives\"\nREPLACE_RULES = {\n    f\"/archives\": \"\",\n}\n\ndef update_links_in_html(html_path: Path):\n    with html_path.open(\"r+\", encoding=\"utf-8\") as file:\n        content = file.read()\n        soup = BeautifulSoup(content, \"html.parser\")\n        for a_tag in soup.find_all(\"a\"):\n            href = a_tag.get(\"href\")\n            if href:\n                for old, new in REPLACE_RULES.items():\n                    if old in href:\n                        href = href.replace(old, new)\n                a_tag[\"href\"] = href\n        file.seek(0)\n        file.write(str(soup))\n        file.truncate()\n\nif __name__ == \"__main__\":\n    shutil.move(ARCHIVES_DIR / \"index.html\", SITE_ROOT / \"index.html\")\n    shutil.rmtree(ARCHIVES_DIR)\n    for root, _, files in os.walk(SITE_ROOT):\n        for filename in files:\n            if filename.endswith(\".html\") and filename != \"404.html\":\n               update_links_in_html(Path(root) / filename)\n```\n\n### bs.bat\n\n```bat\ncd /d d:\\repo\\blog-source\nstart http://localhost:54321/\ncall npx hexo s -p 54321\n```\n\n### bg.bat\n\n```bat\n:: 删除旧文件\ncd /d d:\\repo\\blog\ngit rm -r *\n:: 渲染新文件\ncd ..\\blog-source\ncall npx hexo g\n:: 转移新文件\nxcopy public ..\\blog /s /e\ncall npx hexo clean\n:: 二次处理文件\ncd /d d:\\scripts\ncall D:/ProgramData/anaconda3/Scripts/activate\ncall python bm.py\n```\n\n推：\n\n```sh\ngit add .\ngit commit -m \"text\"\ngit push\n```\n\n## 公钥和私钥\n\n张三想给李四邮寄一个机密文件，不希望文件的内容被第三者看到。假设他们是之前从来没有见过面的，且只有邮寄这一条路可用于传递信息。于是张三把文件装在了一个盒子里，并上了自己的锁，把上锁后的盒子邮寄给了李四。这就可以保证盒子被截获后，文件依然保密。\n\n问题来了，李四是没有张三那把锁的钥匙的，这意味着如果李四想看文件，还需要把张三把钥匙也邮寄过去。比如我们在网上发送一个带密码的压缩包给对方，如果对方想解压，还需要我们把密码也发送过去。我们应该如何保证密码本身不被截获。\n\n李四想：问题是我打不开你上的锁，那么你可以上我的锁啊。我先把我的锁邮寄给你，你用我的锁把文件加密后邮寄过来，我再用我的钥匙把它打开。这样就可以保证钥匙不会在邮寄过程中泄露。\n\n李四的那把锁叫公钥，锁的钥匙叫私钥。所有人想给李四邮寄文件时，都可以用李四的公钥把文件加密，但加密后的文件只有有私钥的人才能打开。\n\n## NexT 主题\n\n[渲染数学公式](https://theme-next.js.org/docs/third-party-services/math-equations)\n| [Mermaid](https://theme-next.js.org/docs/tag-plugins/mermaid)\n| [随机背景](https://theme-next.js.org/docs/advanced-settings/custom-files)\n\n```css\nbody {\n    background-image: url(\"https://bing.img.run/rand.php\");\n    background-attachment: fixed;\n    background-size: cover;\n    background-position: center;\n}\n```\n\n## md\n\n```md\n---\ntitle: CN02 - 概述 - 体系结构\ndate: 2023-09-09 17:00:00\npermalink: CN/02/\n---\n\n- OSI 七层协议：参考模型\n- TCP/IP 四层协议：即 Internet protocol suite，实际用到的\n- 五层协议：教学模型\n\n<!--more-->\n\n（正文）\n```\n\n`permalink:` 告诉框架就按这个链接渲染。没有这个字段时，就按站点配置文件里设置的渲染（年/月/日/文章名之类的）。\n\n- 在每次渲染前，要设置文章的标题和 `permalink`。\n- 在每次渲染后：\n  1. 用 `/blog/archives/index.html` 覆盖 `/blog/index.html`\n  2. 删除 `/blog/archives/` 文件夹\n\n","source":"_posts/Hexo.md","raw":"---\ntitle: Hexo\ndate: 2023-08-27 20:38:00\npermalink: hexo.html\n---\n\n## 建站\n\n除了 Hexo 官网文档之外的操作：\n\n1. 设置 npm 镜像源\n\n```sh\nnpm get registry\nnpm config set registry https://registry.npmmirror.com/\n```\n\n2. 安装 Hexo 并初始化之后，安装本地预览服务器，先跑\n\n```sh\nnpm install hexo-server\nhexo server\n```\n\n## 如何在新设备上推送\n\n安装 nodejs，pandoc，python，bs4，ssh，git\n\n克隆笔记源：\n\n```sh\ngit clone https://github.com/ruofancooh/blog-source.git\ncd blog-source\nnpm install\n```\n\n用ssh生成一个公钥\n\n```sh\nssh-keygen -t ed25519 -C \"your_email@example.com\"\ncat ~/.ssh/id_ed25519.pub\n```\n\n把公钥添加到 GitHub Settings → SSH and GPG keys\n\n改push的链接：\n\n```sh\ngit remote set-url origin git@github.com:ruofancooh/blog.git\n```\n\n用三个脚本生成网页：\n\n### bm.py\n\n```py\nimport os\nimport shutil\nfrom pathlib import Path\n\nfrom bs4 import BeautifulSoup\n\nSITE_ROOT = Path(r\"blog\")\nARCHIVES_DIR = SITE_ROOT / \"archives\"\nREPLACE_RULES = {\n    f\"/archives\": \"\",\n}\n\ndef update_links_in_html(html_path: Path):\n    with html_path.open(\"r+\", encoding=\"utf-8\") as file:\n        content = file.read()\n        soup = BeautifulSoup(content, \"html.parser\")\n        for a_tag in soup.find_all(\"a\"):\n            href = a_tag.get(\"href\")\n            if href:\n                for old, new in REPLACE_RULES.items():\n                    if old in href:\n                        href = href.replace(old, new)\n                a_tag[\"href\"] = href\n        file.seek(0)\n        file.write(str(soup))\n        file.truncate()\n\nif __name__ == \"__main__\":\n    shutil.move(ARCHIVES_DIR / \"index.html\", SITE_ROOT / \"index.html\")\n    shutil.rmtree(ARCHIVES_DIR)\n    for root, _, files in os.walk(SITE_ROOT):\n        for filename in files:\n            if filename.endswith(\".html\") and filename != \"404.html\":\n               update_links_in_html(Path(root) / filename)\n```\n\n### bs.bat\n\n```bat\ncd /d d:\\repo\\blog-source\nstart http://localhost:54321/\ncall npx hexo s -p 54321\n```\n\n### bg.bat\n\n```bat\n:: 删除旧文件\ncd /d d:\\repo\\blog\ngit rm -r *\n:: 渲染新文件\ncd ..\\blog-source\ncall npx hexo g\n:: 转移新文件\nxcopy public ..\\blog /s /e\ncall npx hexo clean\n:: 二次处理文件\ncd /d d:\\scripts\ncall D:/ProgramData/anaconda3/Scripts/activate\ncall python bm.py\n```\n\n推：\n\n```sh\ngit add .\ngit commit -m \"text\"\ngit push\n```\n\n## 公钥和私钥\n\n张三想给李四邮寄一个机密文件，不希望文件的内容被第三者看到。假设他们是之前从来没有见过面的，且只有邮寄这一条路可用于传递信息。于是张三把文件装在了一个盒子里，并上了自己的锁，把上锁后的盒子邮寄给了李四。这就可以保证盒子被截获后，文件依然保密。\n\n问题来了，李四是没有张三那把锁的钥匙的，这意味着如果李四想看文件，还需要把张三把钥匙也邮寄过去。比如我们在网上发送一个带密码的压缩包给对方，如果对方想解压，还需要我们把密码也发送过去。我们应该如何保证密码本身不被截获。\n\n李四想：问题是我打不开你上的锁，那么你可以上我的锁啊。我先把我的锁邮寄给你，你用我的锁把文件加密后邮寄过来，我再用我的钥匙把它打开。这样就可以保证钥匙不会在邮寄过程中泄露。\n\n李四的那把锁叫公钥，锁的钥匙叫私钥。所有人想给李四邮寄文件时，都可以用李四的公钥把文件加密，但加密后的文件只有有私钥的人才能打开。\n\n## NexT 主题\n\n[渲染数学公式](https://theme-next.js.org/docs/third-party-services/math-equations)\n| [Mermaid](https://theme-next.js.org/docs/tag-plugins/mermaid)\n| [随机背景](https://theme-next.js.org/docs/advanced-settings/custom-files)\n\n```css\nbody {\n    background-image: url(\"https://bing.img.run/rand.php\");\n    background-attachment: fixed;\n    background-size: cover;\n    background-position: center;\n}\n```\n\n## md\n\n```md\n---\ntitle: CN02 - 概述 - 体系结构\ndate: 2023-09-09 17:00:00\npermalink: CN/02/\n---\n\n- OSI 七层协议：参考模型\n- TCP/IP 四层协议：即 Internet protocol suite，实际用到的\n- 五层协议：教学模型\n\n<!--more-->\n\n（正文）\n```\n\n`permalink:` 告诉框架就按这个链接渲染。没有这个字段时，就按站点配置文件里设置的渲染（年/月/日/文章名之类的）。\n\n- 在每次渲染前，要设置文章的标题和 `permalink`。\n- 在每次渲染后：\n  1. 用 `/blog/archives/index.html` 覆盖 `/blog/index.html`\n  2. 删除 `/blog/archives/` 文件夹\n\n","slug":"Hexo","published":1,"updated":"2025-09-17T14:28:04.743Z","__permalink":"hexo.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lne00055ws6422q542t","content":"<h2 id=\"建站\">建站</h2>\n<p>除了 Hexo 官网文档之外的操作：</p>\n<ol type=\"1\">\n<li>设置 npm 镜像源 </li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm get registry</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>安装 Hexo 并初始化之后，安装本地预览服务器，先跑 </li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-server</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"如何在新设备上推送\">如何在新设备上推送</h2>\n<p>安装 nodejs，pandoc，python，bs4，ssh，git</p>\n<p>克隆笔记源：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/ruofancooh/blog-source.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> blog-source</span><br><span class=\"line\">npm install</span><br></pre></td></tr></tbody></table></figure>\n<p>用 ssh 生成一个公钥</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t ed25519 -C <span class=\"string\">\"your_email@example.com\"</span></span><br><span class=\"line\"><span class=\"built_in\">cat</span> ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></tbody></table></figure>\n<p>把公钥添加到 GitHub Settings → SSH and GPG keys</p>\n<p>改 push 的链接：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote set-url origin git@github.com:ruofancooh/blog.git</span><br></pre></td></tr></tbody></table></figure>\n<p>用三个脚本生成网页：</p>\n<h3 id=\"bm.py\">bm.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> shutil</span><br><span class=\"line\"><span class=\"keyword\">from</span> pathlib <span class=\"keyword\">import</span> Path</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">SITE_ROOT = Path(<span class=\"string\">r\"blog\"</span>)</span><br><span class=\"line\">ARCHIVES_DIR = SITE_ROOT / <span class=\"string\">\"archives\"</span></span><br><span class=\"line\">REPLACE_RULES = {</span><br><span class=\"line\">    <span class=\"string\">f\"/archives\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">update_links_in_html</span>(<span class=\"params\">html_path: Path</span>):</span><br><span class=\"line\">    <span class=\"keyword\">with</span> html_path.<span class=\"built_in\">open</span>(<span class=\"string\">\"r+\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        content = file.read()</span><br><span class=\"line\">        soup = BeautifulSoup(content, <span class=\"string\">\"html.parser\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> a_tag <span class=\"keyword\">in</span> soup.find_all(<span class=\"string\">\"a\"</span>):</span><br><span class=\"line\">            href = a_tag.get(<span class=\"string\">\"href\"</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> href:</span><br><span class=\"line\">                <span class=\"keyword\">for</span> old, new <span class=\"keyword\">in</span> REPLACE_RULES.items():</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> old <span class=\"keyword\">in</span> href:</span><br><span class=\"line\">                        href = href.replace(old, new)</span><br><span class=\"line\">                a_tag[<span class=\"string\">\"href\"</span>] = href</span><br><span class=\"line\">        file.seek(<span class=\"number\">0</span>)</span><br><span class=\"line\">        file.write(<span class=\"built_in\">str</span>(soup))</span><br><span class=\"line\">        file.truncate()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    shutil.move(ARCHIVES_DIR / <span class=\"string\">\"index.html\"</span>, SITE_ROOT / <span class=\"string\">\"index.html\"</span>)</span><br><span class=\"line\">    shutil.rmtree(ARCHIVES_DIR)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> root, _, files <span class=\"keyword\">in</span> os.walk(SITE_ROOT):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> filename <span class=\"keyword\">in</span> files:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> filename.endswith(<span class=\"string\">\".html\"</span>) <span class=\"keyword\">and</span> filename != <span class=\"string\">\"404.html\"</span>:</span><br><span class=\"line\">               update_links_in_html(Path(root) / filename)</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"bs.bat\">bs.bat</h3>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\repo\\blog-source</span><br><span class=\"line\"><span class=\"built_in\">start</span> http://localhost:<span class=\"number\">54321</span>/</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo s -p <span class=\"number\">54321</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"bg.bat\">bg.bat</h3>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:: 删除旧文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\repo\\blog</span><br><span class=\"line\">git rm -r *</span><br><span class=\"line\">:: 渲染新文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..\\blog-source</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo g</span><br><span class=\"line\">:: 转移新文件</span><br><span class=\"line\"><span class=\"built_in\">xcopy</span> public ..\\blog /s /e</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo clean</span><br><span class=\"line\">:: 二次处理文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\scripts</span><br><span class=\"line\"><span class=\"keyword\">call</span> D:/ProgramData/anaconda3/Scripts/activate</span><br><span class=\"line\"><span class=\"keyword\">call</span> python bm.py</span><br></pre></td></tr></tbody></table></figure>\n<p>推：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"text\"</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"公钥和私钥\">公钥和私钥</h2>\n<p>张三想给李四邮寄一个机密文件，不希望文件的内容被第三者看到。假设他们是之前从来没有见过面的，且只有邮寄这一条路可用于传递信息。于是张三把文件装在了一个盒子里，并上了自己的锁，把上锁后的盒子邮寄给了李四。这就可以保证盒子被截获后，文件依然保密。</p>\n<p>问题来了，李四是没有张三那把锁的钥匙的，这意味着如果李四想看文件，还需要把张三把钥匙也邮寄过去。比如我们在网上发送一个带密码的压缩包给对方，如果对方想解压，还需要我们把密码也发送过去。我们应该如何保证密码本身不被截获。</p>\n<p>李四想：问题是我打不开你上的锁，那么你可以上我的锁啊。我先把我的锁邮寄给你，你用我的锁把文件加密后邮寄过来，我再用我的钥匙把它打开。这样就可以保证钥匙不会在邮寄过程中泄露。</p>\n<p>李四的那把锁叫公钥，锁的钥匙叫私钥。所有人想给李四邮寄文件时，都可以用李四的公钥把文件加密，但加密后的文件只有有私钥的人才能打开。</p>\n<h2 id=\"next-主题\">NexT 主题</h2>\n<p><a href=\"https://theme-next.js.org/docs/third-party-services/math-equations\">渲染数学公式</a>\n| <a href=\"https://theme-next.js.org/docs/tag-plugins/mermaid\">Mermaid</a> |\n<a href=\"https://theme-next.js.org/docs/advanced-settings/custom-files\">随机背景</a></p>\n<figure class=\"highlight css\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> {</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">\"https://bing.img.run/rand.php\"</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: center;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"md\">md</h2>\n<figure class=\"highlight md\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: CN02 - 概述 - 体系结构</span><br><span class=\"line\">date: 2023-09-09 17:00:00</span><br><span class=\"line\"><span class=\"section\">permalink: CN/02/</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> OSI 七层协议：参考模型</span><br><span class=\"line\"><span class=\"bullet\">-</span> TCP/IP 四层协议：即 Internet protocol suite，实际用到的</span><br><span class=\"line\"><span class=\"bullet\">-</span> 五层协议：教学模型</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--more--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">（正文）</span><br></pre></td></tr></tbody></table></figure>\n<p><code>permalink:</code>\n告诉框架就按这个链接渲染。没有这个字段时，就按站点配置文件里设置的渲染（年 / 月 / 日 / 文章名之类的）。</p>\n<ul>\n<li>在每次渲染前，要设置文章的标题和 <code>permalink</code>。</li>\n<li>在每次渲染后：\n<ol type=\"1\">\n<li>用 <code>/blog/archives/index.html</code> 覆盖\n<code>/blog/index.html</code></li>\n<li>删除 <code>/blog/archives/</code> 文件夹</li>\n</ol></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"建站\">建站</h2>\n<p>除了 Hexo 官网文档之外的操作：</p>\n<ol type=\"1\">\n<li>设置 npm 镜像源 </li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm get registry</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>安装 Hexo 并初始化之后，安装本地预览服务器，先跑 </li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-server</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"如何在新设备上推送\">如何在新设备上推送</h2>\n<p>安装 nodejs，pandoc，python，bs4，ssh，git</p>\n<p>克隆笔记源：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/ruofancooh/blog-source.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> blog-source</span><br><span class=\"line\">npm install</span><br></pre></td></tr></tbody></table></figure>\n<p>用 ssh 生成一个公钥</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t ed25519 -C <span class=\"string\">\"your_email@example.com\"</span></span><br><span class=\"line\"><span class=\"built_in\">cat</span> ~/.ssh/id_ed25519.pub</span><br></pre></td></tr></tbody></table></figure>\n<p>把公钥添加到 GitHub Settings → SSH and GPG keys</p>\n<p>改 push 的链接：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote set-url origin git@github.com:ruofancooh/blog.git</span><br></pre></td></tr></tbody></table></figure>\n<p>用三个脚本生成网页：</p>\n<h3 id=\"bm.py\">bm.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> shutil</span><br><span class=\"line\"><span class=\"keyword\">from</span> pathlib <span class=\"keyword\">import</span> Path</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">SITE_ROOT = Path(<span class=\"string\">r\"blog\"</span>)</span><br><span class=\"line\">ARCHIVES_DIR = SITE_ROOT / <span class=\"string\">\"archives\"</span></span><br><span class=\"line\">REPLACE_RULES = {</span><br><span class=\"line\">    <span class=\"string\">f\"/archives\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">update_links_in_html</span>(<span class=\"params\">html_path: Path</span>):</span><br><span class=\"line\">    <span class=\"keyword\">with</span> html_path.<span class=\"built_in\">open</span>(<span class=\"string\">\"r+\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        content = file.read()</span><br><span class=\"line\">        soup = BeautifulSoup(content, <span class=\"string\">\"html.parser\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> a_tag <span class=\"keyword\">in</span> soup.find_all(<span class=\"string\">\"a\"</span>):</span><br><span class=\"line\">            href = a_tag.get(<span class=\"string\">\"href\"</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> href:</span><br><span class=\"line\">                <span class=\"keyword\">for</span> old, new <span class=\"keyword\">in</span> REPLACE_RULES.items():</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> old <span class=\"keyword\">in</span> href:</span><br><span class=\"line\">                        href = href.replace(old, new)</span><br><span class=\"line\">                a_tag[<span class=\"string\">\"href\"</span>] = href</span><br><span class=\"line\">        file.seek(<span class=\"number\">0</span>)</span><br><span class=\"line\">        file.write(<span class=\"built_in\">str</span>(soup))</span><br><span class=\"line\">        file.truncate()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    shutil.move(ARCHIVES_DIR / <span class=\"string\">\"index.html\"</span>, SITE_ROOT / <span class=\"string\">\"index.html\"</span>)</span><br><span class=\"line\">    shutil.rmtree(ARCHIVES_DIR)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> root, _, files <span class=\"keyword\">in</span> os.walk(SITE_ROOT):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> filename <span class=\"keyword\">in</span> files:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> filename.endswith(<span class=\"string\">\".html\"</span>) <span class=\"keyword\">and</span> filename != <span class=\"string\">\"404.html\"</span>:</span><br><span class=\"line\">               update_links_in_html(Path(root) / filename)</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"bs.bat\">bs.bat</h3>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\repo\\blog-source</span><br><span class=\"line\"><span class=\"built_in\">start</span> http://localhost:<span class=\"number\">54321</span>/</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo s -p <span class=\"number\">54321</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"bg.bat\">bg.bat</h3>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:: 删除旧文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\repo\\blog</span><br><span class=\"line\">git rm -r *</span><br><span class=\"line\">:: 渲染新文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..\\blog-source</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo g</span><br><span class=\"line\">:: 转移新文件</span><br><span class=\"line\"><span class=\"built_in\">xcopy</span> public ..\\blog /s /e</span><br><span class=\"line\"><span class=\"keyword\">call</span> npx hexo clean</span><br><span class=\"line\">:: 二次处理文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d d:\\scripts</span><br><span class=\"line\"><span class=\"keyword\">call</span> D:/ProgramData/anaconda3/Scripts/activate</span><br><span class=\"line\"><span class=\"keyword\">call</span> python bm.py</span><br></pre></td></tr></tbody></table></figure>\n<p>推：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"text\"</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"公钥和私钥\">公钥和私钥</h2>\n<p>张三想给李四邮寄一个机密文件，不希望文件的内容被第三者看到。假设他们是之前从来没有见过面的，且只有邮寄这一条路可用于传递信息。于是张三把文件装在了一个盒子里，并上了自己的锁，把上锁后的盒子邮寄给了李四。这就可以保证盒子被截获后，文件依然保密。</p>\n<p>问题来了，李四是没有张三那把锁的钥匙的，这意味着如果李四想看文件，还需要把张三把钥匙也邮寄过去。比如我们在网上发送一个带密码的压缩包给对方，如果对方想解压，还需要我们把密码也发送过去。我们应该如何保证密码本身不被截获。</p>\n<p>李四想：问题是我打不开你上的锁，那么你可以上我的锁啊。我先把我的锁邮寄给你，你用我的锁把文件加密后邮寄过来，我再用我的钥匙把它打开。这样就可以保证钥匙不会在邮寄过程中泄露。</p>\n<p>李四的那把锁叫公钥，锁的钥匙叫私钥。所有人想给李四邮寄文件时，都可以用李四的公钥把文件加密，但加密后的文件只有有私钥的人才能打开。</p>\n<h2 id=\"next-主题\">NexT 主题</h2>\n<p><a href=\"https://theme-next.js.org/docs/third-party-services/math-equations\">渲染数学公式</a>\n| <a href=\"https://theme-next.js.org/docs/tag-plugins/mermaid\">Mermaid</a> |\n<a href=\"https://theme-next.js.org/docs/advanced-settings/custom-files\">随机背景</a></p>\n<figure class=\"highlight css\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> {</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">\"https://bing.img.run/rand.php\"</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-attachment</span>: fixed;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: center;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"md\">md</h2>\n<figure class=\"highlight md\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: CN02 - 概述 - 体系结构</span><br><span class=\"line\">date: 2023-09-09 17:00:00</span><br><span class=\"line\"><span class=\"section\">permalink: CN/02/</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> OSI 七层协议：参考模型</span><br><span class=\"line\"><span class=\"bullet\">-</span> TCP/IP 四层协议：即 Internet protocol suite，实际用到的</span><br><span class=\"line\"><span class=\"bullet\">-</span> 五层协议：教学模型</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--more--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">（正文）</span><br></pre></td></tr></tbody></table></figure>\n<p><code>permalink:</code>\n告诉框架就按这个链接渲染。没有这个字段时，就按站点配置文件里设置的渲染（年 / 月 / 日 / 文章名之类的）。</p>\n<ul>\n<li>在每次渲染前，要设置文章的标题和 <code>permalink</code>。</li>\n<li>在每次渲染后：\n<ol type=\"1\">\n<li>用 <code>/blog/archives/index.html</code> 覆盖\n<code>/blog/index.html</code></li>\n<li>删除 <code>/blog/archives/</code> 文件夹</li>\n</ol></li>\n</ul>\n"},{"title":"Meme 图合订本","date":"2024-12-16T01:00:00.000Z","_content":"\n小清一波库存。\n\n## 自嘲篇\n\n### 下好生活这盘棋\n\n<img src=\"/blog/images/meme/我不会下国际象棋.webp\">\n<img src=\"/blog/images/meme/下大棋.webp\">\n\n### 我的未来\n\n<img src=\"/blog/images/meme/我的未来全是禁止通行.webp\">\n<img src=\"/blog/images/meme/没有转角的人生.webp\">\n<img src=\"/blog/images/meme/找得到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/找不到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/收集大半辈子表情包.webp\">\n<img src=\"/blog/images/meme/100级的一事无成.webp\">\n\n### 为什么活着\n\n<img src=\"/blog/images/meme/为什么活.webp\">\n<img src=\"/blog/images/meme/号卖不掉.webp\">\n<img src=\"/blog/images/meme/了不起.webp\">\n\n### 我的现在\n\n<img src=\"/blog/images/meme/无信号.webp\">\n<img src=\"/blog/images/meme/不想麻烦别人的你.webp\">\n<img src=\"/blog/images/meme/平常的痛苦.webp\">\n<img src=\"/blog/images/meme/灵魂永远昂首挺胸.webp\">\n\n### 我的过去\n\n<img src=\"/blog/images/meme/内向仔的一生.webp\">\n<img src=\"/blog/images/meme/从刚出生说起.webp\">\n<img src=\"/blog/images/meme/改变与得过且过.webp\">\n<img src=\"/blog/images/meme/内向者联合起来.webp\">\n\n### 我的朋友\n\n<img src=\"/blog/images/meme/社恐如何交朋友.webp\">\n<img src=\"/blog/images/meme/非我也图也.webp\">\n<img src=\"/blog/images/meme/双人游戏.webp\">\n\n### 我的特长和兴趣\n\n<img src=\"/blog/images/meme/我的画笔和颜料.webp\">\n<img src=\"/blog/images/meme/超级摇滚迷.webp\">\n<img src=\"/blog/images/meme/做一个对社会有副作用的人.webp\">\n<img src=\"/blog/images/meme/鲁南精神.webp\">\n<img src=\"/blog/images/meme/最讨厌懒人.webp\">\n\n## 哲学篇\n\n### 哲学格言\n\n<img src=\"/blog/images/meme/过去和未来不存在.webp\">\n<img src=\"/blog/images/meme/哲学格言生成器.webp\">\n<img src=\"/blog/images/meme/朋友像雪花.webp\">\n\n### 说的道理\n\n<img src=\"/blog/images/meme/不是浪费时间.webp\">\n<img src=\"/blog/images/meme/一辈子不关心哲学.webp\">\n\n### 敢问路在何方\n\n<img src=\"/blog/images/meme/事儿在哪.webp\">\n<img src=\"/blog/images/meme/罗马空军基地.webp\">\n<img src=\"/blog/images/meme/欧洲用电量.webp\">\n<img src=\"/blog/images/meme/南极洲交通路线图.webp\">\n<img src=\"/blog/images/meme/关上了一扇门.webp\">\n<img src=\"/blog/images/meme/开门见山.webp\">\n<img src=\"/blog/images/meme/生活小常识.webp\">\n\n### 我和我\n\n<img src=\"/blog/images/meme/平凡的世界.webp\">\n<img src=\"/blog/images/meme/白鸟过河滩.webp\">\n\n## 能量篇\n\n### 生存所迫\n\n<img src=\"/blog/images/meme/蒜泥猫.webp\">\n<img src=\"/blog/images/meme/芬达海.webp\">\n\n### 饭还是要吃\n\n<img src=\"/blog/images/meme/禅尼丝空腹.webp\">\n<img src=\"/blog/images/meme/线粒体.webp\">\n<img src=\"/blog/images/meme/闸机.webp\">\n<img src=\"/blog/images/meme/医生远离我.webp\">\n<img src=\"/blog/images/meme/双核苹果.webp\">\n\n### 不是哥们\n\n<img src=\"/blog/images/meme/生日快乐.webp\">\n<img src=\"/blog/images/meme/害羞死了.webp\">\n<img src=\"/blog/images/meme/番茄炒你儿子.webp\">\n<img src=\"/blog/images/meme/不不不是是是.webp\">\n<img src=\"/blog/images/meme/是不是哥们.webp\">\n<img src=\"/blog/images/meme/非也兄台.webp\">\n<img src=\"/blog/images/meme/虾射手.webp\">\n<img src=\"/blog/images/meme/如此包装.webp\">\n\n### 请勿投喂\n\n<img src=\"/blog/images/meme/海鸥为我停留吧.webp\">\n<img src=\"/blog/images/meme/请勿投喂.webp\">\n\n## 爱情篇\n\n### 高情商发言\n\n<img src=\"/blog/images/meme/暖她一整天.webp\">\n<img src=\"/blog/images/meme/甜上心尖.webp\">\n<img src=\"/blog/images/meme/好多了.webp\">\n<img src=\"/blog/images/meme/毕姥爷的说话之道.webp\">\n\n### 那一夜\n\n<img src=\"/blog/images/meme/那一夜.webp\">\n<img src=\"/blog/images/meme/我接了.webp\">\n<img src=\"/blog/images/meme/25个未接电话.webp\">\n\n### 幻想时间\n\n<img src=\"/blog/images/meme/眉眼弯弯.webp\">\n<img src=\"/blog/images/meme/白铅笔.webp\">\n<img src=\"/blog/images/meme/合适的人.webp\">\n<img src=\"/blog/images/meme/注定孤独一生.webp\">\n\n### 转生之\n\n<img src=\"/blog/images/meme/半人马.webp\">\n<img src=\"/blog/images/meme/小光板.webp\">\n<img src=\"/blog/images/meme/撞大运.webp\">\n<img src=\"/blog/images/meme/漫画是假的.webp\">\n\n## 社会篇\n\n### 入大海\n\n<img src=\"/blog/images/meme/打工不仅能致富.webp\">\n<img src=\"/blog/images/meme/一条船.webp\">\n<img src=\"/blog/images/meme/猫猫碰拳.webp\">\n\n### 一日为师\n\n<img src=\"/blog/images/meme/师傅你是做什么工作的.webp\">\n<img src=\"/blog/images/meme/猫猫工作.webp\">\n\n### 时间给我答案\n\n<img src=\"/blog/images/meme/时间到了.webp\">\n<img src=\"/blog/images/meme/生活点滴.webp\">\n<img src=\"/blog/images/meme/喜欢星期五.webp\">\n<img src=\"/blog/images/meme/一周.webp\">\n\n### 小心路滑\n\n<img src=\"/blog/images/meme/小心地滑.webp\">\n<img src=\"/blog/images/meme/滑.webp\">\n<img src=\"/blog/images/meme/小心水分子.webp\">\n<img src=\"/blog/images/meme/SB110.webp\">\n<img src=\"/blog/images/meme/蓝移.webp\">\n<img src=\"/blog/images/meme/一看二慢三通过.webp\">\n<img src=\"/blog/images/meme/谁让你开得那么快.webp\">\n<img src=\"/blog/images/meme/他俩还认识.webp\">\n<img src=\"/blog/images/meme/不确定.webp\">\n<img src=\"/blog/images/meme/反拍牛顿.webp\">\n<img src=\"/blog/images/meme/烧.webp\">\n<img src=\"/blog/images/meme/灭烟台.webp\">\n\n## 小孩篇\n\n### 儿童节\n\n<img src=\"/blog/images/meme/成熟的大人.webp\">\n<img src=\"/blog/images/meme/成熟点.webp\">\n\n### 东阳马生\n\n<img src=\"/blog/images/meme/余幼时即厌学.webp\">\n<img src=\"/blog/images/meme/充电.webp\">\n<img src=\"/blog/images/meme/考试一点也不难.webp\">\n<img src=\"/blog/images/meme/写12个解.webp\">\n<img src=\"/blog/images/meme/水下无法呼吸.webp\">\n<img src=\"/blog/images/meme/大括号.webp\">\n<img src=\"/blog/images/meme/我是猴子.webp\">\n<img src=\"/blog/images/meme/青龙帮.webp\">\n<img src=\"/blog/images/meme/江湖义气.webp\">\n\n### 反方向的爹\n\n<img src=\"/blog/images/meme/到了我这个年纪.webp\">\n<img src=\"/blog/images/meme/自愿开学.webp\">\n\n### 老小子\n\n<img src=\"/blog/images/meme/好吃就行.jpg\">\n<img src=\"/blog/images/meme/打BOOS.webp\">\n<img src=\"/blog/images/meme/峰会改成自习.webp\">\n<img src=\"/blog/images/meme/年龄真的大了.webp\">\n\n## 历史篇\n\n### 往者不谏\n\n<img src=\"/blog/images/meme/现在的小孩.webp\">\n<img src=\"/blog/images/meme/重力.webp\">\n<img src=\"/blog/images/meme/摩托车.webp\">\n<img src=\"/blog/images/meme/抑郁症.webp\">\n<img src=\"/blog/images/meme/机械电锯.webp\">\n<img src=\"/blog/images/meme/垃圾桶.webp\">\n<img src=\"/blog/images/meme/弓箭.webp\">\n\n### 关键时刻\n\n<img src=\"/blog/images/meme/关键时刻.webp\">\n\n### 天下大势\n\n<img src=\"/blog/images/meme/你最害怕什么.webp\">\n<img src=\"/blog/images/meme/永远的家.webp\">\n<img src=\"/blog/images/meme/我爱我家.webp\">\n<img src=\"/blog/images/meme/身在福中不知福.webp\">\n\n### 来者可追\n\n<img src=\"/blog/images/meme/分支.webp\">\n<img src=\"/blog/images/meme/王八蛋.webp\">\n<img src=\"/blog/images/meme/未来是走那边.webp\">\n\n## 破壁篇\n\n### 对话\n\n<img src=\"/blog/images/meme/互联网的尽头.webp\">\n<img src=\"/blog/images/meme/wifi.webp\">\n<img src=\"/blog/images/meme/给你薯条.webp\">\n<img src=\"/blog/images/meme/笑容.webp\">\n<img src=\"/blog/images/meme/你也值得被爱.webp\">\n\n### 独立思考\n\n<img src=\"/blog/images/meme/没人知道你是一条狗.webp\">\n<img src=\"/blog/images/meme/脑控.webp\">\n<img src=\"/blog/images/meme/字幕没有加描边.webp\">\n<img src=\"/blog/images/meme/大熊猫吃火锅.webp\">\n\n### 辩证\n\n<img src=\"/blog/images/meme/墨菲定律.webp\">\n\n### 这\n\n<div class=\"demo\">\n<img src=\"/blog/images/meme/排版.webp\">\n<p>不会弄乱我的排版</p>\n</div>\n<div class=\"demo\"></p>对<p></p>吧<p></p>？</div>\n<style>\n#pb {\n  display: flex;\n  align-items: center;\n  justify-content:space-between;\n}\n.demo{\n    display:-webkit-box;\n    display:-webkit-flex;\n    display:-ms-flexbox;\n    display:flex;\n    align-items: center;\n    -webkit-box-pack:justify;\n    -webkit-justify-content:space-between;\n    -ms-flex-pack:justify;\n    justify-content:space-between;\n    font-size:1.25em;\n    font-weight:bold;\n}\n</style>\n<img src=\"/blog/images/meme/网卡.webp\">\n\n## 自勉篇\n\n### 地平论\n\n<img src=\"/blog/images/meme/穿越.webp\">\n\n### 健康之路\n\n<img src=\"/blog/images/meme/蔬菜去农药残留.webp\">\n<img src=\"/blog/images/meme/从不运动的我.webp\">\n<img src=\"/blog/images/meme/离你家超级远.webp\">\n\n### 修养生息\n\n<img src=\"/blog/images/meme/老虎卷.webp\">\n<img src=\"/blog/images/meme/睡5个小时.webp\">\n<img src=\"/blog/images/meme/12点之前睡着.webp\">\n<img src=\"/blog/images/meme/熬夜的原因.webp\">\n<img src=\"/blog/images/meme/最美好的四个小时.webp\">\n\n### 辞旧迎新\n\n<img src=\"/blog/images/meme/解冻.webp\">\n<img src=\"/blog/images/meme/四个星期后的超市.webp\">\n<img src=\"/blog/images/meme/几个星期后我的家.webp\">\n<img src=\"/blog/images/meme/随500.webp\">\n<img src=\"/blog/images/meme/随6500.webp\">\n<img src=\"/blog/images/meme/中式恐怖.webp\">\n","source":"_posts/MEME图合订本.md","raw":"---\ntitle: Meme图合订本\ndate: 2024-12-16 09:00:00\npermalink: meme.html\n---\n\n小清一波库存。\n\n## 自嘲篇\n\n### 下好生活这盘棋\n\n<img src=\"/blog/images/meme/我不会下国际象棋.webp\">\n<img src=\"/blog/images/meme/下大棋.webp\">\n\n### 我的未来\n\n<img src=\"/blog/images/meme/我的未来全是禁止通行.webp\">\n<img src=\"/blog/images/meme/没有转角的人生.webp\">\n<img src=\"/blog/images/meme/找得到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/找不到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/收集大半辈子表情包.webp\">\n<img src=\"/blog/images/meme/100级的一事无成.webp\">\n\n### 为什么活着\n\n<img src=\"/blog/images/meme/为什么活.webp\">\n<img src=\"/blog/images/meme/号卖不掉.webp\">\n<img src=\"/blog/images/meme/了不起.webp\">\n\n### 我的现在\n\n<img src=\"/blog/images/meme/无信号.webp\">\n<img src=\"/blog/images/meme/不想麻烦别人的你.webp\">\n<img src=\"/blog/images/meme/平常的痛苦.webp\">\n<img src=\"/blog/images/meme/灵魂永远昂首挺胸.webp\">\n\n### 我的过去\n\n<img src=\"/blog/images/meme/内向仔的一生.webp\">\n<img src=\"/blog/images/meme/从刚出生说起.webp\">\n<img src=\"/blog/images/meme/改变与得过且过.webp\">\n<img src=\"/blog/images/meme/内向者联合起来.webp\">\n\n### 我的朋友\n\n<img src=\"/blog/images/meme/社恐如何交朋友.webp\">\n<img src=\"/blog/images/meme/非我也图也.webp\">\n<img src=\"/blog/images/meme/双人游戏.webp\">\n\n### 我的特长和兴趣\n\n<img src=\"/blog/images/meme/我的画笔和颜料.webp\">\n<img src=\"/blog/images/meme/超级摇滚迷.webp\">\n<img src=\"/blog/images/meme/做一个对社会有副作用的人.webp\">\n<img src=\"/blog/images/meme/鲁南精神.webp\">\n<img src=\"/blog/images/meme/最讨厌懒人.webp\">\n\n## 哲学篇\n\n### 哲学格言\n\n<img src=\"/blog/images/meme/过去和未来不存在.webp\">\n<img src=\"/blog/images/meme/哲学格言生成器.webp\">\n<img src=\"/blog/images/meme/朋友像雪花.webp\">\n\n### 说的道理\n\n<img src=\"/blog/images/meme/不是浪费时间.webp\">\n<img src=\"/blog/images/meme/一辈子不关心哲学.webp\">\n\n### 敢问路在何方\n\n<img src=\"/blog/images/meme/事儿在哪.webp\">\n<img src=\"/blog/images/meme/罗马空军基地.webp\">\n<img src=\"/blog/images/meme/欧洲用电量.webp\">\n<img src=\"/blog/images/meme/南极洲交通路线图.webp\">\n<img src=\"/blog/images/meme/关上了一扇门.webp\">\n<img src=\"/blog/images/meme/开门见山.webp\">\n<img src=\"/blog/images/meme/生活小常识.webp\">\n\n### 我和我\n\n<img src=\"/blog/images/meme/平凡的世界.webp\">\n<img src=\"/blog/images/meme/白鸟过河滩.webp\">\n\n## 能量篇\n\n### 生存所迫\n\n<img src=\"/blog/images/meme/蒜泥猫.webp\">\n<img src=\"/blog/images/meme/芬达海.webp\">\n\n### 饭还是要吃\n\n<img src=\"/blog/images/meme/禅尼丝空腹.webp\">\n<img src=\"/blog/images/meme/线粒体.webp\">\n<img src=\"/blog/images/meme/闸机.webp\">\n<img src=\"/blog/images/meme/医生远离我.webp\">\n<img src=\"/blog/images/meme/双核苹果.webp\">\n\n### 不是哥们\n\n<img src=\"/blog/images/meme/生日快乐.webp\">\n<img src=\"/blog/images/meme/害羞死了.webp\">\n<img src=\"/blog/images/meme/番茄炒你儿子.webp\">\n<img src=\"/blog/images/meme/不不不是是是.webp\">\n<img src=\"/blog/images/meme/是不是哥们.webp\">\n<img src=\"/blog/images/meme/非也兄台.webp\">\n<img src=\"/blog/images/meme/虾射手.webp\">\n<img src=\"/blog/images/meme/如此包装.webp\">\n\n### 请勿投喂\n\n<img src=\"/blog/images/meme/海鸥为我停留吧.webp\">\n<img src=\"/blog/images/meme/请勿投喂.webp\">\n\n## 爱情篇\n\n### 高情商发言\n\n<img src=\"/blog/images/meme/暖她一整天.webp\">\n<img src=\"/blog/images/meme/甜上心尖.webp\">\n<img src=\"/blog/images/meme/好多了.webp\">\n<img src=\"/blog/images/meme/毕姥爷的说话之道.webp\">\n\n### 那一夜\n\n<img src=\"/blog/images/meme/那一夜.webp\">\n<img src=\"/blog/images/meme/我接了.webp\">\n<img src=\"/blog/images/meme/25个未接电话.webp\">\n\n### 幻想时间\n\n<img src=\"/blog/images/meme/眉眼弯弯.webp\">\n<img src=\"/blog/images/meme/白铅笔.webp\">\n<img src=\"/blog/images/meme/合适的人.webp\">\n<img src=\"/blog/images/meme/注定孤独一生.webp\">\n\n### 转生之\n\n<img src=\"/blog/images/meme/半人马.webp\">\n<img src=\"/blog/images/meme/小光板.webp\">\n<img src=\"/blog/images/meme/撞大运.webp\">\n<img src=\"/blog/images/meme/漫画是假的.webp\">\n\n## 社会篇\n\n### 入大海\n\n<img src=\"/blog/images/meme/打工不仅能致富.webp\">\n<img src=\"/blog/images/meme/一条船.webp\">\n<img src=\"/blog/images/meme/猫猫碰拳.webp\">\n\n### 一日为师\n\n<img src=\"/blog/images/meme/师傅你是做什么工作的.webp\">\n<img src=\"/blog/images/meme/猫猫工作.webp\">\n\n### 时间给我答案\n\n<img src=\"/blog/images/meme/时间到了.webp\">\n<img src=\"/blog/images/meme/生活点滴.webp\">\n<img src=\"/blog/images/meme/喜欢星期五.webp\">\n<img src=\"/blog/images/meme/一周.webp\">\n\n### 小心路滑\n\n<img src=\"/blog/images/meme/小心地滑.webp\">\n<img src=\"/blog/images/meme/滑.webp\">\n<img src=\"/blog/images/meme/小心水分子.webp\">\n<img src=\"/blog/images/meme/SB110.webp\">\n<img src=\"/blog/images/meme/蓝移.webp\">\n<img src=\"/blog/images/meme/一看二慢三通过.webp\">\n<img src=\"/blog/images/meme/谁让你开得那么快.webp\">\n<img src=\"/blog/images/meme/他俩还认识.webp\">\n<img src=\"/blog/images/meme/不确定.webp\">\n<img src=\"/blog/images/meme/反拍牛顿.webp\">\n<img src=\"/blog/images/meme/烧.webp\">\n<img src=\"/blog/images/meme/灭烟台.webp\">\n\n## 小孩篇\n\n### 儿童节\n\n<img src=\"/blog/images/meme/成熟的大人.webp\">\n<img src=\"/blog/images/meme/成熟点.webp\">\n\n### 东阳马生\n\n<img src=\"/blog/images/meme/余幼时即厌学.webp\">\n<img src=\"/blog/images/meme/充电.webp\">\n<img src=\"/blog/images/meme/考试一点也不难.webp\">\n<img src=\"/blog/images/meme/写12个解.webp\">\n<img src=\"/blog/images/meme/水下无法呼吸.webp\">\n<img src=\"/blog/images/meme/大括号.webp\">\n<img src=\"/blog/images/meme/我是猴子.webp\">\n<img src=\"/blog/images/meme/青龙帮.webp\">\n<img src=\"/blog/images/meme/江湖义气.webp\">\n\n### 反方向的爹\n\n<img src=\"/blog/images/meme/到了我这个年纪.webp\">\n<img src=\"/blog/images/meme/自愿开学.webp\">\n\n### 老小子\n\n<img src=\"/blog/images/meme/好吃就行.jpg\">\n<img src=\"/blog/images/meme/打BOOS.webp\">\n<img src=\"/blog/images/meme/峰会改成自习.webp\">\n<img src=\"/blog/images/meme/年龄真的大了.webp\">\n\n## 历史篇\n\n### 往者不谏\n\n<img src=\"/blog/images/meme/现在的小孩.webp\">\n<img src=\"/blog/images/meme/重力.webp\">\n<img src=\"/blog/images/meme/摩托车.webp\">\n<img src=\"/blog/images/meme/抑郁症.webp\">\n<img src=\"/blog/images/meme/机械电锯.webp\">\n<img src=\"/blog/images/meme/垃圾桶.webp\">\n<img src=\"/blog/images/meme/弓箭.webp\">\n\n### 关键时刻\n\n<img src=\"/blog/images/meme/关键时刻.webp\">\n\n### 天下大势\n\n<img src=\"/blog/images/meme/你最害怕什么.webp\">\n<img src=\"/blog/images/meme/永远的家.webp\">\n<img src=\"/blog/images/meme/我爱我家.webp\">\n<img src=\"/blog/images/meme/身在福中不知福.webp\">\n\n### 来者可追\n\n<img src=\"/blog/images/meme/分支.webp\">\n<img src=\"/blog/images/meme/王八蛋.webp\">\n<img src=\"/blog/images/meme/未来是走那边.webp\">\n\n## 破壁篇\n\n### 对话\n\n<img src=\"/blog/images/meme/互联网的尽头.webp\">\n<img src=\"/blog/images/meme/wifi.webp\">\n<img src=\"/blog/images/meme/给你薯条.webp\">\n<img src=\"/blog/images/meme/笑容.webp\">\n<img src=\"/blog/images/meme/你也值得被爱.webp\">\n\n### 独立思考\n\n<img src=\"/blog/images/meme/没人知道你是一条狗.webp\">\n<img src=\"/blog/images/meme/脑控.webp\">\n<img src=\"/blog/images/meme/字幕没有加描边.webp\">\n<img src=\"/blog/images/meme/大熊猫吃火锅.webp\">\n\n### 辩证\n\n<img src=\"/blog/images/meme/墨菲定律.webp\">\n\n### 这\n\n<div class=\"demo\">\n<img src=\"/blog/images/meme/排版.webp\">\n<p>不会弄乱我的排版</p>\n</div>\n<div class=\"demo\"></p>对<p></p>吧<p></p>？</div>\n<style>\n#pb {\n  display: flex;\n  align-items: center;\n  justify-content:space-between;\n}\n.demo{\n    display:-webkit-box;\n    display:-webkit-flex;\n    display:-ms-flexbox;\n    display:flex;\n    align-items: center;\n    -webkit-box-pack:justify;\n    -webkit-justify-content:space-between;\n    -ms-flex-pack:justify;\n    justify-content:space-between;\n    font-size:1.25em;\n    font-weight:bold;\n}\n</style>\n<img src=\"/blog/images/meme/网卡.webp\">\n\n## 自勉篇\n\n### 地平论\n\n<img src=\"/blog/images/meme/穿越.webp\">\n\n### 健康之路\n\n<img src=\"/blog/images/meme/蔬菜去农药残留.webp\">\n<img src=\"/blog/images/meme/从不运动的我.webp\">\n<img src=\"/blog/images/meme/离你家超级远.webp\">\n\n### 修养生息\n\n<img src=\"/blog/images/meme/老虎卷.webp\">\n<img src=\"/blog/images/meme/睡5个小时.webp\">\n<img src=\"/blog/images/meme/12点之前睡着.webp\">\n<img src=\"/blog/images/meme/熬夜的原因.webp\">\n<img src=\"/blog/images/meme/最美好的四个小时.webp\">\n\n### 辞旧迎新\n\n<img src=\"/blog/images/meme/解冻.webp\">\n<img src=\"/blog/images/meme/四个星期后的超市.webp\">\n<img src=\"/blog/images/meme/几个星期后我的家.webp\">\n<img src=\"/blog/images/meme/随500.webp\">\n<img src=\"/blog/images/meme/随6500.webp\">\n<img src=\"/blog/images/meme/中式恐怖.webp\">\n","slug":"MEME图合订本","published":1,"updated":"2025-09-22T13:39:31.920Z","__permalink":"meme.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnf00065ws626rreb4s","content":"<p>小清一波库存。</p>\n<h2 id=\"自嘲篇\">自嘲篇</h2>\n<h3 id=\"下好生活这盘棋\">下好生活这盘棋</h3>\n<p><img src=\"/blog/images/meme/我不会下国际象棋.webp\">\n<img src=\"/blog/images/meme/下大棋.webp\"></p>\n<h3 id=\"我的未来\">我的未来</h3>\n<p><img src=\"/blog/images/meme/我的未来全是禁止通行.webp\">\n<img src=\"/blog/images/meme/没有转角的人生.webp\">\n<img src=\"/blog/images/meme/找得到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/找不到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/收集大半辈子表情包.webp\">\n<img src=\"/blog/images/meme/100级的一事无成.webp\"></p>\n<h3 id=\"为什么活着\">为什么活着</h3>\n<p><img src=\"/blog/images/meme/为什么活.webp\">\n<img src=\"/blog/images/meme/号卖不掉.webp\">\n<img src=\"/blog/images/meme/了不起.webp\"></p>\n<h3 id=\"我的现在\">我的现在</h3>\n<p><img src=\"/blog/images/meme/无信号.webp\">\n<img src=\"/blog/images/meme/不想麻烦别人的你.webp\">\n<img src=\"/blog/images/meme/平常的痛苦.webp\">\n<img src=\"/blog/images/meme/灵魂永远昂首挺胸.webp\"></p>\n<h3 id=\"我的过去\">我的过去</h3>\n<p><img src=\"/blog/images/meme/内向仔的一生.webp\">\n<img src=\"/blog/images/meme/从刚出生说起.webp\">\n<img src=\"/blog/images/meme/改变与得过且过.webp\">\n<img src=\"/blog/images/meme/内向者联合起来.webp\"></p>\n<h3 id=\"我的朋友\">我的朋友</h3>\n<p><img src=\"/blog/images/meme/社恐如何交朋友.webp\">\n<img src=\"/blog/images/meme/非我也图也.webp\">\n<img src=\"/blog/images/meme/双人游戏.webp\"></p>\n<h3 id=\"我的特长和兴趣\">我的特长和兴趣</h3>\n<p><img src=\"/blog/images/meme/我的画笔和颜料.webp\">\n<img src=\"/blog/images/meme/超级摇滚迷.webp\">\n<img src=\"/blog/images/meme/做一个对社会有副作用的人.webp\">\n<img src=\"/blog/images/meme/鲁南精神.webp\">\n<img src=\"/blog/images/meme/最讨厌懒人.webp\"></p>\n<h2 id=\"哲学篇\">哲学篇</h2>\n<h3 id=\"哲学格言\">哲学格言</h3>\n<p><img src=\"/blog/images/meme/过去和未来不存在.webp\">\n<img src=\"/blog/images/meme/哲学格言生成器.webp\">\n<img src=\"/blog/images/meme/朋友像雪花.webp\"></p>\n<h3 id=\"说的道理\">说的道理</h3>\n<p><img src=\"/blog/images/meme/不是浪费时间.webp\">\n<img src=\"/blog/images/meme/一辈子不关心哲学.webp\"></p>\n<h3 id=\"敢问路在何方\">敢问路在何方</h3>\n<p><img src=\"/blog/images/meme/事儿在哪.webp\">\n<img src=\"/blog/images/meme/罗马空军基地.webp\">\n<img src=\"/blog/images/meme/欧洲用电量.webp\">\n<img src=\"/blog/images/meme/南极洲交通路线图.webp\">\n<img src=\"/blog/images/meme/关上了一扇门.webp\">\n<img src=\"/blog/images/meme/开门见山.webp\">\n<img src=\"/blog/images/meme/生活小常识.webp\"></p>\n<h3 id=\"我和我\">我和我</h3>\n<p><img src=\"/blog/images/meme/平凡的世界.webp\">\n<img src=\"/blog/images/meme/白鸟过河滩.webp\"></p>\n<h2 id=\"能量篇\">能量篇</h2>\n<h3 id=\"生存所迫\">生存所迫</h3>\n<p><img src=\"/blog/images/meme/蒜泥猫.webp\">\n<img src=\"/blog/images/meme/芬达海.webp\"></p>\n<h3 id=\"饭还是要吃\">饭还是要吃</h3>\n<p><img src=\"/blog/images/meme/禅尼丝空腹.webp\">\n<img src=\"/blog/images/meme/线粒体.webp\">\n<img src=\"/blog/images/meme/闸机.webp\">\n<img src=\"/blog/images/meme/医生远离我.webp\">\n<img src=\"/blog/images/meme/双核苹果.webp\"></p>\n<h3 id=\"不是哥们\">不是哥们</h3>\n<p><img src=\"/blog/images/meme/生日快乐.webp\">\n<img src=\"/blog/images/meme/害羞死了.webp\">\n<img src=\"/blog/images/meme/番茄炒你儿子.webp\">\n<img src=\"/blog/images/meme/不不不是是是.webp\">\n<img src=\"/blog/images/meme/是不是哥们.webp\">\n<img src=\"/blog/images/meme/非也兄台.webp\">\n<img src=\"/blog/images/meme/虾射手.webp\">\n<img src=\"/blog/images/meme/如此包装.webp\"></p>\n<h3 id=\"请勿投喂\">请勿投喂</h3>\n<p><img src=\"/blog/images/meme/海鸥为我停留吧.webp\">\n<img src=\"/blog/images/meme/请勿投喂.webp\"></p>\n<h2 id=\"爱情篇\">爱情篇</h2>\n<h3 id=\"高情商发言\">高情商发言</h3>\n<p><img src=\"/blog/images/meme/暖她一整天.webp\">\n<img src=\"/blog/images/meme/甜上心尖.webp\">\n<img src=\"/blog/images/meme/好多了.webp\">\n<img src=\"/blog/images/meme/毕姥爷的说话之道.webp\"></p>\n<h3 id=\"那一夜\">那一夜</h3>\n<p><img src=\"/blog/images/meme/那一夜.webp\">\n<img src=\"/blog/images/meme/我接了.webp\">\n<img src=\"/blog/images/meme/25个未接电话.webp\"></p>\n<h3 id=\"幻想时间\">幻想时间</h3>\n<p><img src=\"/blog/images/meme/眉眼弯弯.webp\">\n<img src=\"/blog/images/meme/白铅笔.webp\">\n<img src=\"/blog/images/meme/合适的人.webp\">\n<img src=\"/blog/images/meme/注定孤独一生.webp\"></p>\n<h3 id=\"转生之\">转生之</h3>\n<p><img src=\"/blog/images/meme/半人马.webp\">\n<img src=\"/blog/images/meme/小光板.webp\">\n<img src=\"/blog/images/meme/撞大运.webp\">\n<img src=\"/blog/images/meme/漫画是假的.webp\"></p>\n<h2 id=\"社会篇\">社会篇</h2>\n<h3 id=\"入大海\">入大海</h3>\n<p><img src=\"/blog/images/meme/打工不仅能致富.webp\">\n<img src=\"/blog/images/meme/一条船.webp\">\n<img src=\"/blog/images/meme/猫猫碰拳.webp\"></p>\n<h3 id=\"一日为师\">一日为师</h3>\n<p><img src=\"/blog/images/meme/师傅你是做什么工作的.webp\">\n<img src=\"/blog/images/meme/猫猫工作.webp\"></p>\n<h3 id=\"时间给我答案\">时间给我答案</h3>\n<p><img src=\"/blog/images/meme/时间到了.webp\">\n<img src=\"/blog/images/meme/生活点滴.webp\">\n<img src=\"/blog/images/meme/喜欢星期五.webp\">\n<img src=\"/blog/images/meme/一周.webp\"></p>\n<h3 id=\"小心路滑\">小心路滑</h3>\n<p><img src=\"/blog/images/meme/小心地滑.webp\">\n<img src=\"/blog/images/meme/滑.webp\">\n<img src=\"/blog/images/meme/小心水分子.webp\">\n<img src=\"/blog/images/meme/SB110.webp\">\n<img src=\"/blog/images/meme/蓝移.webp\">\n<img src=\"/blog/images/meme/一看二慢三通过.webp\">\n<img src=\"/blog/images/meme/谁让你开得那么快.webp\">\n<img src=\"/blog/images/meme/他俩还认识.webp\">\n<img src=\"/blog/images/meme/不确定.webp\">\n<img src=\"/blog/images/meme/反拍牛顿.webp\">\n<img src=\"/blog/images/meme/烧.webp\">\n<img src=\"/blog/images/meme/灭烟台.webp\"></p>\n<h2 id=\"小孩篇\">小孩篇</h2>\n<h3 id=\"儿童节\">儿童节</h3>\n<p><img src=\"/blog/images/meme/成熟的大人.webp\">\n<img src=\"/blog/images/meme/成熟点.webp\"></p>\n<h3 id=\"东阳马生\">东阳马生</h3>\n<p><img src=\"/blog/images/meme/余幼时即厌学.webp\">\n<img src=\"/blog/images/meme/充电.webp\">\n<img src=\"/blog/images/meme/考试一点也不难.webp\">\n<img src=\"/blog/images/meme/写12个解.webp\">\n<img src=\"/blog/images/meme/水下无法呼吸.webp\">\n<img src=\"/blog/images/meme/大括号.webp\">\n<img src=\"/blog/images/meme/我是猴子.webp\">\n<img src=\"/blog/images/meme/青龙帮.webp\">\n<img src=\"/blog/images/meme/江湖义气.webp\"></p>\n<h3 id=\"反方向的爹\">反方向的爹</h3>\n<p><img src=\"/blog/images/meme/到了我这个年纪.webp\">\n<img src=\"/blog/images/meme/自愿开学.webp\"></p>\n<h3 id=\"老小子\">老小子</h3>\n<p><img src=\"/blog/images/meme/好吃就行.jpg\">\n<img src=\"/blog/images/meme/打BOOS.webp\">\n<img src=\"/blog/images/meme/峰会改成自习.webp\">\n<img src=\"/blog/images/meme/年龄真的大了.webp\"></p>\n<h2 id=\"历史篇\">历史篇</h2>\n<h3 id=\"往者不谏\">往者不谏</h3>\n<p><img src=\"/blog/images/meme/现在的小孩.webp\">\n<img src=\"/blog/images/meme/重力.webp\">\n<img src=\"/blog/images/meme/摩托车.webp\">\n<img src=\"/blog/images/meme/抑郁症.webp\">\n<img src=\"/blog/images/meme/机械电锯.webp\">\n<img src=\"/blog/images/meme/垃圾桶.webp\">\n<img src=\"/blog/images/meme/弓箭.webp\"></p>\n<h3 id=\"关键时刻\">关键时刻</h3>\n<p><img src=\"/blog/images/meme/关键时刻.webp\"></p>\n<h3 id=\"天下大势\">天下大势</h3>\n<p><img src=\"/blog/images/meme/你最害怕什么.webp\">\n<img src=\"/blog/images/meme/永远的家.webp\">\n<img src=\"/blog/images/meme/我爱我家.webp\">\n<img src=\"/blog/images/meme/身在福中不知福.webp\"></p>\n<h3 id=\"来者可追\">来者可追</h3>\n<p><img src=\"/blog/images/meme/分支.webp\">\n<img src=\"/blog/images/meme/王八蛋.webp\">\n<img src=\"/blog/images/meme/未来是走那边.webp\"></p>\n<h2 id=\"破壁篇\">破壁篇</h2>\n<h3 id=\"对话\">对话</h3>\n<p><img src=\"/blog/images/meme/互联网的尽头.webp\">\n<img src=\"/blog/images/meme/wifi.webp\">\n<img src=\"/blog/images/meme/给你薯条.webp\">\n<img src=\"/blog/images/meme/笑容.webp\">\n<img src=\"/blog/images/meme/你也值得被爱.webp\"></p>\n<h3 id=\"独立思考\">独立思考</h3>\n<p><img src=\"/blog/images/meme/没人知道你是一条狗.webp\">\n<img src=\"/blog/images/meme/脑控.webp\">\n<img src=\"/blog/images/meme/字幕没有加描边.webp\">\n<img src=\"/blog/images/meme/大熊猫吃火锅.webp\"></p>\n<h3 id=\"辩证\">辩证</h3>\n<p><img src=\"/blog/images/meme/墨菲定律.webp\"></p>\n<h3 id=\"这\">这</h3>\n<div class=\"demo\">\n<img src=\"/blog/images/meme/排版.webp\">\n<p>\n不会弄乱我的排版\n</p>\n</div>\n<div class=\"demo\">\n<p></p>\n对\n<p>\n</p>\n吧\n<p>\n</p>\n？\n</div>\n<style>\n#pb {\n  display: flex;\n  align-items: center;\n  justify-content:space-between;\n}\n.demo{\n    display:-webkit-box;\n    display:-webkit-flex;\n    display:-ms-flexbox;\n    display:flex;\n    align-items: center;\n    -webkit-box-pack:justify;\n    -webkit-justify-content:space-between;\n    -ms-flex-pack:justify;\n    justify-content:space-between;\n    font-size:1.25em;\n    font-weight:bold;\n}\n</style>\n<p><img src=\"/blog/images/meme/网卡.webp\"></p>\n<h2 id=\"自勉篇\">自勉篇</h2>\n<h3 id=\"地平论\">地平论</h3>\n<p><img src=\"/blog/images/meme/穿越.webp\"></p>\n<h3 id=\"健康之路\">健康之路</h3>\n<p><img src=\"/blog/images/meme/蔬菜去农药残留.webp\">\n<img src=\"/blog/images/meme/从不运动的我.webp\">\n<img src=\"/blog/images/meme/离你家超级远.webp\"></p>\n<h3 id=\"修养生息\">修养生息</h3>\n<p><img src=\"/blog/images/meme/老虎卷.webp\">\n<img src=\"/blog/images/meme/睡5个小时.webp\">\n<img src=\"/blog/images/meme/12点之前睡着.webp\">\n<img src=\"/blog/images/meme/熬夜的原因.webp\">\n<img src=\"/blog/images/meme/最美好的四个小时.webp\"></p>\n<h3 id=\"辞旧迎新\">辞旧迎新</h3>\n<p><img src=\"/blog/images/meme/解冻.webp\">\n<img src=\"/blog/images/meme/四个星期后的超市.webp\">\n<img src=\"/blog/images/meme/几个星期后我的家.webp\">\n<img src=\"/blog/images/meme/随500.webp\">\n<img src=\"/blog/images/meme/随6500.webp\">\n<img src=\"/blog/images/meme/中式恐怖.webp\"></p>\n","excerpt":"","more":"<p>小清一波库存。</p>\n<h2 id=\"自嘲篇\">自嘲篇</h2>\n<h3 id=\"下好生活这盘棋\">下好生活这盘棋</h3>\n<p><img src=\"/blog/images/meme/我不会下国际象棋.webp\">\n<img src=\"/blog/images/meme/下大棋.webp\"></p>\n<h3 id=\"我的未来\">我的未来</h3>\n<p><img src=\"/blog/images/meme/我的未来全是禁止通行.webp\">\n<img src=\"/blog/images/meme/没有转角的人生.webp\">\n<img src=\"/blog/images/meme/找得到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/找不到出路的魔方脸.webp\">\n<img src=\"/blog/images/meme/收集大半辈子表情包.webp\">\n<img src=\"/blog/images/meme/100级的一事无成.webp\"></p>\n<h3 id=\"为什么活着\">为什么活着</h3>\n<p><img src=\"/blog/images/meme/为什么活.webp\">\n<img src=\"/blog/images/meme/号卖不掉.webp\">\n<img src=\"/blog/images/meme/了不起.webp\"></p>\n<h3 id=\"我的现在\">我的现在</h3>\n<p><img src=\"/blog/images/meme/无信号.webp\">\n<img src=\"/blog/images/meme/不想麻烦别人的你.webp\">\n<img src=\"/blog/images/meme/平常的痛苦.webp\">\n<img src=\"/blog/images/meme/灵魂永远昂首挺胸.webp\"></p>\n<h3 id=\"我的过去\">我的过去</h3>\n<p><img src=\"/blog/images/meme/内向仔的一生.webp\">\n<img src=\"/blog/images/meme/从刚出生说起.webp\">\n<img src=\"/blog/images/meme/改变与得过且过.webp\">\n<img src=\"/blog/images/meme/内向者联合起来.webp\"></p>\n<h3 id=\"我的朋友\">我的朋友</h3>\n<p><img src=\"/blog/images/meme/社恐如何交朋友.webp\">\n<img src=\"/blog/images/meme/非我也图也.webp\">\n<img src=\"/blog/images/meme/双人游戏.webp\"></p>\n<h3 id=\"我的特长和兴趣\">我的特长和兴趣</h3>\n<p><img src=\"/blog/images/meme/我的画笔和颜料.webp\">\n<img src=\"/blog/images/meme/超级摇滚迷.webp\">\n<img src=\"/blog/images/meme/做一个对社会有副作用的人.webp\">\n<img src=\"/blog/images/meme/鲁南精神.webp\">\n<img src=\"/blog/images/meme/最讨厌懒人.webp\"></p>\n<h2 id=\"哲学篇\">哲学篇</h2>\n<h3 id=\"哲学格言\">哲学格言</h3>\n<p><img src=\"/blog/images/meme/过去和未来不存在.webp\">\n<img src=\"/blog/images/meme/哲学格言生成器.webp\">\n<img src=\"/blog/images/meme/朋友像雪花.webp\"></p>\n<h3 id=\"说的道理\">说的道理</h3>\n<p><img src=\"/blog/images/meme/不是浪费时间.webp\">\n<img src=\"/blog/images/meme/一辈子不关心哲学.webp\"></p>\n<h3 id=\"敢问路在何方\">敢问路在何方</h3>\n<p><img src=\"/blog/images/meme/事儿在哪.webp\">\n<img src=\"/blog/images/meme/罗马空军基地.webp\">\n<img src=\"/blog/images/meme/欧洲用电量.webp\">\n<img src=\"/blog/images/meme/南极洲交通路线图.webp\">\n<img src=\"/blog/images/meme/关上了一扇门.webp\">\n<img src=\"/blog/images/meme/开门见山.webp\">\n<img src=\"/blog/images/meme/生活小常识.webp\"></p>\n<h3 id=\"我和我\">我和我</h3>\n<p><img src=\"/blog/images/meme/平凡的世界.webp\">\n<img src=\"/blog/images/meme/白鸟过河滩.webp\"></p>\n<h2 id=\"能量篇\">能量篇</h2>\n<h3 id=\"生存所迫\">生存所迫</h3>\n<p><img src=\"/blog/images/meme/蒜泥猫.webp\">\n<img src=\"/blog/images/meme/芬达海.webp\"></p>\n<h3 id=\"饭还是要吃\">饭还是要吃</h3>\n<p><img src=\"/blog/images/meme/禅尼丝空腹.webp\">\n<img src=\"/blog/images/meme/线粒体.webp\">\n<img src=\"/blog/images/meme/闸机.webp\">\n<img src=\"/blog/images/meme/医生远离我.webp\">\n<img src=\"/blog/images/meme/双核苹果.webp\"></p>\n<h3 id=\"不是哥们\">不是哥们</h3>\n<p><img src=\"/blog/images/meme/生日快乐.webp\">\n<img src=\"/blog/images/meme/害羞死了.webp\">\n<img src=\"/blog/images/meme/番茄炒你儿子.webp\">\n<img src=\"/blog/images/meme/不不不是是是.webp\">\n<img src=\"/blog/images/meme/是不是哥们.webp\">\n<img src=\"/blog/images/meme/非也兄台.webp\">\n<img src=\"/blog/images/meme/虾射手.webp\">\n<img src=\"/blog/images/meme/如此包装.webp\"></p>\n<h3 id=\"请勿投喂\">请勿投喂</h3>\n<p><img src=\"/blog/images/meme/海鸥为我停留吧.webp\">\n<img src=\"/blog/images/meme/请勿投喂.webp\"></p>\n<h2 id=\"爱情篇\">爱情篇</h2>\n<h3 id=\"高情商发言\">高情商发言</h3>\n<p><img src=\"/blog/images/meme/暖她一整天.webp\">\n<img src=\"/blog/images/meme/甜上心尖.webp\">\n<img src=\"/blog/images/meme/好多了.webp\">\n<img src=\"/blog/images/meme/毕姥爷的说话之道.webp\"></p>\n<h3 id=\"那一夜\">那一夜</h3>\n<p><img src=\"/blog/images/meme/那一夜.webp\">\n<img src=\"/blog/images/meme/我接了.webp\">\n<img src=\"/blog/images/meme/25个未接电话.webp\"></p>\n<h3 id=\"幻想时间\">幻想时间</h3>\n<p><img src=\"/blog/images/meme/眉眼弯弯.webp\">\n<img src=\"/blog/images/meme/白铅笔.webp\">\n<img src=\"/blog/images/meme/合适的人.webp\">\n<img src=\"/blog/images/meme/注定孤独一生.webp\"></p>\n<h3 id=\"转生之\">转生之</h3>\n<p><img src=\"/blog/images/meme/半人马.webp\">\n<img src=\"/blog/images/meme/小光板.webp\">\n<img src=\"/blog/images/meme/撞大运.webp\">\n<img src=\"/blog/images/meme/漫画是假的.webp\"></p>\n<h2 id=\"社会篇\">社会篇</h2>\n<h3 id=\"入大海\">入大海</h3>\n<p><img src=\"/blog/images/meme/打工不仅能致富.webp\">\n<img src=\"/blog/images/meme/一条船.webp\">\n<img src=\"/blog/images/meme/猫猫碰拳.webp\"></p>\n<h3 id=\"一日为师\">一日为师</h3>\n<p><img src=\"/blog/images/meme/师傅你是做什么工作的.webp\">\n<img src=\"/blog/images/meme/猫猫工作.webp\"></p>\n<h3 id=\"时间给我答案\">时间给我答案</h3>\n<p><img src=\"/blog/images/meme/时间到了.webp\">\n<img src=\"/blog/images/meme/生活点滴.webp\">\n<img src=\"/blog/images/meme/喜欢星期五.webp\">\n<img src=\"/blog/images/meme/一周.webp\"></p>\n<h3 id=\"小心路滑\">小心路滑</h3>\n<p><img src=\"/blog/images/meme/小心地滑.webp\">\n<img src=\"/blog/images/meme/滑.webp\">\n<img src=\"/blog/images/meme/小心水分子.webp\">\n<img src=\"/blog/images/meme/SB110.webp\">\n<img src=\"/blog/images/meme/蓝移.webp\">\n<img src=\"/blog/images/meme/一看二慢三通过.webp\">\n<img src=\"/blog/images/meme/谁让你开得那么快.webp\">\n<img src=\"/blog/images/meme/他俩还认识.webp\">\n<img src=\"/blog/images/meme/不确定.webp\">\n<img src=\"/blog/images/meme/反拍牛顿.webp\">\n<img src=\"/blog/images/meme/烧.webp\">\n<img src=\"/blog/images/meme/灭烟台.webp\"></p>\n<h2 id=\"小孩篇\">小孩篇</h2>\n<h3 id=\"儿童节\">儿童节</h3>\n<p><img src=\"/blog/images/meme/成熟的大人.webp\">\n<img src=\"/blog/images/meme/成熟点.webp\"></p>\n<h3 id=\"东阳马生\">东阳马生</h3>\n<p><img src=\"/blog/images/meme/余幼时即厌学.webp\">\n<img src=\"/blog/images/meme/充电.webp\">\n<img src=\"/blog/images/meme/考试一点也不难.webp\">\n<img src=\"/blog/images/meme/写12个解.webp\">\n<img src=\"/blog/images/meme/水下无法呼吸.webp\">\n<img src=\"/blog/images/meme/大括号.webp\">\n<img src=\"/blog/images/meme/我是猴子.webp\">\n<img src=\"/blog/images/meme/青龙帮.webp\">\n<img src=\"/blog/images/meme/江湖义气.webp\"></p>\n<h3 id=\"反方向的爹\">反方向的爹</h3>\n<p><img src=\"/blog/images/meme/到了我这个年纪.webp\">\n<img src=\"/blog/images/meme/自愿开学.webp\"></p>\n<h3 id=\"老小子\">老小子</h3>\n<p><img src=\"/blog/images/meme/好吃就行.jpg\">\n<img src=\"/blog/images/meme/打BOOS.webp\">\n<img src=\"/blog/images/meme/峰会改成自习.webp\">\n<img src=\"/blog/images/meme/年龄真的大了.webp\"></p>\n<h2 id=\"历史篇\">历史篇</h2>\n<h3 id=\"往者不谏\">往者不谏</h3>\n<p><img src=\"/blog/images/meme/现在的小孩.webp\">\n<img src=\"/blog/images/meme/重力.webp\">\n<img src=\"/blog/images/meme/摩托车.webp\">\n<img src=\"/blog/images/meme/抑郁症.webp\">\n<img src=\"/blog/images/meme/机械电锯.webp\">\n<img src=\"/blog/images/meme/垃圾桶.webp\">\n<img src=\"/blog/images/meme/弓箭.webp\"></p>\n<h3 id=\"关键时刻\">关键时刻</h3>\n<p><img src=\"/blog/images/meme/关键时刻.webp\"></p>\n<h3 id=\"天下大势\">天下大势</h3>\n<p><img src=\"/blog/images/meme/你最害怕什么.webp\">\n<img src=\"/blog/images/meme/永远的家.webp\">\n<img src=\"/blog/images/meme/我爱我家.webp\">\n<img src=\"/blog/images/meme/身在福中不知福.webp\"></p>\n<h3 id=\"来者可追\">来者可追</h3>\n<p><img src=\"/blog/images/meme/分支.webp\">\n<img src=\"/blog/images/meme/王八蛋.webp\">\n<img src=\"/blog/images/meme/未来是走那边.webp\"></p>\n<h2 id=\"破壁篇\">破壁篇</h2>\n<h3 id=\"对话\">对话</h3>\n<p><img src=\"/blog/images/meme/互联网的尽头.webp\">\n<img src=\"/blog/images/meme/wifi.webp\">\n<img src=\"/blog/images/meme/给你薯条.webp\">\n<img src=\"/blog/images/meme/笑容.webp\">\n<img src=\"/blog/images/meme/你也值得被爱.webp\"></p>\n<h3 id=\"独立思考\">独立思考</h3>\n<p><img src=\"/blog/images/meme/没人知道你是一条狗.webp\">\n<img src=\"/blog/images/meme/脑控.webp\">\n<img src=\"/blog/images/meme/字幕没有加描边.webp\">\n<img src=\"/blog/images/meme/大熊猫吃火锅.webp\"></p>\n<h3 id=\"辩证\">辩证</h3>\n<p><img src=\"/blog/images/meme/墨菲定律.webp\"></p>\n<h3 id=\"这\">这</h3>\n<div class=\"demo\">\n<img src=\"/blog/images/meme/排版.webp\">\n<p>\n不会弄乱我的排版\n</p>\n</div>\n<div class=\"demo\">\n<p></p>\n对\n<p>\n</p>\n吧\n<p>\n</p>\n？\n</div>\n<style>\n#pb {\n  display: flex;\n  align-items: center;\n  justify-content:space-between;\n}\n.demo{\n    display:-webkit-box;\n    display:-webkit-flex;\n    display:-ms-flexbox;\n    display:flex;\n    align-items: center;\n    -webkit-box-pack:justify;\n    -webkit-justify-content:space-between;\n    -ms-flex-pack:justify;\n    justify-content:space-between;\n    font-size:1.25em;\n    font-weight:bold;\n}\n</style>\n<p><img src=\"/blog/images/meme/网卡.webp\"></p>\n<h2 id=\"自勉篇\">自勉篇</h2>\n<h3 id=\"地平论\">地平论</h3>\n<p><img src=\"/blog/images/meme/穿越.webp\"></p>\n<h3 id=\"健康之路\">健康之路</h3>\n<p><img src=\"/blog/images/meme/蔬菜去农药残留.webp\">\n<img src=\"/blog/images/meme/从不运动的我.webp\">\n<img src=\"/blog/images/meme/离你家超级远.webp\"></p>\n<h3 id=\"修养生息\">修养生息</h3>\n<p><img src=\"/blog/images/meme/老虎卷.webp\">\n<img src=\"/blog/images/meme/睡5个小时.webp\">\n<img src=\"/blog/images/meme/12点之前睡着.webp\">\n<img src=\"/blog/images/meme/熬夜的原因.webp\">\n<img src=\"/blog/images/meme/最美好的四个小时.webp\"></p>\n<h3 id=\"辞旧迎新\">辞旧迎新</h3>\n<p><img src=\"/blog/images/meme/解冻.webp\">\n<img src=\"/blog/images/meme/四个星期后的超市.webp\">\n<img src=\"/blog/images/meme/几个星期后我的家.webp\">\n<img src=\"/blog/images/meme/随500.webp\">\n<img src=\"/blog/images/meme/随6500.webp\">\n<img src=\"/blog/images/meme/中式恐怖.webp\"></p>\n"},{"title":"Win10 Dolphin 模拟器连接 Wii 手柄教程","date":"2024-10-13T11:00:00.000Z","_content":"\n手柄 --> 蓝牙适配器 --> 蓝牙驱动 --> 操作系统 --> 模拟器\n\n- 第一个箭头：同时按手柄的 1 和 2 键，或者后盖里面的 SYNC 按钮。这时手柄的四个灯会一起闪\n- 蓝牙适配器：使用 [Zadig](https://zadig.akeo.ie/) 查看蓝牙适配器的 USB ID 和驱动程序版本，Options -> List All Devices\n\n## 直通模式\n\n0. 在[Bluetooth Passthrough](https://wiki.dolphin-emu.org/index.php?title=Bluetooth_Passthrough#Adapter_test_results)的 Adapter test results 表格查看硬件测试结果，需要一个型号匹配的蓝牙适配器\n1. 使用 Zadig 把蓝牙适配器的驱动改成 libusbK\n   - 如果想要恢复原来的驱动：\n     1. 右击开始图标 -> 设备管理器 -> libusbK USB Devices -> 卸载设备\n     2. 操作 -> 扫描检测硬件改动\n2. 打开一个游戏\n3. Dolphin 模拟器 -> 控制器\n\n<img src=\"/blog/images/wii-remote.webp\">\n\n4. 点击“同步”，再同时按手柄的 1 和 2 键\n5. 连上的标志是手柄变成只有一个灯亮，按连接的顺序，第一个连接的手柄是 1P，亮第一个灯\n\n## 模拟模式\n\n参考：[Configuring Controllers](https://wiki.dolphin-emu.org/index.php?title=Configuring_Controllers#Real_Wii_Remote)\n\n## 手柄离灯条的距离\n\n据笔者并不怎么精确的测量，手柄前端相对于灯条的水平方向向前 80cm 处，竖直方向向下 30cm 处为宜，手柄从下往上对着灯条照。\n\n<img src=\"/blog/images/wii-remote-2.webp\">\n\n## 存档转移\n\n- Win\n  - 查看游戏 ID：右键属性 -> 信息，如 RNVW01 (00010000524e5657)\n  - 导入导出：工具\n- 安卓\n  - 导入存档：右上角三个点 -> Import Wii Save\n  - 导出：设置 -> Config -> User Data\n- 手动导入导出\n  - Win 的存档路径在：\n  ```\n  C:\\Users\\yourname\\Documents\\Dolphin Emulator\\Wii\\title\n  ```\n  - 安卓的存档路径在：\n  ```\n  /sdcard/Android/data/org.dolphinemu.dolphinemu/files/Wii/title/\n  ```\n","source":"_posts/Win10 Dolphin模拟器连接Wii手柄教程.md","raw":"---\ntitle: Win10 Dolphin模拟器连接Wii手柄教程\ndate: 2024-10-13 19:00:00\npermalink: win10-dolphin-wii.html\n---\n\n手柄 --> 蓝牙适配器 --> 蓝牙驱动 --> 操作系统 --> 模拟器\n\n- 第一个箭头：同时按手柄的 1 和 2 键，或者后盖里面的 SYNC 按钮。这时手柄的四个灯会一起闪\n- 蓝牙适配器：使用 [Zadig](https://zadig.akeo.ie/) 查看蓝牙适配器的 USB ID 和驱动程序版本，Options -> List All Devices\n\n## 直通模式\n\n0. 在[Bluetooth Passthrough](https://wiki.dolphin-emu.org/index.php?title=Bluetooth_Passthrough#Adapter_test_results)的 Adapter test results 表格查看硬件测试结果，需要一个型号匹配的蓝牙适配器\n1. 使用 Zadig 把蓝牙适配器的驱动改成 libusbK\n   - 如果想要恢复原来的驱动：\n     1. 右击开始图标 -> 设备管理器 -> libusbK USB Devices -> 卸载设备\n     2. 操作 -> 扫描检测硬件改动\n2. 打开一个游戏\n3. Dolphin 模拟器 -> 控制器\n\n<img src=\"/blog/images/wii-remote.webp\">\n\n4. 点击“同步”，再同时按手柄的 1 和 2 键\n5. 连上的标志是手柄变成只有一个灯亮，按连接的顺序，第一个连接的手柄是 1P，亮第一个灯\n\n## 模拟模式\n\n参考：[Configuring Controllers](https://wiki.dolphin-emu.org/index.php?title=Configuring_Controllers#Real_Wii_Remote)\n\n## 手柄离灯条的距离\n\n据笔者并不怎么精确的测量，手柄前端相对于灯条的水平方向向前 80cm 处，竖直方向向下 30cm 处为宜，手柄从下往上对着灯条照。\n\n<img src=\"/blog/images/wii-remote-2.webp\">\n\n## 存档转移\n\n- Win\n  - 查看游戏 ID：右键属性 -> 信息，如 RNVW01 (00010000524e5657)\n  - 导入导出：工具\n- 安卓\n  - 导入存档：右上角三个点 -> Import Wii Save\n  - 导出：设置 -> Config -> User Data\n- 手动导入导出\n  - Win 的存档路径在：\n  ```\n  C:\\Users\\yourname\\Documents\\Dolphin Emulator\\Wii\\title\n  ```\n  - 安卓的存档路径在：\n  ```\n  /sdcard/Android/data/org.dolphinemu.dolphinemu/files/Wii/title/\n  ```\n","slug":"Win10 Dolphin模拟器连接Wii手柄教程","published":1,"updated":"2025-09-14T14:49:42.235Z","__permalink":"win10-dolphin-wii.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnf00075ws6d1ofbdbb","content":"<p>手柄 --&gt; 蓝牙适配器 --&gt; 蓝牙驱动 --&gt; 操作系统 --&gt;\n模拟器</p>\n<ul>\n<li>第一个箭头：同时按手柄的 1 和 2 键，或者后盖里面的 SYNC\n按钮。这时手柄的四个灯会一起闪</li>\n<li>蓝牙适配器：使用 <a href=\"https://zadig.akeo.ie/\">Zadig</a>\n查看蓝牙适配器的 USB ID 和驱动程序版本，Options -&gt; List All\nDevices</li>\n</ul>\n<h2 id=\"直通模式\">直通模式</h2>\n<ol start=\"0\" type=\"1\">\n<li>在 <a href=\"https://wiki.dolphin-emu.org/index.php?title=Bluetooth_Passthrough#Adapter_test_results\">Bluetooth\nPassthrough</a> 的 Adapter test results\n表格查看硬件测试结果，需要一个型号匹配的蓝牙适配器</li>\n<li>使用 Zadig 把蓝牙适配器的驱动改成 libusbK\n<ul>\n<li>如果想要恢复原来的驱动：\n<ol type=\"1\">\n<li>右击开始图标 -&gt; 设备管理器 -&gt; libusbK USB Devices -&gt;\n卸载设备</li>\n<li>操作 -&gt; 扫描检测硬件改动</li>\n</ol></li>\n</ul></li>\n<li>打开一个游戏</li>\n<li> Dolphin 模拟器 -&gt; 控制器</li>\n</ol>\n<p><img src=\"/blog/images/wii-remote.webp\"></p>\n<ol start=\"4\" type=\"1\">\n<li>点击 “同步”，再同时按手柄的 1 和 2 键</li>\n<li>连上的标志是手柄变成只有一个灯亮，按连接的顺序，第一个连接的手柄是\n1P，亮第一个灯</li>\n</ol>\n<h2 id=\"模拟模式\">模拟模式</h2>\n<p>参考：<a href=\"https://wiki.dolphin-emu.org/index.php?title=Configuring_Controllers#Real_Wii_Remote\">Configuring\nControllers</a></p>\n<h2 id=\"手柄离灯条的距离\">手柄离灯条的距离</h2>\n<p>据笔者并不怎么精确的测量，手柄前端相对于灯条的水平方向向前 80cm\n处，竖直方向向下 30cm 处为宜，手柄从下往上对着灯条照。</p>\n<p><img src=\"/blog/images/wii-remote-2.webp\"></p>\n<h2 id=\"存档转移\">存档转移</h2>\n<ul>\n<li>Win\n<ul>\n<li>查看游戏 ID：右键属性 -&gt; 信息，如 RNVW01 (00010000524e5657)</li>\n<li> 导入导出：工具</li>\n</ul></li>\n<li>安卓\n<ul>\n<li>导入存档：右上角三个点 -&gt; Import Wii Save</li>\n<li> 导出：设置 -&gt; Config -&gt; User Data</li>\n</ul></li>\n<li> 手动导入导出\n<ul>\n<li>Win 的存档路径在： <figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\yourname\\Documents\\Dolphin Emulator\\Wii\\title</span><br></pre></td></tr></tbody></table></figure></li>\n<li>安卓的存档路径在： <figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/sdcard/Android/data/org.dolphinemu.dolphinemu/files/Wii/title/</span><br></pre></td></tr></tbody></table></figure></li>\n</ul></li>\n</ul>\n","excerpt":"","more":"<p>手柄 --&gt; 蓝牙适配器 --&gt; 蓝牙驱动 --&gt; 操作系统 --&gt;\n模拟器</p>\n<ul>\n<li>第一个箭头：同时按手柄的 1 和 2 键，或者后盖里面的 SYNC\n按钮。这时手柄的四个灯会一起闪</li>\n<li>蓝牙适配器：使用 <a href=\"https://zadig.akeo.ie/\">Zadig</a>\n查看蓝牙适配器的 USB ID 和驱动程序版本，Options -&gt; List All\nDevices</li>\n</ul>\n<h2 id=\"直通模式\">直通模式</h2>\n<ol start=\"0\" type=\"1\">\n<li>在 <a href=\"https://wiki.dolphin-emu.org/index.php?title=Bluetooth_Passthrough#Adapter_test_results\">Bluetooth\nPassthrough</a> 的 Adapter test results\n表格查看硬件测试结果，需要一个型号匹配的蓝牙适配器</li>\n<li>使用 Zadig 把蓝牙适配器的驱动改成 libusbK\n<ul>\n<li>如果想要恢复原来的驱动：\n<ol type=\"1\">\n<li>右击开始图标 -&gt; 设备管理器 -&gt; libusbK USB Devices -&gt;\n卸载设备</li>\n<li>操作 -&gt; 扫描检测硬件改动</li>\n</ol></li>\n</ul></li>\n<li>打开一个游戏</li>\n<li> Dolphin 模拟器 -&gt; 控制器</li>\n</ol>\n<p><img src=\"/blog/images/wii-remote.webp\"></p>\n<ol start=\"4\" type=\"1\">\n<li>点击 “同步”，再同时按手柄的 1 和 2 键</li>\n<li>连上的标志是手柄变成只有一个灯亮，按连接的顺序，第一个连接的手柄是\n1P，亮第一个灯</li>\n</ol>\n<h2 id=\"模拟模式\">模拟模式</h2>\n<p>参考：<a href=\"https://wiki.dolphin-emu.org/index.php?title=Configuring_Controllers#Real_Wii_Remote\">Configuring\nControllers</a></p>\n<h2 id=\"手柄离灯条的距离\">手柄离灯条的距离</h2>\n<p>据笔者并不怎么精确的测量，手柄前端相对于灯条的水平方向向前 80cm\n处，竖直方向向下 30cm 处为宜，手柄从下往上对着灯条照。</p>\n<p><img src=\"/blog/images/wii-remote-2.webp\"></p>\n<h2 id=\"存档转移\">存档转移</h2>\n<ul>\n<li>Win\n<ul>\n<li>查看游戏 ID：右键属性 -&gt; 信息，如 RNVW01 (00010000524e5657)</li>\n<li> 导入导出：工具</li>\n</ul></li>\n<li>安卓\n<ul>\n<li>导入存档：右上角三个点 -&gt; Import Wii Save</li>\n<li> 导出：设置 -&gt; Config -&gt; User Data</li>\n</ul></li>\n<li> 手动导入导出\n<ul>\n<li>Win 的存档路径在： <figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\yourname\\Documents\\Dolphin Emulator\\Wii\\title</span><br></pre></td></tr></tbody></table></figure></li>\n<li>安卓的存档路径在： <figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/sdcard/Android/data/org.dolphinemu.dolphinemu/files/Wii/title/</span><br></pre></td></tr></tbody></table></figure></li>\n</ul></li>\n</ul>\n"},{"title":"乐理","date":"2023-08-27T12:37:00.000Z","mathjax":true,"_content":"\n音乐基础不牢。\n\n## 声音的频率\n\n声音是由声源振动产生的，通过机械波传递。\n\n声音的频率就是机械波的频率，也是声源振动的频率。\n\n比如声源振动 $440$ 次每秒，频率就是 $440\\mathrm{Hz}$。“每秒”这个单位\n$\\mathrm{s^{-1}}$ 也记作赫兹 $\\mathrm{Hz}$，是国际单位制“秒”的导出单位。\n\n## 钢琴琴键的声音频率\n\n1. 规定一个基准频率，比如 $440\\mathrm{Hz}$，作为第一个音。\n\n2. 把第一个音的频率乘上 $\\sqrt[12]{2}$，就得到第二个音。一直乘，乘了十二次之后，第十三个音的频率正好是第一个音频率的两倍。\n\n   这十三个音把一个 $1:2$ 的频率区间分成了十二个部分，每个音的频率都是对应部分的端点，相邻两音的频率比为 $1:\\sqrt[12]{2}$。这就是十二平均律。\n\n3. 如果把第一个音（$440\\mathrm{Hz}$）记作`A4`，往前乘十二次，得到 $880\\mathrm{Hz}$ 的音，就记作`A5`。同理，再乘十二次，得到 $1760\\mathrm{Hz}$ 就是`A6`。\n\n   还可以往后除，$220\\mathrm{Hz}$ 是`A3`，$110\\mathrm{Hz}$ 是`A2`。\n\n   同理。$27.5\\mathrm{Hz}$ 是`A0`，$3520\\mathrm{Hz}$ 是`A7`。\n\n   `A7`再往前乘三次，得到频率为 $3520 \\times \\sqrt[4]{2} \\mathrm{Hz}$ 的音，记作`C8`。\n\n4. 从`A0`到`C8`，有 88 个音，频率构成首项为 $27.5$，公比为 $\\sqrt[12]{2}$ 的等比数列。这就是 88 键钢琴每个琴键的频率。\n\n上面是规定 $\\mathrm{A4=440Hz}$ 时，还可以有其他规定。\n\n## 音程\n\n两个音之间的频率比，称为音程。\n\n频率比为 $1:2$ 的两个音之间，音程称为一个**纯八度**（简称八度）。\n\n快速认识钢琴一个八度里的音：\n\n<img src=\"/blog/images/piano.webp\">\n\n两个相邻琴键的频率比，比如`C4`和`C#4`之间，频率比为 $1:\\sqrt[12]{2}$，称为一个**半音**。也叫小二度。\n\n两个琴键相隔一个琴键的频率比，比如`C4`和`D4`之间，频率比为 $1:\\sqrt[6]{2}$，称为两个半音。也叫一个**全音**或大二度。\n\n## 音程速查表\n\n一四五八无大小，二三六七没有纯。\n\nP1、P8、P4、P5 是完全协和音程。\n\nM3、m3、M6、m6 是不完全协和音程。\n\n另外的是不协和音程。\n\n| 相隔半音数 | 音程名（P） | 音程名（M） | 音程名（m） | 音程名（增） | 音程名（减） |\n| ---------- | ----------- | ----------- | ----------- | ------------ | ------------ |\n| 0          | 纯一度 P1   |             |             |              | 减二度       |\n| 1          |             |             | 小二度      | 增一度       |              |\n| 2          |             | 大二度      |             |              | 减三度       |\n| 3          |             |             | 小三度 m3   | 增二度       |              |\n| 4          |             | 大三度 M3   |             |              | 减四度       |\n| 5          | 纯四度 P4   |             |             | 增三度       |              |\n| 6          |             |             |             | 增四度       | 减五度       |\n| 7          | 纯五度 P5   |             |             |              | 减六度       |\n| 8          |             |             | 小六度 m6   | 增五度       |              |\n| 9          |             | 大六度 M6   |             |              | 减七度       |\n| 10         |             |             | 小七度      | 增六度       |              |\n| 11         |             | 大七度      |             |              | 减八度       |\n| 12         | 纯八度 P8   |             |             | 增七度       |              |\n\n- 小某度 + 小二度 = 大某度\n- 大/纯某度 + 增一度 = 增某度\n- 小/纯某度 - 增一度 = 减某度\n\n- 二度 + 二度的情况包括但不限于：\n  - 小二度 + 小二度 = 大二度\n  - 大二度 + 大二度 = 大三度\n  - 大二度 + 小二度 = 纯四度\n- 三度 + 三度 = 五度的情况包括但不限于：\n  - 大三度 + 小三度 = 纯五度\n  - 大三度 + 大三度 = 增五度\n  - 小三度 + 小三度 = 减五度\n- 五度 + 三度 = 七度的情况包括但不限于：\n  - 纯五度 + 大三度 = 大七度\n  - 纯五度 + 小三度 = 小七度\n  - 增五度 + 大三度 = 增七度\n  - 减五度 + 小三度 = 减七度\n\n## 和弦\n\n参考[音乐词典](https://www.musicca.com/zh/dictionary)。\n\n两个及以上的音同时按下去，称为柱式和弦。\n\n最低音称为根音，根音向上 X 度的音称为 X 音，最高音称为冠音。以根音 C 为例：\n\n### 三和弦\n\n三个大/小三度关系的音（根音、三音、五音），根音到冠音是五度（6~8 半音）。\n\n| 名字     | 符号     | 根音到其他音的音程 | 各个组成音之间相隔的半音数 |\n| -------- | -------- | ------------------ | -------------------------- |\n| 大三和弦 | C        | 大三度、纯五度     | 7=4+3                      |\n| 小三和弦 | Cm       | 小三度、纯五度     | 7=3+4                      |\n| 增三和弦 | Caug，C+ | 大三度、增五度     | 8=4+4                      |\n| 减三和弦 | Cdim，C° | 小三度、减五度     | 6=3+3                      |\n\n### 七和弦\n\n四个三度关系的音（根音、三音、五音、七音），根音到冠音是七度。\n\n可由三和弦再加一个七音得到。\n\nX+5 的意思是把 X 和弦的五音升半音。\n\n| 名字                   | 符号            | 三和弦加一个七音 | 各个组成音之间相隔的半音数 |\n| ---------------------- | --------------- | ---------------- | -------------------------- |\n| 大七和弦（大大七和弦） | Cmaj7、CM7、CΔ7 | 大三和弦、大七度 | 11=4+3+4                   |\n| 属七和弦（大小七和弦） | C7              | 大三和弦、小七度 | 10=4+3+3                   |\n| 小大七和弦             | CmM7            | 小三和弦、大七度 | 11=3+4+4                   |\n| 小七和弦（小小七和弦） | Cm7             | 小三和弦、小七度 | 10=3+4+3                   |\n| 增大七和弦             | CM7+5           | 增三和弦、大七度 | 11=4+4+3                   |\n| 增小七和弦             | Caug7，C7+5     | 增三和弦、小七度 | 10=4+4+2                   |\n| 导七和弦（减小七和弦） | Cm7-5           | 减三和弦、小七度 | 10=3+3+4                   |\n| 减七和弦（减减七和弦） | Cdim7，C°7      | 减三和弦、减七度 | 9=3+3+3                    |\n\n### 其他\n\n| 名字     | 符号 | 根音到其他音的音程 | 各个组成音之间的音程 |\n| -------- | ---- | ------------------ | -------------------- |\n| 强力和弦 | C5   | 纯五度             | 7                    |\n| 大六和弦 | C6   | 大三和弦 + 大六度  | 4+3+2                |\n| 小六和弦 | Cm6  | 小三和弦 + 大六度  | 3+4+2                |\n\n## 升降号\n\n$\\sharp$ 为升号（sharp），用于把一个音升高半音。\n\n比如 $\\mathrm{B \\sharp 4 = C5}$。`B#4 = C5`\n\n$\\flat$ 为降号（flat），用于把一个音降低半音。\n\n比如 $\\mathrm{D \\flat 4 = C \\sharp 4}$。`Db4 = C#4`\n\n## 音名和唱名\n\n- 音名（pitch name，音高名称）\n\n  - `C4`、`C#4`、`D4`等是音名，对应**绝对音高**。\n\n  - 比如 $\\mathrm{C4 = 220 \\times \\sqrt[4]{2} Hz}$。\n\n<img src=\"/blog/images/piano.webp\">\n\n[^1]: [https://en.wikipedia.org/wiki/Solmization](https://en.wikipedia.org/wiki/Solmization)\n\n- 唱名（sol-fa note，唱名表示法[^1]中的音符）\n\n  - `do`、`re`、`mi`、`fa`、`sol`、`la`、`ti` 是唱名，对应**相对音高**。\n\n  - 在简谱里记作 `1`、`2`、`3`、`4`、`5`、`6`、`7`。\n\n  - 我们可以**规定** `1` 至 `7` 分别**对应**七个白键 `C4` 至 `B4`。这时简谱头部会有 $\\mathrm{1 = C}$。\n\n  - 在简谱里，如果用 $1$ 表示 $\\mathrm{C4}$，那么 $\\mathrm{\\dot{1}}$ 就表示 $\\mathrm{C5}$。$\\mathrm{\\dot{\\dot{1}}}$ 表示 $\\mathrm{C6}$，$\\underset{·}{1}$ 表示 $\\mathrm{C3}$，以此类推。\n\n## 音阶\n\n> 在音乐理论中，音阶（scale，尺度）是按基本频率或音高排序的任何一组音符。按音高递增排序的音阶是升序音阶，按音高递减排序的音阶是降序音阶。[^2]\n\n[^2]: [https://en.wikipedia.org/wiki/Scale\\_(music)](<https://en.wikipedia.org/wiki/Scale_(music)>)\n\n`A0 B0 C1 D1 E1 F1 G1 A1 B1 ... C4 D4 E4 F4 G4 A4 B4 ... C7 D7 E7 F7 G7 A7 B7 C8` 就是一组升序音阶，对应钢琴的所有白键。\n\n在上面的例子中，每个八度里用到了七个音名`C D E F G A B`（不包括区间右端点），这被称为**七声音阶**（heptatonic scale）。\n\n## 音级\n\n七声音阶里有七个音级（degree，刻度）：\n\n| 音级 | 名称   | 英文名称                |\n| :--: | ------ | ----------------------- |\n| $Ⅰ$  | 主音   | tonic                   |\n| $Ⅱ$  | 上主音 | supertonic              |\n| $Ⅲ$  | 中音   | mediant                 |\n| $Ⅳ$  | 下属音 | subdominant             |\n| $Ⅴ$  | 属音   | dominant                |\n| $Ⅵ$  | 下中音 | submediant              |\n| $Ⅶ$  | 导音   | subtonic / leading note |\n\n属 = 五\n\n## 【音阶相同】是什么意思\n\n$\\mathrm{C-D-E-F-G-A-B}$ 和\n\n$\\mathrm{A-B-C-D-E-F-G}$ 音阶相同吗？\n\n这两组音阶分别都是同一个八度里的音（不包括右端点）。\n\n如果把“音阶”理解为【无限扩展到多个八度后，所有音的绝对音高】的话，得到的答案是相同的，因为【它们都使用了钢琴的所有白键】。\n\n但是看别人网上的回答，这两组音阶是不同的。\n\n原因在于：\n\n- 首先，主音不同。\n  前者以 $\\mathrm{C}$ 为主音，后者以 $\\mathrm{A}$ 为主音。\n- 其次，音级之间的音程关系（相隔的半音数）不同。\n\n  前者为 $2-2-1-2-2-2-1$，\n\n  后者为 $2-1-2-2-1-2-2$。（算上下一个八度里的主音）\n\n我们说两组音阶相同，意思是**它们的主音、音程关系都相同**。\n\n## 调式\n\n狭义的调式（mode） = 主音 + 音程关系\n\n1. 确定一个起始音（主音）。\n2. 从主音开始，往后（高音方向）取不同的音级。这些不同的音相隔的半音数可能不同，直到取完一个八度。\n3. 再往前、往后取，直到取完所有八度。\n\n比如：\n\n- 以 $\\mathrm{C}$ 为主音，音程关系为 $(2-2-1-2-2-2-1)$ 的调式，称为 $\\mathrm{C}$ **自然大调**。`C Major`\n  用到的音名为：\n  $$\n  \\mathrm{...B3-C4-D4-E4-F4-G4-A4-B4-C5...}\n  $$\n- 以 $\\mathrm{A}$ 为主音，音程关系为 $(2-2-1-2-2-2-1)$ 的调式，称为 $\\mathrm{A}$ **自然大调**。`A Major`\n  用到的音名为：\n  $$\n  \\mathrm{...G\\sharp3-A4-B4-C\\sharp4-D4-E4-F\\sharp4-G4\\sharp-A5...}\n  $$\n- 以 $\\mathrm{A}$ 为主音，音程关系为 $(2-1-2-2-1-2-2)$ 的调式，称为 $\\mathrm{A}$ **自然小调**。`A Minor`\n  用到的音名为：\n  $$\n  \\mathrm{...G3-A4-B4-C4-D4-E4-F4-G4-A5...}\n  $$\n\n## 移调\n\n移调（transpose）就是把所有音同时升高或降低相同的半音数。\n\n移调前后，所有音的相对间隔不变。即音程关系不变。\n\n## 中古调式\n\n7 种中古调式（church mode，教会调式）是指广义的调式，只确定了音程关系，还没确定主音。\n\n即确定了`主音-上主音-中音-下属音-属音-下中音-导音-主音`之间相隔的半音数。\n\n| 调式名                             | 别名/结构相同的调式                      | 相隔的半音数    |\n| ---------------------------------- | ---------------------------------------- | --------------- |\n| 伊奥尼亚调式<br/>Ionian mode       | **自然大调**`Major`<br/>中国七声清乐宫调 | `2-2-1-2-2-2-1` |\n| 多利亚调式<br/>Dorian mode         | 中国七声清乐商调                         | `2-1-2-2-2-1-2` |\n| 弗里几亚调式<br/>Phrygian mode     | 中国七声清乐角调                         | `1-2-2-2-1-2-2` |\n| 利底亚调式<br/>Lydian mode         |                                          | `2-2-2-1-2-2-1` |\n| 混合利底亚调式<br/>Mixolydian mode | 中国七声清乐徵调                         | `2-2-1-2-2-1-2` |\n| 爱奥尼亚调式<br/>Aeolian mode      | **自然小调**`Minor`<br/>中国七声清乐羽调 | `2-1-2-2-1-2-2` |\n| 洛克里亚调式<br/>Iocrian mode      |                                          | `1-2-2-1-2-2-2` |\n\n在确定了主音之后，就是狭义的 $7 \\times 12$ 种调式。因为一个八度里的 $12$ 个音每一个都可以作为主音。\n\n比如以 $\\mathrm{C}$ 为主音的伊奥尼亚调式，就叫 `C Ionian`、 `C Major`、“$\\mathrm{C}$ 自然大调” 或者 “$\\mathrm{C}$ 大调”。\n\n## 不同的中古调式可能使用相同的琴键\n\n仔细观察 7 种中古调式，你会发现【相邻音级之间相隔的半音数】在这 7 种调式里是一个循环。\n\n<ul id=\"colored\">\n    <li>2-2-1-2-2-2-1</li>\n    <li>2-1-2-2-2-1-2</li>\n    <li>1-2-2-2-1-2-2</li>\n    <li>2-2-2-1-2-2-1</li>\n    <li>2-2-1-2-2-1-2</li>\n    <li>2-1-2-2-1-2-2</li>\n    <li>1-2-2-1-2-2-2</li>\n</ul>\n\n<style>\n    .shadow {\n        text-shadow: 1px 1px 2px #000;\n    }\n</style>\n\n<script>\n    const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'purple'];\n    const modes = ['Ionian', 'Dorian', 'Phrygian', 'Lydian', 'Mixolydian', 'Aeolian', 'Iocrian'];\n    const ul = document.getElementById(\"colored\");\n    const lis = ul.getElementsByTagName(\"li\");\n\n    Array.from(lis).forEach((li, index) => {\n        let digits = li.innerHTML.split('-');\n        let coloredDigits = digits.map((digit, i) => {\n            let colorIndex = (index + i) % colors.length;\n            let ret = `<span class=\"shadow\" style=\"color: ${colors[colorIndex]};\">${digit}</span>`;\n            return ret;\n        });\n        li.innerHTML = coloredDigits.join(' - ') + ' ：' + modes[index];\n    });\n</script>\n\n因此，如果以 $\\mathrm{X}$ 为主音，构造自然大调音阶的话（加数字表示升高半音数）：\n\n- 以 $\\mathrm{Y=(X+2)}$ 为主音，构造出多利亚调式的音阶，与 $\\mathrm{X}$ 自然大调使用的琴键相同。\n\n- 以 $\\mathrm{Z=(X+2+2)}$ 为主音，构造出弗里几亚调式的音阶，与 $\\mathrm{X}$ 自然大调、$\\mathrm{Y}$ 多利亚调使用的琴键相同。\n\n- ……\n\n- 以 $\\mathrm{V=(X+2+2+1+2+2)}$ 为主音，构造出自然小调的音阶，与 $\\mathrm{X}$ 自然大调、$\\mathrm{Y}$ 多利亚调、$\\mathrm{Z}$ 弗里几亚调…… 使用的琴键相同。\n\n- 以 $\\mathrm{W=(X+2+2+1+2+2+2)}$ 为主音，构造出洛克里亚调式的音阶，与 $\\mathrm{X}$ 大调、$\\mathrm{Y}$ 多利亚调、$\\mathrm{Z}$ 弗里几亚调…… $\\mathrm{V}$ 自然小调使用的琴键相同。\n\n## 调式音阶\n\n调式音阶为主音+音程关系。如：\n\nC 大调音阶为：$\\mathrm{C-D-E-F-G-A-B}$\n\nA 小调音阶为：$\\mathrm{A-B-C-D-E-F-G}$\n\n它们使用的绝对音名相同，叫**关系大小调**。\n\n## 调内和弦\n\n以 C 大调上的三和弦为例，它是在 C 大调音阶上取三个三度关系的音级构成和弦。\n\n有七个音级，每个都可以作为根音，于是七个和弦分别为：\n\nC Dm Em F G Am B°\n\n类似地，所有大调的七个三和弦都是【大-小-小-大-大-小-减】，因为：\n\n- 2-2-1-2-2-2-1\n  - (2+2)+(1+2)=(4+3)=大三和弦\n  - (2+1)+(2+2)=(3+4)=小三和弦\n  - ……\n  - (1+2)+(2+1)=(3+3)=减三和弦\n  - 以此类推\n\n在一级、四级、五级上（以它们为根音）的和弦都是大三和弦，也叫主和弦、下属和弦、属和弦。它们叫大调上的正三和弦，另外四个叫大调上的副三和弦。\n\n类似地，小调的各级三和弦为：【小-减-大-小-小-大-大】。这和小调相对于大调的音程关系看起来类似，都是把大调的 6 当成小调的 1。\n\n大调的各级七和弦为：【大-小-小-大-属-小-导】。\n\n## 五度圈\n\n[五度圈](https://www.musicca.com/zh/circle-of-fifths)\n\n> Father Charles Goes Down And Ends Battle\n\n4-1-5-2-6-3-7\n\n在钢琴上以 C 为起点依次向后取（上行）纯五度关系的音：\n\nC -> G -> D -> A -> E -> B -> F#/Gb -> Db/C# -> Ab -> Eb -> Bb -> F -> C\n\n最后又回到了 C，且这一圈里包含了十二个完整的音名。\n\n五度圈里顺时针上行是纯五度关系，逆时针上行/顺时针下行是纯四度关系。\n\n## 和弦的功能\n\n以大调为例。参考[常用和弦功能解析全在这了，附实用图表！ ](http://yinlvwu.com/2022/09/19/%e5%b8%b8%e7%94%a8%e5%92%8c%e5%bc%a6%e5%8a%9f%e8%83%bd%e8%a7%a3%e6%9e%90%e5%85%a8%e5%9c%a8%e8%bf%99%e4%ba%86%ef%bc%8c%e9%99%84%e5%ae%9e%e7%94%a8%e5%9b%be%e8%a1%a8%ef%bc%81/)\n\n### 主功能组 Tonic\n\n一级和弦用于平稳地开始和结束。\n\n六级或三级和弦用于主的延续向后发展。\n\n### 属功能组 Dominant\n\n五级或七级和弦用于向主回归。\n\n### 下属功能组 Subdominant\n\n四级和弦：大的要来了，但是还没来。\n\n二级和弦：251\n\n## 律式与调式的区别\n\n律式是给乐器调音用的。\n\n在古代，并不能精确测得乐器的音高，所以要取一个能代表标准音高的东西，比如竹管。\n\n- 竹管越长、吹时的震动频率越低、音高越低。\n\n- 竹管越短、吹的震动频率越高、音高越高。\n\n取不同长度的竹管作为音名。乐器调音完，有了音名之后，在此基础上进行演奏。\n\n不同地区的演奏者喜欢使用不同长度、不同数目的竹管。比如笔者喜欢使用一些竹管，把它们取名为：\n\n$$\n\\mathrm{...G3、A3、}\\mathbf{C4、D4、E4、G4、A4、}\\mathrm{C5、D5...}\n$$\n\n$\\mathrm{X \\in \\{C,D,E,G,A\\}}$，其中 $\\mathrm{Xn}$ 竹管的长度是 $\\mathrm{X(n+1)}$ 竹管长度的两倍，竹管越长音高越低。\n\n笔者把使用次数最多的竹管 $\\mathrm{C4、C5...}$ 叫主音 $\\mathrm{C}$。\n\n$\\mathrm{C、D、E、G、A}$ 就是笔者的五个音级，对应唱名**宫**、**商**、**角**、**徵**、**羽**，`do` `re` `mi` `sol` `la` 或者 $1、2、3、5、6$。\n\n这一些竹管之间，音程关系为 $2-2-3-2-3$。还可以往频率高、低的方向继续加竹管，并保持主音和音程关系不变，这就是笔者的调式。\n\n即：\n\n- 律式规定了：【音名】<->【频率】的对应关系\n- 调式规定了：【唱名】<->【音名】的对应关系\n\n## 三分损益法\n\n三分损益法定音取的是 _单位长度_ 的竹管，所以宫、商、角、徵、羽是 _唱名_。\n\n1. 取一个 $81$ 个单位长度的定音竹管，作为宫。\n2. 截断（损）三分之一，剩余的三分之二（$81 \\times \\frac{2}{3} =  54$）作为徵。\n3. 再加长（益）三分之一，$54 \\times \\frac{4}{3} = 72$，作为商。\n4. 再损三分之一，$72 \\times \\frac{2}{3} = 48$，作为羽。\n5. 再益三分之一，$48 \\times \\frac{4}{3} = 64$，作为角。\n\n| **唱名**     | 宫   | 商   | 角   | 徵   | 羽   |\n| ------------ | ---- | ---- | ---- | ---- | ---- |\n| **单位长度** | $81$ | $72$ | $64$ | $54$ | $48$ |\n\n## 十二律\n\n$$\n\\left\\{\n\\begin{aligned}\n64              \\times \\frac{2}{3} & = 42\\frac{2}{3}   \\\\\n42\\frac{2}{3}   \\times \\frac{4}{3} & = 56\\frac{8}{9}   \\\\\n56\\frac{8}{9}   \\times \\frac{4}{3} & = 75\\frac{23}{27} \\\\\n75\\frac{23}{27} \\times \\frac{2}{3} & = 50\\frac{46}{81} \\\\\n\\vdots\n\\end{aligned}\n\\right.\n$$\n\n在上面的基础上继续损益，注意在 $42\\frac{2}{3}$ 处益了两次，然后继续损—益—损— ……\n\n并规定 **宫 = 黄钟**，相当于十二平均律简谱的 $\\mathbf{1=C}$，得到十二律的各个音：\n\n| 序号 | 音名      | 来源     | 去向       | 单位长度              |\n| ---- | --------- | -------- | ---------- | --------------------- |\n| 1    | 黄钟      | 起始音   | 损，林钟   | $81$                  |\n| 2    | 大吕      | 蕤宾，益 | 损，夷则   | $75\\frac{23}{27}$     |\n| 3    | 太簇      | 林钟，益 | 损，南吕   | $72$                  |\n| 4    | 夹钟      | 夷则，益 | 损，无射   | $67\\frac{103}{243}$   |\n| 5    | 姑洗 Xiǎn | 南吕，益 | 损，应钟   | $64$                  |\n| 6    | 仲吕      | 无射，益 | 损，清黄钟 | $59\\frac{2039}{2187}$ |\n| 7    | 蕤宾      | 应钟，益 | 益，大吕   | $56\\frac{8}{9}$       |\n| 8    | 林钟      | 黄钟，损 | 益，太簇   | $54$                  |\n| 9    | 夷则      | 大吕，损 | 益，夹钟   | $50\\frac{46}{81}$     |\n| 10   | 南吕      | 太簇，损 | 益，姑洗   | $48$                  |\n| 11   | 无射 Yì   | 夹钟，损 | 益，仲吕   | $44\\frac{692}{729}$   |\n| 12   | 应钟      | 姑洗，损 | 益，蕤宾   | $42\\frac{2}{3}$       |\n| 13   | 清黄钟    | 仲吕，损 | ……         | $39\\frac{6265}{6561}$ |\n\n另外，可以在[中国国家数字图书馆](http://read.nlc.cn/user/index)查看不同版本的《史记》，宫、商、角、徵、羽对应的音名是不一样的。但**如果认为以下几点同时成立的话，便可以推出 {宫,商,角,徵,羽} 对应 {黄钟,太簇,姑洗,林钟,南吕}**：\n\n1.  {黄钟,大吕,太簇,夹钟,姑洗,仲吕,蕤宾,林钟,夷则,南吕,无射,应钟}的音高顺序是正确的，从低音到高音。\n2.  可以把第一条集合里的音类比成十二平均律的一个八度内的音名（绝对音高）。\n3.  可以把{宫,商,角,徵,羽,宫,...}类比成十二平均律的唱名（相对音高）。\n4.  第三条集合里的音，音程关系始终是 $2-2-3-2-3$。\n5.  令**宫 = 黄钟**。\n\n## 参考\n\n[1] 维基百科.&nbsp;十二律[EB/OL].(2023-07-14)[2023-09-02]. [https://zh.wikipedia.org/zh-cn/十二律](https://zh.wikipedia.org/zh-cn/十二律).\n\n[2] 司马迁.&nbsp;史记：卷二十五 律書第三[M/OL].(2020-09-10)[2023-09-02]. [https://zh.wikisource.org/wiki/史記/卷 025](https://zh.wikisource.org/wiki/史記/卷025).\n\n[3] leeonix. 【科普向】中国古代的十二律以及十二平均律[EB/OL].(2019-07-30)[2023-09-02]. [https://www.bilibili.com/read/cv3194623](https://www.bilibili.com/read/cv3194623/).\n\n## 弹琴\n\n5 是 so，2 是 re，4 是 fa（four），3 是 mi（3 横过来是 m），6 是 la，7 是 si\n\n每个手的大拇指叫一指，小拇指叫五指。\n\n穿指法：把一指从二指或三指下穿过。如：\n\n- 右手上行 1234567，指头的顺序是 1231234\n- 左手下行 i765432，指：1231234\n\n跨指法：把三指或二指从一指上跨过\n\n- 右手下行 i765432，指头：5432132\n- 左手上行 1234567，指：5432132\n\n为什么弹两只老虎的 565431 之前的 345 里的 4 要穿一次指：因为后面有 5 以上的 6 了，如果按原来“一指按 1，五指按 5”的指法，弹完 5 之后不能顺畅地弹 6，所以在弹完 3 之后要转成“一指按 4”的。\n\n为什么弹第二遍 565431 的时候，变成 “四指按 5 ”的了\n","source":"_posts/乐理.md","raw":"---\ntitle: 乐理\ndate: 2023-08-27 20:37:00\nmathjax: true\npermalink: music-theory.html\n---\n\n音乐基础不牢。\n\n## 声音的频率\n\n声音是由声源振动产生的，通过机械波传递。\n\n声音的频率就是机械波的频率，也是声源振动的频率。\n\n比如声源振动 $440$ 次每秒，频率就是 $440\\mathrm{Hz}$。“每秒”这个单位\n$\\mathrm{s^{-1}}$ 也记作赫兹 $\\mathrm{Hz}$，是国际单位制“秒”的导出单位。\n\n## 钢琴琴键的声音频率\n\n1. 规定一个基准频率，比如 $440\\mathrm{Hz}$，作为第一个音。\n\n2. 把第一个音的频率乘上 $\\sqrt[12]{2}$，就得到第二个音。一直乘，乘了十二次之后，第十三个音的频率正好是第一个音频率的两倍。\n\n   这十三个音把一个 $1:2$ 的频率区间分成了十二个部分，每个音的频率都是对应部分的端点，相邻两音的频率比为 $1:\\sqrt[12]{2}$。这就是十二平均律。\n\n3. 如果把第一个音（$440\\mathrm{Hz}$）记作`A4`，往前乘十二次，得到 $880\\mathrm{Hz}$ 的音，就记作`A5`。同理，再乘十二次，得到 $1760\\mathrm{Hz}$ 就是`A6`。\n\n   还可以往后除，$220\\mathrm{Hz}$ 是`A3`，$110\\mathrm{Hz}$ 是`A2`。\n\n   同理。$27.5\\mathrm{Hz}$ 是`A0`，$3520\\mathrm{Hz}$ 是`A7`。\n\n   `A7`再往前乘三次，得到频率为 $3520 \\times \\sqrt[4]{2} \\mathrm{Hz}$ 的音，记作`C8`。\n\n4. 从`A0`到`C8`，有 88 个音，频率构成首项为 $27.5$，公比为 $\\sqrt[12]{2}$ 的等比数列。这就是 88 键钢琴每个琴键的频率。\n\n上面是规定 $\\mathrm{A4=440Hz}$ 时，还可以有其他规定。\n\n## 音程\n\n两个音之间的频率比，称为音程。\n\n频率比为 $1:2$ 的两个音之间，音程称为一个**纯八度**（简称八度）。\n\n快速认识钢琴一个八度里的音：\n\n<img src=\"/blog/images/piano.webp\">\n\n两个相邻琴键的频率比，比如`C4`和`C#4`之间，频率比为 $1:\\sqrt[12]{2}$，称为一个**半音**。也叫小二度。\n\n两个琴键相隔一个琴键的频率比，比如`C4`和`D4`之间，频率比为 $1:\\sqrt[6]{2}$，称为两个半音。也叫一个**全音**或大二度。\n\n## 音程速查表\n\n一四五八无大小，二三六七没有纯。\n\nP1、P8、P4、P5 是完全协和音程。\n\nM3、m3、M6、m6 是不完全协和音程。\n\n另外的是不协和音程。\n\n| 相隔半音数 | 音程名（P） | 音程名（M） | 音程名（m） | 音程名（增） | 音程名（减） |\n| ---------- | ----------- | ----------- | ----------- | ------------ | ------------ |\n| 0          | 纯一度 P1   |             |             |              | 减二度       |\n| 1          |             |             | 小二度      | 增一度       |              |\n| 2          |             | 大二度      |             |              | 减三度       |\n| 3          |             |             | 小三度 m3   | 增二度       |              |\n| 4          |             | 大三度 M3   |             |              | 减四度       |\n| 5          | 纯四度 P4   |             |             | 增三度       |              |\n| 6          |             |             |             | 增四度       | 减五度       |\n| 7          | 纯五度 P5   |             |             |              | 减六度       |\n| 8          |             |             | 小六度 m6   | 增五度       |              |\n| 9          |             | 大六度 M6   |             |              | 减七度       |\n| 10         |             |             | 小七度      | 增六度       |              |\n| 11         |             | 大七度      |             |              | 减八度       |\n| 12         | 纯八度 P8   |             |             | 增七度       |              |\n\n- 小某度 + 小二度 = 大某度\n- 大/纯某度 + 增一度 = 增某度\n- 小/纯某度 - 增一度 = 减某度\n\n- 二度 + 二度的情况包括但不限于：\n  - 小二度 + 小二度 = 大二度\n  - 大二度 + 大二度 = 大三度\n  - 大二度 + 小二度 = 纯四度\n- 三度 + 三度 = 五度的情况包括但不限于：\n  - 大三度 + 小三度 = 纯五度\n  - 大三度 + 大三度 = 增五度\n  - 小三度 + 小三度 = 减五度\n- 五度 + 三度 = 七度的情况包括但不限于：\n  - 纯五度 + 大三度 = 大七度\n  - 纯五度 + 小三度 = 小七度\n  - 增五度 + 大三度 = 增七度\n  - 减五度 + 小三度 = 减七度\n\n## 和弦\n\n参考[音乐词典](https://www.musicca.com/zh/dictionary)。\n\n两个及以上的音同时按下去，称为柱式和弦。\n\n最低音称为根音，根音向上 X 度的音称为 X 音，最高音称为冠音。以根音 C 为例：\n\n### 三和弦\n\n三个大/小三度关系的音（根音、三音、五音），根音到冠音是五度（6~8 半音）。\n\n| 名字     | 符号     | 根音到其他音的音程 | 各个组成音之间相隔的半音数 |\n| -------- | -------- | ------------------ | -------------------------- |\n| 大三和弦 | C        | 大三度、纯五度     | 7=4+3                      |\n| 小三和弦 | Cm       | 小三度、纯五度     | 7=3+4                      |\n| 增三和弦 | Caug，C+ | 大三度、增五度     | 8=4+4                      |\n| 减三和弦 | Cdim，C° | 小三度、减五度     | 6=3+3                      |\n\n### 七和弦\n\n四个三度关系的音（根音、三音、五音、七音），根音到冠音是七度。\n\n可由三和弦再加一个七音得到。\n\nX+5 的意思是把 X 和弦的五音升半音。\n\n| 名字                   | 符号            | 三和弦加一个七音 | 各个组成音之间相隔的半音数 |\n| ---------------------- | --------------- | ---------------- | -------------------------- |\n| 大七和弦（大大七和弦） | Cmaj7、CM7、CΔ7 | 大三和弦、大七度 | 11=4+3+4                   |\n| 属七和弦（大小七和弦） | C7              | 大三和弦、小七度 | 10=4+3+3                   |\n| 小大七和弦             | CmM7            | 小三和弦、大七度 | 11=3+4+4                   |\n| 小七和弦（小小七和弦） | Cm7             | 小三和弦、小七度 | 10=3+4+3                   |\n| 增大七和弦             | CM7+5           | 增三和弦、大七度 | 11=4+4+3                   |\n| 增小七和弦             | Caug7，C7+5     | 增三和弦、小七度 | 10=4+4+2                   |\n| 导七和弦（减小七和弦） | Cm7-5           | 减三和弦、小七度 | 10=3+3+4                   |\n| 减七和弦（减减七和弦） | Cdim7，C°7      | 减三和弦、减七度 | 9=3+3+3                    |\n\n### 其他\n\n| 名字     | 符号 | 根音到其他音的音程 | 各个组成音之间的音程 |\n| -------- | ---- | ------------------ | -------------------- |\n| 强力和弦 | C5   | 纯五度             | 7                    |\n| 大六和弦 | C6   | 大三和弦 + 大六度  | 4+3+2                |\n| 小六和弦 | Cm6  | 小三和弦 + 大六度  | 3+4+2                |\n\n## 升降号\n\n$\\sharp$ 为升号（sharp），用于把一个音升高半音。\n\n比如 $\\mathrm{B \\sharp 4 = C5}$。`B#4 = C5`\n\n$\\flat$ 为降号（flat），用于把一个音降低半音。\n\n比如 $\\mathrm{D \\flat 4 = C \\sharp 4}$。`Db4 = C#4`\n\n## 音名和唱名\n\n- 音名（pitch name，音高名称）\n\n  - `C4`、`C#4`、`D4`等是音名，对应**绝对音高**。\n\n  - 比如 $\\mathrm{C4 = 220 \\times \\sqrt[4]{2} Hz}$。\n\n<img src=\"/blog/images/piano.webp\">\n\n[^1]: [https://en.wikipedia.org/wiki/Solmization](https://en.wikipedia.org/wiki/Solmization)\n\n- 唱名（sol-fa note，唱名表示法[^1]中的音符）\n\n  - `do`、`re`、`mi`、`fa`、`sol`、`la`、`ti` 是唱名，对应**相对音高**。\n\n  - 在简谱里记作 `1`、`2`、`3`、`4`、`5`、`6`、`7`。\n\n  - 我们可以**规定** `1` 至 `7` 分别**对应**七个白键 `C4` 至 `B4`。这时简谱头部会有 $\\mathrm{1 = C}$。\n\n  - 在简谱里，如果用 $1$ 表示 $\\mathrm{C4}$，那么 $\\mathrm{\\dot{1}}$ 就表示 $\\mathrm{C5}$。$\\mathrm{\\dot{\\dot{1}}}$ 表示 $\\mathrm{C6}$，$\\underset{·}{1}$ 表示 $\\mathrm{C3}$，以此类推。\n\n## 音阶\n\n> 在音乐理论中，音阶（scale，尺度）是按基本频率或音高排序的任何一组音符。按音高递增排序的音阶是升序音阶，按音高递减排序的音阶是降序音阶。[^2]\n\n[^2]: [https://en.wikipedia.org/wiki/Scale\\_(music)](<https://en.wikipedia.org/wiki/Scale_(music)>)\n\n`A0 B0 C1 D1 E1 F1 G1 A1 B1 ... C4 D4 E4 F4 G4 A4 B4 ... C7 D7 E7 F7 G7 A7 B7 C8` 就是一组升序音阶，对应钢琴的所有白键。\n\n在上面的例子中，每个八度里用到了七个音名`C D E F G A B`（不包括区间右端点），这被称为**七声音阶**（heptatonic scale）。\n\n## 音级\n\n七声音阶里有七个音级（degree，刻度）：\n\n| 音级 | 名称   | 英文名称                |\n| :--: | ------ | ----------------------- |\n| $Ⅰ$  | 主音   | tonic                   |\n| $Ⅱ$  | 上主音 | supertonic              |\n| $Ⅲ$  | 中音   | mediant                 |\n| $Ⅳ$  | 下属音 | subdominant             |\n| $Ⅴ$  | 属音   | dominant                |\n| $Ⅵ$  | 下中音 | submediant              |\n| $Ⅶ$  | 导音   | subtonic / leading note |\n\n属 = 五\n\n## 【音阶相同】是什么意思\n\n$\\mathrm{C-D-E-F-G-A-B}$ 和\n\n$\\mathrm{A-B-C-D-E-F-G}$ 音阶相同吗？\n\n这两组音阶分别都是同一个八度里的音（不包括右端点）。\n\n如果把“音阶”理解为【无限扩展到多个八度后，所有音的绝对音高】的话，得到的答案是相同的，因为【它们都使用了钢琴的所有白键】。\n\n但是看别人网上的回答，这两组音阶是不同的。\n\n原因在于：\n\n- 首先，主音不同。\n  前者以 $\\mathrm{C}$ 为主音，后者以 $\\mathrm{A}$ 为主音。\n- 其次，音级之间的音程关系（相隔的半音数）不同。\n\n  前者为 $2-2-1-2-2-2-1$，\n\n  后者为 $2-1-2-2-1-2-2$。（算上下一个八度里的主音）\n\n我们说两组音阶相同，意思是**它们的主音、音程关系都相同**。\n\n## 调式\n\n狭义的调式（mode） = 主音 + 音程关系\n\n1. 确定一个起始音（主音）。\n2. 从主音开始，往后（高音方向）取不同的音级。这些不同的音相隔的半音数可能不同，直到取完一个八度。\n3. 再往前、往后取，直到取完所有八度。\n\n比如：\n\n- 以 $\\mathrm{C}$ 为主音，音程关系为 $(2-2-1-2-2-2-1)$ 的调式，称为 $\\mathrm{C}$ **自然大调**。`C Major`\n  用到的音名为：\n  $$\n  \\mathrm{...B3-C4-D4-E4-F4-G4-A4-B4-C5...}\n  $$\n- 以 $\\mathrm{A}$ 为主音，音程关系为 $(2-2-1-2-2-2-1)$ 的调式，称为 $\\mathrm{A}$ **自然大调**。`A Major`\n  用到的音名为：\n  $$\n  \\mathrm{...G\\sharp3-A4-B4-C\\sharp4-D4-E4-F\\sharp4-G4\\sharp-A5...}\n  $$\n- 以 $\\mathrm{A}$ 为主音，音程关系为 $(2-1-2-2-1-2-2)$ 的调式，称为 $\\mathrm{A}$ **自然小调**。`A Minor`\n  用到的音名为：\n  $$\n  \\mathrm{...G3-A4-B4-C4-D4-E4-F4-G4-A5...}\n  $$\n\n## 移调\n\n移调（transpose）就是把所有音同时升高或降低相同的半音数。\n\n移调前后，所有音的相对间隔不变。即音程关系不变。\n\n## 中古调式\n\n7 种中古调式（church mode，教会调式）是指广义的调式，只确定了音程关系，还没确定主音。\n\n即确定了`主音-上主音-中音-下属音-属音-下中音-导音-主音`之间相隔的半音数。\n\n| 调式名                             | 别名/结构相同的调式                      | 相隔的半音数    |\n| ---------------------------------- | ---------------------------------------- | --------------- |\n| 伊奥尼亚调式<br/>Ionian mode       | **自然大调**`Major`<br/>中国七声清乐宫调 | `2-2-1-2-2-2-1` |\n| 多利亚调式<br/>Dorian mode         | 中国七声清乐商调                         | `2-1-2-2-2-1-2` |\n| 弗里几亚调式<br/>Phrygian mode     | 中国七声清乐角调                         | `1-2-2-2-1-2-2` |\n| 利底亚调式<br/>Lydian mode         |                                          | `2-2-2-1-2-2-1` |\n| 混合利底亚调式<br/>Mixolydian mode | 中国七声清乐徵调                         | `2-2-1-2-2-1-2` |\n| 爱奥尼亚调式<br/>Aeolian mode      | **自然小调**`Minor`<br/>中国七声清乐羽调 | `2-1-2-2-1-2-2` |\n| 洛克里亚调式<br/>Iocrian mode      |                                          | `1-2-2-1-2-2-2` |\n\n在确定了主音之后，就是狭义的 $7 \\times 12$ 种调式。因为一个八度里的 $12$ 个音每一个都可以作为主音。\n\n比如以 $\\mathrm{C}$ 为主音的伊奥尼亚调式，就叫 `C Ionian`、 `C Major`、“$\\mathrm{C}$ 自然大调” 或者 “$\\mathrm{C}$ 大调”。\n\n## 不同的中古调式可能使用相同的琴键\n\n仔细观察 7 种中古调式，你会发现【相邻音级之间相隔的半音数】在这 7 种调式里是一个循环。\n\n<ul id=\"colored\">\n    <li>2-2-1-2-2-2-1</li>\n    <li>2-1-2-2-2-1-2</li>\n    <li>1-2-2-2-1-2-2</li>\n    <li>2-2-2-1-2-2-1</li>\n    <li>2-2-1-2-2-1-2</li>\n    <li>2-1-2-2-1-2-2</li>\n    <li>1-2-2-1-2-2-2</li>\n</ul>\n\n<style>\n    .shadow {\n        text-shadow: 1px 1px 2px #000;\n    }\n</style>\n\n<script>\n    const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'purple'];\n    const modes = ['Ionian', 'Dorian', 'Phrygian', 'Lydian', 'Mixolydian', 'Aeolian', 'Iocrian'];\n    const ul = document.getElementById(\"colored\");\n    const lis = ul.getElementsByTagName(\"li\");\n\n    Array.from(lis).forEach((li, index) => {\n        let digits = li.innerHTML.split('-');\n        let coloredDigits = digits.map((digit, i) => {\n            let colorIndex = (index + i) % colors.length;\n            let ret = `<span class=\"shadow\" style=\"color: ${colors[colorIndex]};\">${digit}</span>`;\n            return ret;\n        });\n        li.innerHTML = coloredDigits.join(' - ') + ' ：' + modes[index];\n    });\n</script>\n\n因此，如果以 $\\mathrm{X}$ 为主音，构造自然大调音阶的话（加数字表示升高半音数）：\n\n- 以 $\\mathrm{Y=(X+2)}$ 为主音，构造出多利亚调式的音阶，与 $\\mathrm{X}$ 自然大调使用的琴键相同。\n\n- 以 $\\mathrm{Z=(X+2+2)}$ 为主音，构造出弗里几亚调式的音阶，与 $\\mathrm{X}$ 自然大调、$\\mathrm{Y}$ 多利亚调使用的琴键相同。\n\n- ……\n\n- 以 $\\mathrm{V=(X+2+2+1+2+2)}$ 为主音，构造出自然小调的音阶，与 $\\mathrm{X}$ 自然大调、$\\mathrm{Y}$ 多利亚调、$\\mathrm{Z}$ 弗里几亚调…… 使用的琴键相同。\n\n- 以 $\\mathrm{W=(X+2+2+1+2+2+2)}$ 为主音，构造出洛克里亚调式的音阶，与 $\\mathrm{X}$ 大调、$\\mathrm{Y}$ 多利亚调、$\\mathrm{Z}$ 弗里几亚调…… $\\mathrm{V}$ 自然小调使用的琴键相同。\n\n## 调式音阶\n\n调式音阶为主音+音程关系。如：\n\nC 大调音阶为：$\\mathrm{C-D-E-F-G-A-B}$\n\nA 小调音阶为：$\\mathrm{A-B-C-D-E-F-G}$\n\n它们使用的绝对音名相同，叫**关系大小调**。\n\n## 调内和弦\n\n以 C 大调上的三和弦为例，它是在 C 大调音阶上取三个三度关系的音级构成和弦。\n\n有七个音级，每个都可以作为根音，于是七个和弦分别为：\n\nC Dm Em F G Am B°\n\n类似地，所有大调的七个三和弦都是【大-小-小-大-大-小-减】，因为：\n\n- 2-2-1-2-2-2-1\n  - (2+2)+(1+2)=(4+3)=大三和弦\n  - (2+1)+(2+2)=(3+4)=小三和弦\n  - ……\n  - (1+2)+(2+1)=(3+3)=减三和弦\n  - 以此类推\n\n在一级、四级、五级上（以它们为根音）的和弦都是大三和弦，也叫主和弦、下属和弦、属和弦。它们叫大调上的正三和弦，另外四个叫大调上的副三和弦。\n\n类似地，小调的各级三和弦为：【小-减-大-小-小-大-大】。这和小调相对于大调的音程关系看起来类似，都是把大调的 6 当成小调的 1。\n\n大调的各级七和弦为：【大-小-小-大-属-小-导】。\n\n## 五度圈\n\n[五度圈](https://www.musicca.com/zh/circle-of-fifths)\n\n> Father Charles Goes Down And Ends Battle\n\n4-1-5-2-6-3-7\n\n在钢琴上以 C 为起点依次向后取（上行）纯五度关系的音：\n\nC -> G -> D -> A -> E -> B -> F#/Gb -> Db/C# -> Ab -> Eb -> Bb -> F -> C\n\n最后又回到了 C，且这一圈里包含了十二个完整的音名。\n\n五度圈里顺时针上行是纯五度关系，逆时针上行/顺时针下行是纯四度关系。\n\n## 和弦的功能\n\n以大调为例。参考[常用和弦功能解析全在这了，附实用图表！ ](http://yinlvwu.com/2022/09/19/%e5%b8%b8%e7%94%a8%e5%92%8c%e5%bc%a6%e5%8a%9f%e8%83%bd%e8%a7%a3%e6%9e%90%e5%85%a8%e5%9c%a8%e8%bf%99%e4%ba%86%ef%bc%8c%e9%99%84%e5%ae%9e%e7%94%a8%e5%9b%be%e8%a1%a8%ef%bc%81/)\n\n### 主功能组 Tonic\n\n一级和弦用于平稳地开始和结束。\n\n六级或三级和弦用于主的延续向后发展。\n\n### 属功能组 Dominant\n\n五级或七级和弦用于向主回归。\n\n### 下属功能组 Subdominant\n\n四级和弦：大的要来了，但是还没来。\n\n二级和弦：251\n\n## 律式与调式的区别\n\n律式是给乐器调音用的。\n\n在古代，并不能精确测得乐器的音高，所以要取一个能代表标准音高的东西，比如竹管。\n\n- 竹管越长、吹时的震动频率越低、音高越低。\n\n- 竹管越短、吹的震动频率越高、音高越高。\n\n取不同长度的竹管作为音名。乐器调音完，有了音名之后，在此基础上进行演奏。\n\n不同地区的演奏者喜欢使用不同长度、不同数目的竹管。比如笔者喜欢使用一些竹管，把它们取名为：\n\n$$\n\\mathrm{...G3、A3、}\\mathbf{C4、D4、E4、G4、A4、}\\mathrm{C5、D5...}\n$$\n\n$\\mathrm{X \\in \\{C,D,E,G,A\\}}$，其中 $\\mathrm{Xn}$ 竹管的长度是 $\\mathrm{X(n+1)}$ 竹管长度的两倍，竹管越长音高越低。\n\n笔者把使用次数最多的竹管 $\\mathrm{C4、C5...}$ 叫主音 $\\mathrm{C}$。\n\n$\\mathrm{C、D、E、G、A}$ 就是笔者的五个音级，对应唱名**宫**、**商**、**角**、**徵**、**羽**，`do` `re` `mi` `sol` `la` 或者 $1、2、3、5、6$。\n\n这一些竹管之间，音程关系为 $2-2-3-2-3$。还可以往频率高、低的方向继续加竹管，并保持主音和音程关系不变，这就是笔者的调式。\n\n即：\n\n- 律式规定了：【音名】<->【频率】的对应关系\n- 调式规定了：【唱名】<->【音名】的对应关系\n\n## 三分损益法\n\n三分损益法定音取的是 _单位长度_ 的竹管，所以宫、商、角、徵、羽是 _唱名_。\n\n1. 取一个 $81$ 个单位长度的定音竹管，作为宫。\n2. 截断（损）三分之一，剩余的三分之二（$81 \\times \\frac{2}{3} =  54$）作为徵。\n3. 再加长（益）三分之一，$54 \\times \\frac{4}{3} = 72$，作为商。\n4. 再损三分之一，$72 \\times \\frac{2}{3} = 48$，作为羽。\n5. 再益三分之一，$48 \\times \\frac{4}{3} = 64$，作为角。\n\n| **唱名**     | 宫   | 商   | 角   | 徵   | 羽   |\n| ------------ | ---- | ---- | ---- | ---- | ---- |\n| **单位长度** | $81$ | $72$ | $64$ | $54$ | $48$ |\n\n## 十二律\n\n$$\n\\left\\{\n\\begin{aligned}\n64              \\times \\frac{2}{3} & = 42\\frac{2}{3}   \\\\\n42\\frac{2}{3}   \\times \\frac{4}{3} & = 56\\frac{8}{9}   \\\\\n56\\frac{8}{9}   \\times \\frac{4}{3} & = 75\\frac{23}{27} \\\\\n75\\frac{23}{27} \\times \\frac{2}{3} & = 50\\frac{46}{81} \\\\\n\\vdots\n\\end{aligned}\n\\right.\n$$\n\n在上面的基础上继续损益，注意在 $42\\frac{2}{3}$ 处益了两次，然后继续损—益—损— ……\n\n并规定 **宫 = 黄钟**，相当于十二平均律简谱的 $\\mathbf{1=C}$，得到十二律的各个音：\n\n| 序号 | 音名      | 来源     | 去向       | 单位长度              |\n| ---- | --------- | -------- | ---------- | --------------------- |\n| 1    | 黄钟      | 起始音   | 损，林钟   | $81$                  |\n| 2    | 大吕      | 蕤宾，益 | 损，夷则   | $75\\frac{23}{27}$     |\n| 3    | 太簇      | 林钟，益 | 损，南吕   | $72$                  |\n| 4    | 夹钟      | 夷则，益 | 损，无射   | $67\\frac{103}{243}$   |\n| 5    | 姑洗 Xiǎn | 南吕，益 | 损，应钟   | $64$                  |\n| 6    | 仲吕      | 无射，益 | 损，清黄钟 | $59\\frac{2039}{2187}$ |\n| 7    | 蕤宾      | 应钟，益 | 益，大吕   | $56\\frac{8}{9}$       |\n| 8    | 林钟      | 黄钟，损 | 益，太簇   | $54$                  |\n| 9    | 夷则      | 大吕，损 | 益，夹钟   | $50\\frac{46}{81}$     |\n| 10   | 南吕      | 太簇，损 | 益，姑洗   | $48$                  |\n| 11   | 无射 Yì   | 夹钟，损 | 益，仲吕   | $44\\frac{692}{729}$   |\n| 12   | 应钟      | 姑洗，损 | 益，蕤宾   | $42\\frac{2}{3}$       |\n| 13   | 清黄钟    | 仲吕，损 | ……         | $39\\frac{6265}{6561}$ |\n\n另外，可以在[中国国家数字图书馆](http://read.nlc.cn/user/index)查看不同版本的《史记》，宫、商、角、徵、羽对应的音名是不一样的。但**如果认为以下几点同时成立的话，便可以推出 {宫,商,角,徵,羽} 对应 {黄钟,太簇,姑洗,林钟,南吕}**：\n\n1.  {黄钟,大吕,太簇,夹钟,姑洗,仲吕,蕤宾,林钟,夷则,南吕,无射,应钟}的音高顺序是正确的，从低音到高音。\n2.  可以把第一条集合里的音类比成十二平均律的一个八度内的音名（绝对音高）。\n3.  可以把{宫,商,角,徵,羽,宫,...}类比成十二平均律的唱名（相对音高）。\n4.  第三条集合里的音，音程关系始终是 $2-2-3-2-3$。\n5.  令**宫 = 黄钟**。\n\n## 参考\n\n[1] 维基百科.&nbsp;十二律[EB/OL].(2023-07-14)[2023-09-02]. [https://zh.wikipedia.org/zh-cn/十二律](https://zh.wikipedia.org/zh-cn/十二律).\n\n[2] 司马迁.&nbsp;史记：卷二十五 律書第三[M/OL].(2020-09-10)[2023-09-02]. [https://zh.wikisource.org/wiki/史記/卷 025](https://zh.wikisource.org/wiki/史記/卷025).\n\n[3] leeonix. 【科普向】中国古代的十二律以及十二平均律[EB/OL].(2019-07-30)[2023-09-02]. [https://www.bilibili.com/read/cv3194623](https://www.bilibili.com/read/cv3194623/).\n\n## 弹琴\n\n5 是 so，2 是 re，4 是 fa（four），3 是 mi（3 横过来是 m），6 是 la，7 是 si\n\n每个手的大拇指叫一指，小拇指叫五指。\n\n穿指法：把一指从二指或三指下穿过。如：\n\n- 右手上行 1234567，指头的顺序是 1231234\n- 左手下行 i765432，指：1231234\n\n跨指法：把三指或二指从一指上跨过\n\n- 右手下行 i765432，指头：5432132\n- 左手上行 1234567，指：5432132\n\n为什么弹两只老虎的 565431 之前的 345 里的 4 要穿一次指：因为后面有 5 以上的 6 了，如果按原来“一指按 1，五指按 5”的指法，弹完 5 之后不能顺畅地弹 6，所以在弹完 3 之后要转成“一指按 4”的。\n\n为什么弹第二遍 565431 的时候，变成 “四指按 5 ”的了\n","slug":"乐理","published":1,"updated":"2025-09-14T14:51:03.975Z","__permalink":"music-theory.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lng00085ws68cnb2elg","content":"<p>音乐基础不牢。</p>\n<h2 id=\"声音的频率\">声音的频率</h2>\n<p>声音是由声源振动产生的，通过机械波传递。</p>\n<p>声音的频率就是机械波的频率，也是声源振动的频率。</p>\n<p>比如声源振动 <span class=\"math inline\">\\(440\\)</span>\n次每秒，频率就是 <span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>。“每秒” 这个单位 <span class=\"math inline\">\\(\\mathrm{s^{-1}}\\)</span> 也记作赫兹 <span class=\"math inline\">\\(\\mathrm{Hz}\\)</span>，是国际单位制 “秒” 的导出单位。</p>\n<h2 id=\"钢琴琴键的声音频率\">钢琴琴键的声音频率</h2>\n<ol type=\"1\">\n<li><p>规定一个基准频率，比如 <span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>，作为第一个音。</p></li>\n<li><p>把第一个音的频率乘上 <span class=\"math inline\">\\(\\sqrt[12]{2}\\)</span>，就得到第二个音。一直乘，乘了十二次之后，第十三个音的频率正好是第一个音频率的两倍。</p>\n<p>这十三个音把一个 <span class=\"math inline\">\\(1:2\\)</span>\n的频率区间分成了十二个部分，每个音的频率都是对应部分的端点，相邻两音的频率比为\n<span class=\"math inline\">\\(1:\\sqrt[12]{2}\\)</span>。这就是十二平均律。</p></li>\n<li><p>如果把第一个音（<span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>）记作 <code>A4</code>，往前乘十二次，得到\n<span class=\"math inline\">\\(880\\mathrm{Hz}\\)</span>\n的音，就记作 <code>A5</code>。同理，再乘十二次，得到 <span class=\"math inline\">\\(1760\\mathrm{Hz}\\)</span> 就是 <code>A6</code>。</p>\n<p>还可以往后除，<span class=\"math inline\">\\(220\\mathrm{Hz}\\)</span>\n是 <code>A3</code>，<span class=\"math inline\">\\(110\\mathrm{Hz}\\)</span>\n是 <code>A2</code>。</p>\n<p>同理。<span class=\"math inline\">\\(27.5\\mathrm{Hz}\\)</span>\n是 <code>A0</code>，<span class=\"math inline\">\\(3520\\mathrm{Hz}\\)</span>\n是 <code>A7</code>。</p>\n<p><code>A7</code> 再往前乘三次，得到频率为 <span class=\"math inline\">\\(3520 \\times \\sqrt[4]{2} \\mathrm{Hz}\\)</span>\n的音，记作 <code>C8</code>。</p></li>\n<li><p>从 <code>A0</code> 到 <code>C8</code>，有 88 个音，频率构成首项为\n<span class=\"math inline\">\\(27.5\\)</span>，公比为 <span class=\"math inline\">\\(\\sqrt[12]{2}\\)</span> 的等比数列。这就是 88\n键钢琴每个琴键的频率。</p></li>\n</ol>\n<p>上面是规定 <span class=\"math inline\">\\(\\mathrm{A4=440Hz}\\)</span>\n时，还可以有其他规定。</p>\n<h2 id=\"音程\">音程</h2>\n<p>两个音之间的频率比，称为音程。</p>\n<p>频率比为 <span class=\"math inline\">\\(1:2\\)</span>\n的两个音之间，音程称为一个<strong>纯八度</strong>（简称八度）。</p>\n<p>快速认识钢琴一个八度里的音：</p>\n<p><img src=\"/blog/images/piano.webp\"></p>\n<p>两个相邻琴键的频率比，比如 <code>C4</code> 和 <code>C#4</code> 之间，频率比为\n<span class=\"math inline\">\\(1:\\sqrt[12]{2}\\)</span>，称为一个<strong>半音</strong>。也叫小二度。</p>\n<p>两个琴键相隔一个琴键的频率比，比如 <code>C4</code> 和 <code>D4</code> 之间，频率比为\n<span class=\"math inline\">\\(1:\\sqrt[6]{2}\\)</span>，称为两个半音。也叫一个<strong>全音</strong>或大二度。</p>\n<h2 id=\"音程速查表\">音程速查表</h2>\n<p>一四五八无大小，二三六七没有纯。</p>\n<p>P1、P8、P4、P5 是完全协和音程。</p>\n<p>M3、m3、M6、m6 是不完全协和音程。</p>\n<p>另外的是不协和音程。</p>\n<table>\n<colgroup>\n<col style=\"width: 14%\">\n<col style=\"width: 16%\">\n<col style=\"width: 16%\">\n<col style=\"width: 16%\">\n<col style=\"width: 17%\">\n<col style=\"width: 17%\">\n</colgroup>\n<thead>\n<tr>\n<th>相隔半音数</th>\n<th>音程名（P）</th>\n<th>音程名（M）</th>\n<th>音程名（m）</th>\n<th>音程名（增）</th>\n<th>音程名（减）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td> 纯一度 P1</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 减二度</td>\n</tr>\n<tr>\n<td> 1</td>\n<td></td>\n<td></td>\n<td> 小二度</td>\n<td>增一度</td>\n<td></td>\n</tr>\n<tr>\n<td> 2</td>\n<td></td>\n<td> 大二度</td>\n<td></td>\n<td></td>\n<td>减三度</td>\n</tr>\n<tr>\n<td> 3</td>\n<td></td>\n<td></td>\n<td> 小三度 m3</td>\n<td> 增二度</td>\n<td></td>\n</tr>\n<tr>\n<td> 4</td>\n<td></td>\n<td> 大三度 M3</td>\n<td></td>\n<td></td>\n<td> 减四度</td>\n</tr>\n<tr>\n<td> 5</td>\n<td> 纯四度 P4</td>\n<td></td>\n<td></td>\n<td> 增三度</td>\n<td></td>\n</tr>\n<tr>\n<td> 6</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 增四度</td>\n<td>减五度</td>\n</tr>\n<tr>\n<td> 7</td>\n<td> 纯五度 P5</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 减六度</td>\n</tr>\n<tr>\n<td> 8</td>\n<td></td>\n<td></td>\n<td> 小六度 m6</td>\n<td> 增五度</td>\n<td></td>\n</tr>\n<tr>\n<td> 9</td>\n<td></td>\n<td> 大六度 M6</td>\n<td></td>\n<td></td>\n<td> 减七度</td>\n</tr>\n<tr>\n<td> 10</td>\n<td></td>\n<td></td>\n<td> 小七度</td>\n<td>增六度</td>\n<td></td>\n</tr>\n<tr>\n<td> 11</td>\n<td></td>\n<td> 大七度</td>\n<td></td>\n<td></td>\n<td>减八度</td>\n</tr>\n<tr>\n<td> 12</td>\n<td> 纯八度 P8</td>\n<td></td>\n<td></td>\n<td> 增七度</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>小某度 + 小二度 = 大某度</p></li>\n<li><p>大 / 纯某度 + 增一度 = 增某度</p></li>\n<li><p>小 / 纯某度 - 增一度 = 减某度</p></li>\n<li><p>二度 + 二度的情况包括但不限于：</p>\n<ul>\n<li>小二度 + 小二度 = 大二度</li>\n<li>大二度 + 大二度 = 大三度</li>\n<li>大二度 + 小二度 = 纯四度</li>\n</ul></li>\n<li><p>三度 + 三度 = 五度的情况包括但不限于：</p>\n<ul>\n<li>大三度 + 小三度 = 纯五度</li>\n<li>大三度 + 大三度 = 增五度</li>\n<li>小三度 + 小三度 = 减五度</li>\n</ul></li>\n<li><p>五度 + 三度 = 七度的情况包括但不限于：</p>\n<ul>\n<li>纯五度 + 大三度 = 大七度</li>\n<li>纯五度 + 小三度 = 小七度</li>\n<li>增五度 + 大三度 = 增七度</li>\n<li>减五度 + 小三度 = 减七度</li>\n</ul></li>\n</ul>\n<h2 id=\"和弦\">和弦</h2>\n<p>参考<a href=\"https://www.musicca.com/zh/dictionary\">音乐词典</a>。</p>\n<p>两个及以上的音同时按下去，称为柱式和弦。</p>\n<p>最低音称为根音，根音向上 X 度的音称为 X 音，最高音称为冠音。以根音 C\n为例：</p>\n<h3 id=\"三和弦\">三和弦</h3>\n<p>三个大 / 小三度关系的音（根音、三音、五音），根音到冠音是五度（6~8\n半音）。</p>\n<table>\n<colgroup>\n<col style=\"width: 13%\">\n<col style=\"width: 13%\">\n<col style=\"width: 30%\">\n<col style=\"width: 43%\">\n</colgroup>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>根音到其他音的音程</th>\n<th>各个组成音之间相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>大三和弦</td>\n<td> C</td>\n<td> 大三度、纯五度</td>\n<td> 7=4+3</td>\n</tr>\n<tr>\n<td> 小三和弦</td>\n<td> Cm</td>\n<td> 小三度、纯五度</td>\n<td> 7=3+4</td>\n</tr>\n<tr>\n<td> 增三和弦</td>\n<td> Caug，C+</td>\n<td> 大三度、增五度</td>\n<td> 8=4+4</td>\n</tr>\n<tr>\n<td> 减三和弦</td>\n<td> Cdim，C°</td>\n<td> 小三度、减五度</td>\n<td> 6=3+3</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"七和弦\">七和弦</h3>\n<p>四个三度关系的音（根音、三音、五音、七音），根音到冠音是七度。</p>\n<p>可由三和弦再加一个七音得到。</p>\n<p>X+5 的意思是把 X 和弦的五音升半音。</p>\n<table>\n<colgroup>\n<col style=\"width: 27%\">\n<col style=\"width: 18%\">\n<col style=\"width: 20%\">\n<col style=\"width: 32%\">\n</colgroup>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>三和弦加一个七音</th>\n<th>各个组成音之间相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>大七和弦（大大七和弦）</td>\n<td>Cmaj7、CM7、CΔ7</td>\n<td> 大三和弦、大七度</td>\n<td> 11=4+3+4</td>\n</tr>\n<tr>\n<td> 属七和弦（大小七和弦）</td>\n<td>C7</td>\n<td> 大三和弦、小七度</td>\n<td> 10=4+3+3</td>\n</tr>\n<tr>\n<td> 小大七和弦</td>\n<td> CmM7</td>\n<td> 小三和弦、大七度</td>\n<td> 11=3+4+4</td>\n</tr>\n<tr>\n<td> 小七和弦（小小七和弦）</td>\n<td>Cm7</td>\n<td> 小三和弦、小七度</td>\n<td> 10=3+4+3</td>\n</tr>\n<tr>\n<td> 增大七和弦</td>\n<td> CM7+5</td>\n<td> 增三和弦、大七度</td>\n<td> 11=4+4+3</td>\n</tr>\n<tr>\n<td> 增小七和弦</td>\n<td> Caug7，C7+5</td>\n<td> 增三和弦、小七度</td>\n<td> 10=4+4+2</td>\n</tr>\n<tr>\n<td> 导七和弦（减小七和弦）</td>\n<td>Cm7-5</td>\n<td> 减三和弦、小七度</td>\n<td> 10=3+3+4</td>\n</tr>\n<tr>\n<td> 减七和弦（减减七和弦）</td>\n<td>Cdim7，C°7</td>\n<td> 减三和弦、减七度</td>\n<td> 9=3+3+3</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"其他\">其他</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>根音到其他音的音程</th>\n<th>各个组成音之间的音程</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>强力和弦</td>\n<td> C5</td>\n<td> 纯五度</td>\n<td> 7</td>\n</tr>\n<tr>\n<td> 大六和弦</td>\n<td> C6</td>\n<td> 大三和弦 + 大六度</td>\n<td> 4+3+2</td>\n</tr>\n<tr>\n<td> 小六和弦</td>\n<td> Cm6</td>\n<td> 小三和弦 + 大六度</td>\n<td> 3+4+2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"升降号\">升降号</h2>\n<p><span class=\"math inline\">\\(\\sharp\\)</span>\n为升号（sharp），用于把一个音升高半音。</p>\n<p>比如 <span class=\"math inline\">\\(\\mathrm{B \\sharp 4 =\nC5}\\)</span>。<code>B#4 = C5</code></p>\n<p><span class=\"math inline\">\\(\\flat\\)</span>\n为降号（flat），用于把一个音降低半音。</p>\n<p>比如 <span class=\"math inline\">\\(\\mathrm{D \\flat 4 = C \\sharp\n4}\\)</span>。<code>Db4 = C#4</code></p>\n<h2 id=\"音名和唱名\">音名和唱名</h2>\n<ul>\n<li><p>音名（pitch name，音高名称）</p>\n<ul>\n<li><p><code>C4</code>、<code>C#4</code>、<code>D4</code> 等是音名，对应<strong>绝对音高</strong>。</p></li>\n<li><p>比如 <span class=\"math inline\">\\(\\mathrm{C4 = 220 \\times\n\\sqrt[4]{2} Hz}\\)</span>。</p></li>\n</ul></li>\n</ul>\n<p><img src=\"/blog/images/piano.webp\"></p>\n<ul>\n<li><p>唱名（sol-fa note，唱名表示法 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a> 中的音符）</p>\n<ul>\n<li><p><code>do</code>、<code>re</code>、<code>mi</code>、<code>fa</code>、<code>sol</code>、<code>la</code>、<code>ti</code>\n是唱名，对应<strong>相对音高</strong>。</p></li>\n<li><p>在简谱里记作\n<code>1</code>、<code>2</code>、<code>3</code>、<code>4</code>、<code>5</code>、<code>6</code>、<code>7</code>。</p></li>\n<li><p>我们可以<strong>规定</strong> <code>1</code> 至 <code>7</code>\n分别<strong>对应</strong>七个白键 <code>C4</code> 至\n<code>B4</code>。这时简谱头部会有 <span class=\"math inline\">\\(\\mathrm{1\n= C}\\)</span>。</p></li>\n<li><p>在简谱里，如果用 <span class=\"math inline\">\\(1\\)</span> 表示\n<span class=\"math inline\">\\(\\mathrm{C4}\\)</span>，那么 <span class=\"math inline\">\\(\\mathrm{\\dot{1}}\\)</span> 就表示 <span class=\"math inline\">\\(\\mathrm{C5}\\)</span>。<span class=\"math inline\">\\(\\mathrm{\\dot{\\dot{1}}}\\)</span> 表示 <span class=\"math inline\">\\(\\mathrm{C6}\\)</span>，<span class=\"math inline\">\\(\\underset{·}{1}\\)</span> 表示 <span class=\"math inline\">\\(\\mathrm{C3}\\)</span>，以此类推。</p></li>\n</ul></li>\n</ul>\n<h2 id=\"音阶\">音阶</h2>\n<blockquote>\n<p>在音乐理论中，音阶（scale，尺度）是按基本频率或音高排序的任何一组音符。按音高递增排序的音阶是升序音阶，按音高递减排序的音阶是降序音阶。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p><code>A0 B0 C1 D1 E1 F1 G1 A1 B1 ... C4 D4 E4 F4 G4 A4 B4 ... C7 D7 E7 F7 G7 A7 B7 C8</code>\n就是一组升序音阶，对应钢琴的所有白键。</p>\n<p>在上面的例子中，每个八度里用到了七个音名 <code>C D E F G A B</code>（不包括区间右端点），这被称为<strong>七声音阶</strong>（heptatonic\nscale）。</p>\n<h2 id=\"音级\">音级</h2>\n<p>七声音阶里有七个音级（degree，刻度）：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center;\">音级</th>\n<th>名称</th>\n<th>英文名称</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\"> \\(Ⅰ\\)</span></td>\n<td> 主音</td>\n<td> tonic</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅱ\\)</span></td>\n<td> 上主音</td>\n<td> supertonic</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅲ\\)</span></td>\n<td> 中音</td>\n<td> mediant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅳ\\)</span></td>\n<td> 下属音</td>\n<td> subdominant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅴ\\)</span></td>\n<td> 属音</td>\n<td> dominant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅵ\\)</span></td>\n<td> 下中音</td>\n<td> submediant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅶ\\)</span></td>\n<td> 导音</td>\n<td> subtonic / leading note</td>\n</tr>\n</tbody>\n</table>\n<p>属 = 五</p>\n<h2 id=\"音阶相同是什么意思\">【音阶相同】是什么意思</h2>\n<p><span class=\"math inline\">\\(\\mathrm{C-D-E-F-G-A-B}\\)</span> 和</p>\n<p><span class=\"math inline\">\\(\\mathrm{A-B-C-D-E-F-G}\\)</span>\n音阶相同吗？</p>\n<p>这两组音阶分别都是同一个八度里的音（不包括右端点）。</p>\n<p>如果把 “音阶” 理解为【无限扩展到多个八度后，所有音的绝对音高】的话，得到的答案是相同的，因为【它们都使用了钢琴的所有白键】。</p>\n<p>但是看别人网上的回答，这两组音阶是不同的。</p>\n<p>原因在于：</p>\n<ul>\n<li><p>首先，主音不同。 前者以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span> 为主音，后者以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span> 为主音。</p></li>\n<li><p>其次，音级之间的音程关系（相隔的半音数）不同。</p>\n<p>前者为 <span class=\"math inline\">\\(2-2-1-2-2-2-1\\)</span>，</p>\n<p>后者为 <span class=\"math inline\">\\(2-1-2-2-1-2-2\\)</span>。（算上下一个八度里的主音）</p></li>\n</ul>\n<p>我们说两组音阶相同，意思是<strong>它们的主音、音程关系都相同</strong>。</p>\n<h2 id=\"调式\">调式</h2>\n<p>狭义的调式（mode） = 主音 + 音程关系</p>\n<ol type=\"1\">\n<li>确定一个起始音（主音）。</li>\n<li>从主音开始，往后（高音方向）取不同的音级。这些不同的音相隔的半音数可能不同，直到取完一个八度。</li>\n<li>再往前、往后取，直到取完所有八度。</li>\n</ol>\n<p>比如：</p>\n<ul>\n<li>以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-2-1-2-2-2-1)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n<strong> 自然大调</strong>。<code>C Major</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...B3-C4-D4-E4-F4-G4-A4-B4-C5...}\n\\]</span></li>\n<li> 以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-2-1-2-2-2-1)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n<strong> 自然大调</strong>。<code>A Major</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...G\\sharp3-A4-B4-C\\sharp4-D4-E4-F\\sharp4-G4\\sharp-A5...}\n\\]</span></li>\n<li> 以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-1-2-2-1-2-2)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n<strong> 自然小调</strong>。<code>A Minor</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...G3-A4-B4-C4-D4-E4-F4-G4-A5...}\n\\]</span></li>\n</ul>\n<h2 id=\"移调\">移调</h2>\n<p>移调（transpose）就是把所有音同时升高或降低相同的半音数。</p>\n<p>移调前后，所有音的相对间隔不变。即音程关系不变。</p>\n<h2 id=\"中古调式\">中古调式</h2>\n<p>7 种中古调式（church\nmode，教会调式）是指广义的调式，只确定了音程关系，还没确定主音。</p>\n<p>即确定了<code>主音-上主音-中音-下属音-属音-下中音-导音-主音</code>之间相隔的半音数。</p>\n<table>\n<colgroup>\n<col style=\"width: 38%\">\n<col style=\"width: 44%\">\n<col style=\"width: 16%\">\n</colgroup>\n<thead>\n<tr>\n<th>调式名</th>\n<th>别名 / 结构相同的调式</th>\n<th>相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>伊奥尼亚调式<br>Ionian mode</td>\n<td><strong> 自然大调</strong><code>Major</code><br>中国七声清乐宫调</td>\n<td><code>2-2-1-2-2-2-1</code></td>\n</tr>\n<tr>\n<td>多利亚调式<br>Dorian mode</td>\n<td> 中国七声清乐商调</td>\n<td><code>2-1-2-2-2-1-2</code></td>\n</tr>\n<tr>\n<td>弗里几亚调式<br>Phrygian mode</td>\n<td> 中国七声清乐角调</td>\n<td><code>1-2-2-2-1-2-2</code></td>\n</tr>\n<tr>\n<td>利底亚调式<br>Lydian mode</td>\n<td></td>\n<td><code>2-2-2-1-2-2-1</code></td>\n</tr>\n<tr>\n<td>混合利底亚调式<br>Mixolydian mode</td>\n<td> 中国七声清乐徵调</td>\n<td><code>2-2-1-2-2-1-2</code></td>\n</tr>\n<tr>\n<td>爱奥尼亚调式<br>Aeolian mode</td>\n<td><strong> 自然小调</strong><code>Minor</code><br>中国七声清乐羽调</td>\n<td><code>2-1-2-2-1-2-2</code></td>\n</tr>\n<tr>\n<td>洛克里亚调式<br>Iocrian mode</td>\n<td></td>\n<td><code>1-2-2-1-2-2-2</code></td>\n</tr>\n</tbody>\n</table>\n<p>在确定了主音之后，就是狭义的 <span class=\"math inline\">\\(7 \\times\n12\\)</span> 种调式。因为一个八度里的 <span class=\"math inline\">\\(12\\)</span> 个音每一个都可以作为主音。</p>\n<p>比如以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n为主音的伊奥尼亚调式，就叫 <code>C Ionian</code>、\n<code>C Major</code>、“<span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n自然大调” 或者 “<span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n大调”。</p>\n<h2 id=\"不同的中古调式可能使用相同的琴键\">不同的中古调式可能使用相同的琴键</h2>\n<p>仔细观察 7 种中古调式，你会发现【相邻音级之间相隔的半音数】在这 7\n种调式里是一个循环。</p>\n<ul id=\"colored\">\n<li>\n2-2-1-2-2-2-1\n</li>\n<li>\n2-1-2-2-2-1-2\n</li>\n<li>\n1-2-2-2-1-2-2\n</li>\n<li>\n2-2-2-1-2-2-1\n</li>\n<li>\n2-2-1-2-2-1-2\n</li>\n<li>\n2-1-2-2-1-2-2\n</li>\n<li>\n1-2-2-1-2-2-2\n</li>\n</ul>\n<style>\n    .shadow {\n        text-shadow: 1px 1px 2px #000;\n    }\n</style>\n<script>\n    const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'purple'];\n    const modes = ['Ionian', 'Dorian', 'Phrygian', 'Lydian', 'Mixolydian', 'Aeolian', 'Iocrian'];\n    const ul = document.getElementById(\"colored\");\n    const lis = ul.getElementsByTagName(\"li\");\n\n    Array.from(lis).forEach((li, index) => {\n        let digits = li.innerHTML.split('-');\n        let coloredDigits = digits.map((digit, i) => {\n            let colorIndex = (index + i) % colors.length;\n            let ret = `<span class=\"shadow\" style=\"color: ${colors[colorIndex]};\">${digit}</span>`;\n            return ret;\n        });\n        li.innerHTML = coloredDigits.join(' - ') + ' ：' + modes[index];\n    });\n</script>\n<p>因此，如果以 <span class=\"math inline\">\\(\\mathrm{X}\\)</span>\n为主音，构造自然大调音阶的话（加数字表示升高半音数）：</p>\n<ul>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{Y=(X+2)}\\)</span>\n为主音，构造出多利亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span>\n自然大调使用的琴键相同。</p></li>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{Z=(X+2+2)}\\)</span>\n为主音，构造出弗里几亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 自然大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span>\n多利亚调使用的琴键相同。</p></li>\n<li><p>……</p></li>\n<li><p> 以 <span class=\"math inline\">\\(\\mathrm{V=(X+2+2+1+2+2)}\\)</span>\n为主音，构造出自然小调的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 自然大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span> 多利亚调、<span class=\"math inline\">\\(\\mathrm{Z}\\)</span> 弗里几亚调……\n使用的琴键相同。</p></li>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{W=(X+2+2+1+2+2+2)}\\)</span>\n为主音，构造出洛克里亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span> 多利亚调、<span class=\"math inline\">\\(\\mathrm{Z}\\)</span> 弗里几亚调…… <span class=\"math inline\">\\(\\mathrm{V}\\)</span>\n自然小调使用的琴键相同。</p></li>\n</ul>\n<h2 id=\"调式音阶\">调式音阶</h2>\n<p>调式音阶为主音 + 音程关系。如：</p>\n<p>C 大调音阶为：<span class=\"math inline\">\\(\\mathrm{C-D-E-F-G-A-B}\\)</span></p>\n<p>A 小调音阶为：<span class=\"math inline\">\\(\\mathrm{A-B-C-D-E-F-G}\\)</span></p>\n<p>它们使用的绝对音名相同，叫<strong>关系大小调</strong>。</p>\n<h2 id=\"调内和弦\">调内和弦</h2>\n<p>以 C 大调上的三和弦为例，它是在 C\n大调音阶上取三个三度关系的音级构成和弦。</p>\n<p>有七个音级，每个都可以作为根音，于是七个和弦分别为：</p>\n<p>C Dm Em F G Am B°</p>\n<p>类似地，所有大调的七个三和弦都是【大 - 小 - 小 - 大 - 大 - 小 - 减】，因为：</p>\n<ul>\n<li>2-2-1-2-2-2-1\n<ul>\n<li>(2+2)+(1+2)=(4+3)= 大三和弦</li>\n<li> (2+1)+(2+2)=(3+4)= 小三和弦</li>\n<li>……</li>\n<li>(1+2)+(2+1)=(3+3)= 减三和弦</li>\n<li>以此类推</li>\n</ul></li>\n</ul>\n<p>在一级、四级、五级上（以它们为根音）的和弦都是大三和弦，也叫主和弦、下属和弦、属和弦。它们叫大调上的正三和弦，另外四个叫大调上的副三和弦。</p>\n<p>类似地，小调的各级三和弦为：【小 - 减 - 大 - 小 - 小 - 大 - 大】。这和小调相对于大调的音程关系看起来类似，都是把大调的\n6 当成小调的 1。</p>\n<p>大调的各级七和弦为：【大 - 小 - 小 - 大 - 属 - 小 - 导】。</p>\n<h2 id=\"五度圈\">五度圈</h2>\n<p><a href=\"https://www.musicca.com/zh/circle-of-fifths\">五度圈</a></p>\n<blockquote>\n<p>Father Charles Goes Down And Ends Battle</p>\n</blockquote>\n<p>4-1-5-2-6-3-7</p>\n<p>在钢琴上以 C 为起点依次向后取（上行）纯五度关系的音：</p>\n<p>C -&gt; G -&gt; D -&gt; A -&gt; E -&gt; B -&gt; F#/Gb -&gt; Db/C#\n-&gt; Ab -&gt; Eb -&gt; Bb -&gt; F -&gt; C</p>\n<p>最后又回到了 C，且这一圈里包含了十二个完整的音名。</p>\n<p>五度圈里顺时针上行是纯五度关系，逆时针上行 / 顺时针下行是纯四度关系。</p>\n<h2 id=\"和弦的功能\">和弦的功能</h2>\n<p>以大调为例。参考<a href=\"http://yinlvwu.com/2022/09/19/%e5%b8%b8%e7%94%a8%e5%92%8c%e5%bc%a6%e5%8a%9f%e8%83%bd%e8%a7%a3%e6%9e%90%e5%85%a8%e5%9c%a8%e8%bf%99%e4%ba%86%ef%bc%8c%e9%99%84%e5%ae%9e%e7%94%a8%e5%9b%be%e8%a1%a8%ef%bc%81/\">常用和弦功能解析全在这了，附实用图表！</a></p>\n<h3 id=\"主功能组-tonic\">主功能组 Tonic</h3>\n<p>一级和弦用于平稳地开始和结束。</p>\n<p>六级或三级和弦用于主的延续向后发展。</p>\n<h3 id=\"属功能组-dominant\">属功能组 Dominant</h3>\n<p>五级或七级和弦用于向主回归。</p>\n<h3 id=\"下属功能组-subdominant\">下属功能组 Subdominant</h3>\n<p>四级和弦：大的要来了，但是还没来。</p>\n<p>二级和弦：251</p>\n<h2 id=\"律式与调式的区别\">律式与调式的区别</h2>\n<p>律式是给乐器调音用的。</p>\n<p>在古代，并不能精确测得乐器的音高，所以要取一个能代表标准音高的东西，比如竹管。</p>\n<ul>\n<li><p>竹管越长、吹时的震动频率越低、音高越低。</p></li>\n<li><p>竹管越短、吹的震动频率越高、音高越高。</p></li>\n</ul>\n<p>取不同长度的竹管作为音名。乐器调音完，有了音名之后，在此基础上进行演奏。</p>\n<p>不同地区的演奏者喜欢使用不同长度、不同数目的竹管。比如笔者喜欢使用一些竹管，把它们取名为：</p>\n<p><span class=\"math display\">\\[\n\\mathrm{...G3、A3、}\\mathbf{C4、D4、E4、G4、A4、}\\mathrm{C5、D5...}\n\\]</span></p>\n<p><span class=\"math inline\">\\(\\mathrm{X \\in\n\\{C,D,E,G,A\\}}\\)</span>，其中 <span class=\"math inline\">\\(\\mathrm{Xn}\\)</span> 竹管的长度是 <span class=\"math inline\">\\(\\mathrm{X(n+1)}\\)</span>\n竹管长度的两倍，竹管越长音高越低。</p>\n<p>笔者把使用次数最多的竹管 <span class=\"math inline\">\\(\\mathrm{C4、C5...}\\)</span> 叫主音 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>。</p>\n<p><span class=\"math inline\">\\(\\mathrm{C、D、E、G、A}\\)</span>\n就是笔者的五个音级，对应唱名<strong>宫</strong>、<strong>商</strong>、<strong>角</strong>、<strong>徵</strong>、<strong>羽</strong>，<code>do</code>\n<code>re</code> <code>mi</code> <code>sol</code> <code>la</code> 或者\n<span class=\"math inline\">\\(1、2、3、5、6\\)</span>。</p>\n<p>这一些竹管之间，音程关系为 <span class=\"math inline\">\\(2-2-3-2-3\\)</span>。还可以往频率高、低的方向继续加竹管，并保持主音和音程关系不变，这就是笔者的调式。</p>\n<p>即：</p>\n<ul>\n<li>律式规定了：【音名】&lt;-&gt;【频率】的对应关系</li>\n<li>调式规定了：【唱名】&lt;-&gt;【音名】的对应关系</li>\n</ul>\n<h2 id=\"三分损益法\">三分损益法</h2>\n<p>三分损益法定音取的是 <em>单位长度</em>\n的竹管，所以宫、商、角、徵、羽是 <em>唱名</em>。</p>\n<ol type=\"1\">\n<li>取一个 <span class=\"math inline\">\\(81\\)</span>\n个单位长度的定音竹管，作为宫。</li>\n<li>截断（损）三分之一，剩余的三分之二（<span class=\"math inline\">\\(81\n\\times \\frac{2}{3} =  54\\)</span>）作为徵。</li>\n<li>再加长（益）三分之一，<span class=\"math inline\">\\(54 \\times\n\\frac{4}{3} = 72\\)</span>，作为商。</li>\n<li>再损三分之一，<span class=\"math inline\">\\(72 \\times \\frac{2}{3} =\n48\\)</span>，作为羽。</li>\n<li>再益三分之一，<span class=\"math inline\">\\(48 \\times \\frac{4}{3} =\n64\\)</span>，作为角。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th><strong>唱名</strong></th>\n<th>宫</th>\n<th>商</th>\n<th>角</th>\n<th>徵</th>\n<th>羽</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>单位长度</strong></td>\n<td><span class=\"math inline\"> \\(81\\)</span></td>\n<td><span class=\"math inline\">\\(72\\)</span></td>\n<td><span class=\"math inline\">\\(64\\)</span></td>\n<td><span class=\"math inline\">\\(54\\)</span></td>\n<td><span class=\"math inline\">\\(48\\)</span></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"十二律\">十二律</h2>\n<p><span class=\"math display\">\\[\n\\left\\{\n\\begin{aligned}\n64              \\times \\frac{2}{3} &amp; = 42\\frac{2}{3}   \\\\\n42\\frac{2}{3}   \\times \\frac{4}{3} &amp; = 56\\frac{8}{9}   \\\\\n56\\frac{8}{9}   \\times \\frac{4}{3} &amp; = 75\\frac{23}{27} \\\\\n75\\frac{23}{27} \\times \\frac{2}{3} &amp; = 50\\frac{46}{81} \\\\\n\\vdots\n\\end{aligned}\n\\right.\n\\]</span></p>\n<p>在上面的基础上继续损益，注意在 <span class=\"math inline\">\\(42\\frac{2}{3}\\)</span>\n处益了两次，然后继续损 — 益 — 损 — ……</p>\n<p>并规定 <strong>宫 = 黄钟</strong>，相当于十二平均律简谱的 <span class=\"math inline\">\\(\\mathbf{1=C}\\)</span>，得到十二律的各个音：</p>\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>音名</th>\n<th>来源</th>\n<th>去向</th>\n<th>单位长度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 1</td>\n<td> 黄钟</td>\n<td>起始音</td>\n<td>损，林钟</td>\n<td><span class=\"math inline\"> \\(81\\)</span></td>\n</tr>\n<tr>\n<td>2</td>\n<td> 大吕</td>\n<td>蕤宾，益</td>\n<td>损，夷则</td>\n<td><span class=\"math inline\"> \\(75\\frac{23}{27}\\)</span></td>\n</tr>\n<tr>\n<td>3</td>\n<td> 太簇</td>\n<td>林钟，益</td>\n<td>损，南吕</td>\n<td><span class=\"math inline\"> \\(72\\)</span></td>\n</tr>\n<tr>\n<td>4</td>\n<td> 夹钟</td>\n<td>夷则，益</td>\n<td>损，无射</td>\n<td><span class=\"math inline\"> \\(67\\frac{103}{243}\\)</span></td>\n</tr>\n<tr>\n<td>5</td>\n<td> 姑洗 Xiǎn</td>\n<td> 南吕，益</td>\n<td>损，应钟</td>\n<td><span class=\"math inline\"> \\(64\\)</span></td>\n</tr>\n<tr>\n<td>6</td>\n<td> 仲吕</td>\n<td>无射，益</td>\n<td>损，清黄钟</td>\n<td><span class=\"math inline\"> \\(59\\frac{2039}{2187}\\)</span></td>\n</tr>\n<tr>\n<td>7</td>\n<td> 蕤宾</td>\n<td>应钟，益</td>\n<td>益，大吕</td>\n<td><span class=\"math inline\"> \\(56\\frac{8}{9}\\)</span></td>\n</tr>\n<tr>\n<td>8</td>\n<td> 林钟</td>\n<td>黄钟，损</td>\n<td>益，太簇</td>\n<td><span class=\"math inline\"> \\(54\\)</span></td>\n</tr>\n<tr>\n<td>9</td>\n<td> 夷则</td>\n<td>大吕，损</td>\n<td>益，夹钟</td>\n<td><span class=\"math inline\"> \\(50\\frac{46}{81}\\)</span></td>\n</tr>\n<tr>\n<td>10</td>\n<td> 南吕</td>\n<td>太簇，损</td>\n<td>益，姑洗</td>\n<td><span class=\"math inline\"> \\(48\\)</span></td>\n</tr>\n<tr>\n<td>11</td>\n<td> 无射 Yì</td>\n<td> 夹钟，损</td>\n<td>益，仲吕</td>\n<td><span class=\"math inline\"> \\(44\\frac{692}{729}\\)</span></td>\n</tr>\n<tr>\n<td>12</td>\n<td> 应钟</td>\n<td>姑洗，损</td>\n<td>益，蕤宾</td>\n<td><span class=\"math inline\"> \\(42\\frac{2}{3}\\)</span></td>\n</tr>\n<tr>\n<td>13</td>\n<td> 清黄钟</td>\n<td>仲吕，损</td>\n<td>……</td>\n<td><span class=\"math inline\">\\(39\\frac{6265}{6561}\\)</span></td>\n</tr>\n</tbody>\n</table>\n<p>另外，可以在<a href=\"http://read.nlc.cn/user/index\">中国国家数字图书馆</a>查看不同版本的《史记》，宫、商、角、徵、羽对应的音名是不一样的。但<strong>如果认为以下几点同时成立的话，便可以推出\n{宫，商，角，徵，羽} 对应 {黄钟，太簇，姑洗，林钟，南吕}</strong>：</p>\n<ol type=\"1\">\n<li>{黄钟，大吕，太簇，夹钟，姑洗，仲吕，蕤宾，林钟，夷则，南吕，无射，应钟} 的音高顺序是正确的，从低音到高音。</li>\n<li>可以把第一条集合里的音类比成十二平均律的一个八度内的音名（绝对音高）。</li>\n<li>可以把 {宫，商，角，徵，羽，宫，...} 类比成十二平均律的唱名（相对音高）。</li>\n<li>第三条集合里的音，音程关系始终是 <span class=\"math inline\">\\(2-2-3-2-3\\)</span>。</li>\n<li>令<strong>宫 = 黄钟</strong>。</li>\n</ol>\n<h2 id=\"参考\">参考</h2>\n<p>[1] 维基百科.&nbsp;十二律 [EB/OL].(2023-07-14)[2023-09-02]. <a href=\"https://zh.wikipedia.org/zh-cn/十二律\">https://zh.wikipedia.org/zh-cn/ 十二律</a>.</p>\n<p>[2] 司马迁.&nbsp;史记：卷二十五 律書第三 [M/OL].(2020-09-10)[2023-09-02].\n<a href=\"https://zh.wikisource.org/wiki/史記/卷025\">https://zh.wikisource.org/wiki/ 史記 / 卷\n025</a>.</p>\n<p>[3] leeonix.\n【科普向】中国古代的十二律以及十二平均律 [EB/OL].(2019-07-30)[2023-09-02].\n<a href=\"https://www.bilibili.com/read/cv3194623/\">https://www.bilibili.com/read/cv3194623</a>.</p>\n<h2 id=\"弹琴\">弹琴</h2>\n<p>5 是 so，2 是 re，4 是 fa（four），3 是 mi（3 横过来是 m），6 是\nla，7 是 si</p>\n<p>每个手的大拇指叫一指，小拇指叫五指。</p>\n<p>穿指法：把一指从二指或三指下穿过。如：</p>\n<ul>\n<li>右手上行 1234567，指头的顺序是 1231234</li>\n<li> 左手下行 i765432，指：1231234</li>\n</ul>\n<p>跨指法：把三指或二指从一指上跨过</p>\n<ul>\n<li>右手下行 i765432，指头：5432132</li>\n<li> 左手上行 1234567，指：5432132</li>\n</ul>\n<p>为什么弹两只老虎的 565431 之前的 345 里的 4 要穿一次指：因为后面有 5\n以上的 6 了，如果按原来 “一指按 1，五指按 5” 的指法，弹完 5\n之后不能顺畅地弹 6，所以在弹完 3 之后要转成 “一指按 4” 的。</p>\n<p>为什么弹第二遍 565431 的时候，变成 “四指按 5” 的了</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://en.wikipedia.org/wiki/Solmization\">https://en.wikipedia.org/wiki/Solmization</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://en.wikipedia.org/wiki/Scale_(music)\">https://en.wikipedia.org/wiki/Scale_(music)</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n","excerpt":"","more":"<p>音乐基础不牢。</p>\n<h2 id=\"声音的频率\">声音的频率</h2>\n<p>声音是由声源振动产生的，通过机械波传递。</p>\n<p>声音的频率就是机械波的频率，也是声源振动的频率。</p>\n<p>比如声源振动 <span class=\"math inline\">\\(440\\)</span>\n次每秒，频率就是 <span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>。“每秒” 这个单位 <span class=\"math inline\">\\(\\mathrm{s^{-1}}\\)</span> 也记作赫兹 <span class=\"math inline\">\\(\\mathrm{Hz}\\)</span>，是国际单位制 “秒” 的导出单位。</p>\n<h2 id=\"钢琴琴键的声音频率\">钢琴琴键的声音频率</h2>\n<ol type=\"1\">\n<li><p>规定一个基准频率，比如 <span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>，作为第一个音。</p></li>\n<li><p>把第一个音的频率乘上 <span class=\"math inline\">\\(\\sqrt[12]{2}\\)</span>，就得到第二个音。一直乘，乘了十二次之后，第十三个音的频率正好是第一个音频率的两倍。</p>\n<p>这十三个音把一个 <span class=\"math inline\">\\(1:2\\)</span>\n的频率区间分成了十二个部分，每个音的频率都是对应部分的端点，相邻两音的频率比为\n<span class=\"math inline\">\\(1:\\sqrt[12]{2}\\)</span>。这就是十二平均律。</p></li>\n<li><p>如果把第一个音（<span class=\"math inline\">\\(440\\mathrm{Hz}\\)</span>）记作 <code>A4</code>，往前乘十二次，得到\n<span class=\"math inline\">\\(880\\mathrm{Hz}\\)</span>\n的音，就记作 <code>A5</code>。同理，再乘十二次，得到 <span class=\"math inline\">\\(1760\\mathrm{Hz}\\)</span> 就是 <code>A6</code>。</p>\n<p>还可以往后除，<span class=\"math inline\">\\(220\\mathrm{Hz}\\)</span>\n是 <code>A3</code>，<span class=\"math inline\">\\(110\\mathrm{Hz}\\)</span>\n是 <code>A2</code>。</p>\n<p>同理。<span class=\"math inline\">\\(27.5\\mathrm{Hz}\\)</span>\n是 <code>A0</code>，<span class=\"math inline\">\\(3520\\mathrm{Hz}\\)</span>\n是 <code>A7</code>。</p>\n<p><code>A7</code> 再往前乘三次，得到频率为 <span class=\"math inline\">\\(3520 \\times \\sqrt[4]{2} \\mathrm{Hz}\\)</span>\n的音，记作 <code>C8</code>。</p></li>\n<li><p>从 <code>A0</code> 到 <code>C8</code>，有 88 个音，频率构成首项为\n<span class=\"math inline\">\\(27.5\\)</span>，公比为 <span class=\"math inline\">\\(\\sqrt[12]{2}\\)</span> 的等比数列。这就是 88\n键钢琴每个琴键的频率。</p></li>\n</ol>\n<p>上面是规定 <span class=\"math inline\">\\(\\mathrm{A4=440Hz}\\)</span>\n时，还可以有其他规定。</p>\n<h2 id=\"音程\">音程</h2>\n<p>两个音之间的频率比，称为音程。</p>\n<p>频率比为 <span class=\"math inline\">\\(1:2\\)</span>\n的两个音之间，音程称为一个<strong>纯八度</strong>（简称八度）。</p>\n<p>快速认识钢琴一个八度里的音：</p>\n<p><img src=\"/blog/images/piano.webp\"></p>\n<p>两个相邻琴键的频率比，比如 <code>C4</code> 和 <code>C#4</code> 之间，频率比为\n<span class=\"math inline\">\\(1:\\sqrt[12]{2}\\)</span>，称为一个<strong>半音</strong>。也叫小二度。</p>\n<p>两个琴键相隔一个琴键的频率比，比如 <code>C4</code> 和 <code>D4</code> 之间，频率比为\n<span class=\"math inline\">\\(1:\\sqrt[6]{2}\\)</span>，称为两个半音。也叫一个<strong>全音</strong>或大二度。</p>\n<h2 id=\"音程速查表\">音程速查表</h2>\n<p>一四五八无大小，二三六七没有纯。</p>\n<p>P1、P8、P4、P5 是完全协和音程。</p>\n<p>M3、m3、M6、m6 是不完全协和音程。</p>\n<p>另外的是不协和音程。</p>\n<table>\n<colgroup>\n<col style=\"width: 14%\">\n<col style=\"width: 16%\">\n<col style=\"width: 16%\">\n<col style=\"width: 16%\">\n<col style=\"width: 17%\">\n<col style=\"width: 17%\">\n</colgroup>\n<thead>\n<tr>\n<th>相隔半音数</th>\n<th>音程名（P）</th>\n<th>音程名（M）</th>\n<th>音程名（m）</th>\n<th>音程名（增）</th>\n<th>音程名（减）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td> 纯一度 P1</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 减二度</td>\n</tr>\n<tr>\n<td> 1</td>\n<td></td>\n<td></td>\n<td> 小二度</td>\n<td>增一度</td>\n<td></td>\n</tr>\n<tr>\n<td> 2</td>\n<td></td>\n<td> 大二度</td>\n<td></td>\n<td></td>\n<td>减三度</td>\n</tr>\n<tr>\n<td> 3</td>\n<td></td>\n<td></td>\n<td> 小三度 m3</td>\n<td> 增二度</td>\n<td></td>\n</tr>\n<tr>\n<td> 4</td>\n<td></td>\n<td> 大三度 M3</td>\n<td></td>\n<td></td>\n<td> 减四度</td>\n</tr>\n<tr>\n<td> 5</td>\n<td> 纯四度 P4</td>\n<td></td>\n<td></td>\n<td> 增三度</td>\n<td></td>\n</tr>\n<tr>\n<td> 6</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 增四度</td>\n<td>减五度</td>\n</tr>\n<tr>\n<td> 7</td>\n<td> 纯五度 P5</td>\n<td></td>\n<td></td>\n<td></td>\n<td> 减六度</td>\n</tr>\n<tr>\n<td> 8</td>\n<td></td>\n<td></td>\n<td> 小六度 m6</td>\n<td> 增五度</td>\n<td></td>\n</tr>\n<tr>\n<td> 9</td>\n<td></td>\n<td> 大六度 M6</td>\n<td></td>\n<td></td>\n<td> 减七度</td>\n</tr>\n<tr>\n<td> 10</td>\n<td></td>\n<td></td>\n<td> 小七度</td>\n<td>增六度</td>\n<td></td>\n</tr>\n<tr>\n<td> 11</td>\n<td></td>\n<td> 大七度</td>\n<td></td>\n<td></td>\n<td>减八度</td>\n</tr>\n<tr>\n<td> 12</td>\n<td> 纯八度 P8</td>\n<td></td>\n<td></td>\n<td> 增七度</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>小某度 + 小二度 = 大某度</p></li>\n<li><p>大 / 纯某度 + 增一度 = 增某度</p></li>\n<li><p>小 / 纯某度 - 增一度 = 减某度</p></li>\n<li><p>二度 + 二度的情况包括但不限于：</p>\n<ul>\n<li>小二度 + 小二度 = 大二度</li>\n<li>大二度 + 大二度 = 大三度</li>\n<li>大二度 + 小二度 = 纯四度</li>\n</ul></li>\n<li><p>三度 + 三度 = 五度的情况包括但不限于：</p>\n<ul>\n<li>大三度 + 小三度 = 纯五度</li>\n<li>大三度 + 大三度 = 增五度</li>\n<li>小三度 + 小三度 = 减五度</li>\n</ul></li>\n<li><p>五度 + 三度 = 七度的情况包括但不限于：</p>\n<ul>\n<li>纯五度 + 大三度 = 大七度</li>\n<li>纯五度 + 小三度 = 小七度</li>\n<li>增五度 + 大三度 = 增七度</li>\n<li>减五度 + 小三度 = 减七度</li>\n</ul></li>\n</ul>\n<h2 id=\"和弦\">和弦</h2>\n<p>参考<a href=\"https://www.musicca.com/zh/dictionary\">音乐词典</a>。</p>\n<p>两个及以上的音同时按下去，称为柱式和弦。</p>\n<p>最低音称为根音，根音向上 X 度的音称为 X 音，最高音称为冠音。以根音 C\n为例：</p>\n<h3 id=\"三和弦\">三和弦</h3>\n<p>三个大 / 小三度关系的音（根音、三音、五音），根音到冠音是五度（6~8\n半音）。</p>\n<table>\n<colgroup>\n<col style=\"width: 13%\">\n<col style=\"width: 13%\">\n<col style=\"width: 30%\">\n<col style=\"width: 43%\">\n</colgroup>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>根音到其他音的音程</th>\n<th>各个组成音之间相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>大三和弦</td>\n<td> C</td>\n<td> 大三度、纯五度</td>\n<td> 7=4+3</td>\n</tr>\n<tr>\n<td> 小三和弦</td>\n<td> Cm</td>\n<td> 小三度、纯五度</td>\n<td> 7=3+4</td>\n</tr>\n<tr>\n<td> 增三和弦</td>\n<td> Caug，C+</td>\n<td> 大三度、增五度</td>\n<td> 8=4+4</td>\n</tr>\n<tr>\n<td> 减三和弦</td>\n<td> Cdim，C°</td>\n<td> 小三度、减五度</td>\n<td> 6=3+3</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"七和弦\">七和弦</h3>\n<p>四个三度关系的音（根音、三音、五音、七音），根音到冠音是七度。</p>\n<p>可由三和弦再加一个七音得到。</p>\n<p>X+5 的意思是把 X 和弦的五音升半音。</p>\n<table>\n<colgroup>\n<col style=\"width: 27%\">\n<col style=\"width: 18%\">\n<col style=\"width: 20%\">\n<col style=\"width: 32%\">\n</colgroup>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>三和弦加一个七音</th>\n<th>各个组成音之间相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>大七和弦（大大七和弦）</td>\n<td>Cmaj7、CM7、CΔ7</td>\n<td> 大三和弦、大七度</td>\n<td> 11=4+3+4</td>\n</tr>\n<tr>\n<td> 属七和弦（大小七和弦）</td>\n<td>C7</td>\n<td> 大三和弦、小七度</td>\n<td> 10=4+3+3</td>\n</tr>\n<tr>\n<td> 小大七和弦</td>\n<td> CmM7</td>\n<td> 小三和弦、大七度</td>\n<td> 11=3+4+4</td>\n</tr>\n<tr>\n<td> 小七和弦（小小七和弦）</td>\n<td>Cm7</td>\n<td> 小三和弦、小七度</td>\n<td> 10=3+4+3</td>\n</tr>\n<tr>\n<td> 增大七和弦</td>\n<td> CM7+5</td>\n<td> 增三和弦、大七度</td>\n<td> 11=4+4+3</td>\n</tr>\n<tr>\n<td> 增小七和弦</td>\n<td> Caug7，C7+5</td>\n<td> 增三和弦、小七度</td>\n<td> 10=4+4+2</td>\n</tr>\n<tr>\n<td> 导七和弦（减小七和弦）</td>\n<td>Cm7-5</td>\n<td> 减三和弦、小七度</td>\n<td> 10=3+3+4</td>\n</tr>\n<tr>\n<td> 减七和弦（减减七和弦）</td>\n<td>Cdim7，C°7</td>\n<td> 减三和弦、减七度</td>\n<td> 9=3+3+3</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"其他\">其他</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>符号</th>\n<th>根音到其他音的音程</th>\n<th>各个组成音之间的音程</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>强力和弦</td>\n<td> C5</td>\n<td> 纯五度</td>\n<td> 7</td>\n</tr>\n<tr>\n<td> 大六和弦</td>\n<td> C6</td>\n<td> 大三和弦 + 大六度</td>\n<td> 4+3+2</td>\n</tr>\n<tr>\n<td> 小六和弦</td>\n<td> Cm6</td>\n<td> 小三和弦 + 大六度</td>\n<td> 3+4+2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"升降号\">升降号</h2>\n<p><span class=\"math inline\">\\(\\sharp\\)</span>\n为升号（sharp），用于把一个音升高半音。</p>\n<p>比如 <span class=\"math inline\">\\(\\mathrm{B \\sharp 4 =\nC5}\\)</span>。<code>B#4 = C5</code></p>\n<p><span class=\"math inline\">\\(\\flat\\)</span>\n为降号（flat），用于把一个音降低半音。</p>\n<p>比如 <span class=\"math inline\">\\(\\mathrm{D \\flat 4 = C \\sharp\n4}\\)</span>。<code>Db4 = C#4</code></p>\n<h2 id=\"音名和唱名\">音名和唱名</h2>\n<ul>\n<li><p>音名（pitch name，音高名称）</p>\n<ul>\n<li><p><code>C4</code>、<code>C#4</code>、<code>D4</code> 等是音名，对应<strong>绝对音高</strong>。</p></li>\n<li><p>比如 <span class=\"math inline\">\\(\\mathrm{C4 = 220 \\times\n\\sqrt[4]{2} Hz}\\)</span>。</p></li>\n</ul></li>\n</ul>\n<p><img src=\"/blog/images/piano.webp\"></p>\n<ul>\n<li><p>唱名（sol-fa note，唱名表示法 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a> 中的音符）</p>\n<ul>\n<li><p><code>do</code>、<code>re</code>、<code>mi</code>、<code>fa</code>、<code>sol</code>、<code>la</code>、<code>ti</code>\n是唱名，对应<strong>相对音高</strong>。</p></li>\n<li><p>在简谱里记作\n<code>1</code>、<code>2</code>、<code>3</code>、<code>4</code>、<code>5</code>、<code>6</code>、<code>7</code>。</p></li>\n<li><p>我们可以<strong>规定</strong> <code>1</code> 至 <code>7</code>\n分别<strong>对应</strong>七个白键 <code>C4</code> 至\n<code>B4</code>。这时简谱头部会有 <span class=\"math inline\">\\(\\mathrm{1\n= C}\\)</span>。</p></li>\n<li><p>在简谱里，如果用 <span class=\"math inline\">\\(1\\)</span> 表示\n<span class=\"math inline\">\\(\\mathrm{C4}\\)</span>，那么 <span class=\"math inline\">\\(\\mathrm{\\dot{1}}\\)</span> 就表示 <span class=\"math inline\">\\(\\mathrm{C5}\\)</span>。<span class=\"math inline\">\\(\\mathrm{\\dot{\\dot{1}}}\\)</span> 表示 <span class=\"math inline\">\\(\\mathrm{C6}\\)</span>，<span class=\"math inline\">\\(\\underset{·}{1}\\)</span> 表示 <span class=\"math inline\">\\(\\mathrm{C3}\\)</span>，以此类推。</p></li>\n</ul></li>\n</ul>\n<h2 id=\"音阶\">音阶</h2>\n<blockquote>\n<p>在音乐理论中，音阶（scale，尺度）是按基本频率或音高排序的任何一组音符。按音高递增排序的音阶是升序音阶，按音高递减排序的音阶是降序音阶。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p><code>A0 B0 C1 D1 E1 F1 G1 A1 B1 ... C4 D4 E4 F4 G4 A4 B4 ... C7 D7 E7 F7 G7 A7 B7 C8</code>\n就是一组升序音阶，对应钢琴的所有白键。</p>\n<p>在上面的例子中，每个八度里用到了七个音名 <code>C D E F G A B</code>（不包括区间右端点），这被称为<strong>七声音阶</strong>（heptatonic\nscale）。</p>\n<h2 id=\"音级\">音级</h2>\n<p>七声音阶里有七个音级（degree，刻度）：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center;\">音级</th>\n<th>名称</th>\n<th>英文名称</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\"> \\(Ⅰ\\)</span></td>\n<td> 主音</td>\n<td> tonic</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅱ\\)</span></td>\n<td> 上主音</td>\n<td> supertonic</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅲ\\)</span></td>\n<td> 中音</td>\n<td> mediant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅳ\\)</span></td>\n<td> 下属音</td>\n<td> subdominant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅴ\\)</span></td>\n<td> 属音</td>\n<td> dominant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅵ\\)</span></td>\n<td> 下中音</td>\n<td> submediant</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><span class=\"math inline\">\\(Ⅶ\\)</span></td>\n<td> 导音</td>\n<td> subtonic / leading note</td>\n</tr>\n</tbody>\n</table>\n<p>属 = 五</p>\n<h2 id=\"音阶相同是什么意思\">【音阶相同】是什么意思</h2>\n<p><span class=\"math inline\">\\(\\mathrm{C-D-E-F-G-A-B}\\)</span> 和</p>\n<p><span class=\"math inline\">\\(\\mathrm{A-B-C-D-E-F-G}\\)</span>\n音阶相同吗？</p>\n<p>这两组音阶分别都是同一个八度里的音（不包括右端点）。</p>\n<p>如果把 “音阶” 理解为【无限扩展到多个八度后，所有音的绝对音高】的话，得到的答案是相同的，因为【它们都使用了钢琴的所有白键】。</p>\n<p>但是看别人网上的回答，这两组音阶是不同的。</p>\n<p>原因在于：</p>\n<ul>\n<li><p>首先，主音不同。 前者以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span> 为主音，后者以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span> 为主音。</p></li>\n<li><p>其次，音级之间的音程关系（相隔的半音数）不同。</p>\n<p>前者为 <span class=\"math inline\">\\(2-2-1-2-2-2-1\\)</span>，</p>\n<p>后者为 <span class=\"math inline\">\\(2-1-2-2-1-2-2\\)</span>。（算上下一个八度里的主音）</p></li>\n</ul>\n<p>我们说两组音阶相同，意思是<strong>它们的主音、音程关系都相同</strong>。</p>\n<h2 id=\"调式\">调式</h2>\n<p>狭义的调式（mode） = 主音 + 音程关系</p>\n<ol type=\"1\">\n<li>确定一个起始音（主音）。</li>\n<li>从主音开始，往后（高音方向）取不同的音级。这些不同的音相隔的半音数可能不同，直到取完一个八度。</li>\n<li>再往前、往后取，直到取完所有八度。</li>\n</ol>\n<p>比如：</p>\n<ul>\n<li>以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-2-1-2-2-2-1)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n<strong> 自然大调</strong>。<code>C Major</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...B3-C4-D4-E4-F4-G4-A4-B4-C5...}\n\\]</span></li>\n<li> 以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-2-1-2-2-2-1)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n<strong> 自然大调</strong>。<code>A Major</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...G\\sharp3-A4-B4-C\\sharp4-D4-E4-F\\sharp4-G4\\sharp-A5...}\n\\]</span></li>\n<li> 以 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为主音，音程关系为 <span class=\"math inline\">\\((2-1-2-2-1-2-2)\\)</span>\n的调式，称为 <span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n<strong> 自然小调</strong>。<code>A Minor</code> 用到的音名为： <span class=\"math display\">\\[\n\\mathrm{...G3-A4-B4-C4-D4-E4-F4-G4-A5...}\n\\]</span></li>\n</ul>\n<h2 id=\"移调\">移调</h2>\n<p>移调（transpose）就是把所有音同时升高或降低相同的半音数。</p>\n<p>移调前后，所有音的相对间隔不变。即音程关系不变。</p>\n<h2 id=\"中古调式\">中古调式</h2>\n<p>7 种中古调式（church\nmode，教会调式）是指广义的调式，只确定了音程关系，还没确定主音。</p>\n<p>即确定了<code>主音-上主音-中音-下属音-属音-下中音-导音-主音</code>之间相隔的半音数。</p>\n<table>\n<colgroup>\n<col style=\"width: 38%\">\n<col style=\"width: 44%\">\n<col style=\"width: 16%\">\n</colgroup>\n<thead>\n<tr>\n<th>调式名</th>\n<th>别名 / 结构相同的调式</th>\n<th>相隔的半音数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>伊奥尼亚调式<br>Ionian mode</td>\n<td><strong> 自然大调</strong><code>Major</code><br>中国七声清乐宫调</td>\n<td><code>2-2-1-2-2-2-1</code></td>\n</tr>\n<tr>\n<td>多利亚调式<br>Dorian mode</td>\n<td> 中国七声清乐商调</td>\n<td><code>2-1-2-2-2-1-2</code></td>\n</tr>\n<tr>\n<td>弗里几亚调式<br>Phrygian mode</td>\n<td> 中国七声清乐角调</td>\n<td><code>1-2-2-2-1-2-2</code></td>\n</tr>\n<tr>\n<td>利底亚调式<br>Lydian mode</td>\n<td></td>\n<td><code>2-2-2-1-2-2-1</code></td>\n</tr>\n<tr>\n<td>混合利底亚调式<br>Mixolydian mode</td>\n<td> 中国七声清乐徵调</td>\n<td><code>2-2-1-2-2-1-2</code></td>\n</tr>\n<tr>\n<td>爱奥尼亚调式<br>Aeolian mode</td>\n<td><strong> 自然小调</strong><code>Minor</code><br>中国七声清乐羽调</td>\n<td><code>2-1-2-2-1-2-2</code></td>\n</tr>\n<tr>\n<td>洛克里亚调式<br>Iocrian mode</td>\n<td></td>\n<td><code>1-2-2-1-2-2-2</code></td>\n</tr>\n</tbody>\n</table>\n<p>在确定了主音之后，就是狭义的 <span class=\"math inline\">\\(7 \\times\n12\\)</span> 种调式。因为一个八度里的 <span class=\"math inline\">\\(12\\)</span> 个音每一个都可以作为主音。</p>\n<p>比如以 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n为主音的伊奥尼亚调式，就叫 <code>C Ionian</code>、\n<code>C Major</code>、“<span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n自然大调” 或者 “<span class=\"math inline\">\\(\\mathrm{C}\\)</span>\n大调”。</p>\n<h2 id=\"不同的中古调式可能使用相同的琴键\">不同的中古调式可能使用相同的琴键</h2>\n<p>仔细观察 7 种中古调式，你会发现【相邻音级之间相隔的半音数】在这 7\n种调式里是一个循环。</p>\n<ul id=\"colored\">\n<li>\n2-2-1-2-2-2-1\n</li>\n<li>\n2-1-2-2-2-1-2\n</li>\n<li>\n1-2-2-2-1-2-2\n</li>\n<li>\n2-2-2-1-2-2-1\n</li>\n<li>\n2-2-1-2-2-1-2\n</li>\n<li>\n2-1-2-2-1-2-2\n</li>\n<li>\n1-2-2-1-2-2-2\n</li>\n</ul>\n<style>\n    .shadow {\n        text-shadow: 1px 1px 2px #000;\n    }\n</style>\n<script>\n    const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'purple'];\n    const modes = ['Ionian', 'Dorian', 'Phrygian', 'Lydian', 'Mixolydian', 'Aeolian', 'Iocrian'];\n    const ul = document.getElementById(\"colored\");\n    const lis = ul.getElementsByTagName(\"li\");\n\n    Array.from(lis).forEach((li, index) => {\n        let digits = li.innerHTML.split('-');\n        let coloredDigits = digits.map((digit, i) => {\n            let colorIndex = (index + i) % colors.length;\n            let ret = `<span class=\"shadow\" style=\"color: ${colors[colorIndex]};\">${digit}</span>`;\n            return ret;\n        });\n        li.innerHTML = coloredDigits.join(' - ') + ' ：' + modes[index];\n    });\n</script>\n<p>因此，如果以 <span class=\"math inline\">\\(\\mathrm{X}\\)</span>\n为主音，构造自然大调音阶的话（加数字表示升高半音数）：</p>\n<ul>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{Y=(X+2)}\\)</span>\n为主音，构造出多利亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span>\n自然大调使用的琴键相同。</p></li>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{Z=(X+2+2)}\\)</span>\n为主音，构造出弗里几亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 自然大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span>\n多利亚调使用的琴键相同。</p></li>\n<li><p>……</p></li>\n<li><p> 以 <span class=\"math inline\">\\(\\mathrm{V=(X+2+2+1+2+2)}\\)</span>\n为主音，构造出自然小调的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 自然大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span> 多利亚调、<span class=\"math inline\">\\(\\mathrm{Z}\\)</span> 弗里几亚调……\n使用的琴键相同。</p></li>\n<li><p>以 <span class=\"math inline\">\\(\\mathrm{W=(X+2+2+1+2+2+2)}\\)</span>\n为主音，构造出洛克里亚调式的音阶，与 <span class=\"math inline\">\\(\\mathrm{X}\\)</span> 大调、<span class=\"math inline\">\\(\\mathrm{Y}\\)</span> 多利亚调、<span class=\"math inline\">\\(\\mathrm{Z}\\)</span> 弗里几亚调…… <span class=\"math inline\">\\(\\mathrm{V}\\)</span>\n自然小调使用的琴键相同。</p></li>\n</ul>\n<h2 id=\"调式音阶\">调式音阶</h2>\n<p>调式音阶为主音 + 音程关系。如：</p>\n<p>C 大调音阶为：<span class=\"math inline\">\\(\\mathrm{C-D-E-F-G-A-B}\\)</span></p>\n<p>A 小调音阶为：<span class=\"math inline\">\\(\\mathrm{A-B-C-D-E-F-G}\\)</span></p>\n<p>它们使用的绝对音名相同，叫<strong>关系大小调</strong>。</p>\n<h2 id=\"调内和弦\">调内和弦</h2>\n<p>以 C 大调上的三和弦为例，它是在 C\n大调音阶上取三个三度关系的音级构成和弦。</p>\n<p>有七个音级，每个都可以作为根音，于是七个和弦分别为：</p>\n<p>C Dm Em F G Am B°</p>\n<p>类似地，所有大调的七个三和弦都是【大 - 小 - 小 - 大 - 大 - 小 - 减】，因为：</p>\n<ul>\n<li>2-2-1-2-2-2-1\n<ul>\n<li>(2+2)+(1+2)=(4+3)= 大三和弦</li>\n<li> (2+1)+(2+2)=(3+4)= 小三和弦</li>\n<li>……</li>\n<li>(1+2)+(2+1)=(3+3)= 减三和弦</li>\n<li>以此类推</li>\n</ul></li>\n</ul>\n<p>在一级、四级、五级上（以它们为根音）的和弦都是大三和弦，也叫主和弦、下属和弦、属和弦。它们叫大调上的正三和弦，另外四个叫大调上的副三和弦。</p>\n<p>类似地，小调的各级三和弦为：【小 - 减 - 大 - 小 - 小 - 大 - 大】。这和小调相对于大调的音程关系看起来类似，都是把大调的\n6 当成小调的 1。</p>\n<p>大调的各级七和弦为：【大 - 小 - 小 - 大 - 属 - 小 - 导】。</p>\n<h2 id=\"五度圈\">五度圈</h2>\n<p><a href=\"https://www.musicca.com/zh/circle-of-fifths\">五度圈</a></p>\n<blockquote>\n<p>Father Charles Goes Down And Ends Battle</p>\n</blockquote>\n<p>4-1-5-2-6-3-7</p>\n<p>在钢琴上以 C 为起点依次向后取（上行）纯五度关系的音：</p>\n<p>C -&gt; G -&gt; D -&gt; A -&gt; E -&gt; B -&gt; F#/Gb -&gt; Db/C#\n-&gt; Ab -&gt; Eb -&gt; Bb -&gt; F -&gt; C</p>\n<p>最后又回到了 C，且这一圈里包含了十二个完整的音名。</p>\n<p>五度圈里顺时针上行是纯五度关系，逆时针上行 / 顺时针下行是纯四度关系。</p>\n<h2 id=\"和弦的功能\">和弦的功能</h2>\n<p>以大调为例。参考<a href=\"http://yinlvwu.com/2022/09/19/%e5%b8%b8%e7%94%a8%e5%92%8c%e5%bc%a6%e5%8a%9f%e8%83%bd%e8%a7%a3%e6%9e%90%e5%85%a8%e5%9c%a8%e8%bf%99%e4%ba%86%ef%bc%8c%e9%99%84%e5%ae%9e%e7%94%a8%e5%9b%be%e8%a1%a8%ef%bc%81/\">常用和弦功能解析全在这了，附实用图表！</a></p>\n<h3 id=\"主功能组-tonic\">主功能组 Tonic</h3>\n<p>一级和弦用于平稳地开始和结束。</p>\n<p>六级或三级和弦用于主的延续向后发展。</p>\n<h3 id=\"属功能组-dominant\">属功能组 Dominant</h3>\n<p>五级或七级和弦用于向主回归。</p>\n<h3 id=\"下属功能组-subdominant\">下属功能组 Subdominant</h3>\n<p>四级和弦：大的要来了，但是还没来。</p>\n<p>二级和弦：251</p>\n<h2 id=\"律式与调式的区别\">律式与调式的区别</h2>\n<p>律式是给乐器调音用的。</p>\n<p>在古代，并不能精确测得乐器的音高，所以要取一个能代表标准音高的东西，比如竹管。</p>\n<ul>\n<li><p>竹管越长、吹时的震动频率越低、音高越低。</p></li>\n<li><p>竹管越短、吹的震动频率越高、音高越高。</p></li>\n</ul>\n<p>取不同长度的竹管作为音名。乐器调音完，有了音名之后，在此基础上进行演奏。</p>\n<p>不同地区的演奏者喜欢使用不同长度、不同数目的竹管。比如笔者喜欢使用一些竹管，把它们取名为：</p>\n<p><span class=\"math display\">\\[\n\\mathrm{...G3、A3、}\\mathbf{C4、D4、E4、G4、A4、}\\mathrm{C5、D5...}\n\\]</span></p>\n<p><span class=\"math inline\">\\(\\mathrm{X \\in\n\\{C,D,E,G,A\\}}\\)</span>，其中 <span class=\"math inline\">\\(\\mathrm{Xn}\\)</span> 竹管的长度是 <span class=\"math inline\">\\(\\mathrm{X(n+1)}\\)</span>\n竹管长度的两倍，竹管越长音高越低。</p>\n<p>笔者把使用次数最多的竹管 <span class=\"math inline\">\\(\\mathrm{C4、C5...}\\)</span> 叫主音 <span class=\"math inline\">\\(\\mathrm{C}\\)</span>。</p>\n<p><span class=\"math inline\">\\(\\mathrm{C、D、E、G、A}\\)</span>\n就是笔者的五个音级，对应唱名<strong>宫</strong>、<strong>商</strong>、<strong>角</strong>、<strong>徵</strong>、<strong>羽</strong>，<code>do</code>\n<code>re</code> <code>mi</code> <code>sol</code> <code>la</code> 或者\n<span class=\"math inline\">\\(1、2、3、5、6\\)</span>。</p>\n<p>这一些竹管之间，音程关系为 <span class=\"math inline\">\\(2-2-3-2-3\\)</span>。还可以往频率高、低的方向继续加竹管，并保持主音和音程关系不变，这就是笔者的调式。</p>\n<p>即：</p>\n<ul>\n<li>律式规定了：【音名】&lt;-&gt;【频率】的对应关系</li>\n<li>调式规定了：【唱名】&lt;-&gt;【音名】的对应关系</li>\n</ul>\n<h2 id=\"三分损益法\">三分损益法</h2>\n<p>三分损益法定音取的是 <em>单位长度</em>\n的竹管，所以宫、商、角、徵、羽是 <em>唱名</em>。</p>\n<ol type=\"1\">\n<li>取一个 <span class=\"math inline\">\\(81\\)</span>\n个单位长度的定音竹管，作为宫。</li>\n<li>截断（损）三分之一，剩余的三分之二（<span class=\"math inline\">\\(81\n\\times \\frac{2}{3} =  54\\)</span>）作为徵。</li>\n<li>再加长（益）三分之一，<span class=\"math inline\">\\(54 \\times\n\\frac{4}{3} = 72\\)</span>，作为商。</li>\n<li>再损三分之一，<span class=\"math inline\">\\(72 \\times \\frac{2}{3} =\n48\\)</span>，作为羽。</li>\n<li>再益三分之一，<span class=\"math inline\">\\(48 \\times \\frac{4}{3} =\n64\\)</span>，作为角。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th><strong>唱名</strong></th>\n<th>宫</th>\n<th>商</th>\n<th>角</th>\n<th>徵</th>\n<th>羽</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>单位长度</strong></td>\n<td><span class=\"math inline\"> \\(81\\)</span></td>\n<td><span class=\"math inline\">\\(72\\)</span></td>\n<td><span class=\"math inline\">\\(64\\)</span></td>\n<td><span class=\"math inline\">\\(54\\)</span></td>\n<td><span class=\"math inline\">\\(48\\)</span></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"十二律\">十二律</h2>\n<p><span class=\"math display\">\\[\n\\left\\{\n\\begin{aligned}\n64              \\times \\frac{2}{3} &amp; = 42\\frac{2}{3}   \\\\\n42\\frac{2}{3}   \\times \\frac{4}{3} &amp; = 56\\frac{8}{9}   \\\\\n56\\frac{8}{9}   \\times \\frac{4}{3} &amp; = 75\\frac{23}{27} \\\\\n75\\frac{23}{27} \\times \\frac{2}{3} &amp; = 50\\frac{46}{81} \\\\\n\\vdots\n\\end{aligned}\n\\right.\n\\]</span></p>\n<p>在上面的基础上继续损益，注意在 <span class=\"math inline\">\\(42\\frac{2}{3}\\)</span>\n处益了两次，然后继续损 — 益 — 损 — ……</p>\n<p>并规定 <strong>宫 = 黄钟</strong>，相当于十二平均律简谱的 <span class=\"math inline\">\\(\\mathbf{1=C}\\)</span>，得到十二律的各个音：</p>\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>音名</th>\n<th>来源</th>\n<th>去向</th>\n<th>单位长度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 1</td>\n<td> 黄钟</td>\n<td>起始音</td>\n<td>损，林钟</td>\n<td><span class=\"math inline\"> \\(81\\)</span></td>\n</tr>\n<tr>\n<td>2</td>\n<td> 大吕</td>\n<td>蕤宾，益</td>\n<td>损，夷则</td>\n<td><span class=\"math inline\"> \\(75\\frac{23}{27}\\)</span></td>\n</tr>\n<tr>\n<td>3</td>\n<td> 太簇</td>\n<td>林钟，益</td>\n<td>损，南吕</td>\n<td><span class=\"math inline\"> \\(72\\)</span></td>\n</tr>\n<tr>\n<td>4</td>\n<td> 夹钟</td>\n<td>夷则，益</td>\n<td>损，无射</td>\n<td><span class=\"math inline\"> \\(67\\frac{103}{243}\\)</span></td>\n</tr>\n<tr>\n<td>5</td>\n<td> 姑洗 Xiǎn</td>\n<td> 南吕，益</td>\n<td>损，应钟</td>\n<td><span class=\"math inline\"> \\(64\\)</span></td>\n</tr>\n<tr>\n<td>6</td>\n<td> 仲吕</td>\n<td>无射，益</td>\n<td>损，清黄钟</td>\n<td><span class=\"math inline\"> \\(59\\frac{2039}{2187}\\)</span></td>\n</tr>\n<tr>\n<td>7</td>\n<td> 蕤宾</td>\n<td>应钟，益</td>\n<td>益，大吕</td>\n<td><span class=\"math inline\"> \\(56\\frac{8}{9}\\)</span></td>\n</tr>\n<tr>\n<td>8</td>\n<td> 林钟</td>\n<td>黄钟，损</td>\n<td>益，太簇</td>\n<td><span class=\"math inline\"> \\(54\\)</span></td>\n</tr>\n<tr>\n<td>9</td>\n<td> 夷则</td>\n<td>大吕，损</td>\n<td>益，夹钟</td>\n<td><span class=\"math inline\"> \\(50\\frac{46}{81}\\)</span></td>\n</tr>\n<tr>\n<td>10</td>\n<td> 南吕</td>\n<td>太簇，损</td>\n<td>益，姑洗</td>\n<td><span class=\"math inline\"> \\(48\\)</span></td>\n</tr>\n<tr>\n<td>11</td>\n<td> 无射 Yì</td>\n<td> 夹钟，损</td>\n<td>益，仲吕</td>\n<td><span class=\"math inline\"> \\(44\\frac{692}{729}\\)</span></td>\n</tr>\n<tr>\n<td>12</td>\n<td> 应钟</td>\n<td>姑洗，损</td>\n<td>益，蕤宾</td>\n<td><span class=\"math inline\"> \\(42\\frac{2}{3}\\)</span></td>\n</tr>\n<tr>\n<td>13</td>\n<td> 清黄钟</td>\n<td>仲吕，损</td>\n<td>……</td>\n<td><span class=\"math inline\">\\(39\\frac{6265}{6561}\\)</span></td>\n</tr>\n</tbody>\n</table>\n<p>另外，可以在<a href=\"http://read.nlc.cn/user/index\">中国国家数字图书馆</a>查看不同版本的《史记》，宫、商、角、徵、羽对应的音名是不一样的。但<strong>如果认为以下几点同时成立的话，便可以推出\n{宫，商，角，徵，羽} 对应 {黄钟，太簇，姑洗，林钟，南吕}</strong>：</p>\n<ol type=\"1\">\n<li>{黄钟，大吕，太簇，夹钟，姑洗，仲吕，蕤宾，林钟，夷则，南吕，无射，应钟} 的音高顺序是正确的，从低音到高音。</li>\n<li>可以把第一条集合里的音类比成十二平均律的一个八度内的音名（绝对音高）。</li>\n<li>可以把 {宫，商，角，徵，羽，宫，...} 类比成十二平均律的唱名（相对音高）。</li>\n<li>第三条集合里的音，音程关系始终是 <span class=\"math inline\">\\(2-2-3-2-3\\)</span>。</li>\n<li>令<strong>宫 = 黄钟</strong>。</li>\n</ol>\n<h2 id=\"参考\">参考</h2>\n<p>[1] 维基百科.&nbsp;十二律 [EB/OL].(2023-07-14)[2023-09-02]. <a href=\"https://zh.wikipedia.org/zh-cn/十二律\">https://zh.wikipedia.org/zh-cn/ 十二律</a>.</p>\n<p>[2] 司马迁.&nbsp;史记：卷二十五 律書第三 [M/OL].(2020-09-10)[2023-09-02].\n<a href=\"https://zh.wikisource.org/wiki/史記/卷025\">https://zh.wikisource.org/wiki/ 史記 / 卷\n025</a>.</p>\n<p>[3] leeonix.\n【科普向】中国古代的十二律以及十二平均律 [EB/OL].(2019-07-30)[2023-09-02].\n<a href=\"https://www.bilibili.com/read/cv3194623/\">https://www.bilibili.com/read/cv3194623</a>.</p>\n<h2 id=\"弹琴\">弹琴</h2>\n<p>5 是 so，2 是 re，4 是 fa（four），3 是 mi（3 横过来是 m），6 是\nla，7 是 si</p>\n<p>每个手的大拇指叫一指，小拇指叫五指。</p>\n<p>穿指法：把一指从二指或三指下穿过。如：</p>\n<ul>\n<li>右手上行 1234567，指头的顺序是 1231234</li>\n<li> 左手下行 i765432，指：1231234</li>\n</ul>\n<p>跨指法：把三指或二指从一指上跨过</p>\n<ul>\n<li>右手下行 i765432，指头：5432132</li>\n<li> 左手上行 1234567，指：5432132</li>\n</ul>\n<p>为什么弹两只老虎的 565431 之前的 345 里的 4 要穿一次指：因为后面有 5\n以上的 6 了，如果按原来 “一指按 1，五指按 5” 的指法，弹完 5\n之后不能顺畅地弹 6，所以在弹完 3 之后要转成 “一指按 4” 的。</p>\n<p>为什么弹第二遍 565431 的时候，变成 “四指按 5” 的了</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://en.wikipedia.org/wiki/Solmization\">https://en.wikipedia.org/wiki/Solmization</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://en.wikipedia.org/wiki/Scale_(music)\">https://en.wikipedia.org/wiki/Scale_(music)</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n"},{"title":"在 Termux 上使用 Flask","date":"2023-07-19T05:45:00.000Z","_content":"\n好奇心旺盛。\n\n<!--more-->\n\n使用的主要工具：\n\n- Termux——模拟 Linux 环境\n- Flask——作为后端框架\n- Ngrok——内网穿透\n\n你需要：\n\n- 能够正常运行以上软件的安卓手机\n- 最好有一台电脑\n\n在模拟的 Linux 环境下运行 Ngrok **需要手机有 root 权限，仅用于解决[这个问题](#在开始之前解决-dns-问题)**。如果没有更好的，不使用 root 权限的方法的话，可以尝试[在 Termux 上安装 Linux 发行版](#另外)。\n\n[用 Magisk 获取 Android 手机的 root 权限](/blog/magisk.html)\n\n## Termux——模拟 Linux 环境\n\n[Termux](https://termux.dev/cn/index.html) 是一个在安卓手机上模拟 Linux 环境的 app。\n\n适用于 Android >= 7，无需手机 root。可以在 github 上[下载](https://github.com/termux/termux-app/releases/)。\n\nTermux 模拟 Linux 环境的根目录在手机的`/data/data/com.termux/files/`。\n\n### 如果手机没有 root：\n\n- 在 termux 内，最多访问到上一级目录 `com.termux/`，无法访问`/data/`。\n- 在 termux 外，使用文件管理器无法访问`/data/`。\n- 在 termux 内访问手机 SD 卡，需使用命令\n\n  ```sh\n  termux-setup-storage\n  ```\n\n  这会把 SD 卡目录`/storage/emulated/0/`链接到\n  `/data/data/com.termux/files/home/storage/shared/`。\n\n### 如果手机已 root：\n\n可以直接使用[MT 管理器](https://mt2.cn/)访问各个目录。这样转移文件比较方便。\n\n### 另外\n\n上面针对的是 Termux 模拟的 Linux 环境。**你可以使用 [PRoot](https://wiki.termux.com/wiki/PRoot) 或者 [TMOE](https://github.com/2moe/tmoe) 安装 Linux 发行版。**\n\n## Flask——后端框架\n\nFlask 是一个用 Python 编写的 Web 框架。[官网](https://flask.palletsprojects.com/) | [中文文档](https://dormousehole.readthedocs.io/)\n\n### 安装 Flask\n\n首先在 Termux 上安装 Python：\n\n```sh\npkg install python\n```\n\n然后用 Python 的包管理工具 pip 安装 Flask：\n\n```sh\npip install flask\n```\n\n### 在本地使用 Flask\n\n1. 在家目录下新建一个文件夹。名字随便取，用于存放代码：\n\n```sh\nmkdir ~/flask-app\n```\n\n2. 在文件夹里新建`app.py`文件——你可以在电脑上写好了传到手机，也可以用 MT 管理器写，还可以用 Vim 写。\n\n3. 编写代码：\n\n```py\nfrom flask import Flask, make_response\n\napp = Flask(__name__)\n\n@app.route('/')\n#处理根路由的视图函数\ndef index():\n\n    #创建 html 字符串\n    html_content = \"<h1>Hello, Flask!</h1>\"\n\n    #创建响应对象\n    response = make_response(html_content)\n    response.headers['Content-Type'] = 'text/html'\n\n    #返回响应\n    return response\n\n\nif __name__ == '__main__':\n    app.run()\n```\n\n4. 在`flask-app`目录下运行：\n\n```sh\npython app.py &\n```\n\n`&`表示把程序放在后台运行。\n\n你会看到：\n\n```txt\n * Serving Flask app 'app'\n * Debug mode: off\nWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n * Running on http://127.0.0.1:5000\nPress CTRL+C to quit\n```\n\n用浏览器访问`http://127.0.0.1:5000`，看到`Hello, Flask!`即为成功。\n\n### 在局域网内使用 Flask\n\n指定`app.run()`里面的`host`和`port`参数，即可在 Wi-Fi 局域网内访问手机。\n\n1. 在手机设置里搜索（或者使用`ifconfig`命令），找到你手机的 ip 地址。比如是`192.168.1.2`。\n\n2. 把代码里的`app.run()`改为\n\n   ```py\n   app.run(host='192.168.1.2', port=5000)\n   ```\n\n   端口号任意填不冲突就行，默认是`5000`。\n\n3. 如上文，运行。\n\n你可以在本机，或在局域网内任意设备的浏览器上访问`http://192.168.1.2:5000`。\n\n## Ngrok——内网穿透\n\n我们搭建了“服务器”。但是没有公网 ip，无法接受来自局域网外的访问。\n\nNgrok 是一个用于创建安全隧道的工具，它可以将本地的服务器或应用程序暴露到公共互联网。\n\n### 安装 Ngrok\n\n1. 查看 Termux 模拟 Linux 环境的 CPU 架构（跟随你手机的架构）\n\n   ```sh\n   uname -m\n   #或者\n   getprop ro.product.cpu.abi\n   ```\n\n2. [下载](https://ngrok.com/download)对应架构的 Ngrok 到手机。（最新版 Ngrok 没有开源，使用`pkg install ngrok`找不到包，因此在官网上下载）\n\n3. 解压文件，并移动到`~/../usr/bin`目录。\n\n   ```sh\n   tar xvzf ~/storage/shared/[你下载的.tgz文件路径] -C ~/../usr/bin\n   ```\n\n   这里用家目录的上一级`~/../`表示 linux 环境根目录，也可以使用`$PREFIX`。如果直接使用`/`，Termux 会认为是手机的根目录。\n\n### 在开始之前，解决 DNS 问题\n\n官网上的包，没有适配[^1] Termux。因此笔者在首次连接时，发生了连接错误。\n\n[^1]: [Termux 与 Linux 的区别：https://wiki.termux.com/wiki/Differences_from_Linux](https://wiki.termux.com/wiki/Differences_from_Linux)\n\n在运行的同时打印日志：\n\n```sh\nngrok http 5000 --log-level debug --log stdout\n```\n\n大部分内容略。关键在这里：\n\n```log\nread udp [::1]:43938->[::1]:53: read: connection refused\n```\n\n在本地主机`[::1]`的`43938`端口和`53`端口之间，建立连接失败。`53`是 DNS 服务的端口，说明 DNS 查询出了问题。\n\nNgrok 是用 Go 语言写的，\n\n> 根据 src/net/dnsclient_unix.go，如果 /etc/resolv.conf 不存在，则选择 localhost:53 作为名称服务器。[^2]\n\n[^2]: [woohaha 的回答：https://stackoverflow.com/a/49315513](https://stackoverflow.com/a/49315513)\n\n它想找`/etc/resolv.conf`查询 DNS，而在手机里找不到这个文件。进而向`localhost:53`发送 udp 数据包。手机的`53`端口没有开放，开启`1024`以下的端口需要 root 权限。\n\n在 Termux 里有`resolv.conf`文件，在`$PREFIX/usr/etc/resolv.conf`。但是官方的包没有改路径，源码也没有开放。\n\n笔者尝试修改 Ngrok 配置文件里的 `dns_resolver_ips`，但是没有用。\n\n#### 解决方法：\n\n把 Termux 的`resolv.conf`文件复制到手机`/etc/`目录下就行了。\n\n- 这需要 root 权限。\n- **这会修改`system`分区**。如果手机升级，卸载面具前还要刷回原来的`system`；如果空间不够，可以删一些没用的系统预装软件数据，通常在`/system/app/`。\n- 如果没有 root 权限，可以尝试[在 Termux 上安装 Linux 发行版](#另外)。\n\n### 使用 Ngrok\n\n先[注册账号](https://dashboard.ngrok.com/signup)，然后[进入仪表板](https://dashboard.ngrok.com)。\n\n#### 添加 Authtoken 到配置文件\n\n在本地服务器连接 Ngrok 服务器时，Authtoken 用于认证你的身份。\n\n点击 _Your Authtoken_，你会看到你的 Authtoken。使用命令：\n\n```sh\nngrok config add-authtoken [你的authtoken]\n```\n\n这会向配置文件`~/.config/ngrok/ngrok.yml`里写入：\n\n```yml\nauthtoken: [你的authtoken]\n```\n\n#### 添加 Domain 和 Edge\n\n点击 _Domains_。Ngrok 应该会提醒你领取一个域名，像`[几个英文单词].ngrok-free.app`。这是在前端发送请求时的目标域名。\n\n点击 _Edges_。点击 _+ New Edge_ 按钮创建一个 Edge。\n\n点击新建的 Edge，找到`edge=edghts_[一串字符]`，复制到手机备用。\n\n#### 允许跨域请求\n\nFlask 可以根据用户的请求，动态生成前端代码。而如果前端代码单独放在另一台服务器上，比如 Github Pages——\n\n从`github.io`向`ngrok-free.app`发送 HTTP 请求。由于两者不在同一域名下，浏览器为了用户安全，会拦截跨源请求。\n\n解决方法是，在后端的响应里加上[跨域资源共享（CORS）](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS)头。\n\nflask-cors 库可以给 Flask 的响应自动加上 CORS 头。[flask-cors 文档](https://flask-cors.readthedocs.io/)\n\n安装 flask-cors：\n\n```sh\npip install flask-cors\n```\n\n然后在`app.py`里加两行：\n\n```py\nfrom flask import Flask, make_response\nfrom flask_cors import CORS    #<----------\n\napp = Flask(__name__)\n\nCORS(app)                      #<----------\n\n@app.route('/')\n#处理根路由的视图函数\ndef index():\n\n    #创建 html 字符串\n    html_content = \"<h1>Hello, Flask!</h1>\"\n\n    #创建响应对象\n    response = make_response(html_content)\n    response.headers['Content-Type'] = 'text/html'\n\n    #返回响应\n    return response\n\n\nif __name__ == '__main__':\n    app.run()\n```\n\n#### 运行 Ngrok\n\n找到前面复制到手机上的`edge=edghts_[一串字符]`。\n\n先启动 Flask 到后台，再运行：\n\n```sh\nngrok tunnel --label edge=[一串字符] http://localhost:5000\n```\n\n#### 测试发送 HTTP 请求\n\n- 用 [curl](https://www.ruanyifeng.com/blog/2019/09/curl-reference.html) 发送`GET`请求\n\n  ```sh\n  curl -v [你的Ngrok域名]\n  ```\n\n- 在本地`file://`协议或其他域名下，用 [axios](https://www.axios-http.cn/) 发送跨域请求\n\n  ```html\n  <!DOCTYPE html>\n  <html>\n    <head>\n      <meta charset=\"utf-8\" />\n      <script src=\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"></script>\n    </head>\n\n    <body>\n      <script>\n        axios\n          .get(\"https://你的Ngrok域名\")\n          .then((response) => {\n            console.log(response);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      </script>\n    </body>\n  </html>\n  ```\n\n## 后续处理\n\n### 保活\n\n如果你想让服务器一直运行，在保持手机开机之外，还要：\n\n- 始终把 Termux 挂在后台，锁定，并忽略电池优化\n\n- 使用`nohup`命令让程序不挂起（往下看）↓\n\n### 启动服务器\n\n先启动 Termux，再依次启动 Flask 和 Ngrok。\n\n可以向`$PREFIX/usr/etc/profile`文件中添加以下几行命令， 让 Termux 启动的同时自执行：\n\n```sh\ncd ~/flask-app\nnohup python app.py &\nnohup ngrok tunnel --label edge=[一串字符] http://localhost:5000 &\n```\n\n### 关闭服务器\n\n使用`jobs`查看进程列表，`kill %[进程序号]`杀死进程。\n\n当然，你也可以直接杀掉 Termux 的后台。\n","source":"_posts/在Termux上使用Flask.md","raw":"---\ntitle: 在 Termux 上使用 Flask\ndate: 2023-7-19 13:45:00\npermalink: termux-flask-ngrok.html\n---\n\n好奇心旺盛。\n\n<!--more-->\n\n使用的主要工具：\n\n- Termux——模拟 Linux 环境\n- Flask——作为后端框架\n- Ngrok——内网穿透\n\n你需要：\n\n- 能够正常运行以上软件的安卓手机\n- 最好有一台电脑\n\n在模拟的 Linux 环境下运行 Ngrok **需要手机有 root 权限，仅用于解决[这个问题](#在开始之前解决-dns-问题)**。如果没有更好的，不使用 root 权限的方法的话，可以尝试[在 Termux 上安装 Linux 发行版](#另外)。\n\n[用 Magisk 获取 Android 手机的 root 权限](/blog/magisk.html)\n\n## Termux——模拟 Linux 环境\n\n[Termux](https://termux.dev/cn/index.html) 是一个在安卓手机上模拟 Linux 环境的 app。\n\n适用于 Android >= 7，无需手机 root。可以在 github 上[下载](https://github.com/termux/termux-app/releases/)。\n\nTermux 模拟 Linux 环境的根目录在手机的`/data/data/com.termux/files/`。\n\n### 如果手机没有 root：\n\n- 在 termux 内，最多访问到上一级目录 `com.termux/`，无法访问`/data/`。\n- 在 termux 外，使用文件管理器无法访问`/data/`。\n- 在 termux 内访问手机 SD 卡，需使用命令\n\n  ```sh\n  termux-setup-storage\n  ```\n\n  这会把 SD 卡目录`/storage/emulated/0/`链接到\n  `/data/data/com.termux/files/home/storage/shared/`。\n\n### 如果手机已 root：\n\n可以直接使用[MT 管理器](https://mt2.cn/)访问各个目录。这样转移文件比较方便。\n\n### 另外\n\n上面针对的是 Termux 模拟的 Linux 环境。**你可以使用 [PRoot](https://wiki.termux.com/wiki/PRoot) 或者 [TMOE](https://github.com/2moe/tmoe) 安装 Linux 发行版。**\n\n## Flask——后端框架\n\nFlask 是一个用 Python 编写的 Web 框架。[官网](https://flask.palletsprojects.com/) | [中文文档](https://dormousehole.readthedocs.io/)\n\n### 安装 Flask\n\n首先在 Termux 上安装 Python：\n\n```sh\npkg install python\n```\n\n然后用 Python 的包管理工具 pip 安装 Flask：\n\n```sh\npip install flask\n```\n\n### 在本地使用 Flask\n\n1. 在家目录下新建一个文件夹。名字随便取，用于存放代码：\n\n```sh\nmkdir ~/flask-app\n```\n\n2. 在文件夹里新建`app.py`文件——你可以在电脑上写好了传到手机，也可以用 MT 管理器写，还可以用 Vim 写。\n\n3. 编写代码：\n\n```py\nfrom flask import Flask, make_response\n\napp = Flask(__name__)\n\n@app.route('/')\n#处理根路由的视图函数\ndef index():\n\n    #创建 html 字符串\n    html_content = \"<h1>Hello, Flask!</h1>\"\n\n    #创建响应对象\n    response = make_response(html_content)\n    response.headers['Content-Type'] = 'text/html'\n\n    #返回响应\n    return response\n\n\nif __name__ == '__main__':\n    app.run()\n```\n\n4. 在`flask-app`目录下运行：\n\n```sh\npython app.py &\n```\n\n`&`表示把程序放在后台运行。\n\n你会看到：\n\n```txt\n * Serving Flask app 'app'\n * Debug mode: off\nWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n * Running on http://127.0.0.1:5000\nPress CTRL+C to quit\n```\n\n用浏览器访问`http://127.0.0.1:5000`，看到`Hello, Flask!`即为成功。\n\n### 在局域网内使用 Flask\n\n指定`app.run()`里面的`host`和`port`参数，即可在 Wi-Fi 局域网内访问手机。\n\n1. 在手机设置里搜索（或者使用`ifconfig`命令），找到你手机的 ip 地址。比如是`192.168.1.2`。\n\n2. 把代码里的`app.run()`改为\n\n   ```py\n   app.run(host='192.168.1.2', port=5000)\n   ```\n\n   端口号任意填不冲突就行，默认是`5000`。\n\n3. 如上文，运行。\n\n你可以在本机，或在局域网内任意设备的浏览器上访问`http://192.168.1.2:5000`。\n\n## Ngrok——内网穿透\n\n我们搭建了“服务器”。但是没有公网 ip，无法接受来自局域网外的访问。\n\nNgrok 是一个用于创建安全隧道的工具，它可以将本地的服务器或应用程序暴露到公共互联网。\n\n### 安装 Ngrok\n\n1. 查看 Termux 模拟 Linux 环境的 CPU 架构（跟随你手机的架构）\n\n   ```sh\n   uname -m\n   #或者\n   getprop ro.product.cpu.abi\n   ```\n\n2. [下载](https://ngrok.com/download)对应架构的 Ngrok 到手机。（最新版 Ngrok 没有开源，使用`pkg install ngrok`找不到包，因此在官网上下载）\n\n3. 解压文件，并移动到`~/../usr/bin`目录。\n\n   ```sh\n   tar xvzf ~/storage/shared/[你下载的.tgz文件路径] -C ~/../usr/bin\n   ```\n\n   这里用家目录的上一级`~/../`表示 linux 环境根目录，也可以使用`$PREFIX`。如果直接使用`/`，Termux 会认为是手机的根目录。\n\n### 在开始之前，解决 DNS 问题\n\n官网上的包，没有适配[^1] Termux。因此笔者在首次连接时，发生了连接错误。\n\n[^1]: [Termux 与 Linux 的区别：https://wiki.termux.com/wiki/Differences_from_Linux](https://wiki.termux.com/wiki/Differences_from_Linux)\n\n在运行的同时打印日志：\n\n```sh\nngrok http 5000 --log-level debug --log stdout\n```\n\n大部分内容略。关键在这里：\n\n```log\nread udp [::1]:43938->[::1]:53: read: connection refused\n```\n\n在本地主机`[::1]`的`43938`端口和`53`端口之间，建立连接失败。`53`是 DNS 服务的端口，说明 DNS 查询出了问题。\n\nNgrok 是用 Go 语言写的，\n\n> 根据 src/net/dnsclient_unix.go，如果 /etc/resolv.conf 不存在，则选择 localhost:53 作为名称服务器。[^2]\n\n[^2]: [woohaha 的回答：https://stackoverflow.com/a/49315513](https://stackoverflow.com/a/49315513)\n\n它想找`/etc/resolv.conf`查询 DNS，而在手机里找不到这个文件。进而向`localhost:53`发送 udp 数据包。手机的`53`端口没有开放，开启`1024`以下的端口需要 root 权限。\n\n在 Termux 里有`resolv.conf`文件，在`$PREFIX/usr/etc/resolv.conf`。但是官方的包没有改路径，源码也没有开放。\n\n笔者尝试修改 Ngrok 配置文件里的 `dns_resolver_ips`，但是没有用。\n\n#### 解决方法：\n\n把 Termux 的`resolv.conf`文件复制到手机`/etc/`目录下就行了。\n\n- 这需要 root 权限。\n- **这会修改`system`分区**。如果手机升级，卸载面具前还要刷回原来的`system`；如果空间不够，可以删一些没用的系统预装软件数据，通常在`/system/app/`。\n- 如果没有 root 权限，可以尝试[在 Termux 上安装 Linux 发行版](#另外)。\n\n### 使用 Ngrok\n\n先[注册账号](https://dashboard.ngrok.com/signup)，然后[进入仪表板](https://dashboard.ngrok.com)。\n\n#### 添加 Authtoken 到配置文件\n\n在本地服务器连接 Ngrok 服务器时，Authtoken 用于认证你的身份。\n\n点击 _Your Authtoken_，你会看到你的 Authtoken。使用命令：\n\n```sh\nngrok config add-authtoken [你的authtoken]\n```\n\n这会向配置文件`~/.config/ngrok/ngrok.yml`里写入：\n\n```yml\nauthtoken: [你的authtoken]\n```\n\n#### 添加 Domain 和 Edge\n\n点击 _Domains_。Ngrok 应该会提醒你领取一个域名，像`[几个英文单词].ngrok-free.app`。这是在前端发送请求时的目标域名。\n\n点击 _Edges_。点击 _+ New Edge_ 按钮创建一个 Edge。\n\n点击新建的 Edge，找到`edge=edghts_[一串字符]`，复制到手机备用。\n\n#### 允许跨域请求\n\nFlask 可以根据用户的请求，动态生成前端代码。而如果前端代码单独放在另一台服务器上，比如 Github Pages——\n\n从`github.io`向`ngrok-free.app`发送 HTTP 请求。由于两者不在同一域名下，浏览器为了用户安全，会拦截跨源请求。\n\n解决方法是，在后端的响应里加上[跨域资源共享（CORS）](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS)头。\n\nflask-cors 库可以给 Flask 的响应自动加上 CORS 头。[flask-cors 文档](https://flask-cors.readthedocs.io/)\n\n安装 flask-cors：\n\n```sh\npip install flask-cors\n```\n\n然后在`app.py`里加两行：\n\n```py\nfrom flask import Flask, make_response\nfrom flask_cors import CORS    #<----------\n\napp = Flask(__name__)\n\nCORS(app)                      #<----------\n\n@app.route('/')\n#处理根路由的视图函数\ndef index():\n\n    #创建 html 字符串\n    html_content = \"<h1>Hello, Flask!</h1>\"\n\n    #创建响应对象\n    response = make_response(html_content)\n    response.headers['Content-Type'] = 'text/html'\n\n    #返回响应\n    return response\n\n\nif __name__ == '__main__':\n    app.run()\n```\n\n#### 运行 Ngrok\n\n找到前面复制到手机上的`edge=edghts_[一串字符]`。\n\n先启动 Flask 到后台，再运行：\n\n```sh\nngrok tunnel --label edge=[一串字符] http://localhost:5000\n```\n\n#### 测试发送 HTTP 请求\n\n- 用 [curl](https://www.ruanyifeng.com/blog/2019/09/curl-reference.html) 发送`GET`请求\n\n  ```sh\n  curl -v [你的Ngrok域名]\n  ```\n\n- 在本地`file://`协议或其他域名下，用 [axios](https://www.axios-http.cn/) 发送跨域请求\n\n  ```html\n  <!DOCTYPE html>\n  <html>\n    <head>\n      <meta charset=\"utf-8\" />\n      <script src=\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"></script>\n    </head>\n\n    <body>\n      <script>\n        axios\n          .get(\"https://你的Ngrok域名\")\n          .then((response) => {\n            console.log(response);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      </script>\n    </body>\n  </html>\n  ```\n\n## 后续处理\n\n### 保活\n\n如果你想让服务器一直运行，在保持手机开机之外，还要：\n\n- 始终把 Termux 挂在后台，锁定，并忽略电池优化\n\n- 使用`nohup`命令让程序不挂起（往下看）↓\n\n### 启动服务器\n\n先启动 Termux，再依次启动 Flask 和 Ngrok。\n\n可以向`$PREFIX/usr/etc/profile`文件中添加以下几行命令， 让 Termux 启动的同时自执行：\n\n```sh\ncd ~/flask-app\nnohup python app.py &\nnohup ngrok tunnel --label edge=[一串字符] http://localhost:5000 &\n```\n\n### 关闭服务器\n\n使用`jobs`查看进程列表，`kill %[进程序号]`杀死进程。\n\n当然，你也可以直接杀掉 Termux 的后台。\n","slug":"在Termux上使用Flask","published":1,"updated":"2025-09-14T14:52:21.283Z","__permalink":"termux-flask-ngrok.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnh00095ws6gd13fm6m","content":"<p>好奇心旺盛。</p>\n<span id=\"more\"></span>\n<p>使用的主要工具：</p>\n<ul>\n<li>Termux—— 模拟 Linux 环境</li>\n<li> Flask—— 作为后端框架</li>\n<li> Ngrok—— 内网穿透</li>\n</ul>\n<p>你需要：</p>\n<ul>\n<li>能够正常运行以上软件的安卓手机</li>\n<li>最好有一台电脑</li>\n</ul>\n<p>在模拟的 Linux 环境下运行 Ngrok <strong>需要手机有 root\n权限，仅用于解决<a href=\"#在开始之前解决-dns-问题\">这个问题</a></strong>。如果没有更好的，不使用\nroot 权限的方法的话，可以尝试<a href=\"#另外\">在 Termux 上安装 Linux\n发行版</a>。</p>\n<p><a href=\"/blog/magisk.html\">用 Magisk 获取 Android 手机的 root\n权限</a></p>\n<h2 id=\"termux模拟-linux-环境\">Termux—— 模拟 Linux 环境</h2>\n<p><a href=\"https://termux.dev/cn/index.html\">Termux</a>\n是一个在安卓手机上模拟 Linux 环境的 app。</p>\n<p>适用于 Android &gt;= 7，无需手机 root。可以在 github 上<a href=\"https://github.com/termux/termux-app/releases/\">下载</a>。</p>\n<p>Termux 模拟 Linux\n环境的根目录在手机的 <code>/data/data/com.termux/files/</code>。</p>\n<h3 id=\"如果手机没有-root\">如果手机没有 root：</h3>\n<ul>\n<li><p>在 termux 内，最多访问到上一级目录\n<code>com.termux/</code>，无法访问 <code>/data/</code>。</p></li>\n<li><p>在 termux\n外，使用文件管理器无法访问 <code>/data/</code>。</p></li>\n<li><p>在 termux 内访问手机 SD 卡，需使用命令</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">termux-setup-storage</span><br></pre></td></tr></tbody></table></figure>\n<p>这会把 SD 卡目录 <code>/storage/emulated/0/</code> 链接到\n<code>/data/data/com.termux/files/home/storage/shared/</code>。</p></li>\n</ul>\n<h3 id=\"如果手机已-root\">如果手机已 root：</h3>\n<p>可以直接使用 <a href=\"https://mt2.cn/\">MT\n管理器</a>访问各个目录。这样转移文件比较方便。</p>\n<h3 id=\"另外\">另外</h3>\n<p>上面针对的是 Termux 模拟的 Linux 环境。<strong>你可以使用 <a href=\"https://wiki.termux.com/wiki/PRoot\">PRoot</a> 或者 <a href=\"https://github.com/2moe/tmoe\">TMOE</a> 安装 Linux\n发行版。</strong></p>\n<h2 id=\"flask后端框架\">Flask—— 后端框架</h2>\n<p>Flask 是一个用 Python 编写的 Web 框架。<a href=\"https://flask.palletsprojects.com/\">官网</a> | <a href=\"https://dormousehole.readthedocs.io/\">中文文档</a></p>\n<h3 id=\"安装-flask\">安装 Flask</h3>\n<p>首先在 Termux 上安装 Python：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install python</span><br></pre></td></tr></tbody></table></figure>\n<p>然后用 Python 的包管理工具 pip 安装 Flask：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install flask</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"在本地使用-flask\">在本地使用 Flask</h3>\n<ol type=\"1\">\n<li>在家目录下新建一个文件夹。名字随便取，用于存放代码：</li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> ~/flask-app</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li><p>在文件夹里新建 <code>app.py</code> 文件 —— 你可以在电脑上写好了传到手机，也可以用\nMT 管理器写，还可以用 Vim 写。</p></li>\n<li><p>编写代码：</p></li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, make_response</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">'/'</span></span>)</span></span><br><span class=\"line\"><span class=\"comment\">#处理根路由的视图函数</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建 html 字符串</span></span><br><span class=\"line\">    html_content = <span class=\"string\">\"&lt;h1&gt;Hello, Flask!&lt;/h1&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建响应对象</span></span><br><span class=\"line\">    response = make_response(html_content)</span><br><span class=\"line\">    response.headers[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'text/html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#返回响应</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"4\" type=\"1\">\n<li>在 <code>flask-app</code> 目录下运行：</li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python app.py &amp;</span><br></pre></td></tr></tbody></table></figure>\n<p><code>&amp;</code> 表示把程序放在后台运行。</p>\n<p>你会看到：</p>\n<figure class=\"highlight txt\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> * Serving Flask app 'app'</span><br><span class=\"line\"> * Debug mode: off</span><br><span class=\"line\">WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.</span><br><span class=\"line\"> * Running on http://127.0.0.1:5000</span><br><span class=\"line\">Press CTRL+C to quit</span><br></pre></td></tr></tbody></table></figure>\n<p>用浏览器访问 <code>http://127.0.0.1:5000</code>，看到 <code>Hello, Flask!</code> 即为成功。</p>\n<h3 id=\"在局域网内使用-flask\">在局域网内使用 Flask</h3>\n<p>指定 <code>app.run()</code> 里面的 <code>host</code> 和 <code>port</code> 参数，即可在\nWi-Fi 局域网内访问手机。</p>\n<ol type=\"1\">\n<li><p>在手机设置里搜索（或者使用 <code>ifconfig</code> 命令），找到你手机的\nip 地址。比如是 <code>192.168.1.2</code>。</p></li>\n<li><p>把代码里的 <code>app.run()</code> 改为</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.run(host=<span class=\"string\">'192.168.1.2'</span>, port=<span class=\"number\">5000</span>)</span><br></pre></td></tr></tbody></table></figure>\n<p>端口号任意填不冲突就行，默认是 <code>5000</code>。</p></li>\n<li><p>如上文，运行。</p></li>\n</ol>\n<p>你可以在本机，或在局域网内任意设备的浏览器上访问 <code>http://192.168.1.2:5000</code>。</p>\n<h2 id=\"ngrok内网穿透\">Ngrok—— 内网穿透</h2>\n<p>我们搭建了 “服务器”。但是没有公网 ip，无法接受来自局域网外的访问。</p>\n<p>Ngrok\n是一个用于创建安全隧道的工具，它可以将本地的服务器或应用程序暴露到公共互联网。</p>\n<h3 id=\"安装-ngrok\">安装 Ngrok</h3>\n<ol type=\"1\">\n<li><p>查看 Termux 模拟 Linux 环境的 CPU 架构（跟随你手机的架构）</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">uname</span> -m</span><br><span class=\"line\"><span class=\"comment\">#或者</span></span><br><span class=\"line\">getprop ro.product.cpu.abi</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p><a href=\"https://ngrok.com/download\">下载</a>对应架构的 Ngrok\n到手机。（最新版 Ngrok\n没有开源，使用 <code>pkg install ngrok</code> 找不到包，因此在官网上下载）</p></li>\n<li><p>解压文件，并移动到 <code>~/../usr/bin</code> 目录。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvzf ~/storage/shared/[你下载的.tgz文件路径] -C ~/../usr/bin</span><br></pre></td></tr></tbody></table></figure>\n<p>这里用家目录的上一级 <code>~/../</code> 表示 linux\n环境根目录，也可以使用 <code>$PREFIX</code>。如果直接使用 <code>/</code>，Termux\n会认为是手机的根目录。</p></li>\n</ol>\n<h3 id=\"在开始之前解决-dns-问题\">在开始之前，解决 DNS 问题</h3>\n<p>官网上的包，没有适配 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a>\nTermux。因此笔者在首次连接时，发生了连接错误。</p>\n<p>在运行的同时打印日志：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok http 5000 --log-level debug --<span class=\"built_in\">log</span> stdout</span><br></pre></td></tr></tbody></table></figure>\n<p>大部分内容略。关键在这里：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">read udp [::1]:43938-&gt;[::1]:53: read: connection refused</span><br></pre></td></tr></tbody></table></figure>\n<p>在本地主机 <code>[::1]</code> 的 <code>43938</code> 端口和 <code>53</code> 端口之间，建立连接失败。<code>53</code> 是\nDNS 服务的端口，说明 DNS 查询出了问题。</p>\n<p>Ngrok 是用 Go 语言写的，</p>\n<blockquote>\n<p>根据 src/net/dnsclient_unix.go，如果 /etc/resolv.conf 不存在，则选择\nlocalhost:53 作为名称服务器。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p>它想找 <code>/etc/resolv.conf</code> 查询\nDNS，而在手机里找不到这个文件。进而向 <code>localhost:53</code> 发送 udp\n数据包。手机的 <code>53</code> 端口没有开放，开启 <code>1024</code> 以下的端口需要\nroot 权限。</p>\n<p>在 Termux\n里有 <code>resolv.conf</code> 文件，在 <code>$PREFIX/usr/etc/resolv.conf</code>。但是官方的包没有改路径，源码也没有开放。</p>\n<p>笔者尝试修改 Ngrok 配置文件里的\n<code>dns_resolver_ips</code>，但是没有用。</p>\n<h4 id=\"解决方法\">解决方法：</h4>\n<p>把 Termux\n的 <code>resolv.conf</code> 文件复制到手机 <code>/etc/</code> 目录下就行了。</p>\n<ul>\n<li>这需要 root 权限。</li>\n<li><strong>这会修改 <code>system</code> 分区</strong>。如果手机升级，卸载面具前还要刷回原来的 <code>system</code>；如果空间不够，可以删一些没用的系统预装软件数据，通常在 <code>/system/app/</code>。</li>\n<li>如果没有 root 权限，可以尝试<a href=\"#另外\">在 Termux 上安装 Linux\n发行版</a>。</li>\n</ul>\n<h3 id=\"使用-ngrok\">使用 Ngrok</h3>\n<p>先<a href=\"https://dashboard.ngrok.com/signup\">注册账号</a>，然后<a href=\"https://dashboard.ngrok.com\">进入仪表板</a>。</p>\n<h4 id=\"添加-authtoken-到配置文件\">添加 Authtoken 到配置文件</h4>\n<p>在本地服务器连接 Ngrok 服务器时，Authtoken 用于认证你的身份。</p>\n<p>点击 <em>Your Authtoken</em>，你会看到你的 Authtoken。使用命令：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok config add-authtoken [你的authtoken]</span><br></pre></td></tr></tbody></table></figure>\n<p>这会向配置文件 <code>~/.config/ngrok/ngrok.yml</code> 里写入：</p>\n<figure class=\"highlight yml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">authtoken:</span> [<span class=\"string\">你的authtoken</span>]</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"添加-domain-和-edge\">添加 Domain 和 Edge</h4>\n<p>点击 <em>Domains</em>。Ngrok\n应该会提醒你领取一个域名，像 <code>[几个英文单词].ngrok-free.app</code>。这是在前端发送请求时的目标域名。</p>\n<p>点击 <em>Edges</em>。点击 <em>+ New Edge</em> 按钮创建一个 Edge。</p>\n<p>点击新建的\nEdge，找到 <code>edge=edghts_[一串字符]</code>，复制到手机备用。</p>\n<h4 id=\"允许跨域请求\">允许跨域请求</h4>\n<p>Flask\n可以根据用户的请求，动态生成前端代码。而如果前端代码单独放在另一台服务器上，比如\nGithub Pages——</p>\n<p>从 <code>github.io</code> 向 <code>ngrok-free.app</code> 发送 HTTP\n请求。由于两者不在同一域名下，浏览器为了用户安全，会拦截跨源请求。</p>\n<p>解决方法是，在后端的响应里加上<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS\">跨域资源共享（CORS）</a>头。</p>\n<p>flask-cors 库可以给 Flask 的响应自动加上 CORS 头。<a href=\"https://flask-cors.readthedocs.io/\">flask-cors 文档</a></p>\n<p>安装 flask-cors：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install flask-cors</span><br></pre></td></tr></tbody></table></figure>\n<p>然后在 <code>app.py</code> 里加两行：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, make_response</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask_cors <span class=\"keyword\">import</span> CORS    <span class=\"comment\">#&lt;----------</span></span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\">CORS(app)                      <span class=\"comment\">#&lt;----------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">'/'</span></span>)</span></span><br><span class=\"line\"><span class=\"comment\">#处理根路由的视图函数</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建 html 字符串</span></span><br><span class=\"line\">    html_content = <span class=\"string\">\"&lt;h1&gt;Hello, Flask!&lt;/h1&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建响应对象</span></span><br><span class=\"line\">    response = make_response(html_content)</span><br><span class=\"line\">    response.headers[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'text/html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#返回响应</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"运行-ngrok\">运行 Ngrok</h4>\n<p>找到前面复制到手机上的 <code>edge=edghts_[一串字符]</code>。</p>\n<p>先启动 Flask 到后台，再运行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok tunnel --label edge=[一串字符] http://localhost:5000</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"测试发送-http-请求\">测试发送 HTTP 请求</h4>\n<ul>\n<li><p>用 <a href=\"https://www.ruanyifeng.com/blog/2019/09/curl-reference.html\">curl</a>\n发送 <code>GET</code> 请求</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -v [你的Ngrok域名]</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>在本地 <code>file://</code> 协议或其他域名下，用 <a href=\"https://www.axios-http.cn/\">axios</a> 发送跨域请求</p>\n<figure class=\"highlight html\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      axios</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">get</span>(<span class=\"string\">\"https://你的Ngrok域名\"</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> {</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(response);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        })</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> {</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(error);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        });</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h2 id=\"后续处理\">后续处理</h2>\n<h3 id=\"保活\">保活</h3>\n<p>如果你想让服务器一直运行，在保持手机开机之外，还要：</p>\n<ul>\n<li><p>始终把 Termux 挂在后台，锁定，并忽略电池优化</p></li>\n<li><p>使用 <code>nohup</code> 命令让程序不挂起（往下看）↓</p></li>\n</ul>\n<h3 id=\"启动服务器\">启动服务器</h3>\n<p>先启动 Termux，再依次启动 Flask 和 Ngrok。</p>\n<p>可以向 <code>$PREFIX/usr/etc/profile</code> 文件中添加以下几行命令， 让\nTermux 启动的同时自执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/flask-app</span><br><span class=\"line\"><span class=\"built_in\">nohup</span> python app.py &amp;</span><br><span class=\"line\"><span class=\"built_in\">nohup</span> ngrok tunnel --label edge=[一串字符] http://localhost:5000 &amp;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"关闭服务器\">关闭服务器</h3>\n<p>使用 <code>jobs</code> 查看进程列表，<code>kill %[进程序号]</code> 杀死进程。</p>\n<p>当然，你也可以直接杀掉 Termux 的后台。</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://wiki.termux.com/wiki/Differences_from_Linux\">Termux 与\nLinux 的区别：https://wiki.termux.com/wiki/Differences_from_Linux</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://stackoverflow.com/a/49315513\">woohaha\n的回答：https://stackoverflow.com/a/49315513</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n","excerpt":"<p>好奇心旺盛。</p>","more":"<p>使用的主要工具：</p>\n<ul>\n<li>Termux—— 模拟 Linux 环境</li>\n<li> Flask—— 作为后端框架</li>\n<li> Ngrok—— 内网穿透</li>\n</ul>\n<p>你需要：</p>\n<ul>\n<li>能够正常运行以上软件的安卓手机</li>\n<li>最好有一台电脑</li>\n</ul>\n<p>在模拟的 Linux 环境下运行 Ngrok <strong>需要手机有 root\n权限，仅用于解决<a href=\"#在开始之前解决-dns-问题\">这个问题</a></strong>。如果没有更好的，不使用\nroot 权限的方法的话，可以尝试<a href=\"#另外\">在 Termux 上安装 Linux\n发行版</a>。</p>\n<p><a href=\"/blog/magisk.html\">用 Magisk 获取 Android 手机的 root\n权限</a></p>\n<h2 id=\"termux模拟-linux-环境\">Termux—— 模拟 Linux 环境</h2>\n<p><a href=\"https://termux.dev/cn/index.html\">Termux</a>\n是一个在安卓手机上模拟 Linux 环境的 app。</p>\n<p>适用于 Android &gt;= 7，无需手机 root。可以在 github 上<a href=\"https://github.com/termux/termux-app/releases/\">下载</a>。</p>\n<p>Termux 模拟 Linux\n环境的根目录在手机的 <code>/data/data/com.termux/files/</code>。</p>\n<h3 id=\"如果手机没有-root\">如果手机没有 root：</h3>\n<ul>\n<li><p>在 termux 内，最多访问到上一级目录\n<code>com.termux/</code>，无法访问 <code>/data/</code>。</p></li>\n<li><p>在 termux\n外，使用文件管理器无法访问 <code>/data/</code>。</p></li>\n<li><p>在 termux 内访问手机 SD 卡，需使用命令</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">termux-setup-storage</span><br></pre></td></tr></tbody></table></figure>\n<p>这会把 SD 卡目录 <code>/storage/emulated/0/</code> 链接到\n<code>/data/data/com.termux/files/home/storage/shared/</code>。</p></li>\n</ul>\n<h3 id=\"如果手机已-root\">如果手机已 root：</h3>\n<p>可以直接使用 <a href=\"https://mt2.cn/\">MT\n管理器</a>访问各个目录。这样转移文件比较方便。</p>\n<h3 id=\"另外\">另外</h3>\n<p>上面针对的是 Termux 模拟的 Linux 环境。<strong>你可以使用 <a href=\"https://wiki.termux.com/wiki/PRoot\">PRoot</a> 或者 <a href=\"https://github.com/2moe/tmoe\">TMOE</a> 安装 Linux\n发行版。</strong></p>\n<h2 id=\"flask后端框架\">Flask—— 后端框架</h2>\n<p>Flask 是一个用 Python 编写的 Web 框架。<a href=\"https://flask.palletsprojects.com/\">官网</a> | <a href=\"https://dormousehole.readthedocs.io/\">中文文档</a></p>\n<h3 id=\"安装-flask\">安装 Flask</h3>\n<p>首先在 Termux 上安装 Python：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install python</span><br></pre></td></tr></tbody></table></figure>\n<p>然后用 Python 的包管理工具 pip 安装 Flask：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install flask</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"在本地使用-flask\">在本地使用 Flask</h3>\n<ol type=\"1\">\n<li>在家目录下新建一个文件夹。名字随便取，用于存放代码：</li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> ~/flask-app</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li><p>在文件夹里新建 <code>app.py</code> 文件 —— 你可以在电脑上写好了传到手机，也可以用\nMT 管理器写，还可以用 Vim 写。</p></li>\n<li><p>编写代码：</p></li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, make_response</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">'/'</span></span>)</span></span><br><span class=\"line\"><span class=\"comment\">#处理根路由的视图函数</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建 html 字符串</span></span><br><span class=\"line\">    html_content = <span class=\"string\">\"&lt;h1&gt;Hello, Flask!&lt;/h1&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建响应对象</span></span><br><span class=\"line\">    response = make_response(html_content)</span><br><span class=\"line\">    response.headers[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'text/html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#返回响应</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"4\" type=\"1\">\n<li>在 <code>flask-app</code> 目录下运行：</li>\n</ol>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python app.py &amp;</span><br></pre></td></tr></tbody></table></figure>\n<p><code>&amp;</code> 表示把程序放在后台运行。</p>\n<p>你会看到：</p>\n<figure class=\"highlight txt\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> * Serving Flask app 'app'</span><br><span class=\"line\"> * Debug mode: off</span><br><span class=\"line\">WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.</span><br><span class=\"line\"> * Running on http://127.0.0.1:5000</span><br><span class=\"line\">Press CTRL+C to quit</span><br></pre></td></tr></tbody></table></figure>\n<p>用浏览器访问 <code>http://127.0.0.1:5000</code>，看到 <code>Hello, Flask!</code> 即为成功。</p>\n<h3 id=\"在局域网内使用-flask\">在局域网内使用 Flask</h3>\n<p>指定 <code>app.run()</code> 里面的 <code>host</code> 和 <code>port</code> 参数，即可在\nWi-Fi 局域网内访问手机。</p>\n<ol type=\"1\">\n<li><p>在手机设置里搜索（或者使用 <code>ifconfig</code> 命令），找到你手机的\nip 地址。比如是 <code>192.168.1.2</code>。</p></li>\n<li><p>把代码里的 <code>app.run()</code> 改为</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.run(host=<span class=\"string\">'192.168.1.2'</span>, port=<span class=\"number\">5000</span>)</span><br></pre></td></tr></tbody></table></figure>\n<p>端口号任意填不冲突就行，默认是 <code>5000</code>。</p></li>\n<li><p>如上文，运行。</p></li>\n</ol>\n<p>你可以在本机，或在局域网内任意设备的浏览器上访问 <code>http://192.168.1.2:5000</code>。</p>\n<h2 id=\"ngrok内网穿透\">Ngrok—— 内网穿透</h2>\n<p>我们搭建了 “服务器”。但是没有公网 ip，无法接受来自局域网外的访问。</p>\n<p>Ngrok\n是一个用于创建安全隧道的工具，它可以将本地的服务器或应用程序暴露到公共互联网。</p>\n<h3 id=\"安装-ngrok\">安装 Ngrok</h3>\n<ol type=\"1\">\n<li><p>查看 Termux 模拟 Linux 环境的 CPU 架构（跟随你手机的架构）</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">uname</span> -m</span><br><span class=\"line\"><span class=\"comment\">#或者</span></span><br><span class=\"line\">getprop ro.product.cpu.abi</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p><a href=\"https://ngrok.com/download\">下载</a>对应架构的 Ngrok\n到手机。（最新版 Ngrok\n没有开源，使用 <code>pkg install ngrok</code> 找不到包，因此在官网上下载）</p></li>\n<li><p>解压文件，并移动到 <code>~/../usr/bin</code> 目录。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvzf ~/storage/shared/[你下载的.tgz文件路径] -C ~/../usr/bin</span><br></pre></td></tr></tbody></table></figure>\n<p>这里用家目录的上一级 <code>~/../</code> 表示 linux\n环境根目录，也可以使用 <code>$PREFIX</code>。如果直接使用 <code>/</code>，Termux\n会认为是手机的根目录。</p></li>\n</ol>\n<h3 id=\"在开始之前解决-dns-问题\">在开始之前，解决 DNS 问题</h3>\n<p>官网上的包，没有适配 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a>\nTermux。因此笔者在首次连接时，发生了连接错误。</p>\n<p>在运行的同时打印日志：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok http 5000 --log-level debug --<span class=\"built_in\">log</span> stdout</span><br></pre></td></tr></tbody></table></figure>\n<p>大部分内容略。关键在这里：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">read udp [::1]:43938-&gt;[::1]:53: read: connection refused</span><br></pre></td></tr></tbody></table></figure>\n<p>在本地主机 <code>[::1]</code> 的 <code>43938</code> 端口和 <code>53</code> 端口之间，建立连接失败。<code>53</code> 是\nDNS 服务的端口，说明 DNS 查询出了问题。</p>\n<p>Ngrok 是用 Go 语言写的，</p>\n<blockquote>\n<p>根据 src/net/dnsclient_unix.go，如果 /etc/resolv.conf 不存在，则选择\nlocalhost:53 作为名称服务器。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p>它想找 <code>/etc/resolv.conf</code> 查询\nDNS，而在手机里找不到这个文件。进而向 <code>localhost:53</code> 发送 udp\n数据包。手机的 <code>53</code> 端口没有开放，开启 <code>1024</code> 以下的端口需要\nroot 权限。</p>\n<p>在 Termux\n里有 <code>resolv.conf</code> 文件，在 <code>$PREFIX/usr/etc/resolv.conf</code>。但是官方的包没有改路径，源码也没有开放。</p>\n<p>笔者尝试修改 Ngrok 配置文件里的\n<code>dns_resolver_ips</code>，但是没有用。</p>\n<h4 id=\"解决方法\">解决方法：</h4>\n<p>把 Termux\n的 <code>resolv.conf</code> 文件复制到手机 <code>/etc/</code> 目录下就行了。</p>\n<ul>\n<li>这需要 root 权限。</li>\n<li><strong>这会修改 <code>system</code> 分区</strong>。如果手机升级，卸载面具前还要刷回原来的 <code>system</code>；如果空间不够，可以删一些没用的系统预装软件数据，通常在 <code>/system/app/</code>。</li>\n<li>如果没有 root 权限，可以尝试<a href=\"#另外\">在 Termux 上安装 Linux\n发行版</a>。</li>\n</ul>\n<h3 id=\"使用-ngrok\">使用 Ngrok</h3>\n<p>先<a href=\"https://dashboard.ngrok.com/signup\">注册账号</a>，然后<a href=\"https://dashboard.ngrok.com\">进入仪表板</a>。</p>\n<h4 id=\"添加-authtoken-到配置文件\">添加 Authtoken 到配置文件</h4>\n<p>在本地服务器连接 Ngrok 服务器时，Authtoken 用于认证你的身份。</p>\n<p>点击 <em>Your Authtoken</em>，你会看到你的 Authtoken。使用命令：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok config add-authtoken [你的authtoken]</span><br></pre></td></tr></tbody></table></figure>\n<p>这会向配置文件 <code>~/.config/ngrok/ngrok.yml</code> 里写入：</p>\n<figure class=\"highlight yml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">authtoken:</span> [<span class=\"string\">你的authtoken</span>]</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"添加-domain-和-edge\">添加 Domain 和 Edge</h4>\n<p>点击 <em>Domains</em>。Ngrok\n应该会提醒你领取一个域名，像 <code>[几个英文单词].ngrok-free.app</code>。这是在前端发送请求时的目标域名。</p>\n<p>点击 <em>Edges</em>。点击 <em>+ New Edge</em> 按钮创建一个 Edge。</p>\n<p>点击新建的\nEdge，找到 <code>edge=edghts_[一串字符]</code>，复制到手机备用。</p>\n<h4 id=\"允许跨域请求\">允许跨域请求</h4>\n<p>Flask\n可以根据用户的请求，动态生成前端代码。而如果前端代码单独放在另一台服务器上，比如\nGithub Pages——</p>\n<p>从 <code>github.io</code> 向 <code>ngrok-free.app</code> 发送 HTTP\n请求。由于两者不在同一域名下，浏览器为了用户安全，会拦截跨源请求。</p>\n<p>解决方法是，在后端的响应里加上<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS\">跨域资源共享（CORS）</a>头。</p>\n<p>flask-cors 库可以给 Flask 的响应自动加上 CORS 头。<a href=\"https://flask-cors.readthedocs.io/\">flask-cors 文档</a></p>\n<p>安装 flask-cors：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install flask-cors</span><br></pre></td></tr></tbody></table></figure>\n<p>然后在 <code>app.py</code> 里加两行：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, make_response</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask_cors <span class=\"keyword\">import</span> CORS    <span class=\"comment\">#&lt;----------</span></span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\">CORS(app)                      <span class=\"comment\">#&lt;----------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">'/'</span></span>)</span></span><br><span class=\"line\"><span class=\"comment\">#处理根路由的视图函数</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建 html 字符串</span></span><br><span class=\"line\">    html_content = <span class=\"string\">\"&lt;h1&gt;Hello, Flask!&lt;/h1&gt;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#创建响应对象</span></span><br><span class=\"line\">    response = make_response(html_content)</span><br><span class=\"line\">    response.headers[<span class=\"string\">'Content-Type'</span>] = <span class=\"string\">'text/html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#返回响应</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"运行-ngrok\">运行 Ngrok</h4>\n<p>找到前面复制到手机上的 <code>edge=edghts_[一串字符]</code>。</p>\n<p>先启动 Flask 到后台，再运行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ngrok tunnel --label edge=[一串字符] http://localhost:5000</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"测试发送-http-请求\">测试发送 HTTP 请求</h4>\n<ul>\n<li><p>用 <a href=\"https://www.ruanyifeng.com/blog/2019/09/curl-reference.html\">curl</a>\n发送 <code>GET</code> 请求</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -v [你的Ngrok域名]</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>在本地 <code>file://</code> 协议或其他域名下，用 <a href=\"https://www.axios-http.cn/\">axios</a> 发送跨域请求</p>\n<figure class=\"highlight html\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      axios</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">get</span>(<span class=\"string\">\"https://你的Ngrok域名\"</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> {</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(response);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        })</span></span><br><span class=\"line\"><span class=\"language-javascript\">        .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> {</span></span><br><span class=\"line\"><span class=\"language-javascript\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(error);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        });</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h2 id=\"后续处理\">后续处理</h2>\n<h3 id=\"保活\">保活</h3>\n<p>如果你想让服务器一直运行，在保持手机开机之外，还要：</p>\n<ul>\n<li><p>始终把 Termux 挂在后台，锁定，并忽略电池优化</p></li>\n<li><p>使用 <code>nohup</code> 命令让程序不挂起（往下看）↓</p></li>\n</ul>\n<h3 id=\"启动服务器\">启动服务器</h3>\n<p>先启动 Termux，再依次启动 Flask 和 Ngrok。</p>\n<p>可以向 <code>$PREFIX/usr/etc/profile</code> 文件中添加以下几行命令， 让\nTermux 启动的同时自执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ~/flask-app</span><br><span class=\"line\"><span class=\"built_in\">nohup</span> python app.py &amp;</span><br><span class=\"line\"><span class=\"built_in\">nohup</span> ngrok tunnel --label edge=[一串字符] http://localhost:5000 &amp;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"关闭服务器\">关闭服务器</h3>\n<p>使用 <code>jobs</code> 查看进程列表，<code>kill %[进程序号]</code> 杀死进程。</p>\n<p>当然，你也可以直接杀掉 Termux 的后台。</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://wiki.termux.com/wiki/Differences_from_Linux\">Termux 与\nLinux 的区别：https://wiki.termux.com/wiki/Differences_from_Linux</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://stackoverflow.com/a/49315513\">woohaha\n的回答：https://stackoverflow.com/a/49315513</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>"},{"title":"心理学碎片","date":"2025-01-21T16:00:00.000Z","mathjax":true,"_content":"\n## 问题讨论\n\n解决问题是什么意思？纽威尔和西蒙认为，首先要有一个问题空间，问题空间是一个人对于这个问题的初始状态、目标状态的认识，以及如何从初始状态转化成目标状态的认识。解决问题就是在问题空间里寻找一条从初始状态变成目标状态的路。\n\n问题可以怎么分类？按明确的程度分，初始状态和目标状态都很清楚的问题称为界定清晰的问题，否则称为界定模糊的问题。比如写一篇作文，如果在写之前就把提纲列出来了，最后要表达一个什么东西都提前定了，或许叫界定清晰。如果写一步看一步，不知道最终要写成什么样，叫界定模糊。或者说，按连续谱来看，写作文本身就在更靠近界定模糊的一侧，而写数学证明题在清晰的一侧。这个清楚或许指的是客观清楚。而主观清楚是分为，语义丰富和语义贫乏的问题，让一个小学生去做高数题，对他来说是或许语义贫乏的，因为在他的问题空间里，对初始的状态都无法理解；对高数教师来说是语义丰富的。\n\n我提出的这些问题，对我来说都是相对语义贫乏的问题。因为我对它们的相关知识都不够。是先提出一个目标状态（结论），再借助自己已有问题空间里的对初始和中间状态的认识，来看能不能通向目标状态。\n\n### 心理学\n\n普通心理学重要的概念有？意识和无意识、注意保证心理在场，需求及其的衍生（情绪、动机、意志）造成行为，感知觉、记忆和思维（想象、言语）对信息进行处理。\n\n为什么心理过程包括知情意三大块？“过程”是一个动词意义的，有起点和终点，可以多次进行。认识可以歇一会，情绪也可以消失。这里的意是意志，不是意识，意志是先有意识确定一个目的，再通过调节和支配行为，克服困难达到目的的过程，意志也是可以消失的，就是我们说的间歇性踌躇满志。名词意义上的“意识”在正常情况下一直在场直到死亡。睡眠和梦也是意识的特殊形态。像需要、动机、意识都是相对名词意义的，所以它们都不是心理过程。\n\n为什么说笛卡尔是现代心理学的开创者？在笛卡尔之前，公认的理论是，心灵对身体的作用是单向的，心灵会影响身体，而身体基本不会影响心灵，身体是木偶，心灵是提线者。笛卡尔把机械论的观念应用到人身上，认为人也是一台巨大的机器，身体可以影响心灵。这样我们就可以通过研究身体来研究心灵。\n\n为什么说冯特是现代心理学的建立者？在冯特之前，已经有人出版心理学的著作了。冯特在大学里建立了第一个心理学实验室，创立了第一本学术期刊，把心理学推向大众，体系化了。\n\n### 需要及其衍生\n\n马斯洛的安全需要是什么意思？如果我们把安全理解为，是一种没有感受到危险的状态，那么安全需要被满足，就意味着没有负面情绪了，那么当生理需要被满足时，是不是同时满足了安全的需要？不是这样的，安全需要指一种持续的状态，如果我当天吃饱饭了，满足了当天的生理的需要，但是我之后每天都不一定能吃饱饭，那么我的安全需要是没有被满足的。\n\n当此时的上层需要被满足了的时，一定意味着此时的下层需要被满足了吗？不一定。比如我们虽然有时受到别人尊重了，但是仍会觉得自己未来没有希望，实际上就是我们此时此刻的安全需要没有被满足；如果我之后每天都能吃饱饭，但是我现在是饿的，那么我现在的生理需要是没有被满足的。需求金字塔是一个动态的结构，它并不意味着下层的需要如果被满足之后，就是永远地被满足了。它或许只是指示了一种痛苦抢占的优先级，就像操作系统的进程调度，五层需要是并发的，下层需要占 CPU 的时间更长。\n\n马斯洛认为自我实现的需要是人类所独有的，反过来说，下面的四层是有些动物也需要的。比如第四层是尊重的需要，在群体里获得地位，狼通过竞争选出一个狼王。\n\n第三层和第四层的区别是什么？是单纯建立关系、有归属感，和获得价值与地位、有成就感的区别。比如我交一个朋友，只是单纯地想和他待在一起，或者在人多的地方比在人少的地方开心，这属于是第三层。但如果我想让他认可我，尊重我，这就上升到第四层了。比如我们能做到爱一个人，但是不一定能做到尊重他。\n\n物质需要和精神需要是什么意思？它指的是满足需要的对象是否是物质实体。比如我们买一张专辑，到底想要的是专辑的壳子和碟片、周边，还是里面的音乐内容。如果是前者，那么它满足了我们的物质需要；如果是后者，满足了精神需要。还存在着一种情况是，买一张专辑之后是为了拍照片发出来装一下，这属于是通过展示自己的物质条件或者音乐品味有多么地好，来满足自己的精神需要和社会需要。\n\n自然需要和社会需要的区别是什么？前者是在一个比较长的历史区间里直到现在，都是人一定需要的。后者受特定历史时期和环境的影响。自然需要由生理的不平衡引起，所以也叫生理需要；社会需要是后天习得的，所以也叫获得性需要。由生理需要引起的动机叫驱力，由社会需要引起的动机叫诱因。\n\n（图片由 DEEPSEEK 生成）安全需要的自然部分指：我的身体不会受伤，生命不会受到威胁；社会部分指：我的生活是稳定、有保障、可预测的。\n\n<img src=\"/blog/images/马斯洛需求金字塔.webp\">\n\n当我们的需要不被满足时，情绪、动机和意志就出现了。\n\n一般来说是，如果需要被满足了，会出现正面的情绪，反之出现负面情绪。但是还有一种特殊情况，当我们过去一直没有被满足的需求终于被满足了时，可能会感动到流泪。要解释这个现象，要么去厘清正负面情绪的范畴，把“感动到流泪”划分到强烈的正面情绪里。喜极而泣。\n\n《心理系》APP 上说，人的基本情绪有喜怒哀恐，复合情绪是由基本情绪的不同组合派生而来的。但我现在暂时认为，怒的背后就是恐，可以把它简化成三个基本情绪。或许这么说，所有需求未被满足时的情绪背后都包含一个恐。比如饿可以被解释成对死亡的恐惧，社交恐惧未被满足的需求是安全需求。在需求满足之后会喜，没有满足时是恐，如果在当下持有一种该需求是在长期或永远无法被满足了时，或回忆到自己过去的需求有一直没有被满足的，则出现哀。恐对应退缩系统，做出逃跑的反应，与右侧 PFC 激活水平相关；怒对应趋近系统，做出攻击的反应，与左侧 PFC 激活水平相关。恐是刹车，怒是油门，如果在路上看到了障碍物，那么刹车是第一顺位的，你要先停下来判断一下，再决定要不要踩油门冲过去。但是也还有一种情况，就是当时你太恐了，所以踩错了，踩成油门了。这就像一个创伤被激活时，应激的恼怒情绪压过了一切的恐惧。\n\n怒的背后一定是恐吗？如果我们在网上看到一些言论之后发怒了，可能是因为这个言论戳中了自己的一些点，且它至少是部分有道理的。还有一种情况是，它是没有道理的，但是你怀着一种强烈修正它的愿望，且它触发了你之前不被别人在乎的创伤，修正它也是无法改变对方的观念的，所以为了掩护自己的不被在乎的恐，怒就出现了。如果这个言论是和你没有关系的，且你也能看出来它也是没有道理的，比如有人说，肯尼迪是美国的第一任总统，那你就不会发怒，而只会感到可笑。因为他的言论使你能够确认自己的价值，有人是比你还要差的，那你也差不到那里去。这满足了你的社会需求和精神需求，尊重的需要。\n\n情绪和情感的两极性是什么意思？意思就是，对于情绪和情感的每一个特性，都存在着一个连续谱。有四个特性，或者说是变化的维度，包括三个成分特性和一个功能特性。情绪的三个成分是主观感受，生理唤醒和表情。主观感受的特性叫强度，如从低落到悲痛欲绝，从不满到狂怒；生理唤醒的特性叫紧张度，从轻松到紧张；外部表现的特性叫激动度，从喜怒不形于色到范进中举；由需要满足或未满足出现的正-负面情绪，对于推动行为有正-负面的功能，叫情绪和情感的动力性。\n\n为什么说需要引起动机？引起或许指一种时间上的直接、紧密的先后顺序。需要是有机体内部的一种不平衡状态，表现为有机体对内外环境条件的欲求。比如感到饿了，我需要吃饭。动机是激发个体朝着一定目标活动，并维持这种活动的一种内在的心理动力，是行为活动背后的原因。吃饭的行为可以使这个饿的不平衡状态变成平衡的，但是在吃饭的行为发生之前，在需要产生和满足需要的行为发生之间，还会出现别的行为，比如感到饿了，先做饭或者买饭之后才是吃饭，所以说需要并不直接紧密地引起吃饭的行为，而是先引起吃饭的动机。动机激发了寻找食物的事件，指向了获取食物的方法，维持了从寻找、获取直到吃饱的整个过程。\n\n为什么说“需要未满足-需要满足-产生新需要的循环”叫动机过程？动机是一直在场的吗？如果动机不是一直在场的，那么它的生命周期从需要产生开始，途经行为发生之前（激发行为）和之中（指向、维持行为）的过程，直到行为无需动机推动，此时说明需要已被满足。它的下一个生命周期从一个新的需要产生开始。这说明动机也是有过程的，那么为什么动机不叫作心理过程呢，或许因为它是被包含在情绪过程和意志过程里，或许是因为，它是一直在场的。动机并非“一直在场”作为一种持续的、可感知的力，而是作为一种“潜在的、可被激活的机制”一直在场。\n\n动机的维持功能和意志的坚韧性有什么区别？共同点都是指为实现一个预期目标，做一些事情来说，时长上的坚持，短期的和长期的。对于一个长期的任务来说，比如目标是每天跑步多少分钟，当天的时长除了要靠当天的动机之外，还要靠意志的坚韧性。如果跑步动机并不是在每一天内都出现的，那说明意志的坚韧性不足。如果跑步动机在当天出现了，但是由于其他事件冲突而没有执行，叫做意志的果断性不足，自制性不足，或者自制成变化的了。\n\n意志的四个品质，从时序上来看谁先谁后？首先要明确目标，所以自觉性是首位的；其次会遇到挫折，这涉及到处理情绪、做决策和管理行动，处理情绪和行动对应自制性，做决策对应果断性；在一个长期的时间上，坚持地克服困难，永不退缩，对应强的坚韧性。如果自觉性不足，即不知道自己为什么要做这件事情，后面的三个或许比自觉性强的情况更弱一些。\n\n### 信息处理（认知）\n\n为什么有时在朗读文字时，感觉没有默读的效果好？这是一个注意分配的问题。注意分配指在同一时间把注意分配到两个及以上的任务上，它的前提是，其中一些任务已经达到了非常熟练的程度。以我的个人经验是，由于我之前说话很少，读句子的语气控制没有达到自动化的程度，所以在朗读文字的时候，相对于默读文字有一个额外的语气检控的进程，发声的进程，有时还会去想别的，造成注意的资源不够了。另一方面，默读文字的速度更快，朗读的速度和默读的不匹配，这就像汉字的语义饱和，你光盯着一个字看，会感到陌生，甚至不认识这个字了。\n\n> (AIGC) 在绝大多数情况下，慢速进程会拖慢快速进程。其根本原因在于，共享资源在同一时间通常只能被一个进程独占。快进程必须等待慢进程释放资源后，才能继续执行。是否存在例外情况？有的，在一种特定情况下，慢进程不会拖累快进程：当共享资源是【只读】且【无需协调】的时候。例如，多个进程同时读取同一份文件或同一块内存数据。一个进程可以慢慢地读，另一个进程可以飞快地读。因为它们都不会修改资源，所以不需要加锁，也无需互相等待。快慢进程之间没有任何依赖关系，各自都能以全速运行。\n\n照这么说，想要提高朗读速度，可以“只读”，那就是真的只读了，不加理解地读。\n\n默读需要用到角回来识别字，朗读除此之外，还要用到布洛卡区说话和韦尼克区返听。\n\n当默读文字时，有时会在脑海中出现声音，当然不是实际的声音，是一种类似于回忆音乐旋律的感觉，这种现象是正常的吗？这种现象通常被称为 “内心言语”（Inner Speech），这说明默读时也用到了听觉皮层。在默读的同时也可以感觉到喉部肌肉的运动。\n\n> (AIGC)\n>\n> 1. 视觉信息：视觉皮层看到文字。<br>\n> 2. 转换：角回等区域将视觉符号转换为听觉代码。<br>\n> 3. 内部模拟：<br>\n>    - 运动模拟：布洛卡区及其周边区域会产生微弱的、被抑制的发音指令（科学家可以检测到喉部肌肉的微电流活动），这是一种“准备说话但没说出口”的状态。<br>\n>    - 听觉模拟：大脑的次级听觉皮层（Secondary Auditory Cortex）——特别是负责处理复杂声音（如语言）的区域——会被激活。这个区域就在您提到的韦尼克区附近。<br>\n> 4. 产生体验：正是这种听觉皮层的内部激活，产生了您所描述的“脑海中的声音”或“心理声音”。它不是来自耳朵的真实声音信号，而是大脑自上而下生成的预测和模拟。这和你“在脑子里单曲循环一首歌”的机制非常相似。<br>\n\n记忆一定需要外界的输入吗？在记忆的识记阶段需要，保持阶段和提取阶段都不需要。保持阶段里新输入的信息对已存储的信息有倒摄抑制，提取阶段可以通过提示来再认。我们对梦的记忆是通过自己的无意想象而得来的，这说明想象可以补充经验。在经历梦的时候，大脑对以往输入过的记忆进行重组；在回忆梦的时候，回忆的是重组过的记忆。\n\n做梦梦到旋律，这个旋律后来才发现是以前听过的，但梦醒后的很长一段时间都没有想起来来自于哪里，那么对这段旋律的记忆算不算内隐记忆？AI 给的回答是算的，因为梦的内容不是有意回忆的，在做梦之前，对旋律和来源的记忆都是内隐记忆；在做梦之后和再认之前，对旋律的记忆是外显的，而对来源的记忆是内隐的；在经过再认之后，来源的内隐记忆才变成了外显记忆。\n\n为什么说思维是人对客观事物本质和内在联系的认识？\n\n- 充分条件是有 A 必有 B，仅凭 A 就可充分推出 B；必要条件是无 A 必无 B，有 B 必要 A。\n- 事物的本质属性是什么意思？事物 A 的本质属性 a，是判断事物 B 是不是事物 A 的必要条件。如自行车的本质属性，有轮子，是判断一个物品是不是自行车的必要条件，如果无轮子，就必定不是自行车。有轮子不是是自行车的充分条件，因为仅凭这一个特征，无法充分推出它是自行车，它还可能是汽车。如果自行车失去了轮子，就不能称之为自行车了（除非叫“坏掉的自行车”），所以“有轮子”是自行车的本质属性。想要判断事物 A 是不是事物 B，应该怎么判断？我们需要保证，事物 A 具有事物 B 的所有本质属性，即 A 类是从 B 类继承而来的。比如自行车是车，因为自行车具有车的所有本质属性（通常意义上，有轮子，用于载人或物，在地上跑，相对于人的移动速度更快的机器）。或者说，A 是 B 类的一个实例，比如我的一辆自行车，是自行车类的实例。\n- 事物的偶然属性是什么意思？在失去偶然属性后，并不影响事物的本质。名字是一个人的偶然属性，在改名之后，仍然是同一个人。人格是一个人本质属性。特修斯之船，河流的偶然属性变了，但作为一个情感的客体，在人心里的本质属性是没有变的。\n- 事物间的内在联系是什么意思？摩擦和生热这两件事之间存在内在联系，这里的内在是指，多个事物之间的内在，因果关系。外在联系是什么意思？一只鸟随机地飞到了一辆汽车上，此时他们之间建立了一种外在联系。内在联系是寻找因果，必然性。\n\n打算盘是动作思维还是形象思维？用手算是动作思维，用心算是形象思维，通过口诀来判断打的动作是抽象思维，抽象思维也叫词的思维或逻辑思维。\n\n辐合思维是什么意思？辐是自行车轮子上的金属条，从轮圈到轴心，辐合思维注重从边缘聚集到中心，所以也叫求同思维。发散思维是解决问题的前半段，生成多种选项，辐合思维是解决问题的后半段，评估和执行选项。\n\n想象的功能是什么意思？想象是在已有形象的基础上，创造新的形象。这不是它的功能，是它的定义，功能是衍生出来的作用。通过小说的描写形成人物形象，是想象的补充经验的功能；通过想象来补充自己没有被满足的需求，画饼充饥望梅止渴，一个是替代性的满足；还可以是预见目标向目标前进。\n\n### 社会心理学\n\n存不存在无角色的社会人？社会角色的意思是：\n\n- 一种行为方式和心理状态，与个体的社会地位和身份相一致（主观条件）\n- 对特定地位个体行为的期待，是社会群体得以形成的基础（客观条件）\n\n所以，只要一个社会群体的场域（等级或优先级、功能的划分）存在，对其组成成员的期待（隐含的规则）存在，社会角色就一定存在。一个人在不同的场域会有不同的角色。但是，如果前面那一个主观的条件不存在，即在一个场合下，行为方式和心理状态与这个场合的规则不一致的人，或许可以说，他是跳出了这个角色的。比如在《月亮上的男人》这部电影里，主角安迪·考夫曼给人一种经常跳出角色的印象，或者说，他在一个场合下同时扮演了两个角色，这有时会造成角色间冲突。之后他还在个体意义上扮演了两个角色，并成功地使其他人认为了这两个角色一定不会是同一个人。\n\n角色冲突和角色不清的区别是什么？角色不清指主观或客观的对该角色的认识不清。而角色冲突是认识清楚的，但认识不一致。角色内冲突是指对同一个角色有两种以上的细分认识，如教师对学生既需要管理者的角色，也需要朋友的角色；角色间冲突指对同一个人的两种及以上角色认识之间存在冲突，如某个时间选择先处理工作问题还是家庭问题。安迪考夫曼对他的两个角色都是认识清楚的，但是别人可能没有看出来是两个角色。\n\n表现型角色表现的是什么？是社会的秩序，制度，价值观，道德风尚，公平，正的一面。如医生，教师，学者，感动中国的获奖者。而企业家通常是与之相对立的功利型角色的，表现的是效率的一面。到目前为止，获感动中国年度人物的企业家好像只有：2002 年的张瑞敏，2006 年的霍英东，2019 年的伍淑清。张瑞敏表现了中国企业走向国际，霍英东和伍淑清表现了香港和内地的关系。\n\n一个被亲生父母抛弃，后来被领养的人，他的先赋角色是领养者 A 的儿子。在他经历努力，找到真正的家人之后，他的角色是家人 B 的儿子。那么 B 的儿子的角色算先赋的还是成就的？在他找到家人之后，且他身边的人都知道了，那么这个角色对于他、两对父母、和知情者既是先赋的，也是成就的；在他知道自己被领养之后，但没有找到家人之前，对他和他的亲生父母及领养父母，帮助寻找家人的人来说，这个角色是先赋的，但还没有完全成就；在他还不知道自己是被领养的时候，对他，加上他身边的所有不知道领养事情的人的来说，这个角色是不存在的。\n\n为什么说自尊是人对其社会角色自我评价的结果？如果这么说，低自尊的意思就是，我认为我没有达到群体的标准。对于一个自我评价为“我是一个好员工，但不是一个好家长”的人，那么他的职业角色是高自尊的，而家长角色是低自尊的。如果一个人的 A 角色的自尊低，那么他可能会去建构一个 B 角色，比如一个自认为学习能力不强的人，会去把游戏的段位打得很高。\n\n马斯洛的自尊需要里，对成就、优势、自信的欲望与对名誉、支配地位、赞赏的欲望有什么区别？前者是内在动机驱动，后者是外在动机驱动。\n\n有纯粹的利他动机吗？\n\n权力动机是什么意思？当我们想要说服一个人，想要转变他的态度，或想让他按照自己的想法来做事的时候，这时候的心理倾向就叫做权力动机。大致由两个因素引起：对社会控制的需求（包括安全和尊重的需求），或对无能的恐惧。\n\n成就动机是什么意思？当我们感觉一件事情太简单，或者太难，所以没有做的动力的时候，这时候的成就动机是弱的。当一件事情我们认为有一定的挑战性，并非常想做的时候，这时候的成就动机是强的。两个影响因素是，主观成功的概率，和目标的吸引力。\n\n社交焦虑者有亲和动机吗？社交焦虑者的矛盾是：想和别人在一起建立友好或协作的关系，但是害怕风险。这个矛盾的前半部分就叫做亲和动机。这是一个趋避冲突，避的一点在于，和别人在一起会不自在。所以从动机上来看，社交焦虑者有趋的亲和动机 C，且还有另外一个避的动机。如果只有一个动机，只趋，或者只避，那么绝对不会焦虑，因为后者的情况就是，直接逃离现场。但从行为上来看，社交焦虑者的亲和倾向 B 是低的，因为 A 是焦虑。卡在意志行动的准备阶段了，意志的果断性不足。因为自觉性不足，所以果断性、自制性和坚韧性都不足。\n\n态度的 CAB 模型是什么意思？\n\n- 观点和信念的区别是什么？观点更短期、易变、详细。信念更抽象，改变更难。观点需要基于信念来提出，信念可以通过观点回溯。\n- 知觉和理解的区别是什么？知觉是侦察兵，理解是指挥官。\n- 理解和观点、信念的区别是什么？理解是认知的过程，在理解之后形成观点和信念\n- 评价：我认为苹果好吃；观点：经过以往的多次评价，我认为苹果比香蕉好吃；信念：我认为吃苹果对身体好（基于事实：苹果有维生素和膳食纤维；观点：身体需要维生素，膳食纤维有助于消化）。我对苹果的知觉是，我知道那是一个苹果（模式识别）；理解是，我能说出来我对苹果的观点和信念\n- 知觉 -> 理解 -> 观点 -> 信念，这四个再加上事实，就是态度的认知成分 Cogntion\n- 情绪：吃苹果之后，我开心了；情感：我喜欢吃苹果。评价和情绪、情感这三个，就是态度的情感成分 Affect\n- 行为倾向 Behaviour Tendency\n\n我认为跑步可以锻炼身体，这是我的认知 C；但是跑步会使我累得难受，这是我的情感 A；通常 A 占主要成分，所以我的行为倾向 B 是不常跑步。\n\n态度的卷入深度是什么意思？指态度对象对个体的意义重要性。如一个人对日本的态度，对日本有态度，但平常不接触日本的所有信息，相比在日本留学的人，对日本态度的深度更浅（C 的方面）。对一款经常玩的游戏，相比玩了很短时间卸载的游戏，态度更深（B 的方面），如果认为工作比游戏重要，那么对工作的态度比游戏更深。\n\n如何使用中等畏惧的信息说服？如果不常运动，得心血管疾病的风险是运动者的好几倍，运动会显著降低患心血管疾病的风险。\n\n为什么沟通的结构比霍夫兰德态度转变模型的四个要素多三个？霍夫兰德态度转变模型的四要素是接受者，发送者，信息和情境，接受者是态度转变的主体，通常是发送者劝说接受者，这个模型关注的是发送者如何在特定情境下使用特定信息转变接受者的态度。而沟通的结构是相对更平等的，所以会有一个反馈，反馈是指一个交互的，半双工的过程，比如我在回答对方之前，先把对方的观点复述一遍，看我的理解是否和对方一致。霍的情境对应沟通的背景，沟通的背景还比霍的情境多了物理层，包括心理、物理、社会和文化背景，而霍的情境是不涉及物理背景的。霍已经假定了沟通的信息传递本身是没有问题的，而沟通还涉及到了信息的载体，和传递之前和之中，信息是否有误码和损耗等障碍。信息的载体或者说通道是指面对面沟通还是发信息沟通。传递的障碍包括六个方面，信息源，编码，网卡，信道，自然衰减，和误解。来自信息源的障碍如信息量不够或不明确，编码的障碍如对英国人使用日语，网卡发送的障碍如声带的振幅不够，说话声音小，信道的障碍如误用了沟通载体和方式，自然衰减的障碍如远距离对话，两个终端上的障碍是误解。通道，障碍和反馈，是沟通比霍多的三个。\n\n### 创伤心理学\n\n照顾关系，依恋关系和主体间关系的区别是什么？父母给我们提供居住地和经济上的支持，叫做照顾关系；如果父母经常和我们玩，讲故事，有身体接触，可以形成依恋关系；我们对一个第一次遇到的陌生人，和他之间的关系就叫主体间关系。中医推拿，泡澡，泡脚也可视为一种身体的接触，这叫创伤的躯体治疗。\n\n如何解释，当我们看到古文，小说或电影里与自己类似的负面经历之后，自己的负面心境会缓解一点？这是一种共享的记忆。在同时同地同情境下，两个人共同经历的记忆叫做共时记忆，而共享记忆需要一个传达的过程。比如张三在时间 A 经历的记忆，在时间 B 通过口头或文字的形式分享给了李四。这种“不是只有我一个人是这样”的感受，从需求满足的角度看，满足了马斯洛的第三层，归属感和爱的需要。如果观看者 A 本身是尊重小说或电影里的人物 B 的，那么 A 可以把 B 当成自己，把 A 当作另一个人 C，A 通过扮演屏幕外的人 C，给屏幕里的 B 尊重，从而间接地满足了自己尊重的需要。\n\n## 抑郁的心理学理论\n\n- 压力源\n  - 生物性压力源：躯体创伤，疾病，噪音\n  - 精神性压力源：错误的认知结构、过去的经验、内心的冲突\n  - 社会环境型压力源\n    - 社会环境的问题：战争，亲人逝世，被监禁\n    - 人际适应的问题：由于自身的状况，造成的人际适应问题\n\n压力源指生活中要求人们去适应的事件，比如转学。压力反应包括主体觉察到压力源后，出现的心理、生理和行为反应，心理反应如出现低落的心境，生理反应如，行为反应如在社交场合面前退缩。压力是压力源和压力反应共同构成的一种认知和行为体验过程。\n\n行为理论 1（负惩罚）：压力-减少行为-减少正性强化物-退缩-减少正性强化物……（正强化）引起他人同情和关注-继发性获益\n\n行为理论 2（习得无助）：负性事件-习得无助-动机减少\n\n认知理论 1（认知反哺核心信念，自证预言）：对自己、世界和未来的看法消极-对事件的认知倾向于支持其消极证据\n\n某人某行为的原因，事件的结果 = 归因（信息）。\n\n- 内因/外因维度：是否因为自己\n- 整体/局部维度：适用范围\n- 稳定/易变维度：时间持续性\n- 可控/不可控维度：是否受自己主观意志影响\n\n认知理论 2（抑郁性归因风格，形成性习得无助）：对负性事件的归因倾向于内在、稳定和整体的原因-认为自己无法应对该事件-习得无助\n\n认知理论 3（思维反刍，%0|%0）：模糊和概括的记忆，对负性刺激注意偏好-专注、淹没于自身的感受、原因而不对于处理\n\n人际理论（客观上的狼来了）：难以信任别人-寻求他人肯定-容易感受到拒绝-难以信任别人-寻求他人肯定-身边人感到厌倦-寻求他人肯定-社会支持被收回\n\n社会文化理论 1（世代效应）：时代变了；家庭原子化；年轻一代对自己的期望过高。\n\n社会文化理论 2（性别差异，女性患抑郁的可能性是男性的两倍）：男性偏向喝酒否认痛苦，女性偏向反刍；社会对女性的偏见\n\n社会文化理论 3（种族差异）：\n\n## 生物学\n\n决定论是指，每个事件的背后都是有原因的，确定的因素可以引发确定的结果。还原论是指，可以把一个大的系统分解成组成它的基本部分来研究。如果心理现象以生理状态为决定的话，我们可以把人体还原成一些零件，通过药物来干涉它们的运转过程，从而改善心理上的问题。但不用药物的谈心、话疗也可以改善心理问题，有些药物不起效或起效慢，这或许说明心理现象不完全以生理状态为决定，也或许说明话疗、安慰剂也可以改善生理状态。\n\n来自体内或体外的刺激通过内导神经元（传入神经、感觉神经）传入脑和脊髓（中间神经元的回路），再通过外导神经元（传出神经、运动神经）传出到效应器官。人脑神经元有 100 亿个以上，在神经元之间有 1000 亿个以上胶质细胞，它可以给神经元输送营养，修复神经元；叫髓鞘的胶质细胞起着电线绝缘层的作用，确保神经冲动沿正确的路线传递。神经元在静息状态下，细胞膜外的电位比膜内高 70mV，膜外相对为正电；在受到刺激后，钠离子被泵入细胞膜内，膜内相对为正电。神经兴奋传导的速度通常为 3.2 ~ 320km/h，0.8 ~ 8m/s。突触是一个神经元上，与另一个神经元彼此接触的部分，一个神经元可有多个突触；在大脑皮层上，一个神经元可有 30000 个突触。一个神经元通过突触间隙，向其临近的神经元释放神经递质，称为神经冲动的化学传递。神经递质的接收方细胞膜上的分子叫受体。再摄取是发送神经元向突触间隙释放神经递质后，再吸收回去一部分，使得突触间隙的神经递质含量降低。降解是接收神经元向突触间隙释放酶，把神经递质分解成其他物质。\n\n- 中枢神经系统（CNS）\n  - 大脑又叫端脑。大脑的外层叫皮层，皮质或者灰质；白质在里边。额顶枕颞，动感视听\n    - 脑回是山脊，脑沟是山谷\n    - 额叶在头顶前部及额头，书写中枢在额中回靠近中央前回，如果损坏了称为失写症；表达性失语症是左半球额下回靠近外侧裂的布洛卡中枢，又叫运动型言语中枢，如果损坏了，说话迟钝费力\n    - 顶叶在头顶后部，枕叶在枕头附近，顶枕交汇处的角回如果损伤了，可以看到字，但是不能理解字的意思，就像看一个异国的语言，称为失读症；\n    - 额叶和顶叶的分界是中央沟。额叶顶叶，和颞叶的分界是外侧裂，外侧裂上方是额叶和顶叶，下方是颞叶\n    - 颞叶在太阳穴、耳朵附近，颞上回的维尔尼克中枢如果损坏了，可以听到声音，但是不能理解意思，称为接受性失语症；\n    - 岛叶与内脏感觉有关\n    - 大脑两半球的分界叫纵裂，由胼胝（pian2 zhi1）体相连\n  - 脊髓是最低级的，一些神经过程如膝跳反射可以不经过脑，只经过脊髓\n  - 脑干是最古老的，其网状结构调节睡眠与醒来，分布于延脑、桥脑和中脑；\n  - 小脑控制身体平衡\n  - 间脑\n    - 嗅觉是最古老的感觉，丘脑除了嗅觉之外，是其他所有感觉的重要中枢，把感觉接收器的信息传给大脑\n    - 上丘脑\n    - 下丘脑是自主神经系统的中枢\n    - 底丘脑调节肌张力\n- 外周神经系统（PNS）\n  - 躯体神经系统是用户态，受意识控制，如走路；\n    - 31 对脊神经\n    - 12 对脑神经\n      - 感觉神经（输入）：嗅神经、视神经、听神经\n      - 运动神经（输出）：眼动神经、滑车神经（颈部）、外展神经（面部）、副神经和舌下神经（舌）\n      - 混合神经（I/O）：\n        - 三叉神经（面部感觉的输入，咀嚼肌的运动）\n        - 面神经（味觉的部分输入，舌下腺、泪腺和鼻黏膜腺的分泌）\n        - 舌咽神经（味觉输入，唾腺分泌）\n        - 迷走神经（一般内脏感觉的输入，咽喉肌肉、内脏平滑肌和心肌的运动）\n  - 自主的是内核态，受无意识控制，如心跳是心在“自主”地跳，没法控制它不跳，像植物一样没有意识，所以又叫植物神经。通过特殊的训练，可以在一定程度上控制心跳快慢\n    - 交感的和副交感的。“交感”一词意为“共同感受”或“共同作用”，是在应激状态下协调多个内脏器官，做出战斗或逃跑的反应；副交感的拮抗交感的，调节身体的“休息和消化”反应。\n\n突触间隙的 5-羟色胺、去甲肾上腺素含量过少，会有抑郁的感觉。\n\n一些理论认为，焦虑和抑郁是下丘脑-垂体-肾上腺轴（HPA 轴）失调造成的。垂体分泌的激素种类最多，在下丘脑的下方。下丘脑的某些神经元分泌促肾上腺皮质激素释放因子（CRF），CRF 再刺激垂体分泌促肾上腺皮质激素（ACTH），该激素通过血液运输到肾上腺和其他器官，引起约 30 种激素的释放，每种激素都在人体适应紧急情况时起到一定的作用。\n\n表观遗传学认为，在 DNA 序列不变的前提下，基因的表达模式（何时、何地、表达多少）可以通过可逆的化学修饰（如 DNA 甲基化、组蛋白修饰）来动态调控和“改变”。\n\n抗焦虑药包括巴比妥类和苯二氮类，它们都有断药反应，后者用于安眠药。\n\n## 普通心理学\n\n参考彭聃龄《普通心理学（第 5 版）》等。\n\n普通心理学讨论的范围是普通成人，偏个体层面的心理过程和结构。与普通、成人和个体这三个词互补的就是异常，发展和社会心理学。\n\n认识是对信息加工的过程。包括感知觉、记忆、思维、语言的输入输出、想象。感知觉加工的是来自体内或体外的信息，通过记忆储存到大脑里，思维把这些信息进行重组，通过语言表达出来；想象以表象的矢量图为材料，把表象 P 成新的图。注意不属于是认识，因为它没有加工信息，而是选择将被加工的信息。认识也可以说成是客观事物在头脑中的反映。感觉是对事物个别属性的反映，知觉是对事物整体的反映，记忆是对过去经验的反映，思维是对事物本质和内在联系的反映，对作用到感官上的事物为媒介而间接地认识没有作用到感官上的事物。对语言来说，思维的原料和产品都是概念。概念是对客观事物特性、本质属性的反映，表现为词的形式。\n\n心理结构是不同心理现象之间的关系。如情绪和情感、意志都与需要相关，需要引起动机，动机引起行为，需要的满足引起正面情绪，不满足引起负面情绪，负面情绪使得认知效率下降。当外部世界不满足我们的需要的时候，我们使用意志来改造外部世界。\n\n### 感觉和知觉\n\n它们都是人脑对客观事物的反映。“反映”这个词说明，存在（映）在先，观察在后（反）。感觉和知觉都是“观察”的过程，它需要（映）的刺激，和接受刺激的感觉器官经由神经元和神经系统（反射）到一个地方。无脊椎动物发展到环节动物的阶段产生了神经系统，所以有感觉；脊椎动物阶段的神经系统更发达，所以有知觉。感觉和知觉是婴儿认知的开端，是最先成熟的心理过程，也是老年期衰退最早的心理过程。信息源可以来自体内或体外，但是产品在体内。可以说它们把物质转化成了精神。\n\n按刺激来自身体外面还是里面，可分为外部感觉（视听触味嗅）和内部感觉（动静机体）。感觉器官是输入设备，感觉是驱动程序。在内部感觉里，静觉的输入设备如手机的陀螺仪，刺激是来源于其内部的结构。\n\n| 刺激作用于，感觉                         | 描述与形成时间 [^1] （妊娠 8 周以后称为胎儿期，40 周分娩）                                                                                                                                                                                                   |\n| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| 嗅细胞，嗅觉                             | 最古老的感觉 <br> 6 个月的胎儿能嗅到母亲的气味并记住                                                                                                                                                                                                         |\n| 内耳里的科蒂氏器官，听觉                 | 人能听到 16-20000Hz，对 1K-4KHz 最敏感。20 岁以前听觉提高，60 岁以后对高频降低。<br>4 个月的胎儿听觉系统已经建立，28 周后对声音有反应和面部表情                                                                                                              |\n| 皮肤，触觉                               | 用两个钝针头刺激皮肤相邻的两点，能分辨出两个点的最小距离叫两点阈，用来量化触觉灵敏度。脊背的两点阈最大，手指和面部的两点阈最小。对于某一时刻和某一块皮肤来说，皮肤表面的温度叫生理零度 <br>2 个月有皮肤感觉，4 至 5 个月胎儿的触觉与出生周岁后婴儿的水平相当 |\n| 光感受器细胞，视觉                       | 视网膜视细胞层上有两种视神经细胞，对光敏感的锥体细胞在中央窝，对暗敏感的杆体细胞在边缘。锥细胞有 600 万个，杆细胞是锥细胞的 20 倍。 <br>4 个月就对光线敏感，但视觉系统在出生后才发挥作用，出生后 1 岁达到成人视力水平                                        |\n| 味蕾，味觉                               | 敏感性从舌尖、舌边前、舌边后、舌根的四种基本味觉是甜、咸、酸、苦。<br>26 周形成味觉，30 周味觉发达                                                                                                                                                           |\n| 肌梭、腱梭和关节小体，动觉               | 身体各部分的位置、运动和紧张程度，又叫运动觉。闭眼摸鼻子                                                                                                                                                                                                     |\n| 内耳中的耳石和三个半规管叫前庭器官，静觉 | 感受人体姿势与地心引力的关系，又叫平衡觉。晕车                                                                                                                                                                                                               |\n| 内脏，机体觉                             | 也叫内脏感觉。包括饿、渴、窒息、疲劳、便意、性、内脏痛                                                                                                                                                                                                       |\n| 对应的机体，痛觉                         | 对对应的机体造成伤害，可以是内部或外部感觉。痛觉最难适应。辣                                                                                                                                                                                                 |\n\n[^1]: 林崇德.&nbsp;发展心理学（第三版）[M].&nbsp;北京：人民教育出版社，2018:105-108.\n\n1. 人耳对 1000 至 4000 赫兹的声波最敏感\n2. 能引起某一感觉器官最敏锐感觉的刺激，是该感觉器官的适宜刺激\n3. 人类听觉的适宜刺激是 16 至 20000 赫兹的声波\n\n这三句话都是标准答案，如果把第二句话里的“是”理解成“蕴含”的话，这三句话是不冲突的。即 1000 至 4000 赫兹的声波，是包含在 16 至 20000 赫兹这个适宜刺激范围之内的。\n\n感觉和知觉的区别是，它们反映的是事物的个别属性还是整体。知觉在感觉的基础之上形成。对于一个苹果，我们视觉认识到的属性是红色，触觉和视觉认识到的属性是圆滑，味觉认识到的属性是酸甜。通过这些感觉认识到的各个属性，我们在心中构建出了它的整体形象，形成了关于苹果的知觉。\n\n你把苹果的各个属性结合到一起认识，这叫知觉的整体性；你由过去的经验判断它是一个苹果，并给出了判断的理由，这叫知觉的理解性；桌子上的盘子里有一个苹果，在同一时间里你对苹果的注意力要大于盘子和桌子，这叫知觉的选择性，这取决你的需要和感觉通道的容量；盘子里有几块切开的苹果，你仍然可以认识到它是苹果，这叫知觉的恒常性；有非常小一块果肉，你无法判断它是苹果还是梨，这叫超出了知觉恒常性发生条件的限度。\n\n在时间知觉的准确度上，声>震>闪，听觉>触觉>视觉。\n\n错觉是一种无法被避免的歪曲知觉，如[棋盘阴影错觉](https://baike.baidu.com/item/%E6%A3%8B%E7%9B%98%E9%98%B4%E5%BD%B1%E9%94%99%E8%A7%89/16833649)。\n\n### 颜色\n\nRGB-CMY：红绿蓝的负后像（互补色）是青品黄。RGB 是加色模型，用于发光体如电视屏幕。红+绿=黄，红+蓝=品，绿+蓝=青。\n\nCMY 是减色模型，用于吸收光的颜料，印刷加个 K 是黑色，CMY 分别吸收 RGB。青色的颜料把红光吸收之后，剩下的绿光和蓝光在加色模型里相加是青色；青色和品色颜料叠加，吸收红光和绿光，剩下蓝光，所以在减色模型里青+品=蓝。\n\nHSV 颜色空间：色相-饱和度-明度。\n\n- 色相是一个环，红色在 0 度。纯红色是 (0,1,1)\n- 饱和度是非灰色的比例。灰色没有饱和度，只有明度：(h,0,v)不管 h 是什么，只要 s 是 0，v 从 0 到 1 都是黑-灰-白渐变，特点是 RGB 相等\n- 色觉有缺陷的人靠明度辨别颜色，对应光的强度。\n\n| Label      | Input Range                                                                | Value                                         |\n| ---------- | -------------------------------------------------------------------------- | --------------------------------------------- |\n| Hue        | <input type=\"range\" id=\"hue\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0\">        | <span id=\"hueValue\">0</span>                  |\n| Saturation | <input type=\"range\" id=\"saturation\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"> | <span id=\"saturationValue\">1</span>           |\n| Value      | <input type=\"range\" id=\"value\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\">      | <span id=\"valueValue\">1</span>                |\n| Red        | <input type=\"range\" id=\"red\" min=\"0\" max=\"255\" step=\"1\" value=\"255\">       | <span id=\"redValue\">255</span>                |\n| Green      | <input type=\"range\" id=\"green\" min=\"0\" max=\"255\" step=\"1\" value=\"0\">       | <span id=\"greenValue\">0</span>                |\n| Blue       | <input type=\"range\" id=\"blue\" min=\"0\" max=\"255\" step=\"1\" value=\"0\">        | <span id=\"blueValue\">0</span>                 |\n| RGB Hex    | <input type=\"text\" id=\"hex\" value=\"#FF0000\" maxlength=\"7\">                 | <span id=\"hexError\" style=\"color:red\"></span> |\n\n<div id=\"colorBox\" style=\"width:100px;height:100px;margin-top:10px;border:1px solid black\"></div>\n\n<script src=\"color.js\"></script>\n\n### 意识、无意识、注意\n\n意识是在觉醒状态下的觉察，是在内存上的所有进程，包括对内的觉察和对外的觉察。对内的觉察包括回忆，描述自己现在的状态；对外的觉察是别的人和事，以及别人怎么看自己。它的特殊形态包括睡眠和梦。睡眠是把内存上的东西存储到了硬盘上。无意识是主板上时钟的电池，是个体没有觉察到的，无法调节和控制的心理现象。如果按弗洛伊德的三层模型，意识是现在正在的，前意识是现在可以想到的，无意识是现在不会想到的。荣格的三层模型是意识、个人潜意识、集体潜意识（可理解为 DNA 里一样的部分）。无意识心理和有意识心理之间的桥梁是词语。\n\n脑电波按频率可分为 δ θ α β γ，频率高的意识活动强。当我们在清醒的状态下，多是 14-30Hz 的 β 波，在放松的状态下是 8-13Hz 的 α 波，在睡眠状态下多是 δ 波。\n\n人在清醒状态时，大脑会分泌腺苷，高水平的腺昔浓度会引起困倦，而睡眠可以使大脑中的腺昔浓度降低。\n\n白天的光线激活视交叉上核，抑制松果体分泌褪黑素。黑暗促进褪黑素的分泌。褪黑素起镇静的作用。\n\n注意是一个动宾短语，是操作系统对意识的投注，是意识活动对特定对象的指向和集中。有稳定性，即注意对某个对象保持的时间。注意起伏的平均时间为 8 至 12 秒，为感受性提高-降低的一个周期。\n\n按是否主动，可分为随意注意和不随意注意。人对目光很难做到随意控制，因为目光会受到无条件反射的影响。如当突然有物体出现在视野边缘时，眼球会不自主地转动以捕捉这一信息。这种反应是一种遗传下来的保护机制。目光是最能反映人内心世界的身体语言。\n\n注意分配是指，在同一时间把注意分配到两个及以上对象上。\n\n负启动效应：你不想听一个人说话，屏蔽他说话信息。如果后续想听了，要花更长的时间注意他。\n\n### 记忆\n\n记忆是人类智慧的根源，是过去的经验在头脑中的反映，三个步骤是识记（输入）、保持（存储）和提取（输出）。\n\n记忆并不是一次性就能记牢的。从识记和存储的过程，保持的时间来看，分为瞬时、短时和长时记忆三个阶段，它们的保持时间是先短后长的。如果在识记时无意识，称为瞬时记忆或感觉记忆、感觉登记。感觉记忆体现在，视频都是一帧帧的，我们可以把离散的帧看成连续的画面，切镜头的时候也不会感觉到突兀。它的保持时间在 0.25 至 4 秒。如果在识记时注意了，则感觉记忆向短时记忆转变。短时记忆的注意广度是 5~9 个单位，对语言文字记的是声音，非语言文字记的是形象，保持时间在 5 秒至 1 分钟。对短时记忆的内容进行复述，可以进入长时记忆。长时记忆的保持时间在 1 分钟以上，长的直到终生。\n\n长时记忆分为陈述性记忆和程序性记忆，它们是按是什么和怎么做来分类的。陈述性记忆包括情景记忆和语义记忆，它们按是否和个人的经历绑定而分类的。情景记忆记的是自己过去经历过的某个事件内容及情绪；语义记忆记的是客观事实与知识。陈述性记忆的核心脑区在海马体、内侧颞叶、前额叶皮层；程序性记忆的核心脑区在基底神经节、小脑、运动皮层。\n\n在记忆形成之后，过去的经验会影响现在。外显、内隐记忆是按过去的经验如何被提取，从而影响现在的行为而分类的，是有意识还是无意识的影响。外显记忆的输出都是有意识的，包括回忆和再认。回忆是无线索的主动提取，如给出古诗的前半句，在没有选项的情况下自己写出后半句；再认是有线索的被动识别，如给出古诗的前半句，又给了四个选项，认得其中一个是对的。内隐记忆的输出是无意识的。如学会骑自行车之后，骑自行车的技能不用用力表现出来。看了床前明月光，再给出⻗字头，补全这个字，我们会更倾向于补成霜；如果刚看了忽如一夜春风来，我们会更倾向于补成雪。这叫启动效应，是内隐记忆对当前作业的影响。\n\n回忆或再认不出来或错误，称为遗忘。艾宾浩斯用无意义音节给自己做实验，发现外显记忆的遗忘的速度先快后慢，呈负加速曲线。内隐记忆是更持久的，且遗忘速度慢于外显记忆。健忘症患者可能无法回忆事件的外显记忆，但保留技能如骑车的内隐记忆。\n\n遗忘的原因有自然衰退和干扰。干扰分前摄抑制和倒摄抑制：在某个时间学习的材料，对识记或回忆另一个时间学习的材料造成的干扰。如“五十六个民族，五十六支花”这句歌词我们在之前是记得很清楚的，如果我们想把这段记忆转变成“五十六个星座，五十六支花”，那我们会经历前摄抑制，即之前摄取的信息抑制之后摄取的信息；小明某个网络账号的平台要求他修改密码，在他修改之后就没有管了，直到某一天再次登录，他想不起来上次修改的是什么了，小明经历的叫倒摄抑制，即后摄的抑制前摄的。\n\n记忆系列位置效应：你对琵琶行的第一句话（首因效应）和最后一句话（近因效应）的印象比中间的深。\n\n5 岁以前的儿童难以运用，或者说很少运用记忆策略，如复述。记忆从胎儿末期开始，1 岁之前主要是情绪和动作记忆，1 岁之后主要是表象和词语记忆。幼儿期以形象记忆、无意识记为主，机械记忆和意义记忆同时发展并互相作用。\n\n### 思维、想象\n\n灵长类动物发展到了思维萌芽阶段，可以认识到事物的外部联系；人发展到了思维阶段，可以认识到事物的内部联系。分析和综合是单体攻击，把单个事物分解成各个属性再拼回去。抽象和概括是 AOE\n\n表象是一个 SVG 文件，想象是 PS 的过程。无意的想象包括梦和病态的幻觉，弗洛伊德认为梦是冲突愿望的伪装满足；有意的想象包括幻想，幻想与个体的愿望相关，并指向未来。\n\n再造想象和创造想象的区别：前者如读书，通过书上写的文字，在头脑里复现了形象；后者如写，在不参照现有句子的情况下，自己写一些句子出来。我以前把再造想象误理解成了：把别人的话用自己的语言说一遍。这并不是对的，再造想象的意思是，注重于现有的东西在输入之后在脑海里形成了形象，不管输出了；而创造想象的注重的是，不参考现有的文字，它关注的是输出。再造想象关注前半部分，创造想象关注后半部分。当我试图在输出的时候，但是直觉有点不太对，所以又重新看了一遍再造想象的定义，才发现自己过去理解错了，为了覆写这个记忆，需要克服前摄抑制的干扰。\n\n### 情绪\n\n左侧前额叶皮层（PFC）与趋近系统和积极情绪有关，如笑；右侧前额叶皮层与退缩系统和消极情绪有关，如哭和恐惧。愤怒属于趋近系统，但它的神经机制可能在两边都有。杏仁核与危险和负面的情绪相关。\n\n情绪的三个部分，主观感受，生理唤醒和外部表现。主观感受如抑郁和焦虑，生理唤醒如发抖、血管扩张，外部表现是表情。表情分面部表情、姿态表情和语调表情。面部表情如微笑，姿态表情如走路的姿势、鼓掌，语调表情如说话的语气、断句的方式。通过训练，表情可能和实际的情绪状态不一致。\n\n情绪从状态可分为心境、激情、应激。心境是微弱而持久、弥漫的，激情是强烈而短暂的，应激是高度紧张的。从生物进化的角度可分为基本情绪和复合情绪。基本情绪包括喜怒哀恐，婴儿在出生一两天就会自发性地微笑。复合情绪是由基本情绪的不同组合派生而来的。\n\n社交情绪：内疚是对想象或实际的罪行或过失负有责任。羞耻是和常模不一样，强调差异性。\n\n恐惧是由现实危险引起的，焦虑是由非现实危险引起的。所以社交恐惧准确地说可能是社交焦虑。\n\n婴儿的微笑有三个发展阶段：自发性的、无选择社会性的、有选择社会性的。即无人就笑、有人才笑、分人笑。\n\n婴儿到一个陌生环境后，对母亲的分离焦虑，分三个阶段：抗议 冷漠 适应。\n\n### 意志\n\n下象棋走一步要犹豫很长时间，或者不推演直接就走，都叫和意志的果断性相反；一步走错陷入懊悔，影响了之后的决策速度，叫与意志的自制性相反；下一半不想下了，叫和意志的坚韧性相反；不知道自己为什么做要下象棋这个决定，叫与意志的自觉性相反。\n\n在意志行动的准备阶段里可能会有一些动机冲突，勒温和米勒把内心冲突分为四类：\n\n双趋式冲突：在两个吸引人的目标之间难以抉择。这时候我们要搬出决策终端机：\n\n<style>\n  body { font-family: Arial, sans-serif; }\n  #options { margin-bottom: 10px; }\n  .option { margin: 5px 0; }\n  button { margin-right: 5px; }\n</style>\n<div id=\"options\"></div>\n<input type=\"text\" id=\"newOption\" placeholder=\"下一步要干什么...\">\n<button onclick=\"addOption()\">添加选项</button>\n<button onclick=\"chooseRandom()\">随机决策</button>\n<script>\n  let options = [];\n  const addOption = () => {\n    const text = document.getElementById('newOption').value.trim();\n    if (text) {\n      options.push(text);\n      document.getElementById('options').innerHTML += `<div class=\"option\">${text}</div>`;\n      document.getElementById('newOption').value = \"\";\n    }\n  };\n  const chooseRandom = () => {\n    if (!options.length) alert(\"请先添加一些决定选项！\");\n    else alert(\"下一步应该: \" + options[Math.floor(Math.random() * options.length)]);\n  };\n</script>\n\n双避式冲突：在两个不情愿的情境中必须选择其一。比如某门害怕学不好的课，学它，和重修，必须选一个。\n\n“拉康精神分析理论碎片”“Meme 图合订本”等笔记，单看某一个都属于趋避式冲突，因为在写这些笔记的时候就能感觉到既有利又有弊。把它们结合起来看，先改哪一个，后改哪一个，改还是不改，就是双重趋避式冲突。\n\n第一叛逆期在幼儿期的 3 至 4 岁，是自我意识的第一个飞跃，实现自我意志，反抗父母控制。\n\n### 语言\n\n语言是社会现象，是交流的工具，在学会语言之前，婴儿用哭表达需要；言语是心理现象，是交流的过程，以语言为载体，没说出来的心里话属于是内部言语。\n\n- 10-14 月：言语发生\n- 1 至 1.5 岁掌握第一批词汇，在五六十个\n- 1.5 岁能说出双词句和多词句，2 岁说出复合句\n- 19-21 月：词汇量增长最快\n- 20-30 月（1.5 至 2.5 岁）：掌握母语基本语法的关键期\n- 36 月：基本掌握了母语的语法规则系统和全部发音，词汇量有 1000 个\n- 3 至 5 岁：口语发展的快速期\n\n身体语言包括脸上的目光和表情，身上的姿势和服化道，肢体上的手势和触摸；还有人际距离也属于是身体语言。公众距离在 3 米 7 以上，是一对多、单向的如演讲；商业上的社交距离在 1 米 2 到 3 米 7；朋友间的个人距离在 45 厘米到 1 米 2；亲人间的亲密距离在 45 厘米以内。\n\n个体全部社会化的前提是语言社会化。\n\n## 行为主义-反射\n\n条件反射在无条件反射的基础上形成。经典条件反射研究 S-R，即刺激-反应，把一个无条件刺激和一个条件刺激配对，最后条件刺激能引发无条件的反应，如巴普洛夫的狗。在巴甫洛夫的狗里，无条件刺激是食物，条件刺激是铃声，无条件反应是流口水；操作性条件反射研究 S-O-R，O 是个体，通过主动操作环境来获得奖励或避免惩罚，形成某种行为模式，如斯金纳箱。\n\n无条件反射是本能的原因造成本能的结果。条件反射是过去有两个因素同时造成一个结果，后来一个因素就能引发结果。一个本能的因素如被蛇咬会痛和流血，通过无条件的反射造成恐惧，同时有一个不直接造成结果的因素在场，如看到了蛇的形状，后来一个无条件的刺激，如看到了像蛇形状的井绳，就能造成结果。社交焦虑也是类似，如过去在有人在场的环境下被人责骂，有了羞耻感。无条件刺激是被人责骂，条件刺激是有人在场，无条件反应是羞耻感。本来是无条件刺激被人责骂引发无条件的反应羞耻，后来是条件刺激有人在场会引发无条件反应羞耻。\n\n斯金纳的操作性条件反射：正和负指的是操作，呈现或者移除某个刺激。强化和惩罚指的是在操作之后，促进还是抑制事件的再次发生。\n\n正强化是呈现（+）一个正刺激，负强化是移除（-）一个负刺激。它们都使行为增加。\n\n正惩罚是呈现（+）一个负刺激，负惩罚是移除（-）一个正刺激。它们都使行为减少。\n\n- 给正向刺激使行为增加，称为正强化。如工作强 -> 多发工资 -> 工作更强。\n- 给负向刺激使行为减少，称为正惩罚。如工作失误 -> 扣钱 -> 减少工作失误。\n- 移除负向刺激使行为增加，称为负强化。如逃避社交 -> 没有感到焦虑 -> 更加逃避社交。\n- 以前的正向刺激没有出现，使行为减少，称为无强化。如玩游戏 -> 没有新鲜感 -> 不玩游戏。\n- 移除正向刺激使行为减少，称为负惩罚。如晚上睡得晚 -> 把手机拿开 -> 晚上睡得早。\n\n观察学习是指，自己观察到别人的行为在收到奖励或惩罚之后，会调整自己的行为。\n\n朝向反射：新的刺激抑制旧的条件反射。感官朝向刺激。\n\n## 发展心理学\n\n皮亚杰认为\n\n1. 心理起源于动作：动作是主客体之间相互作用的中介，最早的动作是先天的无条件反射。\n2. 心理发展有内因和外因，内因有神经系统和内分泌系统的成熟、已有的经验图式、平衡性，外因包括社会环境，他人\n\n图式是什么意思：你在手机上玩和平精英，学会了用四指操作人物移动和射击后，这个四指操作的图式可以迁移到其他类似的 FPS 手游上，如三角洲行动。三角洲对你而言是一个新的刺激，把新的刺激整合到你已有的四指操作的图式上，即你在三角洲上照样可以使用四指操作，这叫把新的情形同化到已有的认知图式上。在打三角洲的过程中，你会遇到和和平精英不同的游戏机制，比如它的受击部位有好几种，胳膊或者腿受击了之后都要对这些部位单独地使用药品，腿受伤了还会减慢移动速度。这会造成你的战术有所改变，你原来在和平精英上的战术不能完全地应用到三角洲上了，比如在腿受伤的情况下，“先逃跑，后打药”这个战术可能就行不通，你必须要应用新的战术，这叫你的战术图式在接受新的刺激之后，顺应了这个被同化的刺激，从而你原有的图式变成了新的图式。\n\n同化：把新的刺激同化到原有的图式里，从而用原有的图式应对新的刺激；顺应：当原有的图式不能应对新的刺激时，改变原有的图式。同化是用原有的方法解决新的问题，顺应是当原有的方法不能解决新的问题时，改变方法。\n\n维果茨基认为\n\n1. 低级的心理机能是从动物进化而来的，如无意注意\n2. 高级的心理机能是通过人的生产活动及符号系统的中介而内化得来的\n\n心理机能从低级发展到高级有四个指标：随意化，概括-抽象化，整体化，个性化。随意化是指自己的有些行为是自己有意而为之的，可以被自己的意识控制；概括-抽象化是指可以通过概念，而不必需要具体的形象来讨论事物；整体化是指各种心理机能形成一个整体的心理结构。\n\n最近发展区是什么意思：在最近发展区之前，是人已经可以独立完成的任务，如学会了象棋棋子的摆法；下一步是通过他人的教学和协助，学会了象棋的规则，每一个子的走法，判定胜利的规则；在最近发展区之后，是人即便依靠他人的协助也无法完成的任务，如一个刚学会象棋棋子的摆法，还没有进入最近发展区学习象棋规则的人，让他去参加比赛拿奖。最近发展区告诉我们，在教学的时候，要先教学仅依靠他人的帮助才能独立完成的任务，而不是即使依靠他人的帮助也无法完成的任务。\n\n玛西亚认为，自我同一性的实现有两个维度，承诺和探索。承诺是我知道了我要成为什么样的人，探索是经过了一系列尝试。\n\n- 无承诺无探索：同一性迷乱\n- 有承诺无探索：父母想让我 xxx，于是我 xxx，但我不知道为什么要这样：同一性早闭\n- 有探索无承诺：内心斗争，同一性延迟：同一性危机\n\n埃里克森把人心理的发展分为八个阶段，每一个阶段有他预期所达到的效果，而为了达到这些效果，必须要解决一对矛盾。如果矛盾没有被解决的话，就会产生问题，并滞留到下一个阶段里。在下一阶段若出现上一阶段的问题，称为退行。这八个阶段的右端点大致成一个等比数列：1.5，3，5，11，青春期结束 21，40，65。它的分界线是模糊的，因人而异。\n\n婴儿前期的特点是，如果妈妈离开了就会哭，因为孩子还没有发展出客体恒常性，认为妈妈离开了就是永远地离开了。是基本信任和不信任的冲突。关键是要获得身体接触。\n\n埃里克森的第二个阶段和第三个阶段有什么区别：第二个阶段是自主对羞耻的冲突，获得意志品质，有对自己身体的控制权，我能自己做一些事情；第三个阶段是主动对内疚的冲突，获得目标品质，我知道我为什么要做这些事情。\n\n1.5 至 3 岁的婴儿后期：我能自己做；3 至 6 岁的幼儿期：我知道我为什么要这样做；6 至 12 岁的童年期：我能一直做。\n\n婴儿的气质：按婴儿对外界刺激的反应程度，如果反应不大，有正面的情绪，称为容易型；如果反应激烈，称为困难型；如果反应很小，称为弛缓型。\n\n加德纳的多元智能理论提出 8 种智能：语言，逻辑-数学，空间，肢体-动觉，音乐，人际，内省，自然观察。这包含了我们日常所说的情商\n\n## 社会心理学\n\n社会心理学的三个阶段是，启蒙期，形成期和确立期。启蒙期从古希腊哲学家的思辨到 19 世纪上半叶（1879 年科学心理学诞生）。形成期的末端是 1908 年，麦独孤的《社会心理学导论》和罗斯的《社会心理学》出版，标志着社会心理学诞生和形成。1924 年，奥尔波特的《社会心理学》出版，这第三本书确立了实验法的核心地位，从它之后就是第三个阶段。想-看-测。\n\n社会行为是人对社会因素所引起的，并对社会造成影响的反应和反应系统。\n\n社会行为公式：Behavior = f(Person, Environment) 由勒温提出。人的行为是其个人因素与其所处环境因素相互作用的一个函数。\n\n- 生物理论，遗传和本能。麦独孤提出 12 种本能。\n- 条件反射：社会学习理论(行为主义)：连结(条件反射的建立)、强化(条件反射的重塑)和模仿。外归因，不关注当时的主观情绪\n- 经济，诱因理论\n- 认知理论：取决于对社会情境的知觉和加工过程\n\n社会心理是社会刺激和社会行为之间的中介过程，是由社会因素所引起并对社会行为具有引导作用的心理活动。\n\n生活的意义有四个：自主、完成自己的目标和别人分配的任务、建立关系、自尊（认识自己，对自己有积极的评价）。、\n\n---\n\n社会化和自我概念\n\n社会化是指，让一个社会成员具有以下四点：技能、规范、目标和角色。社会化的载体有家庭、学校、参照群体、大众传媒。\n\n自我概念是指个体如何看待自己，类似詹姆士的客我。行动由主我发起，由客我控制。\n\n构建自我概念的四条路：自己的行为、他人的行为、与别人比较、自己的反省。\n\n- 自我觉知：注意在自己身上。包括内在自我觉知和公众自我觉知。\n- 自尊：个体对其社会角色自我评价的结果，与情绪相关。杨国枢等人把自尊分为四种取向：个人取向、他人取向、关系取向、家族或团体取向。詹姆士认为自尊 = 成功 / 抱负。\n- 自我提升：收集和解释自己的信息，以一种倾向于对自己做出正面评价的方式。\n- 自我确认：找证据来证实自我概念。\n- 自我效能：我有能力完成某件事。\n- 自我障碍：提前准备的用来解释失败的行为。\n- 自证预言：罗森塔尔效应，自己对他人的期望会影响他人的行为。\n- 自我检控：根据他人的自我表演来调整自己的自我表演\n- 自我表演的六种策略：只展示正面信息、显示自己的正直让他人内疚、谦虚、恳求、恫吓、逢迎。\n\n自我偏差：\n\n- 焦点效应：聚光灯打在我身上；透明度错觉：别人能看出来我隐藏的情绪\n- 自利偏差：我比别人好\n- 虚假一致性：别人和我的想法一样；虚假独特性：我是超乎寻常的\n- 盲目乐观：如在玩含运气成分的游戏时，如打牌，认为下一把会拿到好牌\n\n---\n\n社会知觉与归因\n\n分类以原型为基础，分类后可能会夸大类内的相似性，以及类间的差异性。\n\n个人知觉是指，根据获取的有限信息，如情绪，形成对某个人的印象：\n\n- 第一印象包括好坏、能力强弱、主被动这三个维度。\n- 整体印象包括平均模型、累加模型、加权平均模型。多数人使用中心品质模型，只关注几个主要的点，忽略次要的点\n- 晕轮/负晕轮效应：一个高分/低分项会影响其他项\n- 正性偏差：总分为正。因为自己心情好，或者认同对方。\n\n刻板印象是指人们通过自己的经验对某类人或事形成的较为固定的看法。在有限经验的基础上形成的刻板印象有消极的作用，会造成偏见和歧视。\n\n罗特提出控制点理论：内控者认为事情的结果取决于自己的努力程度，控制点在内部；外控者认为事情的结果取决于自己不能控制的各种力量，控制点在自己之外。\n\n为什么说对可控因素的归因，人们更可能对行为做出变化的预测；对不可控因素的归因，人们较可能对未来的行为做出准确的预测：\n\n1. 控制 -> 变，不控制 -> 不变\n2. 不变 -> 和上一次一样 -> 准确的预测\n3. 不可控 -> 不控制\n\n影响归因的主要因素包括：社会视角，当事人和旁观者对当事人的归因有偏差；观察位置，在不同空间位置下，会倾向于关注凸显出来的信息；时间因素，对过去很久的事件倾向于归因到背景；\n\n基本归因错误：他人成功和失败时都倾向于内归因，是因为他自己，不是因为环境。\n\n把自己的失败外归因，把他人的失败内归因都是一种自我价值保护的倾向，动机性的归因偏差。\n\n凯利三维归因理论：高特异性是一对一，低特异性是一对多；高共同性是多对一，低共同性是少对一；高一致性是在以前发生过，低一致性是在以前没有发生过。这是一个经验的模型，百分比为实验结果\n\n- 三高归于刺激客体（61%）：小明是春晚现场的观众，他只对节目 A 笑了，其他观众也对节目 A 笑了，且小明看春晚重播的时候还是对那个节目 A 笑了，这说明小明笑的原因是因为那个节目 A 有意思。\n- 低低高归于行为主体（86%）：小明是春晚现场的观众，他对节目 A 笑了且对其他很多节目也笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候还是对那个节目 A 笑了，这说明小明笑的原因是因为他笑点低。\n- 高低低归于情境（72%）：小明是春晚现场的观众，他只对节目 A 笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候对节目 A 也没有笑，这说明小明笑的原因是因为他只在那个环境下想笑。\n\n---\n\n他人在场\n\n扎荣克的优势反应强化说认为，当他人在场的时候，优势反应受激发，弱势反应受抑制。即熟悉的事情做得更好，不熟悉的事情做得更差。\n\n从责任分担的角度看：在多人共同完成一件任务时，单人付出的努力可能比单独完成时偏少，因为被评价的焦虑变小了，这叫社会懈怠或社会逍遥。解决方法是加强考核，把每个人努力的成果量化。旁观者效应：他人在场对利他行为有负面影响。如在公交车上互相等别人先让座。\n\n社会促进：他人在场也可能起激励作用，如朋友之间。\n\n从众是在真实或想象的群体压力下，被动地接受群体影响，自愿地与群体保持一致。若思想和行为都一致，称为真从众；若思想一致，但行为不一致，称为反从众；最常见的是行为一致，但思想不一致，称为权益从众。阿希做过从众实验，从众会受到群体压力的影响，在情境模糊、难做出判断时也会受到影响。\n\n模仿是在没有压力的情况下，自己有意或无意地受他人的影响使自己与他人相同或相似。塔尔德模仿律：下降律是从社会上层向下层扩散，下层有模仿上层的倾向；几何级数律是传播的速度，类似指数函数；先内后外律是先模仿自己文化圈子内部的。\n\n暗示是在非对抗的条件下，使被暗示者接受暗示者的观点，或者使其行为调整为与暗示者所期望的一致。如果成功了称为暗示，如果效果相反，称为反暗示。暗示的客体可能是模仿或从众的主体。\n\n---\n\n态度\n\n态度是个体对特定对象总的评价和稳定性的反应倾向。个体：说明态度是一个人的；\n\n特定对象：如对人，事，物，观念总的评价。说明态度总是指向一个对象，没有无对象的态度。而价值观是没有直接和具体的对象的，价值观是抽象的。\n\n稳定性：说明态度在形成之后会持续一段时间。这个时间或长或短，类似发展心理学的分阶段和不分阶段的对立统一，分阶段是为了便于研究。\n\n反应倾向：说明态度不是反应，它是在反应表现出来之前的。态度影响，而非决定行为。方向分正向和负向，正/负的倾向有强度，外露的程度称为外显度，卷入的程度称为深度，接近核心价值的程度称为向中度。\n\n凯尔曼认为，态度的形成，分依从，认同和内化三个阶段。依从是一种权益之计，在外显行为方面表现地与他人一致，是印象管理的策略；认同是自愿的与他人一致，情感或吸引力占主要作用；内化是在内心真正相信并接受他人的观点，理智占主要作用。\n\n态度的转变：\n\n- 海德平衡理论有三个对象 POX，即主体、他者和另一个对象。当这三者间的关系为三正或两负一正时为平衡状态，否则为不平衡状态，处于不平衡状态时会由费力最小原则向平衡状态转化。\n- 霍夫兰德态度转变模型四要素：发送者、信息、接收者、情境。情境不等于信道，可能是指接受者的心理状态\n  - 从发送者来说，如果发送者对接收者的威信高，在信息差异较大时说服效果好；反之，在信息差异适中时说服效果好\n  - 从信息来说，信息能引起的畏惧程度-说服效果曲线为 ∩ 型。面对面口头交流的效果 > 书面交流的效果。\n  - 从情境来说，信息重复次数-说服效果曲线为 ∩ 型\n\n态度的 ACB 模型是情感（Affection）、认知（Cogntion）、行为倾向（Behavioral tendency），在成分不均的时候，通常 A 占主要地位。\n\n---\n\n关系\n\n人际关系是指人与人在沟通与交往中建立起来直接的心理上的联系。反映它的深度的一个指标是自我暴露的程度，从浅到深分四个阶段：兴趣爱好、态度、自我概念和其他的人际关系、隐私。隐私指的是不愿意让他人知道的，且不危害社会的个人的秘密。\n\n人际吸引是个体与他人之间情感上互相亲密的状态，是人际关系上的一种肯定形式，分亲合（合群），喜欢和爱情。亲合的早期表现是亲子间的依恋。\n\n夫妻和未婚子女组成的家庭为核心家庭，如父母和正在上小学的孩子；夫妻和一对已婚子女组成的家庭为主干家庭，如爷爷奶奶和父母；夫妻和两对及以上的已婚子女组成的家庭为联合家庭，如外公外婆和父母、舅舅、舅妈。\n\n---\n\n沟通\n\n沟通的结构包括发送者，接受者，信息，通道（信息的载体），背景，障碍，反馈（把对方发送的信息回传一些，确定理解了）。\n\n在沟通双方的角色互相都明确时，称为现实沟通。角色不明确时称为虚拟沟通。如在互联网上，陌生的网友之间互发消息属于是虚拟沟通，但熟悉的网友之间互发消息属于是现实沟通。\n\n此站点是一种单向沟通，书面沟通的方式，是通道的一种，也是障碍的一种。但是如果有人给我提意见，我改了，也是双向沟通。\n\n---\n\n角色\n\n角色分类的方式有：\n\n- 获取方式（先天-后天努力，如母亲和教师）\n- 自觉性（演员角色-性别角色）\n- 社会功能（表现型-功利型，公平-效率，如学者和企业家）\n- 开放程度（规定型-开放型，如警察和朋友）\n\n角色失调按严重程度分四类：角色冲突、角色不清、角色中断、角色失败。\n\n在同一个角色内，不同人对其不同期望造成的冲突称为角色内冲突。同一个人在不同角色间的冲突称为角色间冲突，如职业角色和家庭角色，某个时间用来工作还是育儿。\n\n## 人格和自我\n\n人格帮助解决回答的问题是我是谁，可以在心理过程中得到表现。\n\n- 人格在遗传和环境的交互作用下形成，每个人的人格都是独一无二的。人格独特性中，典型性和差异性的区别是 1 和 2 的区别。\n- 经常表现出来的心理与行为特点才算是人格的一部分，而偶尔表现出来的不算，这说明人格是可以被改变的。\n- 用 UML 类图表示，人格的组成元素——◆ 人格，它们是组合关系。就像发动机——◆ 汽车，发动机是汽车的一部分，且如果把发动机拆下来了，汽车就跑不了了。人格统合性的组织功能是架构师，匹配功能是适配器，健康功能是生命力。\n\n自我概念是指对自己的认知。它保持内在一致性（类似人格的统合性），决定个体对内和对外的期待，解释经验（在萨提亚冰山模型里处于最底层）\n\n男女在人格特征方面的差异，称为性别；在生物学上的差异称为性；社会对其的期待称为性别角色。从汉字来看，忄与心理活动有关，所以“性”就是“与生存相关的心理活动”。\n\n孟子认为人是性善的，告子认为人是无善无恶的：\n\n> 告子曰：“性犹湍水也，决诸东方则东流，决诸西方则西流。人性之无分于善不善也，犹水之无分于东西也。”<br/>\n> 孟子曰：“水信无分于东西。无分于上下乎？人性之善也，犹水之就下也。人无有不善，水无有不下。今夫水，搏而跃之，可使过颡；激而行之，可使在山。是岂水之性哉？其势则然也。人之可使为不善，其性亦犹是也。”<br/>\n> ——《孟子·告子上》\n\n荀子认为人是性恶的：\n\n> 人之性恶，其善者伪也。（善良的人是通过后天努力达到的）<br/>\n> ……<br/>\n> 孟子曰：“人之性善。”曰：是不然。<br/>\n> ——《荀子·性恶》\n\n世硕认为人是有善有恶的：\n\n> 周人世硕，以为“人性有善恶，举人之善性，养而致之则善长；性恶，养而致之则恶长”。如此，则性各有阴阳，善恶在所养焉。故世子作《养书》一篇。密子贱、漆雕开、公孙尼子之徒，亦论情性，与世子相出入，皆言性有善有恶。<br/>\n> ——《论衡·本性》\n\n下面这个表格不一定准确，只是一个初步的总结，它的内容大于形式，表身大于表头：\n\n|          | 守序                                                                     | 中立                                                                         | 混乱                                       |\n| -------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------- | ------------------------------------------ |\n| **善良** | 霍妮的真实自我，是灵性和慧根，是可能的最好结果，只要环境适宜就能表现出来 | 阿德勒认为人生而有自卑感，所以人格发展的目标是追求卓越                       | 弗洛伊德的超我，是压力，提供责任感和负罪感 |\n| **中立** | 弗洛伊德的自我，是本我、现实和超我三方面的调节者                         | 霍妮的现实自我，是别人在当下看到的，自己在当下表现出来的                     | 拉康的 $，人的欲望都是大他者的欲望         |\n| **邪恶** | 荣格的阴影，是每个人都有的                                               | 霍妮的理想自我，是一种防御的方式，是对缺少东西的投射，会产生不符合实际的期望 | 弗洛伊德的死本能                           |\n\n机能主义的代表人物詹姆士提出主我和客我：主我是进行中的意识流，是动力；客我是对自己的认知和评价，制约主我活动。符号互动论的米德沿用了他的说法，客我是社会我，自我是主我和客我互动的结果。哈特认为，在 8 个月之内婴儿还没有萌发自我意识，在 1 岁前后出现了主体我的意识，在 2 岁前后出现了客体我的意识，主体我表现为可以把自己和别人分开，客体我表现为可以使用第一人称代词“我”，并能从照片中认出自己。\n\n詹姆斯还把自我分为了物质自我、社会自我和精神自我。物质自我是肉体，以及“一切我们称之为自己独有的东西”，包括属于自己的物品。社会自我是社会角色，在不同场合和关系下表现出来的自我。精神自我分为主我和客我，也可以被其他精神分析理论细分。\n\n镜我是由他人的判断所反映的自我概念。镜我和客我的区别是，前者是他人的判断，后者是自己的判断。\n\n科斯塔和麦克雷提出大五人格 OCEAN：O 是开放，C 是尽责 Conscientiousness，E 是外向，A 是宜人 Agreeableness ，N 是神经质 Neuroticism （情绪不稳定）\n\nA/B 型人格为竞争/松弛型人格。\n\n希波克拉底按外向-情绪不稳定程度把气质分为四个象限：\n\n```\n      |N\n抑郁质|胆汁质\n------+-----E\n黏液质|多血质\n      |\n```\n\n## 量表\n\n艾森克人格问卷：是艾森克及其夫人制定的。EPQ 分 EPNL 四个量表。E 是内外向，得分高是外向的；P 是精神质，得分高的可能是孤独、敌意、不适应环境的；N 是神经质，得分高的可能是情绪不稳定的；L 是说谎。典型、倾向和中间的四个 T 分点：38.5 43.3 56.7 61.5\n\n自评量表：\n\nSDS：53-62 为轻度抑郁，63-72 为中度抑郁，73 及以上为重度抑郁\n\nSAS：50-59 为轻度焦虑，60-69 为中度焦虑，70 及以上为重度焦虑\n\n卡氏 16PF：是卡特尔制定的，他 1890 年发布了《心理测验与测量》的论文。16PF 是 16 种互相独立的根源特质，根源特质和表面特质的区别是，前者是有解释性的，可决定人的行为。1-3 为低分，8-10 为高分。答题形式为折中是非式：是、否、不一定。\n\n### 明尼苏达多相人格测验\n\n统计学家 George Box 说：所有模型都是错的，有些是有用的。这里展示的是对于明尼苏达多相人格测验（Minnesota Multiphasic Personality Inventory）的一系列判断题，回答是或否对最终结果的影响。依据是[知乎网友 aweeee](https://zhuanlan.zhihu.com/p/600297840)分享的 `xlsx` 文件。\n\n在编制这个量表的过程中采用了正常与异常两组受测者的样本。可用于辅助医疗诊断，也可用于正常人的个性评定。\n\n测试过程为：\n\n1. 做一道判断题，回答是或否\n2. 答完一道题之后，对某一个或者某几个量表加 1 分或不加分\n3. 答完所有题之后，会得到十四个分，包括四个效度量表（Q L F K）和十个临床量表（Hs D Hy Pd Mf Pa Pt Sc Ma Si）。这十四个分称作原始分。如果你做的是 566 道题的，额外会有五个附加量表（MAS Dy Do Re Cn），且 566 道题里有 16 个重复的题。笔者做的都是两百道题的，只有这十四个分。\n4. 特别地，对这五个临床量表加上一定比例的 K 分，加完之后的称为 K 校正分\n\n   - Hs += 0.5K\n   - Pd += 0.4K\n   - Pt += 1.0K\n   - Sc += 1.0K\n   - Ma += 0.2K\n\n5. 现在我们有十四个分。对除 Q 之外的十三个分分别计算 T 分：\n\n   $$\n   T = 50 + \\frac{10 \\times (你的得分 - 常模均值)}{常模标准差}\n   $$\n\n   其中，常模均值和常模标准差由你的国籍、性别和年龄范围选择。常模均值是一群正常人（健康人）做的平均分，用你的得分与其相减，刻画的是你与正常人的偏离程度；常模标准差刻画的是这一群正常人得分的离散程度，用其作分母，可以缩小误差。\n\n6. 一些医院的心理 CT 系统用的就是这个量表。根据计算出来的分，把 100% 的概率分成三份，分到三个类里边：正常、焦虑抑郁障碍、精神病性障碍。\n\n**四个效度量表，测你做的结果是否有效：**\n\nQ：（Question）【疑问】：你没有回答的题目数。22/399 或 30/566，则该答卷无效。\n\n在实际测验中，与“性”有关的几个题目可以选择跳过回答。其他题目必须回答。\n\nL：（Lie）【说谎】：你往圣人方向靠的程度。L 原始分若超过十分，则不能信任结果。\n\n例如\n\n> 做游戏的时候，我只愿赢而不愿输\n\n> 偶尔我会想到一些坏得说不出口的事\n\n> 有时我也讲假话\n\n等的这一些问题，回答【否】会加分\n\nF：（Validity）【诈病】：你装病的程度，或者判断力丧失的程度\n\n例如\n\n> 有人一直想毒死我\n\n> 有时我觉得有鬼神附在我身上\n\n> 我能在我周围看到其他人所看不到的东西、动物和人\n\n等的这一些问题，回答【是】会加分\n\nK：（Correction）【校正】：你对自己的私事隐瞒的程度、防御的程度\n\n例如\n\n> 当我正在做一件重要事情的时候，如果有人向我请教或打扰我，我会不耐烦的\n\n> 我觉得许多人喜欢夸大自己的不幸，以便得到别人的同情和帮助\n\n> 我不在乎别人对我有什么看法\n\n回答【否】会加分\n\n> 我几乎没有和家里人吵过嘴\n\n回答【是】会加分\n\n**十个临床量表：**\n\nHs：（Hypochondriasis）【疑病】：你对自己身体过度关心的程度\n\n例如\n\n> 我的胃口很好\n\n> 我睡得不安，容易被惊醒\n\n> 我的身体和我的大多数朋友一样地健康\n\n> 我常觉得头上好象有一根绷得紧紧的带子\n\n> 我不容易疲倦\n\n> 有时候我觉得我的头顶一碰就疼\n\n问的都是与你身体相关的，如果你给的反常回答太多了：\n\n- 如果你说的是实话：说明你确实有这些症状，说明你很反常\n- 如果你说的一半是实话：说明你在过度关心得病，说明你很反常\n- 如果你说的是假话：说明你在诉苦，说明你很反常\n\nD：（Depression）【抑郁】：你抑郁的程度\n\n前 200 道题里，有 44 道题涉及对【抑郁】这一项加分。笔者有一次抑郁的得分是 22，最终【正常】的概率在 90% 以上，另一次得分 38，【焦虑抑郁障碍】的概率在 90% 以上。说明这是一个参量。我们来关注几个同时对其他很多参量造成影响的题目：\n\n> 我发现我很难把注意力集中到一件工作上\n\n- 如果回答【是】：【抑郁】【癔病】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】加一分\n- 如果回答【否】：【支配性】加一分\n\n> 我希望我能像别人那样快乐\n\n- 如果回答【是】：【抑郁】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】【依赖性】【控制力】加一分\n\n> 我经常是快乐的\n\n- 如果回答【否】：【抑郁】【癔病】【精神病态】【偏执】【外显性焦虑】【依赖性】加一分\n\n> 许多时候，我觉得浑身无力\n\n- 如果回答【是】：【疑病】【抑郁】【癔病】【精神衰弱】【依赖性】加一分\n\nHy：（Hysteria）【癔病】：你天真幼稚外露的程度\n\n前 200 题中答【是】加分的有 11 道，有 4 道同时对【疑病】加分，另外 7 道所描述的症状比【疑病】更反常、更“躯体化”、不属于健康人应有的，例如：\n\n> 我的喉咙里总好象有一块东西堵着似的\n\n> 我觉得我的头到处都疼\n\n> 每星期至少有一、二次，我突然觉得无缘无故地全身发热\n\n答【否】加分的有：\n\n> 我喜欢看报纸上的犯罪新闻\n\n> 当一个罪犯可以通过能言善辩的律师开脱罪责时，我对法律感到厌恶\n\n> 我喜欢侦探小说或神秘小说\n\n> 看到血的时候，我即不怕，也不难受\n\n> 有时我真想骂人\n\nPd：（Psychopathic deviate）【精神病态】：你过分社牛、反社会、攻击性的程度\n\n答【是】加分的有：\n\n> 我从未有过正常的生活\n\n> 假如不是有人和我作对，我一定会有更大的成就\n\n> 和别人的家庭比较，我的家庭缺乏爱和温暖\n\n> 我小的时候，有一段时间我干过小偷小摸的事\n\n答【否】加分的有：\n\n> 我过去喜欢上学\n\n> 在聚会当中，尽管有人出风头，如果让我也这样做，我会感到很不舒服\n\n- Mf：（Masculinity-femininity）【男女子气】：你向你相反方向的性别靠的程度\n- Pa（Paranoia）【妄想】：你过分多疑和警惕的程度\n- Pt（Psychasthenia）【精神衰弱】：你过分紧张、焦虑、恐怖的程度\n- Sc（Schizophrenia）【精神分裂】：你思维混乱、情感淡漠、行为怪异的程度\n- Ma（Hypomania）【轻躁狂】：你过分气质昂扬，思维飘逸，爱说的程度\n- Si（Social introversion）【社会内向】：你内向的程度\n\n**五个附加量表：**\n\n- MAS【外显性焦虑】：你完成不了复杂工作的程度\n- Dy【依赖性】：你的心理不适应环境的程度\n- Do【支配性】：你主导和面对现实的能力\n- Re【社会责任感】：你愿意为你的行为负责的程度\n- Cn【控制力】：你对你病理性表现的控制能力\n\n**一些有意思的题目：**\n\n从这一些题目，以及前面提到的题目，我们可以揣摩出题者的意图，从而反推出健康人的标准。\n\n> 有时，当我难为情的时候，会出很多汗，这使我非常苦恼\n\n- 如果回答【是】：【外显性焦虑】加一分\n- 如果回答【否】：【抑郁】加一分\n\n> 我知道我的烦恼是谁造成的\n\n- 如果回答【是】：【精神病态】【妄想】【轻躁狂】加一分\n\n> 我相信善有善报，恶有恶报\n\n- 如果回答【是】：【依赖性】加一分\n- 如果回答【否】：【抑郁】加一分\n\n> 我觉得大多数人是为了向上爬而不惜说谎的\n\n- 如果回答【否】：【癔病】和【妄想】加一分\n\n> 一切事情都由老天爷安排好了\n\n- 如果回答【是】：【社会责任感】加一分\n- 如果回答【否】：【抑郁】和【控制力】加一分\n\n> 我几乎每星期都去教堂(或常去寺庙)\n\n- 如果回答【否】：【抑郁】加一分\n\n因为 MMPI 是由美国人制定的，两国的文化习俗不同。中国常模的 D 分和 Sc 分都比西方常模高，其他的比西方常模低。类似的还有：\n\n> 我相信人死后还会有\"来世”\n\n- 如果回答【否】：【诈病】【男女子气】加一分\n\n> 我的脑子有点毛病\n\n- 如果回答【是】：【诈病】和【精神分裂】加一分\n\n> 我的判断力比以往任何时候都好\n\n- 如果回答【否】：【抑郁】加一分\n\n> 在我一生中，我从来没有感觉到象现在这么好\n\n- 如果回答【否】：【校正】【抑郁】和【癔病】加一分\n\n## 变态与健康心理学\n\n参考《变态心理学（第 6 版）》9787115448385\n\n在生物学上，完全变态发育的昆虫如蚕，有卵、幼虫、蛹、成虫这四个“态”。在心理学上的变态是指在常态之外的心理状态。变态心理学也叫心理病理学。心理异常的连续谱模型类似光谱，从红到紫，最左边是完全正常，最右边是完全异常，它的分界线是模糊的。\n\n幻觉是指不真实的感知体验，如看到猪在天上飞，而别人看不到。妄想是不切实际的信念，如认为自己是天下第一，无人能敌。\n\n历史上对心理障碍的解释有三类，生物学理论，超自然理论和心理学理论。生物学理论如古代的中医认为人体内精气的流通会影响情绪，气发于心则喜、发于肝则怒、滞于脾则忧、滞于肺则悲、滞于肾则恐。古希腊的希波克拉底认为人体内有四种基本体液，包括心理异常在内的所有疾病都可以用体液失衡来解释，治疗方法除了与现代的休息，放松，调整生活节奏外，还包括放血。超自然理论如道教和佛教认为邪风入体和鬼魂附体会让人着魔。精神时疫是一群人突然都出现了一致的异常行为，如 1374 年德国持续了四个月的疯狂舞蹈症，大街上，家里，教堂上都有一群人手拉手地跳舞，并呼喊一些魔鬼的名字，这被解释为魔鬼附体。直到 1991 年，罗得岛的一所高中在没有毒气存在的证据下，发生了集体一氧化碳中毒的症状，医生解释为是对海湾战争使用毒气的恐惧造成的集体癔病爆发。心理学理论认为心理异常是心理创伤和压力造成的。\n\n现在变态心理学的取向有生物学取向，心理学取向和社会文化取向。\n\n行为主义的巴甫洛夫认为，心理异常是神经兴奋和抑制之间的冲突，是 IO 系统的故障，若兴奋占优，抑制占弱，则为神经衰弱，反之为癔症；精神分析认为，心理异常是因为发展阶段固着、人格内的冲突、防御机制不成熟，是操作系统的问题；人本主义认为，心理异常是自我完善路上的障碍，是软件升不了级了。马斯洛认为心理异常最基本的表现是存在焦虑，是存在（保证手机存储空间足够）和责任（必须装微信）之间的冲突。\n\n如何判定心理异常：\n\n- 从硬件的层面看，比如大脑在车祸后损伤了一部分，内存条氧化了，接触不良了，这叫医学标准。\n- 从操作系统的层面看，比如病人自己的感受是痛苦的，写了一些报错的日志；或者用户是痛苦的，觉得这电脑太卡了。这叫内省标准，分病人的内省和观察者的内省。\n- 从跑分和天梯图的层面看，比如小明做的心理量表的分太偏离常模了，这叫统计学标准。\n- 从应用功能的层面看，比如小明的微信没有打开自启动和消息弹窗权限，造成别人给他发消息他没有回复。这叫社会适应标准。\n\n## 心理咨询相关\n\n心理咨询工作的对象有三类人：健康是正常的充分不必要条件。健康是在正常的前提下，描述正常的程度。\n\n1. 精神高度正常，且高度健康的人\n2. 精神高度正常，但低度健康的人\n3. 痊愈及潜伏期精神低度正常的人\n\n严重的第三类人不属于心理咨询工作的对象。\n\n---\n\n法律只规定了能做和不能做的基线水平，伦理的要求比法律高。\n\n为什么说道德是偏个人的，伦理是偏客观的，伦理是实践道德的人生哲学：道德：通往德的一条道；倫理：倫=亻+亼+冊=人+集+册，理=治玉。\n\n在心理咨询师与来访者的专业关系中，咨询师有保密的责任，即使来访者去世之后仍要保密。保密的例外情况有：\n\n- 自愿的：来访者自愿将信息泄露给他人，或希望用信息诉讼别人\n- 危及生命的：来访者有即刻给自己或他人造成生命危险的可能/生命尽头的来访者希望加速自身死亡/来访者患有危及生命的传染性疾病，且可能危及他人\n- 司法的：成文法对保密的限制（来访者虐待儿童或老年人，或来访者被虐待）/法庭要求提供信息/针对咨询师的诉讼\n- 部分国家的：来访者在未来有犯罪的倾向（部分国家和地区）\n\n## 防御\n\n参考《心灵的面具：101 种心理防御》\n\n防御是将不愉快情绪的组成部分从我们的意识觉察中剔除出去的工作。我们每个人都有这样的内在机制，以保护自己免受情绪上的伤害。自我的防御机制是当自我把焦虑当作是负面的信号时产生的，自我承受了本我欲望和现实要求的双重压力。\n\n心理学家 Charles Brenner 提出，情绪由感受和想法组成。感受更加内向且抽象，而想法则更直接关联到行动上。不同的负面情绪反映了不同的时间焦点：\n\n- [抑](https://www.zdic.net/zd/zx/jg/%E6%8A%91)[鬱](https://www.zdic.net/zd/zx/jg/%E9%AC%B1)：与过去有关，伴随着糟糕事情已经发生的念头。你在一个密集不透风的树林里，被人用手按着头跪下来。\n- 焦慮：着眼于未来，担忧坏事即将发生。一群原始人在山上猎到了几只隹。当他们正在生灬做饭的时候，突然出现了一只虍，把一个人的囟给掀开了，并把他的心吃了。\n- 愤怒：集中于现在，怀有摧毁某物或某人的冲动。\n\n为了处理这些情绪，人们会使用（情感）隔离和（思维）潜抑两种基本防御方式。此外，还有其他多种防御手段来辅助这两种基础操作，除了分裂。\n\n有意识防御和潜意识防御：你的潜意识在控制一天 24 小时的呼吸，但你也可以通过意识控制一段时间。如果你在看到这些名词的解释之前就有类似的想法，那可能是偏向有意识的防御。如果这些名词提供了一个新的角度来解释你之前可能从来没有意识到的防御，那可能是偏向潜意识的防御。\n\n向外：\n\n- 投射：你是一台放映机，你把你心里的一些部分投射出来，扭曲了你对他人的感知。你为了不体验某种情绪，将它投射出去，站在别人的视角上幻想别人以这种情绪看待你。你在害怕你自己做出某件事，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在害怕你做出某件事。你在生别人的气，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在生你的气。\n  - 投射性指责：你对某些令人不悦的事负有责任，为了减轻负罪感，你指责另一个人。它的有意识版本叫“将自我批评转向客体”\n  - 投射性认同：你向别人的脑海里扔石头，激起的波纹形状和你不喜欢自己脑海里的波纹形状一样。你诱导某人以你所期望的方式做出回应。\n  - 点煤气灯：你脑子里的一团乱麻共振形成了别人脑子里的一团乱麻。你诱导某人以为自己的心理有问题。\n- 置换：一个人 A 带给你的不快情绪太多，你会在另一个人 B 身上感受到。\n- 外化：你感受到自己心智的一部分属于自己之外。你认为某人会来谴责你，但这个某人是你自己。\n\n> 我只想知道属于我的是不是真的我的 还是由我替谁在保管着\n\n- 躯体化：你的身体在阻止你将某一违背你良心的愿望行动化。\n\n向内：\n\n- 内摄：你把别人的一部分纳入了自身，形成了另一个人的意象，作为一个情绪的靶子。你听了郭德纲的相声，以后当你情绪低落的时候，你会回想起他的形象。\n- 认同：\n  - 认同内摄物：你表现得像那一个人一样，那个人变成了你超我的一部分。你听了郭德纲的报菜名，以后当你自己报菜名的时候，你会模仿郭德纲的语气和断句方式。\n  - 向攻击者认同：“踢猫效应”的一部分或“屠龙者变成龙”的一部分：之前某个人 A 以某种方式对待你，之后你用同样的方式对待另一个人 B\n  - 向受害者认同：为了缓解内疚情绪（比如你帮助不了某个受害者），你表现得像那个受害者那样并允许自己被伤害。\n  - 认同丧失客体：你的某个至亲去世了。你表现地像他一样，象征性地维持着他的生命。\n  - 去分化：自体-客体融合。你为了不感受到对失去某个人的恐惧，成为另一个人想让你成为的样子。\n- 转向自身：有自杀倾向的人不想感受对别人的愤怒，于是把对别人的愤怒转向自身。\n\n空中剧院：\n\n- 戏剧化：你为了让别人注意到你，在言语/行为中注入过多的情感。\n- 撤销和仪式化\n  - 撤销好的：做出一个违背你以前良心的事，证明你已经不是以前那个人。\n  - 撤销坏的：你的良心在挣扎，于是你先做出一个违背良心的事（仪式），再做出一个遵循良心的事（仪式）来补偿前面的那件事，撤销了前面那件事。或者你有内疚感，于是做出一个仪式（可能是别人看起来很奇怪的事）来撤销内疚感。\n- 分裂：你无法接受一个复杂的人（“好的”和“坏的”同时出现），将其分裂成了“好的”部分和“坏的”部分。你对某些人纯感受到“好”、某些人纯感受到“坏”。或者对同一个人某些时间纯感受到“好”、某些时间纯感受到“坏”。\n- 幻觉：你听到或看到不真实的想法。而这些想法是你努力不去想的。\n- 反客为主：你对某个糟糕事件的发生时间抱有疑虑，于是提前主动使该事件发生。\n\n披马甲：在日常生活中，我们常常披上各种“马甲”来掩饰真实的情感。\n\n- 假性独立：你对自己“需要人帮助”的想法感到窘迫，于是你不依靠任何人。\n- 病理性利他：你用帮助别人的形式为自己“需要获得帮助”的需求做一个代理。它继承自“投射”和“向受害者认同”。通常和“反向形成”、“受虐性挑衅”、“自大”共存。\n- 反向形成：你对某个人很生气，但是你变得十分和善。\n- 对抗恐惧行为：你做一些让你感到害怕的事，来证明你不害怕。\n- 不认同：某个人带给你了某些东西，你努力表现地不像这个人。\n- 超理性：你使用次级过程思维（以时间为导向的逻辑思维）来回避情感。\n- 幽默：你通过开玩笑来造成一种轻松的氛围。\n- 最小化：这件事没什么大不了的。\n- 夸大：这件事对我来说太重要了。\n- 否认：为了缓解内心的冲突，你不去关注现实。\n  - 本质否认：这件事没有发生过\n  - 行为否认：做出某件事来证明另一件事不是真的\n  - 幻想否认：[时间记录](/blog/time.html)\n  - 言语否认：说相声\n\n注意转移：当面临难以解决的问题时，人们往往会选择将注意力转移到别处。无论是沉迷于工作，还是回到童年时的爱好，都是为了避开当前的压力源。\n\n- 去生命化：回避对方身上的某些特质，不把对方当作人类看待。比如德国鬼子、日本鬼子、纸老虎这些称呼。\n- 泛灵化：你把情感寄托到一个非人类的事物上，以对待人类的方式对待它。\n- 象征化：你赋予某个想法以特殊的意义。\n- 理智化：你用一套理论减去了情绪的感觉部分，剩下思维部分。比如：抑郁症是做问卷做出来的。\n- 合理化：与“理智化”的区别是：“理智化”确实有理的，“合理化”的是把无理的说成有理的。\n- 穷思竭虑：你过度分析以期望解决某个问题本身，这样你就不会感受到这个问题带给你的感受。\n- 以一种情绪对抗另一种情绪：你会以愤怒来对抗恐惧。\n- 时间退行：你表现得像你过去那样，为了规避思考现在的冲突。为了逃避期末大作业，你把之前玩的游戏下载下来又重新玩了一遍。\n- 时间上置换到未来：为了逃避期末大作业，你会规划暑假准备干什么。\n- 考试成绩拔尖：考试成绩拔尖符合社会要求，且很难与“能力强”区分开。你用考试成绩拔尖掩盖自己另一些方面能力不强的事实，即扬长避短。\n- 工作狂：注意力全部投入在工作上，类似用暴饮暴食来忘记一些什么事。\n- 地形学退行：你的意识退缩到了潜意识里，俗称睡大觉。\n\n## 创伤心理学\n\n参考施琪嘉《创伤 30 讲》《创伤心理学（2006）》\n\n### 定义与实例\n\n心理创伤有两个要素：引发创伤的事件，和经历创伤后的结果。\n\n定义创伤性的事件有两个标准：危及生命的，或者突破以往内心信念的。\n\n创伤按事件来源可分为三类：自然的，人工的和人为的。自然的是一些来自自然界的不可抗力，如地震、山火、泥石流；人工的是由人所制作的工业产品所间接引发的，且非某人所有意而为之的，如矿难、车祸；人为的是由某人有意而为之的，如蓄意施虐。\n\n按复杂程度或形成时间，可分为泰尔 I 型和泰尔 II 型。泰尔 I 型创伤为简单型创伤，是成年所经历的一次性的创伤，恢复时间较快；泰尔 II 型创伤为复杂型创伤，通常是幼年时期形成的，恢复时间较慢，一般来说迟早会发作。\n\n在经历创伤之后，有 80% 到 90% 的人会自愈。有 10%~20%的人需要心理治疗来干预。\n\n没有没有创伤的人：婴儿在出生之前是在泡在羊水里的，肺泡没有打开，加上是一个失重的环境。在出生时母亲通过产道把羊水从婴儿的肺里面挤压出来，婴儿出生后的第一声哭就是为了呼吸，打开了肺泡，又受到了 1 个 g 的重力加速度，断了脐带后又要通过哺乳来获取养分。所以，对婴儿来说，出生就是一个重大的创伤。有一种说法是，我们之所以记不起来 3 岁之前的经历，可能是因为经历创伤之后断片了，即弗洛伊德的“屏蔽记忆”。\n\n创伤的传递方式分水平传递和垂直传递，水平传递是传给同一辈人，垂直传递是通过家庭传递给下一代，分代际传递和隔代传递。代际传递是指上一代人所经历的痛苦的事件，没有被和解的事件通过非语言的形式传递给下一代。\n\n创伤的记忆表现形式有躯体化，噩梦和解离，解离是指通过一个扳机点，如一个词语激发了创伤。\n\n---\n\n我父亲在上初中的时候，水壶被别人偷了，他是受害者，在面对老师的时候，他相当于把整个人缩进去了，完全屏蔽外界的信息，加上一句话都不回复。我在之前是不知道他的经历的，但是在高中的时候，一模一样地复刻了他的经历，就是在考试没写作文的时候。这就叫创伤的代际传递，是没有经过语言的方式传递给下一代的。如果他在之前给我说过了他的经历，事情可能就会有改变，我会更早一点地同情他。形成的原因可能是因为，我爷爷奶奶喜欢把他锁在屋里。\n\n我妈也是一样，她在之前上班的时候被一个人威胁了，让她做不属于她分内的工作，这个工作还是亲戚帮找的。但是直到离职的时候才给那个亲戚写信。在她换一个工作，做自我介绍的时候，也是满脸通红的。因为我妈小时候，给我婆婆提建议，结果婆婆不信任她，用棍子打她的脑袋。\n\n---\n\n从拉康的角度理解创伤：创伤是被回溯性建构的，我们对创伤的解释随主人能指的变化而变化。笔者在听说“社交恐惧”这个词之前，压根不知道自己是什么问题，所以被诊断为“抑郁症”之后，只能抱着这个词不放。这就像婴儿在学会说话之前，只能用哭来表达需要，因为无词不达意。在没有别人给我的父亲做出“内向”的评价之前，我也觉得父亲是没什么问题的。但当我们要用它解释一个什么东西时，在创伤性事件发生当中的不愉快情绪可能是被我们有意地忽略的。\n\n### 治疗方法\n\n建议找一个可靠的心理治疗师。\n\n遥控器技术：\n\n1. 想象有一个投影仪，正在播放你以前的创伤经历，把它投射到了墙上\n2. 用遥控器把投影仪关掉。\n\n保险箱技术：\n\n1. 想象有一个保险箱\n2. 这个保险箱的长宽高是多少？是什么材料做的？壁有多厚？内外壁是什么颜色？分格了还是没分格？\n3. 这个保险箱的锁是什么类型的？门好打开吗？开关门有声音吗？你会怎么打开门？钥匙是什么样的？\n4. 这个保险箱的锁足够坚固吗？如果不是，把它换成足够坚固的，直到破坏不开为止\n5. 把保险箱的门打开，把给你带来压力的东西通通装进去，再关门锁住。\n6. 把保险箱放到一个你觉得合适的地方，这地方不应该太近，在你力所能及的范围内尽量远一些。且你如果想找回的时候还可以找回\n\n安全岛技术：\n\n1. 想象有一个绝对安全的小岛。这个小岛可以在你的心里，也可以在世界上的任何一个地方，只有你一人可以进去，你可以带一些东西。\n2. 岛上的景色如何？你眼睛看到的让你感到舒服吗？如果是，就留在那里；如果不是，就变换一些，直到你真的感到很舒服为止\n3. 你听到了什么？如上\n4. 你的皮肤感觉如何？闻见了什么？肌肉如何？呼吸如何？腹部感觉如何？\n5. 仔细体会你现在的感受，这样你以后再来到安全岛就会有类似的感受\n6. 给自己设计一个躯体动作，可以是手势之类的。只要你在现实里做了这个动作，立马就能回到安全岛\n7. 现在做一遍这个动作，并感受一下\n\n## 认知行为疗法\n\n参考郭召良《认知行为疗法入门》《认知行为疗法进阶》。\n\n最简单的模型是：情境 → 认知 → 情绪/行为。亚伦·贝克的 T 型/工型模型把认知拆成了三层：\n\n```\n具体情境 → 自动思维 → 症状：情绪+行为\n             ↑\n          中间信念\n             ↑\n童年经历 → 核心信念 → 补偿策略\n```\n\n概念化是对于一个具体的案例，通过找出模型里每一个概念的具体内容，来理解来访者的问题。\n\n横向概念化类似于情绪 ABC 模型：Activating events、Beliefs、Consequences\n\n纵向概念化：\n\n<img src=\"/blog/images/CBT-3.webp\">\n\n### 自动思维\n\n自动思维是在特定情境下出现的自动的想法，是症状的直接原因。比如收到一个别人直接给出的建议，就认为是收到了指责、批评，进而产生愤怒的情绪。它是自动涌现的，且不一定是真的。收到了指责是想法，不一定是事实，别人可能没有指责的意思。\n\n<img src=\"/blog/images/meme/速度比光快的代价.webp\">\n\n有效性是指自动思维符合事实的程度，有用性是指是否能达到预期目标。一个悲观且正确的自动思维，如别人确实是在指责自己，自己出现了愤怒的情绪，那么它是有效的，但是是无用的，因为你的预期目标是继续沟通下去。\n\n自动思维歪曲的类别分无效的、部分有效的、有效但无用的。无效的是没有证据，部分有效的是分别有正反的证据，有效但无用的是，有确凿的证据，但是对未来没有正面影响。种类包括：\n\n- 消极预测未来：它是有效但无用的\n- 灾难化（自己现在的处境太糟糕了）：它是有效但无用的\n- 以偏概全（只根据不利信息，没有看到有利的信息，进行消极的预测）：它是部分有效的\n- 读心术（无端揣测他人的想法）：它是无效的\n- 随意比较（没有分析具体的情况）：它是无效的\n- 过度引申（曾发生过的特殊事件会经常发生）：它是无效的\n- 任意推论（字如其人，字不好人就不好）：它是无效的\n\n自动思维的干预有识别、评估、评价和巩固应用四个环节。识别就是横向概念化，评估是给情绪和相信程度打分，评价是判断有效和有用的程度并形成新的替代思维，巩固是记住并在合适的时间运用替代思维。\n\n### 中间信念\n\n中间信念包括态度、假设和规则三个部分。\n\n- 态度（是、最担心的一种情况）：事件 A 发生是糟糕的。\n- 假设（如果）：如果事件 B 发生了，事件 A 就不会发生。B 通往非 A 为积极假设的路，非 B 通往 A 为消极假设的路。\n- 规则（应该）：我应该让事件 B 发生\n\n态度和规则是表层的，假设是深层的。贝克认为只有假设是可以被检验的，需要找出消极假设的不合理之处。\n\n中间信念阶段的认知歪曲种类包括：\n\n- 情感推理：根据情绪推理。\n- 理想化：使用“应该”、“必须”、“不能”这些词，根据自己的主观愿望而不是实际情况对自己提出要求；\n- 最高标准：只关心超过自己的人；\n- 只内归因和只外归因；我现在这个性格，全是我咎由自取，或者全是由我的家人造成的。\n\n补偿策略是中间信念的一体两面，是为了遮掩负性核心信念。包括努力策略、回避策略（不做困难事）、顺从策略（随便你）、归因策略、警惕策略（过度未雨绸缪，夸大危险，低估自己处理问题的能力）、自弃策略（我有能力做，但是不想做）、自恋策略（民科）。\n\n回避策略的体现：\n\n> ● 求助是不好的（态度）；<br>\n> ● 我要独立解决问题（规则）；<br>\n> ● 如果独立思考，就说明我是有能力的（积极假设）；<br>\n> ● 如果求助，就说明我是无能的（消极假设）<br>\n\n和中间信念属于同一层次的如：防御。如：萨提亚提出四种沟通姿态：过度为别人的讨好姿态；过度为自己，找别人茬的责备姿态；回避情绪、他人和自己感受的超理智姿态（电脑）；回避压力、转移话题的打岔姿态（鸵鸟）。\n\n### 核心信念\n\n同一个核心信念，在不同的环境（如家庭和学校）会衍生出不同的中间信念，中间信念中的态度是核心信念在具体环境中的体现。\n\n核心信念阶段的认知歪曲种类包括：\n\n- 贴标签：我就是一个什么样的人。\n- 苦算命运：我这辈子就是没有希望的。\n- 后悔倾向：如果我过去没有经历某件事，我就不会是现在这样。\n- 拒绝相反证据：拒绝与自己消极想法矛盾的观点\n- 黑白思维：我从来没有取得过成功。\n- 低估正面信息：虽然 xxx 发生了，但还是 xxx\n- 选择性负面关注：我只记得 xxx\n\n<img src=\"/blog/images/meme/看夜空看什么.webp\">\n\n先不管微波炉为什么能联网，此事在[《Starless》](https://music.163.com/#/song?id=20045625)里亦有记载，有一版的歌词翻译很雅，叫“无星夜里圣经黑”。\n\n### 干预策略\n\n分为两大类：解决问题，或者接纳问题的存在。后者认为，如果症状不重的话，可以带着症状去生活。\n\n认知改变策略：\n\n- 备选思维（分支）：在原来的自动思维之外另找一种思维。一件事可能会成功也会失败，给成功和失败的可能性各找几个证据。\n- 客观证据（实例）：找证据，不能用推理和分析来替代证据。\n- 苏格拉底式提问：支持你想法的证据，举出与你想法相反的证据。最糟糕的可能、最好的可能、最现实的可能分别是什么，每种可能的证据分别是什么\n\n行为改变策略：\n\n- 行为改变的目标：影响情绪、为认知改变提供证据。改变情境：情境引起自动思维，自动思维改变不了就改变情境，就是广义上的逃避问题。\n- 抑郁的特点是静止，焦虑的特点是回避。而行为改变策略直接要求反着来，对应的是行为激活和暴露。\n- 行为表演：假装自己完全相信新信念的情况下做出新行为，假戏成真。糟糕的结果不会唤起负性核心信念，因为是演戏不是真的，成功了就是真的，失败了就是假的。\n- 行为试验：假设检验两种方式：提两个对立的假设，或者对一个假设进行开放性探讨\n\n成长经验重构：回忆你以前经历过的某个创伤性的事件，然后再把它重新给经历一遍。在这次经历里，你可以基于你的想象，做出与之前不同的行为，然后别人也做出了不同的行为来回应你。最后你形成了一个正向的、错误的记忆，或者说不同解读方式的记忆，再把这个错误的记忆给记住，这样你以后回忆起的事件就是被改写过了一遍的事件。比如说受到某人体罚，在以前的负性核心信念是“我这个人是 xxx 的”，修正后的信念是“这个人想让我变得更好”，最后你通过一通说，在想象中和这个人沟通了，那个人也做出了和以前不同的行为，最后你们和解了。你以后回想起的记忆就是另一个版本的记忆了。\n\n关键点：给情绪命名。当时是什么样的情绪，再把自我否定的给淡化或者剔除掉。\n\n实现的方法有：把传记写出来，再修正传记。或者童年的我和成年的我进行对话，在以前的那个情境下某人做出了某个行为，想象自己应该怎么做才能使得那个人做出另外一种行为，双方行为前后的感受分别是什么。\n\n## 客体关系与自体心理学\n\n> 所有精神分析理论都关注在解说过去如何影响现在，以及病人内在世界如何歪曲并影响外在经验。\n\n以谷川流为什么写《凉宫春日的忧郁》为例子。在这本书里面，凉宫春日是一个期望可以影响现实的人。作者的代言人阿虚希望动画里的人物是真的，但认为现实里的圣诞老人是假的，对其无感，如何让动画人物出来，自己经历动画的剧情。古典弗洛伊德模式认为，是作者的本能、自我和超我之间存在冲突；客体关系理论认为，因为作者以前看的书和动画很多，所以脑子里有许多虚拟人物的形象（客体表象），这些形象给作者创造了一个幻想世界，但是幻想世界和现实世界是有落差的，最终导致作者把幻想世界写成书；自体心理学认为，作者追求的是一个全能客体，即凉宫春日，来弥补他自身的愿望。\n\n在一些哲学著作里面，一个人被称为主体。与主体相对的就是客体，客体是与某人有关系，但不完全属于这个人的东西，它与这个人的感受与需要相关，可以是一首歌，一个他人，或一件过去无法被和解的事。客体一词与关系连在一起时，指的是人际关系。当我们在和别人互动的时候，互动的对象并不仅仅是实际的他人，还包括一个他人的影子。这个影子可以是某个实际人物的扭曲版本，是一个内在他者。我们过去和重要他人的关系模式、过去关系的残留物会影响之后的人际关系。移情指的是，把过去和某一个人的关系模式，重复到现在的一个人身上。\n\n客体分内在客体和外在客体。如果客体是别人，外在客体就是实际的别人，内在客体是心里的别人。内在客体是外在客体的表象（Representation，代理人，翻译成表象可以看成动词->名词，也可翻译成“再现”），如一千个人心里的李逵，可能是来自于不同戏剧，或同一个文学作品里，不同人对李逵的不同理解。部分客体：是主体对客体的一种表象。如张三看了《水浒传》电视剧，李逵和母亲对话的一个片段，会觉得他是一个孝子；李四看了《水浒传》的书，劫法场的片段，会觉得他是一个杀人魔。完整客体指，我们通过看一些不同的东西，对李逵形成了比较立体的理解：李逵由好、坏、好与坏、非好与非坏这四个部分组成。\n\n自体（Self）是一个完整的主体。和自我（ego）的区别是，自体更完整，它包括了自我在内的所有心理机能。自我是心理功能的组织者，它无法被直接看到，但可以在心理过程中得以显现。客体关系是发生在自体与其客体间，而不是在自我与客体间。\n\n自体表象指的是，自己在与其他人和物（客体）建立关系的过程中，理解到自体。即我通过我之外的东西，形成对我自己的理解。比如在听了一首歌之后，就能体验到自体身上有情绪。\n\n分裂（Splitting）包括正常的发展过程和防御过程。比如一种同时含有喜和恐的复杂情绪，在还不够成熟，无法同时体验到的时候，会只体验到一个。\n\n---\n\n参考：Michael St. Clair《客体关系与自体心理学导论（第二版）》。\n\n**弗洛伊德学派的起始点：与客体关系及自体心理学理论相关的概念**\n\n在原初自恋状态下，自我是力比多本能的客体。\n\n认同和客体选择的区别：认同是自己想要变成他人那样，客体选择是自己想要拥有他人，给他人进行力比多投注。一个是看着自己变成客体，一个是看着客体。\n\n认同丧失客体的防御方式即：自己的至亲去世了，情感链接断了，无法进行力比多投注了，所以用认同置换了客体选择，通过做逝世亲人生前喜欢做的事，来认同他。\n\n> 如果孩童的自我有太多客体认同且如果他们太强有力而无法彼此兼容时，那就可能成为病态\n\n**梅兰尼．克莱茵：创新与过渡的理论家**\n\n婴儿为什么会吸手指：当喂食良好时，婴儿好的感受被投射到母亲的乳房上，母亲的乳房被内化为内在客体。婴儿的内在世界是一个幻想的世界，它可以主动响应驱力，如果外在客体不在场，可以借以内在客体来重复经历这个感受。如饥饿的婴儿可以通过幻觉到母亲乳房的感觉与奶汁的味道来暂时控制其饥饿。\n\n投射性认同的过程：把内在世界加到外在世界上，然后把外在世界重新内化。自身为缓解情绪，分裂出了一部分感受，将其投射到外在客体上，修正之后再内射回去。\n\n偏执－分裂位置：坏的东西就在那里威胁我；抑郁位置：担心好的会失去。\n\n> 她假设出生时自我就存在且带着非常早期俄狄浦斯冲突而导致超我的形成。\n\n**威廉．费尔贝恩：一个“纯粹的”客体关系模式**\n\n> 冲突并非自我与本我冲动之间，而是自我的各不同部分在和自我的内在客体之间相关联时产生的。\n\n> 任何时候当客体分裂时，自我跟着分裂而和客体的各不同部分建立关联性。\n\n在《凉宫春日的分裂》及《惊愕》三部曲里，有两个关键人物：佐佐木和渡桥泰水。当凉宫春日在阿虚的面前遇见佐佐木，并得知她是阿虚的挚友之后的有天晚上，世界线被分裂成了两个。因为在遇见佐佐木之前，阿虚的客体在凉宫心里可能是这样的：他更在意闹腾的女孩。因为凉宫就是属于闹腾的。在该小说里，人物的内心冲突以“闭锁空间”的形式可视化地表现出来，每当凉宫出现内心冲突时，她的闭锁空间里就会有蓝色的“神人”出现，把周遭的环境破坏为废墟；而佐佐木的闭锁空间是非常平静的，在规模和制造频率上都比凉宫的低。佐佐木作为一个平静且通常、高情商版的凉宫，而且自称为阿虚“相当亲密的朋友”，所以在遇见她之后，阿虚的客体在凉宫心里被分裂成了两个部分，进而凉宫也分裂成了两个部分。凉宫的设定是神，于是世界线也分裂成了 α 和 β 两条线，这是根本的原因。而直接的原因，起导火索作用的是伪 SOS 团的出现：SOS 团是凉宫在学校里创建的社团，意为“让世界变得更加热闹的凉宫春日团”。但凉宫的性格属于是非常不稳定的，如果她作神，对世界会有不可预知的影响。于是有三个反派想推举佐佐木这个内心平静的角色，意图把凉宫的能力转移到佐佐木身上。凉宫遇到了伪 SOS 团的四人，虽然不知道他们的密谋，但是在无意识里觉察到了事情的危机。原书里提到，渡桥泰水就是凉宫无意识的具体化体现，且只有她可以游走于两条线之间。\n\nα 线是一段日常的校园生活，SOS 团招募新人加入，但只有渡桥泰水一人通过。渡桥泰水在 α 线入团，说明凉宫在遇见佐佐木之后，找回了过去自己的一部分。为什么呢，因为从发卡这个线索来看，渡桥泰水的原型在以前就是存在于凉宫心里的，她和凉宫都是属于活跃的性格，且前者的情商更倾向于佐佐木一方。她是凉宫分裂出来的自体客体，是为了代替阿虚心里的佐佐木。\n\n在 α 线里，伪 SOS 团的成员虽然都存在，但在后续都并未出场；β 线是伪 SOS 团与凉宫一方直接进行对抗，这两条线分别代表着一种理想的，和现实的可能。因为在世界分裂之前，危机就已经出现了，β 线是危机的延续。它代表着一种最坏的结局：凉宫的能力真的被转移到佐佐木身上了。这意味着在凉宫心里，阿虚的客体发生了一个重大的改变——他在 β 线里都直接进到佐佐木的心里了。这就是“虚神论”的合理之处：谁的心里能更加占有阿虚的客体，谁就是神。我们同样可以用它来解释《消失》的剧情。\n\n渡桥泰水在 β 线里唯一出场的一次是在 β-10，往社团教室里带来了一朵花，为了保证两个世界的场景一致。花是一个变量，α 线里的花就是渡桥泰水带过去的。渡桥泰水从 α 线走入到 β 线，意味着凉宫从理想走向现实。在世界线收束的时候，渡桥泰水是在 α 线里的，把两个阿虚的手叠到一起了。α 线里的阿虚虽然是在凉宫的闭锁空间里，但是阿虚没有意识到，β 线里的阿虚是在佐佐木闭锁空间里。这说明凉宫的无意识找到了一种理性的方法，先从现实的层面上创造机会（β 线里带花），再从理想的层面上（α 线里），把两个阿虚客体整合到一起。\n\n---\n\n费尔贝恩认为只有坏客体会被内化，因为他认为内化客体是为了在环境中避开它。如果客体是好的，那就没有内化的必要了。比如说，在受到某一个人不好的对待后，却在内心里期望他是好的，唯一的解决方式是，把他的坏内化到自己身上，在自身里形成一个坏客体。但自身也可能承受不住的，可能在遇到某个其他人之后，该坏客体又被外化出来了。比如说以前受到一个老师体罚，后来认为所有的教师都是坏的。这就是我们所说的移情，或者置换。\n\n费尔贝恩把自我分为三个面向：中心自我、力比多自我和反力比多自我，它们分别与三个客体起关系。力比多自我是感觉到需要的部分，它认同好客体；反力比多自我又叫内在破坏者，它认同坏客体，并惩罚力比多自我，类似超我的功能；中心自我负责把这两个辅助性自我分隔开，是看戏的人。比如在一场考试之后，发现自己做错题了，试卷上得了一个叉，于是看着这道题开始后悔了。那么力比多自我的客体是对勾，反力比多自我的客体是叉，反力比多自我在看见叉之后，开始惩罚力比多自我。中心自我是看戏的人，它把批评者和被批评者分隔开了，它的客体可能是那道题。\n\n**东纳．温尼科特：具独特观点的小儿科医师**\n\n过渡性客体：从全能向非全能过渡。全能指的是，外界的所有事情都如自己的愿，比如饿了就有母亲喂食；游戏就是一个过渡性客体，虽然游戏里的人物可以受自己的控制，但也不是想赢就能赢的。比如在动作游戏里打 BOOS 的时候，除了自身出招和策略 BUFF 的配合之外，最重要的是，你要能知道这个 BOOS 会出什么招，在什么时候需要闪避以及如何闪避它，而这往往不是打一次就能适应的。\n\n真自体和伪自体：如果孩子早期没有被好好照顾，可能发展出防御性的伪自体，表现为和客体的关系感觉不是真诚的。只有真自体有自发性。一个个案：温尼科特的一位来访提到他无法自发地和别人谈话，除非加入别人的谈话中。如果他提出了自己的意见，就是在夺取父母的功能，而他真正想要的是被父母确认为一个婴儿。他的真自体没有被发展出来。\n\n> 退化作用（退行）是对过去某人需求未能给予足够响应的一个矫正的机会。\n\n**玛格丽．马勒：个体的心理诞生**\n\n个体化：我是，我存在。认同：我是谁。\n\n三大发展阶段：在第一个阶段是自闭期，约出生头一个月，是无客体的；第二个月开始是正常与母亲的共生期；第三阶段是分离-个体化，有两条并行的线，个体化是演化出自主性，分离是摆脱依赖。分离-个体化分四个次阶段，第一个次阶段里婴儿会初步地区分开自己和母亲，在目光上会检视母亲和非母亲；第二个次阶段在身体上会主动离开母亲，发展出一点自主性；第三个次阶段叫和解，是往以前回了一点，婴儿发现自己并不能完全地脱离母亲存在，对母亲比上一个阶段多了一点依赖，当母亲不在场时，借用过渡性客体来缓解自己的分离焦虑；第四个次阶段主要是在生命的第三年时且没有清晰的终结点，最终发展出情绪上的客体恒定性与个体性。\n\n## 社交焦虑障碍\n\n轻度的社交焦虑障碍称为社交焦虑症，严重的称为社交恐惧症。在 CCMD-3 里，社交恐惧的编号是 43.12。以 43 开头的是神经症，它是没有可证实的器质性病变作基础的，即你的身体是没有问题的。43.12 的诊断标准是：\n\n> - 继承自神经症（43）的：\n>   - [症状标准] 至少有下列 1 项：① 恐惧；② 强迫症状；③ 惊恐发作；④ 焦虑；⑤ 躯体形式症状；⑥ 躯体化症状；⑦ 疑病症状；⑧ 神经衰弱症状。\n>   - [严重标准] 社会功能受损或无法摆脱的精神痛苦，促使其主动求医。\n>   - [病程标准] 符合症状标准至少已 3 个月，惊恐障碍另有规定。\n>   - [排除标准] 排除器质性精神障碍、精神活性物质与非成瘾物质所致精神障碍、各种精神病性障碍，如精神分裂症、偏执性精神病，及心境障碍等。\n> - 继承自恐惧症（43.1）的：\n>   - 1 符合神经症的诊断标准；\n>   - 2 以恐惧为主，需符合以下 4 项：\n>     - ① 对某些客体或处境有强烈恐惧，恐惧和程度与实际危险不相称；\n>     - ② 发作时有焦虑和自主神经症状；\n>     - ③ 有反复或持续的回避行为；\n>     - ④ 知道恐惧过分、不合理、或不必要，但无法控制；\n>   - 3 对恐惧情景和事物的回避必需是或曾经是突出症状；\n>   - 4 排除焦虑症、分裂症、疑病症\n> - 本项的：\n>   - 1 符合恐惧症的诊断标准；\n>   - 2 害怕对象主要为社交场合（如在公共场合进食或说话、聚会、开会，或怕自己作出一些难堪的行为等）和人际接触（如在公共场合与人接触、怕与他人目光对视，或怕在与人群相对时被人审视等）；\n>   - 3 常伴有自我评价和害怕批评；\n>   - 4 排除其他恐惧障碍。\n\n害羞和内向的区别：内向是指把心理能量投注到自己身上的频次比他者多，害羞是指害怕来自外界的负面评价。\n\n社交焦虑者首先是自己看不起自己，有一个假想的、高标准的观看者被投射出来，时刻监视着自己的一举一动，如果达不到观看者的要求，会无地自容。这个假想的观看者可以依附到场景里的任何一个人身上，也可以不依附。不依附是投射，依附后是投射性认同，即对方真的认同了对方是一个高标准的人。\n\n复旦大学的张维为教授对此也有类似的看法：\n\n<img src=\"/blog/images/meme/只要你自信.webp\">\n\n社交焦虑的维持因素包括负强化：在做出一个回避的行为之后，没有得到负面的反馈，于是这个回避的行为会被强化。比如不社交，就不会把关系搞糟。\n\n社交技能训练：说以“我”开头的句子，以“你”开头的可能带有指责性。\n","source":"_posts/心理学碎片.md","raw":"---\ntitle: 心理学碎片\ndate: 2025-01-22 00:00:00\npermalink: psychology.html\nmathjax: true\n---\n\n## 问题讨论\n\n解决问题是什么意思？纽威尔和西蒙认为，首先要有一个问题空间，问题空间是一个人对于这个问题的初始状态、目标状态的认识，以及如何从初始状态转化成目标状态的认识。解决问题就是在问题空间里寻找一条从初始状态变成目标状态的路。\n\n问题可以怎么分类？按明确的程度分，初始状态和目标状态都很清楚的问题称为界定清晰的问题，否则称为界定模糊的问题。比如写一篇作文，如果在写之前就把提纲列出来了，最后要表达一个什么东西都提前定了，或许叫界定清晰。如果写一步看一步，不知道最终要写成什么样，叫界定模糊。或者说，按连续谱来看，写作文本身就在更靠近界定模糊的一侧，而写数学证明题在清晰的一侧。这个清楚或许指的是客观清楚。而主观清楚是分为，语义丰富和语义贫乏的问题，让一个小学生去做高数题，对他来说是或许语义贫乏的，因为在他的问题空间里，对初始的状态都无法理解；对高数教师来说是语义丰富的。\n\n我提出的这些问题，对我来说都是相对语义贫乏的问题。因为我对它们的相关知识都不够。是先提出一个目标状态（结论），再借助自己已有问题空间里的对初始和中间状态的认识，来看能不能通向目标状态。\n\n### 心理学\n\n普通心理学重要的概念有？意识和无意识、注意保证心理在场，需求及其的衍生（情绪、动机、意志）造成行为，感知觉、记忆和思维（想象、言语）对信息进行处理。\n\n为什么心理过程包括知情意三大块？“过程”是一个动词意义的，有起点和终点，可以多次进行。认识可以歇一会，情绪也可以消失。这里的意是意志，不是意识，意志是先有意识确定一个目的，再通过调节和支配行为，克服困难达到目的的过程，意志也是可以消失的，就是我们说的间歇性踌躇满志。名词意义上的“意识”在正常情况下一直在场直到死亡。睡眠和梦也是意识的特殊形态。像需要、动机、意识都是相对名词意义的，所以它们都不是心理过程。\n\n为什么说笛卡尔是现代心理学的开创者？在笛卡尔之前，公认的理论是，心灵对身体的作用是单向的，心灵会影响身体，而身体基本不会影响心灵，身体是木偶，心灵是提线者。笛卡尔把机械论的观念应用到人身上，认为人也是一台巨大的机器，身体可以影响心灵。这样我们就可以通过研究身体来研究心灵。\n\n为什么说冯特是现代心理学的建立者？在冯特之前，已经有人出版心理学的著作了。冯特在大学里建立了第一个心理学实验室，创立了第一本学术期刊，把心理学推向大众，体系化了。\n\n### 需要及其衍生\n\n马斯洛的安全需要是什么意思？如果我们把安全理解为，是一种没有感受到危险的状态，那么安全需要被满足，就意味着没有负面情绪了，那么当生理需要被满足时，是不是同时满足了安全的需要？不是这样的，安全需要指一种持续的状态，如果我当天吃饱饭了，满足了当天的生理的需要，但是我之后每天都不一定能吃饱饭，那么我的安全需要是没有被满足的。\n\n当此时的上层需要被满足了的时，一定意味着此时的下层需要被满足了吗？不一定。比如我们虽然有时受到别人尊重了，但是仍会觉得自己未来没有希望，实际上就是我们此时此刻的安全需要没有被满足；如果我之后每天都能吃饱饭，但是我现在是饿的，那么我现在的生理需要是没有被满足的。需求金字塔是一个动态的结构，它并不意味着下层的需要如果被满足之后，就是永远地被满足了。它或许只是指示了一种痛苦抢占的优先级，就像操作系统的进程调度，五层需要是并发的，下层需要占 CPU 的时间更长。\n\n马斯洛认为自我实现的需要是人类所独有的，反过来说，下面的四层是有些动物也需要的。比如第四层是尊重的需要，在群体里获得地位，狼通过竞争选出一个狼王。\n\n第三层和第四层的区别是什么？是单纯建立关系、有归属感，和获得价值与地位、有成就感的区别。比如我交一个朋友，只是单纯地想和他待在一起，或者在人多的地方比在人少的地方开心，这属于是第三层。但如果我想让他认可我，尊重我，这就上升到第四层了。比如我们能做到爱一个人，但是不一定能做到尊重他。\n\n物质需要和精神需要是什么意思？它指的是满足需要的对象是否是物质实体。比如我们买一张专辑，到底想要的是专辑的壳子和碟片、周边，还是里面的音乐内容。如果是前者，那么它满足了我们的物质需要；如果是后者，满足了精神需要。还存在着一种情况是，买一张专辑之后是为了拍照片发出来装一下，这属于是通过展示自己的物质条件或者音乐品味有多么地好，来满足自己的精神需要和社会需要。\n\n自然需要和社会需要的区别是什么？前者是在一个比较长的历史区间里直到现在，都是人一定需要的。后者受特定历史时期和环境的影响。自然需要由生理的不平衡引起，所以也叫生理需要；社会需要是后天习得的，所以也叫获得性需要。由生理需要引起的动机叫驱力，由社会需要引起的动机叫诱因。\n\n（图片由 DEEPSEEK 生成）安全需要的自然部分指：我的身体不会受伤，生命不会受到威胁；社会部分指：我的生活是稳定、有保障、可预测的。\n\n<img src=\"/blog/images/马斯洛需求金字塔.webp\">\n\n当我们的需要不被满足时，情绪、动机和意志就出现了。\n\n一般来说是，如果需要被满足了，会出现正面的情绪，反之出现负面情绪。但是还有一种特殊情况，当我们过去一直没有被满足的需求终于被满足了时，可能会感动到流泪。要解释这个现象，要么去厘清正负面情绪的范畴，把“感动到流泪”划分到强烈的正面情绪里。喜极而泣。\n\n《心理系》APP 上说，人的基本情绪有喜怒哀恐，复合情绪是由基本情绪的不同组合派生而来的。但我现在暂时认为，怒的背后就是恐，可以把它简化成三个基本情绪。或许这么说，所有需求未被满足时的情绪背后都包含一个恐。比如饿可以被解释成对死亡的恐惧，社交恐惧未被满足的需求是安全需求。在需求满足之后会喜，没有满足时是恐，如果在当下持有一种该需求是在长期或永远无法被满足了时，或回忆到自己过去的需求有一直没有被满足的，则出现哀。恐对应退缩系统，做出逃跑的反应，与右侧 PFC 激活水平相关；怒对应趋近系统，做出攻击的反应，与左侧 PFC 激活水平相关。恐是刹车，怒是油门，如果在路上看到了障碍物，那么刹车是第一顺位的，你要先停下来判断一下，再决定要不要踩油门冲过去。但是也还有一种情况，就是当时你太恐了，所以踩错了，踩成油门了。这就像一个创伤被激活时，应激的恼怒情绪压过了一切的恐惧。\n\n怒的背后一定是恐吗？如果我们在网上看到一些言论之后发怒了，可能是因为这个言论戳中了自己的一些点，且它至少是部分有道理的。还有一种情况是，它是没有道理的，但是你怀着一种强烈修正它的愿望，且它触发了你之前不被别人在乎的创伤，修正它也是无法改变对方的观念的，所以为了掩护自己的不被在乎的恐，怒就出现了。如果这个言论是和你没有关系的，且你也能看出来它也是没有道理的，比如有人说，肯尼迪是美国的第一任总统，那你就不会发怒，而只会感到可笑。因为他的言论使你能够确认自己的价值，有人是比你还要差的，那你也差不到那里去。这满足了你的社会需求和精神需求，尊重的需要。\n\n情绪和情感的两极性是什么意思？意思就是，对于情绪和情感的每一个特性，都存在着一个连续谱。有四个特性，或者说是变化的维度，包括三个成分特性和一个功能特性。情绪的三个成分是主观感受，生理唤醒和表情。主观感受的特性叫强度，如从低落到悲痛欲绝，从不满到狂怒；生理唤醒的特性叫紧张度，从轻松到紧张；外部表现的特性叫激动度，从喜怒不形于色到范进中举；由需要满足或未满足出现的正-负面情绪，对于推动行为有正-负面的功能，叫情绪和情感的动力性。\n\n为什么说需要引起动机？引起或许指一种时间上的直接、紧密的先后顺序。需要是有机体内部的一种不平衡状态，表现为有机体对内外环境条件的欲求。比如感到饿了，我需要吃饭。动机是激发个体朝着一定目标活动，并维持这种活动的一种内在的心理动力，是行为活动背后的原因。吃饭的行为可以使这个饿的不平衡状态变成平衡的，但是在吃饭的行为发生之前，在需要产生和满足需要的行为发生之间，还会出现别的行为，比如感到饿了，先做饭或者买饭之后才是吃饭，所以说需要并不直接紧密地引起吃饭的行为，而是先引起吃饭的动机。动机激发了寻找食物的事件，指向了获取食物的方法，维持了从寻找、获取直到吃饱的整个过程。\n\n为什么说“需要未满足-需要满足-产生新需要的循环”叫动机过程？动机是一直在场的吗？如果动机不是一直在场的，那么它的生命周期从需要产生开始，途经行为发生之前（激发行为）和之中（指向、维持行为）的过程，直到行为无需动机推动，此时说明需要已被满足。它的下一个生命周期从一个新的需要产生开始。这说明动机也是有过程的，那么为什么动机不叫作心理过程呢，或许因为它是被包含在情绪过程和意志过程里，或许是因为，它是一直在场的。动机并非“一直在场”作为一种持续的、可感知的力，而是作为一种“潜在的、可被激活的机制”一直在场。\n\n动机的维持功能和意志的坚韧性有什么区别？共同点都是指为实现一个预期目标，做一些事情来说，时长上的坚持，短期的和长期的。对于一个长期的任务来说，比如目标是每天跑步多少分钟，当天的时长除了要靠当天的动机之外，还要靠意志的坚韧性。如果跑步动机并不是在每一天内都出现的，那说明意志的坚韧性不足。如果跑步动机在当天出现了，但是由于其他事件冲突而没有执行，叫做意志的果断性不足，自制性不足，或者自制成变化的了。\n\n意志的四个品质，从时序上来看谁先谁后？首先要明确目标，所以自觉性是首位的；其次会遇到挫折，这涉及到处理情绪、做决策和管理行动，处理情绪和行动对应自制性，做决策对应果断性；在一个长期的时间上，坚持地克服困难，永不退缩，对应强的坚韧性。如果自觉性不足，即不知道自己为什么要做这件事情，后面的三个或许比自觉性强的情况更弱一些。\n\n### 信息处理（认知）\n\n为什么有时在朗读文字时，感觉没有默读的效果好？这是一个注意分配的问题。注意分配指在同一时间把注意分配到两个及以上的任务上，它的前提是，其中一些任务已经达到了非常熟练的程度。以我的个人经验是，由于我之前说话很少，读句子的语气控制没有达到自动化的程度，所以在朗读文字的时候，相对于默读文字有一个额外的语气检控的进程，发声的进程，有时还会去想别的，造成注意的资源不够了。另一方面，默读文字的速度更快，朗读的速度和默读的不匹配，这就像汉字的语义饱和，你光盯着一个字看，会感到陌生，甚至不认识这个字了。\n\n> (AIGC) 在绝大多数情况下，慢速进程会拖慢快速进程。其根本原因在于，共享资源在同一时间通常只能被一个进程独占。快进程必须等待慢进程释放资源后，才能继续执行。是否存在例外情况？有的，在一种特定情况下，慢进程不会拖累快进程：当共享资源是【只读】且【无需协调】的时候。例如，多个进程同时读取同一份文件或同一块内存数据。一个进程可以慢慢地读，另一个进程可以飞快地读。因为它们都不会修改资源，所以不需要加锁，也无需互相等待。快慢进程之间没有任何依赖关系，各自都能以全速运行。\n\n照这么说，想要提高朗读速度，可以“只读”，那就是真的只读了，不加理解地读。\n\n默读需要用到角回来识别字，朗读除此之外，还要用到布洛卡区说话和韦尼克区返听。\n\n当默读文字时，有时会在脑海中出现声音，当然不是实际的声音，是一种类似于回忆音乐旋律的感觉，这种现象是正常的吗？这种现象通常被称为 “内心言语”（Inner Speech），这说明默读时也用到了听觉皮层。在默读的同时也可以感觉到喉部肌肉的运动。\n\n> (AIGC)\n>\n> 1. 视觉信息：视觉皮层看到文字。<br>\n> 2. 转换：角回等区域将视觉符号转换为听觉代码。<br>\n> 3. 内部模拟：<br>\n>    - 运动模拟：布洛卡区及其周边区域会产生微弱的、被抑制的发音指令（科学家可以检测到喉部肌肉的微电流活动），这是一种“准备说话但没说出口”的状态。<br>\n>    - 听觉模拟：大脑的次级听觉皮层（Secondary Auditory Cortex）——特别是负责处理复杂声音（如语言）的区域——会被激活。这个区域就在您提到的韦尼克区附近。<br>\n> 4. 产生体验：正是这种听觉皮层的内部激活，产生了您所描述的“脑海中的声音”或“心理声音”。它不是来自耳朵的真实声音信号，而是大脑自上而下生成的预测和模拟。这和你“在脑子里单曲循环一首歌”的机制非常相似。<br>\n\n记忆一定需要外界的输入吗？在记忆的识记阶段需要，保持阶段和提取阶段都不需要。保持阶段里新输入的信息对已存储的信息有倒摄抑制，提取阶段可以通过提示来再认。我们对梦的记忆是通过自己的无意想象而得来的，这说明想象可以补充经验。在经历梦的时候，大脑对以往输入过的记忆进行重组；在回忆梦的时候，回忆的是重组过的记忆。\n\n做梦梦到旋律，这个旋律后来才发现是以前听过的，但梦醒后的很长一段时间都没有想起来来自于哪里，那么对这段旋律的记忆算不算内隐记忆？AI 给的回答是算的，因为梦的内容不是有意回忆的，在做梦之前，对旋律和来源的记忆都是内隐记忆；在做梦之后和再认之前，对旋律的记忆是外显的，而对来源的记忆是内隐的；在经过再认之后，来源的内隐记忆才变成了外显记忆。\n\n为什么说思维是人对客观事物本质和内在联系的认识？\n\n- 充分条件是有 A 必有 B，仅凭 A 就可充分推出 B；必要条件是无 A 必无 B，有 B 必要 A。\n- 事物的本质属性是什么意思？事物 A 的本质属性 a，是判断事物 B 是不是事物 A 的必要条件。如自行车的本质属性，有轮子，是判断一个物品是不是自行车的必要条件，如果无轮子，就必定不是自行车。有轮子不是是自行车的充分条件，因为仅凭这一个特征，无法充分推出它是自行车，它还可能是汽车。如果自行车失去了轮子，就不能称之为自行车了（除非叫“坏掉的自行车”），所以“有轮子”是自行车的本质属性。想要判断事物 A 是不是事物 B，应该怎么判断？我们需要保证，事物 A 具有事物 B 的所有本质属性，即 A 类是从 B 类继承而来的。比如自行车是车，因为自行车具有车的所有本质属性（通常意义上，有轮子，用于载人或物，在地上跑，相对于人的移动速度更快的机器）。或者说，A 是 B 类的一个实例，比如我的一辆自行车，是自行车类的实例。\n- 事物的偶然属性是什么意思？在失去偶然属性后，并不影响事物的本质。名字是一个人的偶然属性，在改名之后，仍然是同一个人。人格是一个人本质属性。特修斯之船，河流的偶然属性变了，但作为一个情感的客体，在人心里的本质属性是没有变的。\n- 事物间的内在联系是什么意思？摩擦和生热这两件事之间存在内在联系，这里的内在是指，多个事物之间的内在，因果关系。外在联系是什么意思？一只鸟随机地飞到了一辆汽车上，此时他们之间建立了一种外在联系。内在联系是寻找因果，必然性。\n\n打算盘是动作思维还是形象思维？用手算是动作思维，用心算是形象思维，通过口诀来判断打的动作是抽象思维，抽象思维也叫词的思维或逻辑思维。\n\n辐合思维是什么意思？辐是自行车轮子上的金属条，从轮圈到轴心，辐合思维注重从边缘聚集到中心，所以也叫求同思维。发散思维是解决问题的前半段，生成多种选项，辐合思维是解决问题的后半段，评估和执行选项。\n\n想象的功能是什么意思？想象是在已有形象的基础上，创造新的形象。这不是它的功能，是它的定义，功能是衍生出来的作用。通过小说的描写形成人物形象，是想象的补充经验的功能；通过想象来补充自己没有被满足的需求，画饼充饥望梅止渴，一个是替代性的满足；还可以是预见目标向目标前进。\n\n### 社会心理学\n\n存不存在无角色的社会人？社会角色的意思是：\n\n- 一种行为方式和心理状态，与个体的社会地位和身份相一致（主观条件）\n- 对特定地位个体行为的期待，是社会群体得以形成的基础（客观条件）\n\n所以，只要一个社会群体的场域（等级或优先级、功能的划分）存在，对其组成成员的期待（隐含的规则）存在，社会角色就一定存在。一个人在不同的场域会有不同的角色。但是，如果前面那一个主观的条件不存在，即在一个场合下，行为方式和心理状态与这个场合的规则不一致的人，或许可以说，他是跳出了这个角色的。比如在《月亮上的男人》这部电影里，主角安迪·考夫曼给人一种经常跳出角色的印象，或者说，他在一个场合下同时扮演了两个角色，这有时会造成角色间冲突。之后他还在个体意义上扮演了两个角色，并成功地使其他人认为了这两个角色一定不会是同一个人。\n\n角色冲突和角色不清的区别是什么？角色不清指主观或客观的对该角色的认识不清。而角色冲突是认识清楚的，但认识不一致。角色内冲突是指对同一个角色有两种以上的细分认识，如教师对学生既需要管理者的角色，也需要朋友的角色；角色间冲突指对同一个人的两种及以上角色认识之间存在冲突，如某个时间选择先处理工作问题还是家庭问题。安迪考夫曼对他的两个角色都是认识清楚的，但是别人可能没有看出来是两个角色。\n\n表现型角色表现的是什么？是社会的秩序，制度，价值观，道德风尚，公平，正的一面。如医生，教师，学者，感动中国的获奖者。而企业家通常是与之相对立的功利型角色的，表现的是效率的一面。到目前为止，获感动中国年度人物的企业家好像只有：2002 年的张瑞敏，2006 年的霍英东，2019 年的伍淑清。张瑞敏表现了中国企业走向国际，霍英东和伍淑清表现了香港和内地的关系。\n\n一个被亲生父母抛弃，后来被领养的人，他的先赋角色是领养者 A 的儿子。在他经历努力，找到真正的家人之后，他的角色是家人 B 的儿子。那么 B 的儿子的角色算先赋的还是成就的？在他找到家人之后，且他身边的人都知道了，那么这个角色对于他、两对父母、和知情者既是先赋的，也是成就的；在他知道自己被领养之后，但没有找到家人之前，对他和他的亲生父母及领养父母，帮助寻找家人的人来说，这个角色是先赋的，但还没有完全成就；在他还不知道自己是被领养的时候，对他，加上他身边的所有不知道领养事情的人的来说，这个角色是不存在的。\n\n为什么说自尊是人对其社会角色自我评价的结果？如果这么说，低自尊的意思就是，我认为我没有达到群体的标准。对于一个自我评价为“我是一个好员工，但不是一个好家长”的人，那么他的职业角色是高自尊的，而家长角色是低自尊的。如果一个人的 A 角色的自尊低，那么他可能会去建构一个 B 角色，比如一个自认为学习能力不强的人，会去把游戏的段位打得很高。\n\n马斯洛的自尊需要里，对成就、优势、自信的欲望与对名誉、支配地位、赞赏的欲望有什么区别？前者是内在动机驱动，后者是外在动机驱动。\n\n有纯粹的利他动机吗？\n\n权力动机是什么意思？当我们想要说服一个人，想要转变他的态度，或想让他按照自己的想法来做事的时候，这时候的心理倾向就叫做权力动机。大致由两个因素引起：对社会控制的需求（包括安全和尊重的需求），或对无能的恐惧。\n\n成就动机是什么意思？当我们感觉一件事情太简单，或者太难，所以没有做的动力的时候，这时候的成就动机是弱的。当一件事情我们认为有一定的挑战性，并非常想做的时候，这时候的成就动机是强的。两个影响因素是，主观成功的概率，和目标的吸引力。\n\n社交焦虑者有亲和动机吗？社交焦虑者的矛盾是：想和别人在一起建立友好或协作的关系，但是害怕风险。这个矛盾的前半部分就叫做亲和动机。这是一个趋避冲突，避的一点在于，和别人在一起会不自在。所以从动机上来看，社交焦虑者有趋的亲和动机 C，且还有另外一个避的动机。如果只有一个动机，只趋，或者只避，那么绝对不会焦虑，因为后者的情况就是，直接逃离现场。但从行为上来看，社交焦虑者的亲和倾向 B 是低的，因为 A 是焦虑。卡在意志行动的准备阶段了，意志的果断性不足。因为自觉性不足，所以果断性、自制性和坚韧性都不足。\n\n态度的 CAB 模型是什么意思？\n\n- 观点和信念的区别是什么？观点更短期、易变、详细。信念更抽象，改变更难。观点需要基于信念来提出，信念可以通过观点回溯。\n- 知觉和理解的区别是什么？知觉是侦察兵，理解是指挥官。\n- 理解和观点、信念的区别是什么？理解是认知的过程，在理解之后形成观点和信念\n- 评价：我认为苹果好吃；观点：经过以往的多次评价，我认为苹果比香蕉好吃；信念：我认为吃苹果对身体好（基于事实：苹果有维生素和膳食纤维；观点：身体需要维生素，膳食纤维有助于消化）。我对苹果的知觉是，我知道那是一个苹果（模式识别）；理解是，我能说出来我对苹果的观点和信念\n- 知觉 -> 理解 -> 观点 -> 信念，这四个再加上事实，就是态度的认知成分 Cogntion\n- 情绪：吃苹果之后，我开心了；情感：我喜欢吃苹果。评价和情绪、情感这三个，就是态度的情感成分 Affect\n- 行为倾向 Behaviour Tendency\n\n我认为跑步可以锻炼身体，这是我的认知 C；但是跑步会使我累得难受，这是我的情感 A；通常 A 占主要成分，所以我的行为倾向 B 是不常跑步。\n\n态度的卷入深度是什么意思？指态度对象对个体的意义重要性。如一个人对日本的态度，对日本有态度，但平常不接触日本的所有信息，相比在日本留学的人，对日本态度的深度更浅（C 的方面）。对一款经常玩的游戏，相比玩了很短时间卸载的游戏，态度更深（B 的方面），如果认为工作比游戏重要，那么对工作的态度比游戏更深。\n\n如何使用中等畏惧的信息说服？如果不常运动，得心血管疾病的风险是运动者的好几倍，运动会显著降低患心血管疾病的风险。\n\n为什么沟通的结构比霍夫兰德态度转变模型的四个要素多三个？霍夫兰德态度转变模型的四要素是接受者，发送者，信息和情境，接受者是态度转变的主体，通常是发送者劝说接受者，这个模型关注的是发送者如何在特定情境下使用特定信息转变接受者的态度。而沟通的结构是相对更平等的，所以会有一个反馈，反馈是指一个交互的，半双工的过程，比如我在回答对方之前，先把对方的观点复述一遍，看我的理解是否和对方一致。霍的情境对应沟通的背景，沟通的背景还比霍的情境多了物理层，包括心理、物理、社会和文化背景，而霍的情境是不涉及物理背景的。霍已经假定了沟通的信息传递本身是没有问题的，而沟通还涉及到了信息的载体，和传递之前和之中，信息是否有误码和损耗等障碍。信息的载体或者说通道是指面对面沟通还是发信息沟通。传递的障碍包括六个方面，信息源，编码，网卡，信道，自然衰减，和误解。来自信息源的障碍如信息量不够或不明确，编码的障碍如对英国人使用日语，网卡发送的障碍如声带的振幅不够，说话声音小，信道的障碍如误用了沟通载体和方式，自然衰减的障碍如远距离对话，两个终端上的障碍是误解。通道，障碍和反馈，是沟通比霍多的三个。\n\n### 创伤心理学\n\n照顾关系，依恋关系和主体间关系的区别是什么？父母给我们提供居住地和经济上的支持，叫做照顾关系；如果父母经常和我们玩，讲故事，有身体接触，可以形成依恋关系；我们对一个第一次遇到的陌生人，和他之间的关系就叫主体间关系。中医推拿，泡澡，泡脚也可视为一种身体的接触，这叫创伤的躯体治疗。\n\n如何解释，当我们看到古文，小说或电影里与自己类似的负面经历之后，自己的负面心境会缓解一点？这是一种共享的记忆。在同时同地同情境下，两个人共同经历的记忆叫做共时记忆，而共享记忆需要一个传达的过程。比如张三在时间 A 经历的记忆，在时间 B 通过口头或文字的形式分享给了李四。这种“不是只有我一个人是这样”的感受，从需求满足的角度看，满足了马斯洛的第三层，归属感和爱的需要。如果观看者 A 本身是尊重小说或电影里的人物 B 的，那么 A 可以把 B 当成自己，把 A 当作另一个人 C，A 通过扮演屏幕外的人 C，给屏幕里的 B 尊重，从而间接地满足了自己尊重的需要。\n\n## 抑郁的心理学理论\n\n- 压力源\n  - 生物性压力源：躯体创伤，疾病，噪音\n  - 精神性压力源：错误的认知结构、过去的经验、内心的冲突\n  - 社会环境型压力源\n    - 社会环境的问题：战争，亲人逝世，被监禁\n    - 人际适应的问题：由于自身的状况，造成的人际适应问题\n\n压力源指生活中要求人们去适应的事件，比如转学。压力反应包括主体觉察到压力源后，出现的心理、生理和行为反应，心理反应如出现低落的心境，生理反应如，行为反应如在社交场合面前退缩。压力是压力源和压力反应共同构成的一种认知和行为体验过程。\n\n行为理论 1（负惩罚）：压力-减少行为-减少正性强化物-退缩-减少正性强化物……（正强化）引起他人同情和关注-继发性获益\n\n行为理论 2（习得无助）：负性事件-习得无助-动机减少\n\n认知理论 1（认知反哺核心信念，自证预言）：对自己、世界和未来的看法消极-对事件的认知倾向于支持其消极证据\n\n某人某行为的原因，事件的结果 = 归因（信息）。\n\n- 内因/外因维度：是否因为自己\n- 整体/局部维度：适用范围\n- 稳定/易变维度：时间持续性\n- 可控/不可控维度：是否受自己主观意志影响\n\n认知理论 2（抑郁性归因风格，形成性习得无助）：对负性事件的归因倾向于内在、稳定和整体的原因-认为自己无法应对该事件-习得无助\n\n认知理论 3（思维反刍，%0|%0）：模糊和概括的记忆，对负性刺激注意偏好-专注、淹没于自身的感受、原因而不对于处理\n\n人际理论（客观上的狼来了）：难以信任别人-寻求他人肯定-容易感受到拒绝-难以信任别人-寻求他人肯定-身边人感到厌倦-寻求他人肯定-社会支持被收回\n\n社会文化理论 1（世代效应）：时代变了；家庭原子化；年轻一代对自己的期望过高。\n\n社会文化理论 2（性别差异，女性患抑郁的可能性是男性的两倍）：男性偏向喝酒否认痛苦，女性偏向反刍；社会对女性的偏见\n\n社会文化理论 3（种族差异）：\n\n## 生物学\n\n决定论是指，每个事件的背后都是有原因的，确定的因素可以引发确定的结果。还原论是指，可以把一个大的系统分解成组成它的基本部分来研究。如果心理现象以生理状态为决定的话，我们可以把人体还原成一些零件，通过药物来干涉它们的运转过程，从而改善心理上的问题。但不用药物的谈心、话疗也可以改善心理问题，有些药物不起效或起效慢，这或许说明心理现象不完全以生理状态为决定，也或许说明话疗、安慰剂也可以改善生理状态。\n\n来自体内或体外的刺激通过内导神经元（传入神经、感觉神经）传入脑和脊髓（中间神经元的回路），再通过外导神经元（传出神经、运动神经）传出到效应器官。人脑神经元有 100 亿个以上，在神经元之间有 1000 亿个以上胶质细胞，它可以给神经元输送营养，修复神经元；叫髓鞘的胶质细胞起着电线绝缘层的作用，确保神经冲动沿正确的路线传递。神经元在静息状态下，细胞膜外的电位比膜内高 70mV，膜外相对为正电；在受到刺激后，钠离子被泵入细胞膜内，膜内相对为正电。神经兴奋传导的速度通常为 3.2 ~ 320km/h，0.8 ~ 8m/s。突触是一个神经元上，与另一个神经元彼此接触的部分，一个神经元可有多个突触；在大脑皮层上，一个神经元可有 30000 个突触。一个神经元通过突触间隙，向其临近的神经元释放神经递质，称为神经冲动的化学传递。神经递质的接收方细胞膜上的分子叫受体。再摄取是发送神经元向突触间隙释放神经递质后，再吸收回去一部分，使得突触间隙的神经递质含量降低。降解是接收神经元向突触间隙释放酶，把神经递质分解成其他物质。\n\n- 中枢神经系统（CNS）\n  - 大脑又叫端脑。大脑的外层叫皮层，皮质或者灰质；白质在里边。额顶枕颞，动感视听\n    - 脑回是山脊，脑沟是山谷\n    - 额叶在头顶前部及额头，书写中枢在额中回靠近中央前回，如果损坏了称为失写症；表达性失语症是左半球额下回靠近外侧裂的布洛卡中枢，又叫运动型言语中枢，如果损坏了，说话迟钝费力\n    - 顶叶在头顶后部，枕叶在枕头附近，顶枕交汇处的角回如果损伤了，可以看到字，但是不能理解字的意思，就像看一个异国的语言，称为失读症；\n    - 额叶和顶叶的分界是中央沟。额叶顶叶，和颞叶的分界是外侧裂，外侧裂上方是额叶和顶叶，下方是颞叶\n    - 颞叶在太阳穴、耳朵附近，颞上回的维尔尼克中枢如果损坏了，可以听到声音，但是不能理解意思，称为接受性失语症；\n    - 岛叶与内脏感觉有关\n    - 大脑两半球的分界叫纵裂，由胼胝（pian2 zhi1）体相连\n  - 脊髓是最低级的，一些神经过程如膝跳反射可以不经过脑，只经过脊髓\n  - 脑干是最古老的，其网状结构调节睡眠与醒来，分布于延脑、桥脑和中脑；\n  - 小脑控制身体平衡\n  - 间脑\n    - 嗅觉是最古老的感觉，丘脑除了嗅觉之外，是其他所有感觉的重要中枢，把感觉接收器的信息传给大脑\n    - 上丘脑\n    - 下丘脑是自主神经系统的中枢\n    - 底丘脑调节肌张力\n- 外周神经系统（PNS）\n  - 躯体神经系统是用户态，受意识控制，如走路；\n    - 31 对脊神经\n    - 12 对脑神经\n      - 感觉神经（输入）：嗅神经、视神经、听神经\n      - 运动神经（输出）：眼动神经、滑车神经（颈部）、外展神经（面部）、副神经和舌下神经（舌）\n      - 混合神经（I/O）：\n        - 三叉神经（面部感觉的输入，咀嚼肌的运动）\n        - 面神经（味觉的部分输入，舌下腺、泪腺和鼻黏膜腺的分泌）\n        - 舌咽神经（味觉输入，唾腺分泌）\n        - 迷走神经（一般内脏感觉的输入，咽喉肌肉、内脏平滑肌和心肌的运动）\n  - 自主的是内核态，受无意识控制，如心跳是心在“自主”地跳，没法控制它不跳，像植物一样没有意识，所以又叫植物神经。通过特殊的训练，可以在一定程度上控制心跳快慢\n    - 交感的和副交感的。“交感”一词意为“共同感受”或“共同作用”，是在应激状态下协调多个内脏器官，做出战斗或逃跑的反应；副交感的拮抗交感的，调节身体的“休息和消化”反应。\n\n突触间隙的 5-羟色胺、去甲肾上腺素含量过少，会有抑郁的感觉。\n\n一些理论认为，焦虑和抑郁是下丘脑-垂体-肾上腺轴（HPA 轴）失调造成的。垂体分泌的激素种类最多，在下丘脑的下方。下丘脑的某些神经元分泌促肾上腺皮质激素释放因子（CRF），CRF 再刺激垂体分泌促肾上腺皮质激素（ACTH），该激素通过血液运输到肾上腺和其他器官，引起约 30 种激素的释放，每种激素都在人体适应紧急情况时起到一定的作用。\n\n表观遗传学认为，在 DNA 序列不变的前提下，基因的表达模式（何时、何地、表达多少）可以通过可逆的化学修饰（如 DNA 甲基化、组蛋白修饰）来动态调控和“改变”。\n\n抗焦虑药包括巴比妥类和苯二氮类，它们都有断药反应，后者用于安眠药。\n\n## 普通心理学\n\n参考彭聃龄《普通心理学（第 5 版）》等。\n\n普通心理学讨论的范围是普通成人，偏个体层面的心理过程和结构。与普通、成人和个体这三个词互补的就是异常，发展和社会心理学。\n\n认识是对信息加工的过程。包括感知觉、记忆、思维、语言的输入输出、想象。感知觉加工的是来自体内或体外的信息，通过记忆储存到大脑里，思维把这些信息进行重组，通过语言表达出来；想象以表象的矢量图为材料，把表象 P 成新的图。注意不属于是认识，因为它没有加工信息，而是选择将被加工的信息。认识也可以说成是客观事物在头脑中的反映。感觉是对事物个别属性的反映，知觉是对事物整体的反映，记忆是对过去经验的反映，思维是对事物本质和内在联系的反映，对作用到感官上的事物为媒介而间接地认识没有作用到感官上的事物。对语言来说，思维的原料和产品都是概念。概念是对客观事物特性、本质属性的反映，表现为词的形式。\n\n心理结构是不同心理现象之间的关系。如情绪和情感、意志都与需要相关，需要引起动机，动机引起行为，需要的满足引起正面情绪，不满足引起负面情绪，负面情绪使得认知效率下降。当外部世界不满足我们的需要的时候，我们使用意志来改造外部世界。\n\n### 感觉和知觉\n\n它们都是人脑对客观事物的反映。“反映”这个词说明，存在（映）在先，观察在后（反）。感觉和知觉都是“观察”的过程，它需要（映）的刺激，和接受刺激的感觉器官经由神经元和神经系统（反射）到一个地方。无脊椎动物发展到环节动物的阶段产生了神经系统，所以有感觉；脊椎动物阶段的神经系统更发达，所以有知觉。感觉和知觉是婴儿认知的开端，是最先成熟的心理过程，也是老年期衰退最早的心理过程。信息源可以来自体内或体外，但是产品在体内。可以说它们把物质转化成了精神。\n\n按刺激来自身体外面还是里面，可分为外部感觉（视听触味嗅）和内部感觉（动静机体）。感觉器官是输入设备，感觉是驱动程序。在内部感觉里，静觉的输入设备如手机的陀螺仪，刺激是来源于其内部的结构。\n\n| 刺激作用于，感觉                         | 描述与形成时间 [^1] （妊娠 8 周以后称为胎儿期，40 周分娩）                                                                                                                                                                                                   |\n| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| 嗅细胞，嗅觉                             | 最古老的感觉 <br> 6 个月的胎儿能嗅到母亲的气味并记住                                                                                                                                                                                                         |\n| 内耳里的科蒂氏器官，听觉                 | 人能听到 16-20000Hz，对 1K-4KHz 最敏感。20 岁以前听觉提高，60 岁以后对高频降低。<br>4 个月的胎儿听觉系统已经建立，28 周后对声音有反应和面部表情                                                                                                              |\n| 皮肤，触觉                               | 用两个钝针头刺激皮肤相邻的两点，能分辨出两个点的最小距离叫两点阈，用来量化触觉灵敏度。脊背的两点阈最大，手指和面部的两点阈最小。对于某一时刻和某一块皮肤来说，皮肤表面的温度叫生理零度 <br>2 个月有皮肤感觉，4 至 5 个月胎儿的触觉与出生周岁后婴儿的水平相当 |\n| 光感受器细胞，视觉                       | 视网膜视细胞层上有两种视神经细胞，对光敏感的锥体细胞在中央窝，对暗敏感的杆体细胞在边缘。锥细胞有 600 万个，杆细胞是锥细胞的 20 倍。 <br>4 个月就对光线敏感，但视觉系统在出生后才发挥作用，出生后 1 岁达到成人视力水平                                        |\n| 味蕾，味觉                               | 敏感性从舌尖、舌边前、舌边后、舌根的四种基本味觉是甜、咸、酸、苦。<br>26 周形成味觉，30 周味觉发达                                                                                                                                                           |\n| 肌梭、腱梭和关节小体，动觉               | 身体各部分的位置、运动和紧张程度，又叫运动觉。闭眼摸鼻子                                                                                                                                                                                                     |\n| 内耳中的耳石和三个半规管叫前庭器官，静觉 | 感受人体姿势与地心引力的关系，又叫平衡觉。晕车                                                                                                                                                                                                               |\n| 内脏，机体觉                             | 也叫内脏感觉。包括饿、渴、窒息、疲劳、便意、性、内脏痛                                                                                                                                                                                                       |\n| 对应的机体，痛觉                         | 对对应的机体造成伤害，可以是内部或外部感觉。痛觉最难适应。辣                                                                                                                                                                                                 |\n\n[^1]: 林崇德.&nbsp;发展心理学（第三版）[M].&nbsp;北京：人民教育出版社，2018:105-108.\n\n1. 人耳对 1000 至 4000 赫兹的声波最敏感\n2. 能引起某一感觉器官最敏锐感觉的刺激，是该感觉器官的适宜刺激\n3. 人类听觉的适宜刺激是 16 至 20000 赫兹的声波\n\n这三句话都是标准答案，如果把第二句话里的“是”理解成“蕴含”的话，这三句话是不冲突的。即 1000 至 4000 赫兹的声波，是包含在 16 至 20000 赫兹这个适宜刺激范围之内的。\n\n感觉和知觉的区别是，它们反映的是事物的个别属性还是整体。知觉在感觉的基础之上形成。对于一个苹果，我们视觉认识到的属性是红色，触觉和视觉认识到的属性是圆滑，味觉认识到的属性是酸甜。通过这些感觉认识到的各个属性，我们在心中构建出了它的整体形象，形成了关于苹果的知觉。\n\n你把苹果的各个属性结合到一起认识，这叫知觉的整体性；你由过去的经验判断它是一个苹果，并给出了判断的理由，这叫知觉的理解性；桌子上的盘子里有一个苹果，在同一时间里你对苹果的注意力要大于盘子和桌子，这叫知觉的选择性，这取决你的需要和感觉通道的容量；盘子里有几块切开的苹果，你仍然可以认识到它是苹果，这叫知觉的恒常性；有非常小一块果肉，你无法判断它是苹果还是梨，这叫超出了知觉恒常性发生条件的限度。\n\n在时间知觉的准确度上，声>震>闪，听觉>触觉>视觉。\n\n错觉是一种无法被避免的歪曲知觉，如[棋盘阴影错觉](https://baike.baidu.com/item/%E6%A3%8B%E7%9B%98%E9%98%B4%E5%BD%B1%E9%94%99%E8%A7%89/16833649)。\n\n### 颜色\n\nRGB-CMY：红绿蓝的负后像（互补色）是青品黄。RGB 是加色模型，用于发光体如电视屏幕。红+绿=黄，红+蓝=品，绿+蓝=青。\n\nCMY 是减色模型，用于吸收光的颜料，印刷加个 K 是黑色，CMY 分别吸收 RGB。青色的颜料把红光吸收之后，剩下的绿光和蓝光在加色模型里相加是青色；青色和品色颜料叠加，吸收红光和绿光，剩下蓝光，所以在减色模型里青+品=蓝。\n\nHSV 颜色空间：色相-饱和度-明度。\n\n- 色相是一个环，红色在 0 度。纯红色是 (0,1,1)\n- 饱和度是非灰色的比例。灰色没有饱和度，只有明度：(h,0,v)不管 h 是什么，只要 s 是 0，v 从 0 到 1 都是黑-灰-白渐变，特点是 RGB 相等\n- 色觉有缺陷的人靠明度辨别颜色，对应光的强度。\n\n| Label      | Input Range                                                                | Value                                         |\n| ---------- | -------------------------------------------------------------------------- | --------------------------------------------- |\n| Hue        | <input type=\"range\" id=\"hue\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0\">        | <span id=\"hueValue\">0</span>                  |\n| Saturation | <input type=\"range\" id=\"saturation\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"> | <span id=\"saturationValue\">1</span>           |\n| Value      | <input type=\"range\" id=\"value\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\">      | <span id=\"valueValue\">1</span>                |\n| Red        | <input type=\"range\" id=\"red\" min=\"0\" max=\"255\" step=\"1\" value=\"255\">       | <span id=\"redValue\">255</span>                |\n| Green      | <input type=\"range\" id=\"green\" min=\"0\" max=\"255\" step=\"1\" value=\"0\">       | <span id=\"greenValue\">0</span>                |\n| Blue       | <input type=\"range\" id=\"blue\" min=\"0\" max=\"255\" step=\"1\" value=\"0\">        | <span id=\"blueValue\">0</span>                 |\n| RGB Hex    | <input type=\"text\" id=\"hex\" value=\"#FF0000\" maxlength=\"7\">                 | <span id=\"hexError\" style=\"color:red\"></span> |\n\n<div id=\"colorBox\" style=\"width:100px;height:100px;margin-top:10px;border:1px solid black\"></div>\n\n<script src=\"color.js\"></script>\n\n### 意识、无意识、注意\n\n意识是在觉醒状态下的觉察，是在内存上的所有进程，包括对内的觉察和对外的觉察。对内的觉察包括回忆，描述自己现在的状态；对外的觉察是别的人和事，以及别人怎么看自己。它的特殊形态包括睡眠和梦。睡眠是把内存上的东西存储到了硬盘上。无意识是主板上时钟的电池，是个体没有觉察到的，无法调节和控制的心理现象。如果按弗洛伊德的三层模型，意识是现在正在的，前意识是现在可以想到的，无意识是现在不会想到的。荣格的三层模型是意识、个人潜意识、集体潜意识（可理解为 DNA 里一样的部分）。无意识心理和有意识心理之间的桥梁是词语。\n\n脑电波按频率可分为 δ θ α β γ，频率高的意识活动强。当我们在清醒的状态下，多是 14-30Hz 的 β 波，在放松的状态下是 8-13Hz 的 α 波，在睡眠状态下多是 δ 波。\n\n人在清醒状态时，大脑会分泌腺苷，高水平的腺昔浓度会引起困倦，而睡眠可以使大脑中的腺昔浓度降低。\n\n白天的光线激活视交叉上核，抑制松果体分泌褪黑素。黑暗促进褪黑素的分泌。褪黑素起镇静的作用。\n\n注意是一个动宾短语，是操作系统对意识的投注，是意识活动对特定对象的指向和集中。有稳定性，即注意对某个对象保持的时间。注意起伏的平均时间为 8 至 12 秒，为感受性提高-降低的一个周期。\n\n按是否主动，可分为随意注意和不随意注意。人对目光很难做到随意控制，因为目光会受到无条件反射的影响。如当突然有物体出现在视野边缘时，眼球会不自主地转动以捕捉这一信息。这种反应是一种遗传下来的保护机制。目光是最能反映人内心世界的身体语言。\n\n注意分配是指，在同一时间把注意分配到两个及以上对象上。\n\n负启动效应：你不想听一个人说话，屏蔽他说话信息。如果后续想听了，要花更长的时间注意他。\n\n### 记忆\n\n记忆是人类智慧的根源，是过去的经验在头脑中的反映，三个步骤是识记（输入）、保持（存储）和提取（输出）。\n\n记忆并不是一次性就能记牢的。从识记和存储的过程，保持的时间来看，分为瞬时、短时和长时记忆三个阶段，它们的保持时间是先短后长的。如果在识记时无意识，称为瞬时记忆或感觉记忆、感觉登记。感觉记忆体现在，视频都是一帧帧的，我们可以把离散的帧看成连续的画面，切镜头的时候也不会感觉到突兀。它的保持时间在 0.25 至 4 秒。如果在识记时注意了，则感觉记忆向短时记忆转变。短时记忆的注意广度是 5~9 个单位，对语言文字记的是声音，非语言文字记的是形象，保持时间在 5 秒至 1 分钟。对短时记忆的内容进行复述，可以进入长时记忆。长时记忆的保持时间在 1 分钟以上，长的直到终生。\n\n长时记忆分为陈述性记忆和程序性记忆，它们是按是什么和怎么做来分类的。陈述性记忆包括情景记忆和语义记忆，它们按是否和个人的经历绑定而分类的。情景记忆记的是自己过去经历过的某个事件内容及情绪；语义记忆记的是客观事实与知识。陈述性记忆的核心脑区在海马体、内侧颞叶、前额叶皮层；程序性记忆的核心脑区在基底神经节、小脑、运动皮层。\n\n在记忆形成之后，过去的经验会影响现在。外显、内隐记忆是按过去的经验如何被提取，从而影响现在的行为而分类的，是有意识还是无意识的影响。外显记忆的输出都是有意识的，包括回忆和再认。回忆是无线索的主动提取，如给出古诗的前半句，在没有选项的情况下自己写出后半句；再认是有线索的被动识别，如给出古诗的前半句，又给了四个选项，认得其中一个是对的。内隐记忆的输出是无意识的。如学会骑自行车之后，骑自行车的技能不用用力表现出来。看了床前明月光，再给出⻗字头，补全这个字，我们会更倾向于补成霜；如果刚看了忽如一夜春风来，我们会更倾向于补成雪。这叫启动效应，是内隐记忆对当前作业的影响。\n\n回忆或再认不出来或错误，称为遗忘。艾宾浩斯用无意义音节给自己做实验，发现外显记忆的遗忘的速度先快后慢，呈负加速曲线。内隐记忆是更持久的，且遗忘速度慢于外显记忆。健忘症患者可能无法回忆事件的外显记忆，但保留技能如骑车的内隐记忆。\n\n遗忘的原因有自然衰退和干扰。干扰分前摄抑制和倒摄抑制：在某个时间学习的材料，对识记或回忆另一个时间学习的材料造成的干扰。如“五十六个民族，五十六支花”这句歌词我们在之前是记得很清楚的，如果我们想把这段记忆转变成“五十六个星座，五十六支花”，那我们会经历前摄抑制，即之前摄取的信息抑制之后摄取的信息；小明某个网络账号的平台要求他修改密码，在他修改之后就没有管了，直到某一天再次登录，他想不起来上次修改的是什么了，小明经历的叫倒摄抑制，即后摄的抑制前摄的。\n\n记忆系列位置效应：你对琵琶行的第一句话（首因效应）和最后一句话（近因效应）的印象比中间的深。\n\n5 岁以前的儿童难以运用，或者说很少运用记忆策略，如复述。记忆从胎儿末期开始，1 岁之前主要是情绪和动作记忆，1 岁之后主要是表象和词语记忆。幼儿期以形象记忆、无意识记为主，机械记忆和意义记忆同时发展并互相作用。\n\n### 思维、想象\n\n灵长类动物发展到了思维萌芽阶段，可以认识到事物的外部联系；人发展到了思维阶段，可以认识到事物的内部联系。分析和综合是单体攻击，把单个事物分解成各个属性再拼回去。抽象和概括是 AOE\n\n表象是一个 SVG 文件，想象是 PS 的过程。无意的想象包括梦和病态的幻觉，弗洛伊德认为梦是冲突愿望的伪装满足；有意的想象包括幻想，幻想与个体的愿望相关，并指向未来。\n\n再造想象和创造想象的区别：前者如读书，通过书上写的文字，在头脑里复现了形象；后者如写，在不参照现有句子的情况下，自己写一些句子出来。我以前把再造想象误理解成了：把别人的话用自己的语言说一遍。这并不是对的，再造想象的意思是，注重于现有的东西在输入之后在脑海里形成了形象，不管输出了；而创造想象的注重的是，不参考现有的文字，它关注的是输出。再造想象关注前半部分，创造想象关注后半部分。当我试图在输出的时候，但是直觉有点不太对，所以又重新看了一遍再造想象的定义，才发现自己过去理解错了，为了覆写这个记忆，需要克服前摄抑制的干扰。\n\n### 情绪\n\n左侧前额叶皮层（PFC）与趋近系统和积极情绪有关，如笑；右侧前额叶皮层与退缩系统和消极情绪有关，如哭和恐惧。愤怒属于趋近系统，但它的神经机制可能在两边都有。杏仁核与危险和负面的情绪相关。\n\n情绪的三个部分，主观感受，生理唤醒和外部表现。主观感受如抑郁和焦虑，生理唤醒如发抖、血管扩张，外部表现是表情。表情分面部表情、姿态表情和语调表情。面部表情如微笑，姿态表情如走路的姿势、鼓掌，语调表情如说话的语气、断句的方式。通过训练，表情可能和实际的情绪状态不一致。\n\n情绪从状态可分为心境、激情、应激。心境是微弱而持久、弥漫的，激情是强烈而短暂的，应激是高度紧张的。从生物进化的角度可分为基本情绪和复合情绪。基本情绪包括喜怒哀恐，婴儿在出生一两天就会自发性地微笑。复合情绪是由基本情绪的不同组合派生而来的。\n\n社交情绪：内疚是对想象或实际的罪行或过失负有责任。羞耻是和常模不一样，强调差异性。\n\n恐惧是由现实危险引起的，焦虑是由非现实危险引起的。所以社交恐惧准确地说可能是社交焦虑。\n\n婴儿的微笑有三个发展阶段：自发性的、无选择社会性的、有选择社会性的。即无人就笑、有人才笑、分人笑。\n\n婴儿到一个陌生环境后，对母亲的分离焦虑，分三个阶段：抗议 冷漠 适应。\n\n### 意志\n\n下象棋走一步要犹豫很长时间，或者不推演直接就走，都叫和意志的果断性相反；一步走错陷入懊悔，影响了之后的决策速度，叫与意志的自制性相反；下一半不想下了，叫和意志的坚韧性相反；不知道自己为什么做要下象棋这个决定，叫与意志的自觉性相反。\n\n在意志行动的准备阶段里可能会有一些动机冲突，勒温和米勒把内心冲突分为四类：\n\n双趋式冲突：在两个吸引人的目标之间难以抉择。这时候我们要搬出决策终端机：\n\n<style>\n  body { font-family: Arial, sans-serif; }\n  #options { margin-bottom: 10px; }\n  .option { margin: 5px 0; }\n  button { margin-right: 5px; }\n</style>\n<div id=\"options\"></div>\n<input type=\"text\" id=\"newOption\" placeholder=\"下一步要干什么...\">\n<button onclick=\"addOption()\">添加选项</button>\n<button onclick=\"chooseRandom()\">随机决策</button>\n<script>\n  let options = [];\n  const addOption = () => {\n    const text = document.getElementById('newOption').value.trim();\n    if (text) {\n      options.push(text);\n      document.getElementById('options').innerHTML += `<div class=\"option\">${text}</div>`;\n      document.getElementById('newOption').value = \"\";\n    }\n  };\n  const chooseRandom = () => {\n    if (!options.length) alert(\"请先添加一些决定选项！\");\n    else alert(\"下一步应该: \" + options[Math.floor(Math.random() * options.length)]);\n  };\n</script>\n\n双避式冲突：在两个不情愿的情境中必须选择其一。比如某门害怕学不好的课，学它，和重修，必须选一个。\n\n“拉康精神分析理论碎片”“Meme 图合订本”等笔记，单看某一个都属于趋避式冲突，因为在写这些笔记的时候就能感觉到既有利又有弊。把它们结合起来看，先改哪一个，后改哪一个，改还是不改，就是双重趋避式冲突。\n\n第一叛逆期在幼儿期的 3 至 4 岁，是自我意识的第一个飞跃，实现自我意志，反抗父母控制。\n\n### 语言\n\n语言是社会现象，是交流的工具，在学会语言之前，婴儿用哭表达需要；言语是心理现象，是交流的过程，以语言为载体，没说出来的心里话属于是内部言语。\n\n- 10-14 月：言语发生\n- 1 至 1.5 岁掌握第一批词汇，在五六十个\n- 1.5 岁能说出双词句和多词句，2 岁说出复合句\n- 19-21 月：词汇量增长最快\n- 20-30 月（1.5 至 2.5 岁）：掌握母语基本语法的关键期\n- 36 月：基本掌握了母语的语法规则系统和全部发音，词汇量有 1000 个\n- 3 至 5 岁：口语发展的快速期\n\n身体语言包括脸上的目光和表情，身上的姿势和服化道，肢体上的手势和触摸；还有人际距离也属于是身体语言。公众距离在 3 米 7 以上，是一对多、单向的如演讲；商业上的社交距离在 1 米 2 到 3 米 7；朋友间的个人距离在 45 厘米到 1 米 2；亲人间的亲密距离在 45 厘米以内。\n\n个体全部社会化的前提是语言社会化。\n\n## 行为主义-反射\n\n条件反射在无条件反射的基础上形成。经典条件反射研究 S-R，即刺激-反应，把一个无条件刺激和一个条件刺激配对，最后条件刺激能引发无条件的反应，如巴普洛夫的狗。在巴甫洛夫的狗里，无条件刺激是食物，条件刺激是铃声，无条件反应是流口水；操作性条件反射研究 S-O-R，O 是个体，通过主动操作环境来获得奖励或避免惩罚，形成某种行为模式，如斯金纳箱。\n\n无条件反射是本能的原因造成本能的结果。条件反射是过去有两个因素同时造成一个结果，后来一个因素就能引发结果。一个本能的因素如被蛇咬会痛和流血，通过无条件的反射造成恐惧，同时有一个不直接造成结果的因素在场，如看到了蛇的形状，后来一个无条件的刺激，如看到了像蛇形状的井绳，就能造成结果。社交焦虑也是类似，如过去在有人在场的环境下被人责骂，有了羞耻感。无条件刺激是被人责骂，条件刺激是有人在场，无条件反应是羞耻感。本来是无条件刺激被人责骂引发无条件的反应羞耻，后来是条件刺激有人在场会引发无条件反应羞耻。\n\n斯金纳的操作性条件反射：正和负指的是操作，呈现或者移除某个刺激。强化和惩罚指的是在操作之后，促进还是抑制事件的再次发生。\n\n正强化是呈现（+）一个正刺激，负强化是移除（-）一个负刺激。它们都使行为增加。\n\n正惩罚是呈现（+）一个负刺激，负惩罚是移除（-）一个正刺激。它们都使行为减少。\n\n- 给正向刺激使行为增加，称为正强化。如工作强 -> 多发工资 -> 工作更强。\n- 给负向刺激使行为减少，称为正惩罚。如工作失误 -> 扣钱 -> 减少工作失误。\n- 移除负向刺激使行为增加，称为负强化。如逃避社交 -> 没有感到焦虑 -> 更加逃避社交。\n- 以前的正向刺激没有出现，使行为减少，称为无强化。如玩游戏 -> 没有新鲜感 -> 不玩游戏。\n- 移除正向刺激使行为减少，称为负惩罚。如晚上睡得晚 -> 把手机拿开 -> 晚上睡得早。\n\n观察学习是指，自己观察到别人的行为在收到奖励或惩罚之后，会调整自己的行为。\n\n朝向反射：新的刺激抑制旧的条件反射。感官朝向刺激。\n\n## 发展心理学\n\n皮亚杰认为\n\n1. 心理起源于动作：动作是主客体之间相互作用的中介，最早的动作是先天的无条件反射。\n2. 心理发展有内因和外因，内因有神经系统和内分泌系统的成熟、已有的经验图式、平衡性，外因包括社会环境，他人\n\n图式是什么意思：你在手机上玩和平精英，学会了用四指操作人物移动和射击后，这个四指操作的图式可以迁移到其他类似的 FPS 手游上，如三角洲行动。三角洲对你而言是一个新的刺激，把新的刺激整合到你已有的四指操作的图式上，即你在三角洲上照样可以使用四指操作，这叫把新的情形同化到已有的认知图式上。在打三角洲的过程中，你会遇到和和平精英不同的游戏机制，比如它的受击部位有好几种，胳膊或者腿受击了之后都要对这些部位单独地使用药品，腿受伤了还会减慢移动速度。这会造成你的战术有所改变，你原来在和平精英上的战术不能完全地应用到三角洲上了，比如在腿受伤的情况下，“先逃跑，后打药”这个战术可能就行不通，你必须要应用新的战术，这叫你的战术图式在接受新的刺激之后，顺应了这个被同化的刺激，从而你原有的图式变成了新的图式。\n\n同化：把新的刺激同化到原有的图式里，从而用原有的图式应对新的刺激；顺应：当原有的图式不能应对新的刺激时，改变原有的图式。同化是用原有的方法解决新的问题，顺应是当原有的方法不能解决新的问题时，改变方法。\n\n维果茨基认为\n\n1. 低级的心理机能是从动物进化而来的，如无意注意\n2. 高级的心理机能是通过人的生产活动及符号系统的中介而内化得来的\n\n心理机能从低级发展到高级有四个指标：随意化，概括-抽象化，整体化，个性化。随意化是指自己的有些行为是自己有意而为之的，可以被自己的意识控制；概括-抽象化是指可以通过概念，而不必需要具体的形象来讨论事物；整体化是指各种心理机能形成一个整体的心理结构。\n\n最近发展区是什么意思：在最近发展区之前，是人已经可以独立完成的任务，如学会了象棋棋子的摆法；下一步是通过他人的教学和协助，学会了象棋的规则，每一个子的走法，判定胜利的规则；在最近发展区之后，是人即便依靠他人的协助也无法完成的任务，如一个刚学会象棋棋子的摆法，还没有进入最近发展区学习象棋规则的人，让他去参加比赛拿奖。最近发展区告诉我们，在教学的时候，要先教学仅依靠他人的帮助才能独立完成的任务，而不是即使依靠他人的帮助也无法完成的任务。\n\n玛西亚认为，自我同一性的实现有两个维度，承诺和探索。承诺是我知道了我要成为什么样的人，探索是经过了一系列尝试。\n\n- 无承诺无探索：同一性迷乱\n- 有承诺无探索：父母想让我 xxx，于是我 xxx，但我不知道为什么要这样：同一性早闭\n- 有探索无承诺：内心斗争，同一性延迟：同一性危机\n\n埃里克森把人心理的发展分为八个阶段，每一个阶段有他预期所达到的效果，而为了达到这些效果，必须要解决一对矛盾。如果矛盾没有被解决的话，就会产生问题，并滞留到下一个阶段里。在下一阶段若出现上一阶段的问题，称为退行。这八个阶段的右端点大致成一个等比数列：1.5，3，5，11，青春期结束 21，40，65。它的分界线是模糊的，因人而异。\n\n婴儿前期的特点是，如果妈妈离开了就会哭，因为孩子还没有发展出客体恒常性，认为妈妈离开了就是永远地离开了。是基本信任和不信任的冲突。关键是要获得身体接触。\n\n埃里克森的第二个阶段和第三个阶段有什么区别：第二个阶段是自主对羞耻的冲突，获得意志品质，有对自己身体的控制权，我能自己做一些事情；第三个阶段是主动对内疚的冲突，获得目标品质，我知道我为什么要做这些事情。\n\n1.5 至 3 岁的婴儿后期：我能自己做；3 至 6 岁的幼儿期：我知道我为什么要这样做；6 至 12 岁的童年期：我能一直做。\n\n婴儿的气质：按婴儿对外界刺激的反应程度，如果反应不大，有正面的情绪，称为容易型；如果反应激烈，称为困难型；如果反应很小，称为弛缓型。\n\n加德纳的多元智能理论提出 8 种智能：语言，逻辑-数学，空间，肢体-动觉，音乐，人际，内省，自然观察。这包含了我们日常所说的情商\n\n## 社会心理学\n\n社会心理学的三个阶段是，启蒙期，形成期和确立期。启蒙期从古希腊哲学家的思辨到 19 世纪上半叶（1879 年科学心理学诞生）。形成期的末端是 1908 年，麦独孤的《社会心理学导论》和罗斯的《社会心理学》出版，标志着社会心理学诞生和形成。1924 年，奥尔波特的《社会心理学》出版，这第三本书确立了实验法的核心地位，从它之后就是第三个阶段。想-看-测。\n\n社会行为是人对社会因素所引起的，并对社会造成影响的反应和反应系统。\n\n社会行为公式：Behavior = f(Person, Environment) 由勒温提出。人的行为是其个人因素与其所处环境因素相互作用的一个函数。\n\n- 生物理论，遗传和本能。麦独孤提出 12 种本能。\n- 条件反射：社会学习理论(行为主义)：连结(条件反射的建立)、强化(条件反射的重塑)和模仿。外归因，不关注当时的主观情绪\n- 经济，诱因理论\n- 认知理论：取决于对社会情境的知觉和加工过程\n\n社会心理是社会刺激和社会行为之间的中介过程，是由社会因素所引起并对社会行为具有引导作用的心理活动。\n\n生活的意义有四个：自主、完成自己的目标和别人分配的任务、建立关系、自尊（认识自己，对自己有积极的评价）。、\n\n---\n\n社会化和自我概念\n\n社会化是指，让一个社会成员具有以下四点：技能、规范、目标和角色。社会化的载体有家庭、学校、参照群体、大众传媒。\n\n自我概念是指个体如何看待自己，类似詹姆士的客我。行动由主我发起，由客我控制。\n\n构建自我概念的四条路：自己的行为、他人的行为、与别人比较、自己的反省。\n\n- 自我觉知：注意在自己身上。包括内在自我觉知和公众自我觉知。\n- 自尊：个体对其社会角色自我评价的结果，与情绪相关。杨国枢等人把自尊分为四种取向：个人取向、他人取向、关系取向、家族或团体取向。詹姆士认为自尊 = 成功 / 抱负。\n- 自我提升：收集和解释自己的信息，以一种倾向于对自己做出正面评价的方式。\n- 自我确认：找证据来证实自我概念。\n- 自我效能：我有能力完成某件事。\n- 自我障碍：提前准备的用来解释失败的行为。\n- 自证预言：罗森塔尔效应，自己对他人的期望会影响他人的行为。\n- 自我检控：根据他人的自我表演来调整自己的自我表演\n- 自我表演的六种策略：只展示正面信息、显示自己的正直让他人内疚、谦虚、恳求、恫吓、逢迎。\n\n自我偏差：\n\n- 焦点效应：聚光灯打在我身上；透明度错觉：别人能看出来我隐藏的情绪\n- 自利偏差：我比别人好\n- 虚假一致性：别人和我的想法一样；虚假独特性：我是超乎寻常的\n- 盲目乐观：如在玩含运气成分的游戏时，如打牌，认为下一把会拿到好牌\n\n---\n\n社会知觉与归因\n\n分类以原型为基础，分类后可能会夸大类内的相似性，以及类间的差异性。\n\n个人知觉是指，根据获取的有限信息，如情绪，形成对某个人的印象：\n\n- 第一印象包括好坏、能力强弱、主被动这三个维度。\n- 整体印象包括平均模型、累加模型、加权平均模型。多数人使用中心品质模型，只关注几个主要的点，忽略次要的点\n- 晕轮/负晕轮效应：一个高分/低分项会影响其他项\n- 正性偏差：总分为正。因为自己心情好，或者认同对方。\n\n刻板印象是指人们通过自己的经验对某类人或事形成的较为固定的看法。在有限经验的基础上形成的刻板印象有消极的作用，会造成偏见和歧视。\n\n罗特提出控制点理论：内控者认为事情的结果取决于自己的努力程度，控制点在内部；外控者认为事情的结果取决于自己不能控制的各种力量，控制点在自己之外。\n\n为什么说对可控因素的归因，人们更可能对行为做出变化的预测；对不可控因素的归因，人们较可能对未来的行为做出准确的预测：\n\n1. 控制 -> 变，不控制 -> 不变\n2. 不变 -> 和上一次一样 -> 准确的预测\n3. 不可控 -> 不控制\n\n影响归因的主要因素包括：社会视角，当事人和旁观者对当事人的归因有偏差；观察位置，在不同空间位置下，会倾向于关注凸显出来的信息；时间因素，对过去很久的事件倾向于归因到背景；\n\n基本归因错误：他人成功和失败时都倾向于内归因，是因为他自己，不是因为环境。\n\n把自己的失败外归因，把他人的失败内归因都是一种自我价值保护的倾向，动机性的归因偏差。\n\n凯利三维归因理论：高特异性是一对一，低特异性是一对多；高共同性是多对一，低共同性是少对一；高一致性是在以前发生过，低一致性是在以前没有发生过。这是一个经验的模型，百分比为实验结果\n\n- 三高归于刺激客体（61%）：小明是春晚现场的观众，他只对节目 A 笑了，其他观众也对节目 A 笑了，且小明看春晚重播的时候还是对那个节目 A 笑了，这说明小明笑的原因是因为那个节目 A 有意思。\n- 低低高归于行为主体（86%）：小明是春晚现场的观众，他对节目 A 笑了且对其他很多节目也笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候还是对那个节目 A 笑了，这说明小明笑的原因是因为他笑点低。\n- 高低低归于情境（72%）：小明是春晚现场的观众，他只对节目 A 笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候对节目 A 也没有笑，这说明小明笑的原因是因为他只在那个环境下想笑。\n\n---\n\n他人在场\n\n扎荣克的优势反应强化说认为，当他人在场的时候，优势反应受激发，弱势反应受抑制。即熟悉的事情做得更好，不熟悉的事情做得更差。\n\n从责任分担的角度看：在多人共同完成一件任务时，单人付出的努力可能比单独完成时偏少，因为被评价的焦虑变小了，这叫社会懈怠或社会逍遥。解决方法是加强考核，把每个人努力的成果量化。旁观者效应：他人在场对利他行为有负面影响。如在公交车上互相等别人先让座。\n\n社会促进：他人在场也可能起激励作用，如朋友之间。\n\n从众是在真实或想象的群体压力下，被动地接受群体影响，自愿地与群体保持一致。若思想和行为都一致，称为真从众；若思想一致，但行为不一致，称为反从众；最常见的是行为一致，但思想不一致，称为权益从众。阿希做过从众实验，从众会受到群体压力的影响，在情境模糊、难做出判断时也会受到影响。\n\n模仿是在没有压力的情况下，自己有意或无意地受他人的影响使自己与他人相同或相似。塔尔德模仿律：下降律是从社会上层向下层扩散，下层有模仿上层的倾向；几何级数律是传播的速度，类似指数函数；先内后外律是先模仿自己文化圈子内部的。\n\n暗示是在非对抗的条件下，使被暗示者接受暗示者的观点，或者使其行为调整为与暗示者所期望的一致。如果成功了称为暗示，如果效果相反，称为反暗示。暗示的客体可能是模仿或从众的主体。\n\n---\n\n态度\n\n态度是个体对特定对象总的评价和稳定性的反应倾向。个体：说明态度是一个人的；\n\n特定对象：如对人，事，物，观念总的评价。说明态度总是指向一个对象，没有无对象的态度。而价值观是没有直接和具体的对象的，价值观是抽象的。\n\n稳定性：说明态度在形成之后会持续一段时间。这个时间或长或短，类似发展心理学的分阶段和不分阶段的对立统一，分阶段是为了便于研究。\n\n反应倾向：说明态度不是反应，它是在反应表现出来之前的。态度影响，而非决定行为。方向分正向和负向，正/负的倾向有强度，外露的程度称为外显度，卷入的程度称为深度，接近核心价值的程度称为向中度。\n\n凯尔曼认为，态度的形成，分依从，认同和内化三个阶段。依从是一种权益之计，在外显行为方面表现地与他人一致，是印象管理的策略；认同是自愿的与他人一致，情感或吸引力占主要作用；内化是在内心真正相信并接受他人的观点，理智占主要作用。\n\n态度的转变：\n\n- 海德平衡理论有三个对象 POX，即主体、他者和另一个对象。当这三者间的关系为三正或两负一正时为平衡状态，否则为不平衡状态，处于不平衡状态时会由费力最小原则向平衡状态转化。\n- 霍夫兰德态度转变模型四要素：发送者、信息、接收者、情境。情境不等于信道，可能是指接受者的心理状态\n  - 从发送者来说，如果发送者对接收者的威信高，在信息差异较大时说服效果好；反之，在信息差异适中时说服效果好\n  - 从信息来说，信息能引起的畏惧程度-说服效果曲线为 ∩ 型。面对面口头交流的效果 > 书面交流的效果。\n  - 从情境来说，信息重复次数-说服效果曲线为 ∩ 型\n\n态度的 ACB 模型是情感（Affection）、认知（Cogntion）、行为倾向（Behavioral tendency），在成分不均的时候，通常 A 占主要地位。\n\n---\n\n关系\n\n人际关系是指人与人在沟通与交往中建立起来直接的心理上的联系。反映它的深度的一个指标是自我暴露的程度，从浅到深分四个阶段：兴趣爱好、态度、自我概念和其他的人际关系、隐私。隐私指的是不愿意让他人知道的，且不危害社会的个人的秘密。\n\n人际吸引是个体与他人之间情感上互相亲密的状态，是人际关系上的一种肯定形式，分亲合（合群），喜欢和爱情。亲合的早期表现是亲子间的依恋。\n\n夫妻和未婚子女组成的家庭为核心家庭，如父母和正在上小学的孩子；夫妻和一对已婚子女组成的家庭为主干家庭，如爷爷奶奶和父母；夫妻和两对及以上的已婚子女组成的家庭为联合家庭，如外公外婆和父母、舅舅、舅妈。\n\n---\n\n沟通\n\n沟通的结构包括发送者，接受者，信息，通道（信息的载体），背景，障碍，反馈（把对方发送的信息回传一些，确定理解了）。\n\n在沟通双方的角色互相都明确时，称为现实沟通。角色不明确时称为虚拟沟通。如在互联网上，陌生的网友之间互发消息属于是虚拟沟通，但熟悉的网友之间互发消息属于是现实沟通。\n\n此站点是一种单向沟通，书面沟通的方式，是通道的一种，也是障碍的一种。但是如果有人给我提意见，我改了，也是双向沟通。\n\n---\n\n角色\n\n角色分类的方式有：\n\n- 获取方式（先天-后天努力，如母亲和教师）\n- 自觉性（演员角色-性别角色）\n- 社会功能（表现型-功利型，公平-效率，如学者和企业家）\n- 开放程度（规定型-开放型，如警察和朋友）\n\n角色失调按严重程度分四类：角色冲突、角色不清、角色中断、角色失败。\n\n在同一个角色内，不同人对其不同期望造成的冲突称为角色内冲突。同一个人在不同角色间的冲突称为角色间冲突，如职业角色和家庭角色，某个时间用来工作还是育儿。\n\n## 人格和自我\n\n人格帮助解决回答的问题是我是谁，可以在心理过程中得到表现。\n\n- 人格在遗传和环境的交互作用下形成，每个人的人格都是独一无二的。人格独特性中，典型性和差异性的区别是 1 和 2 的区别。\n- 经常表现出来的心理与行为特点才算是人格的一部分，而偶尔表现出来的不算，这说明人格是可以被改变的。\n- 用 UML 类图表示，人格的组成元素——◆ 人格，它们是组合关系。就像发动机——◆ 汽车，发动机是汽车的一部分，且如果把发动机拆下来了，汽车就跑不了了。人格统合性的组织功能是架构师，匹配功能是适配器，健康功能是生命力。\n\n自我概念是指对自己的认知。它保持内在一致性（类似人格的统合性），决定个体对内和对外的期待，解释经验（在萨提亚冰山模型里处于最底层）\n\n男女在人格特征方面的差异，称为性别；在生物学上的差异称为性；社会对其的期待称为性别角色。从汉字来看，忄与心理活动有关，所以“性”就是“与生存相关的心理活动”。\n\n孟子认为人是性善的，告子认为人是无善无恶的：\n\n> 告子曰：“性犹湍水也，决诸东方则东流，决诸西方则西流。人性之无分于善不善也，犹水之无分于东西也。”<br/>\n> 孟子曰：“水信无分于东西。无分于上下乎？人性之善也，犹水之就下也。人无有不善，水无有不下。今夫水，搏而跃之，可使过颡；激而行之，可使在山。是岂水之性哉？其势则然也。人之可使为不善，其性亦犹是也。”<br/>\n> ——《孟子·告子上》\n\n荀子认为人是性恶的：\n\n> 人之性恶，其善者伪也。（善良的人是通过后天努力达到的）<br/>\n> ……<br/>\n> 孟子曰：“人之性善。”曰：是不然。<br/>\n> ——《荀子·性恶》\n\n世硕认为人是有善有恶的：\n\n> 周人世硕，以为“人性有善恶，举人之善性，养而致之则善长；性恶，养而致之则恶长”。如此，则性各有阴阳，善恶在所养焉。故世子作《养书》一篇。密子贱、漆雕开、公孙尼子之徒，亦论情性，与世子相出入，皆言性有善有恶。<br/>\n> ——《论衡·本性》\n\n下面这个表格不一定准确，只是一个初步的总结，它的内容大于形式，表身大于表头：\n\n|          | 守序                                                                     | 中立                                                                         | 混乱                                       |\n| -------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------- | ------------------------------------------ |\n| **善良** | 霍妮的真实自我，是灵性和慧根，是可能的最好结果，只要环境适宜就能表现出来 | 阿德勒认为人生而有自卑感，所以人格发展的目标是追求卓越                       | 弗洛伊德的超我，是压力，提供责任感和负罪感 |\n| **中立** | 弗洛伊德的自我，是本我、现实和超我三方面的调节者                         | 霍妮的现实自我，是别人在当下看到的，自己在当下表现出来的                     | 拉康的 $，人的欲望都是大他者的欲望         |\n| **邪恶** | 荣格的阴影，是每个人都有的                                               | 霍妮的理想自我，是一种防御的方式，是对缺少东西的投射，会产生不符合实际的期望 | 弗洛伊德的死本能                           |\n\n机能主义的代表人物詹姆士提出主我和客我：主我是进行中的意识流，是动力；客我是对自己的认知和评价，制约主我活动。符号互动论的米德沿用了他的说法，客我是社会我，自我是主我和客我互动的结果。哈特认为，在 8 个月之内婴儿还没有萌发自我意识，在 1 岁前后出现了主体我的意识，在 2 岁前后出现了客体我的意识，主体我表现为可以把自己和别人分开，客体我表现为可以使用第一人称代词“我”，并能从照片中认出自己。\n\n詹姆斯还把自我分为了物质自我、社会自我和精神自我。物质自我是肉体，以及“一切我们称之为自己独有的东西”，包括属于自己的物品。社会自我是社会角色，在不同场合和关系下表现出来的自我。精神自我分为主我和客我，也可以被其他精神分析理论细分。\n\n镜我是由他人的判断所反映的自我概念。镜我和客我的区别是，前者是他人的判断，后者是自己的判断。\n\n科斯塔和麦克雷提出大五人格 OCEAN：O 是开放，C 是尽责 Conscientiousness，E 是外向，A 是宜人 Agreeableness ，N 是神经质 Neuroticism （情绪不稳定）\n\nA/B 型人格为竞争/松弛型人格。\n\n希波克拉底按外向-情绪不稳定程度把气质分为四个象限：\n\n```\n      |N\n抑郁质|胆汁质\n------+-----E\n黏液质|多血质\n      |\n```\n\n## 量表\n\n艾森克人格问卷：是艾森克及其夫人制定的。EPQ 分 EPNL 四个量表。E 是内外向，得分高是外向的；P 是精神质，得分高的可能是孤独、敌意、不适应环境的；N 是神经质，得分高的可能是情绪不稳定的；L 是说谎。典型、倾向和中间的四个 T 分点：38.5 43.3 56.7 61.5\n\n自评量表：\n\nSDS：53-62 为轻度抑郁，63-72 为中度抑郁，73 及以上为重度抑郁\n\nSAS：50-59 为轻度焦虑，60-69 为中度焦虑，70 及以上为重度焦虑\n\n卡氏 16PF：是卡特尔制定的，他 1890 年发布了《心理测验与测量》的论文。16PF 是 16 种互相独立的根源特质，根源特质和表面特质的区别是，前者是有解释性的，可决定人的行为。1-3 为低分，8-10 为高分。答题形式为折中是非式：是、否、不一定。\n\n### 明尼苏达多相人格测验\n\n统计学家 George Box 说：所有模型都是错的，有些是有用的。这里展示的是对于明尼苏达多相人格测验（Minnesota Multiphasic Personality Inventory）的一系列判断题，回答是或否对最终结果的影响。依据是[知乎网友 aweeee](https://zhuanlan.zhihu.com/p/600297840)分享的 `xlsx` 文件。\n\n在编制这个量表的过程中采用了正常与异常两组受测者的样本。可用于辅助医疗诊断，也可用于正常人的个性评定。\n\n测试过程为：\n\n1. 做一道判断题，回答是或否\n2. 答完一道题之后，对某一个或者某几个量表加 1 分或不加分\n3. 答完所有题之后，会得到十四个分，包括四个效度量表（Q L F K）和十个临床量表（Hs D Hy Pd Mf Pa Pt Sc Ma Si）。这十四个分称作原始分。如果你做的是 566 道题的，额外会有五个附加量表（MAS Dy Do Re Cn），且 566 道题里有 16 个重复的题。笔者做的都是两百道题的，只有这十四个分。\n4. 特别地，对这五个临床量表加上一定比例的 K 分，加完之后的称为 K 校正分\n\n   - Hs += 0.5K\n   - Pd += 0.4K\n   - Pt += 1.0K\n   - Sc += 1.0K\n   - Ma += 0.2K\n\n5. 现在我们有十四个分。对除 Q 之外的十三个分分别计算 T 分：\n\n   $$\n   T = 50 + \\frac{10 \\times (你的得分 - 常模均值)}{常模标准差}\n   $$\n\n   其中，常模均值和常模标准差由你的国籍、性别和年龄范围选择。常模均值是一群正常人（健康人）做的平均分，用你的得分与其相减，刻画的是你与正常人的偏离程度；常模标准差刻画的是这一群正常人得分的离散程度，用其作分母，可以缩小误差。\n\n6. 一些医院的心理 CT 系统用的就是这个量表。根据计算出来的分，把 100% 的概率分成三份，分到三个类里边：正常、焦虑抑郁障碍、精神病性障碍。\n\n**四个效度量表，测你做的结果是否有效：**\n\nQ：（Question）【疑问】：你没有回答的题目数。22/399 或 30/566，则该答卷无效。\n\n在实际测验中，与“性”有关的几个题目可以选择跳过回答。其他题目必须回答。\n\nL：（Lie）【说谎】：你往圣人方向靠的程度。L 原始分若超过十分，则不能信任结果。\n\n例如\n\n> 做游戏的时候，我只愿赢而不愿输\n\n> 偶尔我会想到一些坏得说不出口的事\n\n> 有时我也讲假话\n\n等的这一些问题，回答【否】会加分\n\nF：（Validity）【诈病】：你装病的程度，或者判断力丧失的程度\n\n例如\n\n> 有人一直想毒死我\n\n> 有时我觉得有鬼神附在我身上\n\n> 我能在我周围看到其他人所看不到的东西、动物和人\n\n等的这一些问题，回答【是】会加分\n\nK：（Correction）【校正】：你对自己的私事隐瞒的程度、防御的程度\n\n例如\n\n> 当我正在做一件重要事情的时候，如果有人向我请教或打扰我，我会不耐烦的\n\n> 我觉得许多人喜欢夸大自己的不幸，以便得到别人的同情和帮助\n\n> 我不在乎别人对我有什么看法\n\n回答【否】会加分\n\n> 我几乎没有和家里人吵过嘴\n\n回答【是】会加分\n\n**十个临床量表：**\n\nHs：（Hypochondriasis）【疑病】：你对自己身体过度关心的程度\n\n例如\n\n> 我的胃口很好\n\n> 我睡得不安，容易被惊醒\n\n> 我的身体和我的大多数朋友一样地健康\n\n> 我常觉得头上好象有一根绷得紧紧的带子\n\n> 我不容易疲倦\n\n> 有时候我觉得我的头顶一碰就疼\n\n问的都是与你身体相关的，如果你给的反常回答太多了：\n\n- 如果你说的是实话：说明你确实有这些症状，说明你很反常\n- 如果你说的一半是实话：说明你在过度关心得病，说明你很反常\n- 如果你说的是假话：说明你在诉苦，说明你很反常\n\nD：（Depression）【抑郁】：你抑郁的程度\n\n前 200 道题里，有 44 道题涉及对【抑郁】这一项加分。笔者有一次抑郁的得分是 22，最终【正常】的概率在 90% 以上，另一次得分 38，【焦虑抑郁障碍】的概率在 90% 以上。说明这是一个参量。我们来关注几个同时对其他很多参量造成影响的题目：\n\n> 我发现我很难把注意力集中到一件工作上\n\n- 如果回答【是】：【抑郁】【癔病】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】加一分\n- 如果回答【否】：【支配性】加一分\n\n> 我希望我能像别人那样快乐\n\n- 如果回答【是】：【抑郁】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】【依赖性】【控制力】加一分\n\n> 我经常是快乐的\n\n- 如果回答【否】：【抑郁】【癔病】【精神病态】【偏执】【外显性焦虑】【依赖性】加一分\n\n> 许多时候，我觉得浑身无力\n\n- 如果回答【是】：【疑病】【抑郁】【癔病】【精神衰弱】【依赖性】加一分\n\nHy：（Hysteria）【癔病】：你天真幼稚外露的程度\n\n前 200 题中答【是】加分的有 11 道，有 4 道同时对【疑病】加分，另外 7 道所描述的症状比【疑病】更反常、更“躯体化”、不属于健康人应有的，例如：\n\n> 我的喉咙里总好象有一块东西堵着似的\n\n> 我觉得我的头到处都疼\n\n> 每星期至少有一、二次，我突然觉得无缘无故地全身发热\n\n答【否】加分的有：\n\n> 我喜欢看报纸上的犯罪新闻\n\n> 当一个罪犯可以通过能言善辩的律师开脱罪责时，我对法律感到厌恶\n\n> 我喜欢侦探小说或神秘小说\n\n> 看到血的时候，我即不怕，也不难受\n\n> 有时我真想骂人\n\nPd：（Psychopathic deviate）【精神病态】：你过分社牛、反社会、攻击性的程度\n\n答【是】加分的有：\n\n> 我从未有过正常的生活\n\n> 假如不是有人和我作对，我一定会有更大的成就\n\n> 和别人的家庭比较，我的家庭缺乏爱和温暖\n\n> 我小的时候，有一段时间我干过小偷小摸的事\n\n答【否】加分的有：\n\n> 我过去喜欢上学\n\n> 在聚会当中，尽管有人出风头，如果让我也这样做，我会感到很不舒服\n\n- Mf：（Masculinity-femininity）【男女子气】：你向你相反方向的性别靠的程度\n- Pa（Paranoia）【妄想】：你过分多疑和警惕的程度\n- Pt（Psychasthenia）【精神衰弱】：你过分紧张、焦虑、恐怖的程度\n- Sc（Schizophrenia）【精神分裂】：你思维混乱、情感淡漠、行为怪异的程度\n- Ma（Hypomania）【轻躁狂】：你过分气质昂扬，思维飘逸，爱说的程度\n- Si（Social introversion）【社会内向】：你内向的程度\n\n**五个附加量表：**\n\n- MAS【外显性焦虑】：你完成不了复杂工作的程度\n- Dy【依赖性】：你的心理不适应环境的程度\n- Do【支配性】：你主导和面对现实的能力\n- Re【社会责任感】：你愿意为你的行为负责的程度\n- Cn【控制力】：你对你病理性表现的控制能力\n\n**一些有意思的题目：**\n\n从这一些题目，以及前面提到的题目，我们可以揣摩出题者的意图，从而反推出健康人的标准。\n\n> 有时，当我难为情的时候，会出很多汗，这使我非常苦恼\n\n- 如果回答【是】：【外显性焦虑】加一分\n- 如果回答【否】：【抑郁】加一分\n\n> 我知道我的烦恼是谁造成的\n\n- 如果回答【是】：【精神病态】【妄想】【轻躁狂】加一分\n\n> 我相信善有善报，恶有恶报\n\n- 如果回答【是】：【依赖性】加一分\n- 如果回答【否】：【抑郁】加一分\n\n> 我觉得大多数人是为了向上爬而不惜说谎的\n\n- 如果回答【否】：【癔病】和【妄想】加一分\n\n> 一切事情都由老天爷安排好了\n\n- 如果回答【是】：【社会责任感】加一分\n- 如果回答【否】：【抑郁】和【控制力】加一分\n\n> 我几乎每星期都去教堂(或常去寺庙)\n\n- 如果回答【否】：【抑郁】加一分\n\n因为 MMPI 是由美国人制定的，两国的文化习俗不同。中国常模的 D 分和 Sc 分都比西方常模高，其他的比西方常模低。类似的还有：\n\n> 我相信人死后还会有\"来世”\n\n- 如果回答【否】：【诈病】【男女子气】加一分\n\n> 我的脑子有点毛病\n\n- 如果回答【是】：【诈病】和【精神分裂】加一分\n\n> 我的判断力比以往任何时候都好\n\n- 如果回答【否】：【抑郁】加一分\n\n> 在我一生中，我从来没有感觉到象现在这么好\n\n- 如果回答【否】：【校正】【抑郁】和【癔病】加一分\n\n## 变态与健康心理学\n\n参考《变态心理学（第 6 版）》9787115448385\n\n在生物学上，完全变态发育的昆虫如蚕，有卵、幼虫、蛹、成虫这四个“态”。在心理学上的变态是指在常态之外的心理状态。变态心理学也叫心理病理学。心理异常的连续谱模型类似光谱，从红到紫，最左边是完全正常，最右边是完全异常，它的分界线是模糊的。\n\n幻觉是指不真实的感知体验，如看到猪在天上飞，而别人看不到。妄想是不切实际的信念，如认为自己是天下第一，无人能敌。\n\n历史上对心理障碍的解释有三类，生物学理论，超自然理论和心理学理论。生物学理论如古代的中医认为人体内精气的流通会影响情绪，气发于心则喜、发于肝则怒、滞于脾则忧、滞于肺则悲、滞于肾则恐。古希腊的希波克拉底认为人体内有四种基本体液，包括心理异常在内的所有疾病都可以用体液失衡来解释，治疗方法除了与现代的休息，放松，调整生活节奏外，还包括放血。超自然理论如道教和佛教认为邪风入体和鬼魂附体会让人着魔。精神时疫是一群人突然都出现了一致的异常行为，如 1374 年德国持续了四个月的疯狂舞蹈症，大街上，家里，教堂上都有一群人手拉手地跳舞，并呼喊一些魔鬼的名字，这被解释为魔鬼附体。直到 1991 年，罗得岛的一所高中在没有毒气存在的证据下，发生了集体一氧化碳中毒的症状，医生解释为是对海湾战争使用毒气的恐惧造成的集体癔病爆发。心理学理论认为心理异常是心理创伤和压力造成的。\n\n现在变态心理学的取向有生物学取向，心理学取向和社会文化取向。\n\n行为主义的巴甫洛夫认为，心理异常是神经兴奋和抑制之间的冲突，是 IO 系统的故障，若兴奋占优，抑制占弱，则为神经衰弱，反之为癔症；精神分析认为，心理异常是因为发展阶段固着、人格内的冲突、防御机制不成熟，是操作系统的问题；人本主义认为，心理异常是自我完善路上的障碍，是软件升不了级了。马斯洛认为心理异常最基本的表现是存在焦虑，是存在（保证手机存储空间足够）和责任（必须装微信）之间的冲突。\n\n如何判定心理异常：\n\n- 从硬件的层面看，比如大脑在车祸后损伤了一部分，内存条氧化了，接触不良了，这叫医学标准。\n- 从操作系统的层面看，比如病人自己的感受是痛苦的，写了一些报错的日志；或者用户是痛苦的，觉得这电脑太卡了。这叫内省标准，分病人的内省和观察者的内省。\n- 从跑分和天梯图的层面看，比如小明做的心理量表的分太偏离常模了，这叫统计学标准。\n- 从应用功能的层面看，比如小明的微信没有打开自启动和消息弹窗权限，造成别人给他发消息他没有回复。这叫社会适应标准。\n\n## 心理咨询相关\n\n心理咨询工作的对象有三类人：健康是正常的充分不必要条件。健康是在正常的前提下，描述正常的程度。\n\n1. 精神高度正常，且高度健康的人\n2. 精神高度正常，但低度健康的人\n3. 痊愈及潜伏期精神低度正常的人\n\n严重的第三类人不属于心理咨询工作的对象。\n\n---\n\n法律只规定了能做和不能做的基线水平，伦理的要求比法律高。\n\n为什么说道德是偏个人的，伦理是偏客观的，伦理是实践道德的人生哲学：道德：通往德的一条道；倫理：倫=亻+亼+冊=人+集+册，理=治玉。\n\n在心理咨询师与来访者的专业关系中，咨询师有保密的责任，即使来访者去世之后仍要保密。保密的例外情况有：\n\n- 自愿的：来访者自愿将信息泄露给他人，或希望用信息诉讼别人\n- 危及生命的：来访者有即刻给自己或他人造成生命危险的可能/生命尽头的来访者希望加速自身死亡/来访者患有危及生命的传染性疾病，且可能危及他人\n- 司法的：成文法对保密的限制（来访者虐待儿童或老年人，或来访者被虐待）/法庭要求提供信息/针对咨询师的诉讼\n- 部分国家的：来访者在未来有犯罪的倾向（部分国家和地区）\n\n## 防御\n\n参考《心灵的面具：101 种心理防御》\n\n防御是将不愉快情绪的组成部分从我们的意识觉察中剔除出去的工作。我们每个人都有这样的内在机制，以保护自己免受情绪上的伤害。自我的防御机制是当自我把焦虑当作是负面的信号时产生的，自我承受了本我欲望和现实要求的双重压力。\n\n心理学家 Charles Brenner 提出，情绪由感受和想法组成。感受更加内向且抽象，而想法则更直接关联到行动上。不同的负面情绪反映了不同的时间焦点：\n\n- [抑](https://www.zdic.net/zd/zx/jg/%E6%8A%91)[鬱](https://www.zdic.net/zd/zx/jg/%E9%AC%B1)：与过去有关，伴随着糟糕事情已经发生的念头。你在一个密集不透风的树林里，被人用手按着头跪下来。\n- 焦慮：着眼于未来，担忧坏事即将发生。一群原始人在山上猎到了几只隹。当他们正在生灬做饭的时候，突然出现了一只虍，把一个人的囟给掀开了，并把他的心吃了。\n- 愤怒：集中于现在，怀有摧毁某物或某人的冲动。\n\n为了处理这些情绪，人们会使用（情感）隔离和（思维）潜抑两种基本防御方式。此外，还有其他多种防御手段来辅助这两种基础操作，除了分裂。\n\n有意识防御和潜意识防御：你的潜意识在控制一天 24 小时的呼吸，但你也可以通过意识控制一段时间。如果你在看到这些名词的解释之前就有类似的想法，那可能是偏向有意识的防御。如果这些名词提供了一个新的角度来解释你之前可能从来没有意识到的防御，那可能是偏向潜意识的防御。\n\n向外：\n\n- 投射：你是一台放映机，你把你心里的一些部分投射出来，扭曲了你对他人的感知。你为了不体验某种情绪，将它投射出去，站在别人的视角上幻想别人以这种情绪看待你。你在害怕你自己做出某件事，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在害怕你做出某件事。你在生别人的气，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在生你的气。\n  - 投射性指责：你对某些令人不悦的事负有责任，为了减轻负罪感，你指责另一个人。它的有意识版本叫“将自我批评转向客体”\n  - 投射性认同：你向别人的脑海里扔石头，激起的波纹形状和你不喜欢自己脑海里的波纹形状一样。你诱导某人以你所期望的方式做出回应。\n  - 点煤气灯：你脑子里的一团乱麻共振形成了别人脑子里的一团乱麻。你诱导某人以为自己的心理有问题。\n- 置换：一个人 A 带给你的不快情绪太多，你会在另一个人 B 身上感受到。\n- 外化：你感受到自己心智的一部分属于自己之外。你认为某人会来谴责你，但这个某人是你自己。\n\n> 我只想知道属于我的是不是真的我的 还是由我替谁在保管着\n\n- 躯体化：你的身体在阻止你将某一违背你良心的愿望行动化。\n\n向内：\n\n- 内摄：你把别人的一部分纳入了自身，形成了另一个人的意象，作为一个情绪的靶子。你听了郭德纲的相声，以后当你情绪低落的时候，你会回想起他的形象。\n- 认同：\n  - 认同内摄物：你表现得像那一个人一样，那个人变成了你超我的一部分。你听了郭德纲的报菜名，以后当你自己报菜名的时候，你会模仿郭德纲的语气和断句方式。\n  - 向攻击者认同：“踢猫效应”的一部分或“屠龙者变成龙”的一部分：之前某个人 A 以某种方式对待你，之后你用同样的方式对待另一个人 B\n  - 向受害者认同：为了缓解内疚情绪（比如你帮助不了某个受害者），你表现得像那个受害者那样并允许自己被伤害。\n  - 认同丧失客体：你的某个至亲去世了。你表现地像他一样，象征性地维持着他的生命。\n  - 去分化：自体-客体融合。你为了不感受到对失去某个人的恐惧，成为另一个人想让你成为的样子。\n- 转向自身：有自杀倾向的人不想感受对别人的愤怒，于是把对别人的愤怒转向自身。\n\n空中剧院：\n\n- 戏剧化：你为了让别人注意到你，在言语/行为中注入过多的情感。\n- 撤销和仪式化\n  - 撤销好的：做出一个违背你以前良心的事，证明你已经不是以前那个人。\n  - 撤销坏的：你的良心在挣扎，于是你先做出一个违背良心的事（仪式），再做出一个遵循良心的事（仪式）来补偿前面的那件事，撤销了前面那件事。或者你有内疚感，于是做出一个仪式（可能是别人看起来很奇怪的事）来撤销内疚感。\n- 分裂：你无法接受一个复杂的人（“好的”和“坏的”同时出现），将其分裂成了“好的”部分和“坏的”部分。你对某些人纯感受到“好”、某些人纯感受到“坏”。或者对同一个人某些时间纯感受到“好”、某些时间纯感受到“坏”。\n- 幻觉：你听到或看到不真实的想法。而这些想法是你努力不去想的。\n- 反客为主：你对某个糟糕事件的发生时间抱有疑虑，于是提前主动使该事件发生。\n\n披马甲：在日常生活中，我们常常披上各种“马甲”来掩饰真实的情感。\n\n- 假性独立：你对自己“需要人帮助”的想法感到窘迫，于是你不依靠任何人。\n- 病理性利他：你用帮助别人的形式为自己“需要获得帮助”的需求做一个代理。它继承自“投射”和“向受害者认同”。通常和“反向形成”、“受虐性挑衅”、“自大”共存。\n- 反向形成：你对某个人很生气，但是你变得十分和善。\n- 对抗恐惧行为：你做一些让你感到害怕的事，来证明你不害怕。\n- 不认同：某个人带给你了某些东西，你努力表现地不像这个人。\n- 超理性：你使用次级过程思维（以时间为导向的逻辑思维）来回避情感。\n- 幽默：你通过开玩笑来造成一种轻松的氛围。\n- 最小化：这件事没什么大不了的。\n- 夸大：这件事对我来说太重要了。\n- 否认：为了缓解内心的冲突，你不去关注现实。\n  - 本质否认：这件事没有发生过\n  - 行为否认：做出某件事来证明另一件事不是真的\n  - 幻想否认：[时间记录](/blog/time.html)\n  - 言语否认：说相声\n\n注意转移：当面临难以解决的问题时，人们往往会选择将注意力转移到别处。无论是沉迷于工作，还是回到童年时的爱好，都是为了避开当前的压力源。\n\n- 去生命化：回避对方身上的某些特质，不把对方当作人类看待。比如德国鬼子、日本鬼子、纸老虎这些称呼。\n- 泛灵化：你把情感寄托到一个非人类的事物上，以对待人类的方式对待它。\n- 象征化：你赋予某个想法以特殊的意义。\n- 理智化：你用一套理论减去了情绪的感觉部分，剩下思维部分。比如：抑郁症是做问卷做出来的。\n- 合理化：与“理智化”的区别是：“理智化”确实有理的，“合理化”的是把无理的说成有理的。\n- 穷思竭虑：你过度分析以期望解决某个问题本身，这样你就不会感受到这个问题带给你的感受。\n- 以一种情绪对抗另一种情绪：你会以愤怒来对抗恐惧。\n- 时间退行：你表现得像你过去那样，为了规避思考现在的冲突。为了逃避期末大作业，你把之前玩的游戏下载下来又重新玩了一遍。\n- 时间上置换到未来：为了逃避期末大作业，你会规划暑假准备干什么。\n- 考试成绩拔尖：考试成绩拔尖符合社会要求，且很难与“能力强”区分开。你用考试成绩拔尖掩盖自己另一些方面能力不强的事实，即扬长避短。\n- 工作狂：注意力全部投入在工作上，类似用暴饮暴食来忘记一些什么事。\n- 地形学退行：你的意识退缩到了潜意识里，俗称睡大觉。\n\n## 创伤心理学\n\n参考施琪嘉《创伤 30 讲》《创伤心理学（2006）》\n\n### 定义与实例\n\n心理创伤有两个要素：引发创伤的事件，和经历创伤后的结果。\n\n定义创伤性的事件有两个标准：危及生命的，或者突破以往内心信念的。\n\n创伤按事件来源可分为三类：自然的，人工的和人为的。自然的是一些来自自然界的不可抗力，如地震、山火、泥石流；人工的是由人所制作的工业产品所间接引发的，且非某人所有意而为之的，如矿难、车祸；人为的是由某人有意而为之的，如蓄意施虐。\n\n按复杂程度或形成时间，可分为泰尔 I 型和泰尔 II 型。泰尔 I 型创伤为简单型创伤，是成年所经历的一次性的创伤，恢复时间较快；泰尔 II 型创伤为复杂型创伤，通常是幼年时期形成的，恢复时间较慢，一般来说迟早会发作。\n\n在经历创伤之后，有 80% 到 90% 的人会自愈。有 10%~20%的人需要心理治疗来干预。\n\n没有没有创伤的人：婴儿在出生之前是在泡在羊水里的，肺泡没有打开，加上是一个失重的环境。在出生时母亲通过产道把羊水从婴儿的肺里面挤压出来，婴儿出生后的第一声哭就是为了呼吸，打开了肺泡，又受到了 1 个 g 的重力加速度，断了脐带后又要通过哺乳来获取养分。所以，对婴儿来说，出生就是一个重大的创伤。有一种说法是，我们之所以记不起来 3 岁之前的经历，可能是因为经历创伤之后断片了，即弗洛伊德的“屏蔽记忆”。\n\n创伤的传递方式分水平传递和垂直传递，水平传递是传给同一辈人，垂直传递是通过家庭传递给下一代，分代际传递和隔代传递。代际传递是指上一代人所经历的痛苦的事件，没有被和解的事件通过非语言的形式传递给下一代。\n\n创伤的记忆表现形式有躯体化，噩梦和解离，解离是指通过一个扳机点，如一个词语激发了创伤。\n\n---\n\n我父亲在上初中的时候，水壶被别人偷了，他是受害者，在面对老师的时候，他相当于把整个人缩进去了，完全屏蔽外界的信息，加上一句话都不回复。我在之前是不知道他的经历的，但是在高中的时候，一模一样地复刻了他的经历，就是在考试没写作文的时候。这就叫创伤的代际传递，是没有经过语言的方式传递给下一代的。如果他在之前给我说过了他的经历，事情可能就会有改变，我会更早一点地同情他。形成的原因可能是因为，我爷爷奶奶喜欢把他锁在屋里。\n\n我妈也是一样，她在之前上班的时候被一个人威胁了，让她做不属于她分内的工作，这个工作还是亲戚帮找的。但是直到离职的时候才给那个亲戚写信。在她换一个工作，做自我介绍的时候，也是满脸通红的。因为我妈小时候，给我婆婆提建议，结果婆婆不信任她，用棍子打她的脑袋。\n\n---\n\n从拉康的角度理解创伤：创伤是被回溯性建构的，我们对创伤的解释随主人能指的变化而变化。笔者在听说“社交恐惧”这个词之前，压根不知道自己是什么问题，所以被诊断为“抑郁症”之后，只能抱着这个词不放。这就像婴儿在学会说话之前，只能用哭来表达需要，因为无词不达意。在没有别人给我的父亲做出“内向”的评价之前，我也觉得父亲是没什么问题的。但当我们要用它解释一个什么东西时，在创伤性事件发生当中的不愉快情绪可能是被我们有意地忽略的。\n\n### 治疗方法\n\n建议找一个可靠的心理治疗师。\n\n遥控器技术：\n\n1. 想象有一个投影仪，正在播放你以前的创伤经历，把它投射到了墙上\n2. 用遥控器把投影仪关掉。\n\n保险箱技术：\n\n1. 想象有一个保险箱\n2. 这个保险箱的长宽高是多少？是什么材料做的？壁有多厚？内外壁是什么颜色？分格了还是没分格？\n3. 这个保险箱的锁是什么类型的？门好打开吗？开关门有声音吗？你会怎么打开门？钥匙是什么样的？\n4. 这个保险箱的锁足够坚固吗？如果不是，把它换成足够坚固的，直到破坏不开为止\n5. 把保险箱的门打开，把给你带来压力的东西通通装进去，再关门锁住。\n6. 把保险箱放到一个你觉得合适的地方，这地方不应该太近，在你力所能及的范围内尽量远一些。且你如果想找回的时候还可以找回\n\n安全岛技术：\n\n1. 想象有一个绝对安全的小岛。这个小岛可以在你的心里，也可以在世界上的任何一个地方，只有你一人可以进去，你可以带一些东西。\n2. 岛上的景色如何？你眼睛看到的让你感到舒服吗？如果是，就留在那里；如果不是，就变换一些，直到你真的感到很舒服为止\n3. 你听到了什么？如上\n4. 你的皮肤感觉如何？闻见了什么？肌肉如何？呼吸如何？腹部感觉如何？\n5. 仔细体会你现在的感受，这样你以后再来到安全岛就会有类似的感受\n6. 给自己设计一个躯体动作，可以是手势之类的。只要你在现实里做了这个动作，立马就能回到安全岛\n7. 现在做一遍这个动作，并感受一下\n\n## 认知行为疗法\n\n参考郭召良《认知行为疗法入门》《认知行为疗法进阶》。\n\n最简单的模型是：情境 → 认知 → 情绪/行为。亚伦·贝克的 T 型/工型模型把认知拆成了三层：\n\n```\n具体情境 → 自动思维 → 症状：情绪+行为\n             ↑\n          中间信念\n             ↑\n童年经历 → 核心信念 → 补偿策略\n```\n\n概念化是对于一个具体的案例，通过找出模型里每一个概念的具体内容，来理解来访者的问题。\n\n横向概念化类似于情绪 ABC 模型：Activating events、Beliefs、Consequences\n\n纵向概念化：\n\n<img src=\"/blog/images/CBT-3.webp\">\n\n### 自动思维\n\n自动思维是在特定情境下出现的自动的想法，是症状的直接原因。比如收到一个别人直接给出的建议，就认为是收到了指责、批评，进而产生愤怒的情绪。它是自动涌现的，且不一定是真的。收到了指责是想法，不一定是事实，别人可能没有指责的意思。\n\n<img src=\"/blog/images/meme/速度比光快的代价.webp\">\n\n有效性是指自动思维符合事实的程度，有用性是指是否能达到预期目标。一个悲观且正确的自动思维，如别人确实是在指责自己，自己出现了愤怒的情绪，那么它是有效的，但是是无用的，因为你的预期目标是继续沟通下去。\n\n自动思维歪曲的类别分无效的、部分有效的、有效但无用的。无效的是没有证据，部分有效的是分别有正反的证据，有效但无用的是，有确凿的证据，但是对未来没有正面影响。种类包括：\n\n- 消极预测未来：它是有效但无用的\n- 灾难化（自己现在的处境太糟糕了）：它是有效但无用的\n- 以偏概全（只根据不利信息，没有看到有利的信息，进行消极的预测）：它是部分有效的\n- 读心术（无端揣测他人的想法）：它是无效的\n- 随意比较（没有分析具体的情况）：它是无效的\n- 过度引申（曾发生过的特殊事件会经常发生）：它是无效的\n- 任意推论（字如其人，字不好人就不好）：它是无效的\n\n自动思维的干预有识别、评估、评价和巩固应用四个环节。识别就是横向概念化，评估是给情绪和相信程度打分，评价是判断有效和有用的程度并形成新的替代思维，巩固是记住并在合适的时间运用替代思维。\n\n### 中间信念\n\n中间信念包括态度、假设和规则三个部分。\n\n- 态度（是、最担心的一种情况）：事件 A 发生是糟糕的。\n- 假设（如果）：如果事件 B 发生了，事件 A 就不会发生。B 通往非 A 为积极假设的路，非 B 通往 A 为消极假设的路。\n- 规则（应该）：我应该让事件 B 发生\n\n态度和规则是表层的，假设是深层的。贝克认为只有假设是可以被检验的，需要找出消极假设的不合理之处。\n\n中间信念阶段的认知歪曲种类包括：\n\n- 情感推理：根据情绪推理。\n- 理想化：使用“应该”、“必须”、“不能”这些词，根据自己的主观愿望而不是实际情况对自己提出要求；\n- 最高标准：只关心超过自己的人；\n- 只内归因和只外归因；我现在这个性格，全是我咎由自取，或者全是由我的家人造成的。\n\n补偿策略是中间信念的一体两面，是为了遮掩负性核心信念。包括努力策略、回避策略（不做困难事）、顺从策略（随便你）、归因策略、警惕策略（过度未雨绸缪，夸大危险，低估自己处理问题的能力）、自弃策略（我有能力做，但是不想做）、自恋策略（民科）。\n\n回避策略的体现：\n\n> ● 求助是不好的（态度）；<br>\n> ● 我要独立解决问题（规则）；<br>\n> ● 如果独立思考，就说明我是有能力的（积极假设）；<br>\n> ● 如果求助，就说明我是无能的（消极假设）<br>\n\n和中间信念属于同一层次的如：防御。如：萨提亚提出四种沟通姿态：过度为别人的讨好姿态；过度为自己，找别人茬的责备姿态；回避情绪、他人和自己感受的超理智姿态（电脑）；回避压力、转移话题的打岔姿态（鸵鸟）。\n\n### 核心信念\n\n同一个核心信念，在不同的环境（如家庭和学校）会衍生出不同的中间信念，中间信念中的态度是核心信念在具体环境中的体现。\n\n核心信念阶段的认知歪曲种类包括：\n\n- 贴标签：我就是一个什么样的人。\n- 苦算命运：我这辈子就是没有希望的。\n- 后悔倾向：如果我过去没有经历某件事，我就不会是现在这样。\n- 拒绝相反证据：拒绝与自己消极想法矛盾的观点\n- 黑白思维：我从来没有取得过成功。\n- 低估正面信息：虽然 xxx 发生了，但还是 xxx\n- 选择性负面关注：我只记得 xxx\n\n<img src=\"/blog/images/meme/看夜空看什么.webp\">\n\n先不管微波炉为什么能联网，此事在[《Starless》](https://music.163.com/#/song?id=20045625)里亦有记载，有一版的歌词翻译很雅，叫“无星夜里圣经黑”。\n\n### 干预策略\n\n分为两大类：解决问题，或者接纳问题的存在。后者认为，如果症状不重的话，可以带着症状去生活。\n\n认知改变策略：\n\n- 备选思维（分支）：在原来的自动思维之外另找一种思维。一件事可能会成功也会失败，给成功和失败的可能性各找几个证据。\n- 客观证据（实例）：找证据，不能用推理和分析来替代证据。\n- 苏格拉底式提问：支持你想法的证据，举出与你想法相反的证据。最糟糕的可能、最好的可能、最现实的可能分别是什么，每种可能的证据分别是什么\n\n行为改变策略：\n\n- 行为改变的目标：影响情绪、为认知改变提供证据。改变情境：情境引起自动思维，自动思维改变不了就改变情境，就是广义上的逃避问题。\n- 抑郁的特点是静止，焦虑的特点是回避。而行为改变策略直接要求反着来，对应的是行为激活和暴露。\n- 行为表演：假装自己完全相信新信念的情况下做出新行为，假戏成真。糟糕的结果不会唤起负性核心信念，因为是演戏不是真的，成功了就是真的，失败了就是假的。\n- 行为试验：假设检验两种方式：提两个对立的假设，或者对一个假设进行开放性探讨\n\n成长经验重构：回忆你以前经历过的某个创伤性的事件，然后再把它重新给经历一遍。在这次经历里，你可以基于你的想象，做出与之前不同的行为，然后别人也做出了不同的行为来回应你。最后你形成了一个正向的、错误的记忆，或者说不同解读方式的记忆，再把这个错误的记忆给记住，这样你以后回忆起的事件就是被改写过了一遍的事件。比如说受到某人体罚，在以前的负性核心信念是“我这个人是 xxx 的”，修正后的信念是“这个人想让我变得更好”，最后你通过一通说，在想象中和这个人沟通了，那个人也做出了和以前不同的行为，最后你们和解了。你以后回想起的记忆就是另一个版本的记忆了。\n\n关键点：给情绪命名。当时是什么样的情绪，再把自我否定的给淡化或者剔除掉。\n\n实现的方法有：把传记写出来，再修正传记。或者童年的我和成年的我进行对话，在以前的那个情境下某人做出了某个行为，想象自己应该怎么做才能使得那个人做出另外一种行为，双方行为前后的感受分别是什么。\n\n## 客体关系与自体心理学\n\n> 所有精神分析理论都关注在解说过去如何影响现在，以及病人内在世界如何歪曲并影响外在经验。\n\n以谷川流为什么写《凉宫春日的忧郁》为例子。在这本书里面，凉宫春日是一个期望可以影响现实的人。作者的代言人阿虚希望动画里的人物是真的，但认为现实里的圣诞老人是假的，对其无感，如何让动画人物出来，自己经历动画的剧情。古典弗洛伊德模式认为，是作者的本能、自我和超我之间存在冲突；客体关系理论认为，因为作者以前看的书和动画很多，所以脑子里有许多虚拟人物的形象（客体表象），这些形象给作者创造了一个幻想世界，但是幻想世界和现实世界是有落差的，最终导致作者把幻想世界写成书；自体心理学认为，作者追求的是一个全能客体，即凉宫春日，来弥补他自身的愿望。\n\n在一些哲学著作里面，一个人被称为主体。与主体相对的就是客体，客体是与某人有关系，但不完全属于这个人的东西，它与这个人的感受与需要相关，可以是一首歌，一个他人，或一件过去无法被和解的事。客体一词与关系连在一起时，指的是人际关系。当我们在和别人互动的时候，互动的对象并不仅仅是实际的他人，还包括一个他人的影子。这个影子可以是某个实际人物的扭曲版本，是一个内在他者。我们过去和重要他人的关系模式、过去关系的残留物会影响之后的人际关系。移情指的是，把过去和某一个人的关系模式，重复到现在的一个人身上。\n\n客体分内在客体和外在客体。如果客体是别人，外在客体就是实际的别人，内在客体是心里的别人。内在客体是外在客体的表象（Representation，代理人，翻译成表象可以看成动词->名词，也可翻译成“再现”），如一千个人心里的李逵，可能是来自于不同戏剧，或同一个文学作品里，不同人对李逵的不同理解。部分客体：是主体对客体的一种表象。如张三看了《水浒传》电视剧，李逵和母亲对话的一个片段，会觉得他是一个孝子；李四看了《水浒传》的书，劫法场的片段，会觉得他是一个杀人魔。完整客体指，我们通过看一些不同的东西，对李逵形成了比较立体的理解：李逵由好、坏、好与坏、非好与非坏这四个部分组成。\n\n自体（Self）是一个完整的主体。和自我（ego）的区别是，自体更完整，它包括了自我在内的所有心理机能。自我是心理功能的组织者，它无法被直接看到，但可以在心理过程中得以显现。客体关系是发生在自体与其客体间，而不是在自我与客体间。\n\n自体表象指的是，自己在与其他人和物（客体）建立关系的过程中，理解到自体。即我通过我之外的东西，形成对我自己的理解。比如在听了一首歌之后，就能体验到自体身上有情绪。\n\n分裂（Splitting）包括正常的发展过程和防御过程。比如一种同时含有喜和恐的复杂情绪，在还不够成熟，无法同时体验到的时候，会只体验到一个。\n\n---\n\n参考：Michael St. Clair《客体关系与自体心理学导论（第二版）》。\n\n**弗洛伊德学派的起始点：与客体关系及自体心理学理论相关的概念**\n\n在原初自恋状态下，自我是力比多本能的客体。\n\n认同和客体选择的区别：认同是自己想要变成他人那样，客体选择是自己想要拥有他人，给他人进行力比多投注。一个是看着自己变成客体，一个是看着客体。\n\n认同丧失客体的防御方式即：自己的至亲去世了，情感链接断了，无法进行力比多投注了，所以用认同置换了客体选择，通过做逝世亲人生前喜欢做的事，来认同他。\n\n> 如果孩童的自我有太多客体认同且如果他们太强有力而无法彼此兼容时，那就可能成为病态\n\n**梅兰尼．克莱茵：创新与过渡的理论家**\n\n婴儿为什么会吸手指：当喂食良好时，婴儿好的感受被投射到母亲的乳房上，母亲的乳房被内化为内在客体。婴儿的内在世界是一个幻想的世界，它可以主动响应驱力，如果外在客体不在场，可以借以内在客体来重复经历这个感受。如饥饿的婴儿可以通过幻觉到母亲乳房的感觉与奶汁的味道来暂时控制其饥饿。\n\n投射性认同的过程：把内在世界加到外在世界上，然后把外在世界重新内化。自身为缓解情绪，分裂出了一部分感受，将其投射到外在客体上，修正之后再内射回去。\n\n偏执－分裂位置：坏的东西就在那里威胁我；抑郁位置：担心好的会失去。\n\n> 她假设出生时自我就存在且带着非常早期俄狄浦斯冲突而导致超我的形成。\n\n**威廉．费尔贝恩：一个“纯粹的”客体关系模式**\n\n> 冲突并非自我与本我冲动之间，而是自我的各不同部分在和自我的内在客体之间相关联时产生的。\n\n> 任何时候当客体分裂时，自我跟着分裂而和客体的各不同部分建立关联性。\n\n在《凉宫春日的分裂》及《惊愕》三部曲里，有两个关键人物：佐佐木和渡桥泰水。当凉宫春日在阿虚的面前遇见佐佐木，并得知她是阿虚的挚友之后的有天晚上，世界线被分裂成了两个。因为在遇见佐佐木之前，阿虚的客体在凉宫心里可能是这样的：他更在意闹腾的女孩。因为凉宫就是属于闹腾的。在该小说里，人物的内心冲突以“闭锁空间”的形式可视化地表现出来，每当凉宫出现内心冲突时，她的闭锁空间里就会有蓝色的“神人”出现，把周遭的环境破坏为废墟；而佐佐木的闭锁空间是非常平静的，在规模和制造频率上都比凉宫的低。佐佐木作为一个平静且通常、高情商版的凉宫，而且自称为阿虚“相当亲密的朋友”，所以在遇见她之后，阿虚的客体在凉宫心里被分裂成了两个部分，进而凉宫也分裂成了两个部分。凉宫的设定是神，于是世界线也分裂成了 α 和 β 两条线，这是根本的原因。而直接的原因，起导火索作用的是伪 SOS 团的出现：SOS 团是凉宫在学校里创建的社团，意为“让世界变得更加热闹的凉宫春日团”。但凉宫的性格属于是非常不稳定的，如果她作神，对世界会有不可预知的影响。于是有三个反派想推举佐佐木这个内心平静的角色，意图把凉宫的能力转移到佐佐木身上。凉宫遇到了伪 SOS 团的四人，虽然不知道他们的密谋，但是在无意识里觉察到了事情的危机。原书里提到，渡桥泰水就是凉宫无意识的具体化体现，且只有她可以游走于两条线之间。\n\nα 线是一段日常的校园生活，SOS 团招募新人加入，但只有渡桥泰水一人通过。渡桥泰水在 α 线入团，说明凉宫在遇见佐佐木之后，找回了过去自己的一部分。为什么呢，因为从发卡这个线索来看，渡桥泰水的原型在以前就是存在于凉宫心里的，她和凉宫都是属于活跃的性格，且前者的情商更倾向于佐佐木一方。她是凉宫分裂出来的自体客体，是为了代替阿虚心里的佐佐木。\n\n在 α 线里，伪 SOS 团的成员虽然都存在，但在后续都并未出场；β 线是伪 SOS 团与凉宫一方直接进行对抗，这两条线分别代表着一种理想的，和现实的可能。因为在世界分裂之前，危机就已经出现了，β 线是危机的延续。它代表着一种最坏的结局：凉宫的能力真的被转移到佐佐木身上了。这意味着在凉宫心里，阿虚的客体发生了一个重大的改变——他在 β 线里都直接进到佐佐木的心里了。这就是“虚神论”的合理之处：谁的心里能更加占有阿虚的客体，谁就是神。我们同样可以用它来解释《消失》的剧情。\n\n渡桥泰水在 β 线里唯一出场的一次是在 β-10，往社团教室里带来了一朵花，为了保证两个世界的场景一致。花是一个变量，α 线里的花就是渡桥泰水带过去的。渡桥泰水从 α 线走入到 β 线，意味着凉宫从理想走向现实。在世界线收束的时候，渡桥泰水是在 α 线里的，把两个阿虚的手叠到一起了。α 线里的阿虚虽然是在凉宫的闭锁空间里，但是阿虚没有意识到，β 线里的阿虚是在佐佐木闭锁空间里。这说明凉宫的无意识找到了一种理性的方法，先从现实的层面上创造机会（β 线里带花），再从理想的层面上（α 线里），把两个阿虚客体整合到一起。\n\n---\n\n费尔贝恩认为只有坏客体会被内化，因为他认为内化客体是为了在环境中避开它。如果客体是好的，那就没有内化的必要了。比如说，在受到某一个人不好的对待后，却在内心里期望他是好的，唯一的解决方式是，把他的坏内化到自己身上，在自身里形成一个坏客体。但自身也可能承受不住的，可能在遇到某个其他人之后，该坏客体又被外化出来了。比如说以前受到一个老师体罚，后来认为所有的教师都是坏的。这就是我们所说的移情，或者置换。\n\n费尔贝恩把自我分为三个面向：中心自我、力比多自我和反力比多自我，它们分别与三个客体起关系。力比多自我是感觉到需要的部分，它认同好客体；反力比多自我又叫内在破坏者，它认同坏客体，并惩罚力比多自我，类似超我的功能；中心自我负责把这两个辅助性自我分隔开，是看戏的人。比如在一场考试之后，发现自己做错题了，试卷上得了一个叉，于是看着这道题开始后悔了。那么力比多自我的客体是对勾，反力比多自我的客体是叉，反力比多自我在看见叉之后，开始惩罚力比多自我。中心自我是看戏的人，它把批评者和被批评者分隔开了，它的客体可能是那道题。\n\n**东纳．温尼科特：具独特观点的小儿科医师**\n\n过渡性客体：从全能向非全能过渡。全能指的是，外界的所有事情都如自己的愿，比如饿了就有母亲喂食；游戏就是一个过渡性客体，虽然游戏里的人物可以受自己的控制，但也不是想赢就能赢的。比如在动作游戏里打 BOOS 的时候，除了自身出招和策略 BUFF 的配合之外，最重要的是，你要能知道这个 BOOS 会出什么招，在什么时候需要闪避以及如何闪避它，而这往往不是打一次就能适应的。\n\n真自体和伪自体：如果孩子早期没有被好好照顾，可能发展出防御性的伪自体，表现为和客体的关系感觉不是真诚的。只有真自体有自发性。一个个案：温尼科特的一位来访提到他无法自发地和别人谈话，除非加入别人的谈话中。如果他提出了自己的意见，就是在夺取父母的功能，而他真正想要的是被父母确认为一个婴儿。他的真自体没有被发展出来。\n\n> 退化作用（退行）是对过去某人需求未能给予足够响应的一个矫正的机会。\n\n**玛格丽．马勒：个体的心理诞生**\n\n个体化：我是，我存在。认同：我是谁。\n\n三大发展阶段：在第一个阶段是自闭期，约出生头一个月，是无客体的；第二个月开始是正常与母亲的共生期；第三阶段是分离-个体化，有两条并行的线，个体化是演化出自主性，分离是摆脱依赖。分离-个体化分四个次阶段，第一个次阶段里婴儿会初步地区分开自己和母亲，在目光上会检视母亲和非母亲；第二个次阶段在身体上会主动离开母亲，发展出一点自主性；第三个次阶段叫和解，是往以前回了一点，婴儿发现自己并不能完全地脱离母亲存在，对母亲比上一个阶段多了一点依赖，当母亲不在场时，借用过渡性客体来缓解自己的分离焦虑；第四个次阶段主要是在生命的第三年时且没有清晰的终结点，最终发展出情绪上的客体恒定性与个体性。\n\n## 社交焦虑障碍\n\n轻度的社交焦虑障碍称为社交焦虑症，严重的称为社交恐惧症。在 CCMD-3 里，社交恐惧的编号是 43.12。以 43 开头的是神经症，它是没有可证实的器质性病变作基础的，即你的身体是没有问题的。43.12 的诊断标准是：\n\n> - 继承自神经症（43）的：\n>   - [症状标准] 至少有下列 1 项：① 恐惧；② 强迫症状；③ 惊恐发作；④ 焦虑；⑤ 躯体形式症状；⑥ 躯体化症状；⑦ 疑病症状；⑧ 神经衰弱症状。\n>   - [严重标准] 社会功能受损或无法摆脱的精神痛苦，促使其主动求医。\n>   - [病程标准] 符合症状标准至少已 3 个月，惊恐障碍另有规定。\n>   - [排除标准] 排除器质性精神障碍、精神活性物质与非成瘾物质所致精神障碍、各种精神病性障碍，如精神分裂症、偏执性精神病，及心境障碍等。\n> - 继承自恐惧症（43.1）的：\n>   - 1 符合神经症的诊断标准；\n>   - 2 以恐惧为主，需符合以下 4 项：\n>     - ① 对某些客体或处境有强烈恐惧，恐惧和程度与实际危险不相称；\n>     - ② 发作时有焦虑和自主神经症状；\n>     - ③ 有反复或持续的回避行为；\n>     - ④ 知道恐惧过分、不合理、或不必要，但无法控制；\n>   - 3 对恐惧情景和事物的回避必需是或曾经是突出症状；\n>   - 4 排除焦虑症、分裂症、疑病症\n> - 本项的：\n>   - 1 符合恐惧症的诊断标准；\n>   - 2 害怕对象主要为社交场合（如在公共场合进食或说话、聚会、开会，或怕自己作出一些难堪的行为等）和人际接触（如在公共场合与人接触、怕与他人目光对视，或怕在与人群相对时被人审视等）；\n>   - 3 常伴有自我评价和害怕批评；\n>   - 4 排除其他恐惧障碍。\n\n害羞和内向的区别：内向是指把心理能量投注到自己身上的频次比他者多，害羞是指害怕来自外界的负面评价。\n\n社交焦虑者首先是自己看不起自己，有一个假想的、高标准的观看者被投射出来，时刻监视着自己的一举一动，如果达不到观看者的要求，会无地自容。这个假想的观看者可以依附到场景里的任何一个人身上，也可以不依附。不依附是投射，依附后是投射性认同，即对方真的认同了对方是一个高标准的人。\n\n复旦大学的张维为教授对此也有类似的看法：\n\n<img src=\"/blog/images/meme/只要你自信.webp\">\n\n社交焦虑的维持因素包括负强化：在做出一个回避的行为之后，没有得到负面的反馈，于是这个回避的行为会被强化。比如不社交，就不会把关系搞糟。\n\n社交技能训练：说以“我”开头的句子，以“你”开头的可能带有指责性。\n","slug":"心理学碎片","published":1,"updated":"2025-09-25T13:47:26.214Z","__permalink":"psychology.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lni000a5ws62f8hhffa","content":"<h2 id=\"问题讨论\">问题讨论</h2>\n<p>解决问题是什么意思？纽威尔和西蒙认为，首先要有一个问题空间，问题空间是一个人对于这个问题的初始状态、目标状态的认识，以及如何从初始状态转化成目标状态的认识。解决问题就是在问题空间里寻找一条从初始状态变成目标状态的路。</p>\n<p>问题可以怎么分类？按明确的程度分，初始状态和目标状态都很清楚的问题称为界定清晰的问题，否则称为界定模糊的问题。比如写一篇作文，如果在写之前就把提纲列出来了，最后要表达一个什么东西都提前定了，或许叫界定清晰。如果写一步看一步，不知道最终要写成什么样，叫界定模糊。或者说，按连续谱来看，写作文本身就在更靠近界定模糊的一侧，而写数学证明题在清晰的一侧。这个清楚或许指的是客观清楚。而主观清楚是分为，语义丰富和语义贫乏的问题，让一个小学生去做高数题，对他来说是或许语义贫乏的，因为在他的问题空间里，对初始的状态都无法理解；对高数教师来说是语义丰富的。</p>\n<p>我提出的这些问题，对我来说都是相对语义贫乏的问题。因为我对它们的相关知识都不够。是先提出一个目标状态（结论），再借助自己已有问题空间里的对初始和中间状态的认识，来看能不能通向目标状态。</p>\n<h3 id=\"心理学\">心理学</h3>\n<p>普通心理学重要的概念有？意识和无意识、注意保证心理在场，需求及其的衍生（情绪、动机、意志）造成行为，感知觉、记忆和思维（想象、言语）对信息进行处理。</p>\n<p>为什么心理过程包括知情意三大块？“过程” 是一个动词意义的，有起点和终点，可以多次进行。认识可以歇一会，情绪也可以消失。这里的意是意志，不是意识，意志是先有意识确定一个目的，再通过调节和支配行为，克服困难达到目的的过程，意志也是可以消失的，就是我们说的间歇性踌躇满志。名词意义上的 “意识” 在正常情况下一直在场直到死亡。睡眠和梦也是意识的特殊形态。像需要、动机、意识都是相对名词意义的，所以它们都不是心理过程。</p>\n<p>为什么说笛卡尔是现代心理学的开创者？在笛卡尔之前，公认的理论是，心灵对身体的作用是单向的，心灵会影响身体，而身体基本不会影响心灵，身体是木偶，心灵是提线者。笛卡尔把机械论的观念应用到人身上，认为人也是一台巨大的机器，身体可以影响心灵。这样我们就可以通过研究身体来研究心灵。</p>\n<p>为什么说冯特是现代心理学的建立者？在冯特之前，已经有人出版心理学的著作了。冯特在大学里建立了第一个心理学实验室，创立了第一本学术期刊，把心理学推向大众，体系化了。</p>\n<h3 id=\"需要及其衍生\">需要及其衍生</h3>\n<p>马斯洛的安全需要是什么意思？如果我们把安全理解为，是一种没有感受到危险的状态，那么安全需要被满足，就意味着没有负面情绪了，那么当生理需要被满足时，是不是同时满足了安全的需要？不是这样的，安全需要指一种持续的状态，如果我当天吃饱饭了，满足了当天的生理的需要，但是我之后每天都不一定能吃饱饭，那么我的安全需要是没有被满足的。</p>\n<p>当此时的上层需要被满足了的时，一定意味着此时的下层需要被满足了吗？不一定。比如我们虽然有时受到别人尊重了，但是仍会觉得自己未来没有希望，实际上就是我们此时此刻的安全需要没有被满足；如果我之后每天都能吃饱饭，但是我现在是饿的，那么我现在的生理需要是没有被满足的。需求金字塔是一个动态的结构，它并不意味着下层的需要如果被满足之后，就是永远地被满足了。它或许只是指示了一种痛苦抢占的优先级，就像操作系统的进程调度，五层需要是并发的，下层需要占\nCPU 的时间更长。</p>\n<p>马斯洛认为自我实现的需要是人类所独有的，反过来说，下面的四层是有些动物也需要的。比如第四层是尊重的需要，在群体里获得地位，狼通过竞争选出一个狼王。</p>\n<p>第三层和第四层的区别是什么？是单纯建立关系、有归属感，和获得价值与地位、有成就感的区别。比如我交一个朋友，只是单纯地想和他待在一起，或者在人多的地方比在人少的地方开心，这属于是第三层。但如果我想让他认可我，尊重我，这就上升到第四层了。比如我们能做到爱一个人，但是不一定能做到尊重他。</p>\n<p>物质需要和精神需要是什么意思？它指的是满足需要的对象是否是物质实体。比如我们买一张专辑，到底想要的是专辑的壳子和碟片、周边，还是里面的音乐内容。如果是前者，那么它满足了我们的物质需要；如果是后者，满足了精神需要。还存在着一种情况是，买一张专辑之后是为了拍照片发出来装一下，这属于是通过展示自己的物质条件或者音乐品味有多么地好，来满足自己的精神需要和社会需要。</p>\n<p>自然需要和社会需要的区别是什么？前者是在一个比较长的历史区间里直到现在，都是人一定需要的。后者受特定历史时期和环境的影响。自然需要由生理的不平衡引起，所以也叫生理需要；社会需要是后天习得的，所以也叫获得性需要。由生理需要引起的动机叫驱力，由社会需要引起的动机叫诱因。</p>\n<p>（图片由 DEEPSEEK\n生成）安全需要的自然部分指：我的身体不会受伤，生命不会受到威胁；社会部分指：我的生活是稳定、有保障、可预测的。</p>\n<p><img src=\"/blog/images/马斯洛需求金字塔.webp\"></p>\n<p>当我们的需要不被满足时，情绪、动机和意志就出现了。</p>\n<p>一般来说是，如果需要被满足了，会出现正面的情绪，反之出现负面情绪。但是还有一种特殊情况，当我们过去一直没有被满足的需求终于被满足了时，可能会感动到流泪。要解释这个现象，要么去厘清正负面情绪的范畴，把 “感动到流泪” 划分到强烈的正面情绪里。喜极而泣。</p>\n<p>《心理系》APP\n上说，人的基本情绪有喜怒哀恐，复合情绪是由基本情绪的不同组合派生而来的。但我现在暂时认为，怒的背后就是恐，可以把它简化成三个基本情绪。或许这么说，所有需求未被满足时的情绪背后都包含一个恐。比如饿可以被解释成对死亡的恐惧，社交恐惧未被满足的需求是安全需求。在需求满足之后会喜，没有满足时是恐，如果在当下持有一种该需求是在长期或永远无法被满足了时，或回忆到自己过去的需求有一直没有被满足的，则出现哀。恐对应退缩系统，做出逃跑的反应，与右侧\nPFC 激活水平相关；怒对应趋近系统，做出攻击的反应，与左侧 PFC\n激活水平相关。恐是刹车，怒是油门，如果在路上看到了障碍物，那么刹车是第一顺位的，你要先停下来判断一下，再决定要不要踩油门冲过去。但是也还有一种情况，就是当时你太恐了，所以踩错了，踩成油门了。这就像一个创伤被激活时，应激的恼怒情绪压过了一切的恐惧。</p>\n<p>怒的背后一定是恐吗？如果我们在网上看到一些言论之后发怒了，可能是因为这个言论戳中了自己的一些点，且它至少是部分有道理的。还有一种情况是，它是没有道理的，但是你怀着一种强烈修正它的愿望，且它触发了你之前不被别人在乎的创伤，修正它也是无法改变对方的观念的，所以为了掩护自己的不被在乎的恐，怒就出现了。如果这个言论是和你没有关系的，且你也能看出来它也是没有道理的，比如有人说，肯尼迪是美国的第一任总统，那你就不会发怒，而只会感到可笑。因为他的言论使你能够确认自己的价值，有人是比你还要差的，那你也差不到那里去。这满足了你的社会需求和精神需求，尊重的需要。</p>\n<p>情绪和情感的两极性是什么意思？意思就是，对于情绪和情感的每一个特性，都存在着一个连续谱。有四个特性，或者说是变化的维度，包括三个成分特性和一个功能特性。情绪的三个成分是主观感受，生理唤醒和表情。主观感受的特性叫强度，如从低落到悲痛欲绝，从不满到狂怒；生理唤醒的特性叫紧张度，从轻松到紧张；外部表现的特性叫激动度，从喜怒不形于色到范进中举；由需要满足或未满足出现的正 - 负面情绪，对于推动行为有正 - 负面的功能，叫情绪和情感的动力性。</p>\n<p>为什么说需要引起动机？引起或许指一种时间上的直接、紧密的先后顺序。需要是有机体内部的一种不平衡状态，表现为有机体对内外环境条件的欲求。比如感到饿了，我需要吃饭。动机是激发个体朝着一定目标活动，并维持这种活动的一种内在的心理动力，是行为活动背后的原因。吃饭的行为可以使这个饿的不平衡状态变成平衡的，但是在吃饭的行为发生之前，在需要产生和满足需要的行为发生之间，还会出现别的行为，比如感到饿了，先做饭或者买饭之后才是吃饭，所以说需要并不直接紧密地引起吃饭的行为，而是先引起吃饭的动机。动机激发了寻找食物的事件，指向了获取食物的方法，维持了从寻找、获取直到吃饱的整个过程。</p>\n<p>为什么说 “需要未满足 - 需要满足 - 产生新需要的循环” 叫动机过程？动机是一直在场的吗？如果动机不是一直在场的，那么它的生命周期从需要产生开始，途经行为发生之前（激发行为）和之中（指向、维持行为）的过程，直到行为无需动机推动，此时说明需要已被满足。它的下一个生命周期从一个新的需要产生开始。这说明动机也是有过程的，那么为什么动机不叫作心理过程呢，或许因为它是被包含在情绪过程和意志过程里，或许是因为，它是一直在场的。动机并非 “一直在场” 作为一种持续的、可感知的力，而是作为一种 “潜在的、可被激活的机制” 一直在场。</p>\n<p>动机的维持功能和意志的坚韧性有什么区别？共同点都是指为实现一个预期目标，做一些事情来说，时长上的坚持，短期的和长期的。对于一个长期的任务来说，比如目标是每天跑步多少分钟，当天的时长除了要靠当天的动机之外，还要靠意志的坚韧性。如果跑步动机并不是在每一天内都出现的，那说明意志的坚韧性不足。如果跑步动机在当天出现了，但是由于其他事件冲突而没有执行，叫做意志的果断性不足，自制性不足，或者自制成变化的了。</p>\n<p>意志的四个品质，从时序上来看谁先谁后？首先要明确目标，所以自觉性是首位的；其次会遇到挫折，这涉及到处理情绪、做决策和管理行动，处理情绪和行动对应自制性，做决策对应果断性；在一个长期的时间上，坚持地克服困难，永不退缩，对应强的坚韧性。如果自觉性不足，即不知道自己为什么要做这件事情，后面的三个或许比自觉性强的情况更弱一些。</p>\n<h3 id=\"信息处理认知\">信息处理（认知）</h3>\n<p>为什么有时在朗读文字时，感觉没有默读的效果好？这是一个注意分配的问题。注意分配指在同一时间把注意分配到两个及以上的任务上，它的前提是，其中一些任务已经达到了非常熟练的程度。以我的个人经验是，由于我之前说话很少，读句子的语气控制没有达到自动化的程度，所以在朗读文字的时候，相对于默读文字有一个额外的语气检控的进程，发声的进程，有时还会去想别的，造成注意的资源不够了。另一方面，默读文字的速度更快，朗读的速度和默读的不匹配，这就像汉字的语义饱和，你光盯着一个字看，会感到陌生，甚至不认识这个字了。</p>\n<blockquote>\n<p>(AIGC)\n在绝大多数情况下，慢速进程会拖慢快速进程。其根本原因在于，共享资源在同一时间通常只能被一个进程独占。快进程必须等待慢进程释放资源后，才能继续执行。是否存在例外情况？有的，在一种特定情况下，慢进程不会拖累快进程：当共享资源是【只读】且【无需协调】的时候。例如，多个进程同时读取同一份文件或同一块内存数据。一个进程可以慢慢地读，另一个进程可以飞快地读。因为它们都不会修改资源，所以不需要加锁，也无需互相等待。快慢进程之间没有任何依赖关系，各自都能以全速运行。</p>\n</blockquote>\n<p>照这么说，想要提高朗读速度，可以 “只读”，那就是真的只读了，不加理解地读。</p>\n<p>默读需要用到角回来识别字，朗读除此之外，还要用到布洛卡区说话和韦尼克区返听。</p>\n<p>当默读文字时，有时会在脑海中出现声音，当然不是实际的声音，是一种类似于回忆音乐旋律的感觉，这种现象是正常的吗？这种现象通常被称为\n“内心言语”（Inner\nSpeech），这说明默读时也用到了听觉皮层。在默读的同时也可以感觉到喉部肌肉的运动。</p>\n<blockquote>\n<p>(AIGC)</p>\n<ol type=\"1\">\n<li>视觉信息：视觉皮层看到文字。<br></li>\n<li>转换：角回等区域将视觉符号转换为听觉代码。<br></li>\n<li>内部模拟：<br>\n<ul>\n<li>运动模拟：布洛卡区及其周边区域会产生微弱的、被抑制的发音指令（科学家可以检测到喉部肌肉的微电流活动），这是一种 “准备说话但没说出口” 的状态。<br></li>\n<li>听觉模拟：大脑的次级听觉皮层（Secondary Auditory\nCortex）—— 特别是负责处理复杂声音（如语言）的区域 —— 会被激活。这个区域就在您提到的韦尼克区附近。<br></li>\n</ul></li>\n<li>产生体验：正是这种听觉皮层的内部激活，产生了您所描述的 “脑海中的声音” 或 “心理声音”。它不是来自耳朵的真实声音信号，而是大脑自上而下生成的预测和模拟。这和你 “在脑子里单曲循环一首歌” 的机制非常相似。<br></li>\n</ol>\n</blockquote>\n<p>记忆一定需要外界的输入吗？在记忆的识记阶段需要，保持阶段和提取阶段都不需要。保持阶段里新输入的信息对已存储的信息有倒摄抑制，提取阶段可以通过提示来再认。我们对梦的记忆是通过自己的无意想象而得来的，这说明想象可以补充经验。在经历梦的时候，大脑对以往输入过的记忆进行重组；在回忆梦的时候，回忆的是重组过的记忆。</p>\n<p>做梦梦到旋律，这个旋律后来才发现是以前听过的，但梦醒后的很长一段时间都没有想起来来自于哪里，那么对这段旋律的记忆算不算内隐记忆？AI\n给的回答是算的，因为梦的内容不是有意回忆的，在做梦之前，对旋律和来源的记忆都是内隐记忆；在做梦之后和再认之前，对旋律的记忆是外显的，而对来源的记忆是内隐的；在经过再认之后，来源的内隐记忆才变成了外显记忆。</p>\n<p>为什么说思维是人对客观事物本质和内在联系的认识？</p>\n<ul>\n<li>充分条件是有 A 必有 B，仅凭 A 就可充分推出 B；必要条件是无 A 必无\nB，有 B 必要 A。</li>\n<li>事物的本质属性是什么意思？事物 A 的本质属性 a，是判断事物 B\n是不是事物 A\n的必要条件。如自行车的本质属性，有轮子，是判断一个物品是不是自行车的必要条件，如果无轮子，就必定不是自行车。有轮子不是是自行车的充分条件，因为仅凭这一个特征，无法充分推出它是自行车，它还可能是汽车。如果自行车失去了轮子，就不能称之为自行车了（除非叫 “坏掉的自行车”），所以 “有轮子” 是自行车的本质属性。想要判断事物\nA 是不是事物 B，应该怎么判断？我们需要保证，事物 A 具有事物 B\n的所有本质属性，即 A 类是从 B\n类继承而来的。比如自行车是车，因为自行车具有车的所有本质属性（通常意义上，有轮子，用于载人或物，在地上跑，相对于人的移动速度更快的机器）。或者说，A\n是 B 类的一个实例，比如我的一辆自行车，是自行车类的实例。</li>\n<li>事物的偶然属性是什么意思？在失去偶然属性后，并不影响事物的本质。名字是一个人的偶然属性，在改名之后，仍然是同一个人。人格是一个人本质属性。特修斯之船，河流的偶然属性变了，但作为一个情感的客体，在人心里的本质属性是没有变的。</li>\n<li>事物间的内在联系是什么意思？摩擦和生热这两件事之间存在内在联系，这里的内在是指，多个事物之间的内在，因果关系。外在联系是什么意思？一只鸟随机地飞到了一辆汽车上，此时他们之间建立了一种外在联系。内在联系是寻找因果，必然性。</li>\n</ul>\n<p>打算盘是动作思维还是形象思维？用手算是动作思维，用心算是形象思维，通过口诀来判断打的动作是抽象思维，抽象思维也叫词的思维或逻辑思维。</p>\n<p>辐合思维是什么意思？辐是自行车轮子上的金属条，从轮圈到轴心，辐合思维注重从边缘聚集到中心，所以也叫求同思维。发散思维是解决问题的前半段，生成多种选项，辐合思维是解决问题的后半段，评估和执行选项。</p>\n<p>想象的功能是什么意思？想象是在已有形象的基础上，创造新的形象。这不是它的功能，是它的定义，功能是衍生出来的作用。通过小说的描写形成人物形象，是想象的补充经验的功能；通过想象来补充自己没有被满足的需求，画饼充饥望梅止渴，一个是替代性的满足；还可以是预见目标向目标前进。</p>\n<h3 id=\"社会心理学\">社会心理学</h3>\n<p>存不存在无角色的社会人？社会角色的意思是：</p>\n<ul>\n<li>一种行为方式和心理状态，与个体的社会地位和身份相一致（主观条件）</li>\n<li>对特定地位个体行为的期待，是社会群体得以形成的基础（客观条件）</li>\n</ul>\n<p>所以，只要一个社会群体的场域（等级或优先级、功能的划分）存在，对其组成成员的期待（隐含的规则）存在，社会角色就一定存在。一个人在不同的场域会有不同的角色。但是，如果前面那一个主观的条件不存在，即在一个场合下，行为方式和心理状态与这个场合的规则不一致的人，或许可以说，他是跳出了这个角色的。比如在《月亮上的男人》这部电影里，主角安迪・考夫曼给人一种经常跳出角色的印象，或者说，他在一个场合下同时扮演了两个角色，这有时会造成角色间冲突。之后他还在个体意义上扮演了两个角色，并成功地使其他人认为了这两个角色一定不会是同一个人。</p>\n<p>角色冲突和角色不清的区别是什么？角色不清指主观或客观的对该角色的认识不清。而角色冲突是认识清楚的，但认识不一致。角色内冲突是指对同一个角色有两种以上的细分认识，如教师对学生既需要管理者的角色，也需要朋友的角色；角色间冲突指对同一个人的两种及以上角色认识之间存在冲突，如某个时间选择先处理工作问题还是家庭问题。安迪考夫曼对他的两个角色都是认识清楚的，但是别人可能没有看出来是两个角色。</p>\n<p>表现型角色表现的是什么？是社会的秩序，制度，价值观，道德风尚，公平，正的一面。如医生，教师，学者，感动中国的获奖者。而企业家通常是与之相对立的功利型角色的，表现的是效率的一面。到目前为止，获感动中国年度人物的企业家好像只有：2002\n年的张瑞敏，2006 年的霍英东，2019\n年的伍淑清。张瑞敏表现了中国企业走向国际，霍英东和伍淑清表现了香港和内地的关系。</p>\n<p>一个被亲生父母抛弃，后来被领养的人，他的先赋角色是领养者 A\n的儿子。在他经历努力，找到真正的家人之后，他的角色是家人 B 的儿子。那么\nB\n的儿子的角色算先赋的还是成就的？在他找到家人之后，且他身边的人都知道了，那么这个角色对于他、两对父母、和知情者既是先赋的，也是成就的；在他知道自己被领养之后，但没有找到家人之前，对他和他的亲生父母及领养父母，帮助寻找家人的人来说，这个角色是先赋的，但还没有完全成就；在他还不知道自己是被领养的时候，对他，加上他身边的所有不知道领养事情的人的来说，这个角色是不存在的。</p>\n<p>为什么说自尊是人对其社会角色自我评价的结果？如果这么说，低自尊的意思就是，我认为我没有达到群体的标准。对于一个自我评价为 “我是一个好员工，但不是一个好家长” 的人，那么他的职业角色是高自尊的，而家长角色是低自尊的。如果一个人的\nA 角色的自尊低，那么他可能会去建构一个 B\n角色，比如一个自认为学习能力不强的人，会去把游戏的段位打得很高。</p>\n<p>马斯洛的自尊需要里，对成就、优势、自信的欲望与对名誉、支配地位、赞赏的欲望有什么区别？前者是内在动机驱动，后者是外在动机驱动。</p>\n<p>有纯粹的利他动机吗？</p>\n<p>权力动机是什么意思？当我们想要说服一个人，想要转变他的态度，或想让他按照自己的想法来做事的时候，这时候的心理倾向就叫做权力动机。大致由两个因素引起：对社会控制的需求（包括安全和尊重的需求），或对无能的恐惧。</p>\n<p>成就动机是什么意思？当我们感觉一件事情太简单，或者太难，所以没有做的动力的时候，这时候的成就动机是弱的。当一件事情我们认为有一定的挑战性，并非常想做的时候，这时候的成就动机是强的。两个影响因素是，主观成功的概率，和目标的吸引力。</p>\n<p>社交焦虑者有亲和动机吗？社交焦虑者的矛盾是：想和别人在一起建立友好或协作的关系，但是害怕风险。这个矛盾的前半部分就叫做亲和动机。这是一个趋避冲突，避的一点在于，和别人在一起会不自在。所以从动机上来看，社交焦虑者有趋的亲和动机\nC，且还有另外一个避的动机。如果只有一个动机，只趋，或者只避，那么绝对不会焦虑，因为后者的情况就是，直接逃离现场。但从行为上来看，社交焦虑者的亲和倾向\nB 是低的，因为 A\n是焦虑。卡在意志行动的准备阶段了，意志的果断性不足。因为自觉性不足，所以果断性、自制性和坚韧性都不足。</p>\n<p>态度的 CAB 模型是什么意思？</p>\n<ul>\n<li>观点和信念的区别是什么？观点更短期、易变、详细。信念更抽象，改变更难。观点需要基于信念来提出，信念可以通过观点回溯。</li>\n<li>知觉和理解的区别是什么？知觉是侦察兵，理解是指挥官。</li>\n<li>理解和观点、信念的区别是什么？理解是认知的过程，在理解之后形成观点和信念</li>\n<li>评价：我认为苹果好吃；观点：经过以往的多次评价，我认为苹果比香蕉好吃；信念：我认为吃苹果对身体好（基于事实：苹果有维生素和膳食纤维；观点：身体需要维生素，膳食纤维有助于消化）。我对苹果的知觉是，我知道那是一个苹果（模式识别）；理解是，我能说出来我对苹果的观点和信念</li>\n<li>知觉 -&gt; 理解 -&gt; 观点 -&gt;\n信念，这四个再加上事实，就是态度的认知成分 Cogntion</li>\n<li> 情绪：吃苹果之后，我开心了；情感：我喜欢吃苹果。评价和情绪、情感这三个，就是态度的情感成分\nAffect</li>\n<li> 行为倾向 Behaviour Tendency</li>\n</ul>\n<p>我认为跑步可以锻炼身体，这是我的认知\nC；但是跑步会使我累得难受，这是我的情感 A；通常 A\n占主要成分，所以我的行为倾向 B 是不常跑步。</p>\n<p>态度的卷入深度是什么意思？指态度对象对个体的意义重要性。如一个人对日本的态度，对日本有态度，但平常不接触日本的所有信息，相比在日本留学的人，对日本态度的深度更浅（C\n的方面）。对一款经常玩的游戏，相比玩了很短时间卸载的游戏，态度更深（B\n的方面），如果认为工作比游戏重要，那么对工作的态度比游戏更深。</p>\n<p>如何使用中等畏惧的信息说服？如果不常运动，得心血管疾病的风险是运动者的好几倍，运动会显著降低患心血管疾病的风险。</p>\n<p>为什么沟通的结构比霍夫兰德态度转变模型的四个要素多三个？霍夫兰德态度转变模型的四要素是接受者，发送者，信息和情境，接受者是态度转变的主体，通常是发送者劝说接受者，这个模型关注的是发送者如何在特定情境下使用特定信息转变接受者的态度。而沟通的结构是相对更平等的，所以会有一个反馈，反馈是指一个交互的，半双工的过程，比如我在回答对方之前，先把对方的观点复述一遍，看我的理解是否和对方一致。霍的情境对应沟通的背景，沟通的背景还比霍的情境多了物理层，包括心理、物理、社会和文化背景，而霍的情境是不涉及物理背景的。霍已经假定了沟通的信息传递本身是没有问题的，而沟通还涉及到了信息的载体，和传递之前和之中，信息是否有误码和损耗等障碍。信息的载体或者说通道是指面对面沟通还是发信息沟通。传递的障碍包括六个方面，信息源，编码，网卡，信道，自然衰减，和误解。来自信息源的障碍如信息量不够或不明确，编码的障碍如对英国人使用日语，网卡发送的障碍如声带的振幅不够，说话声音小，信道的障碍如误用了沟通载体和方式，自然衰减的障碍如远距离对话，两个终端上的障碍是误解。通道，障碍和反馈，是沟通比霍多的三个。</p>\n<h3 id=\"创伤心理学\">创伤心理学</h3>\n<p>照顾关系，依恋关系和主体间关系的区别是什么？父母给我们提供居住地和经济上的支持，叫做照顾关系；如果父母经常和我们玩，讲故事，有身体接触，可以形成依恋关系；我们对一个第一次遇到的陌生人，和他之间的关系就叫主体间关系。中医推拿，泡澡，泡脚也可视为一种身体的接触，这叫创伤的躯体治疗。</p>\n<p>如何解释，当我们看到古文，小说或电影里与自己类似的负面经历之后，自己的负面心境会缓解一点？这是一种共享的记忆。在同时同地同情境下，两个人共同经历的记忆叫做共时记忆，而共享记忆需要一个传达的过程。比如张三在时间\nA 经历的记忆，在时间 B\n通过口头或文字的形式分享给了李四。这种 “不是只有我一个人是这样” 的感受，从需求满足的角度看，满足了马斯洛的第三层，归属感和爱的需要。如果观看者\nA 本身是尊重小说或电影里的人物 B 的，那么 A 可以把 B 当成自己，把 A\n当作另一个人 C，A 通过扮演屏幕外的人 C，给屏幕里的 B\n尊重，从而间接地满足了自己尊重的需要。</p>\n<h2 id=\"抑郁的心理学理论\">抑郁的心理学理论</h2>\n<ul>\n<li>压力源\n<ul>\n<li>生物性压力源：躯体创伤，疾病，噪音</li>\n<li>精神性压力源：错误的认知结构、过去的经验、内心的冲突</li>\n<li>社会环境型压力源\n<ul>\n<li>社会环境的问题：战争，亲人逝世，被监禁</li>\n<li>人际适应的问题：由于自身的状况，造成的人际适应问题</li>\n</ul></li>\n</ul></li>\n</ul>\n<p>压力源指生活中要求人们去适应的事件，比如转学。压力反应包括主体觉察到压力源后，出现的心理、生理和行为反应，心理反应如出现低落的心境，生理反应如，行为反应如在社交场合面前退缩。压力是压力源和压力反应共同构成的一种认知和行为体验过程。</p>\n<p>行为理论\n1（负惩罚）：压力 - 减少行为 - 减少正性强化物 - 退缩 - 减少正性强化物……（正强化）引起他人同情和关注 - 继发性获益</p>\n<p>行为理论 2（习得无助）：负性事件 - 习得无助 - 动机减少</p>\n<p>认知理论\n1（认知反哺核心信念，自证预言）：对自己、世界和未来的看法消极 - 对事件的认知倾向于支持其消极证据</p>\n<p>某人某行为的原因，事件的结果 = 归因（信息）。</p>\n<ul>\n<li>内因 / 外因维度：是否因为自己</li>\n<li>整体 / 局部维度：适用范围</li>\n<li>稳定 / 易变维度：时间持续性</li>\n<li>可控 / 不可控维度：是否受自己主观意志影响</li>\n</ul>\n<p>认知理论\n2（抑郁性归因风格，形成性习得无助）：对负性事件的归因倾向于内在、稳定和整体的原因 - 认为自己无法应对该事件 - 习得无助</p>\n<p>认知理论\n3（思维反刍，%0|%0）：模糊和概括的记忆，对负性刺激注意偏好 - 专注、淹没于自身的感受、原因而不对于处理</p>\n<p>人际理论（客观上的狼来了）：难以信任别人 - 寻求他人肯定 - 容易感受到拒绝 - 难以信任别人 - 寻求他人肯定 - 身边人感到厌倦 - 寻求他人肯定 - 社会支持被收回</p>\n<p>社会文化理论\n1（世代效应）：时代变了；家庭原子化；年轻一代对自己的期望过高。</p>\n<p>社会文化理论\n2（性别差异，女性患抑郁的可能性是男性的两倍）：男性偏向喝酒否认痛苦，女性偏向反刍；社会对女性的偏见</p>\n<p>社会文化理论 3（种族差异）：</p>\n<h2 id=\"生物学\">生物学</h2>\n<p>决定论是指，每个事件的背后都是有原因的，确定的因素可以引发确定的结果。还原论是指，可以把一个大的系统分解成组成它的基本部分来研究。如果心理现象以生理状态为决定的话，我们可以把人体还原成一些零件，通过药物来干涉它们的运转过程，从而改善心理上的问题。但不用药物的谈心、话疗也可以改善心理问题，有些药物不起效或起效慢，这或许说明心理现象不完全以生理状态为决定，也或许说明话疗、安慰剂也可以改善生理状态。</p>\n<p>来自体内或体外的刺激通过内导神经元（传入神经、感觉神经）传入脑和脊髓（中间神经元的回路），再通过外导神经元（传出神经、运动神经）传出到效应器官。人脑神经元有\n100 亿个以上，在神经元之间有 1000\n亿个以上胶质细胞，它可以给神经元输送营养，修复神经元；叫髓鞘的胶质细胞起着电线绝缘层的作用，确保神经冲动沿正确的路线传递。神经元在静息状态下，细胞膜外的电位比膜内高\n70mV，膜外相对为正电；在受到刺激后，钠离子被泵入细胞膜内，膜内相对为正电。神经兴奋传导的速度通常为\n3.2 ~ 320km/h，0.8 ~\n8m/s。突触是一个神经元上，与另一个神经元彼此接触的部分，一个神经元可有多个突触；在大脑皮层上，一个神经元可有\n30000\n个突触。一个神经元通过突触间隙，向其临近的神经元释放神经递质，称为神经冲动的化学传递。神经递质的接收方细胞膜上的分子叫受体。再摄取是发送神经元向突触间隙释放神经递质后，再吸收回去一部分，使得突触间隙的神经递质含量降低。降解是接收神经元向突触间隙释放酶，把神经递质分解成其他物质。</p>\n<ul>\n<li>中枢神经系统（CNS）\n<ul>\n<li>大脑又叫端脑。大脑的外层叫皮层，皮质或者灰质；白质在里边。额顶枕颞，动感视听\n<ul>\n<li>脑回是山脊，脑沟是山谷</li>\n<li>额叶在头顶前部及额头，书写中枢在额中回靠近中央前回，如果损坏了称为失写症；表达性失语症是左半球额下回靠近外侧裂的布洛卡中枢，又叫运动型言语中枢，如果损坏了，说话迟钝费力</li>\n<li>顶叶在头顶后部，枕叶在枕头附近，顶枕交汇处的角回如果损伤了，可以看到字，但是不能理解字的意思，就像看一个异国的语言，称为失读症；</li>\n<li>额叶和顶叶的分界是中央沟。额叶顶叶，和颞叶的分界是外侧裂，外侧裂上方是额叶和顶叶，下方是颞叶</li>\n<li>颞叶在太阳穴、耳朵附近，颞上回的维尔尼克中枢如果损坏了，可以听到声音，但是不能理解意思，称为接受性失语症；</li>\n<li>岛叶与内脏感觉有关</li>\n<li>大脑两半球的分界叫纵裂，由胼胝（pian2 zhi1）体相连</li>\n</ul></li>\n<li>脊髓是最低级的，一些神经过程如膝跳反射可以不经过脑，只经过脊髓</li>\n<li>脑干是最古老的，其网状结构调节睡眠与醒来，分布于延脑、桥脑和中脑；</li>\n<li>小脑控制身体平衡</li>\n<li>间脑\n<ul>\n<li>嗅觉是最古老的感觉，丘脑除了嗅觉之外，是其他所有感觉的重要中枢，把感觉接收器的信息传给大脑</li>\n<li>上丘脑</li>\n<li>下丘脑是自主神经系统的中枢</li>\n<li>底丘脑调节肌张力</li>\n</ul></li>\n</ul></li>\n<li>外周神经系统（PNS）\n<ul>\n<li>躯体神经系统是用户态，受意识控制，如走路；\n<ul>\n<li>31 对脊神经</li>\n<li> 12 对脑神经\n<ul>\n<li>感觉神经（输入）：嗅神经、视神经、听神经</li>\n<li>运动神经（输出）：眼动神经、滑车神经（颈部）、外展神经（面部）、副神经和舌下神经（舌）</li>\n<li>混合神经（I/O）：\n<ul>\n<li>三叉神经（面部感觉的输入，咀嚼肌的运动）</li>\n<li>面神经（味觉的部分输入，舌下腺、泪腺和鼻黏膜腺的分泌）</li>\n<li>舌咽神经（味觉输入，唾腺分泌）</li>\n<li>迷走神经（一般内脏感觉的输入，咽喉肌肉、内脏平滑肌和心肌的运动）</li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li>自主的是内核态，受无意识控制，如心跳是心在 “自主” 地跳，没法控制它不跳，像植物一样没有意识，所以又叫植物神经。通过特殊的训练，可以在一定程度上控制心跳快慢\n<ul>\n<li>交感的和副交感的。“交感” 一词意为 “共同感受” 或 “共同作用”，是在应激状态下协调多个内脏器官，做出战斗或逃跑的反应；副交感的拮抗交感的，调节身体的 “休息和消化” 反应。</li>\n</ul></li>\n</ul></li>\n</ul>\n<p>突触间隙的 5 - 羟色胺、去甲肾上腺素含量过少，会有抑郁的感觉。</p>\n<p>一些理论认为，焦虑和抑郁是下丘脑 - 垂体 - 肾上腺轴（HPA\n轴）失调造成的。垂体分泌的激素种类最多，在下丘脑的下方。下丘脑的某些神经元分泌促肾上腺皮质激素释放因子（CRF），CRF\n再刺激垂体分泌促肾上腺皮质激素（ACTH），该激素通过血液运输到肾上腺和其他器官，引起约\n30 种激素的释放，每种激素都在人体适应紧急情况时起到一定的作用。</p>\n<p>表观遗传学认为，在 DNA\n序列不变的前提下，基因的表达模式（何时、何地、表达多少）可以通过可逆的化学修饰（如\nDNA 甲基化、组蛋白修饰）来动态调控和 “改变”。</p>\n<p>抗焦虑药包括巴比妥类和苯二氮类，它们都有断药反应，后者用于安眠药。</p>\n<h2 id=\"普通心理学\">普通心理学</h2>\n<p>参考彭聃龄《普通心理学（第 5 版）》等。</p>\n<p>普通心理学讨论的范围是普通成人，偏个体层面的心理过程和结构。与普通、成人和个体这三个词互补的就是异常，发展和社会心理学。</p>\n<p>认识是对信息加工的过程。包括感知觉、记忆、思维、语言的输入输出、想象。感知觉加工的是来自体内或体外的信息，通过记忆储存到大脑里，思维把这些信息进行重组，通过语言表达出来；想象以表象的矢量图为材料，把表象\nP\n成新的图。注意不属于是认识，因为它没有加工信息，而是选择将被加工的信息。认识也可以说成是客观事物在头脑中的反映。感觉是对事物个别属性的反映，知觉是对事物整体的反映，记忆是对过去经验的反映，思维是对事物本质和内在联系的反映，对作用到感官上的事物为媒介而间接地认识没有作用到感官上的事物。对语言来说，思维的原料和产品都是概念。概念是对客观事物特性、本质属性的反映，表现为词的形式。</p>\n<p>心理结构是不同心理现象之间的关系。如情绪和情感、意志都与需要相关，需要引起动机，动机引起行为，需要的满足引起正面情绪，不满足引起负面情绪，负面情绪使得认知效率下降。当外部世界不满足我们的需要的时候，我们使用意志来改造外部世界。</p>\n<h3 id=\"感觉和知觉\">感觉和知觉</h3>\n<p>它们都是人脑对客观事物的反映。“反映” 这个词说明，存在（映）在先，观察在后（反）。感觉和知觉都是 “观察” 的过程，它需要（映）的刺激，和接受刺激的感觉器官经由神经元和神经系统（反射）到一个地方。无脊椎动物发展到环节动物的阶段产生了神经系统，所以有感觉；脊椎动物阶段的神经系统更发达，所以有知觉。感觉和知觉是婴儿认知的开端，是最先成熟的心理过程，也是老年期衰退最早的心理过程。信息源可以来自体内或体外，但是产品在体内。可以说它们把物质转化成了精神。</p>\n<p>按刺激来自身体外面还是里面，可分为外部感觉（视听触味嗅）和内部感觉（动静机体）。感觉器官是输入设备，感觉是驱动程序。在内部感觉里，静觉的输入设备如手机的陀螺仪，刺激是来源于其内部的结构。</p>\n<table>\n<colgroup>\n<col style=\"width: 13%\">\n<col style=\"width: 86%\">\n</colgroup>\n<thead>\n<tr>\n<th>刺激作用于，感觉</th>\n<th>描述与形成时间 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a> （妊娠 8 周以后称为胎儿期，40\n周分娩）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>嗅细胞，嗅觉</td>\n<td>最古老的感觉 <br> 6 个月的胎儿能嗅到母亲的气味并记住</td>\n</tr>\n<tr>\n<td>内耳里的科蒂氏器官，听觉</td>\n<td>人能听到 16-20000Hz，对 1K-4KHz 最敏感。20 岁以前听觉提高，60\n岁以后对高频降低。<br>4 个月的胎儿听觉系统已经建立，28\n周后对声音有反应和面部表情</td>\n</tr>\n<tr>\n<td>皮肤，触觉</td>\n<td>用两个钝针头刺激皮肤相邻的两点，能分辨出两个点的最小距离叫两点阈，用来量化触觉灵敏度。脊背的两点阈最大，手指和面部的两点阈最小。对于某一时刻和某一块皮肤来说，皮肤表面的温度叫生理零度\n<br>2 个月有皮肤感觉，4 至 5\n个月胎儿的触觉与出生周岁后婴儿的水平相当</td>\n</tr>\n<tr>\n<td>光感受器细胞，视觉</td>\n<td>视网膜视细胞层上有两种视神经细胞，对光敏感的锥体细胞在中央窝，对暗敏感的杆体细胞在边缘。锥细胞有\n600 万个，杆细胞是锥细胞的 20 倍。 <br>4\n个月就对光线敏感，但视觉系统在出生后才发挥作用，出生后 1\n岁达到成人视力水平</td>\n</tr>\n<tr>\n<td>味蕾，味觉</td>\n<td>敏感性从舌尖、舌边前、舌边后、舌根的四种基本味觉是甜、咸、酸、苦。<br>26\n周形成味觉，30 周味觉发达</td>\n</tr>\n<tr>\n<td>肌梭、腱梭和关节小体，动觉</td>\n<td>身体各部分的位置、运动和紧张程度，又叫运动觉。闭眼摸鼻子</td>\n</tr>\n<tr>\n<td>内耳中的耳石和三个半规管叫前庭器官，静觉</td>\n<td>感受人体姿势与地心引力的关系，又叫平衡觉。晕车</td>\n</tr>\n<tr>\n<td>内脏，机体觉</td>\n<td>也叫内脏感觉。包括饿、渴、窒息、疲劳、便意、性、内脏痛</td>\n</tr>\n<tr>\n<td>对应的机体，痛觉</td>\n<td>对对应的机体造成伤害，可以是内部或外部感觉。痛觉最难适应。辣</td>\n</tr>\n</tbody>\n</table>\n<ol type=\"1\">\n<li>人耳对 1000 至 4000 赫兹的声波最敏感</li>\n<li>能引起某一感觉器官最敏锐感觉的刺激，是该感觉器官的适宜刺激</li>\n<li>人类听觉的适宜刺激是 16 至 20000 赫兹的声波</li>\n</ol>\n<p>这三句话都是标准答案，如果把第二句话里的 “是” 理解成 “蕴含” 的话，这三句话是不冲突的。即\n1000 至 4000 赫兹的声波，是包含在 16 至 20000\n赫兹这个适宜刺激范围之内的。</p>\n<p>感觉和知觉的区别是，它们反映的是事物的个别属性还是整体。知觉在感觉的基础之上形成。对于一个苹果，我们视觉认识到的属性是红色，触觉和视觉认识到的属性是圆滑，味觉认识到的属性是酸甜。通过这些感觉认识到的各个属性，我们在心中构建出了它的整体形象，形成了关于苹果的知觉。</p>\n<p>你把苹果的各个属性结合到一起认识，这叫知觉的整体性；你由过去的经验判断它是一个苹果，并给出了判断的理由，这叫知觉的理解性；桌子上的盘子里有一个苹果，在同一时间里你对苹果的注意力要大于盘子和桌子，这叫知觉的选择性，这取决你的需要和感觉通道的容量；盘子里有几块切开的苹果，你仍然可以认识到它是苹果，这叫知觉的恒常性；有非常小一块果肉，你无法判断它是苹果还是梨，这叫超出了知觉恒常性发生条件的限度。</p>\n<p>在时间知觉的准确度上，声 &gt; 震 &gt; 闪，听觉 &gt; 触觉 &gt; 视觉。</p>\n<p>错觉是一种无法被避免的歪曲知觉，如<a href=\"https://baike.baidu.com/item/%E6%A3%8B%E7%9B%98%E9%98%B4%E5%BD%B1%E9%94%99%E8%A7%89/16833649\">棋盘阴影错觉</a>。</p>\n<h3 id=\"颜色\">颜色</h3>\n<p>RGB-CMY：红绿蓝的负后像（互补色）是青品黄。RGB\n是加色模型，用于发光体如电视屏幕。红 + 绿 = 黄，红 + 蓝 = 品，绿 + 蓝 = 青。</p>\n<p>CMY 是减色模型，用于吸收光的颜料，印刷加个 K 是黑色，CMY 分别吸收\nRGB。青色的颜料把红光吸收之后，剩下的绿光和蓝光在加色模型里相加是青色；青色和品色颜料叠加，吸收红光和绿光，剩下蓝光，所以在减色模型里青 + 品 = 蓝。</p>\n<p>HSV 颜色空间：色相 - 饱和度 - 明度。</p>\n<ul>\n<li>色相是一个环，红色在 0 度。纯红色是 (0,1,1)</li>\n<li> 饱和度是非灰色的比例。灰色没有饱和度，只有明度：(h,0,v) 不管 h\n是什么，只要 s 是 0，v 从 0 到 1 都是黑 - 灰 - 白渐变，特点是 RGB 相等</li>\n<li>色觉有缺陷的人靠明度辨别颜色，对应光的强度。</li>\n</ul>\n<table>\n<colgroup>\n<col style=\"width: 7%\">\n<col style=\"width: 57%\">\n<col style=\"width: 34%\">\n</colgroup>\n<thead>\n<tr>\n<th>Label</th>\n<th>Input Range</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Hue</td>\n<td><input type=\"range\" id=\"hue\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0\"></td>\n<td><span id=\"hueValue\">0</span></td>\n</tr>\n<tr>\n<td>Saturation</td>\n<td><input type=\"range\" id=\"saturation\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"></td>\n<td><span id=\"saturationValue\">1</span></td>\n</tr>\n<tr>\n<td>Value</td>\n<td><input type=\"range\" id=\"value\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"></td>\n<td><span id=\"valueValue\">1</span></td>\n</tr>\n<tr>\n<td>Red</td>\n<td><input type=\"range\" id=\"red\" min=\"0\" max=\"255\" step=\"1\" value=\"255\"></td>\n<td><span id=\"redValue\">255</span></td>\n</tr>\n<tr>\n<td>Green</td>\n<td><input type=\"range\" id=\"green\" min=\"0\" max=\"255\" step=\"1\" value=\"0\"></td>\n<td><span id=\"greenValue\">0</span></td>\n</tr>\n<tr>\n<td>Blue</td>\n<td><input type=\"range\" id=\"blue\" min=\"0\" max=\"255\" step=\"1\" value=\"0\"></td>\n<td><span id=\"blueValue\">0</span></td>\n</tr>\n<tr>\n<td>RGB Hex</td>\n<td><input type=\"text\" id=\"hex\" value=\"#FF0000\" maxlength=\"7\"></td>\n<td><span id=\"hexError\" style=\"color:red\"></span></td>\n</tr>\n</tbody>\n</table>\n<div id=\"colorBox\" style=\"width:100px;height:100px;margin-top:10px;border:1px solid black\">\n\n</div>\n<script src=\"color.js\"></script>\n<h3 id=\"意识无意识注意\">意识、无意识、注意</h3>\n<p>意识是在觉醒状态下的觉察，是在内存上的所有进程，包括对内的觉察和对外的觉察。对内的觉察包括回忆，描述自己现在的状态；对外的觉察是别的人和事，以及别人怎么看自己。它的特殊形态包括睡眠和梦。睡眠是把内存上的东西存储到了硬盘上。无意识是主板上时钟的电池，是个体没有觉察到的，无法调节和控制的心理现象。如果按弗洛伊德的三层模型，意识是现在正在的，前意识是现在可以想到的，无意识是现在不会想到的。荣格的三层模型是意识、个人潜意识、集体潜意识（可理解为\nDNA 里一样的部分）。无意识心理和有意识心理之间的桥梁是词语。</p>\n<p>脑电波按频率可分为 δ θ α β\nγ，频率高的意识活动强。当我们在清醒的状态下，多是 14-30Hz 的 β\n波，在放松的状态下是 8-13Hz 的 α 波，在睡眠状态下多是 δ 波。</p>\n<p>人在清醒状态时，大脑会分泌腺苷，高水平的腺昔浓度会引起困倦，而睡眠可以使大脑中的腺昔浓度降低。</p>\n<p>白天的光线激活视交叉上核，抑制松果体分泌褪黑素。黑暗促进褪黑素的分泌。褪黑素起镇静的作用。</p>\n<p>注意是一个动宾短语，是操作系统对意识的投注，是意识活动对特定对象的指向和集中。有稳定性，即注意对某个对象保持的时间。注意起伏的平均时间为\n8 至 12 秒，为感受性提高 - 降低的一个周期。</p>\n<p>按是否主动，可分为随意注意和不随意注意。人对目光很难做到随意控制，因为目光会受到无条件反射的影响。如当突然有物体出现在视野边缘时，眼球会不自主地转动以捕捉这一信息。这种反应是一种遗传下来的保护机制。目光是最能反映人内心世界的身体语言。</p>\n<p>注意分配是指，在同一时间把注意分配到两个及以上对象上。</p>\n<p>负启动效应：你不想听一个人说话，屏蔽他说话信息。如果后续想听了，要花更长的时间注意他。</p>\n<h3 id=\"记忆\">记忆</h3>\n<p>记忆是人类智慧的根源，是过去的经验在头脑中的反映，三个步骤是识记（输入）、保持（存储）和提取（输出）。</p>\n<p>记忆并不是一次性就能记牢的。从识记和存储的过程，保持的时间来看，分为瞬时、短时和长时记忆三个阶段，它们的保持时间是先短后长的。如果在识记时无意识，称为瞬时记忆或感觉记忆、感觉登记。感觉记忆体现在，视频都是一帧帧的，我们可以把离散的帧看成连续的画面，切镜头的时候也不会感觉到突兀。它的保持时间在\n0.25 至 4\n秒。如果在识记时注意了，则感觉记忆向短时记忆转变。短时记忆的注意广度是\n5~9 个单位，对语言文字记的是声音，非语言文字记的是形象，保持时间在 5\n秒至 1\n分钟。对短时记忆的内容进行复述，可以进入长时记忆。长时记忆的保持时间在 1\n分钟以上，长的直到终生。</p>\n<p>长时记忆分为陈述性记忆和程序性记忆，它们是按是什么和怎么做来分类的。陈述性记忆包括情景记忆和语义记忆，它们按是否和个人的经历绑定而分类的。情景记忆记的是自己过去经历过的某个事件内容及情绪；语义记忆记的是客观事实与知识。陈述性记忆的核心脑区在海马体、内侧颞叶、前额叶皮层；程序性记忆的核心脑区在基底神经节、小脑、运动皮层。</p>\n<p>在记忆形成之后，过去的经验会影响现在。外显、内隐记忆是按过去的经验如何被提取，从而影响现在的行为而分类的，是有意识还是无意识的影响。外显记忆的输出都是有意识的，包括回忆和再认。回忆是无线索的主动提取，如给出古诗的前半句，在没有选项的情况下自己写出后半句；再认是有线索的被动识别，如给出古诗的前半句，又给了四个选项，认得其中一个是对的。内隐记忆的输出是无意识的。如学会骑自行车之后，骑自行车的技能不用用力表现出来。看了床前明月光，再给出⻗字头，补全这个字，我们会更倾向于补成霜；如果刚看了忽如一夜春风来，我们会更倾向于补成雪。这叫启动效应，是内隐记忆对当前作业的影响。</p>\n<p>回忆或再认不出来或错误，称为遗忘。艾宾浩斯用无意义音节给自己做实验，发现外显记忆的遗忘的速度先快后慢，呈负加速曲线。内隐记忆是更持久的，且遗忘速度慢于外显记忆。健忘症患者可能无法回忆事件的外显记忆，但保留技能如骑车的内隐记忆。</p>\n<p>遗忘的原因有自然衰退和干扰。干扰分前摄抑制和倒摄抑制：在某个时间学习的材料，对识记或回忆另一个时间学习的材料造成的干扰。如 “五十六个民族，五十六支花” 这句歌词我们在之前是记得很清楚的，如果我们想把这段记忆转变成 “五十六个星座，五十六支花”，那我们会经历前摄抑制，即之前摄取的信息抑制之后摄取的信息；小明某个网络账号的平台要求他修改密码，在他修改之后就没有管了，直到某一天再次登录，他想不起来上次修改的是什么了，小明经历的叫倒摄抑制，即后摄的抑制前摄的。</p>\n<p>记忆系列位置效应：你对琵琶行的第一句话（首因效应）和最后一句话（近因效应）的印象比中间的深。</p>\n<p>5\n岁以前的儿童难以运用，或者说很少运用记忆策略，如复述。记忆从胎儿末期开始，1\n岁之前主要是情绪和动作记忆，1\n岁之后主要是表象和词语记忆。幼儿期以形象记忆、无意识记为主，机械记忆和意义记忆同时发展并互相作用。</p>\n<h3 id=\"思维想象\">思维、想象</h3>\n<p>灵长类动物发展到了思维萌芽阶段，可以认识到事物的外部联系；人发展到了思维阶段，可以认识到事物的内部联系。分析和综合是单体攻击，把单个事物分解成各个属性再拼回去。抽象和概括是\nAOE</p>\n<p>表象是一个 SVG 文件，想象是 PS\n的过程。无意的想象包括梦和病态的幻觉，弗洛伊德认为梦是冲突愿望的伪装满足；有意的想象包括幻想，幻想与个体的愿望相关，并指向未来。</p>\n<p>再造想象和创造想象的区别：前者如读书，通过书上写的文字，在头脑里复现了形象；后者如写，在不参照现有句子的情况下，自己写一些句子出来。我以前把再造想象误理解成了：把别人的话用自己的语言说一遍。这并不是对的，再造想象的意思是，注重于现有的东西在输入之后在脑海里形成了形象，不管输出了；而创造想象的注重的是，不参考现有的文字，它关注的是输出。再造想象关注前半部分，创造想象关注后半部分。当我试图在输出的时候，但是直觉有点不太对，所以又重新看了一遍再造想象的定义，才发现自己过去理解错了，为了覆写这个记忆，需要克服前摄抑制的干扰。</p>\n<h3 id=\"情绪\">情绪</h3>\n<p>左侧前额叶皮层（PFC）与趋近系统和积极情绪有关，如笑；右侧前额叶皮层与退缩系统和消极情绪有关，如哭和恐惧。愤怒属于趋近系统，但它的神经机制可能在两边都有。杏仁核与危险和负面的情绪相关。</p>\n<p>情绪的三个部分，主观感受，生理唤醒和外部表现。主观感受如抑郁和焦虑，生理唤醒如发抖、血管扩张，外部表现是表情。表情分面部表情、姿态表情和语调表情。面部表情如微笑，姿态表情如走路的姿势、鼓掌，语调表情如说话的语气、断句的方式。通过训练，表情可能和实际的情绪状态不一致。</p>\n<p>情绪从状态可分为心境、激情、应激。心境是微弱而持久、弥漫的，激情是强烈而短暂的，应激是高度紧张的。从生物进化的角度可分为基本情绪和复合情绪。基本情绪包括喜怒哀恐，婴儿在出生一两天就会自发性地微笑。复合情绪是由基本情绪的不同组合派生而来的。</p>\n<p>社交情绪：内疚是对想象或实际的罪行或过失负有责任。羞耻是和常模不一样，强调差异性。</p>\n<p>恐惧是由现实危险引起的，焦虑是由非现实危险引起的。所以社交恐惧准确地说可能是社交焦虑。</p>\n<p>婴儿的微笑有三个发展阶段：自发性的、无选择社会性的、有选择社会性的。即无人就笑、有人才笑、分人笑。</p>\n<p>婴儿到一个陌生环境后，对母亲的分离焦虑，分三个阶段：抗议 冷漠\n适应。</p>\n<h3 id=\"意志\">意志</h3>\n<p>下象棋走一步要犹豫很长时间，或者不推演直接就走，都叫和意志的果断性相反；一步走错陷入懊悔，影响了之后的决策速度，叫与意志的自制性相反；下一半不想下了，叫和意志的坚韧性相反；不知道自己为什么做要下象棋这个决定，叫与意志的自觉性相反。</p>\n<p>在意志行动的准备阶段里可能会有一些动机冲突，勒温和米勒把内心冲突分为四类：</p>\n<p>双趋式冲突：在两个吸引人的目标之间难以抉择。这时候我们要搬出决策终端机：</p>\n<style>\n  body { font-family: Arial, sans-serif; }\n  #options { margin-bottom: 10px; }\n  .option { margin: 5px 0; }\n  button { margin-right: 5px; }\n</style>\n<div id=\"options\">\n\n</div>\n<input type=\"text\" id=\"newOption\" placeholder=\"下一步要干什么...\">\n<button onclick=\"addOption()\">添加选项</button>\n<button onclick=\"chooseRandom()\">随机决策</button>\n<script>\n  let options = [];\n  const addOption = () => {\n    const text = document.getElementById('newOption').value.trim();\n    if (text) {\n      options.push(text);\n      document.getElementById('options').innerHTML += `<div class=\"option\">${text}</div>`;\n      document.getElementById('newOption').value = \"\";\n    }\n  };\n  const chooseRandom = () => {\n    if (!options.length) alert(\"请先添加一些决定选项！\");\n    else alert(\"下一步应该: \" + options[Math.floor(Math.random() * options.length)]);\n  };\n</script>\n<p>双避式冲突：在两个不情愿的情境中必须选择其一。比如某门害怕学不好的课，学它，和重修，必须选一个。</p>\n<p>“拉康精神分析理论碎片”“Meme\n图合订本” 等笔记，单看某一个都属于趋避式冲突，因为在写这些笔记的时候就能感觉到既有利又有弊。把它们结合起来看，先改哪一个，后改哪一个，改还是不改，就是双重趋避式冲突。</p>\n<p>第一叛逆期在幼儿期的 3 至 4\n岁，是自我意识的第一个飞跃，实现自我意志，反抗父母控制。</p>\n<h3 id=\"语言\">语言</h3>\n<p>语言是社会现象，是交流的工具，在学会语言之前，婴儿用哭表达需要；言语是心理现象，是交流的过程，以语言为载体，没说出来的心里话属于是内部言语。</p>\n<ul>\n<li>10-14 月：言语发生</li>\n<li> 1 至 1.5 岁掌握第一批词汇，在五六十个</li>\n<li> 1.5 岁能说出双词句和多词句，2 岁说出复合句</li>\n<li> 19-21 月：词汇量增长最快</li>\n<li> 20-30 月（1.5 至 2.5 岁）：掌握母语基本语法的关键期</li>\n<li> 36 月：基本掌握了母语的语法规则系统和全部发音，词汇量有 1000 个</li>\n<li> 3 至 5 岁：口语发展的快速期</li>\n</ul>\n<p>身体语言包括脸上的目光和表情，身上的姿势和服化道，肢体上的手势和触摸；还有人际距离也属于是身体语言。公众距离在\n3 米 7 以上，是一对多、单向的如演讲；商业上的社交距离在 1 米 2 到 3 米\n7；朋友间的个人距离在 45 厘米到 1 米 2；亲人间的亲密距离在 45\n厘米以内。</p>\n<p>个体全部社会化的前提是语言社会化。</p>\n<h2 id=\"行为主义-反射\">行为主义 - 反射</h2>\n<p>条件反射在无条件反射的基础上形成。经典条件反射研究\nS-R，即刺激 - 反应，把一个无条件刺激和一个条件刺激配对，最后条件刺激能引发无条件的反应，如巴普洛夫的狗。在巴甫洛夫的狗里，无条件刺激是食物，条件刺激是铃声，无条件反应是流口水；操作性条件反射研究\nS-O-R，O\n是个体，通过主动操作环境来获得奖励或避免惩罚，形成某种行为模式，如斯金纳箱。</p>\n<p>无条件反射是本能的原因造成本能的结果。条件反射是过去有两个因素同时造成一个结果，后来一个因素就能引发结果。一个本能的因素如被蛇咬会痛和流血，通过无条件的反射造成恐惧，同时有一个不直接造成结果的因素在场，如看到了蛇的形状，后来一个无条件的刺激，如看到了像蛇形状的井绳，就能造成结果。社交焦虑也是类似，如过去在有人在场的环境下被人责骂，有了羞耻感。无条件刺激是被人责骂，条件刺激是有人在场，无条件反应是羞耻感。本来是无条件刺激被人责骂引发无条件的反应羞耻，后来是条件刺激有人在场会引发无条件反应羞耻。</p>\n<p>斯金纳的操作性条件反射：正和负指的是操作，呈现或者移除某个刺激。强化和惩罚指的是在操作之后，促进还是抑制事件的再次发生。</p>\n<p>正强化是呈现（+）一个正刺激，负强化是移除（-）一个负刺激。它们都使行为增加。</p>\n<p>正惩罚是呈现（+）一个负刺激，负惩罚是移除（-）一个正刺激。它们都使行为减少。</p>\n<ul>\n<li>给正向刺激使行为增加，称为正强化。如工作强 -&gt; 多发工资 -&gt;\n工作更强。</li>\n<li>给负向刺激使行为减少，称为正惩罚。如工作失误 -&gt; 扣钱 -&gt;\n减少工作失误。</li>\n<li>移除负向刺激使行为增加，称为负强化。如逃避社交 -&gt; 没有感到焦虑\n-&gt; 更加逃避社交。</li>\n<li>以前的正向刺激没有出现，使行为减少，称为无强化。如玩游戏 -&gt;\n没有新鲜感 -&gt; 不玩游戏。</li>\n<li>移除正向刺激使行为减少，称为负惩罚。如晚上睡得晚 -&gt; 把手机拿开\n-&gt; 晚上睡得早。</li>\n</ul>\n<p>观察学习是指，自己观察到别人的行为在收到奖励或惩罚之后，会调整自己的行为。</p>\n<p>朝向反射：新的刺激抑制旧的条件反射。感官朝向刺激。</p>\n<h2 id=\"发展心理学\">发展心理学</h2>\n<p>皮亚杰认为</p>\n<ol type=\"1\">\n<li>心理起源于动作：动作是主客体之间相互作用的中介，最早的动作是先天的无条件反射。</li>\n<li>心理发展有内因和外因，内因有神经系统和内分泌系统的成熟、已有的经验图式、平衡性，外因包括社会环境，他人</li>\n</ol>\n<p>图式是什么意思：你在手机上玩和平精英，学会了用四指操作人物移动和射击后，这个四指操作的图式可以迁移到其他类似的\nFPS\n手游上，如三角洲行动。三角洲对你而言是一个新的刺激，把新的刺激整合到你已有的四指操作的图式上，即你在三角洲上照样可以使用四指操作，这叫把新的情形同化到已有的认知图式上。在打三角洲的过程中，你会遇到和和平精英不同的游戏机制，比如它的受击部位有好几种，胳膊或者腿受击了之后都要对这些部位单独地使用药品，腿受伤了还会减慢移动速度。这会造成你的战术有所改变，你原来在和平精英上的战术不能完全地应用到三角洲上了，比如在腿受伤的情况下，“先逃跑，后打药” 这个战术可能就行不通，你必须要应用新的战术，这叫你的战术图式在接受新的刺激之后，顺应了这个被同化的刺激，从而你原有的图式变成了新的图式。</p>\n<p>同化：把新的刺激同化到原有的图式里，从而用原有的图式应对新的刺激；顺应：当原有的图式不能应对新的刺激时，改变原有的图式。同化是用原有的方法解决新的问题，顺应是当原有的方法不能解决新的问题时，改变方法。</p>\n<p>维果茨基认为</p>\n<ol type=\"1\">\n<li>低级的心理机能是从动物进化而来的，如无意注意</li>\n<li>高级的心理机能是通过人的生产活动及符号系统的中介而内化得来的</li>\n</ol>\n<p>心理机能从低级发展到高级有四个指标：随意化，概括 - 抽象化，整体化，个性化。随意化是指自己的有些行为是自己有意而为之的，可以被自己的意识控制；概括 - 抽象化是指可以通过概念，而不必需要具体的形象来讨论事物；整体化是指各种心理机能形成一个整体的心理结构。</p>\n<p>最近发展区是什么意思：在最近发展区之前，是人已经可以独立完成的任务，如学会了象棋棋子的摆法；下一步是通过他人的教学和协助，学会了象棋的规则，每一个子的走法，判定胜利的规则；在最近发展区之后，是人即便依靠他人的协助也无法完成的任务，如一个刚学会象棋棋子的摆法，还没有进入最近发展区学习象棋规则的人，让他去参加比赛拿奖。最近发展区告诉我们，在教学的时候，要先教学仅依靠他人的帮助才能独立完成的任务，而不是即使依靠他人的帮助也无法完成的任务。</p>\n<p>玛西亚认为，自我同一性的实现有两个维度，承诺和探索。承诺是我知道了我要成为什么样的人，探索是经过了一系列尝试。</p>\n<ul>\n<li>无承诺无探索：同一性迷乱</li>\n<li>有承诺无探索：父母想让我 xxx，于是我\nxxx，但我不知道为什么要这样：同一性早闭</li>\n<li>有探索无承诺：内心斗争，同一性延迟：同一性危机</li>\n</ul>\n<p>埃里克森把人心理的发展分为八个阶段，每一个阶段有他预期所达到的效果，而为了达到这些效果，必须要解决一对矛盾。如果矛盾没有被解决的话，就会产生问题，并滞留到下一个阶段里。在下一阶段若出现上一阶段的问题，称为退行。这八个阶段的右端点大致成一个等比数列：1.5，3，5，11，青春期结束\n21，40，65。它的分界线是模糊的，因人而异。</p>\n<p>婴儿前期的特点是，如果妈妈离开了就会哭，因为孩子还没有发展出客体恒常性，认为妈妈离开了就是永远地离开了。是基本信任和不信任的冲突。关键是要获得身体接触。</p>\n<p>埃里克森的第二个阶段和第三个阶段有什么区别：第二个阶段是自主对羞耻的冲突，获得意志品质，有对自己身体的控制权，我能自己做一些事情；第三个阶段是主动对内疚的冲突，获得目标品质，我知道我为什么要做这些事情。</p>\n<p>1.5 至 3 岁的婴儿后期：我能自己做；3 至 6\n岁的幼儿期：我知道我为什么要这样做；6 至 12 岁的童年期：我能一直做。</p>\n<p>婴儿的气质：按婴儿对外界刺激的反应程度，如果反应不大，有正面的情绪，称为容易型；如果反应激烈，称为困难型；如果反应很小，称为弛缓型。</p>\n<p>加德纳的多元智能理论提出 8\n种智能：语言，逻辑 - 数学，空间，肢体 - 动觉，音乐，人际，内省，自然观察。这包含了我们日常所说的情商</p>\n<h2 id=\"社会心理学-1\">社会心理学</h2>\n<p>社会心理学的三个阶段是，启蒙期，形成期和确立期。启蒙期从古希腊哲学家的思辨到\n19 世纪上半叶（1879 年科学心理学诞生）。形成期的末端是 1908\n年，麦独孤的《社会心理学导论》和罗斯的《社会心理学》出版，标志着社会心理学诞生和形成。1924\n年，奥尔波特的《社会心理学》出版，这第三本书确立了实验法的核心地位，从它之后就是第三个阶段。想 - 看 - 测。</p>\n<p>社会行为是人对社会因素所引起的，并对社会造成影响的反应和反应系统。</p>\n<p>社会行为公式：Behavior = f (Person, Environment)\n由勒温提出。人的行为是其个人因素与其所处环境因素相互作用的一个函数。</p>\n<ul>\n<li>生物理论，遗传和本能。麦独孤提出 12 种本能。</li>\n<li>条件反射：社会学习理论 (行为主义)：连结 (条件反射的建立)、强化 (条件反射的重塑) 和模仿。外归因，不关注当时的主观情绪</li>\n<li>经济，诱因理论</li>\n<li>认知理论：取决于对社会情境的知觉和加工过程</li>\n</ul>\n<p>社会心理是社会刺激和社会行为之间的中介过程，是由社会因素所引起并对社会行为具有引导作用的心理活动。</p>\n<p>生活的意义有四个：自主、完成自己的目标和别人分配的任务、建立关系、自尊（认识自己，对自己有积极的评价）。、</p>\n<hr>\n<p>社会化和自我概念</p>\n<p>社会化是指，让一个社会成员具有以下四点：技能、规范、目标和角色。社会化的载体有家庭、学校、参照群体、大众传媒。</p>\n<p>自我概念是指个体如何看待自己，类似詹姆士的客我。行动由主我发起，由客我控制。</p>\n<p>构建自我概念的四条路：自己的行为、他人的行为、与别人比较、自己的反省。</p>\n<ul>\n<li>自我觉知：注意在自己身上。包括内在自我觉知和公众自我觉知。</li>\n<li>自尊：个体对其社会角色自我评价的结果，与情绪相关。杨国枢等人把自尊分为四种取向：个人取向、他人取向、关系取向、家族或团体取向。詹姆士认为自尊\n= 成功 / 抱负。</li>\n<li>自我提升：收集和解释自己的信息，以一种倾向于对自己做出正面评价的方式。</li>\n<li>自我确认：找证据来证实自我概念。</li>\n<li>自我效能：我有能力完成某件事。</li>\n<li>自我障碍：提前准备的用来解释失败的行为。</li>\n<li>自证预言：罗森塔尔效应，自己对他人的期望会影响他人的行为。</li>\n<li>自我检控：根据他人的自我表演来调整自己的自我表演</li>\n<li>自我表演的六种策略：只展示正面信息、显示自己的正直让他人内疚、谦虚、恳求、恫吓、逢迎。</li>\n</ul>\n<p>自我偏差：</p>\n<ul>\n<li>焦点效应：聚光灯打在我身上；透明度错觉：别人能看出来我隐藏的情绪</li>\n<li>自利偏差：我比别人好</li>\n<li>虚假一致性：别人和我的想法一样；虚假独特性：我是超乎寻常的</li>\n<li>盲目乐观：如在玩含运气成分的游戏时，如打牌，认为下一把会拿到好牌</li>\n</ul>\n<hr>\n<p>社会知觉与归因</p>\n<p>分类以原型为基础，分类后可能会夸大类内的相似性，以及类间的差异性。</p>\n<p>个人知觉是指，根据获取的有限信息，如情绪，形成对某个人的印象：</p>\n<ul>\n<li>第一印象包括好坏、能力强弱、主被动这三个维度。</li>\n<li>整体印象包括平均模型、累加模型、加权平均模型。多数人使用中心品质模型，只关注几个主要的点，忽略次要的点</li>\n<li>晕轮 / 负晕轮效应：一个高分 / 低分项会影响其他项</li>\n<li>正性偏差：总分为正。因为自己心情好，或者认同对方。</li>\n</ul>\n<p>刻板印象是指人们通过自己的经验对某类人或事形成的较为固定的看法。在有限经验的基础上形成的刻板印象有消极的作用，会造成偏见和歧视。</p>\n<p>罗特提出控制点理论：内控者认为事情的结果取决于自己的努力程度，控制点在内部；外控者认为事情的结果取决于自己不能控制的各种力量，控制点在自己之外。</p>\n<p>为什么说对可控因素的归因，人们更可能对行为做出变化的预测；对不可控因素的归因，人们较可能对未来的行为做出准确的预测：</p>\n<ol type=\"1\">\n<li>控制 -&gt; 变，不控制 -&gt; 不变</li>\n<li>不变 -&gt; 和上一次一样 -&gt; 准确的预测</li>\n<li>不可控 -&gt; 不控制</li>\n</ol>\n<p>影响归因的主要因素包括：社会视角，当事人和旁观者对当事人的归因有偏差；观察位置，在不同空间位置下，会倾向于关注凸显出来的信息；时间因素，对过去很久的事件倾向于归因到背景；</p>\n<p>基本归因错误：他人成功和失败时都倾向于内归因，是因为他自己，不是因为环境。</p>\n<p>把自己的失败外归因，把他人的失败内归因都是一种自我价值保护的倾向，动机性的归因偏差。</p>\n<p>凯利三维归因理论：高特异性是一对一，低特异性是一对多；高共同性是多对一，低共同性是少对一；高一致性是在以前发生过，低一致性是在以前没有发生过。这是一个经验的模型，百分比为实验结果</p>\n<ul>\n<li>三高归于刺激客体（61%）：小明是春晚现场的观众，他只对节目 A\n笑了，其他观众也对节目 A 笑了，且小明看春晚重播的时候还是对那个节目 A\n笑了，这说明小明笑的原因是因为那个节目 A 有意思。</li>\n<li>低低高归于行为主体（86%）：小明是春晚现场的观众，他对节目 A\n笑了且对其他很多节目也笑了，但是其他观众对节目 A\n都没有笑，且小明看春晚重播的时候还是对那个节目 A\n笑了，这说明小明笑的原因是因为他笑点低。</li>\n<li>高低低归于情境（72%）：小明是春晚现场的观众，他只对节目 A\n笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候对节目 A\n也没有笑，这说明小明笑的原因是因为他只在那个环境下想笑。</li>\n</ul>\n<hr>\n<p>他人在场</p>\n<p>扎荣克的优势反应强化说认为，当他人在场的时候，优势反应受激发，弱势反应受抑制。即熟悉的事情做得更好，不熟悉的事情做得更差。</p>\n<p>从责任分担的角度看：在多人共同完成一件任务时，单人付出的努力可能比单独完成时偏少，因为被评价的焦虑变小了，这叫社会懈怠或社会逍遥。解决方法是加强考核，把每个人努力的成果量化。旁观者效应：他人在场对利他行为有负面影响。如在公交车上互相等别人先让座。</p>\n<p>社会促进：他人在场也可能起激励作用，如朋友之间。</p>\n<p>从众是在真实或想象的群体压力下，被动地接受群体影响，自愿地与群体保持一致。若思想和行为都一致，称为真从众；若思想一致，但行为不一致，称为反从众；最常见的是行为一致，但思想不一致，称为权益从众。阿希做过从众实验，从众会受到群体压力的影响，在情境模糊、难做出判断时也会受到影响。</p>\n<p>模仿是在没有压力的情况下，自己有意或无意地受他人的影响使自己与他人相同或相似。塔尔德模仿律：下降律是从社会上层向下层扩散，下层有模仿上层的倾向；几何级数律是传播的速度，类似指数函数；先内后外律是先模仿自己文化圈子内部的。</p>\n<p>暗示是在非对抗的条件下，使被暗示者接受暗示者的观点，或者使其行为调整为与暗示者所期望的一致。如果成功了称为暗示，如果效果相反，称为反暗示。暗示的客体可能是模仿或从众的主体。</p>\n<hr>\n<p>态度</p>\n<p>态度是个体对特定对象总的评价和稳定性的反应倾向。个体：说明态度是一个人的；</p>\n<p>特定对象：如对人，事，物，观念总的评价。说明态度总是指向一个对象，没有无对象的态度。而价值观是没有直接和具体的对象的，价值观是抽象的。</p>\n<p>稳定性：说明态度在形成之后会持续一段时间。这个时间或长或短，类似发展心理学的分阶段和不分阶段的对立统一，分阶段是为了便于研究。</p>\n<p>反应倾向：说明态度不是反应，它是在反应表现出来之前的。态度影响，而非决定行为。方向分正向和负向，正 / 负的倾向有强度，外露的程度称为外显度，卷入的程度称为深度，接近核心价值的程度称为向中度。</p>\n<p>凯尔曼认为，态度的形成，分依从，认同和内化三个阶段。依从是一种权益之计，在外显行为方面表现地与他人一致，是印象管理的策略；认同是自愿的与他人一致，情感或吸引力占主要作用；内化是在内心真正相信并接受他人的观点，理智占主要作用。</p>\n<p>态度的转变：</p>\n<ul>\n<li>海德平衡理论有三个对象\nPOX，即主体、他者和另一个对象。当这三者间的关系为三正或两负一正时为平衡状态，否则为不平衡状态，处于不平衡状态时会由费力最小原则向平衡状态转化。</li>\n<li>霍夫兰德态度转变模型四要素：发送者、信息、接收者、情境。情境不等于信道，可能是指接受者的心理状态\n<ul>\n<li>从发送者来说，如果发送者对接收者的威信高，在信息差异较大时说服效果好；反之，在信息差异适中时说服效果好</li>\n<li>从信息来说，信息能引起的畏惧程度 - 说服效果曲线为 ∩\n型。面对面口头交流的效果 &gt; 书面交流的效果。</li>\n<li>从情境来说，信息重复次数 - 说服效果曲线为 ∩ 型</li>\n</ul></li>\n</ul>\n<p>态度的 ACB\n模型是情感（Affection）、认知（Cogntion）、行为倾向（Behavioral\ntendency），在成分不均的时候，通常 A 占主要地位。</p>\n<hr>\n<p>关系</p>\n<p>人际关系是指人与人在沟通与交往中建立起来直接的心理上的联系。反映它的深度的一个指标是自我暴露的程度，从浅到深分四个阶段：兴趣爱好、态度、自我概念和其他的人际关系、隐私。隐私指的是不愿意让他人知道的，且不危害社会的个人的秘密。</p>\n<p>人际吸引是个体与他人之间情感上互相亲密的状态，是人际关系上的一种肯定形式，分亲合（合群），喜欢和爱情。亲合的早期表现是亲子间的依恋。</p>\n<p>夫妻和未婚子女组成的家庭为核心家庭，如父母和正在上小学的孩子；夫妻和一对已婚子女组成的家庭为主干家庭，如爷爷奶奶和父母；夫妻和两对及以上的已婚子女组成的家庭为联合家庭，如外公外婆和父母、舅舅、舅妈。</p>\n<hr>\n<p>沟通</p>\n<p>沟通的结构包括发送者，接受者，信息，通道（信息的载体），背景，障碍，反馈（把对方发送的信息回传一些，确定理解了）。</p>\n<p>在沟通双方的角色互相都明确时，称为现实沟通。角色不明确时称为虚拟沟通。如在互联网上，陌生的网友之间互发消息属于是虚拟沟通，但熟悉的网友之间互发消息属于是现实沟通。</p>\n<p>此站点是一种单向沟通，书面沟通的方式，是通道的一种，也是障碍的一种。但是如果有人给我提意见，我改了，也是双向沟通。</p>\n<hr>\n<p>角色</p>\n<p>角色分类的方式有：</p>\n<ul>\n<li>获取方式（先天 - 后天努力，如母亲和教师）</li>\n<li>自觉性（演员角色 - 性别角色）</li>\n<li>社会功能（表现型 - 功利型，公平 - 效率，如学者和企业家）</li>\n<li>开放程度（规定型 - 开放型，如警察和朋友）</li>\n</ul>\n<p>角色失调按严重程度分四类：角色冲突、角色不清、角色中断、角色失败。</p>\n<p>在同一个角色内，不同人对其不同期望造成的冲突称为角色内冲突。同一个人在不同角色间的冲突称为角色间冲突，如职业角色和家庭角色，某个时间用来工作还是育儿。</p>\n<h2 id=\"人格和自我\">人格和自我</h2>\n<p>人格帮助解决回答的问题是我是谁，可以在心理过程中得到表现。</p>\n<ul>\n<li>人格在遗传和环境的交互作用下形成，每个人的人格都是独一无二的。人格独特性中，典型性和差异性的区别是\n1 和 2 的区别。</li>\n<li>经常表现出来的心理与行为特点才算是人格的一部分，而偶尔表现出来的不算，这说明人格是可以被改变的。</li>\n<li>用 UML 类图表示，人格的组成元素 ——◆\n人格，它们是组合关系。就像发动机 ——◆\n汽车，发动机是汽车的一部分，且如果把发动机拆下来了，汽车就跑不了了。人格统合性的组织功能是架构师，匹配功能是适配器，健康功能是生命力。</li>\n</ul>\n<p>自我概念是指对自己的认知。它保持内在一致性（类似人格的统合性），决定个体对内和对外的期待，解释经验（在萨提亚冰山模型里处于最底层）</p>\n<p>男女在人格特征方面的差异，称为性别；在生物学上的差异称为性；社会对其的期待称为性别角色。从汉字来看，忄与心理活动有关，所以 “性” 就是 “与生存相关的心理活动”。</p>\n<p>孟子认为人是性善的，告子认为人是无善无恶的：</p>\n<blockquote>\n<p>告子曰：“性犹湍水也，决诸东方则东流，决诸西方则西流。人性之无分于善不善也，犹水之无分于东西也。”<br>\n孟子曰：“水信无分于东西。无分于上下乎？人性之善也，犹水之就下也。人无有不善，水无有不下。今夫水，搏而跃之，可使过颡；激而行之，可使在山。是岂水之性哉？其势则然也。人之可使为不善，其性亦犹是也。”<br>\n——《孟子・告子上》</p>\n</blockquote>\n<p>荀子认为人是性恶的：</p>\n<blockquote>\n<p>人之性恶，其善者伪也。（善良的人是通过后天努力达到的）<br> ……<br>\n孟子曰：“人之性善。” 曰：是不然。<br> ——《荀子・性恶》</p>\n</blockquote>\n<p>世硕认为人是有善有恶的：</p>\n<blockquote>\n<p>周人世硕，以为 “人性有善恶，举人之善性，养而致之则善长；性恶，养而致之则恶长”。如此，则性各有阴阳，善恶在所养焉。故世子作《养书》一篇。密子贱、漆雕开、公孙尼子之徒，亦论情性，与世子相出入，皆言性有善有恶。<br>\n——《论衡・本性》</p>\n</blockquote>\n<p>下面这个表格不一定准确，只是一个初步的总结，它的内容大于形式，表身大于表头：</p>\n<table>\n<colgroup>\n<col style=\"width: 4%\">\n<col style=\"width: 36%\">\n<col style=\"width: 38%\">\n<col style=\"width: 21%\">\n</colgroup>\n<thead>\n<tr>\n<th></th>\n<th>守序</th>\n<th>中立</th>\n<th>混乱</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>善良</strong></td>\n<td>霍妮的真实自我，是灵性和慧根，是可能的最好结果，只要环境适宜就能表现出来</td>\n<td>阿德勒认为人生而有自卑感，所以人格发展的目标是追求卓越</td>\n<td>弗洛伊德的超我，是压力，提供责任感和负罪感</td>\n</tr>\n<tr>\n<td><strong>中立</strong></td>\n<td>弗洛伊德的自我，是本我、现实和超我三方面的调节者</td>\n<td>霍妮的现实自我，是别人在当下看到的，自己在当下表现出来的</td>\n<td>拉康的 $，人的欲望都是大他者的欲望</td>\n</tr>\n<tr>\n<td><strong>邪恶</strong></td>\n<td>荣格的阴影，是每个人都有的</td>\n<td>霍妮的理想自我，是一种防御的方式，是对缺少东西的投射，会产生不符合实际的期望</td>\n<td>弗洛伊德的死本能</td>\n</tr>\n</tbody>\n</table>\n<p>机能主义的代表人物詹姆士提出主我和客我：主我是进行中的意识流，是动力；客我是对自己的认知和评价，制约主我活动。符号互动论的米德沿用了他的说法，客我是社会我，自我是主我和客我互动的结果。哈特认为，在\n8 个月之内婴儿还没有萌发自我意识，在 1 岁前后出现了主体我的意识，在 2\n岁前后出现了客体我的意识，主体我表现为可以把自己和别人分开，客体我表现为可以使用第一人称代词 “我”，并能从照片中认出自己。</p>\n<p>詹姆斯还把自我分为了物质自我、社会自我和精神自我。物质自我是肉体，以及 “一切我们称之为自己独有的东西”，包括属于自己的物品。社会自我是社会角色，在不同场合和关系下表现出来的自我。精神自我分为主我和客我，也可以被其他精神分析理论细分。</p>\n<p>镜我是由他人的判断所反映的自我概念。镜我和客我的区别是，前者是他人的判断，后者是自己的判断。</p>\n<p>科斯塔和麦克雷提出大五人格 OCEAN：O 是开放，C 是尽责\nConscientiousness，E 是外向，A 是宜人 Agreeableness ，N 是神经质\nNeuroticism （情绪不稳定）</p>\n<p>A/B 型人格为竞争 / 松弛型人格。</p>\n<p>希波克拉底按外向 - 情绪不稳定程度把气质分为四个象限：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      |N</span><br><span class=\"line\">抑郁质|胆汁质</span><br><span class=\"line\">------+-----E</span><br><span class=\"line\">黏液质|多血质</span><br><span class=\"line\">      |</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"量表\">量表</h2>\n<p>艾森克人格问卷：是艾森克及其夫人制定的。EPQ 分 EPNL 四个量表。E\n是内外向，得分高是外向的；P\n是精神质，得分高的可能是孤独、敌意、不适应环境的；N\n是神经质，得分高的可能是情绪不稳定的；L 是说谎。典型、倾向和中间的四个 T\n分点：38.5 43.3 56.7 61.5</p>\n<p>自评量表：</p>\n<p>SDS：53-62 为轻度抑郁，63-72 为中度抑郁，73 及以上为重度抑郁</p>\n<p>SAS：50-59 为轻度焦虑，60-69 为中度焦虑，70 及以上为重度焦虑</p>\n<p>卡氏 16PF：是卡特尔制定的，他 1890\n年发布了《心理测验与测量》的论文。16PF 是 16\n种互相独立的根源特质，根源特质和表面特质的区别是，前者是有解释性的，可决定人的行为。1-3\n为低分，8-10 为高分。答题形式为折中是非式：是、否、不一定。</p>\n<h3 id=\"明尼苏达多相人格测验\">明尼苏达多相人格测验</h3>\n<p>统计学家 George Box\n说：所有模型都是错的，有些是有用的。这里展示的是对于明尼苏达多相人格测验（Minnesota\nMultiphasic Personality\nInventory）的一系列判断题，回答是或否对最终结果的影响。依据是<a href=\"https://zhuanlan.zhihu.com/p/600297840\">知乎网友 aweeee</a> 分享的\n<code>xlsx</code> 文件。</p>\n<p>在编制这个量表的过程中采用了正常与异常两组受测者的样本。可用于辅助医疗诊断，也可用于正常人的个性评定。</p>\n<p>测试过程为：</p>\n<ol type=\"1\">\n<li><p>做一道判断题，回答是或否</p></li>\n<li><p>答完一道题之后，对某一个或者某几个量表加 1 分或不加分</p></li>\n<li><p>答完所有题之后，会得到十四个分，包括四个效度量表（Q L F\nK）和十个临床量表（Hs D Hy Pd Mf Pa Pt Sc Ma\nSi）。这十四个分称作原始分。如果你做的是 566\n道题的，额外会有五个附加量表（MAS Dy Do Re Cn），且 566 道题里有 16\n个重复的题。笔者做的都是两百道题的，只有这十四个分。</p></li>\n<li><p>特别地，对这五个临床量表加上一定比例的 K 分，加完之后的称为 K\n校正分</p>\n<ul>\n<li>Hs += 0.5K</li>\n<li>Pd += 0.4K</li>\n<li>Pt += 1.0K</li>\n<li>Sc += 1.0K</li>\n<li>Ma += 0.2K</li>\n</ul></li>\n<li><p> 现在我们有十四个分。对除 Q 之外的十三个分分别计算 T 分：</p>\n<p><span class=\"math display\">\\[\nT = 50 + \\frac {10 \\times (你的得分 - 常模均值)}{常模标准差}\n\\]</span></p>\n<p>其中，常模均值和常模标准差由你的国籍、性别和年龄范围选择。常模均值是一群正常人（健康人）做的平均分，用你的得分与其相减，刻画的是你与正常人的偏离程度；常模标准差刻画的是这一群正常人得分的离散程度，用其作分母，可以缩小误差。</p></li>\n<li><p>一些医院的心理 CT 系统用的就是这个量表。根据计算出来的分，把 100%\n的概率分成三份，分到三个类里边：正常、焦虑抑郁障碍、精神病性障碍。</p></li>\n</ol>\n<p><strong>四个效度量表，测你做的结果是否有效：</strong></p>\n<p>Q：（Question）【疑问】：你没有回答的题目数。22/399 或\n30/566，则该答卷无效。</p>\n<p>在实际测验中，与 “性” 有关的几个题目可以选择跳过回答。其他题目必须回答。</p>\n<p>L：（Lie）【说谎】：你往圣人方向靠的程度。L\n原始分若超过十分，则不能信任结果。</p>\n<p>例如</p>\n<blockquote>\n<p>做游戏的时候，我只愿赢而不愿输</p>\n</blockquote>\n<blockquote>\n<p>偶尔我会想到一些坏得说不出口的事</p>\n</blockquote>\n<blockquote>\n<p>有时我也讲假话</p>\n</blockquote>\n<p>等的这一些问题，回答【否】会加分</p>\n<p>F：（Validity）【诈病】：你装病的程度，或者判断力丧失的程度</p>\n<p>例如</p>\n<blockquote>\n<p>有人一直想毒死我</p>\n</blockquote>\n<blockquote>\n<p>有时我觉得有鬼神附在我身上</p>\n</blockquote>\n<blockquote>\n<p>我能在我周围看到其他人所看不到的东西、动物和人</p>\n</blockquote>\n<p>等的这一些问题，回答【是】会加分</p>\n<p>K：（Correction）【校正】：你对自己的私事隐瞒的程度、防御的程度</p>\n<p>例如</p>\n<blockquote>\n<p>当我正在做一件重要事情的时候，如果有人向我请教或打扰我，我会不耐烦的</p>\n</blockquote>\n<blockquote>\n<p>我觉得许多人喜欢夸大自己的不幸，以便得到别人的同情和帮助</p>\n</blockquote>\n<blockquote>\n<p>我不在乎别人对我有什么看法</p>\n</blockquote>\n<p>回答【否】会加分</p>\n<blockquote>\n<p>我几乎没有和家里人吵过嘴</p>\n</blockquote>\n<p>回答【是】会加分</p>\n<p><strong>十个临床量表：</strong></p>\n<p>Hs：（Hypochondriasis）【疑病】：你对自己身体过度关心的程度</p>\n<p>例如</p>\n<blockquote>\n<p>我的胃口很好</p>\n</blockquote>\n<blockquote>\n<p>我睡得不安，容易被惊醒</p>\n</blockquote>\n<blockquote>\n<p>我的身体和我的大多数朋友一样地健康</p>\n</blockquote>\n<blockquote>\n<p>我常觉得头上好象有一根绷得紧紧的带子</p>\n</blockquote>\n<blockquote>\n<p>我不容易疲倦</p>\n</blockquote>\n<blockquote>\n<p>有时候我觉得我的头顶一碰就疼</p>\n</blockquote>\n<p>问的都是与你身体相关的，如果你给的反常回答太多了：</p>\n<ul>\n<li>如果你说的是实话：说明你确实有这些症状，说明你很反常</li>\n<li>如果你说的一半是实话：说明你在过度关心得病，说明你很反常</li>\n<li>如果你说的是假话：说明你在诉苦，说明你很反常</li>\n</ul>\n<p>D：（Depression）【抑郁】：你抑郁的程度</p>\n<p>前 200 道题里，有 44\n道题涉及对【抑郁】这一项加分。笔者有一次抑郁的得分是\n22，最终【正常】的概率在 90% 以上，另一次得分\n38，【焦虑抑郁障碍】的概率在 90%\n以上。说明这是一个参量。我们来关注几个同时对其他很多参量造成影响的题目：</p>\n<blockquote>\n<p>我发现我很难把注意力集中到一件工作上</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【抑郁】【癔病】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】加一分</li>\n<li>如果回答【否】：【支配性】加一分</li>\n</ul>\n<blockquote>\n<p>我希望我能像别人那样快乐</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【抑郁】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】【依赖性】【控制力】加一分</li>\n</ul>\n<blockquote>\n<p>我经常是快乐的</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】【癔病】【精神病态】【偏执】【外显性焦虑】【依赖性】加一分</li>\n</ul>\n<blockquote>\n<p>许多时候，我觉得浑身无力</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【疑病】【抑郁】【癔病】【精神衰弱】【依赖性】加一分</li>\n</ul>\n<p>Hy：（Hysteria）【癔病】：你天真幼稚外露的程度</p>\n<p>前 200 题中答【是】加分的有 11 道，有 4 道同时对【疑病】加分，另外 7\n道所描述的症状比【疑病】更反常、更 “躯体化”、不属于健康人应有的，例如：</p>\n<blockquote>\n<p>我的喉咙里总好象有一块东西堵着似的</p>\n</blockquote>\n<blockquote>\n<p>我觉得我的头到处都疼</p>\n</blockquote>\n<blockquote>\n<p>每星期至少有一、二次，我突然觉得无缘无故地全身发热</p>\n</blockquote>\n<p>答【否】加分的有：</p>\n<blockquote>\n<p>我喜欢看报纸上的犯罪新闻</p>\n</blockquote>\n<blockquote>\n<p>当一个罪犯可以通过能言善辩的律师开脱罪责时，我对法律感到厌恶</p>\n</blockquote>\n<blockquote>\n<p>我喜欢侦探小说或神秘小说</p>\n</blockquote>\n<blockquote>\n<p>看到血的时候，我即不怕，也不难受</p>\n</blockquote>\n<blockquote>\n<p>有时我真想骂人</p>\n</blockquote>\n<p>Pd：（Psychopathic\ndeviate）【精神病态】：你过分社牛、反社会、攻击性的程度</p>\n<p>答【是】加分的有：</p>\n<blockquote>\n<p>我从未有过正常的生活</p>\n</blockquote>\n<blockquote>\n<p>假如不是有人和我作对，我一定会有更大的成就</p>\n</blockquote>\n<blockquote>\n<p>和别人的家庭比较，我的家庭缺乏爱和温暖</p>\n</blockquote>\n<blockquote>\n<p>我小的时候，有一段时间我干过小偷小摸的事</p>\n</blockquote>\n<p>答【否】加分的有：</p>\n<blockquote>\n<p>我过去喜欢上学</p>\n</blockquote>\n<blockquote>\n<p>在聚会当中，尽管有人出风头，如果让我也这样做，我会感到很不舒服</p>\n</blockquote>\n<ul>\n<li>Mf：（Masculinity-femininity）【男女子气】：你向你相反方向的性别靠的程度</li>\n<li> Pa（Paranoia）【妄想】：你过分多疑和警惕的程度</li>\n<li> Pt（Psychasthenia）【精神衰弱】：你过分紧张、焦虑、恐怖的程度</li>\n<li> Sc（Schizophrenia）【精神分裂】：你思维混乱、情感淡漠、行为怪异的程度</li>\n<li> Ma（Hypomania）【轻躁狂】：你过分气质昂扬，思维飘逸，爱说的程度</li>\n<li> Si（Social introversion）【社会内向】：你内向的程度</li>\n</ul>\n<p><strong>五个附加量表：</strong></p>\n<ul>\n<li>MAS【外显性焦虑】：你完成不了复杂工作的程度</li>\n<li> Dy【依赖性】：你的心理不适应环境的程度</li>\n<li> Do【支配性】：你主导和面对现实的能力</li>\n<li> Re【社会责任感】：你愿意为你的行为负责的程度</li>\n<li> Cn【控制力】：你对你病理性表现的控制能力</li>\n</ul>\n<p><strong>一些有意思的题目：</strong></p>\n<p>从这一些题目，以及前面提到的题目，我们可以揣摩出题者的意图，从而反推出健康人的标准。</p>\n<blockquote>\n<p>有时，当我难为情的时候，会出很多汗，这使我非常苦恼</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【外显性焦虑】加一分</li>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>我知道我的烦恼是谁造成的</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【精神病态】【妄想】【轻躁狂】加一分</li>\n</ul>\n<blockquote>\n<p>我相信善有善报，恶有恶报</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【依赖性】加一分</li>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>我觉得大多数人是为了向上爬而不惜说谎的</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【癔病】和【妄想】加一分</li>\n</ul>\n<blockquote>\n<p>一切事情都由老天爷安排好了</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【社会责任感】加一分</li>\n<li>如果回答【否】：【抑郁】和【控制力】加一分</li>\n</ul>\n<blockquote>\n<p>我几乎每星期都去教堂 (或常去寺庙)</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<p>因为 MMPI 是由美国人制定的，两国的文化习俗不同。中国常模的 D 分和 Sc\n分都比西方常模高，其他的比西方常模低。类似的还有：</p>\n<blockquote>\n<p>我相信人死后还会有 \" 来世”</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【诈病】【男女子气】加一分</li>\n</ul>\n<blockquote>\n<p>我的脑子有点毛病</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【诈病】和【精神分裂】加一分</li>\n</ul>\n<blockquote>\n<p>我的判断力比以往任何时候都好</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>在我一生中，我从来没有感觉到象现在这么好</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【校正】【抑郁】和【癔病】加一分</li>\n</ul>\n<h2 id=\"变态与健康心理学\">变态与健康心理学</h2>\n<p>参考《变态心理学（第 6 版）》9787115448385</p>\n<p>在生物学上，完全变态发育的昆虫如蚕，有卵、幼虫、蛹、成虫这四个 “态”。在心理学上的变态是指在常态之外的心理状态。变态心理学也叫心理病理学。心理异常的连续谱模型类似光谱，从红到紫，最左边是完全正常，最右边是完全异常，它的分界线是模糊的。</p>\n<p>幻觉是指不真实的感知体验，如看到猪在天上飞，而别人看不到。妄想是不切实际的信念，如认为自己是天下第一，无人能敌。</p>\n<p>历史上对心理障碍的解释有三类，生物学理论，超自然理论和心理学理论。生物学理论如古代的中医认为人体内精气的流通会影响情绪，气发于心则喜、发于肝则怒、滞于脾则忧、滞于肺则悲、滞于肾则恐。古希腊的希波克拉底认为人体内有四种基本体液，包括心理异常在内的所有疾病都可以用体液失衡来解释，治疗方法除了与现代的休息，放松，调整生活节奏外，还包括放血。超自然理论如道教和佛教认为邪风入体和鬼魂附体会让人着魔。精神时疫是一群人突然都出现了一致的异常行为，如\n1374\n年德国持续了四个月的疯狂舞蹈症，大街上，家里，教堂上都有一群人手拉手地跳舞，并呼喊一些魔鬼的名字，这被解释为魔鬼附体。直到\n1991\n年，罗得岛的一所高中在没有毒气存在的证据下，发生了集体一氧化碳中毒的症状，医生解释为是对海湾战争使用毒气的恐惧造成的集体癔病爆发。心理学理论认为心理异常是心理创伤和压力造成的。</p>\n<p>现在变态心理学的取向有生物学取向，心理学取向和社会文化取向。</p>\n<p>行为主义的巴甫洛夫认为，心理异常是神经兴奋和抑制之间的冲突，是 IO\n系统的故障，若兴奋占优，抑制占弱，则为神经衰弱，反之为癔症；精神分析认为，心理异常是因为发展阶段固着、人格内的冲突、防御机制不成熟，是操作系统的问题；人本主义认为，心理异常是自我完善路上的障碍，是软件升不了级了。马斯洛认为心理异常最基本的表现是存在焦虑，是存在（保证手机存储空间足够）和责任（必须装微信）之间的冲突。</p>\n<p>如何判定心理异常：</p>\n<ul>\n<li>从硬件的层面看，比如大脑在车祸后损伤了一部分，内存条氧化了，接触不良了，这叫医学标准。</li>\n<li>从操作系统的层面看，比如病人自己的感受是痛苦的，写了一些报错的日志；或者用户是痛苦的，觉得这电脑太卡了。这叫内省标准，分病人的内省和观察者的内省。</li>\n<li>从跑分和天梯图的层面看，比如小明做的心理量表的分太偏离常模了，这叫统计学标准。</li>\n<li>从应用功能的层面看，比如小明的微信没有打开自启动和消息弹窗权限，造成别人给他发消息他没有回复。这叫社会适应标准。</li>\n</ul>\n<h2 id=\"心理咨询相关\">心理咨询相关</h2>\n<p>心理咨询工作的对象有三类人：健康是正常的充分不必要条件。健康是在正常的前提下，描述正常的程度。</p>\n<ol type=\"1\">\n<li>精神高度正常，且高度健康的人</li>\n<li>精神高度正常，但低度健康的人</li>\n<li>痊愈及潜伏期精神低度正常的人</li>\n</ol>\n<p>严重的第三类人不属于心理咨询工作的对象。</p>\n<hr>\n<p>法律只规定了能做和不能做的基线水平，伦理的要求比法律高。</p>\n<p>为什么说道德是偏个人的，伦理是偏客观的，伦理是实践道德的人生哲学：道德：通往德的一条道；倫理：倫 = 亻 + 亼 + 冊 = 人 + 集 + 册，理 = 治玉。</p>\n<p>在心理咨询师与来访者的专业关系中，咨询师有保密的责任，即使来访者去世之后仍要保密。保密的例外情况有：</p>\n<ul>\n<li>自愿的：来访者自愿将信息泄露给他人，或希望用信息诉讼别人</li>\n<li>危及生命的：来访者有即刻给自己或他人造成生命危险的可能 / 生命尽头的来访者希望加速自身死亡 / 来访者患有危及生命的传染性疾病，且可能危及他人</li>\n<li>司法的：成文法对保密的限制（来访者虐待儿童或老年人，或来访者被虐待）/ 法庭要求提供信息 / 针对咨询师的诉讼</li>\n<li>部分国家的：来访者在未来有犯罪的倾向（部分国家和地区）</li>\n</ul>\n<h2 id=\"防御\">防御</h2>\n<p>参考《心灵的面具：101 种心理防御》</p>\n<p>防御是将不愉快情绪的组成部分从我们的意识觉察中剔除出去的工作。我们每个人都有这样的内在机制，以保护自己免受情绪上的伤害。自我的防御机制是当自我把焦虑当作是负面的信号时产生的，自我承受了本我欲望和现实要求的双重压力。</p>\n<p>心理学家 Charles Brenner\n提出，情绪由感受和想法组成。感受更加内向且抽象，而想法则更直接关联到行动上。不同的负面情绪反映了不同的时间焦点：</p>\n<ul>\n<li><a href=\"https://www.zdic.net/zd/zx/jg/%E6%8A%91\">抑</a><a href=\"https://www.zdic.net/zd/zx/jg/%E9%AC%B1\">鬱</a>：与过去有关，伴随着糟糕事情已经发生的念头。你在一个密集不透风的树林里，被人用手按着头跪下来。</li>\n<li>焦慮：着眼于未来，担忧坏事即将发生。一群原始人在山上猎到了几只隹。当他们正在生灬做饭的时候，突然出现了一只虍，把一个人的囟给掀开了，并把他的心吃了。</li>\n<li>愤怒：集中于现在，怀有摧毁某物或某人的冲动。</li>\n</ul>\n<p>为了处理这些情绪，人们会使用（情感）隔离和（思维）潜抑两种基本防御方式。此外，还有其他多种防御手段来辅助这两种基础操作，除了分裂。</p>\n<p>有意识防御和潜意识防御：你的潜意识在控制一天 24\n小时的呼吸，但你也可以通过意识控制一段时间。如果你在看到这些名词的解释之前就有类似的想法，那可能是偏向有意识的防御。如果这些名词提供了一个新的角度来解释你之前可能从来没有意识到的防御，那可能是偏向潜意识的防御。</p>\n<p>向外：</p>\n<ul>\n<li>投射：你是一台放映机，你把你心里的一些部分投射出来，扭曲了你对他人的感知。你为了不体验某种情绪，将它投射出去，站在别人的视角上幻想别人以这种情绪看待你。你在害怕你自己做出某件事，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在害怕你做出某件事。你在生别人的气，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在生你的气。\n<ul>\n<li>投射性指责：你对某些令人不悦的事负有责任，为了减轻负罪感，你指责另一个人。它的有意识版本叫 “将自我批评转向客体”</li>\n<li> 投射性认同：你向别人的脑海里扔石头，激起的波纹形状和你不喜欢自己脑海里的波纹形状一样。你诱导某人以你所期望的方式做出回应。</li>\n<li>点煤气灯：你脑子里的一团乱麻共振形成了别人脑子里的一团乱麻。你诱导某人以为自己的心理有问题。</li>\n</ul></li>\n<li>置换：一个人 A 带给你的不快情绪太多，你会在另一个人 B\n身上感受到。</li>\n<li>外化：你感受到自己心智的一部分属于自己之外。你认为某人会来谴责你，但这个某人是你自己。</li>\n</ul>\n<blockquote>\n<p>我只想知道属于我的是不是真的我的 还是由我替谁在保管着</p>\n</blockquote>\n<ul>\n<li>躯体化：你的身体在阻止你将某一违背你良心的愿望行动化。</li>\n</ul>\n<p>向内：</p>\n<ul>\n<li>内摄：你把别人的一部分纳入了自身，形成了另一个人的意象，作为一个情绪的靶子。你听了郭德纲的相声，以后当你情绪低落的时候，你会回想起他的形象。</li>\n<li>认同：\n<ul>\n<li>认同内摄物：你表现得像那一个人一样，那个人变成了你超我的一部分。你听了郭德纲的报菜名，以后当你自己报菜名的时候，你会模仿郭德纲的语气和断句方式。</li>\n<li>向攻击者认同：“踢猫效应” 的一部分或 “屠龙者变成龙” 的一部分：之前某个人\nA 以某种方式对待你，之后你用同样的方式对待另一个人 B</li>\n<li> 向受害者认同：为了缓解内疚情绪（比如你帮助不了某个受害者），你表现得像那个受害者那样并允许自己被伤害。</li>\n<li>认同丧失客体：你的某个至亲去世了。你表现地像他一样，象征性地维持着他的生命。</li>\n<li>去分化：自体 - 客体融合。你为了不感受到对失去某个人的恐惧，成为另一个人想让你成为的样子。</li>\n</ul></li>\n<li>转向自身：有自杀倾向的人不想感受对别人的愤怒，于是把对别人的愤怒转向自身。</li>\n</ul>\n<p>空中剧院：</p>\n<ul>\n<li>戏剧化：你为了让别人注意到你，在言语 / 行为中注入过多的情感。</li>\n<li>撤销和仪式化\n<ul>\n<li>撤销好的：做出一个违背你以前良心的事，证明你已经不是以前那个人。</li>\n<li>撤销坏的：你的良心在挣扎，于是你先做出一个违背良心的事（仪式），再做出一个遵循良心的事（仪式）来补偿前面的那件事，撤销了前面那件事。或者你有内疚感，于是做出一个仪式（可能是别人看起来很奇怪的事）来撤销内疚感。</li>\n</ul></li>\n<li>分裂：你无法接受一个复杂的人（“好的” 和 “坏的” 同时出现），将其分裂成了 “好的” 部分和 “坏的” 部分。你对某些人纯感受到 “好”、某些人纯感受到 “坏”。或者对同一个人某些时间纯感受到 “好”、某些时间纯感受到 “坏”。</li>\n<li>幻觉：你听到或看到不真实的想法。而这些想法是你努力不去想的。</li>\n<li>反客为主：你对某个糟糕事件的发生时间抱有疑虑，于是提前主动使该事件发生。</li>\n</ul>\n<p>披马甲：在日常生活中，我们常常披上各种 “马甲” 来掩饰真实的情感。</p>\n<ul>\n<li>假性独立：你对自己 “需要人帮助” 的想法感到窘迫，于是你不依靠任何人。</li>\n<li>病理性利他：你用帮助别人的形式为自己 “需要获得帮助” 的需求做一个代理。它继承自 “投射” 和 “向受害者认同”。通常和 “反向形成”、“受虐性挑衅”、“自大” 共存。</li>\n<li>反向形成：你对某个人很生气，但是你变得十分和善。</li>\n<li>对抗恐惧行为：你做一些让你感到害怕的事，来证明你不害怕。</li>\n<li>不认同：某个人带给你了某些东西，你努力表现地不像这个人。</li>\n<li>超理性：你使用次级过程思维（以时间为导向的逻辑思维）来回避情感。</li>\n<li>幽默：你通过开玩笑来造成一种轻松的氛围。</li>\n<li>最小化：这件事没什么大不了的。</li>\n<li>夸大：这件事对我来说太重要了。</li>\n<li>否认：为了缓解内心的冲突，你不去关注现实。\n<ul>\n<li>本质否认：这件事没有发生过</li>\n<li>行为否认：做出某件事来证明另一件事不是真的</li>\n<li>幻想否认：<a href=\"/blog/time.html\">时间记录</a></li>\n<li>言语否认：说相声</li>\n</ul></li>\n</ul>\n<p>注意转移：当面临难以解决的问题时，人们往往会选择将注意力转移到别处。无论是沉迷于工作，还是回到童年时的爱好，都是为了避开当前的压力源。</p>\n<ul>\n<li>去生命化：回避对方身上的某些特质，不把对方当作人类看待。比如德国鬼子、日本鬼子、纸老虎这些称呼。</li>\n<li>泛灵化：你把情感寄托到一个非人类的事物上，以对待人类的方式对待它。</li>\n<li>象征化：你赋予某个想法以特殊的意义。</li>\n<li>理智化：你用一套理论减去了情绪的感觉部分，剩下思维部分。比如：抑郁症是做问卷做出来的。</li>\n<li>合理化：与 “理智化” 的区别是：“理智化” 确实有理的，“合理化” 的是把无理的说成有理的。</li>\n<li>穷思竭虑：你过度分析以期望解决某个问题本身，这样你就不会感受到这个问题带给你的感受。</li>\n<li>以一种情绪对抗另一种情绪：你会以愤怒来对抗恐惧。</li>\n<li>时间退行：你表现得像你过去那样，为了规避思考现在的冲突。为了逃避期末大作业，你把之前玩的游戏下载下来又重新玩了一遍。</li>\n<li>时间上置换到未来：为了逃避期末大作业，你会规划暑假准备干什么。</li>\n<li>考试成绩拔尖：考试成绩拔尖符合社会要求，且很难与 “能力强” 区分开。你用考试成绩拔尖掩盖自己另一些方面能力不强的事实，即扬长避短。</li>\n<li>工作狂：注意力全部投入在工作上，类似用暴饮暴食来忘记一些什么事。</li>\n<li>地形学退行：你的意识退缩到了潜意识里，俗称睡大觉。</li>\n</ul>\n<h2 id=\"创伤心理学-1\">创伤心理学</h2>\n<p>参考施琪嘉《创伤 30 讲》《创伤心理学（2006）》</p>\n<h3 id=\"定义与实例\">定义与实例</h3>\n<p>心理创伤有两个要素：引发创伤的事件，和经历创伤后的结果。</p>\n<p>定义创伤性的事件有两个标准：危及生命的，或者突破以往内心信念的。</p>\n<p>创伤按事件来源可分为三类：自然的，人工的和人为的。自然的是一些来自自然界的不可抗力，如地震、山火、泥石流；人工的是由人所制作的工业产品所间接引发的，且非某人所有意而为之的，如矿难、车祸；人为的是由某人有意而为之的，如蓄意施虐。</p>\n<p>按复杂程度或形成时间，可分为泰尔 I 型和泰尔 II 型。泰尔 I\n型创伤为简单型创伤，是成年所经历的一次性的创伤，恢复时间较快；泰尔 II\n型创伤为复杂型创伤，通常是幼年时期形成的，恢复时间较慢，一般来说迟早会发作。</p>\n<p>在经历创伤之后，有 80% 到 90% 的人会自愈。有\n10%~20% 的人需要心理治疗来干预。</p>\n<p>没有没有创伤的人：婴儿在出生之前是在泡在羊水里的，肺泡没有打开，加上是一个失重的环境。在出生时母亲通过产道把羊水从婴儿的肺里面挤压出来，婴儿出生后的第一声哭就是为了呼吸，打开了肺泡，又受到了\n1 个 g\n的重力加速度，断了脐带后又要通过哺乳来获取养分。所以，对婴儿来说，出生就是一个重大的创伤。有一种说法是，我们之所以记不起来\n3\n岁之前的经历，可能是因为经历创伤之后断片了，即弗洛伊德的 “屏蔽记忆”。</p>\n<p>创伤的传递方式分水平传递和垂直传递，水平传递是传给同一辈人，垂直传递是通过家庭传递给下一代，分代际传递和隔代传递。代际传递是指上一代人所经历的痛苦的事件，没有被和解的事件通过非语言的形式传递给下一代。</p>\n<p>创伤的记忆表现形式有躯体化，噩梦和解离，解离是指通过一个扳机点，如一个词语激发了创伤。</p>\n<hr>\n<p>我父亲在上初中的时候，水壶被别人偷了，他是受害者，在面对老师的时候，他相当于把整个人缩进去了，完全屏蔽外界的信息，加上一句话都不回复。我在之前是不知道他的经历的，但是在高中的时候，一模一样地复刻了他的经历，就是在考试没写作文的时候。这就叫创伤的代际传递，是没有经过语言的方式传递给下一代的。如果他在之前给我说过了他的经历，事情可能就会有改变，我会更早一点地同情他。形成的原因可能是因为，我爷爷奶奶喜欢把他锁在屋里。</p>\n<p>我妈也是一样，她在之前上班的时候被一个人威胁了，让她做不属于她分内的工作，这个工作还是亲戚帮找的。但是直到离职的时候才给那个亲戚写信。在她换一个工作，做自我介绍的时候，也是满脸通红的。因为我妈小时候，给我婆婆提建议，结果婆婆不信任她，用棍子打她的脑袋。</p>\n<hr>\n<p>从拉康的角度理解创伤：创伤是被回溯性建构的，我们对创伤的解释随主人能指的变化而变化。笔者在听说 “社交恐惧” 这个词之前，压根不知道自己是什么问题，所以被诊断为 “抑郁症” 之后，只能抱着这个词不放。这就像婴儿在学会说话之前，只能用哭来表达需要，因为无词不达意。在没有别人给我的父亲做出 “内向” 的评价之前，我也觉得父亲是没什么问题的。但当我们要用它解释一个什么东西时，在创伤性事件发生当中的不愉快情绪可能是被我们有意地忽略的。</p>\n<h3 id=\"治疗方法\">治疗方法</h3>\n<p>建议找一个可靠的心理治疗师。</p>\n<p>遥控器技术：</p>\n<ol type=\"1\">\n<li>想象有一个投影仪，正在播放你以前的创伤经历，把它投射到了墙上</li>\n<li>用遥控器把投影仪关掉。</li>\n</ol>\n<p>保险箱技术：</p>\n<ol type=\"1\">\n<li>想象有一个保险箱</li>\n<li>这个保险箱的长宽高是多少？是什么材料做的？壁有多厚？内外壁是什么颜色？分格了还是没分格？</li>\n<li>这个保险箱的锁是什么类型的？门好打开吗？开关门有声音吗？你会怎么打开门？钥匙是什么样的？</li>\n<li>这个保险箱的锁足够坚固吗？如果不是，把它换成足够坚固的，直到破坏不开为止</li>\n<li>把保险箱的门打开，把给你带来压力的东西通通装进去，再关门锁住。</li>\n<li>把保险箱放到一个你觉得合适的地方，这地方不应该太近，在你力所能及的范围内尽量远一些。且你如果想找回的时候还可以找回</li>\n</ol>\n<p>安全岛技术：</p>\n<ol type=\"1\">\n<li>想象有一个绝对安全的小岛。这个小岛可以在你的心里，也可以在世界上的任何一个地方，只有你一人可以进去，你可以带一些东西。</li>\n<li>岛上的景色如何？你眼睛看到的让你感到舒服吗？如果是，就留在那里；如果不是，就变换一些，直到你真的感到很舒服为止</li>\n<li>你听到了什么？如上</li>\n<li>你的皮肤感觉如何？闻见了什么？肌肉如何？呼吸如何？腹部感觉如何？</li>\n<li>仔细体会你现在的感受，这样你以后再来到安全岛就会有类似的感受</li>\n<li>给自己设计一个躯体动作，可以是手势之类的。只要你在现实里做了这个动作，立马就能回到安全岛</li>\n<li>现在做一遍这个动作，并感受一下</li>\n</ol>\n<h2 id=\"认知行为疗法\">认知行为疗法</h2>\n<p>参考郭召良《认知行为疗法入门》《认知行为疗法进阶》。</p>\n<p>最简单的模型是：情境 → 认知 → 情绪 / 行为。亚伦・贝克的 T\n型 / 工型模型把认知拆成了三层：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">具体情境 → 自动思维 → 症状：情绪+行为</span><br><span class=\"line\">             ↑</span><br><span class=\"line\">          中间信念</span><br><span class=\"line\">             ↑</span><br><span class=\"line\">童年经历 → 核心信念 → 补偿策略</span><br></pre></td></tr></tbody></table></figure>\n<p>概念化是对于一个具体的案例，通过找出模型里每一个概念的具体内容，来理解来访者的问题。</p>\n<p>横向概念化类似于情绪 ABC 模型：Activating\nevents、Beliefs、Consequences</p>\n<p>纵向概念化：</p>\n<p><img src=\"/blog/images/CBT-3.webp\"></p>\n<h3 id=\"自动思维\">自动思维</h3>\n<p>自动思维是在特定情境下出现的自动的想法，是症状的直接原因。比如收到一个别人直接给出的建议，就认为是收到了指责、批评，进而产生愤怒的情绪。它是自动涌现的，且不一定是真的。收到了指责是想法，不一定是事实，别人可能没有指责的意思。</p>\n<p><img src=\"/blog/images/meme/速度比光快的代价.webp\"></p>\n<p>有效性是指自动思维符合事实的程度，有用性是指是否能达到预期目标。一个悲观且正确的自动思维，如别人确实是在指责自己，自己出现了愤怒的情绪，那么它是有效的，但是是无用的，因为你的预期目标是继续沟通下去。</p>\n<p>自动思维歪曲的类别分无效的、部分有效的、有效但无用的。无效的是没有证据，部分有效的是分别有正反的证据，有效但无用的是，有确凿的证据，但是对未来没有正面影响。种类包括：</p>\n<ul>\n<li>消极预测未来：它是有效但无用的</li>\n<li>灾难化（自己现在的处境太糟糕了）：它是有效但无用的</li>\n<li>以偏概全（只根据不利信息，没有看到有利的信息，进行消极的预测）：它是部分有效的</li>\n<li>读心术（无端揣测他人的想法）：它是无效的</li>\n<li>随意比较（没有分析具体的情况）：它是无效的</li>\n<li>过度引申（曾发生过的特殊事件会经常发生）：它是无效的</li>\n<li>任意推论（字如其人，字不好人就不好）：它是无效的</li>\n</ul>\n<p>自动思维的干预有识别、评估、评价和巩固应用四个环节。识别就是横向概念化，评估是给情绪和相信程度打分，评价是判断有效和有用的程度并形成新的替代思维，巩固是记住并在合适的时间运用替代思维。</p>\n<h3 id=\"中间信念\">中间信念</h3>\n<p>中间信念包括态度、假设和规则三个部分。</p>\n<ul>\n<li>态度（是、最担心的一种情况）：事件 A 发生是糟糕的。</li>\n<li>假设（如果）：如果事件 B 发生了，事件 A 就不会发生。B 通往非 A\n为积极假设的路，非 B 通往 A 为消极假设的路。</li>\n<li>规则（应该）：我应该让事件 B 发生</li>\n</ul>\n<p>态度和规则是表层的，假设是深层的。贝克认为只有假设是可以被检验的，需要找出消极假设的不合理之处。</p>\n<p>中间信念阶段的认知歪曲种类包括：</p>\n<ul>\n<li>情感推理：根据情绪推理。</li>\n<li>理想化：使用 “应该”、“必须”、“不能” 这些词，根据自己的主观愿望而不是实际情况对自己提出要求；</li>\n<li>最高标准：只关心超过自己的人；</li>\n<li>只内归因和只外归因；我现在这个性格，全是我咎由自取，或者全是由我的家人造成的。</li>\n</ul>\n<p>补偿策略是中间信念的一体两面，是为了遮掩负性核心信念。包括努力策略、回避策略（不做困难事）、顺从策略（随便你）、归因策略、警惕策略（过度未雨绸缪，夸大危险，低估自己处理问题的能力）、自弃策略（我有能力做，但是不想做）、自恋策略（民科）。</p>\n<p>回避策略的体现：</p>\n<blockquote>\n<p>● 求助是不好的（态度）；<br> ● 我要独立解决问题（规则）；<br> ●\n如果独立思考，就说明我是有能力的（积极假设）；<br> ●\n如果求助，就说明我是无能的（消极假设）<br></p>\n</blockquote>\n<p>和中间信念属于同一层次的如：防御。如：萨提亚提出四种沟通姿态：过度为别人的讨好姿态；过度为自己，找别人茬的责备姿态；回避情绪、他人和自己感受的超理智姿态（电脑）；回避压力、转移话题的打岔姿态（鸵鸟）。</p>\n<h3 id=\"核心信念\">核心信念</h3>\n<p>同一个核心信念，在不同的环境（如家庭和学校）会衍生出不同的中间信念，中间信念中的态度是核心信念在具体环境中的体现。</p>\n<p>核心信念阶段的认知歪曲种类包括：</p>\n<ul>\n<li>贴标签：我就是一个什么样的人。</li>\n<li>苦算命运：我这辈子就是没有希望的。</li>\n<li>后悔倾向：如果我过去没有经历某件事，我就不会是现在这样。</li>\n<li>拒绝相反证据：拒绝与自己消极想法矛盾的观点</li>\n<li>黑白思维：我从来没有取得过成功。</li>\n<li>低估正面信息：虽然 xxx 发生了，但还是 xxx</li>\n<li> 选择性负面关注：我只记得 xxx</li>\n</ul>\n<p><img src=\"/blog/images/meme/看夜空看什么.webp\"></p>\n<p>先不管微波炉为什么能联网，此事在<a href=\"https://music.163.com/#/song?id=20045625\">《Starless》</a>里亦有记载，有一版的歌词翻译很雅，叫 “无星夜里圣经黑”。</p>\n<h3 id=\"干预策略\">干预策略</h3>\n<p>分为两大类：解决问题，或者接纳问题的存在。后者认为，如果症状不重的话，可以带着症状去生活。</p>\n<p>认知改变策略：</p>\n<ul>\n<li>备选思维（分支）：在原来的自动思维之外另找一种思维。一件事可能会成功也会失败，给成功和失败的可能性各找几个证据。</li>\n<li>客观证据（实例）：找证据，不能用推理和分析来替代证据。</li>\n<li>苏格拉底式提问：支持你想法的证据，举出与你想法相反的证据。最糟糕的可能、最好的可能、最现实的可能分别是什么，每种可能的证据分别是什么</li>\n</ul>\n<p>行为改变策略：</p>\n<ul>\n<li>行为改变的目标：影响情绪、为认知改变提供证据。改变情境：情境引起自动思维，自动思维改变不了就改变情境，就是广义上的逃避问题。</li>\n<li>抑郁的特点是静止，焦虑的特点是回避。而行为改变策略直接要求反着来，对应的是行为激活和暴露。</li>\n<li>行为表演：假装自己完全相信新信念的情况下做出新行为，假戏成真。糟糕的结果不会唤起负性核心信念，因为是演戏不是真的，成功了就是真的，失败了就是假的。</li>\n<li>行为试验：假设检验两种方式：提两个对立的假设，或者对一个假设进行开放性探讨</li>\n</ul>\n<p>成长经验重构：回忆你以前经历过的某个创伤性的事件，然后再把它重新给经历一遍。在这次经历里，你可以基于你的想象，做出与之前不同的行为，然后别人也做出了不同的行为来回应你。最后你形成了一个正向的、错误的记忆，或者说不同解读方式的记忆，再把这个错误的记忆给记住，这样你以后回忆起的事件就是被改写过了一遍的事件。比如说受到某人体罚，在以前的负性核心信念是 “我这个人是\nxxx\n的”，修正后的信念是 “这个人想让我变得更好”，最后你通过一通说，在想象中和这个人沟通了，那个人也做出了和以前不同的行为，最后你们和解了。你以后回想起的记忆就是另一个版本的记忆了。</p>\n<p>关键点：给情绪命名。当时是什么样的情绪，再把自我否定的给淡化或者剔除掉。</p>\n<p>实现的方法有：把传记写出来，再修正传记。或者童年的我和成年的我进行对话，在以前的那个情境下某人做出了某个行为，想象自己应该怎么做才能使得那个人做出另外一种行为，双方行为前后的感受分别是什么。</p>\n<h2 id=\"客体关系与自体心理学\">客体关系与自体心理学</h2>\n<blockquote>\n<p>所有精神分析理论都关注在解说过去如何影响现在，以及病人内在世界如何歪曲并影响外在经验。</p>\n</blockquote>\n<p>以谷川流为什么写《凉宫春日的忧郁》为例子。在这本书里面，凉宫春日是一个期望可以影响现实的人。作者的代言人阿虚希望动画里的人物是真的，但认为现实里的圣诞老人是假的，对其无感，如何让动画人物出来，自己经历动画的剧情。古典弗洛伊德模式认为，是作者的本能、自我和超我之间存在冲突；客体关系理论认为，因为作者以前看的书和动画很多，所以脑子里有许多虚拟人物的形象（客体表象），这些形象给作者创造了一个幻想世界，但是幻想世界和现实世界是有落差的，最终导致作者把幻想世界写成书；自体心理学认为，作者追求的是一个全能客体，即凉宫春日，来弥补他自身的愿望。</p>\n<p>在一些哲学著作里面，一个人被称为主体。与主体相对的就是客体，客体是与某人有关系，但不完全属于这个人的东西，它与这个人的感受与需要相关，可以是一首歌，一个他人，或一件过去无法被和解的事。客体一词与关系连在一起时，指的是人际关系。当我们在和别人互动的时候，互动的对象并不仅仅是实际的他人，还包括一个他人的影子。这个影子可以是某个实际人物的扭曲版本，是一个内在他者。我们过去和重要他人的关系模式、过去关系的残留物会影响之后的人际关系。移情指的是，把过去和某一个人的关系模式，重复到现在的一个人身上。</p>\n<p>客体分内在客体和外在客体。如果客体是别人，外在客体就是实际的别人，内在客体是心里的别人。内在客体是外在客体的表象（Representation，代理人，翻译成表象可以看成动词 -&gt; 名词，也可翻译成 “再现”），如一千个人心里的李逵，可能是来自于不同戏剧，或同一个文学作品里，不同人对李逵的不同理解。部分客体：是主体对客体的一种表象。如张三看了《水浒传》电视剧，李逵和母亲对话的一个片段，会觉得他是一个孝子；李四看了《水浒传》的书，劫法场的片段，会觉得他是一个杀人魔。完整客体指，我们通过看一些不同的东西，对李逵形成了比较立体的理解：李逵由好、坏、好与坏、非好与非坏这四个部分组成。</p>\n<p>自体（Self）是一个完整的主体。和自我（ego）的区别是，自体更完整，它包括了自我在内的所有心理机能。自我是心理功能的组织者，它无法被直接看到，但可以在心理过程中得以显现。客体关系是发生在自体与其客体间，而不是在自我与客体间。</p>\n<p>自体表象指的是，自己在与其他人和物（客体）建立关系的过程中，理解到自体。即我通过我之外的东西，形成对我自己的理解。比如在听了一首歌之后，就能体验到自体身上有情绪。</p>\n<p>分裂（Splitting）包括正常的发展过程和防御过程。比如一种同时含有喜和恐的复杂情绪，在还不够成熟，无法同时体验到的时候，会只体验到一个。</p>\n<hr>\n<p>参考：Michael St. Clair《客体关系与自体心理学导论（第二版）》。</p>\n<p><strong>弗洛伊德学派的起始点：与客体关系及自体心理学理论相关的概念</strong></p>\n<p>在原初自恋状态下，自我是力比多本能的客体。</p>\n<p>认同和客体选择的区别：认同是自己想要变成他人那样，客体选择是自己想要拥有他人，给他人进行力比多投注。一个是看着自己变成客体，一个是看着客体。</p>\n<p>认同丧失客体的防御方式即：自己的至亲去世了，情感链接断了，无法进行力比多投注了，所以用认同置换了客体选择，通过做逝世亲人生前喜欢做的事，来认同他。</p>\n<blockquote>\n<p>如果孩童的自我有太多客体认同且如果他们太强有力而无法彼此兼容时，那就可能成为病态</p>\n</blockquote>\n<p><strong>梅兰尼．克莱茵：创新与过渡的理论家</strong></p>\n<p>婴儿为什么会吸手指：当喂食良好时，婴儿好的感受被投射到母亲的乳房上，母亲的乳房被内化为内在客体。婴儿的内在世界是一个幻想的世界，它可以主动响应驱力，如果外在客体不在场，可以借以内在客体来重复经历这个感受。如饥饿的婴儿可以通过幻觉到母亲乳房的感觉与奶汁的味道来暂时控制其饥饿。</p>\n<p>投射性认同的过程：把内在世界加到外在世界上，然后把外在世界重新内化。自身为缓解情绪，分裂出了一部分感受，将其投射到外在客体上，修正之后再内射回去。</p>\n<p>偏执－分裂位置：坏的东西就在那里威胁我；抑郁位置：担心好的会失去。</p>\n<blockquote>\n<p>她假设出生时自我就存在且带着非常早期俄狄浦斯冲突而导致超我的形成。</p>\n</blockquote>\n<p><strong>威廉．费尔贝恩：一个 “纯粹的” 客体关系模式</strong></p>\n<blockquote>\n<p>冲突并非自我与本我冲动之间，而是自我的各不同部分在和自我的内在客体之间相关联时产生的。</p>\n</blockquote>\n<blockquote>\n<p>任何时候当客体分裂时，自我跟着分裂而和客体的各不同部分建立关联性。</p>\n</blockquote>\n<p>在《凉宫春日的分裂》及《惊愕》三部曲里，有两个关键人物：佐佐木和渡桥泰水。当凉宫春日在阿虚的面前遇见佐佐木，并得知她是阿虚的挚友之后的有天晚上，世界线被分裂成了两个。因为在遇见佐佐木之前，阿虚的客体在凉宫心里可能是这样的：他更在意闹腾的女孩。因为凉宫就是属于闹腾的。在该小说里，人物的内心冲突以 “闭锁空间” 的形式可视化地表现出来，每当凉宫出现内心冲突时，她的闭锁空间里就会有蓝色的 “神人” 出现，把周遭的环境破坏为废墟；而佐佐木的闭锁空间是非常平静的，在规模和制造频率上都比凉宫的低。佐佐木作为一个平静且通常、高情商版的凉宫，而且自称为阿虚 “相当亲密的朋友”，所以在遇见她之后，阿虚的客体在凉宫心里被分裂成了两个部分，进而凉宫也分裂成了两个部分。凉宫的设定是神，于是世界线也分裂成了\nα 和 β 两条线，这是根本的原因。而直接的原因，起导火索作用的是伪 SOS\n团的出现：SOS\n团是凉宫在学校里创建的社团，意为 “让世界变得更加热闹的凉宫春日团”。但凉宫的性格属于是非常不稳定的，如果她作神，对世界会有不可预知的影响。于是有三个反派想推举佐佐木这个内心平静的角色，意图把凉宫的能力转移到佐佐木身上。凉宫遇到了伪\nSOS\n团的四人，虽然不知道他们的密谋，但是在无意识里觉察到了事情的危机。原书里提到，渡桥泰水就是凉宫无意识的具体化体现，且只有她可以游走于两条线之间。</p>\n<p>α 线是一段日常的校园生活，SOS\n团招募新人加入，但只有渡桥泰水一人通过。渡桥泰水在 α\n线入团，说明凉宫在遇见佐佐木之后，找回了过去自己的一部分。为什么呢，因为从发卡这个线索来看，渡桥泰水的原型在以前就是存在于凉宫心里的，她和凉宫都是属于活跃的性格，且前者的情商更倾向于佐佐木一方。她是凉宫分裂出来的自体客体，是为了代替阿虚心里的佐佐木。</p>\n<p>在 α 线里，伪 SOS 团的成员虽然都存在，但在后续都并未出场；β 线是伪\nSOS\n团与凉宫一方直接进行对抗，这两条线分别代表着一种理想的，和现实的可能。因为在世界分裂之前，危机就已经出现了，β\n线是危机的延续。它代表着一种最坏的结局：凉宫的能力真的被转移到佐佐木身上了。这意味着在凉宫心里，阿虚的客体发生了一个重大的改变 —— 他在\nβ\n线里都直接进到佐佐木的心里了。这就是 “虚神论” 的合理之处：谁的心里能更加占有阿虚的客体，谁就是神。我们同样可以用它来解释《消失》的剧情。</p>\n<p>渡桥泰水在 β 线里唯一出场的一次是在\nβ-10，往社团教室里带来了一朵花，为了保证两个世界的场景一致。花是一个变量，α\n线里的花就是渡桥泰水带过去的。渡桥泰水从 α 线走入到 β\n线，意味着凉宫从理想走向现实。在世界线收束的时候，渡桥泰水是在 α\n线里的，把两个阿虚的手叠到一起了。α\n线里的阿虚虽然是在凉宫的闭锁空间里，但是阿虚没有意识到，β\n线里的阿虚是在佐佐木闭锁空间里。这说明凉宫的无意识找到了一种理性的方法，先从现实的层面上创造机会（β\n线里带花），再从理想的层面上（α 线里），把两个阿虚客体整合到一起。</p>\n<hr>\n<p>费尔贝恩认为只有坏客体会被内化，因为他认为内化客体是为了在环境中避开它。如果客体是好的，那就没有内化的必要了。比如说，在受到某一个人不好的对待后，却在内心里期望他是好的，唯一的解决方式是，把他的坏内化到自己身上，在自身里形成一个坏客体。但自身也可能承受不住的，可能在遇到某个其他人之后，该坏客体又被外化出来了。比如说以前受到一个老师体罚，后来认为所有的教师都是坏的。这就是我们所说的移情，或者置换。</p>\n<p>费尔贝恩把自我分为三个面向：中心自我、力比多自我和反力比多自我，它们分别与三个客体起关系。力比多自我是感觉到需要的部分，它认同好客体；反力比多自我又叫内在破坏者，它认同坏客体，并惩罚力比多自我，类似超我的功能；中心自我负责把这两个辅助性自我分隔开，是看戏的人。比如在一场考试之后，发现自己做错题了，试卷上得了一个叉，于是看着这道题开始后悔了。那么力比多自我的客体是对勾，反力比多自我的客体是叉，反力比多自我在看见叉之后，开始惩罚力比多自我。中心自我是看戏的人，它把批评者和被批评者分隔开了，它的客体可能是那道题。</p>\n<p><strong>东纳．温尼科特：具独特观点的小儿科医师</strong></p>\n<p>过渡性客体：从全能向非全能过渡。全能指的是，外界的所有事情都如自己的愿，比如饿了就有母亲喂食；游戏就是一个过渡性客体，虽然游戏里的人物可以受自己的控制，但也不是想赢就能赢的。比如在动作游戏里打\nBOOS 的时候，除了自身出招和策略 BUFF\n的配合之外，最重要的是，你要能知道这个 BOOS\n会出什么招，在什么时候需要闪避以及如何闪避它，而这往往不是打一次就能适应的。</p>\n<p>真自体和伪自体：如果孩子早期没有被好好照顾，可能发展出防御性的伪自体，表现为和客体的关系感觉不是真诚的。只有真自体有自发性。一个个案：温尼科特的一位来访提到他无法自发地和别人谈话，除非加入别人的谈话中。如果他提出了自己的意见，就是在夺取父母的功能，而他真正想要的是被父母确认为一个婴儿。他的真自体没有被发展出来。</p>\n<blockquote>\n<p>退化作用（退行）是对过去某人需求未能给予足够响应的一个矫正的机会。</p>\n</blockquote>\n<p><strong>玛格丽．马勒：个体的心理诞生</strong></p>\n<p>个体化：我是，我存在。认同：我是谁。</p>\n<p>三大发展阶段：在第一个阶段是自闭期，约出生头一个月，是无客体的；第二个月开始是正常与母亲的共生期；第三阶段是分离 - 个体化，有两条并行的线，个体化是演化出自主性，分离是摆脱依赖。分离 - 个体化分四个次阶段，第一个次阶段里婴儿会初步地区分开自己和母亲，在目光上会检视母亲和非母亲；第二个次阶段在身体上会主动离开母亲，发展出一点自主性；第三个次阶段叫和解，是往以前回了一点，婴儿发现自己并不能完全地脱离母亲存在，对母亲比上一个阶段多了一点依赖，当母亲不在场时，借用过渡性客体来缓解自己的分离焦虑；第四个次阶段主要是在生命的第三年时且没有清晰的终结点，最终发展出情绪上的客体恒定性与个体性。</p>\n<h2 id=\"社交焦虑障碍\">社交焦虑障碍</h2>\n<p>轻度的社交焦虑障碍称为社交焦虑症，严重的称为社交恐惧症。在 CCMD-3\n里，社交恐惧的编号是 43.12。以 43\n开头的是神经症，它是没有可证实的器质性病变作基础的，即你的身体是没有问题的。43.12\n的诊断标准是：</p>\n<blockquote>\n<ul>\n<li>继承自神经症（43）的：\n<ul>\n<li>[症状标准] 至少有下列 1 项：① 恐惧；② 强迫症状；③ 惊恐发作；④\n焦虑；⑤ 躯体形式症状；⑥ 躯体化症状；⑦ 疑病症状；⑧ 神经衰弱症状。</li>\n<li>[严重标准] 社会功能受损或无法摆脱的精神痛苦，促使其主动求医。</li>\n<li>[病程标准] 符合症状标准至少已 3 个月，惊恐障碍另有规定。</li>\n<li>[排除标准]\n排除器质性精神障碍、精神活性物质与非成瘾物质所致精神障碍、各种精神病性障碍，如精神分裂症、偏执性精神病，及心境障碍等。</li>\n</ul></li>\n<li>继承自恐惧症（43.1）的：\n<ul>\n<li>1 符合神经症的诊断标准；</li>\n<li>2 以恐惧为主，需符合以下 4 项：\n<ul>\n<li>① 对某些客体或处境有强烈恐惧，恐惧和程度与实际危险不相称；</li>\n<li>② 发作时有焦虑和自主神经症状；</li>\n<li>③ 有反复或持续的回避行为；</li>\n<li>④ 知道恐惧过分、不合理、或不必要，但无法控制；</li>\n</ul></li>\n<li>3 对恐惧情景和事物的回避必需是或曾经是突出症状；</li>\n<li>4 排除焦虑症、分裂症、疑病症</li>\n</ul></li>\n<li>本项的：\n<ul>\n<li>1 符合恐惧症的诊断标准；</li>\n<li>2\n害怕对象主要为社交场合（如在公共场合进食或说话、聚会、开会，或怕自己作出一些难堪的行为等）和人际接触（如在公共场合与人接触、怕与他人目光对视，或怕在与人群相对时被人审视等）；</li>\n<li>3 常伴有自我评价和害怕批评；</li>\n<li>4 排除其他恐惧障碍。</li>\n</ul></li>\n</ul>\n</blockquote>\n<p>害羞和内向的区别：内向是指把心理能量投注到自己身上的频次比他者多，害羞是指害怕来自外界的负面评价。</p>\n<p>社交焦虑者首先是自己看不起自己，有一个假想的、高标准的观看者被投射出来，时刻监视着自己的一举一动，如果达不到观看者的要求，会无地自容。这个假想的观看者可以依附到场景里的任何一个人身上，也可以不依附。不依附是投射，依附后是投射性认同，即对方真的认同了对方是一个高标准的人。</p>\n<p>复旦大学的张维为教授对此也有类似的看法：</p>\n<p><img src=\"/blog/images/meme/只要你自信.webp\"></p>\n<p>社交焦虑的维持因素包括负强化：在做出一个回避的行为之后，没有得到负面的反馈，于是这个回避的行为会被强化。比如不社交，就不会把关系搞糟。</p>\n<p>社交技能训练：说以 “我” 开头的句子，以 “你” 开头的可能带有指责性。</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p>林崇德.&nbsp;发展心理学（第三版）[M].&nbsp;北京：人民教育出版社，2018:105-108.<a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n","excerpt":"","more":"<h2 id=\"问题讨论\">问题讨论</h2>\n<p>解决问题是什么意思？纽威尔和西蒙认为，首先要有一个问题空间，问题空间是一个人对于这个问题的初始状态、目标状态的认识，以及如何从初始状态转化成目标状态的认识。解决问题就是在问题空间里寻找一条从初始状态变成目标状态的路。</p>\n<p>问题可以怎么分类？按明确的程度分，初始状态和目标状态都很清楚的问题称为界定清晰的问题，否则称为界定模糊的问题。比如写一篇作文，如果在写之前就把提纲列出来了，最后要表达一个什么东西都提前定了，或许叫界定清晰。如果写一步看一步，不知道最终要写成什么样，叫界定模糊。或者说，按连续谱来看，写作文本身就在更靠近界定模糊的一侧，而写数学证明题在清晰的一侧。这个清楚或许指的是客观清楚。而主观清楚是分为，语义丰富和语义贫乏的问题，让一个小学生去做高数题，对他来说是或许语义贫乏的，因为在他的问题空间里，对初始的状态都无法理解；对高数教师来说是语义丰富的。</p>\n<p>我提出的这些问题，对我来说都是相对语义贫乏的问题。因为我对它们的相关知识都不够。是先提出一个目标状态（结论），再借助自己已有问题空间里的对初始和中间状态的认识，来看能不能通向目标状态。</p>\n<h3 id=\"心理学\">心理学</h3>\n<p>普通心理学重要的概念有？意识和无意识、注意保证心理在场，需求及其的衍生（情绪、动机、意志）造成行为，感知觉、记忆和思维（想象、言语）对信息进行处理。</p>\n<p>为什么心理过程包括知情意三大块？“过程” 是一个动词意义的，有起点和终点，可以多次进行。认识可以歇一会，情绪也可以消失。这里的意是意志，不是意识，意志是先有意识确定一个目的，再通过调节和支配行为，克服困难达到目的的过程，意志也是可以消失的，就是我们说的间歇性踌躇满志。名词意义上的 “意识” 在正常情况下一直在场直到死亡。睡眠和梦也是意识的特殊形态。像需要、动机、意识都是相对名词意义的，所以它们都不是心理过程。</p>\n<p>为什么说笛卡尔是现代心理学的开创者？在笛卡尔之前，公认的理论是，心灵对身体的作用是单向的，心灵会影响身体，而身体基本不会影响心灵，身体是木偶，心灵是提线者。笛卡尔把机械论的观念应用到人身上，认为人也是一台巨大的机器，身体可以影响心灵。这样我们就可以通过研究身体来研究心灵。</p>\n<p>为什么说冯特是现代心理学的建立者？在冯特之前，已经有人出版心理学的著作了。冯特在大学里建立了第一个心理学实验室，创立了第一本学术期刊，把心理学推向大众，体系化了。</p>\n<h3 id=\"需要及其衍生\">需要及其衍生</h3>\n<p>马斯洛的安全需要是什么意思？如果我们把安全理解为，是一种没有感受到危险的状态，那么安全需要被满足，就意味着没有负面情绪了，那么当生理需要被满足时，是不是同时满足了安全的需要？不是这样的，安全需要指一种持续的状态，如果我当天吃饱饭了，满足了当天的生理的需要，但是我之后每天都不一定能吃饱饭，那么我的安全需要是没有被满足的。</p>\n<p>当此时的上层需要被满足了的时，一定意味着此时的下层需要被满足了吗？不一定。比如我们虽然有时受到别人尊重了，但是仍会觉得自己未来没有希望，实际上就是我们此时此刻的安全需要没有被满足；如果我之后每天都能吃饱饭，但是我现在是饿的，那么我现在的生理需要是没有被满足的。需求金字塔是一个动态的结构，它并不意味着下层的需要如果被满足之后，就是永远地被满足了。它或许只是指示了一种痛苦抢占的优先级，就像操作系统的进程调度，五层需要是并发的，下层需要占\nCPU 的时间更长。</p>\n<p>马斯洛认为自我实现的需要是人类所独有的，反过来说，下面的四层是有些动物也需要的。比如第四层是尊重的需要，在群体里获得地位，狼通过竞争选出一个狼王。</p>\n<p>第三层和第四层的区别是什么？是单纯建立关系、有归属感，和获得价值与地位、有成就感的区别。比如我交一个朋友，只是单纯地想和他待在一起，或者在人多的地方比在人少的地方开心，这属于是第三层。但如果我想让他认可我，尊重我，这就上升到第四层了。比如我们能做到爱一个人，但是不一定能做到尊重他。</p>\n<p>物质需要和精神需要是什么意思？它指的是满足需要的对象是否是物质实体。比如我们买一张专辑，到底想要的是专辑的壳子和碟片、周边，还是里面的音乐内容。如果是前者，那么它满足了我们的物质需要；如果是后者，满足了精神需要。还存在着一种情况是，买一张专辑之后是为了拍照片发出来装一下，这属于是通过展示自己的物质条件或者音乐品味有多么地好，来满足自己的精神需要和社会需要。</p>\n<p>自然需要和社会需要的区别是什么？前者是在一个比较长的历史区间里直到现在，都是人一定需要的。后者受特定历史时期和环境的影响。自然需要由生理的不平衡引起，所以也叫生理需要；社会需要是后天习得的，所以也叫获得性需要。由生理需要引起的动机叫驱力，由社会需要引起的动机叫诱因。</p>\n<p>（图片由 DEEPSEEK\n生成）安全需要的自然部分指：我的身体不会受伤，生命不会受到威胁；社会部分指：我的生活是稳定、有保障、可预测的。</p>\n<p><img src=\"/blog/images/马斯洛需求金字塔.webp\"></p>\n<p>当我们的需要不被满足时，情绪、动机和意志就出现了。</p>\n<p>一般来说是，如果需要被满足了，会出现正面的情绪，反之出现负面情绪。但是还有一种特殊情况，当我们过去一直没有被满足的需求终于被满足了时，可能会感动到流泪。要解释这个现象，要么去厘清正负面情绪的范畴，把 “感动到流泪” 划分到强烈的正面情绪里。喜极而泣。</p>\n<p>《心理系》APP\n上说，人的基本情绪有喜怒哀恐，复合情绪是由基本情绪的不同组合派生而来的。但我现在暂时认为，怒的背后就是恐，可以把它简化成三个基本情绪。或许这么说，所有需求未被满足时的情绪背后都包含一个恐。比如饿可以被解释成对死亡的恐惧，社交恐惧未被满足的需求是安全需求。在需求满足之后会喜，没有满足时是恐，如果在当下持有一种该需求是在长期或永远无法被满足了时，或回忆到自己过去的需求有一直没有被满足的，则出现哀。恐对应退缩系统，做出逃跑的反应，与右侧\nPFC 激活水平相关；怒对应趋近系统，做出攻击的反应，与左侧 PFC\n激活水平相关。恐是刹车，怒是油门，如果在路上看到了障碍物，那么刹车是第一顺位的，你要先停下来判断一下，再决定要不要踩油门冲过去。但是也还有一种情况，就是当时你太恐了，所以踩错了，踩成油门了。这就像一个创伤被激活时，应激的恼怒情绪压过了一切的恐惧。</p>\n<p>怒的背后一定是恐吗？如果我们在网上看到一些言论之后发怒了，可能是因为这个言论戳中了自己的一些点，且它至少是部分有道理的。还有一种情况是，它是没有道理的，但是你怀着一种强烈修正它的愿望，且它触发了你之前不被别人在乎的创伤，修正它也是无法改变对方的观念的，所以为了掩护自己的不被在乎的恐，怒就出现了。如果这个言论是和你没有关系的，且你也能看出来它也是没有道理的，比如有人说，肯尼迪是美国的第一任总统，那你就不会发怒，而只会感到可笑。因为他的言论使你能够确认自己的价值，有人是比你还要差的，那你也差不到那里去。这满足了你的社会需求和精神需求，尊重的需要。</p>\n<p>情绪和情感的两极性是什么意思？意思就是，对于情绪和情感的每一个特性，都存在着一个连续谱。有四个特性，或者说是变化的维度，包括三个成分特性和一个功能特性。情绪的三个成分是主观感受，生理唤醒和表情。主观感受的特性叫强度，如从低落到悲痛欲绝，从不满到狂怒；生理唤醒的特性叫紧张度，从轻松到紧张；外部表现的特性叫激动度，从喜怒不形于色到范进中举；由需要满足或未满足出现的正 - 负面情绪，对于推动行为有正 - 负面的功能，叫情绪和情感的动力性。</p>\n<p>为什么说需要引起动机？引起或许指一种时间上的直接、紧密的先后顺序。需要是有机体内部的一种不平衡状态，表现为有机体对内外环境条件的欲求。比如感到饿了，我需要吃饭。动机是激发个体朝着一定目标活动，并维持这种活动的一种内在的心理动力，是行为活动背后的原因。吃饭的行为可以使这个饿的不平衡状态变成平衡的，但是在吃饭的行为发生之前，在需要产生和满足需要的行为发生之间，还会出现别的行为，比如感到饿了，先做饭或者买饭之后才是吃饭，所以说需要并不直接紧密地引起吃饭的行为，而是先引起吃饭的动机。动机激发了寻找食物的事件，指向了获取食物的方法，维持了从寻找、获取直到吃饱的整个过程。</p>\n<p>为什么说 “需要未满足 - 需要满足 - 产生新需要的循环” 叫动机过程？动机是一直在场的吗？如果动机不是一直在场的，那么它的生命周期从需要产生开始，途经行为发生之前（激发行为）和之中（指向、维持行为）的过程，直到行为无需动机推动，此时说明需要已被满足。它的下一个生命周期从一个新的需要产生开始。这说明动机也是有过程的，那么为什么动机不叫作心理过程呢，或许因为它是被包含在情绪过程和意志过程里，或许是因为，它是一直在场的。动机并非 “一直在场” 作为一种持续的、可感知的力，而是作为一种 “潜在的、可被激活的机制” 一直在场。</p>\n<p>动机的维持功能和意志的坚韧性有什么区别？共同点都是指为实现一个预期目标，做一些事情来说，时长上的坚持，短期的和长期的。对于一个长期的任务来说，比如目标是每天跑步多少分钟，当天的时长除了要靠当天的动机之外，还要靠意志的坚韧性。如果跑步动机并不是在每一天内都出现的，那说明意志的坚韧性不足。如果跑步动机在当天出现了，但是由于其他事件冲突而没有执行，叫做意志的果断性不足，自制性不足，或者自制成变化的了。</p>\n<p>意志的四个品质，从时序上来看谁先谁后？首先要明确目标，所以自觉性是首位的；其次会遇到挫折，这涉及到处理情绪、做决策和管理行动，处理情绪和行动对应自制性，做决策对应果断性；在一个长期的时间上，坚持地克服困难，永不退缩，对应强的坚韧性。如果自觉性不足，即不知道自己为什么要做这件事情，后面的三个或许比自觉性强的情况更弱一些。</p>\n<h3 id=\"信息处理认知\">信息处理（认知）</h3>\n<p>为什么有时在朗读文字时，感觉没有默读的效果好？这是一个注意分配的问题。注意分配指在同一时间把注意分配到两个及以上的任务上，它的前提是，其中一些任务已经达到了非常熟练的程度。以我的个人经验是，由于我之前说话很少，读句子的语气控制没有达到自动化的程度，所以在朗读文字的时候，相对于默读文字有一个额外的语气检控的进程，发声的进程，有时还会去想别的，造成注意的资源不够了。另一方面，默读文字的速度更快，朗读的速度和默读的不匹配，这就像汉字的语义饱和，你光盯着一个字看，会感到陌生，甚至不认识这个字了。</p>\n<blockquote>\n<p>(AIGC)\n在绝大多数情况下，慢速进程会拖慢快速进程。其根本原因在于，共享资源在同一时间通常只能被一个进程独占。快进程必须等待慢进程释放资源后，才能继续执行。是否存在例外情况？有的，在一种特定情况下，慢进程不会拖累快进程：当共享资源是【只读】且【无需协调】的时候。例如，多个进程同时读取同一份文件或同一块内存数据。一个进程可以慢慢地读，另一个进程可以飞快地读。因为它们都不会修改资源，所以不需要加锁，也无需互相等待。快慢进程之间没有任何依赖关系，各自都能以全速运行。</p>\n</blockquote>\n<p>照这么说，想要提高朗读速度，可以 “只读”，那就是真的只读了，不加理解地读。</p>\n<p>默读需要用到角回来识别字，朗读除此之外，还要用到布洛卡区说话和韦尼克区返听。</p>\n<p>当默读文字时，有时会在脑海中出现声音，当然不是实际的声音，是一种类似于回忆音乐旋律的感觉，这种现象是正常的吗？这种现象通常被称为\n“内心言语”（Inner\nSpeech），这说明默读时也用到了听觉皮层。在默读的同时也可以感觉到喉部肌肉的运动。</p>\n<blockquote>\n<p>(AIGC)</p>\n<ol type=\"1\">\n<li>视觉信息：视觉皮层看到文字。<br></li>\n<li>转换：角回等区域将视觉符号转换为听觉代码。<br></li>\n<li>内部模拟：<br>\n<ul>\n<li>运动模拟：布洛卡区及其周边区域会产生微弱的、被抑制的发音指令（科学家可以检测到喉部肌肉的微电流活动），这是一种 “准备说话但没说出口” 的状态。<br></li>\n<li>听觉模拟：大脑的次级听觉皮层（Secondary Auditory\nCortex）—— 特别是负责处理复杂声音（如语言）的区域 —— 会被激活。这个区域就在您提到的韦尼克区附近。<br></li>\n</ul></li>\n<li>产生体验：正是这种听觉皮层的内部激活，产生了您所描述的 “脑海中的声音” 或 “心理声音”。它不是来自耳朵的真实声音信号，而是大脑自上而下生成的预测和模拟。这和你 “在脑子里单曲循环一首歌” 的机制非常相似。<br></li>\n</ol>\n</blockquote>\n<p>记忆一定需要外界的输入吗？在记忆的识记阶段需要，保持阶段和提取阶段都不需要。保持阶段里新输入的信息对已存储的信息有倒摄抑制，提取阶段可以通过提示来再认。我们对梦的记忆是通过自己的无意想象而得来的，这说明想象可以补充经验。在经历梦的时候，大脑对以往输入过的记忆进行重组；在回忆梦的时候，回忆的是重组过的记忆。</p>\n<p>做梦梦到旋律，这个旋律后来才发现是以前听过的，但梦醒后的很长一段时间都没有想起来来自于哪里，那么对这段旋律的记忆算不算内隐记忆？AI\n给的回答是算的，因为梦的内容不是有意回忆的，在做梦之前，对旋律和来源的记忆都是内隐记忆；在做梦之后和再认之前，对旋律的记忆是外显的，而对来源的记忆是内隐的；在经过再认之后，来源的内隐记忆才变成了外显记忆。</p>\n<p>为什么说思维是人对客观事物本质和内在联系的认识？</p>\n<ul>\n<li>充分条件是有 A 必有 B，仅凭 A 就可充分推出 B；必要条件是无 A 必无\nB，有 B 必要 A。</li>\n<li>事物的本质属性是什么意思？事物 A 的本质属性 a，是判断事物 B\n是不是事物 A\n的必要条件。如自行车的本质属性，有轮子，是判断一个物品是不是自行车的必要条件，如果无轮子，就必定不是自行车。有轮子不是是自行车的充分条件，因为仅凭这一个特征，无法充分推出它是自行车，它还可能是汽车。如果自行车失去了轮子，就不能称之为自行车了（除非叫 “坏掉的自行车”），所以 “有轮子” 是自行车的本质属性。想要判断事物\nA 是不是事物 B，应该怎么判断？我们需要保证，事物 A 具有事物 B\n的所有本质属性，即 A 类是从 B\n类继承而来的。比如自行车是车，因为自行车具有车的所有本质属性（通常意义上，有轮子，用于载人或物，在地上跑，相对于人的移动速度更快的机器）。或者说，A\n是 B 类的一个实例，比如我的一辆自行车，是自行车类的实例。</li>\n<li>事物的偶然属性是什么意思？在失去偶然属性后，并不影响事物的本质。名字是一个人的偶然属性，在改名之后，仍然是同一个人。人格是一个人本质属性。特修斯之船，河流的偶然属性变了，但作为一个情感的客体，在人心里的本质属性是没有变的。</li>\n<li>事物间的内在联系是什么意思？摩擦和生热这两件事之间存在内在联系，这里的内在是指，多个事物之间的内在，因果关系。外在联系是什么意思？一只鸟随机地飞到了一辆汽车上，此时他们之间建立了一种外在联系。内在联系是寻找因果，必然性。</li>\n</ul>\n<p>打算盘是动作思维还是形象思维？用手算是动作思维，用心算是形象思维，通过口诀来判断打的动作是抽象思维，抽象思维也叫词的思维或逻辑思维。</p>\n<p>辐合思维是什么意思？辐是自行车轮子上的金属条，从轮圈到轴心，辐合思维注重从边缘聚集到中心，所以也叫求同思维。发散思维是解决问题的前半段，生成多种选项，辐合思维是解决问题的后半段，评估和执行选项。</p>\n<p>想象的功能是什么意思？想象是在已有形象的基础上，创造新的形象。这不是它的功能，是它的定义，功能是衍生出来的作用。通过小说的描写形成人物形象，是想象的补充经验的功能；通过想象来补充自己没有被满足的需求，画饼充饥望梅止渴，一个是替代性的满足；还可以是预见目标向目标前进。</p>\n<h3 id=\"社会心理学\">社会心理学</h3>\n<p>存不存在无角色的社会人？社会角色的意思是：</p>\n<ul>\n<li>一种行为方式和心理状态，与个体的社会地位和身份相一致（主观条件）</li>\n<li>对特定地位个体行为的期待，是社会群体得以形成的基础（客观条件）</li>\n</ul>\n<p>所以，只要一个社会群体的场域（等级或优先级、功能的划分）存在，对其组成成员的期待（隐含的规则）存在，社会角色就一定存在。一个人在不同的场域会有不同的角色。但是，如果前面那一个主观的条件不存在，即在一个场合下，行为方式和心理状态与这个场合的规则不一致的人，或许可以说，他是跳出了这个角色的。比如在《月亮上的男人》这部电影里，主角安迪・考夫曼给人一种经常跳出角色的印象，或者说，他在一个场合下同时扮演了两个角色，这有时会造成角色间冲突。之后他还在个体意义上扮演了两个角色，并成功地使其他人认为了这两个角色一定不会是同一个人。</p>\n<p>角色冲突和角色不清的区别是什么？角色不清指主观或客观的对该角色的认识不清。而角色冲突是认识清楚的，但认识不一致。角色内冲突是指对同一个角色有两种以上的细分认识，如教师对学生既需要管理者的角色，也需要朋友的角色；角色间冲突指对同一个人的两种及以上角色认识之间存在冲突，如某个时间选择先处理工作问题还是家庭问题。安迪考夫曼对他的两个角色都是认识清楚的，但是别人可能没有看出来是两个角色。</p>\n<p>表现型角色表现的是什么？是社会的秩序，制度，价值观，道德风尚，公平，正的一面。如医生，教师，学者，感动中国的获奖者。而企业家通常是与之相对立的功利型角色的，表现的是效率的一面。到目前为止，获感动中国年度人物的企业家好像只有：2002\n年的张瑞敏，2006 年的霍英东，2019\n年的伍淑清。张瑞敏表现了中国企业走向国际，霍英东和伍淑清表现了香港和内地的关系。</p>\n<p>一个被亲生父母抛弃，后来被领养的人，他的先赋角色是领养者 A\n的儿子。在他经历努力，找到真正的家人之后，他的角色是家人 B 的儿子。那么\nB\n的儿子的角色算先赋的还是成就的？在他找到家人之后，且他身边的人都知道了，那么这个角色对于他、两对父母、和知情者既是先赋的，也是成就的；在他知道自己被领养之后，但没有找到家人之前，对他和他的亲生父母及领养父母，帮助寻找家人的人来说，这个角色是先赋的，但还没有完全成就；在他还不知道自己是被领养的时候，对他，加上他身边的所有不知道领养事情的人的来说，这个角色是不存在的。</p>\n<p>为什么说自尊是人对其社会角色自我评价的结果？如果这么说，低自尊的意思就是，我认为我没有达到群体的标准。对于一个自我评价为 “我是一个好员工，但不是一个好家长” 的人，那么他的职业角色是高自尊的，而家长角色是低自尊的。如果一个人的\nA 角色的自尊低，那么他可能会去建构一个 B\n角色，比如一个自认为学习能力不强的人，会去把游戏的段位打得很高。</p>\n<p>马斯洛的自尊需要里，对成就、优势、自信的欲望与对名誉、支配地位、赞赏的欲望有什么区别？前者是内在动机驱动，后者是外在动机驱动。</p>\n<p>有纯粹的利他动机吗？</p>\n<p>权力动机是什么意思？当我们想要说服一个人，想要转变他的态度，或想让他按照自己的想法来做事的时候，这时候的心理倾向就叫做权力动机。大致由两个因素引起：对社会控制的需求（包括安全和尊重的需求），或对无能的恐惧。</p>\n<p>成就动机是什么意思？当我们感觉一件事情太简单，或者太难，所以没有做的动力的时候，这时候的成就动机是弱的。当一件事情我们认为有一定的挑战性，并非常想做的时候，这时候的成就动机是强的。两个影响因素是，主观成功的概率，和目标的吸引力。</p>\n<p>社交焦虑者有亲和动机吗？社交焦虑者的矛盾是：想和别人在一起建立友好或协作的关系，但是害怕风险。这个矛盾的前半部分就叫做亲和动机。这是一个趋避冲突，避的一点在于，和别人在一起会不自在。所以从动机上来看，社交焦虑者有趋的亲和动机\nC，且还有另外一个避的动机。如果只有一个动机，只趋，或者只避，那么绝对不会焦虑，因为后者的情况就是，直接逃离现场。但从行为上来看，社交焦虑者的亲和倾向\nB 是低的，因为 A\n是焦虑。卡在意志行动的准备阶段了，意志的果断性不足。因为自觉性不足，所以果断性、自制性和坚韧性都不足。</p>\n<p>态度的 CAB 模型是什么意思？</p>\n<ul>\n<li>观点和信念的区别是什么？观点更短期、易变、详细。信念更抽象，改变更难。观点需要基于信念来提出，信念可以通过观点回溯。</li>\n<li>知觉和理解的区别是什么？知觉是侦察兵，理解是指挥官。</li>\n<li>理解和观点、信念的区别是什么？理解是认知的过程，在理解之后形成观点和信念</li>\n<li>评价：我认为苹果好吃；观点：经过以往的多次评价，我认为苹果比香蕉好吃；信念：我认为吃苹果对身体好（基于事实：苹果有维生素和膳食纤维；观点：身体需要维生素，膳食纤维有助于消化）。我对苹果的知觉是，我知道那是一个苹果（模式识别）；理解是，我能说出来我对苹果的观点和信念</li>\n<li>知觉 -&gt; 理解 -&gt; 观点 -&gt;\n信念，这四个再加上事实，就是态度的认知成分 Cogntion</li>\n<li> 情绪：吃苹果之后，我开心了；情感：我喜欢吃苹果。评价和情绪、情感这三个，就是态度的情感成分\nAffect</li>\n<li> 行为倾向 Behaviour Tendency</li>\n</ul>\n<p>我认为跑步可以锻炼身体，这是我的认知\nC；但是跑步会使我累得难受，这是我的情感 A；通常 A\n占主要成分，所以我的行为倾向 B 是不常跑步。</p>\n<p>态度的卷入深度是什么意思？指态度对象对个体的意义重要性。如一个人对日本的态度，对日本有态度，但平常不接触日本的所有信息，相比在日本留学的人，对日本态度的深度更浅（C\n的方面）。对一款经常玩的游戏，相比玩了很短时间卸载的游戏，态度更深（B\n的方面），如果认为工作比游戏重要，那么对工作的态度比游戏更深。</p>\n<p>如何使用中等畏惧的信息说服？如果不常运动，得心血管疾病的风险是运动者的好几倍，运动会显著降低患心血管疾病的风险。</p>\n<p>为什么沟通的结构比霍夫兰德态度转变模型的四个要素多三个？霍夫兰德态度转变模型的四要素是接受者，发送者，信息和情境，接受者是态度转变的主体，通常是发送者劝说接受者，这个模型关注的是发送者如何在特定情境下使用特定信息转变接受者的态度。而沟通的结构是相对更平等的，所以会有一个反馈，反馈是指一个交互的，半双工的过程，比如我在回答对方之前，先把对方的观点复述一遍，看我的理解是否和对方一致。霍的情境对应沟通的背景，沟通的背景还比霍的情境多了物理层，包括心理、物理、社会和文化背景，而霍的情境是不涉及物理背景的。霍已经假定了沟通的信息传递本身是没有问题的，而沟通还涉及到了信息的载体，和传递之前和之中，信息是否有误码和损耗等障碍。信息的载体或者说通道是指面对面沟通还是发信息沟通。传递的障碍包括六个方面，信息源，编码，网卡，信道，自然衰减，和误解。来自信息源的障碍如信息量不够或不明确，编码的障碍如对英国人使用日语，网卡发送的障碍如声带的振幅不够，说话声音小，信道的障碍如误用了沟通载体和方式，自然衰减的障碍如远距离对话，两个终端上的障碍是误解。通道，障碍和反馈，是沟通比霍多的三个。</p>\n<h3 id=\"创伤心理学\">创伤心理学</h3>\n<p>照顾关系，依恋关系和主体间关系的区别是什么？父母给我们提供居住地和经济上的支持，叫做照顾关系；如果父母经常和我们玩，讲故事，有身体接触，可以形成依恋关系；我们对一个第一次遇到的陌生人，和他之间的关系就叫主体间关系。中医推拿，泡澡，泡脚也可视为一种身体的接触，这叫创伤的躯体治疗。</p>\n<p>如何解释，当我们看到古文，小说或电影里与自己类似的负面经历之后，自己的负面心境会缓解一点？这是一种共享的记忆。在同时同地同情境下，两个人共同经历的记忆叫做共时记忆，而共享记忆需要一个传达的过程。比如张三在时间\nA 经历的记忆，在时间 B\n通过口头或文字的形式分享给了李四。这种 “不是只有我一个人是这样” 的感受，从需求满足的角度看，满足了马斯洛的第三层，归属感和爱的需要。如果观看者\nA 本身是尊重小说或电影里的人物 B 的，那么 A 可以把 B 当成自己，把 A\n当作另一个人 C，A 通过扮演屏幕外的人 C，给屏幕里的 B\n尊重，从而间接地满足了自己尊重的需要。</p>\n<h2 id=\"抑郁的心理学理论\">抑郁的心理学理论</h2>\n<ul>\n<li>压力源\n<ul>\n<li>生物性压力源：躯体创伤，疾病，噪音</li>\n<li>精神性压力源：错误的认知结构、过去的经验、内心的冲突</li>\n<li>社会环境型压力源\n<ul>\n<li>社会环境的问题：战争，亲人逝世，被监禁</li>\n<li>人际适应的问题：由于自身的状况，造成的人际适应问题</li>\n</ul></li>\n</ul></li>\n</ul>\n<p>压力源指生活中要求人们去适应的事件，比如转学。压力反应包括主体觉察到压力源后，出现的心理、生理和行为反应，心理反应如出现低落的心境，生理反应如，行为反应如在社交场合面前退缩。压力是压力源和压力反应共同构成的一种认知和行为体验过程。</p>\n<p>行为理论\n1（负惩罚）：压力 - 减少行为 - 减少正性强化物 - 退缩 - 减少正性强化物……（正强化）引起他人同情和关注 - 继发性获益</p>\n<p>行为理论 2（习得无助）：负性事件 - 习得无助 - 动机减少</p>\n<p>认知理论\n1（认知反哺核心信念，自证预言）：对自己、世界和未来的看法消极 - 对事件的认知倾向于支持其消极证据</p>\n<p>某人某行为的原因，事件的结果 = 归因（信息）。</p>\n<ul>\n<li>内因 / 外因维度：是否因为自己</li>\n<li>整体 / 局部维度：适用范围</li>\n<li>稳定 / 易变维度：时间持续性</li>\n<li>可控 / 不可控维度：是否受自己主观意志影响</li>\n</ul>\n<p>认知理论\n2（抑郁性归因风格，形成性习得无助）：对负性事件的归因倾向于内在、稳定和整体的原因 - 认为自己无法应对该事件 - 习得无助</p>\n<p>认知理论\n3（思维反刍，%0|%0）：模糊和概括的记忆，对负性刺激注意偏好 - 专注、淹没于自身的感受、原因而不对于处理</p>\n<p>人际理论（客观上的狼来了）：难以信任别人 - 寻求他人肯定 - 容易感受到拒绝 - 难以信任别人 - 寻求他人肯定 - 身边人感到厌倦 - 寻求他人肯定 - 社会支持被收回</p>\n<p>社会文化理论\n1（世代效应）：时代变了；家庭原子化；年轻一代对自己的期望过高。</p>\n<p>社会文化理论\n2（性别差异，女性患抑郁的可能性是男性的两倍）：男性偏向喝酒否认痛苦，女性偏向反刍；社会对女性的偏见</p>\n<p>社会文化理论 3（种族差异）：</p>\n<h2 id=\"生物学\">生物学</h2>\n<p>决定论是指，每个事件的背后都是有原因的，确定的因素可以引发确定的结果。还原论是指，可以把一个大的系统分解成组成它的基本部分来研究。如果心理现象以生理状态为决定的话，我们可以把人体还原成一些零件，通过药物来干涉它们的运转过程，从而改善心理上的问题。但不用药物的谈心、话疗也可以改善心理问题，有些药物不起效或起效慢，这或许说明心理现象不完全以生理状态为决定，也或许说明话疗、安慰剂也可以改善生理状态。</p>\n<p>来自体内或体外的刺激通过内导神经元（传入神经、感觉神经）传入脑和脊髓（中间神经元的回路），再通过外导神经元（传出神经、运动神经）传出到效应器官。人脑神经元有\n100 亿个以上，在神经元之间有 1000\n亿个以上胶质细胞，它可以给神经元输送营养，修复神经元；叫髓鞘的胶质细胞起着电线绝缘层的作用，确保神经冲动沿正确的路线传递。神经元在静息状态下，细胞膜外的电位比膜内高\n70mV，膜外相对为正电；在受到刺激后，钠离子被泵入细胞膜内，膜内相对为正电。神经兴奋传导的速度通常为\n3.2 ~ 320km/h，0.8 ~\n8m/s。突触是一个神经元上，与另一个神经元彼此接触的部分，一个神经元可有多个突触；在大脑皮层上，一个神经元可有\n30000\n个突触。一个神经元通过突触间隙，向其临近的神经元释放神经递质，称为神经冲动的化学传递。神经递质的接收方细胞膜上的分子叫受体。再摄取是发送神经元向突触间隙释放神经递质后，再吸收回去一部分，使得突触间隙的神经递质含量降低。降解是接收神经元向突触间隙释放酶，把神经递质分解成其他物质。</p>\n<ul>\n<li>中枢神经系统（CNS）\n<ul>\n<li>大脑又叫端脑。大脑的外层叫皮层，皮质或者灰质；白质在里边。额顶枕颞，动感视听\n<ul>\n<li>脑回是山脊，脑沟是山谷</li>\n<li>额叶在头顶前部及额头，书写中枢在额中回靠近中央前回，如果损坏了称为失写症；表达性失语症是左半球额下回靠近外侧裂的布洛卡中枢，又叫运动型言语中枢，如果损坏了，说话迟钝费力</li>\n<li>顶叶在头顶后部，枕叶在枕头附近，顶枕交汇处的角回如果损伤了，可以看到字，但是不能理解字的意思，就像看一个异国的语言，称为失读症；</li>\n<li>额叶和顶叶的分界是中央沟。额叶顶叶，和颞叶的分界是外侧裂，外侧裂上方是额叶和顶叶，下方是颞叶</li>\n<li>颞叶在太阳穴、耳朵附近，颞上回的维尔尼克中枢如果损坏了，可以听到声音，但是不能理解意思，称为接受性失语症；</li>\n<li>岛叶与内脏感觉有关</li>\n<li>大脑两半球的分界叫纵裂，由胼胝（pian2 zhi1）体相连</li>\n</ul></li>\n<li>脊髓是最低级的，一些神经过程如膝跳反射可以不经过脑，只经过脊髓</li>\n<li>脑干是最古老的，其网状结构调节睡眠与醒来，分布于延脑、桥脑和中脑；</li>\n<li>小脑控制身体平衡</li>\n<li>间脑\n<ul>\n<li>嗅觉是最古老的感觉，丘脑除了嗅觉之外，是其他所有感觉的重要中枢，把感觉接收器的信息传给大脑</li>\n<li>上丘脑</li>\n<li>下丘脑是自主神经系统的中枢</li>\n<li>底丘脑调节肌张力</li>\n</ul></li>\n</ul></li>\n<li>外周神经系统（PNS）\n<ul>\n<li>躯体神经系统是用户态，受意识控制，如走路；\n<ul>\n<li>31 对脊神经</li>\n<li> 12 对脑神经\n<ul>\n<li>感觉神经（输入）：嗅神经、视神经、听神经</li>\n<li>运动神经（输出）：眼动神经、滑车神经（颈部）、外展神经（面部）、副神经和舌下神经（舌）</li>\n<li>混合神经（I/O）：\n<ul>\n<li>三叉神经（面部感觉的输入，咀嚼肌的运动）</li>\n<li>面神经（味觉的部分输入，舌下腺、泪腺和鼻黏膜腺的分泌）</li>\n<li>舌咽神经（味觉输入，唾腺分泌）</li>\n<li>迷走神经（一般内脏感觉的输入，咽喉肌肉、内脏平滑肌和心肌的运动）</li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li>自主的是内核态，受无意识控制，如心跳是心在 “自主” 地跳，没法控制它不跳，像植物一样没有意识，所以又叫植物神经。通过特殊的训练，可以在一定程度上控制心跳快慢\n<ul>\n<li>交感的和副交感的。“交感” 一词意为 “共同感受” 或 “共同作用”，是在应激状态下协调多个内脏器官，做出战斗或逃跑的反应；副交感的拮抗交感的，调节身体的 “休息和消化” 反应。</li>\n</ul></li>\n</ul></li>\n</ul>\n<p>突触间隙的 5 - 羟色胺、去甲肾上腺素含量过少，会有抑郁的感觉。</p>\n<p>一些理论认为，焦虑和抑郁是下丘脑 - 垂体 - 肾上腺轴（HPA\n轴）失调造成的。垂体分泌的激素种类最多，在下丘脑的下方。下丘脑的某些神经元分泌促肾上腺皮质激素释放因子（CRF），CRF\n再刺激垂体分泌促肾上腺皮质激素（ACTH），该激素通过血液运输到肾上腺和其他器官，引起约\n30 种激素的释放，每种激素都在人体适应紧急情况时起到一定的作用。</p>\n<p>表观遗传学认为，在 DNA\n序列不变的前提下，基因的表达模式（何时、何地、表达多少）可以通过可逆的化学修饰（如\nDNA 甲基化、组蛋白修饰）来动态调控和 “改变”。</p>\n<p>抗焦虑药包括巴比妥类和苯二氮类，它们都有断药反应，后者用于安眠药。</p>\n<h2 id=\"普通心理学\">普通心理学</h2>\n<p>参考彭聃龄《普通心理学（第 5 版）》等。</p>\n<p>普通心理学讨论的范围是普通成人，偏个体层面的心理过程和结构。与普通、成人和个体这三个词互补的就是异常，发展和社会心理学。</p>\n<p>认识是对信息加工的过程。包括感知觉、记忆、思维、语言的输入输出、想象。感知觉加工的是来自体内或体外的信息，通过记忆储存到大脑里，思维把这些信息进行重组，通过语言表达出来；想象以表象的矢量图为材料，把表象\nP\n成新的图。注意不属于是认识，因为它没有加工信息，而是选择将被加工的信息。认识也可以说成是客观事物在头脑中的反映。感觉是对事物个别属性的反映，知觉是对事物整体的反映，记忆是对过去经验的反映，思维是对事物本质和内在联系的反映，对作用到感官上的事物为媒介而间接地认识没有作用到感官上的事物。对语言来说，思维的原料和产品都是概念。概念是对客观事物特性、本质属性的反映，表现为词的形式。</p>\n<p>心理结构是不同心理现象之间的关系。如情绪和情感、意志都与需要相关，需要引起动机，动机引起行为，需要的满足引起正面情绪，不满足引起负面情绪，负面情绪使得认知效率下降。当外部世界不满足我们的需要的时候，我们使用意志来改造外部世界。</p>\n<h3 id=\"感觉和知觉\">感觉和知觉</h3>\n<p>它们都是人脑对客观事物的反映。“反映” 这个词说明，存在（映）在先，观察在后（反）。感觉和知觉都是 “观察” 的过程，它需要（映）的刺激，和接受刺激的感觉器官经由神经元和神经系统（反射）到一个地方。无脊椎动物发展到环节动物的阶段产生了神经系统，所以有感觉；脊椎动物阶段的神经系统更发达，所以有知觉。感觉和知觉是婴儿认知的开端，是最先成熟的心理过程，也是老年期衰退最早的心理过程。信息源可以来自体内或体外，但是产品在体内。可以说它们把物质转化成了精神。</p>\n<p>按刺激来自身体外面还是里面，可分为外部感觉（视听触味嗅）和内部感觉（动静机体）。感觉器官是输入设备，感觉是驱动程序。在内部感觉里，静觉的输入设备如手机的陀螺仪，刺激是来源于其内部的结构。</p>\n<table>\n<colgroup>\n<col style=\"width: 13%\">\n<col style=\"width: 86%\">\n</colgroup>\n<thead>\n<tr>\n<th>刺激作用于，感觉</th>\n<th>描述与形成时间 <a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a> （妊娠 8 周以后称为胎儿期，40\n周分娩）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>嗅细胞，嗅觉</td>\n<td>最古老的感觉 <br> 6 个月的胎儿能嗅到母亲的气味并记住</td>\n</tr>\n<tr>\n<td>内耳里的科蒂氏器官，听觉</td>\n<td>人能听到 16-20000Hz，对 1K-4KHz 最敏感。20 岁以前听觉提高，60\n岁以后对高频降低。<br>4 个月的胎儿听觉系统已经建立，28\n周后对声音有反应和面部表情</td>\n</tr>\n<tr>\n<td>皮肤，触觉</td>\n<td>用两个钝针头刺激皮肤相邻的两点，能分辨出两个点的最小距离叫两点阈，用来量化触觉灵敏度。脊背的两点阈最大，手指和面部的两点阈最小。对于某一时刻和某一块皮肤来说，皮肤表面的温度叫生理零度\n<br>2 个月有皮肤感觉，4 至 5\n个月胎儿的触觉与出生周岁后婴儿的水平相当</td>\n</tr>\n<tr>\n<td>光感受器细胞，视觉</td>\n<td>视网膜视细胞层上有两种视神经细胞，对光敏感的锥体细胞在中央窝，对暗敏感的杆体细胞在边缘。锥细胞有\n600 万个，杆细胞是锥细胞的 20 倍。 <br>4\n个月就对光线敏感，但视觉系统在出生后才发挥作用，出生后 1\n岁达到成人视力水平</td>\n</tr>\n<tr>\n<td>味蕾，味觉</td>\n<td>敏感性从舌尖、舌边前、舌边后、舌根的四种基本味觉是甜、咸、酸、苦。<br>26\n周形成味觉，30 周味觉发达</td>\n</tr>\n<tr>\n<td>肌梭、腱梭和关节小体，动觉</td>\n<td>身体各部分的位置、运动和紧张程度，又叫运动觉。闭眼摸鼻子</td>\n</tr>\n<tr>\n<td>内耳中的耳石和三个半规管叫前庭器官，静觉</td>\n<td>感受人体姿势与地心引力的关系，又叫平衡觉。晕车</td>\n</tr>\n<tr>\n<td>内脏，机体觉</td>\n<td>也叫内脏感觉。包括饿、渴、窒息、疲劳、便意、性、内脏痛</td>\n</tr>\n<tr>\n<td>对应的机体，痛觉</td>\n<td>对对应的机体造成伤害，可以是内部或外部感觉。痛觉最难适应。辣</td>\n</tr>\n</tbody>\n</table>\n<ol type=\"1\">\n<li>人耳对 1000 至 4000 赫兹的声波最敏感</li>\n<li>能引起某一感觉器官最敏锐感觉的刺激，是该感觉器官的适宜刺激</li>\n<li>人类听觉的适宜刺激是 16 至 20000 赫兹的声波</li>\n</ol>\n<p>这三句话都是标准答案，如果把第二句话里的 “是” 理解成 “蕴含” 的话，这三句话是不冲突的。即\n1000 至 4000 赫兹的声波，是包含在 16 至 20000\n赫兹这个适宜刺激范围之内的。</p>\n<p>感觉和知觉的区别是，它们反映的是事物的个别属性还是整体。知觉在感觉的基础之上形成。对于一个苹果，我们视觉认识到的属性是红色，触觉和视觉认识到的属性是圆滑，味觉认识到的属性是酸甜。通过这些感觉认识到的各个属性，我们在心中构建出了它的整体形象，形成了关于苹果的知觉。</p>\n<p>你把苹果的各个属性结合到一起认识，这叫知觉的整体性；你由过去的经验判断它是一个苹果，并给出了判断的理由，这叫知觉的理解性；桌子上的盘子里有一个苹果，在同一时间里你对苹果的注意力要大于盘子和桌子，这叫知觉的选择性，这取决你的需要和感觉通道的容量；盘子里有几块切开的苹果，你仍然可以认识到它是苹果，这叫知觉的恒常性；有非常小一块果肉，你无法判断它是苹果还是梨，这叫超出了知觉恒常性发生条件的限度。</p>\n<p>在时间知觉的准确度上，声 &gt; 震 &gt; 闪，听觉 &gt; 触觉 &gt; 视觉。</p>\n<p>错觉是一种无法被避免的歪曲知觉，如<a href=\"https://baike.baidu.com/item/%E6%A3%8B%E7%9B%98%E9%98%B4%E5%BD%B1%E9%94%99%E8%A7%89/16833649\">棋盘阴影错觉</a>。</p>\n<h3 id=\"颜色\">颜色</h3>\n<p>RGB-CMY：红绿蓝的负后像（互补色）是青品黄。RGB\n是加色模型，用于发光体如电视屏幕。红 + 绿 = 黄，红 + 蓝 = 品，绿 + 蓝 = 青。</p>\n<p>CMY 是减色模型，用于吸收光的颜料，印刷加个 K 是黑色，CMY 分别吸收\nRGB。青色的颜料把红光吸收之后，剩下的绿光和蓝光在加色模型里相加是青色；青色和品色颜料叠加，吸收红光和绿光，剩下蓝光，所以在减色模型里青 + 品 = 蓝。</p>\n<p>HSV 颜色空间：色相 - 饱和度 - 明度。</p>\n<ul>\n<li>色相是一个环，红色在 0 度。纯红色是 (0,1,1)</li>\n<li> 饱和度是非灰色的比例。灰色没有饱和度，只有明度：(h,0,v) 不管 h\n是什么，只要 s 是 0，v 从 0 到 1 都是黑 - 灰 - 白渐变，特点是 RGB 相等</li>\n<li>色觉有缺陷的人靠明度辨别颜色，对应光的强度。</li>\n</ul>\n<table>\n<colgroup>\n<col style=\"width: 7%\">\n<col style=\"width: 57%\">\n<col style=\"width: 34%\">\n</colgroup>\n<thead>\n<tr>\n<th>Label</th>\n<th>Input Range</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Hue</td>\n<td><input type=\"range\" id=\"hue\" min=\"0\" max=\"1\" step=\"0.01\" value=\"0\"></td>\n<td><span id=\"hueValue\">0</span></td>\n</tr>\n<tr>\n<td>Saturation</td>\n<td><input type=\"range\" id=\"saturation\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"></td>\n<td><span id=\"saturationValue\">1</span></td>\n</tr>\n<tr>\n<td>Value</td>\n<td><input type=\"range\" id=\"value\" min=\"0\" max=\"1\" step=\"0.01\" value=\"1\"></td>\n<td><span id=\"valueValue\">1</span></td>\n</tr>\n<tr>\n<td>Red</td>\n<td><input type=\"range\" id=\"red\" min=\"0\" max=\"255\" step=\"1\" value=\"255\"></td>\n<td><span id=\"redValue\">255</span></td>\n</tr>\n<tr>\n<td>Green</td>\n<td><input type=\"range\" id=\"green\" min=\"0\" max=\"255\" step=\"1\" value=\"0\"></td>\n<td><span id=\"greenValue\">0</span></td>\n</tr>\n<tr>\n<td>Blue</td>\n<td><input type=\"range\" id=\"blue\" min=\"0\" max=\"255\" step=\"1\" value=\"0\"></td>\n<td><span id=\"blueValue\">0</span></td>\n</tr>\n<tr>\n<td>RGB Hex</td>\n<td><input type=\"text\" id=\"hex\" value=\"#FF0000\" maxlength=\"7\"></td>\n<td><span id=\"hexError\" style=\"color:red\"></span></td>\n</tr>\n</tbody>\n</table>\n<div id=\"colorBox\" style=\"width:100px;height:100px;margin-top:10px;border:1px solid black\">\n\n</div>\n<script src=\"color.js\"></script>\n<h3 id=\"意识无意识注意\">意识、无意识、注意</h3>\n<p>意识是在觉醒状态下的觉察，是在内存上的所有进程，包括对内的觉察和对外的觉察。对内的觉察包括回忆，描述自己现在的状态；对外的觉察是别的人和事，以及别人怎么看自己。它的特殊形态包括睡眠和梦。睡眠是把内存上的东西存储到了硬盘上。无意识是主板上时钟的电池，是个体没有觉察到的，无法调节和控制的心理现象。如果按弗洛伊德的三层模型，意识是现在正在的，前意识是现在可以想到的，无意识是现在不会想到的。荣格的三层模型是意识、个人潜意识、集体潜意识（可理解为\nDNA 里一样的部分）。无意识心理和有意识心理之间的桥梁是词语。</p>\n<p>脑电波按频率可分为 δ θ α β\nγ，频率高的意识活动强。当我们在清醒的状态下，多是 14-30Hz 的 β\n波，在放松的状态下是 8-13Hz 的 α 波，在睡眠状态下多是 δ 波。</p>\n<p>人在清醒状态时，大脑会分泌腺苷，高水平的腺昔浓度会引起困倦，而睡眠可以使大脑中的腺昔浓度降低。</p>\n<p>白天的光线激活视交叉上核，抑制松果体分泌褪黑素。黑暗促进褪黑素的分泌。褪黑素起镇静的作用。</p>\n<p>注意是一个动宾短语，是操作系统对意识的投注，是意识活动对特定对象的指向和集中。有稳定性，即注意对某个对象保持的时间。注意起伏的平均时间为\n8 至 12 秒，为感受性提高 - 降低的一个周期。</p>\n<p>按是否主动，可分为随意注意和不随意注意。人对目光很难做到随意控制，因为目光会受到无条件反射的影响。如当突然有物体出现在视野边缘时，眼球会不自主地转动以捕捉这一信息。这种反应是一种遗传下来的保护机制。目光是最能反映人内心世界的身体语言。</p>\n<p>注意分配是指，在同一时间把注意分配到两个及以上对象上。</p>\n<p>负启动效应：你不想听一个人说话，屏蔽他说话信息。如果后续想听了，要花更长的时间注意他。</p>\n<h3 id=\"记忆\">记忆</h3>\n<p>记忆是人类智慧的根源，是过去的经验在头脑中的反映，三个步骤是识记（输入）、保持（存储）和提取（输出）。</p>\n<p>记忆并不是一次性就能记牢的。从识记和存储的过程，保持的时间来看，分为瞬时、短时和长时记忆三个阶段，它们的保持时间是先短后长的。如果在识记时无意识，称为瞬时记忆或感觉记忆、感觉登记。感觉记忆体现在，视频都是一帧帧的，我们可以把离散的帧看成连续的画面，切镜头的时候也不会感觉到突兀。它的保持时间在\n0.25 至 4\n秒。如果在识记时注意了，则感觉记忆向短时记忆转变。短时记忆的注意广度是\n5~9 个单位，对语言文字记的是声音，非语言文字记的是形象，保持时间在 5\n秒至 1\n分钟。对短时记忆的内容进行复述，可以进入长时记忆。长时记忆的保持时间在 1\n分钟以上，长的直到终生。</p>\n<p>长时记忆分为陈述性记忆和程序性记忆，它们是按是什么和怎么做来分类的。陈述性记忆包括情景记忆和语义记忆，它们按是否和个人的经历绑定而分类的。情景记忆记的是自己过去经历过的某个事件内容及情绪；语义记忆记的是客观事实与知识。陈述性记忆的核心脑区在海马体、内侧颞叶、前额叶皮层；程序性记忆的核心脑区在基底神经节、小脑、运动皮层。</p>\n<p>在记忆形成之后，过去的经验会影响现在。外显、内隐记忆是按过去的经验如何被提取，从而影响现在的行为而分类的，是有意识还是无意识的影响。外显记忆的输出都是有意识的，包括回忆和再认。回忆是无线索的主动提取，如给出古诗的前半句，在没有选项的情况下自己写出后半句；再认是有线索的被动识别，如给出古诗的前半句，又给了四个选项，认得其中一个是对的。内隐记忆的输出是无意识的。如学会骑自行车之后，骑自行车的技能不用用力表现出来。看了床前明月光，再给出⻗字头，补全这个字，我们会更倾向于补成霜；如果刚看了忽如一夜春风来，我们会更倾向于补成雪。这叫启动效应，是内隐记忆对当前作业的影响。</p>\n<p>回忆或再认不出来或错误，称为遗忘。艾宾浩斯用无意义音节给自己做实验，发现外显记忆的遗忘的速度先快后慢，呈负加速曲线。内隐记忆是更持久的，且遗忘速度慢于外显记忆。健忘症患者可能无法回忆事件的外显记忆，但保留技能如骑车的内隐记忆。</p>\n<p>遗忘的原因有自然衰退和干扰。干扰分前摄抑制和倒摄抑制：在某个时间学习的材料，对识记或回忆另一个时间学习的材料造成的干扰。如 “五十六个民族，五十六支花” 这句歌词我们在之前是记得很清楚的，如果我们想把这段记忆转变成 “五十六个星座，五十六支花”，那我们会经历前摄抑制，即之前摄取的信息抑制之后摄取的信息；小明某个网络账号的平台要求他修改密码，在他修改之后就没有管了，直到某一天再次登录，他想不起来上次修改的是什么了，小明经历的叫倒摄抑制，即后摄的抑制前摄的。</p>\n<p>记忆系列位置效应：你对琵琶行的第一句话（首因效应）和最后一句话（近因效应）的印象比中间的深。</p>\n<p>5\n岁以前的儿童难以运用，或者说很少运用记忆策略，如复述。记忆从胎儿末期开始，1\n岁之前主要是情绪和动作记忆，1\n岁之后主要是表象和词语记忆。幼儿期以形象记忆、无意识记为主，机械记忆和意义记忆同时发展并互相作用。</p>\n<h3 id=\"思维想象\">思维、想象</h3>\n<p>灵长类动物发展到了思维萌芽阶段，可以认识到事物的外部联系；人发展到了思维阶段，可以认识到事物的内部联系。分析和综合是单体攻击，把单个事物分解成各个属性再拼回去。抽象和概括是\nAOE</p>\n<p>表象是一个 SVG 文件，想象是 PS\n的过程。无意的想象包括梦和病态的幻觉，弗洛伊德认为梦是冲突愿望的伪装满足；有意的想象包括幻想，幻想与个体的愿望相关，并指向未来。</p>\n<p>再造想象和创造想象的区别：前者如读书，通过书上写的文字，在头脑里复现了形象；后者如写，在不参照现有句子的情况下，自己写一些句子出来。我以前把再造想象误理解成了：把别人的话用自己的语言说一遍。这并不是对的，再造想象的意思是，注重于现有的东西在输入之后在脑海里形成了形象，不管输出了；而创造想象的注重的是，不参考现有的文字，它关注的是输出。再造想象关注前半部分，创造想象关注后半部分。当我试图在输出的时候，但是直觉有点不太对，所以又重新看了一遍再造想象的定义，才发现自己过去理解错了，为了覆写这个记忆，需要克服前摄抑制的干扰。</p>\n<h3 id=\"情绪\">情绪</h3>\n<p>左侧前额叶皮层（PFC）与趋近系统和积极情绪有关，如笑；右侧前额叶皮层与退缩系统和消极情绪有关，如哭和恐惧。愤怒属于趋近系统，但它的神经机制可能在两边都有。杏仁核与危险和负面的情绪相关。</p>\n<p>情绪的三个部分，主观感受，生理唤醒和外部表现。主观感受如抑郁和焦虑，生理唤醒如发抖、血管扩张，外部表现是表情。表情分面部表情、姿态表情和语调表情。面部表情如微笑，姿态表情如走路的姿势、鼓掌，语调表情如说话的语气、断句的方式。通过训练，表情可能和实际的情绪状态不一致。</p>\n<p>情绪从状态可分为心境、激情、应激。心境是微弱而持久、弥漫的，激情是强烈而短暂的，应激是高度紧张的。从生物进化的角度可分为基本情绪和复合情绪。基本情绪包括喜怒哀恐，婴儿在出生一两天就会自发性地微笑。复合情绪是由基本情绪的不同组合派生而来的。</p>\n<p>社交情绪：内疚是对想象或实际的罪行或过失负有责任。羞耻是和常模不一样，强调差异性。</p>\n<p>恐惧是由现实危险引起的，焦虑是由非现实危险引起的。所以社交恐惧准确地说可能是社交焦虑。</p>\n<p>婴儿的微笑有三个发展阶段：自发性的、无选择社会性的、有选择社会性的。即无人就笑、有人才笑、分人笑。</p>\n<p>婴儿到一个陌生环境后，对母亲的分离焦虑，分三个阶段：抗议 冷漠\n适应。</p>\n<h3 id=\"意志\">意志</h3>\n<p>下象棋走一步要犹豫很长时间，或者不推演直接就走，都叫和意志的果断性相反；一步走错陷入懊悔，影响了之后的决策速度，叫与意志的自制性相反；下一半不想下了，叫和意志的坚韧性相反；不知道自己为什么做要下象棋这个决定，叫与意志的自觉性相反。</p>\n<p>在意志行动的准备阶段里可能会有一些动机冲突，勒温和米勒把内心冲突分为四类：</p>\n<p>双趋式冲突：在两个吸引人的目标之间难以抉择。这时候我们要搬出决策终端机：</p>\n<style>\n  body { font-family: Arial, sans-serif; }\n  #options { margin-bottom: 10px; }\n  .option { margin: 5px 0; }\n  button { margin-right: 5px; }\n</style>\n<div id=\"options\">\n\n</div>\n<input type=\"text\" id=\"newOption\" placeholder=\"下一步要干什么...\">\n<button onclick=\"addOption()\">添加选项</button>\n<button onclick=\"chooseRandom()\">随机决策</button>\n<script>\n  let options = [];\n  const addOption = () => {\n    const text = document.getElementById('newOption').value.trim();\n    if (text) {\n      options.push(text);\n      document.getElementById('options').innerHTML += `<div class=\"option\">${text}</div>`;\n      document.getElementById('newOption').value = \"\";\n    }\n  };\n  const chooseRandom = () => {\n    if (!options.length) alert(\"请先添加一些决定选项！\");\n    else alert(\"下一步应该: \" + options[Math.floor(Math.random() * options.length)]);\n  };\n</script>\n<p>双避式冲突：在两个不情愿的情境中必须选择其一。比如某门害怕学不好的课，学它，和重修，必须选一个。</p>\n<p>“拉康精神分析理论碎片”“Meme\n图合订本” 等笔记，单看某一个都属于趋避式冲突，因为在写这些笔记的时候就能感觉到既有利又有弊。把它们结合起来看，先改哪一个，后改哪一个，改还是不改，就是双重趋避式冲突。</p>\n<p>第一叛逆期在幼儿期的 3 至 4\n岁，是自我意识的第一个飞跃，实现自我意志，反抗父母控制。</p>\n<h3 id=\"语言\">语言</h3>\n<p>语言是社会现象，是交流的工具，在学会语言之前，婴儿用哭表达需要；言语是心理现象，是交流的过程，以语言为载体，没说出来的心里话属于是内部言语。</p>\n<ul>\n<li>10-14 月：言语发生</li>\n<li> 1 至 1.5 岁掌握第一批词汇，在五六十个</li>\n<li> 1.5 岁能说出双词句和多词句，2 岁说出复合句</li>\n<li> 19-21 月：词汇量增长最快</li>\n<li> 20-30 月（1.5 至 2.5 岁）：掌握母语基本语法的关键期</li>\n<li> 36 月：基本掌握了母语的语法规则系统和全部发音，词汇量有 1000 个</li>\n<li> 3 至 5 岁：口语发展的快速期</li>\n</ul>\n<p>身体语言包括脸上的目光和表情，身上的姿势和服化道，肢体上的手势和触摸；还有人际距离也属于是身体语言。公众距离在\n3 米 7 以上，是一对多、单向的如演讲；商业上的社交距离在 1 米 2 到 3 米\n7；朋友间的个人距离在 45 厘米到 1 米 2；亲人间的亲密距离在 45\n厘米以内。</p>\n<p>个体全部社会化的前提是语言社会化。</p>\n<h2 id=\"行为主义-反射\">行为主义 - 反射</h2>\n<p>条件反射在无条件反射的基础上形成。经典条件反射研究\nS-R，即刺激 - 反应，把一个无条件刺激和一个条件刺激配对，最后条件刺激能引发无条件的反应，如巴普洛夫的狗。在巴甫洛夫的狗里，无条件刺激是食物，条件刺激是铃声，无条件反应是流口水；操作性条件反射研究\nS-O-R，O\n是个体，通过主动操作环境来获得奖励或避免惩罚，形成某种行为模式，如斯金纳箱。</p>\n<p>无条件反射是本能的原因造成本能的结果。条件反射是过去有两个因素同时造成一个结果，后来一个因素就能引发结果。一个本能的因素如被蛇咬会痛和流血，通过无条件的反射造成恐惧，同时有一个不直接造成结果的因素在场，如看到了蛇的形状，后来一个无条件的刺激，如看到了像蛇形状的井绳，就能造成结果。社交焦虑也是类似，如过去在有人在场的环境下被人责骂，有了羞耻感。无条件刺激是被人责骂，条件刺激是有人在场，无条件反应是羞耻感。本来是无条件刺激被人责骂引发无条件的反应羞耻，后来是条件刺激有人在场会引发无条件反应羞耻。</p>\n<p>斯金纳的操作性条件反射：正和负指的是操作，呈现或者移除某个刺激。强化和惩罚指的是在操作之后，促进还是抑制事件的再次发生。</p>\n<p>正强化是呈现（+）一个正刺激，负强化是移除（-）一个负刺激。它们都使行为增加。</p>\n<p>正惩罚是呈现（+）一个负刺激，负惩罚是移除（-）一个正刺激。它们都使行为减少。</p>\n<ul>\n<li>给正向刺激使行为增加，称为正强化。如工作强 -&gt; 多发工资 -&gt;\n工作更强。</li>\n<li>给负向刺激使行为减少，称为正惩罚。如工作失误 -&gt; 扣钱 -&gt;\n减少工作失误。</li>\n<li>移除负向刺激使行为增加，称为负强化。如逃避社交 -&gt; 没有感到焦虑\n-&gt; 更加逃避社交。</li>\n<li>以前的正向刺激没有出现，使行为减少，称为无强化。如玩游戏 -&gt;\n没有新鲜感 -&gt; 不玩游戏。</li>\n<li>移除正向刺激使行为减少，称为负惩罚。如晚上睡得晚 -&gt; 把手机拿开\n-&gt; 晚上睡得早。</li>\n</ul>\n<p>观察学习是指，自己观察到别人的行为在收到奖励或惩罚之后，会调整自己的行为。</p>\n<p>朝向反射：新的刺激抑制旧的条件反射。感官朝向刺激。</p>\n<h2 id=\"发展心理学\">发展心理学</h2>\n<p>皮亚杰认为</p>\n<ol type=\"1\">\n<li>心理起源于动作：动作是主客体之间相互作用的中介，最早的动作是先天的无条件反射。</li>\n<li>心理发展有内因和外因，内因有神经系统和内分泌系统的成熟、已有的经验图式、平衡性，外因包括社会环境，他人</li>\n</ol>\n<p>图式是什么意思：你在手机上玩和平精英，学会了用四指操作人物移动和射击后，这个四指操作的图式可以迁移到其他类似的\nFPS\n手游上，如三角洲行动。三角洲对你而言是一个新的刺激，把新的刺激整合到你已有的四指操作的图式上，即你在三角洲上照样可以使用四指操作，这叫把新的情形同化到已有的认知图式上。在打三角洲的过程中，你会遇到和和平精英不同的游戏机制，比如它的受击部位有好几种，胳膊或者腿受击了之后都要对这些部位单独地使用药品，腿受伤了还会减慢移动速度。这会造成你的战术有所改变，你原来在和平精英上的战术不能完全地应用到三角洲上了，比如在腿受伤的情况下，“先逃跑，后打药” 这个战术可能就行不通，你必须要应用新的战术，这叫你的战术图式在接受新的刺激之后，顺应了这个被同化的刺激，从而你原有的图式变成了新的图式。</p>\n<p>同化：把新的刺激同化到原有的图式里，从而用原有的图式应对新的刺激；顺应：当原有的图式不能应对新的刺激时，改变原有的图式。同化是用原有的方法解决新的问题，顺应是当原有的方法不能解决新的问题时，改变方法。</p>\n<p>维果茨基认为</p>\n<ol type=\"1\">\n<li>低级的心理机能是从动物进化而来的，如无意注意</li>\n<li>高级的心理机能是通过人的生产活动及符号系统的中介而内化得来的</li>\n</ol>\n<p>心理机能从低级发展到高级有四个指标：随意化，概括 - 抽象化，整体化，个性化。随意化是指自己的有些行为是自己有意而为之的，可以被自己的意识控制；概括 - 抽象化是指可以通过概念，而不必需要具体的形象来讨论事物；整体化是指各种心理机能形成一个整体的心理结构。</p>\n<p>最近发展区是什么意思：在最近发展区之前，是人已经可以独立完成的任务，如学会了象棋棋子的摆法；下一步是通过他人的教学和协助，学会了象棋的规则，每一个子的走法，判定胜利的规则；在最近发展区之后，是人即便依靠他人的协助也无法完成的任务，如一个刚学会象棋棋子的摆法，还没有进入最近发展区学习象棋规则的人，让他去参加比赛拿奖。最近发展区告诉我们，在教学的时候，要先教学仅依靠他人的帮助才能独立完成的任务，而不是即使依靠他人的帮助也无法完成的任务。</p>\n<p>玛西亚认为，自我同一性的实现有两个维度，承诺和探索。承诺是我知道了我要成为什么样的人，探索是经过了一系列尝试。</p>\n<ul>\n<li>无承诺无探索：同一性迷乱</li>\n<li>有承诺无探索：父母想让我 xxx，于是我\nxxx，但我不知道为什么要这样：同一性早闭</li>\n<li>有探索无承诺：内心斗争，同一性延迟：同一性危机</li>\n</ul>\n<p>埃里克森把人心理的发展分为八个阶段，每一个阶段有他预期所达到的效果，而为了达到这些效果，必须要解决一对矛盾。如果矛盾没有被解决的话，就会产生问题，并滞留到下一个阶段里。在下一阶段若出现上一阶段的问题，称为退行。这八个阶段的右端点大致成一个等比数列：1.5，3，5，11，青春期结束\n21，40，65。它的分界线是模糊的，因人而异。</p>\n<p>婴儿前期的特点是，如果妈妈离开了就会哭，因为孩子还没有发展出客体恒常性，认为妈妈离开了就是永远地离开了。是基本信任和不信任的冲突。关键是要获得身体接触。</p>\n<p>埃里克森的第二个阶段和第三个阶段有什么区别：第二个阶段是自主对羞耻的冲突，获得意志品质，有对自己身体的控制权，我能自己做一些事情；第三个阶段是主动对内疚的冲突，获得目标品质，我知道我为什么要做这些事情。</p>\n<p>1.5 至 3 岁的婴儿后期：我能自己做；3 至 6\n岁的幼儿期：我知道我为什么要这样做；6 至 12 岁的童年期：我能一直做。</p>\n<p>婴儿的气质：按婴儿对外界刺激的反应程度，如果反应不大，有正面的情绪，称为容易型；如果反应激烈，称为困难型；如果反应很小，称为弛缓型。</p>\n<p>加德纳的多元智能理论提出 8\n种智能：语言，逻辑 - 数学，空间，肢体 - 动觉，音乐，人际，内省，自然观察。这包含了我们日常所说的情商</p>\n<h2 id=\"社会心理学-1\">社会心理学</h2>\n<p>社会心理学的三个阶段是，启蒙期，形成期和确立期。启蒙期从古希腊哲学家的思辨到\n19 世纪上半叶（1879 年科学心理学诞生）。形成期的末端是 1908\n年，麦独孤的《社会心理学导论》和罗斯的《社会心理学》出版，标志着社会心理学诞生和形成。1924\n年，奥尔波特的《社会心理学》出版，这第三本书确立了实验法的核心地位，从它之后就是第三个阶段。想 - 看 - 测。</p>\n<p>社会行为是人对社会因素所引起的，并对社会造成影响的反应和反应系统。</p>\n<p>社会行为公式：Behavior = f (Person, Environment)\n由勒温提出。人的行为是其个人因素与其所处环境因素相互作用的一个函数。</p>\n<ul>\n<li>生物理论，遗传和本能。麦独孤提出 12 种本能。</li>\n<li>条件反射：社会学习理论 (行为主义)：连结 (条件反射的建立)、强化 (条件反射的重塑) 和模仿。外归因，不关注当时的主观情绪</li>\n<li>经济，诱因理论</li>\n<li>认知理论：取决于对社会情境的知觉和加工过程</li>\n</ul>\n<p>社会心理是社会刺激和社会行为之间的中介过程，是由社会因素所引起并对社会行为具有引导作用的心理活动。</p>\n<p>生活的意义有四个：自主、完成自己的目标和别人分配的任务、建立关系、自尊（认识自己，对自己有积极的评价）。、</p>\n<hr>\n<p>社会化和自我概念</p>\n<p>社会化是指，让一个社会成员具有以下四点：技能、规范、目标和角色。社会化的载体有家庭、学校、参照群体、大众传媒。</p>\n<p>自我概念是指个体如何看待自己，类似詹姆士的客我。行动由主我发起，由客我控制。</p>\n<p>构建自我概念的四条路：自己的行为、他人的行为、与别人比较、自己的反省。</p>\n<ul>\n<li>自我觉知：注意在自己身上。包括内在自我觉知和公众自我觉知。</li>\n<li>自尊：个体对其社会角色自我评价的结果，与情绪相关。杨国枢等人把自尊分为四种取向：个人取向、他人取向、关系取向、家族或团体取向。詹姆士认为自尊\n= 成功 / 抱负。</li>\n<li>自我提升：收集和解释自己的信息，以一种倾向于对自己做出正面评价的方式。</li>\n<li>自我确认：找证据来证实自我概念。</li>\n<li>自我效能：我有能力完成某件事。</li>\n<li>自我障碍：提前准备的用来解释失败的行为。</li>\n<li>自证预言：罗森塔尔效应，自己对他人的期望会影响他人的行为。</li>\n<li>自我检控：根据他人的自我表演来调整自己的自我表演</li>\n<li>自我表演的六种策略：只展示正面信息、显示自己的正直让他人内疚、谦虚、恳求、恫吓、逢迎。</li>\n</ul>\n<p>自我偏差：</p>\n<ul>\n<li>焦点效应：聚光灯打在我身上；透明度错觉：别人能看出来我隐藏的情绪</li>\n<li>自利偏差：我比别人好</li>\n<li>虚假一致性：别人和我的想法一样；虚假独特性：我是超乎寻常的</li>\n<li>盲目乐观：如在玩含运气成分的游戏时，如打牌，认为下一把会拿到好牌</li>\n</ul>\n<hr>\n<p>社会知觉与归因</p>\n<p>分类以原型为基础，分类后可能会夸大类内的相似性，以及类间的差异性。</p>\n<p>个人知觉是指，根据获取的有限信息，如情绪，形成对某个人的印象：</p>\n<ul>\n<li>第一印象包括好坏、能力强弱、主被动这三个维度。</li>\n<li>整体印象包括平均模型、累加模型、加权平均模型。多数人使用中心品质模型，只关注几个主要的点，忽略次要的点</li>\n<li>晕轮 / 负晕轮效应：一个高分 / 低分项会影响其他项</li>\n<li>正性偏差：总分为正。因为自己心情好，或者认同对方。</li>\n</ul>\n<p>刻板印象是指人们通过自己的经验对某类人或事形成的较为固定的看法。在有限经验的基础上形成的刻板印象有消极的作用，会造成偏见和歧视。</p>\n<p>罗特提出控制点理论：内控者认为事情的结果取决于自己的努力程度，控制点在内部；外控者认为事情的结果取决于自己不能控制的各种力量，控制点在自己之外。</p>\n<p>为什么说对可控因素的归因，人们更可能对行为做出变化的预测；对不可控因素的归因，人们较可能对未来的行为做出准确的预测：</p>\n<ol type=\"1\">\n<li>控制 -&gt; 变，不控制 -&gt; 不变</li>\n<li>不变 -&gt; 和上一次一样 -&gt; 准确的预测</li>\n<li>不可控 -&gt; 不控制</li>\n</ol>\n<p>影响归因的主要因素包括：社会视角，当事人和旁观者对当事人的归因有偏差；观察位置，在不同空间位置下，会倾向于关注凸显出来的信息；时间因素，对过去很久的事件倾向于归因到背景；</p>\n<p>基本归因错误：他人成功和失败时都倾向于内归因，是因为他自己，不是因为环境。</p>\n<p>把自己的失败外归因，把他人的失败内归因都是一种自我价值保护的倾向，动机性的归因偏差。</p>\n<p>凯利三维归因理论：高特异性是一对一，低特异性是一对多；高共同性是多对一，低共同性是少对一；高一致性是在以前发生过，低一致性是在以前没有发生过。这是一个经验的模型，百分比为实验结果</p>\n<ul>\n<li>三高归于刺激客体（61%）：小明是春晚现场的观众，他只对节目 A\n笑了，其他观众也对节目 A 笑了，且小明看春晚重播的时候还是对那个节目 A\n笑了，这说明小明笑的原因是因为那个节目 A 有意思。</li>\n<li>低低高归于行为主体（86%）：小明是春晚现场的观众，他对节目 A\n笑了且对其他很多节目也笑了，但是其他观众对节目 A\n都没有笑，且小明看春晚重播的时候还是对那个节目 A\n笑了，这说明小明笑的原因是因为他笑点低。</li>\n<li>高低低归于情境（72%）：小明是春晚现场的观众，他只对节目 A\n笑了，但是其他观众对节目 A 都没有笑，且小明看春晚重播的时候对节目 A\n也没有笑，这说明小明笑的原因是因为他只在那个环境下想笑。</li>\n</ul>\n<hr>\n<p>他人在场</p>\n<p>扎荣克的优势反应强化说认为，当他人在场的时候，优势反应受激发，弱势反应受抑制。即熟悉的事情做得更好，不熟悉的事情做得更差。</p>\n<p>从责任分担的角度看：在多人共同完成一件任务时，单人付出的努力可能比单独完成时偏少，因为被评价的焦虑变小了，这叫社会懈怠或社会逍遥。解决方法是加强考核，把每个人努力的成果量化。旁观者效应：他人在场对利他行为有负面影响。如在公交车上互相等别人先让座。</p>\n<p>社会促进：他人在场也可能起激励作用，如朋友之间。</p>\n<p>从众是在真实或想象的群体压力下，被动地接受群体影响，自愿地与群体保持一致。若思想和行为都一致，称为真从众；若思想一致，但行为不一致，称为反从众；最常见的是行为一致，但思想不一致，称为权益从众。阿希做过从众实验，从众会受到群体压力的影响，在情境模糊、难做出判断时也会受到影响。</p>\n<p>模仿是在没有压力的情况下，自己有意或无意地受他人的影响使自己与他人相同或相似。塔尔德模仿律：下降律是从社会上层向下层扩散，下层有模仿上层的倾向；几何级数律是传播的速度，类似指数函数；先内后外律是先模仿自己文化圈子内部的。</p>\n<p>暗示是在非对抗的条件下，使被暗示者接受暗示者的观点，或者使其行为调整为与暗示者所期望的一致。如果成功了称为暗示，如果效果相反，称为反暗示。暗示的客体可能是模仿或从众的主体。</p>\n<hr>\n<p>态度</p>\n<p>态度是个体对特定对象总的评价和稳定性的反应倾向。个体：说明态度是一个人的；</p>\n<p>特定对象：如对人，事，物，观念总的评价。说明态度总是指向一个对象，没有无对象的态度。而价值观是没有直接和具体的对象的，价值观是抽象的。</p>\n<p>稳定性：说明态度在形成之后会持续一段时间。这个时间或长或短，类似发展心理学的分阶段和不分阶段的对立统一，分阶段是为了便于研究。</p>\n<p>反应倾向：说明态度不是反应，它是在反应表现出来之前的。态度影响，而非决定行为。方向分正向和负向，正 / 负的倾向有强度，外露的程度称为外显度，卷入的程度称为深度，接近核心价值的程度称为向中度。</p>\n<p>凯尔曼认为，态度的形成，分依从，认同和内化三个阶段。依从是一种权益之计，在外显行为方面表现地与他人一致，是印象管理的策略；认同是自愿的与他人一致，情感或吸引力占主要作用；内化是在内心真正相信并接受他人的观点，理智占主要作用。</p>\n<p>态度的转变：</p>\n<ul>\n<li>海德平衡理论有三个对象\nPOX，即主体、他者和另一个对象。当这三者间的关系为三正或两负一正时为平衡状态，否则为不平衡状态，处于不平衡状态时会由费力最小原则向平衡状态转化。</li>\n<li>霍夫兰德态度转变模型四要素：发送者、信息、接收者、情境。情境不等于信道，可能是指接受者的心理状态\n<ul>\n<li>从发送者来说，如果发送者对接收者的威信高，在信息差异较大时说服效果好；反之，在信息差异适中时说服效果好</li>\n<li>从信息来说，信息能引起的畏惧程度 - 说服效果曲线为 ∩\n型。面对面口头交流的效果 &gt; 书面交流的效果。</li>\n<li>从情境来说，信息重复次数 - 说服效果曲线为 ∩ 型</li>\n</ul></li>\n</ul>\n<p>态度的 ACB\n模型是情感（Affection）、认知（Cogntion）、行为倾向（Behavioral\ntendency），在成分不均的时候，通常 A 占主要地位。</p>\n<hr>\n<p>关系</p>\n<p>人际关系是指人与人在沟通与交往中建立起来直接的心理上的联系。反映它的深度的一个指标是自我暴露的程度，从浅到深分四个阶段：兴趣爱好、态度、自我概念和其他的人际关系、隐私。隐私指的是不愿意让他人知道的，且不危害社会的个人的秘密。</p>\n<p>人际吸引是个体与他人之间情感上互相亲密的状态，是人际关系上的一种肯定形式，分亲合（合群），喜欢和爱情。亲合的早期表现是亲子间的依恋。</p>\n<p>夫妻和未婚子女组成的家庭为核心家庭，如父母和正在上小学的孩子；夫妻和一对已婚子女组成的家庭为主干家庭，如爷爷奶奶和父母；夫妻和两对及以上的已婚子女组成的家庭为联合家庭，如外公外婆和父母、舅舅、舅妈。</p>\n<hr>\n<p>沟通</p>\n<p>沟通的结构包括发送者，接受者，信息，通道（信息的载体），背景，障碍，反馈（把对方发送的信息回传一些，确定理解了）。</p>\n<p>在沟通双方的角色互相都明确时，称为现实沟通。角色不明确时称为虚拟沟通。如在互联网上，陌生的网友之间互发消息属于是虚拟沟通，但熟悉的网友之间互发消息属于是现实沟通。</p>\n<p>此站点是一种单向沟通，书面沟通的方式，是通道的一种，也是障碍的一种。但是如果有人给我提意见，我改了，也是双向沟通。</p>\n<hr>\n<p>角色</p>\n<p>角色分类的方式有：</p>\n<ul>\n<li>获取方式（先天 - 后天努力，如母亲和教师）</li>\n<li>自觉性（演员角色 - 性别角色）</li>\n<li>社会功能（表现型 - 功利型，公平 - 效率，如学者和企业家）</li>\n<li>开放程度（规定型 - 开放型，如警察和朋友）</li>\n</ul>\n<p>角色失调按严重程度分四类：角色冲突、角色不清、角色中断、角色失败。</p>\n<p>在同一个角色内，不同人对其不同期望造成的冲突称为角色内冲突。同一个人在不同角色间的冲突称为角色间冲突，如职业角色和家庭角色，某个时间用来工作还是育儿。</p>\n<h2 id=\"人格和自我\">人格和自我</h2>\n<p>人格帮助解决回答的问题是我是谁，可以在心理过程中得到表现。</p>\n<ul>\n<li>人格在遗传和环境的交互作用下形成，每个人的人格都是独一无二的。人格独特性中，典型性和差异性的区别是\n1 和 2 的区别。</li>\n<li>经常表现出来的心理与行为特点才算是人格的一部分，而偶尔表现出来的不算，这说明人格是可以被改变的。</li>\n<li>用 UML 类图表示，人格的组成元素 ——◆\n人格，它们是组合关系。就像发动机 ——◆\n汽车，发动机是汽车的一部分，且如果把发动机拆下来了，汽车就跑不了了。人格统合性的组织功能是架构师，匹配功能是适配器，健康功能是生命力。</li>\n</ul>\n<p>自我概念是指对自己的认知。它保持内在一致性（类似人格的统合性），决定个体对内和对外的期待，解释经验（在萨提亚冰山模型里处于最底层）</p>\n<p>男女在人格特征方面的差异，称为性别；在生物学上的差异称为性；社会对其的期待称为性别角色。从汉字来看，忄与心理活动有关，所以 “性” 就是 “与生存相关的心理活动”。</p>\n<p>孟子认为人是性善的，告子认为人是无善无恶的：</p>\n<blockquote>\n<p>告子曰：“性犹湍水也，决诸东方则东流，决诸西方则西流。人性之无分于善不善也，犹水之无分于东西也。”<br>\n孟子曰：“水信无分于东西。无分于上下乎？人性之善也，犹水之就下也。人无有不善，水无有不下。今夫水，搏而跃之，可使过颡；激而行之，可使在山。是岂水之性哉？其势则然也。人之可使为不善，其性亦犹是也。”<br>\n——《孟子・告子上》</p>\n</blockquote>\n<p>荀子认为人是性恶的：</p>\n<blockquote>\n<p>人之性恶，其善者伪也。（善良的人是通过后天努力达到的）<br> ……<br>\n孟子曰：“人之性善。” 曰：是不然。<br> ——《荀子・性恶》</p>\n</blockquote>\n<p>世硕认为人是有善有恶的：</p>\n<blockquote>\n<p>周人世硕，以为 “人性有善恶，举人之善性，养而致之则善长；性恶，养而致之则恶长”。如此，则性各有阴阳，善恶在所养焉。故世子作《养书》一篇。密子贱、漆雕开、公孙尼子之徒，亦论情性，与世子相出入，皆言性有善有恶。<br>\n——《论衡・本性》</p>\n</blockquote>\n<p>下面这个表格不一定准确，只是一个初步的总结，它的内容大于形式，表身大于表头：</p>\n<table>\n<colgroup>\n<col style=\"width: 4%\">\n<col style=\"width: 36%\">\n<col style=\"width: 38%\">\n<col style=\"width: 21%\">\n</colgroup>\n<thead>\n<tr>\n<th></th>\n<th>守序</th>\n<th>中立</th>\n<th>混乱</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>善良</strong></td>\n<td>霍妮的真实自我，是灵性和慧根，是可能的最好结果，只要环境适宜就能表现出来</td>\n<td>阿德勒认为人生而有自卑感，所以人格发展的目标是追求卓越</td>\n<td>弗洛伊德的超我，是压力，提供责任感和负罪感</td>\n</tr>\n<tr>\n<td><strong>中立</strong></td>\n<td>弗洛伊德的自我，是本我、现实和超我三方面的调节者</td>\n<td>霍妮的现实自我，是别人在当下看到的，自己在当下表现出来的</td>\n<td>拉康的 $，人的欲望都是大他者的欲望</td>\n</tr>\n<tr>\n<td><strong>邪恶</strong></td>\n<td>荣格的阴影，是每个人都有的</td>\n<td>霍妮的理想自我，是一种防御的方式，是对缺少东西的投射，会产生不符合实际的期望</td>\n<td>弗洛伊德的死本能</td>\n</tr>\n</tbody>\n</table>\n<p>机能主义的代表人物詹姆士提出主我和客我：主我是进行中的意识流，是动力；客我是对自己的认知和评价，制约主我活动。符号互动论的米德沿用了他的说法，客我是社会我，自我是主我和客我互动的结果。哈特认为，在\n8 个月之内婴儿还没有萌发自我意识，在 1 岁前后出现了主体我的意识，在 2\n岁前后出现了客体我的意识，主体我表现为可以把自己和别人分开，客体我表现为可以使用第一人称代词 “我”，并能从照片中认出自己。</p>\n<p>詹姆斯还把自我分为了物质自我、社会自我和精神自我。物质自我是肉体，以及 “一切我们称之为自己独有的东西”，包括属于自己的物品。社会自我是社会角色，在不同场合和关系下表现出来的自我。精神自我分为主我和客我，也可以被其他精神分析理论细分。</p>\n<p>镜我是由他人的判断所反映的自我概念。镜我和客我的区别是，前者是他人的判断，后者是自己的判断。</p>\n<p>科斯塔和麦克雷提出大五人格 OCEAN：O 是开放，C 是尽责\nConscientiousness，E 是外向，A 是宜人 Agreeableness ，N 是神经质\nNeuroticism （情绪不稳定）</p>\n<p>A/B 型人格为竞争 / 松弛型人格。</p>\n<p>希波克拉底按外向 - 情绪不稳定程度把气质分为四个象限：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      |N</span><br><span class=\"line\">抑郁质|胆汁质</span><br><span class=\"line\">------+-----E</span><br><span class=\"line\">黏液质|多血质</span><br><span class=\"line\">      |</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"量表\">量表</h2>\n<p>艾森克人格问卷：是艾森克及其夫人制定的。EPQ 分 EPNL 四个量表。E\n是内外向，得分高是外向的；P\n是精神质，得分高的可能是孤独、敌意、不适应环境的；N\n是神经质，得分高的可能是情绪不稳定的；L 是说谎。典型、倾向和中间的四个 T\n分点：38.5 43.3 56.7 61.5</p>\n<p>自评量表：</p>\n<p>SDS：53-62 为轻度抑郁，63-72 为中度抑郁，73 及以上为重度抑郁</p>\n<p>SAS：50-59 为轻度焦虑，60-69 为中度焦虑，70 及以上为重度焦虑</p>\n<p>卡氏 16PF：是卡特尔制定的，他 1890\n年发布了《心理测验与测量》的论文。16PF 是 16\n种互相独立的根源特质，根源特质和表面特质的区别是，前者是有解释性的，可决定人的行为。1-3\n为低分，8-10 为高分。答题形式为折中是非式：是、否、不一定。</p>\n<h3 id=\"明尼苏达多相人格测验\">明尼苏达多相人格测验</h3>\n<p>统计学家 George Box\n说：所有模型都是错的，有些是有用的。这里展示的是对于明尼苏达多相人格测验（Minnesota\nMultiphasic Personality\nInventory）的一系列判断题，回答是或否对最终结果的影响。依据是<a href=\"https://zhuanlan.zhihu.com/p/600297840\">知乎网友 aweeee</a> 分享的\n<code>xlsx</code> 文件。</p>\n<p>在编制这个量表的过程中采用了正常与异常两组受测者的样本。可用于辅助医疗诊断，也可用于正常人的个性评定。</p>\n<p>测试过程为：</p>\n<ol type=\"1\">\n<li><p>做一道判断题，回答是或否</p></li>\n<li><p>答完一道题之后，对某一个或者某几个量表加 1 分或不加分</p></li>\n<li><p>答完所有题之后，会得到十四个分，包括四个效度量表（Q L F\nK）和十个临床量表（Hs D Hy Pd Mf Pa Pt Sc Ma\nSi）。这十四个分称作原始分。如果你做的是 566\n道题的，额外会有五个附加量表（MAS Dy Do Re Cn），且 566 道题里有 16\n个重复的题。笔者做的都是两百道题的，只有这十四个分。</p></li>\n<li><p>特别地，对这五个临床量表加上一定比例的 K 分，加完之后的称为 K\n校正分</p>\n<ul>\n<li>Hs += 0.5K</li>\n<li>Pd += 0.4K</li>\n<li>Pt += 1.0K</li>\n<li>Sc += 1.0K</li>\n<li>Ma += 0.2K</li>\n</ul></li>\n<li><p> 现在我们有十四个分。对除 Q 之外的十三个分分别计算 T 分：</p>\n<p><span class=\"math display\">\\[\nT = 50 + \\frac {10 \\times (你的得分 - 常模均值)}{常模标准差}\n\\]</span></p>\n<p>其中，常模均值和常模标准差由你的国籍、性别和年龄范围选择。常模均值是一群正常人（健康人）做的平均分，用你的得分与其相减，刻画的是你与正常人的偏离程度；常模标准差刻画的是这一群正常人得分的离散程度，用其作分母，可以缩小误差。</p></li>\n<li><p>一些医院的心理 CT 系统用的就是这个量表。根据计算出来的分，把 100%\n的概率分成三份，分到三个类里边：正常、焦虑抑郁障碍、精神病性障碍。</p></li>\n</ol>\n<p><strong>四个效度量表，测你做的结果是否有效：</strong></p>\n<p>Q：（Question）【疑问】：你没有回答的题目数。22/399 或\n30/566，则该答卷无效。</p>\n<p>在实际测验中，与 “性” 有关的几个题目可以选择跳过回答。其他题目必须回答。</p>\n<p>L：（Lie）【说谎】：你往圣人方向靠的程度。L\n原始分若超过十分，则不能信任结果。</p>\n<p>例如</p>\n<blockquote>\n<p>做游戏的时候，我只愿赢而不愿输</p>\n</blockquote>\n<blockquote>\n<p>偶尔我会想到一些坏得说不出口的事</p>\n</blockquote>\n<blockquote>\n<p>有时我也讲假话</p>\n</blockquote>\n<p>等的这一些问题，回答【否】会加分</p>\n<p>F：（Validity）【诈病】：你装病的程度，或者判断力丧失的程度</p>\n<p>例如</p>\n<blockquote>\n<p>有人一直想毒死我</p>\n</blockquote>\n<blockquote>\n<p>有时我觉得有鬼神附在我身上</p>\n</blockquote>\n<blockquote>\n<p>我能在我周围看到其他人所看不到的东西、动物和人</p>\n</blockquote>\n<p>等的这一些问题，回答【是】会加分</p>\n<p>K：（Correction）【校正】：你对自己的私事隐瞒的程度、防御的程度</p>\n<p>例如</p>\n<blockquote>\n<p>当我正在做一件重要事情的时候，如果有人向我请教或打扰我，我会不耐烦的</p>\n</blockquote>\n<blockquote>\n<p>我觉得许多人喜欢夸大自己的不幸，以便得到别人的同情和帮助</p>\n</blockquote>\n<blockquote>\n<p>我不在乎别人对我有什么看法</p>\n</blockquote>\n<p>回答【否】会加分</p>\n<blockquote>\n<p>我几乎没有和家里人吵过嘴</p>\n</blockquote>\n<p>回答【是】会加分</p>\n<p><strong>十个临床量表：</strong></p>\n<p>Hs：（Hypochondriasis）【疑病】：你对自己身体过度关心的程度</p>\n<p>例如</p>\n<blockquote>\n<p>我的胃口很好</p>\n</blockquote>\n<blockquote>\n<p>我睡得不安，容易被惊醒</p>\n</blockquote>\n<blockquote>\n<p>我的身体和我的大多数朋友一样地健康</p>\n</blockquote>\n<blockquote>\n<p>我常觉得头上好象有一根绷得紧紧的带子</p>\n</blockquote>\n<blockquote>\n<p>我不容易疲倦</p>\n</blockquote>\n<blockquote>\n<p>有时候我觉得我的头顶一碰就疼</p>\n</blockquote>\n<p>问的都是与你身体相关的，如果你给的反常回答太多了：</p>\n<ul>\n<li>如果你说的是实话：说明你确实有这些症状，说明你很反常</li>\n<li>如果你说的一半是实话：说明你在过度关心得病，说明你很反常</li>\n<li>如果你说的是假话：说明你在诉苦，说明你很反常</li>\n</ul>\n<p>D：（Depression）【抑郁】：你抑郁的程度</p>\n<p>前 200 道题里，有 44\n道题涉及对【抑郁】这一项加分。笔者有一次抑郁的得分是\n22，最终【正常】的概率在 90% 以上，另一次得分\n38，【焦虑抑郁障碍】的概率在 90%\n以上。说明这是一个参量。我们来关注几个同时对其他很多参量造成影响的题目：</p>\n<blockquote>\n<p>我发现我很难把注意力集中到一件工作上</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【抑郁】【癔病】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】加一分</li>\n<li>如果回答【否】：【支配性】加一分</li>\n</ul>\n<blockquote>\n<p>我希望我能像别人那样快乐</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【抑郁】【精神病态】【精神衰弱】【社会内向】【外显性焦虑】【依赖性】【控制力】加一分</li>\n</ul>\n<blockquote>\n<p>我经常是快乐的</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】【癔病】【精神病态】【偏执】【外显性焦虑】【依赖性】加一分</li>\n</ul>\n<blockquote>\n<p>许多时候，我觉得浑身无力</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【疑病】【抑郁】【癔病】【精神衰弱】【依赖性】加一分</li>\n</ul>\n<p>Hy：（Hysteria）【癔病】：你天真幼稚外露的程度</p>\n<p>前 200 题中答【是】加分的有 11 道，有 4 道同时对【疑病】加分，另外 7\n道所描述的症状比【疑病】更反常、更 “躯体化”、不属于健康人应有的，例如：</p>\n<blockquote>\n<p>我的喉咙里总好象有一块东西堵着似的</p>\n</blockquote>\n<blockquote>\n<p>我觉得我的头到处都疼</p>\n</blockquote>\n<blockquote>\n<p>每星期至少有一、二次，我突然觉得无缘无故地全身发热</p>\n</blockquote>\n<p>答【否】加分的有：</p>\n<blockquote>\n<p>我喜欢看报纸上的犯罪新闻</p>\n</blockquote>\n<blockquote>\n<p>当一个罪犯可以通过能言善辩的律师开脱罪责时，我对法律感到厌恶</p>\n</blockquote>\n<blockquote>\n<p>我喜欢侦探小说或神秘小说</p>\n</blockquote>\n<blockquote>\n<p>看到血的时候，我即不怕，也不难受</p>\n</blockquote>\n<blockquote>\n<p>有时我真想骂人</p>\n</blockquote>\n<p>Pd：（Psychopathic\ndeviate）【精神病态】：你过分社牛、反社会、攻击性的程度</p>\n<p>答【是】加分的有：</p>\n<blockquote>\n<p>我从未有过正常的生活</p>\n</blockquote>\n<blockquote>\n<p>假如不是有人和我作对，我一定会有更大的成就</p>\n</blockquote>\n<blockquote>\n<p>和别人的家庭比较，我的家庭缺乏爱和温暖</p>\n</blockquote>\n<blockquote>\n<p>我小的时候，有一段时间我干过小偷小摸的事</p>\n</blockquote>\n<p>答【否】加分的有：</p>\n<blockquote>\n<p>我过去喜欢上学</p>\n</blockquote>\n<blockquote>\n<p>在聚会当中，尽管有人出风头，如果让我也这样做，我会感到很不舒服</p>\n</blockquote>\n<ul>\n<li>Mf：（Masculinity-femininity）【男女子气】：你向你相反方向的性别靠的程度</li>\n<li> Pa（Paranoia）【妄想】：你过分多疑和警惕的程度</li>\n<li> Pt（Psychasthenia）【精神衰弱】：你过分紧张、焦虑、恐怖的程度</li>\n<li> Sc（Schizophrenia）【精神分裂】：你思维混乱、情感淡漠、行为怪异的程度</li>\n<li> Ma（Hypomania）【轻躁狂】：你过分气质昂扬，思维飘逸，爱说的程度</li>\n<li> Si（Social introversion）【社会内向】：你内向的程度</li>\n</ul>\n<p><strong>五个附加量表：</strong></p>\n<ul>\n<li>MAS【外显性焦虑】：你完成不了复杂工作的程度</li>\n<li> Dy【依赖性】：你的心理不适应环境的程度</li>\n<li> Do【支配性】：你主导和面对现实的能力</li>\n<li> Re【社会责任感】：你愿意为你的行为负责的程度</li>\n<li> Cn【控制力】：你对你病理性表现的控制能力</li>\n</ul>\n<p><strong>一些有意思的题目：</strong></p>\n<p>从这一些题目，以及前面提到的题目，我们可以揣摩出题者的意图，从而反推出健康人的标准。</p>\n<blockquote>\n<p>有时，当我难为情的时候，会出很多汗，这使我非常苦恼</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【外显性焦虑】加一分</li>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>我知道我的烦恼是谁造成的</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【精神病态】【妄想】【轻躁狂】加一分</li>\n</ul>\n<blockquote>\n<p>我相信善有善报，恶有恶报</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【依赖性】加一分</li>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>我觉得大多数人是为了向上爬而不惜说谎的</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【癔病】和【妄想】加一分</li>\n</ul>\n<blockquote>\n<p>一切事情都由老天爷安排好了</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【社会责任感】加一分</li>\n<li>如果回答【否】：【抑郁】和【控制力】加一分</li>\n</ul>\n<blockquote>\n<p>我几乎每星期都去教堂 (或常去寺庙)</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<p>因为 MMPI 是由美国人制定的，两国的文化习俗不同。中国常模的 D 分和 Sc\n分都比西方常模高，其他的比西方常模低。类似的还有：</p>\n<blockquote>\n<p>我相信人死后还会有 \" 来世”</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【诈病】【男女子气】加一分</li>\n</ul>\n<blockquote>\n<p>我的脑子有点毛病</p>\n</blockquote>\n<ul>\n<li>如果回答【是】：【诈病】和【精神分裂】加一分</li>\n</ul>\n<blockquote>\n<p>我的判断力比以往任何时候都好</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【抑郁】加一分</li>\n</ul>\n<blockquote>\n<p>在我一生中，我从来没有感觉到象现在这么好</p>\n</blockquote>\n<ul>\n<li>如果回答【否】：【校正】【抑郁】和【癔病】加一分</li>\n</ul>\n<h2 id=\"变态与健康心理学\">变态与健康心理学</h2>\n<p>参考《变态心理学（第 6 版）》9787115448385</p>\n<p>在生物学上，完全变态发育的昆虫如蚕，有卵、幼虫、蛹、成虫这四个 “态”。在心理学上的变态是指在常态之外的心理状态。变态心理学也叫心理病理学。心理异常的连续谱模型类似光谱，从红到紫，最左边是完全正常，最右边是完全异常，它的分界线是模糊的。</p>\n<p>幻觉是指不真实的感知体验，如看到猪在天上飞，而别人看不到。妄想是不切实际的信念，如认为自己是天下第一，无人能敌。</p>\n<p>历史上对心理障碍的解释有三类，生物学理论，超自然理论和心理学理论。生物学理论如古代的中医认为人体内精气的流通会影响情绪，气发于心则喜、发于肝则怒、滞于脾则忧、滞于肺则悲、滞于肾则恐。古希腊的希波克拉底认为人体内有四种基本体液，包括心理异常在内的所有疾病都可以用体液失衡来解释，治疗方法除了与现代的休息，放松，调整生活节奏外，还包括放血。超自然理论如道教和佛教认为邪风入体和鬼魂附体会让人着魔。精神时疫是一群人突然都出现了一致的异常行为，如\n1374\n年德国持续了四个月的疯狂舞蹈症，大街上，家里，教堂上都有一群人手拉手地跳舞，并呼喊一些魔鬼的名字，这被解释为魔鬼附体。直到\n1991\n年，罗得岛的一所高中在没有毒气存在的证据下，发生了集体一氧化碳中毒的症状，医生解释为是对海湾战争使用毒气的恐惧造成的集体癔病爆发。心理学理论认为心理异常是心理创伤和压力造成的。</p>\n<p>现在变态心理学的取向有生物学取向，心理学取向和社会文化取向。</p>\n<p>行为主义的巴甫洛夫认为，心理异常是神经兴奋和抑制之间的冲突，是 IO\n系统的故障，若兴奋占优，抑制占弱，则为神经衰弱，反之为癔症；精神分析认为，心理异常是因为发展阶段固着、人格内的冲突、防御机制不成熟，是操作系统的问题；人本主义认为，心理异常是自我完善路上的障碍，是软件升不了级了。马斯洛认为心理异常最基本的表现是存在焦虑，是存在（保证手机存储空间足够）和责任（必须装微信）之间的冲突。</p>\n<p>如何判定心理异常：</p>\n<ul>\n<li>从硬件的层面看，比如大脑在车祸后损伤了一部分，内存条氧化了，接触不良了，这叫医学标准。</li>\n<li>从操作系统的层面看，比如病人自己的感受是痛苦的，写了一些报错的日志；或者用户是痛苦的，觉得这电脑太卡了。这叫内省标准，分病人的内省和观察者的内省。</li>\n<li>从跑分和天梯图的层面看，比如小明做的心理量表的分太偏离常模了，这叫统计学标准。</li>\n<li>从应用功能的层面看，比如小明的微信没有打开自启动和消息弹窗权限，造成别人给他发消息他没有回复。这叫社会适应标准。</li>\n</ul>\n<h2 id=\"心理咨询相关\">心理咨询相关</h2>\n<p>心理咨询工作的对象有三类人：健康是正常的充分不必要条件。健康是在正常的前提下，描述正常的程度。</p>\n<ol type=\"1\">\n<li>精神高度正常，且高度健康的人</li>\n<li>精神高度正常，但低度健康的人</li>\n<li>痊愈及潜伏期精神低度正常的人</li>\n</ol>\n<p>严重的第三类人不属于心理咨询工作的对象。</p>\n<hr>\n<p>法律只规定了能做和不能做的基线水平，伦理的要求比法律高。</p>\n<p>为什么说道德是偏个人的，伦理是偏客观的，伦理是实践道德的人生哲学：道德：通往德的一条道；倫理：倫 = 亻 + 亼 + 冊 = 人 + 集 + 册，理 = 治玉。</p>\n<p>在心理咨询师与来访者的专业关系中，咨询师有保密的责任，即使来访者去世之后仍要保密。保密的例外情况有：</p>\n<ul>\n<li>自愿的：来访者自愿将信息泄露给他人，或希望用信息诉讼别人</li>\n<li>危及生命的：来访者有即刻给自己或他人造成生命危险的可能 / 生命尽头的来访者希望加速自身死亡 / 来访者患有危及生命的传染性疾病，且可能危及他人</li>\n<li>司法的：成文法对保密的限制（来访者虐待儿童或老年人，或来访者被虐待）/ 法庭要求提供信息 / 针对咨询师的诉讼</li>\n<li>部分国家的：来访者在未来有犯罪的倾向（部分国家和地区）</li>\n</ul>\n<h2 id=\"防御\">防御</h2>\n<p>参考《心灵的面具：101 种心理防御》</p>\n<p>防御是将不愉快情绪的组成部分从我们的意识觉察中剔除出去的工作。我们每个人都有这样的内在机制，以保护自己免受情绪上的伤害。自我的防御机制是当自我把焦虑当作是负面的信号时产生的，自我承受了本我欲望和现实要求的双重压力。</p>\n<p>心理学家 Charles Brenner\n提出，情绪由感受和想法组成。感受更加内向且抽象，而想法则更直接关联到行动上。不同的负面情绪反映了不同的时间焦点：</p>\n<ul>\n<li><a href=\"https://www.zdic.net/zd/zx/jg/%E6%8A%91\">抑</a><a href=\"https://www.zdic.net/zd/zx/jg/%E9%AC%B1\">鬱</a>：与过去有关，伴随着糟糕事情已经发生的念头。你在一个密集不透风的树林里，被人用手按着头跪下来。</li>\n<li>焦慮：着眼于未来，担忧坏事即将发生。一群原始人在山上猎到了几只隹。当他们正在生灬做饭的时候，突然出现了一只虍，把一个人的囟给掀开了，并把他的心吃了。</li>\n<li>愤怒：集中于现在，怀有摧毁某物或某人的冲动。</li>\n</ul>\n<p>为了处理这些情绪，人们会使用（情感）隔离和（思维）潜抑两种基本防御方式。此外，还有其他多种防御手段来辅助这两种基础操作，除了分裂。</p>\n<p>有意识防御和潜意识防御：你的潜意识在控制一天 24\n小时的呼吸，但你也可以通过意识控制一段时间。如果你在看到这些名词的解释之前就有类似的想法，那可能是偏向有意识的防御。如果这些名词提供了一个新的角度来解释你之前可能从来没有意识到的防御，那可能是偏向潜意识的防御。</p>\n<p>向外：</p>\n<ul>\n<li>投射：你是一台放映机，你把你心里的一些部分投射出来，扭曲了你对他人的感知。你为了不体验某种情绪，将它投射出去，站在别人的视角上幻想别人以这种情绪看待你。你在害怕你自己做出某件事，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在害怕你做出某件事。你在生别人的气，为了不感受到这种情绪，你将它投射出去，所以你会认为别人在生你的气。\n<ul>\n<li>投射性指责：你对某些令人不悦的事负有责任，为了减轻负罪感，你指责另一个人。它的有意识版本叫 “将自我批评转向客体”</li>\n<li> 投射性认同：你向别人的脑海里扔石头，激起的波纹形状和你不喜欢自己脑海里的波纹形状一样。你诱导某人以你所期望的方式做出回应。</li>\n<li>点煤气灯：你脑子里的一团乱麻共振形成了别人脑子里的一团乱麻。你诱导某人以为自己的心理有问题。</li>\n</ul></li>\n<li>置换：一个人 A 带给你的不快情绪太多，你会在另一个人 B\n身上感受到。</li>\n<li>外化：你感受到自己心智的一部分属于自己之外。你认为某人会来谴责你，但这个某人是你自己。</li>\n</ul>\n<blockquote>\n<p>我只想知道属于我的是不是真的我的 还是由我替谁在保管着</p>\n</blockquote>\n<ul>\n<li>躯体化：你的身体在阻止你将某一违背你良心的愿望行动化。</li>\n</ul>\n<p>向内：</p>\n<ul>\n<li>内摄：你把别人的一部分纳入了自身，形成了另一个人的意象，作为一个情绪的靶子。你听了郭德纲的相声，以后当你情绪低落的时候，你会回想起他的形象。</li>\n<li>认同：\n<ul>\n<li>认同内摄物：你表现得像那一个人一样，那个人变成了你超我的一部分。你听了郭德纲的报菜名，以后当你自己报菜名的时候，你会模仿郭德纲的语气和断句方式。</li>\n<li>向攻击者认同：“踢猫效应” 的一部分或 “屠龙者变成龙” 的一部分：之前某个人\nA 以某种方式对待你，之后你用同样的方式对待另一个人 B</li>\n<li> 向受害者认同：为了缓解内疚情绪（比如你帮助不了某个受害者），你表现得像那个受害者那样并允许自己被伤害。</li>\n<li>认同丧失客体：你的某个至亲去世了。你表现地像他一样，象征性地维持着他的生命。</li>\n<li>去分化：自体 - 客体融合。你为了不感受到对失去某个人的恐惧，成为另一个人想让你成为的样子。</li>\n</ul></li>\n<li>转向自身：有自杀倾向的人不想感受对别人的愤怒，于是把对别人的愤怒转向自身。</li>\n</ul>\n<p>空中剧院：</p>\n<ul>\n<li>戏剧化：你为了让别人注意到你，在言语 / 行为中注入过多的情感。</li>\n<li>撤销和仪式化\n<ul>\n<li>撤销好的：做出一个违背你以前良心的事，证明你已经不是以前那个人。</li>\n<li>撤销坏的：你的良心在挣扎，于是你先做出一个违背良心的事（仪式），再做出一个遵循良心的事（仪式）来补偿前面的那件事，撤销了前面那件事。或者你有内疚感，于是做出一个仪式（可能是别人看起来很奇怪的事）来撤销内疚感。</li>\n</ul></li>\n<li>分裂：你无法接受一个复杂的人（“好的” 和 “坏的” 同时出现），将其分裂成了 “好的” 部分和 “坏的” 部分。你对某些人纯感受到 “好”、某些人纯感受到 “坏”。或者对同一个人某些时间纯感受到 “好”、某些时间纯感受到 “坏”。</li>\n<li>幻觉：你听到或看到不真实的想法。而这些想法是你努力不去想的。</li>\n<li>反客为主：你对某个糟糕事件的发生时间抱有疑虑，于是提前主动使该事件发生。</li>\n</ul>\n<p>披马甲：在日常生活中，我们常常披上各种 “马甲” 来掩饰真实的情感。</p>\n<ul>\n<li>假性独立：你对自己 “需要人帮助” 的想法感到窘迫，于是你不依靠任何人。</li>\n<li>病理性利他：你用帮助别人的形式为自己 “需要获得帮助” 的需求做一个代理。它继承自 “投射” 和 “向受害者认同”。通常和 “反向形成”、“受虐性挑衅”、“自大” 共存。</li>\n<li>反向形成：你对某个人很生气，但是你变得十分和善。</li>\n<li>对抗恐惧行为：你做一些让你感到害怕的事，来证明你不害怕。</li>\n<li>不认同：某个人带给你了某些东西，你努力表现地不像这个人。</li>\n<li>超理性：你使用次级过程思维（以时间为导向的逻辑思维）来回避情感。</li>\n<li>幽默：你通过开玩笑来造成一种轻松的氛围。</li>\n<li>最小化：这件事没什么大不了的。</li>\n<li>夸大：这件事对我来说太重要了。</li>\n<li>否认：为了缓解内心的冲突，你不去关注现实。\n<ul>\n<li>本质否认：这件事没有发生过</li>\n<li>行为否认：做出某件事来证明另一件事不是真的</li>\n<li>幻想否认：<a href=\"/blog/time.html\">时间记录</a></li>\n<li>言语否认：说相声</li>\n</ul></li>\n</ul>\n<p>注意转移：当面临难以解决的问题时，人们往往会选择将注意力转移到别处。无论是沉迷于工作，还是回到童年时的爱好，都是为了避开当前的压力源。</p>\n<ul>\n<li>去生命化：回避对方身上的某些特质，不把对方当作人类看待。比如德国鬼子、日本鬼子、纸老虎这些称呼。</li>\n<li>泛灵化：你把情感寄托到一个非人类的事物上，以对待人类的方式对待它。</li>\n<li>象征化：你赋予某个想法以特殊的意义。</li>\n<li>理智化：你用一套理论减去了情绪的感觉部分，剩下思维部分。比如：抑郁症是做问卷做出来的。</li>\n<li>合理化：与 “理智化” 的区别是：“理智化” 确实有理的，“合理化” 的是把无理的说成有理的。</li>\n<li>穷思竭虑：你过度分析以期望解决某个问题本身，这样你就不会感受到这个问题带给你的感受。</li>\n<li>以一种情绪对抗另一种情绪：你会以愤怒来对抗恐惧。</li>\n<li>时间退行：你表现得像你过去那样，为了规避思考现在的冲突。为了逃避期末大作业，你把之前玩的游戏下载下来又重新玩了一遍。</li>\n<li>时间上置换到未来：为了逃避期末大作业，你会规划暑假准备干什么。</li>\n<li>考试成绩拔尖：考试成绩拔尖符合社会要求，且很难与 “能力强” 区分开。你用考试成绩拔尖掩盖自己另一些方面能力不强的事实，即扬长避短。</li>\n<li>工作狂：注意力全部投入在工作上，类似用暴饮暴食来忘记一些什么事。</li>\n<li>地形学退行：你的意识退缩到了潜意识里，俗称睡大觉。</li>\n</ul>\n<h2 id=\"创伤心理学-1\">创伤心理学</h2>\n<p>参考施琪嘉《创伤 30 讲》《创伤心理学（2006）》</p>\n<h3 id=\"定义与实例\">定义与实例</h3>\n<p>心理创伤有两个要素：引发创伤的事件，和经历创伤后的结果。</p>\n<p>定义创伤性的事件有两个标准：危及生命的，或者突破以往内心信念的。</p>\n<p>创伤按事件来源可分为三类：自然的，人工的和人为的。自然的是一些来自自然界的不可抗力，如地震、山火、泥石流；人工的是由人所制作的工业产品所间接引发的，且非某人所有意而为之的，如矿难、车祸；人为的是由某人有意而为之的，如蓄意施虐。</p>\n<p>按复杂程度或形成时间，可分为泰尔 I 型和泰尔 II 型。泰尔 I\n型创伤为简单型创伤，是成年所经历的一次性的创伤，恢复时间较快；泰尔 II\n型创伤为复杂型创伤，通常是幼年时期形成的，恢复时间较慢，一般来说迟早会发作。</p>\n<p>在经历创伤之后，有 80% 到 90% 的人会自愈。有\n10%~20% 的人需要心理治疗来干预。</p>\n<p>没有没有创伤的人：婴儿在出生之前是在泡在羊水里的，肺泡没有打开，加上是一个失重的环境。在出生时母亲通过产道把羊水从婴儿的肺里面挤压出来，婴儿出生后的第一声哭就是为了呼吸，打开了肺泡，又受到了\n1 个 g\n的重力加速度，断了脐带后又要通过哺乳来获取养分。所以，对婴儿来说，出生就是一个重大的创伤。有一种说法是，我们之所以记不起来\n3\n岁之前的经历，可能是因为经历创伤之后断片了，即弗洛伊德的 “屏蔽记忆”。</p>\n<p>创伤的传递方式分水平传递和垂直传递，水平传递是传给同一辈人，垂直传递是通过家庭传递给下一代，分代际传递和隔代传递。代际传递是指上一代人所经历的痛苦的事件，没有被和解的事件通过非语言的形式传递给下一代。</p>\n<p>创伤的记忆表现形式有躯体化，噩梦和解离，解离是指通过一个扳机点，如一个词语激发了创伤。</p>\n<hr>\n<p>我父亲在上初中的时候，水壶被别人偷了，他是受害者，在面对老师的时候，他相当于把整个人缩进去了，完全屏蔽外界的信息，加上一句话都不回复。我在之前是不知道他的经历的，但是在高中的时候，一模一样地复刻了他的经历，就是在考试没写作文的时候。这就叫创伤的代际传递，是没有经过语言的方式传递给下一代的。如果他在之前给我说过了他的经历，事情可能就会有改变，我会更早一点地同情他。形成的原因可能是因为，我爷爷奶奶喜欢把他锁在屋里。</p>\n<p>我妈也是一样，她在之前上班的时候被一个人威胁了，让她做不属于她分内的工作，这个工作还是亲戚帮找的。但是直到离职的时候才给那个亲戚写信。在她换一个工作，做自我介绍的时候，也是满脸通红的。因为我妈小时候，给我婆婆提建议，结果婆婆不信任她，用棍子打她的脑袋。</p>\n<hr>\n<p>从拉康的角度理解创伤：创伤是被回溯性建构的，我们对创伤的解释随主人能指的变化而变化。笔者在听说 “社交恐惧” 这个词之前，压根不知道自己是什么问题，所以被诊断为 “抑郁症” 之后，只能抱着这个词不放。这就像婴儿在学会说话之前，只能用哭来表达需要，因为无词不达意。在没有别人给我的父亲做出 “内向” 的评价之前，我也觉得父亲是没什么问题的。但当我们要用它解释一个什么东西时，在创伤性事件发生当中的不愉快情绪可能是被我们有意地忽略的。</p>\n<h3 id=\"治疗方法\">治疗方法</h3>\n<p>建议找一个可靠的心理治疗师。</p>\n<p>遥控器技术：</p>\n<ol type=\"1\">\n<li>想象有一个投影仪，正在播放你以前的创伤经历，把它投射到了墙上</li>\n<li>用遥控器把投影仪关掉。</li>\n</ol>\n<p>保险箱技术：</p>\n<ol type=\"1\">\n<li>想象有一个保险箱</li>\n<li>这个保险箱的长宽高是多少？是什么材料做的？壁有多厚？内外壁是什么颜色？分格了还是没分格？</li>\n<li>这个保险箱的锁是什么类型的？门好打开吗？开关门有声音吗？你会怎么打开门？钥匙是什么样的？</li>\n<li>这个保险箱的锁足够坚固吗？如果不是，把它换成足够坚固的，直到破坏不开为止</li>\n<li>把保险箱的门打开，把给你带来压力的东西通通装进去，再关门锁住。</li>\n<li>把保险箱放到一个你觉得合适的地方，这地方不应该太近，在你力所能及的范围内尽量远一些。且你如果想找回的时候还可以找回</li>\n</ol>\n<p>安全岛技术：</p>\n<ol type=\"1\">\n<li>想象有一个绝对安全的小岛。这个小岛可以在你的心里，也可以在世界上的任何一个地方，只有你一人可以进去，你可以带一些东西。</li>\n<li>岛上的景色如何？你眼睛看到的让你感到舒服吗？如果是，就留在那里；如果不是，就变换一些，直到你真的感到很舒服为止</li>\n<li>你听到了什么？如上</li>\n<li>你的皮肤感觉如何？闻见了什么？肌肉如何？呼吸如何？腹部感觉如何？</li>\n<li>仔细体会你现在的感受，这样你以后再来到安全岛就会有类似的感受</li>\n<li>给自己设计一个躯体动作，可以是手势之类的。只要你在现实里做了这个动作，立马就能回到安全岛</li>\n<li>现在做一遍这个动作，并感受一下</li>\n</ol>\n<h2 id=\"认知行为疗法\">认知行为疗法</h2>\n<p>参考郭召良《认知行为疗法入门》《认知行为疗法进阶》。</p>\n<p>最简单的模型是：情境 → 认知 → 情绪 / 行为。亚伦・贝克的 T\n型 / 工型模型把认知拆成了三层：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">具体情境 → 自动思维 → 症状：情绪+行为</span><br><span class=\"line\">             ↑</span><br><span class=\"line\">          中间信念</span><br><span class=\"line\">             ↑</span><br><span class=\"line\">童年经历 → 核心信念 → 补偿策略</span><br></pre></td></tr></tbody></table></figure>\n<p>概念化是对于一个具体的案例，通过找出模型里每一个概念的具体内容，来理解来访者的问题。</p>\n<p>横向概念化类似于情绪 ABC 模型：Activating\nevents、Beliefs、Consequences</p>\n<p>纵向概念化：</p>\n<p><img src=\"/blog/images/CBT-3.webp\"></p>\n<h3 id=\"自动思维\">自动思维</h3>\n<p>自动思维是在特定情境下出现的自动的想法，是症状的直接原因。比如收到一个别人直接给出的建议，就认为是收到了指责、批评，进而产生愤怒的情绪。它是自动涌现的，且不一定是真的。收到了指责是想法，不一定是事实，别人可能没有指责的意思。</p>\n<p><img src=\"/blog/images/meme/速度比光快的代价.webp\"></p>\n<p>有效性是指自动思维符合事实的程度，有用性是指是否能达到预期目标。一个悲观且正确的自动思维，如别人确实是在指责自己，自己出现了愤怒的情绪，那么它是有效的，但是是无用的，因为你的预期目标是继续沟通下去。</p>\n<p>自动思维歪曲的类别分无效的、部分有效的、有效但无用的。无效的是没有证据，部分有效的是分别有正反的证据，有效但无用的是，有确凿的证据，但是对未来没有正面影响。种类包括：</p>\n<ul>\n<li>消极预测未来：它是有效但无用的</li>\n<li>灾难化（自己现在的处境太糟糕了）：它是有效但无用的</li>\n<li>以偏概全（只根据不利信息，没有看到有利的信息，进行消极的预测）：它是部分有效的</li>\n<li>读心术（无端揣测他人的想法）：它是无效的</li>\n<li>随意比较（没有分析具体的情况）：它是无效的</li>\n<li>过度引申（曾发生过的特殊事件会经常发生）：它是无效的</li>\n<li>任意推论（字如其人，字不好人就不好）：它是无效的</li>\n</ul>\n<p>自动思维的干预有识别、评估、评价和巩固应用四个环节。识别就是横向概念化，评估是给情绪和相信程度打分，评价是判断有效和有用的程度并形成新的替代思维，巩固是记住并在合适的时间运用替代思维。</p>\n<h3 id=\"中间信念\">中间信念</h3>\n<p>中间信念包括态度、假设和规则三个部分。</p>\n<ul>\n<li>态度（是、最担心的一种情况）：事件 A 发生是糟糕的。</li>\n<li>假设（如果）：如果事件 B 发生了，事件 A 就不会发生。B 通往非 A\n为积极假设的路，非 B 通往 A 为消极假设的路。</li>\n<li>规则（应该）：我应该让事件 B 发生</li>\n</ul>\n<p>态度和规则是表层的，假设是深层的。贝克认为只有假设是可以被检验的，需要找出消极假设的不合理之处。</p>\n<p>中间信念阶段的认知歪曲种类包括：</p>\n<ul>\n<li>情感推理：根据情绪推理。</li>\n<li>理想化：使用 “应该”、“必须”、“不能” 这些词，根据自己的主观愿望而不是实际情况对自己提出要求；</li>\n<li>最高标准：只关心超过自己的人；</li>\n<li>只内归因和只外归因；我现在这个性格，全是我咎由自取，或者全是由我的家人造成的。</li>\n</ul>\n<p>补偿策略是中间信念的一体两面，是为了遮掩负性核心信念。包括努力策略、回避策略（不做困难事）、顺从策略（随便你）、归因策略、警惕策略（过度未雨绸缪，夸大危险，低估自己处理问题的能力）、自弃策略（我有能力做，但是不想做）、自恋策略（民科）。</p>\n<p>回避策略的体现：</p>\n<blockquote>\n<p>● 求助是不好的（态度）；<br> ● 我要独立解决问题（规则）；<br> ●\n如果独立思考，就说明我是有能力的（积极假设）；<br> ●\n如果求助，就说明我是无能的（消极假设）<br></p>\n</blockquote>\n<p>和中间信念属于同一层次的如：防御。如：萨提亚提出四种沟通姿态：过度为别人的讨好姿态；过度为自己，找别人茬的责备姿态；回避情绪、他人和自己感受的超理智姿态（电脑）；回避压力、转移话题的打岔姿态（鸵鸟）。</p>\n<h3 id=\"核心信念\">核心信念</h3>\n<p>同一个核心信念，在不同的环境（如家庭和学校）会衍生出不同的中间信念，中间信念中的态度是核心信念在具体环境中的体现。</p>\n<p>核心信念阶段的认知歪曲种类包括：</p>\n<ul>\n<li>贴标签：我就是一个什么样的人。</li>\n<li>苦算命运：我这辈子就是没有希望的。</li>\n<li>后悔倾向：如果我过去没有经历某件事，我就不会是现在这样。</li>\n<li>拒绝相反证据：拒绝与自己消极想法矛盾的观点</li>\n<li>黑白思维：我从来没有取得过成功。</li>\n<li>低估正面信息：虽然 xxx 发生了，但还是 xxx</li>\n<li> 选择性负面关注：我只记得 xxx</li>\n</ul>\n<p><img src=\"/blog/images/meme/看夜空看什么.webp\"></p>\n<p>先不管微波炉为什么能联网，此事在<a href=\"https://music.163.com/#/song?id=20045625\">《Starless》</a>里亦有记载，有一版的歌词翻译很雅，叫 “无星夜里圣经黑”。</p>\n<h3 id=\"干预策略\">干预策略</h3>\n<p>分为两大类：解决问题，或者接纳问题的存在。后者认为，如果症状不重的话，可以带着症状去生活。</p>\n<p>认知改变策略：</p>\n<ul>\n<li>备选思维（分支）：在原来的自动思维之外另找一种思维。一件事可能会成功也会失败，给成功和失败的可能性各找几个证据。</li>\n<li>客观证据（实例）：找证据，不能用推理和分析来替代证据。</li>\n<li>苏格拉底式提问：支持你想法的证据，举出与你想法相反的证据。最糟糕的可能、最好的可能、最现实的可能分别是什么，每种可能的证据分别是什么</li>\n</ul>\n<p>行为改变策略：</p>\n<ul>\n<li>行为改变的目标：影响情绪、为认知改变提供证据。改变情境：情境引起自动思维，自动思维改变不了就改变情境，就是广义上的逃避问题。</li>\n<li>抑郁的特点是静止，焦虑的特点是回避。而行为改变策略直接要求反着来，对应的是行为激活和暴露。</li>\n<li>行为表演：假装自己完全相信新信念的情况下做出新行为，假戏成真。糟糕的结果不会唤起负性核心信念，因为是演戏不是真的，成功了就是真的，失败了就是假的。</li>\n<li>行为试验：假设检验两种方式：提两个对立的假设，或者对一个假设进行开放性探讨</li>\n</ul>\n<p>成长经验重构：回忆你以前经历过的某个创伤性的事件，然后再把它重新给经历一遍。在这次经历里，你可以基于你的想象，做出与之前不同的行为，然后别人也做出了不同的行为来回应你。最后你形成了一个正向的、错误的记忆，或者说不同解读方式的记忆，再把这个错误的记忆给记住，这样你以后回忆起的事件就是被改写过了一遍的事件。比如说受到某人体罚，在以前的负性核心信念是 “我这个人是\nxxx\n的”，修正后的信念是 “这个人想让我变得更好”，最后你通过一通说，在想象中和这个人沟通了，那个人也做出了和以前不同的行为，最后你们和解了。你以后回想起的记忆就是另一个版本的记忆了。</p>\n<p>关键点：给情绪命名。当时是什么样的情绪，再把自我否定的给淡化或者剔除掉。</p>\n<p>实现的方法有：把传记写出来，再修正传记。或者童年的我和成年的我进行对话，在以前的那个情境下某人做出了某个行为，想象自己应该怎么做才能使得那个人做出另外一种行为，双方行为前后的感受分别是什么。</p>\n<h2 id=\"客体关系与自体心理学\">客体关系与自体心理学</h2>\n<blockquote>\n<p>所有精神分析理论都关注在解说过去如何影响现在，以及病人内在世界如何歪曲并影响外在经验。</p>\n</blockquote>\n<p>以谷川流为什么写《凉宫春日的忧郁》为例子。在这本书里面，凉宫春日是一个期望可以影响现实的人。作者的代言人阿虚希望动画里的人物是真的，但认为现实里的圣诞老人是假的，对其无感，如何让动画人物出来，自己经历动画的剧情。古典弗洛伊德模式认为，是作者的本能、自我和超我之间存在冲突；客体关系理论认为，因为作者以前看的书和动画很多，所以脑子里有许多虚拟人物的形象（客体表象），这些形象给作者创造了一个幻想世界，但是幻想世界和现实世界是有落差的，最终导致作者把幻想世界写成书；自体心理学认为，作者追求的是一个全能客体，即凉宫春日，来弥补他自身的愿望。</p>\n<p>在一些哲学著作里面，一个人被称为主体。与主体相对的就是客体，客体是与某人有关系，但不完全属于这个人的东西，它与这个人的感受与需要相关，可以是一首歌，一个他人，或一件过去无法被和解的事。客体一词与关系连在一起时，指的是人际关系。当我们在和别人互动的时候，互动的对象并不仅仅是实际的他人，还包括一个他人的影子。这个影子可以是某个实际人物的扭曲版本，是一个内在他者。我们过去和重要他人的关系模式、过去关系的残留物会影响之后的人际关系。移情指的是，把过去和某一个人的关系模式，重复到现在的一个人身上。</p>\n<p>客体分内在客体和外在客体。如果客体是别人，外在客体就是实际的别人，内在客体是心里的别人。内在客体是外在客体的表象（Representation，代理人，翻译成表象可以看成动词 -&gt; 名词，也可翻译成 “再现”），如一千个人心里的李逵，可能是来自于不同戏剧，或同一个文学作品里，不同人对李逵的不同理解。部分客体：是主体对客体的一种表象。如张三看了《水浒传》电视剧，李逵和母亲对话的一个片段，会觉得他是一个孝子；李四看了《水浒传》的书，劫法场的片段，会觉得他是一个杀人魔。完整客体指，我们通过看一些不同的东西，对李逵形成了比较立体的理解：李逵由好、坏、好与坏、非好与非坏这四个部分组成。</p>\n<p>自体（Self）是一个完整的主体。和自我（ego）的区别是，自体更完整，它包括了自我在内的所有心理机能。自我是心理功能的组织者，它无法被直接看到，但可以在心理过程中得以显现。客体关系是发生在自体与其客体间，而不是在自我与客体间。</p>\n<p>自体表象指的是，自己在与其他人和物（客体）建立关系的过程中，理解到自体。即我通过我之外的东西，形成对我自己的理解。比如在听了一首歌之后，就能体验到自体身上有情绪。</p>\n<p>分裂（Splitting）包括正常的发展过程和防御过程。比如一种同时含有喜和恐的复杂情绪，在还不够成熟，无法同时体验到的时候，会只体验到一个。</p>\n<hr>\n<p>参考：Michael St. Clair《客体关系与自体心理学导论（第二版）》。</p>\n<p><strong>弗洛伊德学派的起始点：与客体关系及自体心理学理论相关的概念</strong></p>\n<p>在原初自恋状态下，自我是力比多本能的客体。</p>\n<p>认同和客体选择的区别：认同是自己想要变成他人那样，客体选择是自己想要拥有他人，给他人进行力比多投注。一个是看着自己变成客体，一个是看着客体。</p>\n<p>认同丧失客体的防御方式即：自己的至亲去世了，情感链接断了，无法进行力比多投注了，所以用认同置换了客体选择，通过做逝世亲人生前喜欢做的事，来认同他。</p>\n<blockquote>\n<p>如果孩童的自我有太多客体认同且如果他们太强有力而无法彼此兼容时，那就可能成为病态</p>\n</blockquote>\n<p><strong>梅兰尼．克莱茵：创新与过渡的理论家</strong></p>\n<p>婴儿为什么会吸手指：当喂食良好时，婴儿好的感受被投射到母亲的乳房上，母亲的乳房被内化为内在客体。婴儿的内在世界是一个幻想的世界，它可以主动响应驱力，如果外在客体不在场，可以借以内在客体来重复经历这个感受。如饥饿的婴儿可以通过幻觉到母亲乳房的感觉与奶汁的味道来暂时控制其饥饿。</p>\n<p>投射性认同的过程：把内在世界加到外在世界上，然后把外在世界重新内化。自身为缓解情绪，分裂出了一部分感受，将其投射到外在客体上，修正之后再内射回去。</p>\n<p>偏执－分裂位置：坏的东西就在那里威胁我；抑郁位置：担心好的会失去。</p>\n<blockquote>\n<p>她假设出生时自我就存在且带着非常早期俄狄浦斯冲突而导致超我的形成。</p>\n</blockquote>\n<p><strong>威廉．费尔贝恩：一个 “纯粹的” 客体关系模式</strong></p>\n<blockquote>\n<p>冲突并非自我与本我冲动之间，而是自我的各不同部分在和自我的内在客体之间相关联时产生的。</p>\n</blockquote>\n<blockquote>\n<p>任何时候当客体分裂时，自我跟着分裂而和客体的各不同部分建立关联性。</p>\n</blockquote>\n<p>在《凉宫春日的分裂》及《惊愕》三部曲里，有两个关键人物：佐佐木和渡桥泰水。当凉宫春日在阿虚的面前遇见佐佐木，并得知她是阿虚的挚友之后的有天晚上，世界线被分裂成了两个。因为在遇见佐佐木之前，阿虚的客体在凉宫心里可能是这样的：他更在意闹腾的女孩。因为凉宫就是属于闹腾的。在该小说里，人物的内心冲突以 “闭锁空间” 的形式可视化地表现出来，每当凉宫出现内心冲突时，她的闭锁空间里就会有蓝色的 “神人” 出现，把周遭的环境破坏为废墟；而佐佐木的闭锁空间是非常平静的，在规模和制造频率上都比凉宫的低。佐佐木作为一个平静且通常、高情商版的凉宫，而且自称为阿虚 “相当亲密的朋友”，所以在遇见她之后，阿虚的客体在凉宫心里被分裂成了两个部分，进而凉宫也分裂成了两个部分。凉宫的设定是神，于是世界线也分裂成了\nα 和 β 两条线，这是根本的原因。而直接的原因，起导火索作用的是伪 SOS\n团的出现：SOS\n团是凉宫在学校里创建的社团，意为 “让世界变得更加热闹的凉宫春日团”。但凉宫的性格属于是非常不稳定的，如果她作神，对世界会有不可预知的影响。于是有三个反派想推举佐佐木这个内心平静的角色，意图把凉宫的能力转移到佐佐木身上。凉宫遇到了伪\nSOS\n团的四人，虽然不知道他们的密谋，但是在无意识里觉察到了事情的危机。原书里提到，渡桥泰水就是凉宫无意识的具体化体现，且只有她可以游走于两条线之间。</p>\n<p>α 线是一段日常的校园生活，SOS\n团招募新人加入，但只有渡桥泰水一人通过。渡桥泰水在 α\n线入团，说明凉宫在遇见佐佐木之后，找回了过去自己的一部分。为什么呢，因为从发卡这个线索来看，渡桥泰水的原型在以前就是存在于凉宫心里的，她和凉宫都是属于活跃的性格，且前者的情商更倾向于佐佐木一方。她是凉宫分裂出来的自体客体，是为了代替阿虚心里的佐佐木。</p>\n<p>在 α 线里，伪 SOS 团的成员虽然都存在，但在后续都并未出场；β 线是伪\nSOS\n团与凉宫一方直接进行对抗，这两条线分别代表着一种理想的，和现实的可能。因为在世界分裂之前，危机就已经出现了，β\n线是危机的延续。它代表着一种最坏的结局：凉宫的能力真的被转移到佐佐木身上了。这意味着在凉宫心里，阿虚的客体发生了一个重大的改变 —— 他在\nβ\n线里都直接进到佐佐木的心里了。这就是 “虚神论” 的合理之处：谁的心里能更加占有阿虚的客体，谁就是神。我们同样可以用它来解释《消失》的剧情。</p>\n<p>渡桥泰水在 β 线里唯一出场的一次是在\nβ-10，往社团教室里带来了一朵花，为了保证两个世界的场景一致。花是一个变量，α\n线里的花就是渡桥泰水带过去的。渡桥泰水从 α 线走入到 β\n线，意味着凉宫从理想走向现实。在世界线收束的时候，渡桥泰水是在 α\n线里的，把两个阿虚的手叠到一起了。α\n线里的阿虚虽然是在凉宫的闭锁空间里，但是阿虚没有意识到，β\n线里的阿虚是在佐佐木闭锁空间里。这说明凉宫的无意识找到了一种理性的方法，先从现实的层面上创造机会（β\n线里带花），再从理想的层面上（α 线里），把两个阿虚客体整合到一起。</p>\n<hr>\n<p>费尔贝恩认为只有坏客体会被内化，因为他认为内化客体是为了在环境中避开它。如果客体是好的，那就没有内化的必要了。比如说，在受到某一个人不好的对待后，却在内心里期望他是好的，唯一的解决方式是，把他的坏内化到自己身上，在自身里形成一个坏客体。但自身也可能承受不住的，可能在遇到某个其他人之后，该坏客体又被外化出来了。比如说以前受到一个老师体罚，后来认为所有的教师都是坏的。这就是我们所说的移情，或者置换。</p>\n<p>费尔贝恩把自我分为三个面向：中心自我、力比多自我和反力比多自我，它们分别与三个客体起关系。力比多自我是感觉到需要的部分，它认同好客体；反力比多自我又叫内在破坏者，它认同坏客体，并惩罚力比多自我，类似超我的功能；中心自我负责把这两个辅助性自我分隔开，是看戏的人。比如在一场考试之后，发现自己做错题了，试卷上得了一个叉，于是看着这道题开始后悔了。那么力比多自我的客体是对勾，反力比多自我的客体是叉，反力比多自我在看见叉之后，开始惩罚力比多自我。中心自我是看戏的人，它把批评者和被批评者分隔开了，它的客体可能是那道题。</p>\n<p><strong>东纳．温尼科特：具独特观点的小儿科医师</strong></p>\n<p>过渡性客体：从全能向非全能过渡。全能指的是，外界的所有事情都如自己的愿，比如饿了就有母亲喂食；游戏就是一个过渡性客体，虽然游戏里的人物可以受自己的控制，但也不是想赢就能赢的。比如在动作游戏里打\nBOOS 的时候，除了自身出招和策略 BUFF\n的配合之外，最重要的是，你要能知道这个 BOOS\n会出什么招，在什么时候需要闪避以及如何闪避它，而这往往不是打一次就能适应的。</p>\n<p>真自体和伪自体：如果孩子早期没有被好好照顾，可能发展出防御性的伪自体，表现为和客体的关系感觉不是真诚的。只有真自体有自发性。一个个案：温尼科特的一位来访提到他无法自发地和别人谈话，除非加入别人的谈话中。如果他提出了自己的意见，就是在夺取父母的功能，而他真正想要的是被父母确认为一个婴儿。他的真自体没有被发展出来。</p>\n<blockquote>\n<p>退化作用（退行）是对过去某人需求未能给予足够响应的一个矫正的机会。</p>\n</blockquote>\n<p><strong>玛格丽．马勒：个体的心理诞生</strong></p>\n<p>个体化：我是，我存在。认同：我是谁。</p>\n<p>三大发展阶段：在第一个阶段是自闭期，约出生头一个月，是无客体的；第二个月开始是正常与母亲的共生期；第三阶段是分离 - 个体化，有两条并行的线，个体化是演化出自主性，分离是摆脱依赖。分离 - 个体化分四个次阶段，第一个次阶段里婴儿会初步地区分开自己和母亲，在目光上会检视母亲和非母亲；第二个次阶段在身体上会主动离开母亲，发展出一点自主性；第三个次阶段叫和解，是往以前回了一点，婴儿发现自己并不能完全地脱离母亲存在，对母亲比上一个阶段多了一点依赖，当母亲不在场时，借用过渡性客体来缓解自己的分离焦虑；第四个次阶段主要是在生命的第三年时且没有清晰的终结点，最终发展出情绪上的客体恒定性与个体性。</p>\n<h2 id=\"社交焦虑障碍\">社交焦虑障碍</h2>\n<p>轻度的社交焦虑障碍称为社交焦虑症，严重的称为社交恐惧症。在 CCMD-3\n里，社交恐惧的编号是 43.12。以 43\n开头的是神经症，它是没有可证实的器质性病变作基础的，即你的身体是没有问题的。43.12\n的诊断标准是：</p>\n<blockquote>\n<ul>\n<li>继承自神经症（43）的：\n<ul>\n<li>[症状标准] 至少有下列 1 项：① 恐惧；② 强迫症状；③ 惊恐发作；④\n焦虑；⑤ 躯体形式症状；⑥ 躯体化症状；⑦ 疑病症状；⑧ 神经衰弱症状。</li>\n<li>[严重标准] 社会功能受损或无法摆脱的精神痛苦，促使其主动求医。</li>\n<li>[病程标准] 符合症状标准至少已 3 个月，惊恐障碍另有规定。</li>\n<li>[排除标准]\n排除器质性精神障碍、精神活性物质与非成瘾物质所致精神障碍、各种精神病性障碍，如精神分裂症、偏执性精神病，及心境障碍等。</li>\n</ul></li>\n<li>继承自恐惧症（43.1）的：\n<ul>\n<li>1 符合神经症的诊断标准；</li>\n<li>2 以恐惧为主，需符合以下 4 项：\n<ul>\n<li>① 对某些客体或处境有强烈恐惧，恐惧和程度与实际危险不相称；</li>\n<li>② 发作时有焦虑和自主神经症状；</li>\n<li>③ 有反复或持续的回避行为；</li>\n<li>④ 知道恐惧过分、不合理、或不必要，但无法控制；</li>\n</ul></li>\n<li>3 对恐惧情景和事物的回避必需是或曾经是突出症状；</li>\n<li>4 排除焦虑症、分裂症、疑病症</li>\n</ul></li>\n<li>本项的：\n<ul>\n<li>1 符合恐惧症的诊断标准；</li>\n<li>2\n害怕对象主要为社交场合（如在公共场合进食或说话、聚会、开会，或怕自己作出一些难堪的行为等）和人际接触（如在公共场合与人接触、怕与他人目光对视，或怕在与人群相对时被人审视等）；</li>\n<li>3 常伴有自我评价和害怕批评；</li>\n<li>4 排除其他恐惧障碍。</li>\n</ul></li>\n</ul>\n</blockquote>\n<p>害羞和内向的区别：内向是指把心理能量投注到自己身上的频次比他者多，害羞是指害怕来自外界的负面评价。</p>\n<p>社交焦虑者首先是自己看不起自己，有一个假想的、高标准的观看者被投射出来，时刻监视着自己的一举一动，如果达不到观看者的要求，会无地自容。这个假想的观看者可以依附到场景里的任何一个人身上，也可以不依附。不依附是投射，依附后是投射性认同，即对方真的认同了对方是一个高标准的人。</p>\n<p>复旦大学的张维为教授对此也有类似的看法：</p>\n<p><img src=\"/blog/images/meme/只要你自信.webp\"></p>\n<p>社交焦虑的维持因素包括负强化：在做出一个回避的行为之后，没有得到负面的反馈，于是这个回避的行为会被强化。比如不社交，就不会把关系搞糟。</p>\n<p>社交技能训练：说以 “我” 开头的句子，以 “你” 开头的可能带有指责性。</p>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p>林崇德.&nbsp;发展心理学（第三版）[M].&nbsp;北京：人民教育出版社，2018:105-108.<a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n"},{"title":"我的缺点","date":"2025-09-06T13:01:00.000Z","_content":"\n经常回忆过去的事情，包括短期的过去和长期的过去。对回忆短期的过去来说，是一些让当时的自己感到难堪的事情，在事件经历过后，还在脑海里间歇地重演。而对回忆长期的过去，我想到了三种解释方式：\n\n第一种是，现在的自己正在代替过去的自己，给过去的别人没有受到的惩罚。什么意思，就是我认为，别人过去对我“不好”，但是我的理智不能去伤害别人，所以我用一种伤害自己的形式来间接地伤害别人，就形成了所谓的症状。即：看我都在伤害自己，那你们凭什么不会反思，那说明我的道德水准比你们高。\n\n另一种情况是，过去当我想向对方表达自己的想法的时候，对方没有给出积极的回应。从斯金纳的操作性条件反射看，“表达自己而不给回应”是一个负性的刺激，给一个负性的刺激后，使表达自己的行为减少，叫做“正惩罚”。之后我就形成了不表达自己想法的性格，这个性格给想要了解我的人来看，也是一个正惩罚。\n\n第二种是，现在的自己正在代替过去的别人，给过去的自己，别人没有给自己的惩罚。什么意思，就是我认为“别人过去对我不好”的这件事情，我也是有责任的，但是别人总是倾向于避开谈这件事情，而我的想法或许是和别人类似的，我也不愿意向别人道歉，所以我在意识层面上总是在等别人先给我道歉。\n\n第三种是，未完成事件的未完成的替代性满足。就是我现在认为，这件过去的事情或许是有可能出现更好的结果的，但是这个更好的结果永远也无法被我想象出来，我的想象过程卡在那里了。\n\n不愿意麻烦别人。具体地说是，对于一个陌生人给出的好意，感觉接受不了。还不愿意向陌生人提出自己的需求。而对父母来说，过去最多的情况是，我被动地等待他们问我想不想干嘛，而我很少向他们主动地说我想干嘛。\n\n至少在 22 岁之前，对父母感到生气的时候都说不出来背后的原因，要么自闭，要么自伤，要么直接远离他们。即使到现在有时还是这样的，这纯粹是因为自己词穷，“词穷”的意思有理亏，亏什么理？不应该说父母不对的理，“你的想法是错的”理。但为什么父母会认为我的想法是错的呢，因为在聊天的过程中，是我先预设了对方是错的，这个观念被投射过去后，激发了对方的防御，所以对方才会认为我是错的。另一种情况是，对方之前有对我不满意的地方，但是怕伤我的心，所以这个不满意的情绪被压制了一段时间过后，被一句歧义的话给激发了。我在大部分时候，通过口头表达观点时，都没有习惯给出具体详细的解释和理由，所以会造成对方误解。不是说不能吵架，我认为只有吵架的时候才能说出自己的真心话，因为在心平气和的情况下，需求可能会随着情绪一起被压制的，对情绪的防御机制是隔离，对思维的防御机制是潜抑，在不够成熟的情况下，这两个基本防御可能会同时进行。\n\n我对父母的要求太高了，具体地说，是想让他们多问自己一些为什么，你是怎么想的。而我自己对他们又没有做到自己的要求。\n\n---\n\n有时候想交朋友，但是大部分时候不想交朋友。想交朋友的是自己“好人”的一面，不想交的是自己懒惰的一面。\n\n有时候找自己优点的时候，感觉不是真心的，因为对优点的标准高。具体怎么高？这涉及的是参照群体，我预设的标准可能是，90%的人不具有的特性，才能被称为优点。\n","source":"_posts/我的缺点.md","raw":"---\ntitle: 我的缺点\ndate: 2025-09-06 21:01:00\npermalink: me.html\n---\n\n经常回忆过去的事情，包括短期的过去和长期的过去。对回忆短期的过去来说，是一些让当时的自己感到难堪的事情，在事件经历过后，还在脑海里间歇地重演。而对回忆长期的过去，我想到了三种解释方式：\n\n第一种是，现在的自己正在代替过去的自己，给过去的别人没有受到的惩罚。什么意思，就是我认为，别人过去对我“不好”，但是我的理智不能去伤害别人，所以我用一种伤害自己的形式来间接地伤害别人，就形成了所谓的症状。即：看我都在伤害自己，那你们凭什么不会反思，那说明我的道德水准比你们高。\n\n另一种情况是，过去当我想向对方表达自己的想法的时候，对方没有给出积极的回应。从斯金纳的操作性条件反射看，“表达自己而不给回应”是一个负性的刺激，给一个负性的刺激后，使表达自己的行为减少，叫做“正惩罚”。之后我就形成了不表达自己想法的性格，这个性格给想要了解我的人来看，也是一个正惩罚。\n\n第二种是，现在的自己正在代替过去的别人，给过去的自己，别人没有给自己的惩罚。什么意思，就是我认为“别人过去对我不好”的这件事情，我也是有责任的，但是别人总是倾向于避开谈这件事情，而我的想法或许是和别人类似的，我也不愿意向别人道歉，所以我在意识层面上总是在等别人先给我道歉。\n\n第三种是，未完成事件的未完成的替代性满足。就是我现在认为，这件过去的事情或许是有可能出现更好的结果的，但是这个更好的结果永远也无法被我想象出来，我的想象过程卡在那里了。\n\n不愿意麻烦别人。具体地说是，对于一个陌生人给出的好意，感觉接受不了。还不愿意向陌生人提出自己的需求。而对父母来说，过去最多的情况是，我被动地等待他们问我想不想干嘛，而我很少向他们主动地说我想干嘛。\n\n至少在 22 岁之前，对父母感到生气的时候都说不出来背后的原因，要么自闭，要么自伤，要么直接远离他们。即使到现在有时还是这样的，这纯粹是因为自己词穷，“词穷”的意思有理亏，亏什么理？不应该说父母不对的理，“你的想法是错的”理。但为什么父母会认为我的想法是错的呢，因为在聊天的过程中，是我先预设了对方是错的，这个观念被投射过去后，激发了对方的防御，所以对方才会认为我是错的。另一种情况是，对方之前有对我不满意的地方，但是怕伤我的心，所以这个不满意的情绪被压制了一段时间过后，被一句歧义的话给激发了。我在大部分时候，通过口头表达观点时，都没有习惯给出具体详细的解释和理由，所以会造成对方误解。不是说不能吵架，我认为只有吵架的时候才能说出自己的真心话，因为在心平气和的情况下，需求可能会随着情绪一起被压制的，对情绪的防御机制是隔离，对思维的防御机制是潜抑，在不够成熟的情况下，这两个基本防御可能会同时进行。\n\n我对父母的要求太高了，具体地说，是想让他们多问自己一些为什么，你是怎么想的。而我自己对他们又没有做到自己的要求。\n\n---\n\n有时候想交朋友，但是大部分时候不想交朋友。想交朋友的是自己“好人”的一面，不想交的是自己懒惰的一面。\n\n有时候找自己优点的时候，感觉不是真心的，因为对优点的标准高。具体怎么高？这涉及的是参照群体，我预设的标准可能是，90%的人不具有的特性，才能被称为优点。\n","slug":"我的缺点","published":1,"updated":"2025-09-20T15:01:28.084Z","__permalink":"me.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnj000b5ws6darv968e","content":"<p>经常回忆过去的事情，包括短期的过去和长期的过去。对回忆短期的过去来说，是一些让当时的自己感到难堪的事情，在事件经历过后，还在脑海里间歇地重演。而对回忆长期的过去，我想到了三种解释方式：</p>\n<p>第一种是，现在的自己正在代替过去的自己，给过去的别人没有受到的惩罚。什么意思，就是我认为，别人过去对我 “不好”，但是我的理智不能去伤害别人，所以我用一种伤害自己的形式来间接地伤害别人，就形成了所谓的症状。即：看我都在伤害自己，那你们凭什么不会反思，那说明我的道德水准比你们高。</p>\n<p>另一种情况是，过去当我想向对方表达自己的想法的时候，对方没有给出积极的回应。从斯金纳的操作性条件反射看，“表达自己而不给回应” 是一个负性的刺激，给一个负性的刺激后，使表达自己的行为减少，叫做 “正惩罚”。之后我就形成了不表达自己想法的性格，这个性格给想要了解我的人来看，也是一个正惩罚。</p>\n<p>第二种是，现在的自己正在代替过去的别人，给过去的自己，别人没有给自己的惩罚。什么意思，就是我认为 “别人过去对我不好” 的这件事情，我也是有责任的，但是别人总是倾向于避开谈这件事情，而我的想法或许是和别人类似的，我也不愿意向别人道歉，所以我在意识层面上总是在等别人先给我道歉。</p>\n<p>第三种是，未完成事件的未完成的替代性满足。就是我现在认为，这件过去的事情或许是有可能出现更好的结果的，但是这个更好的结果永远也无法被我想象出来，我的想象过程卡在那里了。</p>\n<p>不愿意麻烦别人。具体地说是，对于一个陌生人给出的好意，感觉接受不了。还不愿意向陌生人提出自己的需求。而对父母来说，过去最多的情况是，我被动地等待他们问我想不想干嘛，而我很少向他们主动地说我想干嘛。</p>\n<p>至少在 22\n岁之前，对父母感到生气的时候都说不出来背后的原因，要么自闭，要么自伤，要么直接远离他们。即使到现在有时还是这样的，这纯粹是因为自己词穷，“词穷” 的意思有理亏，亏什么理？不应该说父母不对的理，“你的想法是错的” 理。但为什么父母会认为我的想法是错的呢，因为在聊天的过程中，是我先预设了对方是错的，这个观念被投射过去后，激发了对方的防御，所以对方才会认为我是错的。另一种情况是，对方之前有对我不满意的地方，但是怕伤我的心，所以这个不满意的情绪被压制了一段时间过后，被一句歧义的话给激发了。我在大部分时候，通过口头表达观点时，都没有习惯给出具体详细的解释和理由，所以会造成对方误解。不是说不能吵架，我认为只有吵架的时候才能说出自己的真心话，因为在心平气和的情况下，需求可能会随着情绪一起被压制的，对情绪的防御机制是隔离，对思维的防御机制是潜抑，在不够成熟的情况下，这两个基本防御可能会同时进行。</p>\n<p>我对父母的要求太高了，具体地说，是想让他们多问自己一些为什么，你是怎么想的。而我自己对他们又没有做到自己的要求。</p>\n<hr>\n<p>有时候想交朋友，但是大部分时候不想交朋友。想交朋友的是自己 “好人” 的一面，不想交的是自己懒惰的一面。</p>\n<p>有时候找自己优点的时候，感觉不是真心的，因为对优点的标准高。具体怎么高？这涉及的是参照群体，我预设的标准可能是，90% 的人不具有的特性，才能被称为优点。</p>\n","excerpt":"","more":"<p>经常回忆过去的事情，包括短期的过去和长期的过去。对回忆短期的过去来说，是一些让当时的自己感到难堪的事情，在事件经历过后，还在脑海里间歇地重演。而对回忆长期的过去，我想到了三种解释方式：</p>\n<p>第一种是，现在的自己正在代替过去的自己，给过去的别人没有受到的惩罚。什么意思，就是我认为，别人过去对我 “不好”，但是我的理智不能去伤害别人，所以我用一种伤害自己的形式来间接地伤害别人，就形成了所谓的症状。即：看我都在伤害自己，那你们凭什么不会反思，那说明我的道德水准比你们高。</p>\n<p>另一种情况是，过去当我想向对方表达自己的想法的时候，对方没有给出积极的回应。从斯金纳的操作性条件反射看，“表达自己而不给回应” 是一个负性的刺激，给一个负性的刺激后，使表达自己的行为减少，叫做 “正惩罚”。之后我就形成了不表达自己想法的性格，这个性格给想要了解我的人来看，也是一个正惩罚。</p>\n<p>第二种是，现在的自己正在代替过去的别人，给过去的自己，别人没有给自己的惩罚。什么意思，就是我认为 “别人过去对我不好” 的这件事情，我也是有责任的，但是别人总是倾向于避开谈这件事情，而我的想法或许是和别人类似的，我也不愿意向别人道歉，所以我在意识层面上总是在等别人先给我道歉。</p>\n<p>第三种是，未完成事件的未完成的替代性满足。就是我现在认为，这件过去的事情或许是有可能出现更好的结果的，但是这个更好的结果永远也无法被我想象出来，我的想象过程卡在那里了。</p>\n<p>不愿意麻烦别人。具体地说是，对于一个陌生人给出的好意，感觉接受不了。还不愿意向陌生人提出自己的需求。而对父母来说，过去最多的情况是，我被动地等待他们问我想不想干嘛，而我很少向他们主动地说我想干嘛。</p>\n<p>至少在 22\n岁之前，对父母感到生气的时候都说不出来背后的原因，要么自闭，要么自伤，要么直接远离他们。即使到现在有时还是这样的，这纯粹是因为自己词穷，“词穷” 的意思有理亏，亏什么理？不应该说父母不对的理，“你的想法是错的” 理。但为什么父母会认为我的想法是错的呢，因为在聊天的过程中，是我先预设了对方是错的，这个观念被投射过去后，激发了对方的防御，所以对方才会认为我是错的。另一种情况是，对方之前有对我不满意的地方，但是怕伤我的心，所以这个不满意的情绪被压制了一段时间过后，被一句歧义的话给激发了。我在大部分时候，通过口头表达观点时，都没有习惯给出具体详细的解释和理由，所以会造成对方误解。不是说不能吵架，我认为只有吵架的时候才能说出自己的真心话，因为在心平气和的情况下，需求可能会随着情绪一起被压制的，对情绪的防御机制是隔离，对思维的防御机制是潜抑，在不够成熟的情况下，这两个基本防御可能会同时进行。</p>\n<p>我对父母的要求太高了，具体地说，是想让他们多问自己一些为什么，你是怎么想的。而我自己对他们又没有做到自己的要求。</p>\n<hr>\n<p>有时候想交朋友，但是大部分时候不想交朋友。想交朋友的是自己 “好人” 的一面，不想交的是自己懒惰的一面。</p>\n<p>有时候找自己优点的时候，感觉不是真心的，因为对优点的标准高。具体怎么高？这涉及的是参照群体，我预设的标准可能是，90% 的人不具有的特性，才能被称为优点。</p>\n"},{"title":"拉康精神分析理论碎片","date":"2024-11-11T11:00:00.000Z","mathjax":true,"_content":"\n[1][英]迪伦·埃文斯.&nbsp;拉康精神分析介绍性辞典[M].&nbsp;李新雨,译.&nbsp;重庆：西南师范大学出版社，2021.&nbsp;\n\n[2]吴琼.&nbsp;雅克·拉康：阅读你的症状[M].&nbsp;北京：中国人民大学出版社，2011.&nbsp;\n\n[3][斯洛文尼亚]斯拉沃热·齐泽克.&nbsp;意识形态的崇高客体（第二版）[M].&nbsp;季广茂,译.&nbsp;北京：中央编译出版社，2017.&nbsp;\n\n[4][英]肖恩·霍默.&nbsp;导读拉康[M].&nbsp;李新雨,译.&nbsp;重庆：重庆大学出版社，2014.\n\n其中有一部分内容是自己演绎出来的，不一定准确。上面四个参考文献在下面有对应的标号。\n\n## 语言的魔法\n\n我们在刚出生的时候是不会说话的，甚至连站立都做不到，通过他者的教育我们才逐渐成为一个立地的人。通过学习他者的语言，我们从生物意义上的人变成了社会意义上的人。拉康把这个社会化的过程通过一幅图表示了出来，称为欲望图解的基本单位：\n\n<img src=\"/blog/images/desire-1.webp\">\n\n$\\mathrm{S}$ 表示一个**能指**（Signifier）。能指是语言的符号，是字符的形象或者声音。如古人用一个像月牙的象形符号来表示月亮，随着时间的推移演变为现在的“月”字，“月”字就是一个能指。\n\n$\\mathrm{S'}$ 表示另一个能指。$\\mathrm{S \\to S'}$ 为**能指链**，是一串语言符号的链条。如“我想吃苹果”这五个符号是一串能指链。\n\n$\\Delta$ 表示没有被社会化的、原初的、前于语言的人，包含人的“动物本能的部分”。如我们是从猴子进化而来的。\n\n$\\mathrm{\\not{S}}$ 表示被社会化后的人（Subject）。画了一条杠代表我们的“生物本能的部分”被世俗规矩所约束了，我们不愿意做违反社会秩序的事。如我们不会在厕所之外且有人看到的地方随地大小便，因为语言，或者说符号系统、象征秩序、大他者（Other）不允许我们这么做。\n\n$\\Delta \\to \\mathrm{\\not{S}}$ 与能指链相交，代表我们通过语言在《地球 Online》这款游戏里正式注册了一个账号——在此之前我们都是云玩家。有句话叫人只能死两次，第一次是医学意义上的死亡，第二次是社会意义上的死亡：被所有人遗忘。相对应地，人被社会化可以理解为是人的“第二次出生”：人被登记在**象征界**里了。\n\n$\\Delta \\to \\mathrm{\\not{S}}$ 的方向与能指链的方向相反，代表一句话的意义从其接收者的角度来看，是在接收完之后被**回溯**性建构的。如儿童被家长教育不能随地大小便，他们刚开始是不知道家长的语音是什么意思的，在经过多次的言传身教，在头脑中建立起条件反射之后，儿童才逐渐地理解“不能随地大小便”这句话是什么意思；一个更易懂的例子是：在学习英语单词时，我们是不知道“apple”这五个字母为什么是用来代表苹果的，只能先把它记住，在后来的使用过程中就用它代表苹果，因为大家都是这样使用的；也可以理解为：我们需要通过后文来理解前文的意思，如“我想吃苹果”，当只听到“我想”这两个字时，我们可能不明白对方在表达什么，只有在听完这五个字之后，我们才能明白对方在表达什么。\n\n## 换喻和隐喻\n\n我们通过语言进入了社会。在组织和理解语言的过程中，我们会使用换喻和隐喻。**换喻**是平行于一句话的阅读方向的，我们把一些词语组织起来形成一句完整的话，杠的维持代表我们组织语言、理解语言的时延；**隐喻**是垂直于一句话的阅读方向的，我们选择一些特定的词语来表达某种意思，杠的穿越代表我们成功埋下或者挖出一个词的意思。\n\n汉字的造字法有象形和指事，组字法有会意和形声，用字法有转注和假借，在使用语言的过程中，一个符号可以被延申出多种意义，一个能指的**所指**（signified）可以有多个，即老子《道德经》里的“名可名，非常名”。\n\n$$\n\\frac{\\mathrm{S}}{s}\n$$\n\n如“生”这个能指的所指有“live”、“produce”、“organism”、“raw”、“student”、“-er”等，为了理解生这个能指的意指，我们要依靠它的上下文，把能指和能指之间建立起联系，找出它们的表意功能，这叫**换喻**或者转喻。如当我们看到“我想吃苹果”这句话，这时我们理解的“苹果”是指那个红的、圆的、甜的东西——不会指苹果手机，因为我们是正常人，不会吃手机。我们通过“我想吃”这几个能指，加上一系列被隐藏在当前语境背后的能指链，或者说是被我们之前所获得的知识（$\\mathrm{S_2}$），来换喻出了“苹果”在当前语境下的含义。拉康将其形式化地表示为换喻公式：\n\n$$\nf\\mathrm{(S...S')S \\cong S(-)}s\n$$\n\n这读作：能指与能指相联系的表意功能全等于对杠的维持[1,P222]。**杠** $-$ 是从能指 $\\mathrm{S}$ 指向所指 $s$ 的阻抗，从能指到所指的指向关系被称为**意指** $f\\mathrm{S}$[1,P218]，但是这种指向关系被它们中间的那一道杠阻断了。从语言理解者的角度来看，当这道杠正在被维持的时候，代表我们大脑的语言解析器正在工作中，我们正在试图理解某个能指意指的是什么所指；从语言组织者的角度来看，当这道杠正在被维持的时候，代表我们正在组织语言中，一句话里每个词的意思还没有被相对地固定下来。\n\n相对立的，当这道杠被穿越的时候，代表某个词的意思已经相对地被固定下来了。当我们在组织一句话的时候，比如“我想吃苹果”，如果我们想表达一种并不严肃的态度，我们可以把“我”替代成“俺”、“咱”来隐喻一种并不严肃的态度；当我们在理解一句话的时候，比如“我想买爱疯手机”，我们会把“爱疯手机”看作隐喻的是一个电子产品，它替代的是“IPhone”这个能指，而不是关于“爱”和“疯”的。拉康将其形式化地表示为隐喻公式：\n\n$$\nf\\mathrm{(\\frac{S'}{S})S \\cong S(+)}s\n$$\n\n这读作：一个能指替代另一能指的表意功能全等于对杠的穿越[1,P218-219]。\n\n## 理想自我和自我理想\n\n$i(o)$：imaginary other：想象性他者。或者叫 $i(a)$（autre）。这里的 $o$ 和 $a$ 是同一个意思。小写的字母与**想象界**有关[2,P643]。\n\n**理想自我** $i(a)$ 是我们看自己，我们以这种形象显得可爱，这种形象代表着我们想成为怎样的人，是对形象的**想象性认同**。\n\n**自我理想** $\\mathrm{I(A)}$ 是我们透过某个位置被人看，别人从那个位置观察我们，我们从那个位置审视自己，以便我们显得可爱，是对位置的**象征性认同**[3,P147]。\n\n例如，小明的理想自我是一个穿着白大褂、救死扶伤的人的形象，自我理想是医生这个工作岗位。\n\n## 想象界和镜像阶段\n\n想象界 $\\mathrm{I}$（the Imaginary）是一个认同与镜映的领域[4,P44]。是**自我** $e$ 和**理想自我** $i(a)$ 的舞台。在 6 至 18 个月之间，婴儿会通过一面镜子，或者通过一个他者，把自己和外部世界区分开来。具体地说，婴儿把镜子里的形象认作了自己，或者把他人的指认认作了自己，但是还没法完全地控制自己的身体，破碎的自体感和完整的镜像之间的冲突促使了 $e$ 的诞生，$e$ 是对 $i(a)$ 的误认[2,P638]。\n\n> 在拉康的理解中，想象性认同时常被设想为认同的一种理想状态，因为就自我的形成而言，完全自足的想象性认同实际是不存在的，自我与他人之间的镜像关系自始就受到了象征秩序的侵入。例如处在镜像阶段的婴儿，父母（他者）常常会指着镜中的它的形象说：“你看，这就是你，这就是我们可爱的小宝宝。”从婴儿的角度说，父母所指认的这个形象（可爱）乃是它的理想自我的一个凝定点，它从这里获得了对自我的一种欣悦认定；可从主体—他者关系的误认结构说，父母的这一指认其实是他者的一种凝视，是处在象征秩序中的他者的一种凝视，主体从他者的这个凝视中得到一个讯息、一个指令或一种朝向未来的期待，并且去认同它，将它内化为自己的自我理想，以此完成其象征性认同。<br/>\n> 在象征性认同中，根本的一点在于（大）他者的引入。在此，他者并不是现实的他人，不是站在镜子面前给孩子指认其理想认同对象的现实的父母，而是代表着象征秩序的父母所在的位置，是父母以期许的目光、以预期的话语指示出来的那个场所。[2,P639]\n\n## 认同\n\n这个图片上的字母是有不同的版本的[2,P635][3,P144]，一版是英语，一版是法语。具体地说，$\\mathrm{A}$（Autre）和 $\\mathrm{O}$ （Other）都代表大他者，$a$ 和 $o$ 都代表小他者（other），$e$（ego）和 $m$ （moi）都代表自我。\n\n<img src=\"/blog/images/desire-2.webp\">\n\n- $m-i(a)$：镜像阶段。此站点就是一个 $i(a)$，站点背后的人是 $\\mathrm{\\not{S}}$，他由 $m$ 和 $i(a)$ 这两个部分组成。\n- $s\\mathrm{(A)}$：大他者的意指，语言的意义。\n- $\\mathrm{Signifier\\to}\\ s\\mathrm{(A) \\to A \\to Voice}$：能指的意义被大他者剥离，只剩下了声音。如果大他者是个法语的语言环境，而我们又听不懂法语的话，法语对我们而言就只剩下了声音。\n- $\\mathrm{\\not{S}\\to A} \\to s\\mathrm{(A) \\to I(A)}$：通过大他者回溯地产生意义，获得自我理想。$\\mathrm{A}$ 告诉我们，医生是一个崇高的职业，于是小明会通过 $s(\\mathrm{A})$ 来 $\\mathrm{I(A)}$。\n- $\\mathrm{\\not{S}\\to}\\ i(a) \\to m \\to \\mathrm{I(A)}$：象征性认同通过想象性认同实现的短路。通过认同理想自我，获得自我和自我理想。小明的 $i(a)$ 是一个穿着白大褂、救死扶伤的人的形象，于是他的 $m$ 会做出一些行动，去获得 $\\mathrm{I(A)}$。\n- $\\mathrm{A}\\to i(a) \\to m \\to s\\mathrm{(A)}$：$i(a)$ 把 $\\mathrm{A}$对“我”的象征的看转换为“我”对自己想象的看，来结构“我”的意义[2,P640]，$m$ 并不是自发出现的，它被表示为一个转喻。\n\n## 实在界和象征界\n\n实在界 $\\mathrm{R}$（the Real），是一个处处存在的东西，也处处不存在的东西，它是一元的[1,P3]。简单地理解，就是死亡。以一个唯物主义者的视角看，可以理解为是在他死亡之后，或者在他出生之前，他“所经历”的世界；以一个唯我论者的视角来看，可以理解为是在他死亡之后，或者在他出生之前的整个世界；或者说，如果现在把所有有意识的活物都去除了，那么剩下的就是实在界。当我们感到肚子饿的时候，就是实在界的一次闯入，进而产生生理上的需要[4,P111]。\n\n象征界 $\\mathrm{S}$（the Symbolic）是由缺席和在场的二元对立关系组成的。简单地理解，就是所有的他人，或者是语言。我们为什么要使用语言，是为了**表达**某种不常**位**于我们身边的**东西**。如我们在一个晴朗的白天说“昨天晚上的月亮真好看”，这时候月亮是不在我们身边的，或者说我们白天多数时间是看不见它的，它不在场；当我们说“我想吃苹果”时，“苹果”这个词语代表了苹果的实体，当我们正在使用这个词语时，可能身边并没有任何一个苹果，即苹果是缺位的。我们通过使用语言符号，把一个当前不在场的事物领进我们的对话环境里了，拉康把这称作“词语是由缺位构成的在场”[1,P3]。\n\n## 不完整的大他者\n\n以法律为例子，我们之所以相信法律的权威，是因为我们从小就被他者教育要去遵守法律，法律被纳入了我们“能指的共时网络”里。但还是会有一些人去触犯它的，以故意杀人者为例子，或许他缺失一些教育，或许他压根就不把法律当回事。或者更简单地说，如果我们遇到一只野生的老虎，它也是不会遵守法律的，因为我们和它不在同一个层面里，它不懂人类的语言，为法律背书的是我们人类的集体无意识 $\\mathrm{A}$。所以拉康说“无意识是像语言那样被结构的”。\n\n那谁又为我们的集体无意识背书呢？这种说法类似于：这本书上的文字只不过是一些抽象的符号，是用油墨印刷出来的，那这本书还有什么意义呢；人不过是由一些蛋白质、有机无机物组成的，那我们活着还有什么意义呢；大他者 $\\mathrm{A}$ 为我们背书，那谁又为大他者背书呢。如果我们坚持这种向上抽一道的、抬杠式的追问，这时候我们就会陷入一种虚无的状态，或者说陷入实在界里了。看似完整的象征界被实在界切开了一道裂缝，切成了一道一道的，变成了 $\\mathrm{\\not{A}}$。象征界本身是不完备的，我们总是会向实在界回归，就像刘慈欣说的，一切都将逝去，只有死神永生，这里的“死神”就是实在界。\n\n当象征界被悬置的时候，想象界就落入了实在界。我们陷入了深渊里，陷入了一个大漩涡 $\\not{\\mathrm{O}}$ 里，$\\not{\\mathrm{A}}$ 和 $\\not{\\mathrm{O}}$ 是同一个意思，是被画杠的大他者。但我们还是有着求生的本能的，生活还是有着希望的，为了回到码头上，我们需要一根救命的稻草，这根救命的稻草就是对象 $a$，或者说是来自码头的薯条。\n\n<img src=\"/blog/images/RSI.webp\">\n\n## 超越认同\n\n> 对于接受精神分析的人来说，精神分析过程的最后时刻，恰恰就是他摆脱这一问题的时刻，即这样的时刻：他接受了大对体为他提供的、没有道理的存在。[3,P157]\n\n<img src=\"/blog/images/$◇a.webp\">\n\n<img src=\"/blog/images/desire-3.webp\">\n\n- $\\mathrm{\\not{S}\\to A} \\overset{d}{\\to}  \\mathrm{Ch \\overset{、}{e} \\ voui?}$：我们要飞向何方？（向大他者提问：你想咋地？）\n- $\\mathrm{\\not{S}}\\diamondsuit a$：去码头整点薯条。\n\n对象 $a$ 是一个容器，它什么都可以装。应用到电影里就是麦高芬，是群雄逐鹿的鹿。\n\n$\\diamondsuit$ 表示了既析取又合取、既大于又小于、既围合又发展、既连接又分离的悖论关系[1,P213][2,P648]。$\\mathrm{\\not{S}}\\diamondsuit a$ 可以读作“分裂的主体在对象 a 面前的消隐”或者“对象 a 抹平了主体的分裂”。即当我们**有事儿干**的时候，我们就不会去想活着到底是为了什么。\n\n## 俄狄浦斯阶段与菲勒斯\n\n菲勒斯（Phallus）是阳具的图腾。而在拉康的语境下，它分为这三种：\n\n实在的菲勒斯 $\\Pi$：解剖学意义上的男性生殖器官[2,P620]。在以前医学不发达，没有检测方法的时候，我们只能等到孩子出生之后才能知道他/她的性别。对于一个刚出生的婴儿，对其性别身份的建构便是围绕着“菲勒斯的缺席和在场”实现的，即第一性征，而第二性征在是在青春期才发展出来的。\n\n**想象的菲勒斯** $\\phi$：弗洛伊德提出了人格的发展有五个阶段，约 0 至 3 岁为第一个阶段，这时候婴儿是刚和母体分离的，母亲是婴儿的第一个重要的人，因为孩子之前和母亲是一体的，孩子“是”母亲唯一重要的一方。而在某个时间点之后，孩子会发现自己并**不是**母亲唯一重要的一方，母亲在意的还有一方，而且那一方的身上**有**母亲所没有的东西，孩子会发现母亲的精力不是百分之百用在自己身上的，于是会想象自己**缺**了这个东西[4,P74-75]。为什么是菲勒斯呢，因为父亲是作为一个母子二元关系的外人，是作为一个**换喻**的能指的，你是不可能不给孩子洗澡的。我们可以换一种与性别差异无关，但是同样道理的理解方式：在之前，你在学校里的每一场考试都得了第一名，分都是全班最高的。在之后，你的一个朋友**取代**了你的场场第一名，而且他还买了一本神秘的**书**。你会发现高分总是向你的朋友倾斜，于是会想象自己得不到第一名是不是因为**少**了这本书，即使你是有这本书的，你也可能会怀疑他的书是不是有什么更特别之处。这就像数学上的公理，拉康先默认它们是正确的，然后才由这个前提提出了想象的菲勒斯的概念，它就是那一本缺失的书，第一名这个名号就是母亲，与你竞争的这个朋友就是父亲。\n\n这是拉康对弗洛伊德的俄狄浦斯情结的重写和进一步解释。虽然弗洛伊德的这一理论已经**过时**了，但笔者认为，拉康想要表达的是：我们每个人都会经历一个创伤，即与母亲逐步分离的过程。它打破了母子的二元关系，是由想象界进入象征界的创伤，被表示为 $-\\phi$。而母子之前近乎一体的关系、孩子不用面对社会（象征界）的那个伊甸园的时期是 $\\Delta$，有着**原乐**（Jouissance）。$\\phi$ 是一个根本性缺失的东西，在进入象征界之后，孩子为了弥补这个缺失，会转而追求 $\\Phi$。\n\n<img src=\"/blog/images/RSI.webp\">\n\n象征的菲勒斯 $\\Phi$：权力和荣誉的象征。有句话叫：国王如果认为自己真的是国王，那他就有大问题了，因为国王这个身份是由他者所委任的，不存在真实的世界的王。精神病患者的镜像阶段是失败的，他会认为他就是最大的 $\\Phi$，与实在界合为了一体，不存在想象界的自我和镜我。\n\n## 需要、要求和欲望\n\n需要（need）是有机体内部的一种不平衡的状态，表现为对内外环境的欲求。马斯洛的需求层次理论认为，生理需要是最底层的需要，如吃饭，不吃饭就会有生命的危险。\n\n要求 $\\mathrm{D}$（demand）是通过语言说出来的，是欲望在象征界的现身。它表达的是需要，它只能围绕着欲望转圈，而不能完全地抵达欲望，在语言的裂缝里有一个缺失的能指 $\\mathrm{S(\\not{A})}$，就是想象的菲勒斯。\n\n欲望 $d$（desire）是一个不能被完全满足的东西，是从要求中减去需要的剩余[4,P97]。它和在 $\\Delta$ 里的原乐有关。如孩子在出生之前和母亲是一体的，孩子不用担心自己的生存问题，这时候孩子的欲望是**永远**可以被满足的。直到孩子出生，在出生之后的很长一段时间孩子也是不用担心吃饭的问题的，直到与母亲逐步分离（$-\\phi$），进入象征界。\n\n## 完整的欲望图\n\n从临床的角度看，前三个欲望图是不存在的，起的是教学目的[2,P633]。第一个欲望图表示了主体通过语言进入象征界；第二个欲望图加入了想象界，表示了认同的过程，由于拉康是不确定想象性认同是否是完全独立的，所以将其包裹在了象征性认同里；第三个欲望图表示主体发现了大对体中的不完整性，然后通过幻象公式 $\\mathrm{\\not{S}}\\diamondsuit a$ 抹平了自己的分裂；而第四个欲望图加入了实在界，加入了原乐被语言切割的过程。\n\n<img src=\"/blog/images/desire-4.webp\">\n\n- $\\mathrm{S(\\not{A})}$：大他者中欠缺的能指，即想象的菲勒斯[2,P651]。\n- $\\mathrm{\\not{S}\\diamondsuit D}$：分裂的主体在要求面前消隐，或者叫驱力公式。比如我们在饿的时候说“我饿了”，这时候我们就不会再去想抽象的问题。操作系统里有一个经典的**哲学家吃饭**问题，它背后就表达的是，如果只学哲学，可能连饭都吃不饱。\n- $\\mathrm{\\not{S} \\to A \\to} d \\to \\mathrm{\\not{S}} \\diamondsuit a \\to s\\mathrm{(A)}$：$\\mathrm{\\not{S}}$ 发现了 $\\mathrm{A}$ 不能完全地满足 $d$，于是通过 $\\mathrm{\\not{S}}\\diamondsuit a$ 找回意义。这是一个正常的人经过虚无状态之后的情况。\n- $\\mathrm{\\not{S}\\diamondsuit D} \\to d \\to \\mathrm{\\not{S}} \\diamondsuit a \\to \\mathrm{S(\\not{A})}$：$\\mathrm{\\not{S}}\\diamondsuit a$ 出现的原因是因为 $\\mathrm{S(\\not{A})}$，而只靠 $\\mathrm{\\not{S}\\diamondsuit D}$ 不能完全满足你的 $d$。就像你只说我饿了是没有用的，你得找一个对象 $a$ 来吃。\n- $\\mathrm{Jouissance \\to S(\\not{A}) \\to \\not{S}\\diamondsuit D \\to Castratio}$：原乐被语言切割之后，通过 $\\mathrm{D}$ 表达出来之后仍然有表达不尽的剩余 $\\mathrm{S(\\not{A})}$。而在 $\\mathrm{\\not{S}\\diamondsuit D}$ 的背后，有的只是创伤性的场景：我们再也回不到 $\\Delta$ 了。\n- $\\mathrm{\\not{S}\\diamondsuit D \\to S(\\not{A})}$：对缺失的想象的菲勒斯的追求。如果把这条路径推到极致，就是自杀[2,P657]。自杀就是对自由意志、对原乐最极端的追求，自杀的人是渴望回到 $\\Delta$ 的阶段的，如果他通过这条路径抵达了 $\\mathrm{I(A)}$，那么这个 $\\mathrm{I(A)}$ 就是他自杀的象征性的动机。喜欢极限运动的人也是一样，比如在高楼之间跑酷，在高空跳伞，或者在游乐场坐过山车，都是对原乐的过度追求，或者叫死亡驱力。\n\n人都有生本能和死本能。生本能代表着建立，比如吃饭、学习就是对自身的建立；死本能代表着毁坏，比如语言和肢体上的暴力，玩射击或动作类游戏，甚至于出门去玩、旅游，动动自己的筋骨、把自己身上的汗排出来，都是对死本能的转移。\n\n<img src=\"/blog/images/daodulakang_end.webp\">\n\n## 主人能指与分析家话语\n\n在拉康的精神分析理论中，主人能指（the master signifier）被记为 $\\mathrm{S_1}$。它的特点是，它必须来依靠别的词语来解释它，它就像一块磁铁一样，把别的词语吸引了过来。比如在十六进制这个主人能指下，8+8=10 这个计算就是正确的；在自然单位制下，光速是等于 1 的；在海德格尔下，将来比当前是重要的。\n\n在这个被拉康称为“分析家话语”的式子下，从左下角顺时针旋转的四个位置分别为真理（truth）、代理（agent）、他者（other）和产品（product）。真理是被隐藏起来的东西，代理是信息的发送者，他者是接受者，产品是言说的效果。\n\n$$\n\\frac{a}{\\mathrm{S_2}} \\to \\frac{\\mathrm{\\not{S}}}{\\mathrm{S_1}}\n$$\n\n按笔者个人的理解，S2 就是以前看过的文字，a 可以理解为一种表达的需求，S 杠是本人（当打字复盘时，自己既是信息的发送者也是接受者），S1 是被咳出的主人能指。\n\n## 哲学家吃饭问题\n\n有三个哲学家坐在一张桌子上准备吃饭，而且他们定的规矩还比较奇怪：\n\n1. 桌子上一共只有三根筷子，筷子的数量是有限的，且在同一个时间只能由一个人拿起来一根筷子。（互斥条件）\n2. 当一个人拿起一根筷子之后，除非他吃完饭了，否则他是不会主动放下他已经拿到的筷子的。只有当他吃完饭之后，他才能放下他之前拿到的筷子，让别人拿。而一个人必须要有两根筷子才能吃饭。（持有并等待条件）\n3. 一个人不能把别人已经拿到的筷子抢过来给自己用。（非抢占条件）\n4. 这个桌子是圆桌，在每个哲学家的左手边和右手边各放一根筷子，且一个人只能拿这离他最近的两个筷子，不能拿别的。（循环等待条件）\n\n现在存在这样一种情况：这三个人都先把他们左手边的筷子拿了，都在等右手边的筷子，除非两根筷子都拿到了，否则他们是不会放下已经拿到的筷子的，于是他们就在这里一直等了。现在我们要给他们改一下规矩，他们应该怎么做才能保证所有人都能吃上饭。\n\n- 消除互斥条件：\n  - 把一根筷子折成两根（磁盘共享）。\n  - 或者请一个新人来，当某人想吃饭的时候，必须请示这个新人，让新人给他一次发两根筷子（打印机共享）。\n- 消除持有并等待条件：\n  - 每个人在想吃饭的时候，必须一次性把两根筷子都拿了。（一次性请求所有资源）\n  - 或者当某个人拿不到另一根筷子的时候，要主动把他已经拿到的筷子给放下。（释放没有使用完的资源，可能前功尽弃）\n- 消除非抢占条件：\n  - 当某人想吃饭但是拿不到筷子的时候，可以把别人的筷子抢过来（CPU 调度、内存管理）。\n- 消除循环等待条件：\n  - 给这三个筷子编上 1、2、3 号，当某个人拿筷子的时候，必须先拿编号较小的。如 1-A-2-B-3-C-1，这里 A 把 1 拿了，B 把 2 拿了，C 必须先拿 1，拿不了就等，在等的时间里 B 可以把 3 拿了，然后释放 2 和 3，然后 A 拿 2、释放 1 和 2，C 再拿 1 和 3\n  - 或者让奇数号的哲学家必须先拿他左边，后拿他右边的，而偶数号哲学家则与之相反。如 1-A-2-B-3-C-1，这里 A 把 1 拿了，B 必须先拿 3 拿不了 2，于是 2 可以被 A 拿，然后 A 释放 1 和 2\n- 动态避免或检测修复：时间成本和程序复杂性高\n- 不予理睬：让这三个人从头来一遍（终止线程、重启）\n\n参考书：《操作系统之哲学原理》第 9 章\n","source":"_posts/拉康精神分析理论碎片.md","raw":"---\ntitle: 拉康精神分析理论碎片\ndate: 2024-11-11 19:00:00\npermalink: lacan.html\nmathjax: true\n---\n\n[1][英]迪伦·埃文斯.&nbsp;拉康精神分析介绍性辞典[M].&nbsp;李新雨,译.&nbsp;重庆：西南师范大学出版社，2021.&nbsp;\n\n[2]吴琼.&nbsp;雅克·拉康：阅读你的症状[M].&nbsp;北京：中国人民大学出版社，2011.&nbsp;\n\n[3][斯洛文尼亚]斯拉沃热·齐泽克.&nbsp;意识形态的崇高客体（第二版）[M].&nbsp;季广茂,译.&nbsp;北京：中央编译出版社，2017.&nbsp;\n\n[4][英]肖恩·霍默.&nbsp;导读拉康[M].&nbsp;李新雨,译.&nbsp;重庆：重庆大学出版社，2014.\n\n其中有一部分内容是自己演绎出来的，不一定准确。上面四个参考文献在下面有对应的标号。\n\n## 语言的魔法\n\n我们在刚出生的时候是不会说话的，甚至连站立都做不到，通过他者的教育我们才逐渐成为一个立地的人。通过学习他者的语言，我们从生物意义上的人变成了社会意义上的人。拉康把这个社会化的过程通过一幅图表示了出来，称为欲望图解的基本单位：\n\n<img src=\"/blog/images/desire-1.webp\">\n\n$\\mathrm{S}$ 表示一个**能指**（Signifier）。能指是语言的符号，是字符的形象或者声音。如古人用一个像月牙的象形符号来表示月亮，随着时间的推移演变为现在的“月”字，“月”字就是一个能指。\n\n$\\mathrm{S'}$ 表示另一个能指。$\\mathrm{S \\to S'}$ 为**能指链**，是一串语言符号的链条。如“我想吃苹果”这五个符号是一串能指链。\n\n$\\Delta$ 表示没有被社会化的、原初的、前于语言的人，包含人的“动物本能的部分”。如我们是从猴子进化而来的。\n\n$\\mathrm{\\not{S}}$ 表示被社会化后的人（Subject）。画了一条杠代表我们的“生物本能的部分”被世俗规矩所约束了，我们不愿意做违反社会秩序的事。如我们不会在厕所之外且有人看到的地方随地大小便，因为语言，或者说符号系统、象征秩序、大他者（Other）不允许我们这么做。\n\n$\\Delta \\to \\mathrm{\\not{S}}$ 与能指链相交，代表我们通过语言在《地球 Online》这款游戏里正式注册了一个账号——在此之前我们都是云玩家。有句话叫人只能死两次，第一次是医学意义上的死亡，第二次是社会意义上的死亡：被所有人遗忘。相对应地，人被社会化可以理解为是人的“第二次出生”：人被登记在**象征界**里了。\n\n$\\Delta \\to \\mathrm{\\not{S}}$ 的方向与能指链的方向相反，代表一句话的意义从其接收者的角度来看，是在接收完之后被**回溯**性建构的。如儿童被家长教育不能随地大小便，他们刚开始是不知道家长的语音是什么意思的，在经过多次的言传身教，在头脑中建立起条件反射之后，儿童才逐渐地理解“不能随地大小便”这句话是什么意思；一个更易懂的例子是：在学习英语单词时，我们是不知道“apple”这五个字母为什么是用来代表苹果的，只能先把它记住，在后来的使用过程中就用它代表苹果，因为大家都是这样使用的；也可以理解为：我们需要通过后文来理解前文的意思，如“我想吃苹果”，当只听到“我想”这两个字时，我们可能不明白对方在表达什么，只有在听完这五个字之后，我们才能明白对方在表达什么。\n\n## 换喻和隐喻\n\n我们通过语言进入了社会。在组织和理解语言的过程中，我们会使用换喻和隐喻。**换喻**是平行于一句话的阅读方向的，我们把一些词语组织起来形成一句完整的话，杠的维持代表我们组织语言、理解语言的时延；**隐喻**是垂直于一句话的阅读方向的，我们选择一些特定的词语来表达某种意思，杠的穿越代表我们成功埋下或者挖出一个词的意思。\n\n汉字的造字法有象形和指事，组字法有会意和形声，用字法有转注和假借，在使用语言的过程中，一个符号可以被延申出多种意义，一个能指的**所指**（signified）可以有多个，即老子《道德经》里的“名可名，非常名”。\n\n$$\n\\frac{\\mathrm{S}}{s}\n$$\n\n如“生”这个能指的所指有“live”、“produce”、“organism”、“raw”、“student”、“-er”等，为了理解生这个能指的意指，我们要依靠它的上下文，把能指和能指之间建立起联系，找出它们的表意功能，这叫**换喻**或者转喻。如当我们看到“我想吃苹果”这句话，这时我们理解的“苹果”是指那个红的、圆的、甜的东西——不会指苹果手机，因为我们是正常人，不会吃手机。我们通过“我想吃”这几个能指，加上一系列被隐藏在当前语境背后的能指链，或者说是被我们之前所获得的知识（$\\mathrm{S_2}$），来换喻出了“苹果”在当前语境下的含义。拉康将其形式化地表示为换喻公式：\n\n$$\nf\\mathrm{(S...S')S \\cong S(-)}s\n$$\n\n这读作：能指与能指相联系的表意功能全等于对杠的维持[1,P222]。**杠** $-$ 是从能指 $\\mathrm{S}$ 指向所指 $s$ 的阻抗，从能指到所指的指向关系被称为**意指** $f\\mathrm{S}$[1,P218]，但是这种指向关系被它们中间的那一道杠阻断了。从语言理解者的角度来看，当这道杠正在被维持的时候，代表我们大脑的语言解析器正在工作中，我们正在试图理解某个能指意指的是什么所指；从语言组织者的角度来看，当这道杠正在被维持的时候，代表我们正在组织语言中，一句话里每个词的意思还没有被相对地固定下来。\n\n相对立的，当这道杠被穿越的时候，代表某个词的意思已经相对地被固定下来了。当我们在组织一句话的时候，比如“我想吃苹果”，如果我们想表达一种并不严肃的态度，我们可以把“我”替代成“俺”、“咱”来隐喻一种并不严肃的态度；当我们在理解一句话的时候，比如“我想买爱疯手机”，我们会把“爱疯手机”看作隐喻的是一个电子产品，它替代的是“IPhone”这个能指，而不是关于“爱”和“疯”的。拉康将其形式化地表示为隐喻公式：\n\n$$\nf\\mathrm{(\\frac{S'}{S})S \\cong S(+)}s\n$$\n\n这读作：一个能指替代另一能指的表意功能全等于对杠的穿越[1,P218-219]。\n\n## 理想自我和自我理想\n\n$i(o)$：imaginary other：想象性他者。或者叫 $i(a)$（autre）。这里的 $o$ 和 $a$ 是同一个意思。小写的字母与**想象界**有关[2,P643]。\n\n**理想自我** $i(a)$ 是我们看自己，我们以这种形象显得可爱，这种形象代表着我们想成为怎样的人，是对形象的**想象性认同**。\n\n**自我理想** $\\mathrm{I(A)}$ 是我们透过某个位置被人看，别人从那个位置观察我们，我们从那个位置审视自己，以便我们显得可爱，是对位置的**象征性认同**[3,P147]。\n\n例如，小明的理想自我是一个穿着白大褂、救死扶伤的人的形象，自我理想是医生这个工作岗位。\n\n## 想象界和镜像阶段\n\n想象界 $\\mathrm{I}$（the Imaginary）是一个认同与镜映的领域[4,P44]。是**自我** $e$ 和**理想自我** $i(a)$ 的舞台。在 6 至 18 个月之间，婴儿会通过一面镜子，或者通过一个他者，把自己和外部世界区分开来。具体地说，婴儿把镜子里的形象认作了自己，或者把他人的指认认作了自己，但是还没法完全地控制自己的身体，破碎的自体感和完整的镜像之间的冲突促使了 $e$ 的诞生，$e$ 是对 $i(a)$ 的误认[2,P638]。\n\n> 在拉康的理解中，想象性认同时常被设想为认同的一种理想状态，因为就自我的形成而言，完全自足的想象性认同实际是不存在的，自我与他人之间的镜像关系自始就受到了象征秩序的侵入。例如处在镜像阶段的婴儿，父母（他者）常常会指着镜中的它的形象说：“你看，这就是你，这就是我们可爱的小宝宝。”从婴儿的角度说，父母所指认的这个形象（可爱）乃是它的理想自我的一个凝定点，它从这里获得了对自我的一种欣悦认定；可从主体—他者关系的误认结构说，父母的这一指认其实是他者的一种凝视，是处在象征秩序中的他者的一种凝视，主体从他者的这个凝视中得到一个讯息、一个指令或一种朝向未来的期待，并且去认同它，将它内化为自己的自我理想，以此完成其象征性认同。<br/>\n> 在象征性认同中，根本的一点在于（大）他者的引入。在此，他者并不是现实的他人，不是站在镜子面前给孩子指认其理想认同对象的现实的父母，而是代表着象征秩序的父母所在的位置，是父母以期许的目光、以预期的话语指示出来的那个场所。[2,P639]\n\n## 认同\n\n这个图片上的字母是有不同的版本的[2,P635][3,P144]，一版是英语，一版是法语。具体地说，$\\mathrm{A}$（Autre）和 $\\mathrm{O}$ （Other）都代表大他者，$a$ 和 $o$ 都代表小他者（other），$e$（ego）和 $m$ （moi）都代表自我。\n\n<img src=\"/blog/images/desire-2.webp\">\n\n- $m-i(a)$：镜像阶段。此站点就是一个 $i(a)$，站点背后的人是 $\\mathrm{\\not{S}}$，他由 $m$ 和 $i(a)$ 这两个部分组成。\n- $s\\mathrm{(A)}$：大他者的意指，语言的意义。\n- $\\mathrm{Signifier\\to}\\ s\\mathrm{(A) \\to A \\to Voice}$：能指的意义被大他者剥离，只剩下了声音。如果大他者是个法语的语言环境，而我们又听不懂法语的话，法语对我们而言就只剩下了声音。\n- $\\mathrm{\\not{S}\\to A} \\to s\\mathrm{(A) \\to I(A)}$：通过大他者回溯地产生意义，获得自我理想。$\\mathrm{A}$ 告诉我们，医生是一个崇高的职业，于是小明会通过 $s(\\mathrm{A})$ 来 $\\mathrm{I(A)}$。\n- $\\mathrm{\\not{S}\\to}\\ i(a) \\to m \\to \\mathrm{I(A)}$：象征性认同通过想象性认同实现的短路。通过认同理想自我，获得自我和自我理想。小明的 $i(a)$ 是一个穿着白大褂、救死扶伤的人的形象，于是他的 $m$ 会做出一些行动，去获得 $\\mathrm{I(A)}$。\n- $\\mathrm{A}\\to i(a) \\to m \\to s\\mathrm{(A)}$：$i(a)$ 把 $\\mathrm{A}$对“我”的象征的看转换为“我”对自己想象的看，来结构“我”的意义[2,P640]，$m$ 并不是自发出现的，它被表示为一个转喻。\n\n## 实在界和象征界\n\n实在界 $\\mathrm{R}$（the Real），是一个处处存在的东西，也处处不存在的东西，它是一元的[1,P3]。简单地理解，就是死亡。以一个唯物主义者的视角看，可以理解为是在他死亡之后，或者在他出生之前，他“所经历”的世界；以一个唯我论者的视角来看，可以理解为是在他死亡之后，或者在他出生之前的整个世界；或者说，如果现在把所有有意识的活物都去除了，那么剩下的就是实在界。当我们感到肚子饿的时候，就是实在界的一次闯入，进而产生生理上的需要[4,P111]。\n\n象征界 $\\mathrm{S}$（the Symbolic）是由缺席和在场的二元对立关系组成的。简单地理解，就是所有的他人，或者是语言。我们为什么要使用语言，是为了**表达**某种不常**位**于我们身边的**东西**。如我们在一个晴朗的白天说“昨天晚上的月亮真好看”，这时候月亮是不在我们身边的，或者说我们白天多数时间是看不见它的，它不在场；当我们说“我想吃苹果”时，“苹果”这个词语代表了苹果的实体，当我们正在使用这个词语时，可能身边并没有任何一个苹果，即苹果是缺位的。我们通过使用语言符号，把一个当前不在场的事物领进我们的对话环境里了，拉康把这称作“词语是由缺位构成的在场”[1,P3]。\n\n## 不完整的大他者\n\n以法律为例子，我们之所以相信法律的权威，是因为我们从小就被他者教育要去遵守法律，法律被纳入了我们“能指的共时网络”里。但还是会有一些人去触犯它的，以故意杀人者为例子，或许他缺失一些教育，或许他压根就不把法律当回事。或者更简单地说，如果我们遇到一只野生的老虎，它也是不会遵守法律的，因为我们和它不在同一个层面里，它不懂人类的语言，为法律背书的是我们人类的集体无意识 $\\mathrm{A}$。所以拉康说“无意识是像语言那样被结构的”。\n\n那谁又为我们的集体无意识背书呢？这种说法类似于：这本书上的文字只不过是一些抽象的符号，是用油墨印刷出来的，那这本书还有什么意义呢；人不过是由一些蛋白质、有机无机物组成的，那我们活着还有什么意义呢；大他者 $\\mathrm{A}$ 为我们背书，那谁又为大他者背书呢。如果我们坚持这种向上抽一道的、抬杠式的追问，这时候我们就会陷入一种虚无的状态，或者说陷入实在界里了。看似完整的象征界被实在界切开了一道裂缝，切成了一道一道的，变成了 $\\mathrm{\\not{A}}$。象征界本身是不完备的，我们总是会向实在界回归，就像刘慈欣说的，一切都将逝去，只有死神永生，这里的“死神”就是实在界。\n\n当象征界被悬置的时候，想象界就落入了实在界。我们陷入了深渊里，陷入了一个大漩涡 $\\not{\\mathrm{O}}$ 里，$\\not{\\mathrm{A}}$ 和 $\\not{\\mathrm{O}}$ 是同一个意思，是被画杠的大他者。但我们还是有着求生的本能的，生活还是有着希望的，为了回到码头上，我们需要一根救命的稻草，这根救命的稻草就是对象 $a$，或者说是来自码头的薯条。\n\n<img src=\"/blog/images/RSI.webp\">\n\n## 超越认同\n\n> 对于接受精神分析的人来说，精神分析过程的最后时刻，恰恰就是他摆脱这一问题的时刻，即这样的时刻：他接受了大对体为他提供的、没有道理的存在。[3,P157]\n\n<img src=\"/blog/images/$◇a.webp\">\n\n<img src=\"/blog/images/desire-3.webp\">\n\n- $\\mathrm{\\not{S}\\to A} \\overset{d}{\\to}  \\mathrm{Ch \\overset{、}{e} \\ voui?}$：我们要飞向何方？（向大他者提问：你想咋地？）\n- $\\mathrm{\\not{S}}\\diamondsuit a$：去码头整点薯条。\n\n对象 $a$ 是一个容器，它什么都可以装。应用到电影里就是麦高芬，是群雄逐鹿的鹿。\n\n$\\diamondsuit$ 表示了既析取又合取、既大于又小于、既围合又发展、既连接又分离的悖论关系[1,P213][2,P648]。$\\mathrm{\\not{S}}\\diamondsuit a$ 可以读作“分裂的主体在对象 a 面前的消隐”或者“对象 a 抹平了主体的分裂”。即当我们**有事儿干**的时候，我们就不会去想活着到底是为了什么。\n\n## 俄狄浦斯阶段与菲勒斯\n\n菲勒斯（Phallus）是阳具的图腾。而在拉康的语境下，它分为这三种：\n\n实在的菲勒斯 $\\Pi$：解剖学意义上的男性生殖器官[2,P620]。在以前医学不发达，没有检测方法的时候，我们只能等到孩子出生之后才能知道他/她的性别。对于一个刚出生的婴儿，对其性别身份的建构便是围绕着“菲勒斯的缺席和在场”实现的，即第一性征，而第二性征在是在青春期才发展出来的。\n\n**想象的菲勒斯** $\\phi$：弗洛伊德提出了人格的发展有五个阶段，约 0 至 3 岁为第一个阶段，这时候婴儿是刚和母体分离的，母亲是婴儿的第一个重要的人，因为孩子之前和母亲是一体的，孩子“是”母亲唯一重要的一方。而在某个时间点之后，孩子会发现自己并**不是**母亲唯一重要的一方，母亲在意的还有一方，而且那一方的身上**有**母亲所没有的东西，孩子会发现母亲的精力不是百分之百用在自己身上的，于是会想象自己**缺**了这个东西[4,P74-75]。为什么是菲勒斯呢，因为父亲是作为一个母子二元关系的外人，是作为一个**换喻**的能指的，你是不可能不给孩子洗澡的。我们可以换一种与性别差异无关，但是同样道理的理解方式：在之前，你在学校里的每一场考试都得了第一名，分都是全班最高的。在之后，你的一个朋友**取代**了你的场场第一名，而且他还买了一本神秘的**书**。你会发现高分总是向你的朋友倾斜，于是会想象自己得不到第一名是不是因为**少**了这本书，即使你是有这本书的，你也可能会怀疑他的书是不是有什么更特别之处。这就像数学上的公理，拉康先默认它们是正确的，然后才由这个前提提出了想象的菲勒斯的概念，它就是那一本缺失的书，第一名这个名号就是母亲，与你竞争的这个朋友就是父亲。\n\n这是拉康对弗洛伊德的俄狄浦斯情结的重写和进一步解释。虽然弗洛伊德的这一理论已经**过时**了，但笔者认为，拉康想要表达的是：我们每个人都会经历一个创伤，即与母亲逐步分离的过程。它打破了母子的二元关系，是由想象界进入象征界的创伤，被表示为 $-\\phi$。而母子之前近乎一体的关系、孩子不用面对社会（象征界）的那个伊甸园的时期是 $\\Delta$，有着**原乐**（Jouissance）。$\\phi$ 是一个根本性缺失的东西，在进入象征界之后，孩子为了弥补这个缺失，会转而追求 $\\Phi$。\n\n<img src=\"/blog/images/RSI.webp\">\n\n象征的菲勒斯 $\\Phi$：权力和荣誉的象征。有句话叫：国王如果认为自己真的是国王，那他就有大问题了，因为国王这个身份是由他者所委任的，不存在真实的世界的王。精神病患者的镜像阶段是失败的，他会认为他就是最大的 $\\Phi$，与实在界合为了一体，不存在想象界的自我和镜我。\n\n## 需要、要求和欲望\n\n需要（need）是有机体内部的一种不平衡的状态，表现为对内外环境的欲求。马斯洛的需求层次理论认为，生理需要是最底层的需要，如吃饭，不吃饭就会有生命的危险。\n\n要求 $\\mathrm{D}$（demand）是通过语言说出来的，是欲望在象征界的现身。它表达的是需要，它只能围绕着欲望转圈，而不能完全地抵达欲望，在语言的裂缝里有一个缺失的能指 $\\mathrm{S(\\not{A})}$，就是想象的菲勒斯。\n\n欲望 $d$（desire）是一个不能被完全满足的东西，是从要求中减去需要的剩余[4,P97]。它和在 $\\Delta$ 里的原乐有关。如孩子在出生之前和母亲是一体的，孩子不用担心自己的生存问题，这时候孩子的欲望是**永远**可以被满足的。直到孩子出生，在出生之后的很长一段时间孩子也是不用担心吃饭的问题的，直到与母亲逐步分离（$-\\phi$），进入象征界。\n\n## 完整的欲望图\n\n从临床的角度看，前三个欲望图是不存在的，起的是教学目的[2,P633]。第一个欲望图表示了主体通过语言进入象征界；第二个欲望图加入了想象界，表示了认同的过程，由于拉康是不确定想象性认同是否是完全独立的，所以将其包裹在了象征性认同里；第三个欲望图表示主体发现了大对体中的不完整性，然后通过幻象公式 $\\mathrm{\\not{S}}\\diamondsuit a$ 抹平了自己的分裂；而第四个欲望图加入了实在界，加入了原乐被语言切割的过程。\n\n<img src=\"/blog/images/desire-4.webp\">\n\n- $\\mathrm{S(\\not{A})}$：大他者中欠缺的能指，即想象的菲勒斯[2,P651]。\n- $\\mathrm{\\not{S}\\diamondsuit D}$：分裂的主体在要求面前消隐，或者叫驱力公式。比如我们在饿的时候说“我饿了”，这时候我们就不会再去想抽象的问题。操作系统里有一个经典的**哲学家吃饭**问题，它背后就表达的是，如果只学哲学，可能连饭都吃不饱。\n- $\\mathrm{\\not{S} \\to A \\to} d \\to \\mathrm{\\not{S}} \\diamondsuit a \\to s\\mathrm{(A)}$：$\\mathrm{\\not{S}}$ 发现了 $\\mathrm{A}$ 不能完全地满足 $d$，于是通过 $\\mathrm{\\not{S}}\\diamondsuit a$ 找回意义。这是一个正常的人经过虚无状态之后的情况。\n- $\\mathrm{\\not{S}\\diamondsuit D} \\to d \\to \\mathrm{\\not{S}} \\diamondsuit a \\to \\mathrm{S(\\not{A})}$：$\\mathrm{\\not{S}}\\diamondsuit a$ 出现的原因是因为 $\\mathrm{S(\\not{A})}$，而只靠 $\\mathrm{\\not{S}\\diamondsuit D}$ 不能完全满足你的 $d$。就像你只说我饿了是没有用的，你得找一个对象 $a$ 来吃。\n- $\\mathrm{Jouissance \\to S(\\not{A}) \\to \\not{S}\\diamondsuit D \\to Castratio}$：原乐被语言切割之后，通过 $\\mathrm{D}$ 表达出来之后仍然有表达不尽的剩余 $\\mathrm{S(\\not{A})}$。而在 $\\mathrm{\\not{S}\\diamondsuit D}$ 的背后，有的只是创伤性的场景：我们再也回不到 $\\Delta$ 了。\n- $\\mathrm{\\not{S}\\diamondsuit D \\to S(\\not{A})}$：对缺失的想象的菲勒斯的追求。如果把这条路径推到极致，就是自杀[2,P657]。自杀就是对自由意志、对原乐最极端的追求，自杀的人是渴望回到 $\\Delta$ 的阶段的，如果他通过这条路径抵达了 $\\mathrm{I(A)}$，那么这个 $\\mathrm{I(A)}$ 就是他自杀的象征性的动机。喜欢极限运动的人也是一样，比如在高楼之间跑酷，在高空跳伞，或者在游乐场坐过山车，都是对原乐的过度追求，或者叫死亡驱力。\n\n人都有生本能和死本能。生本能代表着建立，比如吃饭、学习就是对自身的建立；死本能代表着毁坏，比如语言和肢体上的暴力，玩射击或动作类游戏，甚至于出门去玩、旅游，动动自己的筋骨、把自己身上的汗排出来，都是对死本能的转移。\n\n<img src=\"/blog/images/daodulakang_end.webp\">\n\n## 主人能指与分析家话语\n\n在拉康的精神分析理论中，主人能指（the master signifier）被记为 $\\mathrm{S_1}$。它的特点是，它必须来依靠别的词语来解释它，它就像一块磁铁一样，把别的词语吸引了过来。比如在十六进制这个主人能指下，8+8=10 这个计算就是正确的；在自然单位制下，光速是等于 1 的；在海德格尔下，将来比当前是重要的。\n\n在这个被拉康称为“分析家话语”的式子下，从左下角顺时针旋转的四个位置分别为真理（truth）、代理（agent）、他者（other）和产品（product）。真理是被隐藏起来的东西，代理是信息的发送者，他者是接受者，产品是言说的效果。\n\n$$\n\\frac{a}{\\mathrm{S_2}} \\to \\frac{\\mathrm{\\not{S}}}{\\mathrm{S_1}}\n$$\n\n按笔者个人的理解，S2 就是以前看过的文字，a 可以理解为一种表达的需求，S 杠是本人（当打字复盘时，自己既是信息的发送者也是接受者），S1 是被咳出的主人能指。\n\n## 哲学家吃饭问题\n\n有三个哲学家坐在一张桌子上准备吃饭，而且他们定的规矩还比较奇怪：\n\n1. 桌子上一共只有三根筷子，筷子的数量是有限的，且在同一个时间只能由一个人拿起来一根筷子。（互斥条件）\n2. 当一个人拿起一根筷子之后，除非他吃完饭了，否则他是不会主动放下他已经拿到的筷子的。只有当他吃完饭之后，他才能放下他之前拿到的筷子，让别人拿。而一个人必须要有两根筷子才能吃饭。（持有并等待条件）\n3. 一个人不能把别人已经拿到的筷子抢过来给自己用。（非抢占条件）\n4. 这个桌子是圆桌，在每个哲学家的左手边和右手边各放一根筷子，且一个人只能拿这离他最近的两个筷子，不能拿别的。（循环等待条件）\n\n现在存在这样一种情况：这三个人都先把他们左手边的筷子拿了，都在等右手边的筷子，除非两根筷子都拿到了，否则他们是不会放下已经拿到的筷子的，于是他们就在这里一直等了。现在我们要给他们改一下规矩，他们应该怎么做才能保证所有人都能吃上饭。\n\n- 消除互斥条件：\n  - 把一根筷子折成两根（磁盘共享）。\n  - 或者请一个新人来，当某人想吃饭的时候，必须请示这个新人，让新人给他一次发两根筷子（打印机共享）。\n- 消除持有并等待条件：\n  - 每个人在想吃饭的时候，必须一次性把两根筷子都拿了。（一次性请求所有资源）\n  - 或者当某个人拿不到另一根筷子的时候，要主动把他已经拿到的筷子给放下。（释放没有使用完的资源，可能前功尽弃）\n- 消除非抢占条件：\n  - 当某人想吃饭但是拿不到筷子的时候，可以把别人的筷子抢过来（CPU 调度、内存管理）。\n- 消除循环等待条件：\n  - 给这三个筷子编上 1、2、3 号，当某个人拿筷子的时候，必须先拿编号较小的。如 1-A-2-B-3-C-1，这里 A 把 1 拿了，B 把 2 拿了，C 必须先拿 1，拿不了就等，在等的时间里 B 可以把 3 拿了，然后释放 2 和 3，然后 A 拿 2、释放 1 和 2，C 再拿 1 和 3\n  - 或者让奇数号的哲学家必须先拿他左边，后拿他右边的，而偶数号哲学家则与之相反。如 1-A-2-B-3-C-1，这里 A 把 1 拿了，B 必须先拿 3 拿不了 2，于是 2 可以被 A 拿，然后 A 释放 1 和 2\n- 动态避免或检测修复：时间成本和程序复杂性高\n- 不予理睬：让这三个人从头来一遍（终止线程、重启）\n\n参考书：《操作系统之哲学原理》第 9 章\n","slug":"拉康精神分析理论碎片","published":1,"updated":"2025-09-14T15:45:18.879Z","__permalink":"lacan.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnl000c5ws63aigf2r6","content":"<p>[1][英] 迪伦・埃文斯.&nbsp;拉康精神分析介绍性辞典 [M].&nbsp;李新雨，译.&nbsp;重庆：西南师范大学出版社，2021.&nbsp;</p>\n<p>[2] 吴琼.&nbsp;雅克・拉康：阅读你的症状 [M].&nbsp;北京：中国人民大学出版社，2011.&nbsp;</p>\n<p>[3][斯洛文尼亚] 斯拉沃热・齐泽克.&nbsp;意识形态的崇高客体（第二版）[M].&nbsp;季广茂，译.&nbsp;北京：中央编译出版社，2017.&nbsp;</p>\n<p>[4][英] 肖恩・霍默.&nbsp;导读拉康 [M].&nbsp;李新雨，译.&nbsp;重庆：重庆大学出版社，2014.</p>\n<p>其中有一部分内容是自己演绎出来的，不一定准确。上面四个参考文献在下面有对应的标号。</p>\n<h2 id=\"语言的魔法\">语言的魔法</h2>\n<p>我们在刚出生的时候是不会说话的，甚至连站立都做不到，通过他者的教育我们才逐渐成为一个立地的人。通过学习他者的语言，我们从生物意义上的人变成了社会意义上的人。拉康把这个社会化的过程通过一幅图表示了出来，称为欲望图解的基本单位：</p>\n<p><img src=\"/blog/images/desire-1.webp\"></p>\n<p><span class=\"math inline\">\\(\\mathrm{S}\\)</span>\n表示一个<strong>能指</strong>（Signifier）。能指是语言的符号，是字符的形象或者声音。如古人用一个像月牙的象形符号来表示月亮，随着时间的推移演变为现在的 “月” 字，“月” 字就是一个能指。</p>\n<p><span class=\"math inline\">\\(\\mathrm{S'}\\)</span>\n表示另一个能指。<span class=\"math inline\">\\(\\mathrm{S \\to\nS'}\\)</span>\n为<strong>能指链</strong>，是一串语言符号的链条。如 “我想吃苹果” 这五个符号是一串能指链。</p>\n<p><span class=\"math inline\">\\(\\Delta\\)</span>\n表示没有被社会化的、原初的、前于语言的人，包含人的 “动物本能的部分”。如我们是从猴子进化而来的。</p>\n<p><span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span>\n表示被社会化后的人（Subject）。画了一条杠代表我们的 “生物本能的部分” 被世俗规矩所约束了，我们不愿意做违反社会秩序的事。如我们不会在厕所之外且有人看到的地方随地大小便，因为语言，或者说符号系统、象征秩序、大他者（Other）不允许我们这么做。</p>\n<p><span class=\"math inline\">\\(\\Delta \\to \\mathrm{\\not{S}}\\)</span>\n与能指链相交，代表我们通过语言在《地球\nOnline》这款游戏里正式注册了一个账号 —— 在此之前我们都是云玩家。有句话叫人只能死两次，第一次是医学意义上的死亡，第二次是社会意义上的死亡：被所有人遗忘。相对应地，人被社会化可以理解为是人的 “第二次出生”：人被登记在<strong>象征界</strong>里了。</p>\n<p><span class=\"math inline\">\\(\\Delta \\to \\mathrm{\\not{S}}\\)</span>\n的方向与能指链的方向相反，代表一句话的意义从其接收者的角度来看，是在接收完之后被<strong>回溯</strong>性建构的。如儿童被家长教育不能随地大小便，他们刚开始是不知道家长的语音是什么意思的，在经过多次的言传身教，在头脑中建立起条件反射之后，儿童才逐渐地理解 “不能随地大小便” 这句话是什么意思；一个更易懂的例子是：在学习英语单词时，我们是不知道 “apple” 这五个字母为什么是用来代表苹果的，只能先把它记住，在后来的使用过程中就用它代表苹果，因为大家都是这样使用的；也可以理解为：我们需要通过后文来理解前文的意思，如 “我想吃苹果”，当只听到 “我想” 这两个字时，我们可能不明白对方在表达什么，只有在听完这五个字之后，我们才能明白对方在表达什么。</p>\n<h2 id=\"换喻和隐喻\">换喻和隐喻</h2>\n<p>我们通过语言进入了社会。在组织和理解语言的过程中，我们会使用换喻和隐喻。<strong>换喻</strong>是平行于一句话的阅读方向的，我们把一些词语组织起来形成一句完整的话，杠的维持代表我们组织语言、理解语言的时延；<strong>隐喻</strong>是垂直于一句话的阅读方向的，我们选择一些特定的词语来表达某种意思，杠的穿越代表我们成功埋下或者挖出一个词的意思。</p>\n<p>汉字的造字法有象形和指事，组字法有会意和形声，用字法有转注和假借，在使用语言的过程中，一个符号可以被延申出多种意义，一个能指的<strong>所指</strong>（signified）可以有多个，即老子《道德经》里的 “名可名，非常名”。</p>\n<p><span class=\"math display\">\\[\n\\frac{\\mathrm{S}}{s}\n\\]</span></p>\n<p>如 “生” 这个能指的所指有 “live”、“produce”、“organism”、“raw”、“student”、“-er” 等，为了理解生这个能指的意指，我们要依靠它的上下文，把能指和能指之间建立起联系，找出它们的表意功能，这叫<strong>换喻</strong>或者转喻。如当我们看到 “我想吃苹果” 这句话，这时我们理解的 “苹果” 是指那个红的、圆的、甜的东西 —— 不会指苹果手机，因为我们是正常人，不会吃手机。我们通过 “我想吃” 这几个能指，加上一系列被隐藏在当前语境背后的能指链，或者说是被我们之前所获得的知识（<span class=\"math inline\">\\(\\mathrm{S_2}\\)</span>），来换喻出了 “苹果” 在当前语境下的含义。拉康将其形式化地表示为换喻公式：</p>\n<p><span class=\"math display\">\\[\nf\\mathrm{(S...S')S \\cong S(-)}s\n\\]</span></p>\n<p>这读作：能指与能指相联系的表意功能全等于对杠的维持 [1,P222]。<strong>杠</strong>\n<span class=\"math inline\"> \\(-\\)</span> 是从能指 <span class=\"math inline\">\\(\\mathrm{S}\\)</span> 指向所指 <span class=\"math inline\">\\(s\\)</span>\n的阻抗，从能指到所指的指向关系被称为<strong>意指</strong> <span class=\"math inline\"> \\(f\\mathrm{S}\\)</span>[1,P218]，但是这种指向关系被它们中间的那一道杠阻断了。从语言理解者的角度来看，当这道杠正在被维持的时候，代表我们大脑的语言解析器正在工作中，我们正在试图理解某个能指意指的是什么所指；从语言组织者的角度来看，当这道杠正在被维持的时候，代表我们正在组织语言中，一句话里每个词的意思还没有被相对地固定下来。</p>\n<p>相对立的，当这道杠被穿越的时候，代表某个词的意思已经相对地被固定下来了。当我们在组织一句话的时候，比如 “我想吃苹果”，如果我们想表达一种并不严肃的态度，我们可以把 “我” 替代成 “俺”、“咱” 来隐喻一种并不严肃的态度；当我们在理解一句话的时候，比如 “我想买爱疯手机”，我们会把 “爱疯手机” 看作隐喻的是一个电子产品，它替代的是 “IPhone” 这个能指，而不是关于 “爱” 和 “疯” 的。拉康将其形式化地表示为隐喻公式：</p>\n<p><span class=\"math display\">\\[\nf\\mathrm{(\\frac{S'}{S})S \\cong S(+)}s\n\\]</span></p>\n<p>这读作：一个能指替代另一能指的表意功能全等于对杠的穿越 [1,P218-219]。</p>\n<h2 id=\"理想自我和自我理想\">理想自我和自我理想</h2>\n<p><span class=\"math inline\">\\(i(o)\\)</span>：imaginary\nother：想象性他者。或者叫 <span class=\"math inline\">\\(i(a)\\)</span>（autre）。这里的 <span class=\"math inline\">\\(o\\)</span> 和 <span class=\"math inline\">\\(a\\)</span>\n是同一个意思。小写的字母与<strong>想象界</strong>有关 [2,P643]。</p>\n<p><strong>理想自我</strong> <span class=\"math inline\"> \\(i(a)\\)</span>\n是我们看自己，我们以这种形象显得可爱，这种形象代表着我们想成为怎样的人，是对形象的<strong>想象性认同</strong>。</p>\n<p><strong>自我理想</strong> <span class=\"math inline\"> \\(\\mathrm{I(A)}\\)</span>\n是我们透过某个位置被人看，别人从那个位置观察我们，我们从那个位置审视自己，以便我们显得可爱，是对位置的<strong>象征性认同</strong> [3,P147]。</p>\n<p>例如，小明的理想自我是一个穿着白大褂、救死扶伤的人的形象，自我理想是医生这个工作岗位。</p>\n<h2 id=\"想象界和镜像阶段\">想象界和镜像阶段</h2>\n<p>想象界 <span class=\"math inline\">\\(\\mathrm{I}\\)</span>（the\nImaginary）是一个认同与镜映的领域 [4,P44]。是<strong>自我</strong> <span class=\"math inline\"> \\(e\\)</span> 和<strong>理想自我</strong> <span class=\"math inline\"> \\(i(a)\\)</span> 的舞台。在 6 至 18\n个月之间，婴儿会通过一面镜子，或者通过一个他者，把自己和外部世界区分开来。具体地说，婴儿把镜子里的形象认作了自己，或者把他人的指认认作了自己，但是还没法完全地控制自己的身体，破碎的自体感和完整的镜像之间的冲突促使了\n<span class=\"math inline\">\\(e\\)</span> 的诞生，<span class=\"math inline\">\\(e\\)</span> 是对 <span class=\"math inline\">\\(i(a)\\)</span> 的误认 [2,P638]。</p>\n<blockquote>\n<p>在拉康的理解中，想象性认同时常被设想为认同的一种理想状态，因为就自我的形成而言，完全自足的想象性认同实际是不存在的，自我与他人之间的镜像关系自始就受到了象征秩序的侵入。例如处在镜像阶段的婴儿，父母（他者）常常会指着镜中的它的形象说：“你看，这就是你，这就是我们可爱的小宝宝。” 从婴儿的角度说，父母所指认的这个形象（可爱）乃是它的理想自我的一个凝定点，它从这里获得了对自我的一种欣悦认定；可从主体 — 他者关系的误认结构说，父母的这一指认其实是他者的一种凝视，是处在象征秩序中的他者的一种凝视，主体从他者的这个凝视中得到一个讯息、一个指令或一种朝向未来的期待，并且去认同它，将它内化为自己的自我理想，以此完成其象征性认同。<br>\n在象征性认同中，根本的一点在于（大）他者的引入。在此，他者并不是现实的他人，不是站在镜子面前给孩子指认其理想认同对象的现实的父母，而是代表着象征秩序的父母所在的位置，是父母以期许的目光、以预期的话语指示出来的那个场所。[2,P639]</p>\n</blockquote>\n<h2 id=\"认同\">认同</h2>\n<p>这个图片上的字母是有不同的版本的 [2,P635][3,P144]，一版是英语，一版是法语。具体地说，<span class=\"math inline\">\\(\\mathrm{A}\\)</span>（Autre）和 <span class=\"math inline\">\\(\\mathrm{O}\\)</span> （Other）都代表大他者，<span class=\"math inline\">\\(a\\)</span> 和 <span class=\"math inline\">\\(o\\)</span> 都代表小他者（other），<span class=\"math inline\">\\(e\\)</span>（ego）和 <span class=\"math inline\">\\(m\\)</span> （moi）都代表自我。</p>\n<p><img src=\"/blog/images/desire-2.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(m-i(a)\\)</span>：镜像阶段。此站点就是一个 <span class=\"math inline\">\\(i(a)\\)</span>，站点背后的人是 <span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span>，他由 <span class=\"math inline\">\\(m\\)</span> 和 <span class=\"math inline\">\\(i(a)\\)</span> 这两个部分组成。</li>\n<li><span class=\"math inline\">\\(s\\mathrm{(A)}\\)</span>：大他者的意指，语言的意义。</li>\n<li><span class=\"math inline\">\\(\\mathrm{Signifier\\to}\\ s\\mathrm{(A) \\to\nA \\to\nVoice}\\)</span>：能指的意义被大他者剥离，只剩下了声音。如果大他者是个法语的语言环境，而我们又听不懂法语的话，法语对我们而言就只剩下了声音。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to A} \\to s\\mathrm{(A)\n\\to I(A)}\\)</span>：通过大他者回溯地产生意义，获得自我理想。<span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n告诉我们，医生是一个崇高的职业，于是小明会通过 <span class=\"math inline\">\\(s(\\mathrm{A})\\)</span> 来 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to}\\ i(a) \\to m \\to\n\\mathrm{I(A)}\\)</span>：象征性认同通过想象性认同实现的短路。通过认同理想自我，获得自我和自我理想。小明的\n<span class=\"math inline\">\\(i(a)\\)</span>\n是一个穿着白大褂、救死扶伤的人的形象，于是他的 <span class=\"math inline\">\\(m\\)</span> 会做出一些行动，去获得 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>。</li>\n<li><span class=\"math inline\">\\(\\mathrm{A}\\to i(a) \\to m \\to\ns\\mathrm{(A)}\\)</span>：<span class=\"math inline\">\\(i(a)\\)</span> 把\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span> 对 “我” 的象征的看转换为 “我” 对自己想象的看，来结构 “我” 的意义 [2,P640]，<span class=\"math inline\">\\(m\\)</span>\n并不是自发出现的，它被表示为一个转喻。</li>\n</ul>\n<h2 id=\"实在界和象征界\">实在界和象征界</h2>\n<p>实在界 <span class=\"math inline\">\\(\\mathrm{R}\\)</span>（the\nReal），是一个处处存在的东西，也处处不存在的东西，它是一元的 [1,P3]。简单地理解，就是死亡。以一个唯物主义者的视角看，可以理解为是在他死亡之后，或者在他出生之前，他 “所经历” 的世界；以一个唯我论者的视角来看，可以理解为是在他死亡之后，或者在他出生之前的整个世界；或者说，如果现在把所有有意识的活物都去除了，那么剩下的就是实在界。当我们感到肚子饿的时候，就是实在界的一次闯入，进而产生生理上的需要 [4,P111]。</p>\n<p>象征界 <span class=\"math inline\">\\(\\mathrm{S}\\)</span>（the\nSymbolic）是由缺席和在场的二元对立关系组成的。简单地理解，就是所有的他人，或者是语言。我们为什么要使用语言，是为了<strong>表达</strong>某种不常<strong>位</strong>于我们身边的<strong>东西</strong>。如我们在一个晴朗的白天说 “昨天晚上的月亮真好看”，这时候月亮是不在我们身边的，或者说我们白天多数时间是看不见它的，它不在场；当我们说 “我想吃苹果” 时，“苹果” 这个词语代表了苹果的实体，当我们正在使用这个词语时，可能身边并没有任何一个苹果，即苹果是缺位的。我们通过使用语言符号，把一个当前不在场的事物领进我们的对话环境里了，拉康把这称作 “词语是由缺位构成的在场”[1,P3]。</p>\n<h2 id=\"不完整的大他者\">不完整的大他者</h2>\n<p>以法律为例子，我们之所以相信法律的权威，是因为我们从小就被他者教育要去遵守法律，法律被纳入了我们 “能指的共时网络” 里。但还是会有一些人去触犯它的，以故意杀人者为例子，或许他缺失一些教育，或许他压根就不把法律当回事。或者更简单地说，如果我们遇到一只野生的老虎，它也是不会遵守法律的，因为我们和它不在同一个层面里，它不懂人类的语言，为法律背书的是我们人类的集体无意识\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span>。所以拉康说 “无意识是像语言那样被结构的”。</p>\n<p>那谁又为我们的集体无意识背书呢？这种说法类似于：这本书上的文字只不过是一些抽象的符号，是用油墨印刷出来的，那这本书还有什么意义呢；人不过是由一些蛋白质、有机无机物组成的，那我们活着还有什么意义呢；大他者\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为我们背书，那谁又为大他者背书呢。如果我们坚持这种向上抽一道的、抬杠式的追问，这时候我们就会陷入一种虚无的状态，或者说陷入实在界里了。看似完整的象征界被实在界切开了一道裂缝，切成了一道一道的，变成了\n<span class=\"math inline\">\\(\\mathrm{\\not{A}}\\)</span>。象征界本身是不完备的，我们总是会向实在界回归，就像刘慈欣说的，一切都将逝去，只有死神永生，这里的 “死神” 就是实在界。</p>\n<p>当象征界被悬置的时候，想象界就落入了实在界。我们陷入了深渊里，陷入了一个大漩涡\n<span class=\"math inline\">\\(\\not{\\mathrm{O}}\\)</span> 里，<span class=\"math inline\">\\(\\not{\\mathrm{A}}\\)</span> 和 <span class=\"math inline\">\\(\\not{\\mathrm{O}}\\)</span>\n是同一个意思，是被画杠的大他者。但我们还是有着求生的本能的，生活还是有着希望的，为了回到码头上，我们需要一根救命的稻草，这根救命的稻草就是对象\n<span class=\"math inline\">\\(a\\)</span>，或者说是来自码头的薯条。</p>\n<p><img src=\"/blog/images/RSI.webp\"></p>\n<h2 id=\"超越认同\">超越认同</h2>\n<blockquote>\n<p>对于接受精神分析的人来说，精神分析过程的最后时刻，恰恰就是他摆脱这一问题的时刻，即这样的时刻：他接受了大对体为他提供的、没有道理的存在。[3,P157]</p>\n</blockquote>\n<p><img src=\"/blog/images/$◇a.webp\"></p>\n<p><img src=\"/blog/images/desire-3.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to A}\n\\overset{d}{\\to}  \\mathrm{Ch \\overset{、}{e} \\\nvoui?}\\)</span>：我们要飞向何方？（向大他者提问：你想咋地？）</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit\na\\)</span>：去码头整点薯条。</li>\n</ul>\n<p>对象 <span class=\"math inline\">\\(a\\)</span>\n是一个容器，它什么都可以装。应用到电影里就是麦高芬，是群雄逐鹿的鹿。</p>\n<p><span class=\"math inline\">\\(\\diamondsuit\\)</span>\n表示了既析取又合取、既大于又小于、既围合又发展、既连接又分离的悖论关系 [1,P213][2,P648]。<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n可以读作 “分裂的主体在对象 a 面前的消隐” 或者 “对象 a\n抹平了主体的分裂”。即当我们<strong>有事儿干</strong>的时候，我们就不会去想活着到底是为了什么。</p>\n<h2 id=\"俄狄浦斯阶段与菲勒斯\">俄狄浦斯阶段与菲勒斯</h2>\n<p>菲勒斯（Phallus）是阳具的图腾。而在拉康的语境下，它分为这三种：</p>\n<p>实在的菲勒斯 <span class=\"math inline\">\\(\\Pi\\)</span>：解剖学意义上的男性生殖器官 [2,P620]。在以前医学不发达，没有检测方法的时候，我们只能等到孩子出生之后才能知道他 / 她的性别。对于一个刚出生的婴儿，对其性别身份的建构便是围绕着 “菲勒斯的缺席和在场” 实现的，即第一性征，而第二性征在是在青春期才发展出来的。</p>\n<p><strong>想象的菲勒斯</strong> <span class=\"math inline\"> \\(\\phi\\)</span>：弗洛伊德提出了人格的发展有五个阶段，约\n0 至 3\n岁为第一个阶段，这时候婴儿是刚和母体分离的，母亲是婴儿的第一个重要的人，因为孩子之前和母亲是一体的，孩子 “是” 母亲唯一重要的一方。而在某个时间点之后，孩子会发现自己并<strong>不是</strong>母亲唯一重要的一方，母亲在意的还有一方，而且那一方的身上<strong>有</strong>母亲所没有的东西，孩子会发现母亲的精力不是百分之百用在自己身上的，于是会想象自己<strong>缺</strong>了这个东西 [4,P74-75]。为什么是菲勒斯呢，因为父亲是作为一个母子二元关系的外人，是作为一个<strong>换喻</strong>的能指的，你是不可能不给孩子洗澡的。我们可以换一种与性别差异无关，但是同样道理的理解方式：在之前，你在学校里的每一场考试都得了第一名，分都是全班最高的。在之后，你的一个朋友<strong>取代</strong>了你的场场第一名，而且他还买了一本神秘的<strong>书</strong>。你会发现高分总是向你的朋友倾斜，于是会想象自己得不到第一名是不是因为<strong>少</strong>了这本书，即使你是有这本书的，你也可能会怀疑他的书是不是有什么更特别之处。这就像数学上的公理，拉康先默认它们是正确的，然后才由这个前提提出了想象的菲勒斯的概念，它就是那一本缺失的书，第一名这个名号就是母亲，与你竞争的这个朋友就是父亲。</p>\n<p>这是拉康对弗洛伊德的俄狄浦斯情结的重写和进一步解释。虽然弗洛伊德的这一理论已经<strong>过时</strong>了，但笔者认为，拉康想要表达的是：我们每个人都会经历一个创伤，即与母亲逐步分离的过程。它打破了母子的二元关系，是由想象界进入象征界的创伤，被表示为\n<span class=\"math inline\">\\(-\\phi\\)</span>。而母子之前近乎一体的关系、孩子不用面对社会（象征界）的那个伊甸园的时期是\n<span class=\"math inline\">\\(\\Delta\\)</span>，有着<strong>原乐</strong>（Jouissance）。<span class=\"math inline\">\\(\\phi\\)</span>\n是一个根本性缺失的东西，在进入象征界之后，孩子为了弥补这个缺失，会转而追求\n<span class=\"math inline\">\\(\\Phi\\)</span>。</p>\n<p><img src=\"/blog/images/RSI.webp\"></p>\n<p>象征的菲勒斯 <span class=\"math inline\">\\(\\Phi\\)</span>：权力和荣誉的象征。有句话叫：国王如果认为自己真的是国王，那他就有大问题了，因为国王这个身份是由他者所委任的，不存在真实的世界的王。精神病患者的镜像阶段是失败的，他会认为他就是最大的\n<span class=\"math inline\">\\(\\Phi\\)</span>，与实在界合为了一体，不存在想象界的自我和镜我。</p>\n<h2 id=\"需要要求和欲望\">需要、要求和欲望</h2>\n<p>需要（need）是有机体内部的一种不平衡的状态，表现为对内外环境的欲求。马斯洛的需求层次理论认为，生理需要是最底层的需要，如吃饭，不吃饭就会有生命的危险。</p>\n<p>要求 <span class=\"math inline\">\\(\\mathrm{D}\\)</span>（demand）是通过语言说出来的，是欲望在象征界的现身。它表达的是需要，它只能围绕着欲望转圈，而不能完全地抵达欲望，在语言的裂缝里有一个缺失的能指\n<span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>，就是想象的菲勒斯。</p>\n<p>欲望 <span class=\"math inline\">\\(d\\)</span>（desire）是一个不能被完全满足的东西，是从要求中减去需要的剩余 [4,P97]。它和在\n<span class=\"math inline\">\\(\\Delta\\)</span>\n里的原乐有关。如孩子在出生之前和母亲是一体的，孩子不用担心自己的生存问题，这时候孩子的欲望是<strong>永远</strong>可以被满足的。直到孩子出生，在出生之后的很长一段时间孩子也是不用担心吃饭的问题的，直到与母亲逐步分离（<span class=\"math inline\">\\(-\\phi\\)</span>），进入象征界。</p>\n<h2 id=\"完整的欲望图\">完整的欲望图</h2>\n<p>从临床的角度看，前三个欲望图是不存在的，起的是教学目的 [2,P633]。第一个欲望图表示了主体通过语言进入象征界；第二个欲望图加入了想象界，表示了认同的过程，由于拉康是不确定想象性认同是否是完全独立的，所以将其包裹在了象征性认同里；第三个欲望图表示主体发现了大对体中的不完整性，然后通过幻象公式\n<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n抹平了自己的分裂；而第四个欲望图加入了实在界，加入了原乐被语言切割的过程。</p>\n<p><img src=\"/blog/images/desire-4.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>：大他者中欠缺的能指，即想象的菲勒斯 [2,P651]。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit\nD}\\)</span>：分裂的主体在要求面前消隐，或者叫驱力公式。比如我们在饿的时候说 “我饿了”，这时候我们就不会再去想抽象的问题。操作系统里有一个经典的<strong>哲学家吃饭</strong>问题，它背后就表达的是，如果只学哲学，可能连饭都吃不饱。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S} \\to A \\to} d \\to\n\\mathrm{\\not{S}} \\diamondsuit a \\to s\\mathrm{(A)}\\)</span>：<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span> 发现了 <span class=\"math inline\">\\(\\mathrm{A}\\)</span> 不能完全地满足 <span class=\"math inline\">\\(d\\)</span>，于是通过 <span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n找回意义。这是一个正常的人经过虚无状态之后的情况。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D} \\to d \\to\n\\mathrm{\\not{S}} \\diamondsuit a \\to \\mathrm{S(\\not{A})}\\)</span>：<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n出现的原因是因为 <span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>，而只靠 <span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D}\\)</span>\n不能完全满足你的 <span class=\"math inline\">\\(d\\)</span>。就像你只说我饿了是没有用的，你得找一个对象\n<span class=\"math inline\">\\(a\\)</span> 来吃。</li>\n<li><span class=\"math inline\">\\(\\mathrm{Jouissance \\to S(\\not{A}) \\to\n\\not{S}\\diamondsuit D \\to Castratio}\\)</span>：原乐被语言切割之后，通过\n<span class=\"math inline\">\\(\\mathrm{D}\\)</span>\n表达出来之后仍然有表达不尽的剩余 <span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>。而在 <span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D}\\)</span>\n的背后，有的只是创伤性的场景：我们再也回不到 <span class=\"math inline\">\\(\\Delta\\)</span> 了。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D \\to\nS(\\not{A})}\\)</span>：对缺失的想象的菲勒斯的追求。如果把这条路径推到极致，就是自杀 [2,P657]。自杀就是对自由意志、对原乐最极端的追求，自杀的人是渴望回到\n<span class=\"math inline\">\\(\\Delta\\)</span>\n的阶段的，如果他通过这条路径抵达了 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>，那么这个 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>\n就是他自杀的象征性的动机。喜欢极限运动的人也是一样，比如在高楼之间跑酷，在高空跳伞，或者在游乐场坐过山车，都是对原乐的过度追求，或者叫死亡驱力。</li>\n</ul>\n<p>人都有生本能和死本能。生本能代表着建立，比如吃饭、学习就是对自身的建立；死本能代表着毁坏，比如语言和肢体上的暴力，玩射击或动作类游戏，甚至于出门去玩、旅游，动动自己的筋骨、把自己身上的汗排出来，都是对死本能的转移。</p>\n<p><img src=\"/blog/images/daodulakang_end.webp\"></p>\n<h2 id=\"主人能指与分析家话语\">主人能指与分析家话语</h2>\n<p>在拉康的精神分析理论中，主人能指（the master signifier）被记为 <span class=\"math inline\">\\(\\mathrm{S_1}\\)</span>。它的特点是，它必须来依靠别的词语来解释它，它就像一块磁铁一样，把别的词语吸引了过来。比如在十六进制这个主人能指下，8+8=10\n这个计算就是正确的；在自然单位制下，光速是等于 1\n的；在海德格尔下，将来比当前是重要的。</p>\n<p>在这个被拉康称为 “分析家话语” 的式子下，从左下角顺时针旋转的四个位置分别为真理（truth）、代理（agent）、他者（other）和产品（product）。真理是被隐藏起来的东西，代理是信息的发送者，他者是接受者，产品是言说的效果。</p>\n<p><span class=\"math display\">\\[\n\\frac{a}{\\mathrm{S_2}} \\to \\frac{\\mathrm{\\not{S}}}{\\mathrm{S_1}}\n\\]</span></p>\n<p>按笔者个人的理解，S2 就是以前看过的文字，a\n可以理解为一种表达的需求，S\n杠是本人（当打字复盘时，自己既是信息的发送者也是接受者），S1\n是被咳出的主人能指。</p>\n<h2 id=\"哲学家吃饭问题\">哲学家吃饭问题</h2>\n<p>有三个哲学家坐在一张桌子上准备吃饭，而且他们定的规矩还比较奇怪：</p>\n<ol type=\"1\">\n<li>桌子上一共只有三根筷子，筷子的数量是有限的，且在同一个时间只能由一个人拿起来一根筷子。（互斥条件）</li>\n<li>当一个人拿起一根筷子之后，除非他吃完饭了，否则他是不会主动放下他已经拿到的筷子的。只有当他吃完饭之后，他才能放下他之前拿到的筷子，让别人拿。而一个人必须要有两根筷子才能吃饭。（持有并等待条件）</li>\n<li>一个人不能把别人已经拿到的筷子抢过来给自己用。（非抢占条件）</li>\n<li>这个桌子是圆桌，在每个哲学家的左手边和右手边各放一根筷子，且一个人只能拿这离他最近的两个筷子，不能拿别的。（循环等待条件）</li>\n</ol>\n<p>现在存在这样一种情况：这三个人都先把他们左手边的筷子拿了，都在等右手边的筷子，除非两根筷子都拿到了，否则他们是不会放下已经拿到的筷子的，于是他们就在这里一直等了。现在我们要给他们改一下规矩，他们应该怎么做才能保证所有人都能吃上饭。</p>\n<ul>\n<li>消除互斥条件：\n<ul>\n<li>把一根筷子折成两根（磁盘共享）。</li>\n<li>或者请一个新人来，当某人想吃饭的时候，必须请示这个新人，让新人给他一次发两根筷子（打印机共享）。</li>\n</ul></li>\n<li>消除持有并等待条件：\n<ul>\n<li>每个人在想吃饭的时候，必须一次性把两根筷子都拿了。（一次性请求所有资源）</li>\n<li>或者当某个人拿不到另一根筷子的时候，要主动把他已经拿到的筷子给放下。（释放没有使用完的资源，可能前功尽弃）</li>\n</ul></li>\n<li>消除非抢占条件：\n<ul>\n<li>当某人想吃饭但是拿不到筷子的时候，可以把别人的筷子抢过来（CPU\n调度、内存管理）。</li>\n</ul></li>\n<li>消除循环等待条件：\n<ul>\n<li>给这三个筷子编上 1、2、3\n号，当某个人拿筷子的时候，必须先拿编号较小的。如 1-A-2-B-3-C-1，这里 A\n把 1 拿了，B 把 2 拿了，C 必须先拿 1，拿不了就等，在等的时间里 B 可以把\n3 拿了，然后释放 2 和 3，然后 A 拿 2、释放 1 和 2，C 再拿 1 和 3</li>\n<li> 或者让奇数号的哲学家必须先拿他左边，后拿他右边的，而偶数号哲学家则与之相反。如\n1-A-2-B-3-C-1，这里 A 把 1 拿了，B 必须先拿 3 拿不了 2，于是 2 可以被 A\n拿，然后 A 释放 1 和 2</li>\n</ul></li>\n<li> 动态避免或检测修复：时间成本和程序复杂性高</li>\n<li>不予理睬：让这三个人从头来一遍（终止线程、重启）</li>\n</ul>\n<p>参考书：《操作系统之哲学原理》第 9 章</p>\n","excerpt":"","more":"<p>[1][英] 迪伦・埃文斯.&nbsp;拉康精神分析介绍性辞典 [M].&nbsp;李新雨，译.&nbsp;重庆：西南师范大学出版社，2021.&nbsp;</p>\n<p>[2] 吴琼.&nbsp;雅克・拉康：阅读你的症状 [M].&nbsp;北京：中国人民大学出版社，2011.&nbsp;</p>\n<p>[3][斯洛文尼亚] 斯拉沃热・齐泽克.&nbsp;意识形态的崇高客体（第二版）[M].&nbsp;季广茂，译.&nbsp;北京：中央编译出版社，2017.&nbsp;</p>\n<p>[4][英] 肖恩・霍默.&nbsp;导读拉康 [M].&nbsp;李新雨，译.&nbsp;重庆：重庆大学出版社，2014.</p>\n<p>其中有一部分内容是自己演绎出来的，不一定准确。上面四个参考文献在下面有对应的标号。</p>\n<h2 id=\"语言的魔法\">语言的魔法</h2>\n<p>我们在刚出生的时候是不会说话的，甚至连站立都做不到，通过他者的教育我们才逐渐成为一个立地的人。通过学习他者的语言，我们从生物意义上的人变成了社会意义上的人。拉康把这个社会化的过程通过一幅图表示了出来，称为欲望图解的基本单位：</p>\n<p><img src=\"/blog/images/desire-1.webp\"></p>\n<p><span class=\"math inline\">\\(\\mathrm{S}\\)</span>\n表示一个<strong>能指</strong>（Signifier）。能指是语言的符号，是字符的形象或者声音。如古人用一个像月牙的象形符号来表示月亮，随着时间的推移演变为现在的 “月” 字，“月” 字就是一个能指。</p>\n<p><span class=\"math inline\">\\(\\mathrm{S'}\\)</span>\n表示另一个能指。<span class=\"math inline\">\\(\\mathrm{S \\to\nS'}\\)</span>\n为<strong>能指链</strong>，是一串语言符号的链条。如 “我想吃苹果” 这五个符号是一串能指链。</p>\n<p><span class=\"math inline\">\\(\\Delta\\)</span>\n表示没有被社会化的、原初的、前于语言的人，包含人的 “动物本能的部分”。如我们是从猴子进化而来的。</p>\n<p><span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span>\n表示被社会化后的人（Subject）。画了一条杠代表我们的 “生物本能的部分” 被世俗规矩所约束了，我们不愿意做违反社会秩序的事。如我们不会在厕所之外且有人看到的地方随地大小便，因为语言，或者说符号系统、象征秩序、大他者（Other）不允许我们这么做。</p>\n<p><span class=\"math inline\">\\(\\Delta \\to \\mathrm{\\not{S}}\\)</span>\n与能指链相交，代表我们通过语言在《地球\nOnline》这款游戏里正式注册了一个账号 —— 在此之前我们都是云玩家。有句话叫人只能死两次，第一次是医学意义上的死亡，第二次是社会意义上的死亡：被所有人遗忘。相对应地，人被社会化可以理解为是人的 “第二次出生”：人被登记在<strong>象征界</strong>里了。</p>\n<p><span class=\"math inline\">\\(\\Delta \\to \\mathrm{\\not{S}}\\)</span>\n的方向与能指链的方向相反，代表一句话的意义从其接收者的角度来看，是在接收完之后被<strong>回溯</strong>性建构的。如儿童被家长教育不能随地大小便，他们刚开始是不知道家长的语音是什么意思的，在经过多次的言传身教，在头脑中建立起条件反射之后，儿童才逐渐地理解 “不能随地大小便” 这句话是什么意思；一个更易懂的例子是：在学习英语单词时，我们是不知道 “apple” 这五个字母为什么是用来代表苹果的，只能先把它记住，在后来的使用过程中就用它代表苹果，因为大家都是这样使用的；也可以理解为：我们需要通过后文来理解前文的意思，如 “我想吃苹果”，当只听到 “我想” 这两个字时，我们可能不明白对方在表达什么，只有在听完这五个字之后，我们才能明白对方在表达什么。</p>\n<h2 id=\"换喻和隐喻\">换喻和隐喻</h2>\n<p>我们通过语言进入了社会。在组织和理解语言的过程中，我们会使用换喻和隐喻。<strong>换喻</strong>是平行于一句话的阅读方向的，我们把一些词语组织起来形成一句完整的话，杠的维持代表我们组织语言、理解语言的时延；<strong>隐喻</strong>是垂直于一句话的阅读方向的，我们选择一些特定的词语来表达某种意思，杠的穿越代表我们成功埋下或者挖出一个词的意思。</p>\n<p>汉字的造字法有象形和指事，组字法有会意和形声，用字法有转注和假借，在使用语言的过程中，一个符号可以被延申出多种意义，一个能指的<strong>所指</strong>（signified）可以有多个，即老子《道德经》里的 “名可名，非常名”。</p>\n<p><span class=\"math display\">\\[\n\\frac{\\mathrm{S}}{s}\n\\]</span></p>\n<p>如 “生” 这个能指的所指有 “live”、“produce”、“organism”、“raw”、“student”、“-er” 等，为了理解生这个能指的意指，我们要依靠它的上下文，把能指和能指之间建立起联系，找出它们的表意功能，这叫<strong>换喻</strong>或者转喻。如当我们看到 “我想吃苹果” 这句话，这时我们理解的 “苹果” 是指那个红的、圆的、甜的东西 —— 不会指苹果手机，因为我们是正常人，不会吃手机。我们通过 “我想吃” 这几个能指，加上一系列被隐藏在当前语境背后的能指链，或者说是被我们之前所获得的知识（<span class=\"math inline\">\\(\\mathrm{S_2}\\)</span>），来换喻出了 “苹果” 在当前语境下的含义。拉康将其形式化地表示为换喻公式：</p>\n<p><span class=\"math display\">\\[\nf\\mathrm{(S...S')S \\cong S(-)}s\n\\]</span></p>\n<p>这读作：能指与能指相联系的表意功能全等于对杠的维持 [1,P222]。<strong>杠</strong>\n<span class=\"math inline\"> \\(-\\)</span> 是从能指 <span class=\"math inline\">\\(\\mathrm{S}\\)</span> 指向所指 <span class=\"math inline\">\\(s\\)</span>\n的阻抗，从能指到所指的指向关系被称为<strong>意指</strong> <span class=\"math inline\"> \\(f\\mathrm{S}\\)</span>[1,P218]，但是这种指向关系被它们中间的那一道杠阻断了。从语言理解者的角度来看，当这道杠正在被维持的时候，代表我们大脑的语言解析器正在工作中，我们正在试图理解某个能指意指的是什么所指；从语言组织者的角度来看，当这道杠正在被维持的时候，代表我们正在组织语言中，一句话里每个词的意思还没有被相对地固定下来。</p>\n<p>相对立的，当这道杠被穿越的时候，代表某个词的意思已经相对地被固定下来了。当我们在组织一句话的时候，比如 “我想吃苹果”，如果我们想表达一种并不严肃的态度，我们可以把 “我” 替代成 “俺”、“咱” 来隐喻一种并不严肃的态度；当我们在理解一句话的时候，比如 “我想买爱疯手机”，我们会把 “爱疯手机” 看作隐喻的是一个电子产品，它替代的是 “IPhone” 这个能指，而不是关于 “爱” 和 “疯” 的。拉康将其形式化地表示为隐喻公式：</p>\n<p><span class=\"math display\">\\[\nf\\mathrm{(\\frac{S'}{S})S \\cong S(+)}s\n\\]</span></p>\n<p>这读作：一个能指替代另一能指的表意功能全等于对杠的穿越 [1,P218-219]。</p>\n<h2 id=\"理想自我和自我理想\">理想自我和自我理想</h2>\n<p><span class=\"math inline\">\\(i(o)\\)</span>：imaginary\nother：想象性他者。或者叫 <span class=\"math inline\">\\(i(a)\\)</span>（autre）。这里的 <span class=\"math inline\">\\(o\\)</span> 和 <span class=\"math inline\">\\(a\\)</span>\n是同一个意思。小写的字母与<strong>想象界</strong>有关 [2,P643]。</p>\n<p><strong>理想自我</strong> <span class=\"math inline\"> \\(i(a)\\)</span>\n是我们看自己，我们以这种形象显得可爱，这种形象代表着我们想成为怎样的人，是对形象的<strong>想象性认同</strong>。</p>\n<p><strong>自我理想</strong> <span class=\"math inline\"> \\(\\mathrm{I(A)}\\)</span>\n是我们透过某个位置被人看，别人从那个位置观察我们，我们从那个位置审视自己，以便我们显得可爱，是对位置的<strong>象征性认同</strong> [3,P147]。</p>\n<p>例如，小明的理想自我是一个穿着白大褂、救死扶伤的人的形象，自我理想是医生这个工作岗位。</p>\n<h2 id=\"想象界和镜像阶段\">想象界和镜像阶段</h2>\n<p>想象界 <span class=\"math inline\">\\(\\mathrm{I}\\)</span>（the\nImaginary）是一个认同与镜映的领域 [4,P44]。是<strong>自我</strong> <span class=\"math inline\"> \\(e\\)</span> 和<strong>理想自我</strong> <span class=\"math inline\"> \\(i(a)\\)</span> 的舞台。在 6 至 18\n个月之间，婴儿会通过一面镜子，或者通过一个他者，把自己和外部世界区分开来。具体地说，婴儿把镜子里的形象认作了自己，或者把他人的指认认作了自己，但是还没法完全地控制自己的身体，破碎的自体感和完整的镜像之间的冲突促使了\n<span class=\"math inline\">\\(e\\)</span> 的诞生，<span class=\"math inline\">\\(e\\)</span> 是对 <span class=\"math inline\">\\(i(a)\\)</span> 的误认 [2,P638]。</p>\n<blockquote>\n<p>在拉康的理解中，想象性认同时常被设想为认同的一种理想状态，因为就自我的形成而言，完全自足的想象性认同实际是不存在的，自我与他人之间的镜像关系自始就受到了象征秩序的侵入。例如处在镜像阶段的婴儿，父母（他者）常常会指着镜中的它的形象说：“你看，这就是你，这就是我们可爱的小宝宝。” 从婴儿的角度说，父母所指认的这个形象（可爱）乃是它的理想自我的一个凝定点，它从这里获得了对自我的一种欣悦认定；可从主体 — 他者关系的误认结构说，父母的这一指认其实是他者的一种凝视，是处在象征秩序中的他者的一种凝视，主体从他者的这个凝视中得到一个讯息、一个指令或一种朝向未来的期待，并且去认同它，将它内化为自己的自我理想，以此完成其象征性认同。<br>\n在象征性认同中，根本的一点在于（大）他者的引入。在此，他者并不是现实的他人，不是站在镜子面前给孩子指认其理想认同对象的现实的父母，而是代表着象征秩序的父母所在的位置，是父母以期许的目光、以预期的话语指示出来的那个场所。[2,P639]</p>\n</blockquote>\n<h2 id=\"认同\">认同</h2>\n<p>这个图片上的字母是有不同的版本的 [2,P635][3,P144]，一版是英语，一版是法语。具体地说，<span class=\"math inline\">\\(\\mathrm{A}\\)</span>（Autre）和 <span class=\"math inline\">\\(\\mathrm{O}\\)</span> （Other）都代表大他者，<span class=\"math inline\">\\(a\\)</span> 和 <span class=\"math inline\">\\(o\\)</span> 都代表小他者（other），<span class=\"math inline\">\\(e\\)</span>（ego）和 <span class=\"math inline\">\\(m\\)</span> （moi）都代表自我。</p>\n<p><img src=\"/blog/images/desire-2.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(m-i(a)\\)</span>：镜像阶段。此站点就是一个 <span class=\"math inline\">\\(i(a)\\)</span>，站点背后的人是 <span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span>，他由 <span class=\"math inline\">\\(m\\)</span> 和 <span class=\"math inline\">\\(i(a)\\)</span> 这两个部分组成。</li>\n<li><span class=\"math inline\">\\(s\\mathrm{(A)}\\)</span>：大他者的意指，语言的意义。</li>\n<li><span class=\"math inline\">\\(\\mathrm{Signifier\\to}\\ s\\mathrm{(A) \\to\nA \\to\nVoice}\\)</span>：能指的意义被大他者剥离，只剩下了声音。如果大他者是个法语的语言环境，而我们又听不懂法语的话，法语对我们而言就只剩下了声音。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to A} \\to s\\mathrm{(A)\n\\to I(A)}\\)</span>：通过大他者回溯地产生意义，获得自我理想。<span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n告诉我们，医生是一个崇高的职业，于是小明会通过 <span class=\"math inline\">\\(s(\\mathrm{A})\\)</span> 来 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to}\\ i(a) \\to m \\to\n\\mathrm{I(A)}\\)</span>：象征性认同通过想象性认同实现的短路。通过认同理想自我，获得自我和自我理想。小明的\n<span class=\"math inline\">\\(i(a)\\)</span>\n是一个穿着白大褂、救死扶伤的人的形象，于是他的 <span class=\"math inline\">\\(m\\)</span> 会做出一些行动，去获得 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>。</li>\n<li><span class=\"math inline\">\\(\\mathrm{A}\\to i(a) \\to m \\to\ns\\mathrm{(A)}\\)</span>：<span class=\"math inline\">\\(i(a)\\)</span> 把\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span> 对 “我” 的象征的看转换为 “我” 对自己想象的看，来结构 “我” 的意义 [2,P640]，<span class=\"math inline\">\\(m\\)</span>\n并不是自发出现的，它被表示为一个转喻。</li>\n</ul>\n<h2 id=\"实在界和象征界\">实在界和象征界</h2>\n<p>实在界 <span class=\"math inline\">\\(\\mathrm{R}\\)</span>（the\nReal），是一个处处存在的东西，也处处不存在的东西，它是一元的 [1,P3]。简单地理解，就是死亡。以一个唯物主义者的视角看，可以理解为是在他死亡之后，或者在他出生之前，他 “所经历” 的世界；以一个唯我论者的视角来看，可以理解为是在他死亡之后，或者在他出生之前的整个世界；或者说，如果现在把所有有意识的活物都去除了，那么剩下的就是实在界。当我们感到肚子饿的时候，就是实在界的一次闯入，进而产生生理上的需要 [4,P111]。</p>\n<p>象征界 <span class=\"math inline\">\\(\\mathrm{S}\\)</span>（the\nSymbolic）是由缺席和在场的二元对立关系组成的。简单地理解，就是所有的他人，或者是语言。我们为什么要使用语言，是为了<strong>表达</strong>某种不常<strong>位</strong>于我们身边的<strong>东西</strong>。如我们在一个晴朗的白天说 “昨天晚上的月亮真好看”，这时候月亮是不在我们身边的，或者说我们白天多数时间是看不见它的，它不在场；当我们说 “我想吃苹果” 时，“苹果” 这个词语代表了苹果的实体，当我们正在使用这个词语时，可能身边并没有任何一个苹果，即苹果是缺位的。我们通过使用语言符号，把一个当前不在场的事物领进我们的对话环境里了，拉康把这称作 “词语是由缺位构成的在场”[1,P3]。</p>\n<h2 id=\"不完整的大他者\">不完整的大他者</h2>\n<p>以法律为例子，我们之所以相信法律的权威，是因为我们从小就被他者教育要去遵守法律，法律被纳入了我们 “能指的共时网络” 里。但还是会有一些人去触犯它的，以故意杀人者为例子，或许他缺失一些教育，或许他压根就不把法律当回事。或者更简单地说，如果我们遇到一只野生的老虎，它也是不会遵守法律的，因为我们和它不在同一个层面里，它不懂人类的语言，为法律背书的是我们人类的集体无意识\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span>。所以拉康说 “无意识是像语言那样被结构的”。</p>\n<p>那谁又为我们的集体无意识背书呢？这种说法类似于：这本书上的文字只不过是一些抽象的符号，是用油墨印刷出来的，那这本书还有什么意义呢；人不过是由一些蛋白质、有机无机物组成的，那我们活着还有什么意义呢；大他者\n<span class=\"math inline\">\\(\\mathrm{A}\\)</span>\n为我们背书，那谁又为大他者背书呢。如果我们坚持这种向上抽一道的、抬杠式的追问，这时候我们就会陷入一种虚无的状态，或者说陷入实在界里了。看似完整的象征界被实在界切开了一道裂缝，切成了一道一道的，变成了\n<span class=\"math inline\">\\(\\mathrm{\\not{A}}\\)</span>。象征界本身是不完备的，我们总是会向实在界回归，就像刘慈欣说的，一切都将逝去，只有死神永生，这里的 “死神” 就是实在界。</p>\n<p>当象征界被悬置的时候，想象界就落入了实在界。我们陷入了深渊里，陷入了一个大漩涡\n<span class=\"math inline\">\\(\\not{\\mathrm{O}}\\)</span> 里，<span class=\"math inline\">\\(\\not{\\mathrm{A}}\\)</span> 和 <span class=\"math inline\">\\(\\not{\\mathrm{O}}\\)</span>\n是同一个意思，是被画杠的大他者。但我们还是有着求生的本能的，生活还是有着希望的，为了回到码头上，我们需要一根救命的稻草，这根救命的稻草就是对象\n<span class=\"math inline\">\\(a\\)</span>，或者说是来自码头的薯条。</p>\n<p><img src=\"/blog/images/RSI.webp\"></p>\n<h2 id=\"超越认同\">超越认同</h2>\n<blockquote>\n<p>对于接受精神分析的人来说，精神分析过程的最后时刻，恰恰就是他摆脱这一问题的时刻，即这样的时刻：他接受了大对体为他提供的、没有道理的存在。[3,P157]</p>\n</blockquote>\n<p><img src=\"/blog/images/$◇a.webp\"></p>\n<p><img src=\"/blog/images/desire-3.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\to A}\n\\overset{d}{\\to}  \\mathrm{Ch \\overset{、}{e} \\\nvoui?}\\)</span>：我们要飞向何方？（向大他者提问：你想咋地？）</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit\na\\)</span>：去码头整点薯条。</li>\n</ul>\n<p>对象 <span class=\"math inline\">\\(a\\)</span>\n是一个容器，它什么都可以装。应用到电影里就是麦高芬，是群雄逐鹿的鹿。</p>\n<p><span class=\"math inline\">\\(\\diamondsuit\\)</span>\n表示了既析取又合取、既大于又小于、既围合又发展、既连接又分离的悖论关系 [1,P213][2,P648]。<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n可以读作 “分裂的主体在对象 a 面前的消隐” 或者 “对象 a\n抹平了主体的分裂”。即当我们<strong>有事儿干</strong>的时候，我们就不会去想活着到底是为了什么。</p>\n<h2 id=\"俄狄浦斯阶段与菲勒斯\">俄狄浦斯阶段与菲勒斯</h2>\n<p>菲勒斯（Phallus）是阳具的图腾。而在拉康的语境下，它分为这三种：</p>\n<p>实在的菲勒斯 <span class=\"math inline\">\\(\\Pi\\)</span>：解剖学意义上的男性生殖器官 [2,P620]。在以前医学不发达，没有检测方法的时候，我们只能等到孩子出生之后才能知道他 / 她的性别。对于一个刚出生的婴儿，对其性别身份的建构便是围绕着 “菲勒斯的缺席和在场” 实现的，即第一性征，而第二性征在是在青春期才发展出来的。</p>\n<p><strong>想象的菲勒斯</strong> <span class=\"math inline\"> \\(\\phi\\)</span>：弗洛伊德提出了人格的发展有五个阶段，约\n0 至 3\n岁为第一个阶段，这时候婴儿是刚和母体分离的，母亲是婴儿的第一个重要的人，因为孩子之前和母亲是一体的，孩子 “是” 母亲唯一重要的一方。而在某个时间点之后，孩子会发现自己并<strong>不是</strong>母亲唯一重要的一方，母亲在意的还有一方，而且那一方的身上<strong>有</strong>母亲所没有的东西，孩子会发现母亲的精力不是百分之百用在自己身上的，于是会想象自己<strong>缺</strong>了这个东西 [4,P74-75]。为什么是菲勒斯呢，因为父亲是作为一个母子二元关系的外人，是作为一个<strong>换喻</strong>的能指的，你是不可能不给孩子洗澡的。我们可以换一种与性别差异无关，但是同样道理的理解方式：在之前，你在学校里的每一场考试都得了第一名，分都是全班最高的。在之后，你的一个朋友<strong>取代</strong>了你的场场第一名，而且他还买了一本神秘的<strong>书</strong>。你会发现高分总是向你的朋友倾斜，于是会想象自己得不到第一名是不是因为<strong>少</strong>了这本书，即使你是有这本书的，你也可能会怀疑他的书是不是有什么更特别之处。这就像数学上的公理，拉康先默认它们是正确的，然后才由这个前提提出了想象的菲勒斯的概念，它就是那一本缺失的书，第一名这个名号就是母亲，与你竞争的这个朋友就是父亲。</p>\n<p>这是拉康对弗洛伊德的俄狄浦斯情结的重写和进一步解释。虽然弗洛伊德的这一理论已经<strong>过时</strong>了，但笔者认为，拉康想要表达的是：我们每个人都会经历一个创伤，即与母亲逐步分离的过程。它打破了母子的二元关系，是由想象界进入象征界的创伤，被表示为\n<span class=\"math inline\">\\(-\\phi\\)</span>。而母子之前近乎一体的关系、孩子不用面对社会（象征界）的那个伊甸园的时期是\n<span class=\"math inline\">\\(\\Delta\\)</span>，有着<strong>原乐</strong>（Jouissance）。<span class=\"math inline\">\\(\\phi\\)</span>\n是一个根本性缺失的东西，在进入象征界之后，孩子为了弥补这个缺失，会转而追求\n<span class=\"math inline\">\\(\\Phi\\)</span>。</p>\n<p><img src=\"/blog/images/RSI.webp\"></p>\n<p>象征的菲勒斯 <span class=\"math inline\">\\(\\Phi\\)</span>：权力和荣誉的象征。有句话叫：国王如果认为自己真的是国王，那他就有大问题了，因为国王这个身份是由他者所委任的，不存在真实的世界的王。精神病患者的镜像阶段是失败的，他会认为他就是最大的\n<span class=\"math inline\">\\(\\Phi\\)</span>，与实在界合为了一体，不存在想象界的自我和镜我。</p>\n<h2 id=\"需要要求和欲望\">需要、要求和欲望</h2>\n<p>需要（need）是有机体内部的一种不平衡的状态，表现为对内外环境的欲求。马斯洛的需求层次理论认为，生理需要是最底层的需要，如吃饭，不吃饭就会有生命的危险。</p>\n<p>要求 <span class=\"math inline\">\\(\\mathrm{D}\\)</span>（demand）是通过语言说出来的，是欲望在象征界的现身。它表达的是需要，它只能围绕着欲望转圈，而不能完全地抵达欲望，在语言的裂缝里有一个缺失的能指\n<span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>，就是想象的菲勒斯。</p>\n<p>欲望 <span class=\"math inline\">\\(d\\)</span>（desire）是一个不能被完全满足的东西，是从要求中减去需要的剩余 [4,P97]。它和在\n<span class=\"math inline\">\\(\\Delta\\)</span>\n里的原乐有关。如孩子在出生之前和母亲是一体的，孩子不用担心自己的生存问题，这时候孩子的欲望是<strong>永远</strong>可以被满足的。直到孩子出生，在出生之后的很长一段时间孩子也是不用担心吃饭的问题的，直到与母亲逐步分离（<span class=\"math inline\">\\(-\\phi\\)</span>），进入象征界。</p>\n<h2 id=\"完整的欲望图\">完整的欲望图</h2>\n<p>从临床的角度看，前三个欲望图是不存在的，起的是教学目的 [2,P633]。第一个欲望图表示了主体通过语言进入象征界；第二个欲望图加入了想象界，表示了认同的过程，由于拉康是不确定想象性认同是否是完全独立的，所以将其包裹在了象征性认同里；第三个欲望图表示主体发现了大对体中的不完整性，然后通过幻象公式\n<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n抹平了自己的分裂；而第四个欲望图加入了实在界，加入了原乐被语言切割的过程。</p>\n<p><img src=\"/blog/images/desire-4.webp\"></p>\n<ul>\n<li><span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>：大他者中欠缺的能指，即想象的菲勒斯 [2,P651]。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit\nD}\\)</span>：分裂的主体在要求面前消隐，或者叫驱力公式。比如我们在饿的时候说 “我饿了”，这时候我们就不会再去想抽象的问题。操作系统里有一个经典的<strong>哲学家吃饭</strong>问题，它背后就表达的是，如果只学哲学，可能连饭都吃不饱。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S} \\to A \\to} d \\to\n\\mathrm{\\not{S}} \\diamondsuit a \\to s\\mathrm{(A)}\\)</span>：<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\)</span> 发现了 <span class=\"math inline\">\\(\\mathrm{A}\\)</span> 不能完全地满足 <span class=\"math inline\">\\(d\\)</span>，于是通过 <span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n找回意义。这是一个正常的人经过虚无状态之后的情况。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D} \\to d \\to\n\\mathrm{\\not{S}} \\diamondsuit a \\to \\mathrm{S(\\not{A})}\\)</span>：<span class=\"math inline\">\\(\\mathrm{\\not{S}}\\diamondsuit a\\)</span>\n出现的原因是因为 <span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>，而只靠 <span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D}\\)</span>\n不能完全满足你的 <span class=\"math inline\">\\(d\\)</span>。就像你只说我饿了是没有用的，你得找一个对象\n<span class=\"math inline\">\\(a\\)</span> 来吃。</li>\n<li><span class=\"math inline\">\\(\\mathrm{Jouissance \\to S(\\not{A}) \\to\n\\not{S}\\diamondsuit D \\to Castratio}\\)</span>：原乐被语言切割之后，通过\n<span class=\"math inline\">\\(\\mathrm{D}\\)</span>\n表达出来之后仍然有表达不尽的剩余 <span class=\"math inline\">\\(\\mathrm{S(\\not{A})}\\)</span>。而在 <span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D}\\)</span>\n的背后，有的只是创伤性的场景：我们再也回不到 <span class=\"math inline\">\\(\\Delta\\)</span> 了。</li>\n<li><span class=\"math inline\">\\(\\mathrm{\\not{S}\\diamondsuit D \\to\nS(\\not{A})}\\)</span>：对缺失的想象的菲勒斯的追求。如果把这条路径推到极致，就是自杀 [2,P657]。自杀就是对自由意志、对原乐最极端的追求，自杀的人是渴望回到\n<span class=\"math inline\">\\(\\Delta\\)</span>\n的阶段的，如果他通过这条路径抵达了 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>，那么这个 <span class=\"math inline\">\\(\\mathrm{I(A)}\\)</span>\n就是他自杀的象征性的动机。喜欢极限运动的人也是一样，比如在高楼之间跑酷，在高空跳伞，或者在游乐场坐过山车，都是对原乐的过度追求，或者叫死亡驱力。</li>\n</ul>\n<p>人都有生本能和死本能。生本能代表着建立，比如吃饭、学习就是对自身的建立；死本能代表着毁坏，比如语言和肢体上的暴力，玩射击或动作类游戏，甚至于出门去玩、旅游，动动自己的筋骨、把自己身上的汗排出来，都是对死本能的转移。</p>\n<p><img src=\"/blog/images/daodulakang_end.webp\"></p>\n<h2 id=\"主人能指与分析家话语\">主人能指与分析家话语</h2>\n<p>在拉康的精神分析理论中，主人能指（the master signifier）被记为 <span class=\"math inline\">\\(\\mathrm{S_1}\\)</span>。它的特点是，它必须来依靠别的词语来解释它，它就像一块磁铁一样，把别的词语吸引了过来。比如在十六进制这个主人能指下，8+8=10\n这个计算就是正确的；在自然单位制下，光速是等于 1\n的；在海德格尔下，将来比当前是重要的。</p>\n<p>在这个被拉康称为 “分析家话语” 的式子下，从左下角顺时针旋转的四个位置分别为真理（truth）、代理（agent）、他者（other）和产品（product）。真理是被隐藏起来的东西，代理是信息的发送者，他者是接受者，产品是言说的效果。</p>\n<p><span class=\"math display\">\\[\n\\frac{a}{\\mathrm{S_2}} \\to \\frac{\\mathrm{\\not{S}}}{\\mathrm{S_1}}\n\\]</span></p>\n<p>按笔者个人的理解，S2 就是以前看过的文字，a\n可以理解为一种表达的需求，S\n杠是本人（当打字复盘时，自己既是信息的发送者也是接受者），S1\n是被咳出的主人能指。</p>\n<h2 id=\"哲学家吃饭问题\">哲学家吃饭问题</h2>\n<p>有三个哲学家坐在一张桌子上准备吃饭，而且他们定的规矩还比较奇怪：</p>\n<ol type=\"1\">\n<li>桌子上一共只有三根筷子，筷子的数量是有限的，且在同一个时间只能由一个人拿起来一根筷子。（互斥条件）</li>\n<li>当一个人拿起一根筷子之后，除非他吃完饭了，否则他是不会主动放下他已经拿到的筷子的。只有当他吃完饭之后，他才能放下他之前拿到的筷子，让别人拿。而一个人必须要有两根筷子才能吃饭。（持有并等待条件）</li>\n<li>一个人不能把别人已经拿到的筷子抢过来给自己用。（非抢占条件）</li>\n<li>这个桌子是圆桌，在每个哲学家的左手边和右手边各放一根筷子，且一个人只能拿这离他最近的两个筷子，不能拿别的。（循环等待条件）</li>\n</ol>\n<p>现在存在这样一种情况：这三个人都先把他们左手边的筷子拿了，都在等右手边的筷子，除非两根筷子都拿到了，否则他们是不会放下已经拿到的筷子的，于是他们就在这里一直等了。现在我们要给他们改一下规矩，他们应该怎么做才能保证所有人都能吃上饭。</p>\n<ul>\n<li>消除互斥条件：\n<ul>\n<li>把一根筷子折成两根（磁盘共享）。</li>\n<li>或者请一个新人来，当某人想吃饭的时候，必须请示这个新人，让新人给他一次发两根筷子（打印机共享）。</li>\n</ul></li>\n<li>消除持有并等待条件：\n<ul>\n<li>每个人在想吃饭的时候，必须一次性把两根筷子都拿了。（一次性请求所有资源）</li>\n<li>或者当某个人拿不到另一根筷子的时候，要主动把他已经拿到的筷子给放下。（释放没有使用完的资源，可能前功尽弃）</li>\n</ul></li>\n<li>消除非抢占条件：\n<ul>\n<li>当某人想吃饭但是拿不到筷子的时候，可以把别人的筷子抢过来（CPU\n调度、内存管理）。</li>\n</ul></li>\n<li>消除循环等待条件：\n<ul>\n<li>给这三个筷子编上 1、2、3\n号，当某个人拿筷子的时候，必须先拿编号较小的。如 1-A-2-B-3-C-1，这里 A\n把 1 拿了，B 把 2 拿了，C 必须先拿 1，拿不了就等，在等的时间里 B 可以把\n3 拿了，然后释放 2 和 3，然后 A 拿 2、释放 1 和 2，C 再拿 1 和 3</li>\n<li> 或者让奇数号的哲学家必须先拿他左边，后拿他右边的，而偶数号哲学家则与之相反。如\n1-A-2-B-3-C-1，这里 A 把 1 拿了，B 必须先拿 3 拿不了 2，于是 2 可以被 A\n拿，然后 A 释放 1 和 2</li>\n</ul></li>\n<li> 动态避免或检测修复：时间成本和程序复杂性高</li>\n<li>不予理睬：让这三个人从头来一遍（终止线程、重启）</li>\n</ul>\n<p>参考书：《操作系统之哲学原理》第 9 章</p>\n"},{"title":"数学碎片","date":"2024-07-21T11:00:00.000Z","mathjax":true,"_content":"\n大部分可以再认，少部分可以再现，更少部分可以迁移。\n\n<!--more-->\n\n## 推断的有效性和可靠性\n\n推断是前提的集合加上结论。前提最少有一句，结论只有一句。\n\n一个推断是有效的：\n\n- <=> 不存在当所有前提为真时，结论为假的情况\n- <=> 对所有前提且的结果 => 结论\n- <=> （对所有前提且的结果 -> 结论）为重言式\n\n1. 小明是人（P）\n2. 小明不是人（非 P）\n3. 因此，张三会飞（Q）\n\n评估有效性需要把所有真值指派的情况列出来：\n\n| P   | 非 P | Q    |\n| --- | ---- | ---- |\n| 0   | 1    | 未知 |\n| 1   | 0    | 未知 |\n\n列出来后发现：不存在当所有前提为真时，结论为假的情况。所以这个推断是有效的。从矛盾的前提可以推出任何结论。\n\n一个推断是可靠的 <=> 论证是有效的 且 它的所有前提实际为真\n\n假言三段论是类似于这样的推断：\n\n1. A -> B\n2. B -> C\n3. 因此，A -> C\n\n| A   | B   | C   | A→B（前提 1） | B→C（前提 2） | A→C（结论） |\n| --- | --- | --- | ------------- | ------------- | ----------- |\n| 0   | 0   | 0   | 1             | 1             | 1           |\n| 0   | 0   | 1   | 1             | 1             | 1           |\n| 0   | 1   | 0   | 1             | 0             | 1           |\n| 0   | 1   | 1   | 1             | 1             | 1           |\n| 1   | 0   | 0   | 0             | 1             | 0           |\n| 1   | 0   | 1   | 0             | 1             | 1           |\n| 1   | 1   | 0   | 1             | 0             | 0           |\n| 1   | 1   | 1   | 1             | 1             | 1           |\n\n把真值表画出来之后，可以看到：当前提均为真时，结论一定为真。说明这个推断是有效的\n\n可靠性是针对一个具体论证实例的。当 ABC 取具体的值的时候（一次真值指派），如果还能保证两个前提都是为真的，那么推断是可靠的\n\n对于这个推断来说：\n\n1. A -> B（如果小明是湖北省出生的人，那么小明会飞）\n2. B -> C（如果小明会飞，那么小明的身份证以 42 开头）\n3. 因此，A -> C（因此，如果小明是湖北省出生的人，那么小明的身份证以 42 开头）\n\n现在我们知道的信息是：小明确实是湖北省出生的人，身份证以 42 开头，也不会飞。那么 A=1，B=0，C=1，对应真值表的倒数第三行\n\n首先它是有效的。其次它是不可靠的（即使它的结论为真），因为第一个前提是假的，它没有保证所有前提都为真\n\n对于这个推断来说：\n\n1. A -> B（如果小明是湖南人，那么小明是网络小说里的人物）\n2. B -> C（如果小明是网络小说里的人物，那么小明会飞）\n3. 因此，A -> C（因此，如果小明是湖南人，那么小明会飞）\n\n现在我们知道的信息是：小明确实是网络小说里的湖南人，会飞。那么 A=1，B=1，C=1\n\n首先它是有效的。其次它是可靠的，因为他的所有前提都是真的（即使第一个前提看起来有点问题），结论也是真的。【AI 判定】\n\n【AI 生成】第一个前提和结论都违背了常识，但在逻辑中，这并不影响推断的有效性或可靠性。逻辑只关心真值，而这里 A→B 的真值由小明的具体属性保证（A 真且 B 真）。A→B 的“问题”在于它的语义内容（内容上不现实），而非逻辑真值。逻辑只处理“如果 A 则 B”的真假，不处理“为什么 A 会导致 B”。\n\n## 命题逻辑\n\n在命题逻辑中，命题用大写字母表示，它的真值只能取 0 或 1，所以也叫二值逻辑。具有确定真值的命题叫命题常元，真值不确定的命题叫命题变元。\n\n运算符（命题连接词）优先级：非、且、或、蕴含、等值\n\n形如 A -> B 的，叫条件命题，或者假言命题，它陈述的是某一事物情况是另一件事物情况的条件。\n\n- 充分条件：如果 A 那么 B。A -> B 为蕴含。当蕴含的前件为假时，复合命题为真；当蕴含的前件为真时，复合命题为后件的真值；\n- 充要条件：A <-> B，当 A 和 B 真值一致时，复合命题为真，否则为假\n\n命题公式的递归定义：\n\n1. 0、1 是命题公式\n2. 命题变元是命题公式\n3. 如果 A 是命题公式，那么 !A 是命题公式\n4. 如果 A 和 B 是命题公式，那么 (A and B)、(A or B)、(A -> B)、(A <-> B)是命题公式\n5. 只有有限次利用上述四点所产生的符号串才是命题公式\n\n真值表是对于一个命题公式，把它的命题变元的真值指派的所有情况列出来，再计算结果。\n\n- 重言式 <=> 1（对它的所有真值指派都为 1）如 A or 1\n- 矛盾式 <=> 0（对它的所有真值指派都为 0）如 A and !A\n\n如果对命题公式 F 的真值指派中，存在一个是取值为真的，那么 F 称为可满足的公式。重言式 => 可满足的公式\n\n命题公式的代换实例是指，对一个命题公式，把它的一个命题变元 A 用另一个公式 B 代换，且它里面的所有 A 都被 B 代换了。\n\n代入规则：重言式的代换实例仍然是重言式。因为重言式 <=> 1，不受被代换的命题变元取值影响。\n\n子公式是指一个命题公式的一部分（连续的几个符号），且它仍然是公式。\n\n置换规则：对一个命题公式里 A 的子公式 B，如果用与该子公式等值的公式 C 去替代子公式 B，那么替换后得到的 D 与 A 等值。\n\n对偶：对一个命题公式，把它的所有且或变号，01 互变，得到的新公式是原公式的对偶。\n\n### 命题公式的等值关系和蕴含关系\n\n等值关系可以双向推，蕴含关系只能从左向右推。\n\n- 等值演算 (<=>) 像是告诉你两个数学表达式（如 (a+b)² 和 a² + 2ab + b²）在数值上总是相等的，你可以互相替换。\n- 蕴含关系 (=>) 像是告诉你一条推理规则（如 “如果 a > b 且 b > c，那么 a > c”）。它定义了从已知事实推导出新事实的合法途径。反过来不一定成立\n\n<-> 是命题连接词，经 <-> 连接后的是命题公式。而 <=> 是命题公式之间的关系符号，表示两个命题公式之间的等值关系。\n\nA <=> B 充要条件：\n\n- A <-> B 是永真式（<=>的定义）\n- 在任一组真值指派后，这两个公式的值一致（<->的定义）\n\n---\n\n=> 表示命题公式间的蕴含关系。\n\nA => B 充要条件：\n\n- A -> B 是永真式（=>的定义）\n- 在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n  - 必要性：如果 A -> B 是重言式，意味 A 和 B 的取值只可能在第 1、2、4 行里。所以说，在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n  - 充分性：如果对 AB 进行的所有真值指派里，当 A 为真时，B 一定为真，意味 A 和 B 的取值只可能在第 4 行里。所以 A -> B 是永真式\n\n| A   | B   | A->B |\n| --- | --- | ---- |\n| 0   | 0   | 1    |\n| 0   | 1   | 1    |\n| 1   | 0   | 0    |\n| 1   | 1   | 1    |\n\n前件也可以是一个集合。若 {A,B} => C，说明：在对他们进行的所有真值指派里，当 {A,B} 中公式同时为真时，C 一定为真。对于一个推断，前提为 A 和 B，结论为 C。如果这个推断是有效的，那么 {A,B} => C，或者说（A 且 B）=> C，或者说 （A 且 B）-> C <=> 1\n\n如何推证 A => B：有两种方法：\n\n1. 先假定 A 为真，再检查 B 的真值。如果 B 一定为真，蕴含关系成立；否则不成立。\n2. 先假定 B 为假，再检查 A 的真值。如果 A 不可能为真，蕴含关系成立；否则不成立。\n\n对 P and Q => P 来说：\n\n- 假定前件 P and Q 为真，那么 P 一定为真。所以蕴含关系成立\n- 假定后件 P 为假，那么前件为假（不可能为真），所以蕴含关系成立\n\n对 P or Q => P 来说：\n\n- 假定前件 P or Q 为真，那么后件的真值是不确定的。所以蕴含关系不成立\n- 假定后件 P 为假，那么前件的真值是不确定的（可能为真），所以蕴含关系不成立\n\n### 命题公式的等值演算\n\n- 对于两个命题，单独的或和且间有交换律，三个命题间有结合律。和乘法和加法类似\n  - 分配律：（A 且 B）或（A 且 C）<=> A 且（B 或 C）\n- 两命题且或的运算\n  - 且 1 或 0 不变：同一律\n  - 且 0 或 1 短路：零一律\n  - 且自身或自身不变：等幂律\n  - 矛且 0，矛或 1：互否律\n- 吸收律：三个命题以一且一或连接，后两个有括号，且前两个命题相同，那么它的值为第一个命题的值\n- P 蕴含 Q <=> 非 P 或 Q <=> (P 蕴含 Q) 且 (Q 蕴含 P)\n- P 等值 Q：析取范式，非号聚集；合取范式，非号分散\n\n<img src=\"/blog/images/P==Q.webp\">\n\n- 对命题公式 A 最外面加非 <=> 把 A 的对偶公式里的所有命题变元加非\n  - 德摩根律：多个命题以且/或连接，括号外有一个非，那么可以把非分配到括号里的各个命题上，并把且或变号\n\n通过命题公式的等值演算证明，一对矛盾的前提可以推出任何结论：\n\n<img src=\"/blog/images/P-and-not-P.webp\">\n\n### 范式\n\n当我们说^A 的主?[析合]取范式是 B$的时候，意味着 A<=>B。\n\n析取就是或，合取就是且。\n\n- 质合取式：由命题变元或其否定以连且的方式连接到一起。P and Q and !R\n  - 质合取式是矛盾式的充要条件是，它里面同时含有一个命题变元及其否定\n  - 充分性：矛且为 0，0 且短路\n  - 必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全 1，整体为 1 不矛盾，假设不成立\n- 质析取式：由命题变元或其否定以连或的方式连接到一起。P or Q or !R\n  - 质析取式是重言式的充要条件是，它里面同时含有一个命题变元及其否定\n  - 充分性：矛或为 1，1 或短路\n  - 必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全 0，整体为 0 不重言，假设不成立\n- 析取范式：外层是析取，内层是质合取式。（且且）或（且且）或（且且）\n- 合取范式：外层是合取，内层是质析取式\n\n任一公式都可变换成与它等值的析取范式或者合取范式，可能不止一种。变换的过程：\n\n1. 把蕴含改写成：非 P 或 Q，等值改写成：析取范式非号聚集；合取范式非号分散\n2. 用德摩根律把括号外的否定号向内深入到命题变元身上\n3. 用双重否定律消去非非\n4. 用分配律把：\n   - P 且（Q 或 R）变成（P 且 Q）或（P 且 R）的析取范式\n   - P 或（Q 且 R）变成（P 或 Q）且（P 或 R）的合取范式\n\n- 由一些命题变元产生的最小项，是类似于连且的质合取式，但是没有重复的变元。如对于命题变元 A 和 B， A 且 非 A 且 B 是一个质和取式，但不是最小项。最小项类似 A 且 非 B\n  - 对所有最小项进行真值指派，在每次真值指派里，有且只有一个最小项取值为 1\n  - 对某一个最小项进行真值指派，在所有真值指派里，有且只有一次取值为 1\n- 由一些命题变元产生的最大项，是类似于连或的质析取式，但是没有重复的变元。\n- 主析取范式：由不同最小项为质合取式形成的析取范式。如变元 A、B 的其中一个主析取范式是：（A 且 B）或（非 A 且 B）\n- 主合取范式：由不同最大项为质析取式形成的合取范式。如变元 A、B 的其中一个主合取范式是：（A 或 B）且（A 或 非 B）\n\nA 是重言式：\n\n- <=> A 的合取范式中（外层连且）每一质析取式（内层连或）都至少有一对矛盾的命题变元\n  - 充分性：矛或为 1，内层短路，全且 1 为 1\n  - 必要性：假设 A 的某一质析取式 Ai 不包括互矛的，那么 Ai 不是重言式，进而存在一组真值指派使 Ai 为假，外层连且短路为假，与 A 是永真式矛盾，假设不成立\n- <=> A 的主析取范式中出现了所有最小项\n  - 充分性：对它的所有最小项进行一次真值指派后，必定是一个真而其他全假，因为最小项是连且的，只有一种情况取 1。1 在连或中短路，所以主析取范式为重言式\n  - 必要性：假设 A 的主析取范式中没有出现所有最小项，至少漏了一个，那么对于某次真值指派，可能恰好为漏的那一项为 1，其他项都为 0 的情况，造成析取的结果是 0，与 A 是重言式矛盾，假设不成立\n\nA 是矛盾式：\n\n- <=> A 的析取范式中（外层连或）每一质合取式（内层连且）都至少有一对矛盾的命题变元\n  - 充分性：矛且为 0，内层短路，全或 0 为 0\n- <=> A 的主析取范式是空公式 0\n\n<img src=\"/blog/images/111.webp\">\n\n## 谓词逻辑\n\n可以独立存在的物体称为个体。可以是形象的如人，抽象的如唯物主义。\n\n一元谓词刻画的是个体的性质，n 元谓词刻画的是 n 个个体之间的关系。\n\n下面的谓词讨论的是谓词常元，不包括谓词变元。\n\n- 一元谓词 P：是大学生\n- 个体常元 a：张三\n- 个体变元 x\n- 简单命题函数 P(x)：x 是大学生。当命题函数里的所有个体变元都取值后，且可以计算出真值，才为命题\n- 命题、零元谓词 P(a)：张三是大学生\n- 二元谓词 Q：前者比后者高\n- 简单命题函数 Q(x,y)：x 比 y 高\n- 个体常元 b：李四\n- 命题、零元谓词 Q(a,b)：张三比李四高\n- 复合命题函数 P(x) and Q(x,y)：x 是大学生，且 x 比 y 高\n- 在命题函数中，个体变元的取值范围叫个体域，是命题函数的定义域\n- 量词有全称量词 ∀（个体域中任取一 x），存在量词 ∃（个体域中至少存在一 x），存在唯一量词 ∃!（个体域中存在唯一一 x）\n- 全总个体域：一切事物构成的集合\n\n> 人总是会犯错误的<br/>\n> 有的人用左手写字\n\n- H(x)：x 是人\n- M(x)：x 会犯错误\n- L(x)：x 用左手写字\n- ∀x(H(x) -> M(x))：在全总个体域里的世间万物里任取 x，如果 x 是人，那么 x 是会犯错误的\n- ∃x(H(x) and L(x))：在全总个体域里的世间万物存在 x，x 是人且 x 用左手写字\n\n原子谓词公式是不含量词的谓词 P\n\n量词“[任取|存在] x”的优先级比命题连接词的优先级高，并与其右的谓词公式 P 左结合。x 称为量词的指导变元，P 称为量词的辖域。\n\n在“[任取|存在] x”的辖域里，x 是约束变元，x 之外的变元是自由变元。\n\n## 传统逻辑\n\n### 直言命题\n\n形如 所有 A 都是 B 的叫直言命题，是传统逻辑的范畴。直言命题陈述的是两个类之间的包含关系。每一个命题的结构是：[量项][主项][连项][谓项]。量项包括全称量词、特称量词和单称量词；连项包括肯定和否定。\n\n每一个直言命题有四种语气：AEIO 分别代表全肯，全否，特肯，特否。\n\n- A 型：全称肯定（所有 S 是 P），例如“所有人都是会死的”。\n- E 型：全称否定（没有 S 是 P），例如“没有人是完美的”。\n- I 型：特称肯定（有些 S 是 P），例如“有些鸟会飞”。\n- O 型：特称否定（有些 S 不是 P），例如“有些苹果不是红色的”。\n\n### 直言命题的换质和换位【AI 生成】\n\n对直言命题来说，换质是指通过改变命题的“质”（肯定或否定），并对谓词取补集，得到一个新命题。换质后，新命题与原命题逻辑等价。操作步骤：\n\n- A 型（所有 S 是 P） → 换质为 E 型（没有 S 是非 P）。\n- E 型（没有 S 是 P） → 换质为 A 型（所有 S 是非 P）。\n- I 型（有些 S 是 P） → 换质为 O 型（有些 S 不是非 P）。\n- O 型（有些 S 不是 P） → 换质为 I 型（有些 S 是非 P）。\n\n特点：换质是有效且等值的操作，适用于所有直言命题类型（A、E、I、O）。\n\n换位：通过交换主词（Subject）和谓词（Predicate）的位置，得到一个新命题。换位后，新命题不一定与原命题等价。规则：\n\n- E 型（没有 S 是 P） → 换位为 E 型（没有 P 是 S）。例如：“没有人是完美的” → “没有完美的人”（等价）。\n- I 型（有些 S 是 P） → 换位为 I 型（有些 P 是 S）。例如：“有些鸟会飞” → “有些会飞的是鸟”（等价）。\n- A 型（所有 S 是 P） → 换位无效。标准换位不能直接应用，因为“所有 S 是 P”换位为“所有 P 是 S”不一定成立。例如：“所有人都是会死的”换位为“所有会死的都是人”是假的（动物也会死）。\n- O 型（有些 S 不是 P） → 换位无效。不能直接换位。例如：“有些苹果不是红色的”换位为“有些红色的不是苹果”可能真也可能假，不等价。\n\n特点：换位只对 E 型和 I 型 有效（新命题与原命题等价），对 A 型和 O 型无效（可能产生不等价命题）。\n\n### 直言三段论\n\n直言三段论由三个直言命题组成，AAA-1 的直言三段论是这样的：\n\n1. 所有 M 是 P\n2. 所有 S 是 M\n3. 因此，所有 S 是 P\n\n在结论中的主词记为 S 是小项，谓词记为 P 是大项。包括 P 的前提是大前提，包括 S 的前提是小前提。没有出现在结论里，而在两个前提里重复出现的是中项 M。\n\n|                        | 肯定：谓项都不周延            | 否定：谓项都周延                  |\n| ---------------------- | ----------------------------- | --------------------------------- |\n| **全称：主项都周延**   | A：所有主+是谓-，主包含在谓里 | E：没有主+是谓+，主谓互斥         |\n| **特称：主项都不周延** | I：有些主-是谓-，主谓有交     | O：有些主-不是谓+，主不包含在谓里 |\n\n<img src=\"/blog/images/AEIO.webp\">\n\n周延指的是，一个词项涵盖了他的所有外延。+记为周延，-记为不周延。\n\n> 小明是只有一只脚的；小明是人；因此，人是只有一只脚的\n\n在它的结论中人是周延的，指的是所有人。而在小前提中的人是没有周延的，只包括小明一个人。\n\n当我们说“A 是 B”的时候，往往意味着 A 在 B 的范围内，A 是 B 的一部分；说“A 不是 B”的时候，往往意味着 A 一点都不在 B 里面。\n\n所以说肯定判断的谓项都不周延，否定判断的谓项都周延。\n\n- 肯定判断的谓项都不周延：所有武汉人+都是科学家-（全肯 A），或有些武汉人-是科学家-（特肯 I），这里的科学家没有周延到所有科学家\n- 否定判断的谓项都周延：所有武汉人+都不是科学家+（全否 E），或有些武汉人-不是科学家+（特否 O），这里的科学家周延到了所有科学家\n- 特称判断的主项都不周延：因为是以有些……开头的\n- 全称判断的主项都周延：因为是以所有/没有……开头的。单称命题主词包括的对象只有一个，所以也周延\n\n格指的是，在大前提和小前提中，大项、小项和中项的排列顺序。结论的顺序一定是 S-P，小项-大项\n\n- 第 1 格：中项一左一右，是分开的。大前提 M-P，小前提 S-M\n- 第 2 格：中项都在右边。大前提 P-M，小前提 S-M\n- 第 3 格：中项都在左边。大前提 M-P，小前提 M-S\n- 第 4 格：中项一右一左，是聚集的。大前提 P-M，小前提 M-S\n\n> 小明只有一只脚；小明是人；因此，人只有一只脚\n\n它的中项都在左边，所以是第三格。全肯 A，AAA-3 属于无效推理\n\n一个 EIO-2 的有效的（但不可靠的）三段论是这样的：\n\n1. 没有安徽人是科学家（全否 E）\n2. 有些中国人是科学家（特肯 I）\n3. 因此，有些中国人不是安徽人（特否 O）\n\n如果把科学家替换成湖北人，就是有效且可靠的。\n\n如何判断三段论有效性：需要满足下列的所有规则。[或者画韦恩图，或者查表](https://zh.wikipedia.org/wiki/%E7%9B%B4%E8%A8%80%E4%B8%89%E6%AE%B5%E8%AE%BA#%E6%9C%89%E6%95%88%E4%B8%89%E6%AE%B5%E8%AB%96%E5%BC%8F)\n\n1. 结论中否定命题的数目必须和前提中否定命题的数目相等\n2. 结论中特称命题的数目必须和前提中特称命题的数目相等\n3. 结论中周延的词必须在前提中周延\n4. 中项必须周延至少一次\n\n如果语境上不能假设所有提及的集合非空，部分推论将会无效。\n\n## 形式谬误\n\n形式谬误的推理过程是无效的。\n\n有效的选言三段论是这样的：也叫析取三段论，或拒取式。\n\n1. P 或 Q\n2. 非 P\n3. 所以 Q\n\n它对应肯定选言的谬误：\n\n1. P 或 Q\n2. P\n3. 所以 Q 为假\n\n### 命题逻辑谬误\n\n手电筒发光有两个条件：电池有电，且开关打开了。\n\n- 肯定后件：如果手电筒发光了，那么它是有电的；手电筒是有电的；因此手电筒正在发光\n- 否定前件：如果手电筒发光了，那么它是有电的；手电筒没有发光；因此手电筒是没电的\n\n发现肯定后件、否定前件、肯定选言、否定联言的方式都是：通过真值表的复合命题列，加上简单命题其中的一列，找另一个简单命题列在真值表里有两种的情况，强制把它推向其中一种。如：\n\n| P：手电筒正在发光 | Q：它的电池有电 | 蕴含：若手电筒正在发光，则它的电池有电 |\n| ----------------- | --------------- | -------------------------------------- |\n| 0                 | 0               | 1                                      |\n| 0                 | 1               | 1                                      |\n| 1                 | 0               | 0                                      |\n| 1                 | 1               | 1                                      |\n\n- “若 P 则 Q”为真时\n  - P 为假时，Q 有两种情况（否定前件谬误：若 P 则 Q 为真，P 为假，推出 Q 为假）\n  - P 为真时，Q 只有一种情况（这是有效的，肯定前件的推理。手电筒正在发光，说明它的电池一定有电）\n  - Q 为假时，P 只有一种情况（这是有效的，否定后件的推理。手电筒的电池没电，说明它一定不会发光）\n  - Q 为真时，P 有两种情况（肯定后件谬误：若 P 则 Q，Q，因此 P）\n\n## 过去的碎片\n\n我们用 $m$ 表示样本数量，与维度 $n$ 区分开。用 $d$ 表示属性的个数。\n\n粗斜体小写字母为列向量，如 $\\boldsymbol{x}=(1;2;3)$，使用分号分隔。其转置为行向量，使用逗号分隔。\n\n粗斜体大写字母为矩阵。在上下文明确的情况下可不用粗体。\n\n在上下文明确的情况下可省略求和符号的起止。\n\n### 概率论与数理统计知识\n\n$\\sum x_i = m\\bar{x}$\n\n离散型随机变量函数的期望 $E(f(X))$：[参考](https://blog.csdn.net/SpiritedAway1106/article/details/107024984)。$f$ 是连续函数且级数绝对收敛，$E(f(X)) = \\sum P(x_i)f(x_i)$\n\n离散型随机变量的信息熵 $H(X)$：\n\n信息量 $I(x_i) = - \\log_2{P(x_i)}$：投一次正八面体骰子（0-7 点），有概率均等的八种结果。把每种结果都用 3 bit 的二进制数表示，熵为 3 bit。\n\n- 信息“结果是 1 点”的信息量是 3 bit，得到这个信息之后，熵剩余 0 bit\n- 信息“结果是 1 点或 2 点的其中之一”的信息量是 2 bit，得到这个信息之后，熵剩余 1 bit\n- 信息“结果是 1、2、3、4 点的其中之一”的信息量是 1 bit，得到这个信息之后，熵剩余 2 bit\n\n信息熵 $H(X) = E(I(X)) = - \\sum p_i \\log_2 p_i$。\n\n- 投一次正八面体骰子，点数结果的信息熵是 3 bit\n- 投一次 1% 概率为正面，99% 概率为反面的不均匀硬币，面结果的信息熵约 0.08 bit\n- 投一次 25% 概率为正面，75% 概率为反面的不均匀硬币，面结果的信息熵约 0.811 bit\n\n多重集合的信息熵：可能的最小值（全同）为 0，最大值（全异）为 log2 唯一值数量。\n\n$A = \\{ 1,2,2,2 \\}$\n\n$H(A) \\approx 0.811$\n\n多重集合划分后的信息熵：如把多重集合 $\\{ 1,2,2,2 \\}$ 划分成两个子集 $\\{1\\}$ 和 $\\{2,2,2\\}$ 后，信息熵变为 $0$。其划分后的信息熵定义为各个子集熵的加权和，权为子集容量占原集合的比例。划分后减少的信息熵称为划分后的信息增益。\n\n基尼指数：可能的最小值（全同）为 0，最大值（全异）为 1 - 唯一值数量的倒数。\n\n$A = \\{ 1,2,2,2 \\}$\n\n$G(A) = 1- \\sum p_i^2 = \\frac{3}{8}$\n\n类似地，划分后的基尼指数定义为各个子集基尼指数的加权和，权为子集容量占原集合的比例。\n\n### 线性代数知识\n\n- $\\boldsymbol{a}^T \\boldsymbol{b} = \\boldsymbol{b}^T \\boldsymbol{a}$\n- $(\\boldsymbol{A} + \\boldsymbol{B})^T = \\boldsymbol{A}^T + \\boldsymbol{B}^T$\n- $(\\boldsymbol{AB})^T = \\boldsymbol{B}^T\\boldsymbol{A}^T$\n- 矩阵和向量乘法分配律注意保证顺序不变，因为没有乘法交换律\n- 积的求和可以改写成两向量相乘 $\\sum_{i=1}^m x_iy_i = \\boldsymbol{x}^T\\boldsymbol{y}$\n- 遇到“行向量乘列向量加标量”的形式，可以把标量拆分成 1 和它本身，再分别补到前面那两个向量的尾巴上\n- $\\boldsymbol{A}\\boldsymbol{b} = \\boldsymbol{c}$\n- $\\boldsymbol{a}^T \\boldsymbol{B} = \\boldsymbol{c}^T$\n- 行列式为零、非满秩、不可逆的方阵称为奇异矩阵\n- 矩阵的秩：变换为行阶梯型矩阵后的非零行数\n\n矩阵和行列式的几何意义：\n\n- 矩阵可表示多个向量：\n\n  - 二阶行列式的绝对值是矩阵的两个列向量所张成的平行四边形的面积；\n  - 三阶行列式的绝对值是矩阵的三个列向量所张成的平行六面体的体积；\n  - 矩阵的秩是各向量张成空间的维数\n\n- 矩阵可表示对一个空间基（单位格子）的线性变换：\n  - 用变换矩阵左乘一个向量，就是把该向量所在的空间做了变换。新坐标在旧空间里的位置与旧坐标在新空间里的位置一致。变换矩阵的行列式为新空间的单位格子相对于旧空间单位格子的面积/体积改变的倍数。\n  - 行列式为零说明是降维打击，损失了信息，变换不可逆。\n  - 行列式为负说明空间的手性改变了\n\n方阵的余子式 $M_{ij}$ 和代数余子式 $A_{ij}$：它们都是行列式，可以求值。\n\n- 余子式为划掉原方阵第 $i$ 行 $j$ 列后剩余的方阵的行列式。\n- 代数余子式为余子式加一个正/负号，看 $i+j$ 是偶数还是奇数。\n\n方阵的顺序主子式：一个正方形框从左上角开始拉。它们都是行列式，可以求值。\n\n方阵的伴随矩阵 $A^*$：它是这样一个矩阵：新矩阵上每个位置的元素是原矩阵的一个代数余子式，代数余子式的下标和新矩阵位置的下标行列互换。对于二阶矩阵，它的伴随矩阵是主交换、副取反。\n\n方阵的逆矩阵 $A^{-1}$：等于伴随矩阵乘上行列式的倒数。\n\n高斯-若尔当方法：把增广矩阵 $A|I$ 初等行变换为 $I|A^{-1}$\n\n方阵的特征值 $\\lambda$ 和特征向量：\n\n- 方阵左乘它的特征向量，等于把这个特征向量在它的方向上伸缩/反转 $\\lambda$ 倍。\n- 如何求特征值：令特征多项式 $|\\lambda \\boldsymbol{E} - \\boldsymbol{A}| = 0$\n- 如何求特征向量：求 $(\\lambda \\boldsymbol{E} - \\boldsymbol{A})\\boldsymbol{x} = \\boldsymbol{0}$ 的基础解系\n- [如何求基础解系](https://blog.csdn.net/Daniel_tanxz/article/details/89132181)：初等行变换成行最简型\n\n$$\n\\begin{pmatrix}\n\\boldsymbol{E}_r & \\boldsymbol{F} \\\\\n0 & 0\n\\end{pmatrix}\n$$\n\n解矩阵为\n\n$$\n\\begin{pmatrix}\n- \\boldsymbol{F} \\\\\n\\boldsymbol{E}_{n-r}\n\\end{pmatrix}\n$$\n\n正定矩阵充要条件：其所有特征值都为正。或者所有顺序主子式为正。\n\n正交矩阵：$AA^T = E$。正交矩阵的各行是单位向量且两两正交，各列是单位向量且两两正交。\n\n矩阵的奇异值分解是把一个矩阵分解成三个矩阵相乘：\n\n$$\nA = U \\Sigma V^T\n$$\n\n$A$ 是实矩阵的情况下，$U$ 和 $V^T$ 都是正交矩阵，$\\Sigma$ 是与 $A$ 形状相同的对角矩阵，其对角线上的元素叫奇异值，呈非负且按降序排列。\n\n如何分解：$U$ 的每一列是 $AA^T$ 的特征向量，$V$ 的每一列是 $A^TA$ 的特征向量，$\\Sigma$ 对角线上每一个元素是 $A^TA$ 或 $AA^T$ 的特征值开根号，注意保证各奇异值和特征向量对应。\n\n### 高数知识\n\n复合函数求导法则：把内层的中介写一遍，连乘\n\nSigmoid 函数（对数几率函数）：$S(x) = \\dfrac{1}{1+e^{-x}}$，该函数图像长得和 $\\dfrac{1}{\\pi} \\arctan x + \\dfrac{1}{2}$ 差不多\n\n$$\n\\dfrac{1}{1+a^{-x}} + \\dfrac{1}{1+a^{x}} = 1\n$$\n\n$n$ 元函数 $f(\\boldsymbol{x})$：自变量有 $n$ 个，记作一个 $n$ 维列向量 $\\boldsymbol{x}$。\n\n梯度（一阶导数） $\\nabla f(\\boldsymbol{x}) = \\dfrac{\\partial f(\\boldsymbol{x})}{\\partial \\boldsymbol{x}}$\n\n梯度是一个 $n$ 维向量，各个分量是原函数在其各个自变量分量上的偏导函数 $\\dfrac{\\partial f(\\boldsymbol{x})}{\\partial {x_i}}$，前提是各个偏导数都存在。如：\n\n$$\n\\nabla (5x_1+4x_1x_2+x_3) = (5+4x_2,4x_1,1)\n$$\n\n海森矩阵（二阶导数） $\\nabla^2 f(\\boldsymbol{x}) = \\dfrac{\\partial^2 f(\\boldsymbol{x})}{\\partial \\boldsymbol{x}{\\partial \\boldsymbol{x}}^T}$：海森方阵的每一个元素是原函数的二阶偏导数，前提是各个二阶偏导数都存在。如：\n\n$$\n\\nabla^2(2x_1 + x_1x_2) =\n\\begin{pmatrix}\n0 & 1 \\\\\n1 & 0\n\\end{pmatrix}\n$$\n\n凸函数：这里的凸函数指下凸函数。\n\n凸函数任意两点的连线一定在函数图像上面，或与函数图像重合。如果一定在上面，我们称它为严格的凸函数。\n\n一元严格凸函数的例子：$y = x^2$\n\n一元非严格凸函数的例子： $y = x + 1$\n\n如何判定一元函数是凸函数/严格凸函数：其二阶导数在区间上恒大于等于/大于零\n\n如何判定**多元函数**是凸函数/**严格凸函数**：其**海森矩阵**在区间上是半正定/**正定**的\n\n矩阵微分公式：\n\n- $\\frac{\\partial \\boldsymbol{a}^T \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\frac{\\partial \\boldsymbol{x}^T \\boldsymbol{a}}{\\partial \\boldsymbol{x}} = \\boldsymbol{a}$ （南瓜书）\n\n- $\\frac{\\partial \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}^T} = \\boldsymbol{A}$ （南瓜书）\n\n- $\\frac{\\partial \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\boldsymbol{A}^T$ （https://en.wikipedia.org/wiki/Matrix_calculus 的**分母布局**）\n\n- $\\frac{\\partial \\boldsymbol{x}^T \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = (\\boldsymbol{A} + \\boldsymbol{A}^T) \\boldsymbol{x}$（南瓜书）\n\n### 一元线性回归\n\n目的：找出与平面直角坐标系上的 $m$ 个散点 $(x_i,y_i)$ 最接近的直线 $\\hat{y} = wx+b$\n\n找出使残差平方和最小的直线的斜率、截距，即求：\n\n$$\n(w^*,b^*) = \\underset{(w,b)}{\\mathrm{arg\\ min}} \\sum_{i=1}^{m} (y_i-wx_i-b)^2\n$$\n\n<img src=\"/blog/images/residual-error.webp\">\n\n观测值（已知的，用于训练模型的样本 $y$ 值）：$y_i$\n\n估计值（给定一个 $x_i$ 用模型 $\\hat{y} = wx+b$ 算出来的值）：$\\hat{y_i}$\n\n残差：$y_i-\\hat{y_i} = y_i-wx_i-b$\n\n这个公式是高中数学的内容，可以写成向量形式：\n\n$$\n\\begin{aligned}\nw &= \\frac{\\boldsymbol{x}^T\\boldsymbol{y} - m\\bar{x}\\bar{y}} {\\boldsymbol{x}^T\\boldsymbol{x}-m\\bar{x}^2}\n= \\frac{\\boldsymbol{x}_d^T \\boldsymbol{y}_d}{\\boldsymbol{x}_d^T \\boldsymbol{x}_d} \\\\\nb &= \\bar{y} - w\\bar{x}\n\\end{aligned}\n$$\n\n$\\boldsymbol{x}_d$ 的各个分量是 $x_i - \\bar{x}$\n\n公式是怎么来的：\n\n1. 残差平方和是关于 $w$ 和 $b$ 的二元函数，其海森矩阵为：\n\n$$\n\\begin{pmatrix}\n2 \\sum_{i=1}^m x_i^2 & 2 \\sum_{i=1}^m x_i \\\\\n2 \\sum_{i=1}^m x_i & 2m\n\\end{pmatrix}\n$$\n\n只要有一个非零的 $x$ 值，它的一阶主子式就为正；由柯西不等式的一般形式，只要有不相等的 $x$，它的二阶主子式就为正。做一元线性回归至少需要三个不同的点，如果所有 $x$ 值相同，或者都为零，就不用这个公式算了。只要用这个公式算，它的海森矩阵就是正定的，它是严格凸函数。\n\n2. 令梯度等于零向量，改写成用矩阵求解线性方程组的形式\n3. 两边左乘系数矩阵的逆矩阵，得到 $(w;b)$\n4. 把 $w$ 的分子分母同时除以 $m$\n5. 目标直线必定过均值点\n\n### 多元线性回归\n\n目的：找出 $n+1$ 维欧式空间里与 $m$ 个散点最接近的超平面：\n\n$f(\\boldsymbol{x}) = \\boldsymbol{w}^T \\boldsymbol{x} + b$ 的各项参数\n\n> 注意：这里的所有自变量（元）是一个 $n$ 维向量 $\\boldsymbol{x}$。$\\boldsymbol{w}$ 是各个一次项的系数。函数的解析式是个一次多项式\n\n“最接近”也可表示为 $f(\\boldsymbol{x}_i) \\simeq y_i$，即用模型算出来的值几乎等于观测值。\n\n“行向量乘列向量加标量”的形式，把标量 $b$ 拆分成 $b$ 和 $1$，写到前面那两个向量的尾巴上。记 $\\hat{\\boldsymbol{w}} = (\\boldsymbol{w};b)$，$\\hat{\\boldsymbol{x}} = (\\boldsymbol{x};1)$，则：\n\n$$\nf(\\boldsymbol{x}) = \\hat{\\boldsymbol{w}}^T \\hat{\\boldsymbol{x}} = \\hat{\\boldsymbol{x}}^T \\hat{\\boldsymbol{w}}\n$$\n\n公式：\n\n当 $\\boldsymbol{X}^T\\boldsymbol{X}$ 为正定矩阵时，$\\hat{\\boldsymbol{w}}$ 的全局最优解为：\n\n$$\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n$$\n\n此时的模型为：\n\n$$\nf(\\hat{\\boldsymbol{x_i}}) = \\hat{\\boldsymbol{x}}_i^T\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n$$\n\n公式是怎么来的：\n\n找出使残差平方和 $E_{\\hat{\\boldsymbol{w}}}$ 最小的各项的系数与常数项向量 $\\hat{\\boldsymbol{w}}^*$，即求：\n\n$$\n\\underset{\\hat{\\boldsymbol{w}}}{\\mathrm{arg\\ min}}\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2\n$$\n\n平方求和可改写成向量相乘，把括号里的向下影分身：\n\n$$\nE_{\\hat{\\boldsymbol{w}}} =\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2 =\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})^T\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})\n$$\n\n> 这里影分身后的 $\\boldsymbol{y}$ 和 $\\boldsymbol{X}$ 都有 $m$ 行，$\\boldsymbol{X}$ 的每一行为 $\\hat{\\boldsymbol{x}}_i^T$\n\n把 $E_{\\hat{\\boldsymbol{w}}}$ 展开，再对 $\\hat{\\boldsymbol{w}}$ 求导得：\n\n$$\n\\nabla E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T (\\boldsymbol{X} \\hat{\\boldsymbol{w}} - \\boldsymbol{y})\n$$\n\n$E_{\\hat{\\boldsymbol{w}}}$ 的海森矩阵是一阶导数再对 $\\hat{\\boldsymbol{w}}^T$ 求一次导：\n\n$$\n\\nabla^2 E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T \\boldsymbol{X}\n$$\n\n当海森矩阵为正定矩阵时，$E_{\\hat{\\boldsymbol{w}}}$ 为严格凸函数。令梯度等于零向量，求得的全局最优解为当 $E_{\\hat{\\boldsymbol{w}}}$ 取最小值时的 $\\hat{\\boldsymbol{w}}$\n\n### 梯度下降法\n\n梯度下降法是用来逼近函数取极小值时的点的。\n\n以一元下凸函数 f(x) 为例，在右侧任意取一个 x 值，函数图像在该点处下降最快的方向是该点的导数方向，且导数为正，此时需要向左逼近，把 x 值变小；如果一开始在左侧取，则导数为负，需要向右逼近，把 x 值变大。\n\n我们可以规定新取的 x 值等于上一步的 x 值减去一个与它的导数符号相同的数，这样就可以保证新的取值是一定沿着上一步相对于极小值的下降方向。\n\n方向确定了，但是可能会移动过头。由于越平缓的地方导数绝对值是越小的，为了使移动的幅度与平缓程度相称，于是我们可以规定减去的那个数等于导数乘上另一个固定的正实数。\n\n用梯度下降法求方程的解，即求一个 x 使得函数 f(x) = 0 。我们为了判断何时问题已经解决地足够好了，可以定义一个损失函数，它是用来量化离解决一个问题还有多长距离的量。\n\n最终目的是让求的 x 值使得 f(x) 的值更接近 0，为了量化更接近零的程度，我们可以用原函数的平方作为损失函数。于是问题转化成了用梯度下降法求损失函数的极小值点。\n\n在编写程序的时候，计算一个点的导数，我们可以采用计算与它相邻极近两点的割线斜率。\n\n## 十进制与 K 进制小数互转\n\nK 转 10：每一位分别乘上 K 的次方，再相加。\n\n### 2 转 10\n\n**有限小数**\n\n$11.1011\\mathrm{B} = 3.6875$\n\n| 项              | 值       |\n| --------------- | -------- |\n| $1\\times2^{1}$  | $2$      |\n| $1\\times2^{0}$  | $1$      |\n| $1\\times2^{-1}$ | $0.5$    |\n| $0\\times2^{-2}$ | $0$      |\n| $1\\times2^{-3}$ | $0.125$  |\n| $1\\times2^{-4}$ | $0.0625$ |\n| **总和**        | $3.6875$ |\n\n**无限循环小数**\n\n$1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} = 1.7$\n\n可以转换成分数计算：\n\n$$\n\\begin{aligned}\n1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} & = x \\\\\n11.\\dot{0} 11 \\dot{0} ... \\mathrm{B} & = 2x \\\\\n110110. \\dot{0} 11 \\dot{0} ... \\mathrm{B} & = 32x \\\\\n两式相减，110011\\mathrm{B} & = 30x \\\\\nx & = \\frac{110011\\mathrm{B}}{30} = \\frac{51}{30} = 1.7\n\\end{aligned}\n$$\n\n10 转 K：\n\n整数部分仍然除 K 取余，小数部分乘 K 取整，然后相加。\n\n### 10 转 2\n\n$0.7  = 0.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B}$\n\n| 小数部分乘 2         | 取整数部分 |\n| -------------------- | ---------- |\n| $0.7 \\times 2 = 1.4$ | $1$        |\n| $0.4 \\times 2 = 0.8$ | $0$        |\n| $0.8 \\times 2 = 1.6$ | $1$        |\n| $0.6 \\times 2 = 1.2$ | $1$        |\n| $0.2 \\times 2 = 0.4$ | $0$        |\n| ...                  | ...        |\n\n### 10 转 16\n\n$0.7  = 0.\\mathrm{B} \\dot{3} ... _{16}$\n\n| 小数部分乘 16          | 取整数部分   |\n| ---------------------- | ------------ |\n| $0.7 \\times 16 = 11.2$ | $\\mathrm{B}$ |\n| $0.2 \\times 16 = 3.2$  | $3$          |\n| ...                    | ...          |\n\n## 离散数学\n\n基础不牢。虽然之前及格了，但是什么都没学会。\n\n集合 A 的所有子集组成的集合，是集合 A 的幂集。{1,2}的幂集是 `{{},{1},{2},{1,2}}`。\n\n空集的幂集是 `{{}}` ，基数是 1。A 的幂集的基数 > A 的基数。\n\n元素都是集合的集合，称为集族。\n\n### 关系\n\n集合：所有 $(10,60)$ 岁的人是一个集合 $A$，所有 $(30,80)$ 岁的人是一个集合 $B$。当然有人同时属于这两个群体，也有同时不属于的。\n\n笛卡尔积：把 $A$ 放到左边，$B$ 放到右边。把左边的所有人和右边的所有人多对多配对，用一根根线连起来。这些**所有线的集合**叫笛卡尔积 $A \\times B$。当然也有自己连自己的，以及连了两次、左右互换的。注意，这些线是有方向的，是从左往右连，即 $A \\times B \\not\\equiv B \\times A$\n\n关系：从这些线里任意取几根，或者全取，或者一根都不取。**取出来的这几根线**叫关系，记作 $\\rho$。即关系是笛卡尔积的子集。$\\rho \\subseteq A \\times B$。$\\rho$ 是从 $A$ 到 $B$ 的一个关系，也是有顺序的。如果取出来的这几根线左边全是老师，线右边全是对应老师的学生，则 $\\rho$ 是从 $A$ 到 $B$ 的师生关系。张三在左边的 $A$ 里面，代号是 $a$，李四在右边的 $B$ 里面，代号是 $b$，连接它们的线记作 $(a,b)$。如果这条线**在** $\\rho$ 里面，则记作 $a \\rho b$。即张三对李四**有**师生关系 $\\rho$，张三是李四的老师。不止他们两个人在师生关系 $\\rho$ 里面。张三对李四的这根线，**在取出来的线集 $\\rho$ 里面**。这些线的集合才叫关系，而 $(a,b)$ 不叫关系，再起码也得 $\\{(a,b)\\}$。即 $a \\rho b$ 的意思是 $(a,b) \\in \\rho$， $(a,b)$ 这根线在 $\\rho$ 这个线集里面。\n\n定义域和值域：现在有一个从 $A$ 到 $B$ 的师生关系 $\\rho$，就是从 $A$ 到 $B$ 有一些线。被师生关系牵住的左边的所有人（老师），称为**这个**师生关系的定义域。右边的所有人（学生），称为**这个**师生关系的值域。这个师生关系是建立在 $A$ -> $B$ 这两个群体**之上**的。\n\n逆关系：从 $B$ 到 $A$ 的生师关系。记作 $\\tilde{\\rho}$。是 $A$ 的各个序偶反过来写。\n\n集合 $A$ 上的关系：这两边可以放同一个集合，即从 $A$ 到 $A$ 的关系 $\\rho$，直接叫集合 $A$ 上的关系。即**单个群体内部之间的线，包括自己连自己**。\n\n前面说了，关系 $\\subseteq$ 笛卡尔积。对于 $A$ 和 $A$ 的笛卡尔积，两边交换位置是相等的，可以记作 $A^2$。集合 $A$ 上的关系 $\\rho \\subseteq A^2$。注意在此时，不一定有 $\\rho = \\tilde{\\rho}$。如果 $(你, 她)\\in \\rho$ 且 $\\rho$ 是暗恋 ，不能保证 $(你, 她)\\in \\tilde{\\rho}$。[**你对别人有暗恋关系，不能保证你对别人有暗恋关系的逆**](https://music.163.com/#/song?id=430026359)。\n\n<img src=\"/blog/images/关系-0.webp\">\n\n普遍关系 $U_A$：所有人都连上线了，包括和自己。即这个关系**等于笛卡尔积** $A^2$。大家\n\n恒等关系 $I_A$：所有人都和自己连上线了，但是互相之间没有线。我\n\n具有特定性质的关系：\n\n- 自反的：对于所有 a，必须都和自己有关系。所有人都和自己连上线了，不一定和对方连不连。关系矩阵主对角线上都是 1。对于集合 A，如果它上的关系 rho 是自反的，那么 rho 里的序偶里一定有 A 的所有元素各个复读一遍\n- 反自反的：对于所有 a，都不能和自己有关系。所有人都不和自己连线，不一定和对方连不连。没有复读的\n- 对称的：对于所有 ab，如果 a 对 b 有关系，b 一定对 a 有关系。所有连线都是双向的，或者自环。关系矩阵关于主对角线对称。对于所有的 ab，如果有(a,b)，那么一定有(b,a)\n- 反对称的：对于所有 ab，如果 a 对 b 有关系，且 b 对 a 有关系，那么 ab 一定相等。不存在双向的连线（但可以自环）。关系矩阵关于主对角线反对称，对应对称位置的值相反。对于不等的 ab，如果有(a,b)，那么一定没有(b,a)\n- 恒等关系既是对称的，也是反对称的。因为它是集合里所有元素的自环。\n- 可传递的：对于所有 abc，如果 a 对 b 有关系，b 对 c 有关系，那么 a 和 c 必须有关系。对于任意一条长度为 2 的连续（同向）路径，它的起点必须可以直接通往终点。\n\n<img src=\"/blog/images/关系-1.webp\">\n\n- 在非空集合上，一个自反关系一定不是反自反的，一个对称关系可能也是反对称的\n- 在空集上，空关系同时是自反、反自反、对称、反对称、可传递的。由于没有元素，条件“空真”地成立\n\n- 等价关系是自反、对称且可传递的关系。\n- 偏序关系是自反、反对称和可传递的关系。\n\n<img src=\"/blog/images/关系-2.webp\">\n\n对实数集来说：\n\n- 小于等于关系是自反的。对于所有 a，有 a <= a\n- 小于等于关系是非对称的。由 1 <= 2，但 2 不 <= 1\n- 小于等于关系是反对称的。如果 a <= b，且 b <= a，那么 a 一定等于 b\n- 小于等于关系是可传递的。所以实数集上的“小于等于”关系是偏序。偏序用符号 ≤ 表示。\n\n闭包是指，对一个不一定具有某个性质的，集合 A 上的关系 rho，通过并的操作使它具有某个性质。在原来的线里多加几根线\n\n- 自反闭包 r：rho 并上 A 的恒等关系\n- 对称闭包 s：rho 并上 rho 的逆关系\n- 传递闭包 t：rho 的次方从 1 连并到 A 的基数。次方是同一个关系多次复合，复合是找从起点集合到终点集合的连续路。关系的复合是可结合的\n\nr(rho)、s(rho)、t(rho) 分别是集合 A 上包含 rho 的最小自反/对称/可传递的关系。\n\n对于一个等价关系，它的某个元素的等价类，从关系图上看，就是这个元素一坨所在的所有元素。等价分划就是把一坨一坨的分开。\n\n{1,2,3} 的所有分划是：`{{1,2,3}}、{{1},{2,3}}、{{1,2},{3}}、{{1,3},2}、{{1},{2},{3}}`\n\nA 的平凡分划就是 {A}，是它上普遍关系导出的等价分划，是最粗的分划。最细的分划就是切成臊子，是恒等关系导出的等价分划。\n\n### 函数\n\n函数是从集合 A（起点）到集合 B（终点）的一种特殊的关系。任取起点里的一个元素（像源），它保证往终点的某个像引出了有且只有一条线。\n\n从 A 到 B 的：\n\n- 关系，线可以有一对多的；函数，线不能有一对多的\n- 关系，定义域是 A 的子集；函数，定义域为 A\n\n函数的定义域是 A（因为是任取），值域是 B 的子集（因为可能引到同一个终点元素身上），值域包是 B。\n\n如果 A 和 B 是可数集，那么值域的元素个数可能等于定义域（双射），可能小于定义域（极端的都引到同一个终点元素身上），不可能大于定义域。\n\n内射的函数是，对于一个函数，任取起点里的两个不等元素，它们两个不会引到终点里的同一个元素上（没有多对一，再加上函数的定义保证它没有一对多，所以都是**一对一**）。即同一个像源只映射同一个像。A 基数 == 值域元素个数 <= B 基数。当内射的值域取满值域包时，内射变为双射。\n\n满射就是，**值域取满值域包**。终点的所有元素都被起点连了。A 基数大于等于 B 基数，**可能有多对一的情况**。\n\n内射且满射，称为双射。双射是一一对应的（内射保证），像和像源的个数相同，且等于 B 的基数（满射保证取满值域包）\n\n<img src=\"/blog/images/函数-1.webp\">\n\n幂等函数是指，对一个集合 A 上的函数 f，与自身复合任意次后（>=2 的整数）仍为 f\n\nA 与 B 等势（A~B） <=> 存在从 A 到 B 的双射函数。实数集的所有开区间的子集都和实数集等势，我们都可以画出一个看起来像正切函数的一支的图像，把定义域映射到 R\n\n- 可计数集\n  - 有限集：元素个数为某个正整数 m，基数是 m。或为空集，基数是 0。如 {1,2,3}\n  - 可数集（无限的，且可以排成无穷序列的形式）：与自然数集 N={0,1,2,3,...} 等势的集合，基数是阿列夫零。如 {2,4,6,8,...} 是 N 的各个元素两倍+2 的双射\n    - 可数集与[可数集|有限集]的并集是可数集，[有限个|可数个]可数集的并集是可数集\n    - 有理数集 Q 是可数集，任一个有理数都可以写成分数的形式，分子和分母所有可能的取值都是可数的。任一个有理数都可以写成有限小数或无限循环小数的形式\n- 不可数集（无限的）\n  - 无理数集是不可数的。无理数是无限不循环小数\n\n对于一个集族如 S = {A,B,C,D}，如果 A 与 B 的基数都是阿列夫零，C 与 D 的基数都是阿列夫一，那么 S 上存在一个等价关系 {(A,A),(A,B),(B,B),(C,D),(C,C),(D,D)}，它的等价分划是`{{A,B},{C,D}}`，A 的等价类是 {A,B}，A 和 B 同基（基数相同）。\n\n### 二元运算与代数系统\n\nA = {1,2,3}\n\nA^2 = {(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)}\n\nA^3 = {(1,1,1),...}\n\n函数 A^2 -> A：是 A 上的一个二元运算。n 元运算是把 A^n 映射到 A。\n\n关系（或者说函数） { ((1,1),2), ((1,2),3)} 不是 A 上的二元运算，因为定义域不等于 A^2，A 上的元素不是都和它自己以及和其他任一个元素起关系了。A 上的二元运算是从 A 的笛卡尔积向 A 的映射，它的定义域里一定有 A 里所有元素的不同排列方式的序偶。\n\n为什么除不是实数集上的二元运算，因为 (n,0) 的结果在 R 里没有对应的像，所以 (n,0) 不在定义域里，而运算要求定义域里一定要有值域包元素的所有序偶。\n\n减是实数集上的二元运算，但不是自然数集上的二元运算，因为 (1,4) 如果有像，那么 -3 是不在自然数集里的。减在实数集上封闭，在自然数集上不封闭。\n\n封闭：对于 A 上的二元运算 ◦，S 是 A 的子集，如果对于所有 S^2 里的元素，在运算之后的结果在 S 里面，那么 ◦ 在 S 上是封闭的。\n\n对于二元运算\\*：A^2 -> A：\n\n- 单位元与元素运算，结果为原元素，e \\* a = a\n- 零元与元素运算，结果为零元， z \\* a = z\n- 幂等元和他自身运算的结果不变。二元运算的单位元和零元都是幂等元\n- 左单位元和 a 运算，a 不变。a 和右零元运算，结果为右零元\n- 不可能同时有不等值的[左|右][单位元|零元]\n- a 与其右逆元运算，结果是 e\n- 当 A 的基数大于 1 时，且存在单位元和零元时，那么它们不会是同一个元素\n\n实数集上的乘法运算，单位元是 1，零元是 0。对于非零元素 a，它的逆元是其倒数\n\n实数集上的加法运算，单位元是 0，没有零元。对于元素 a，它的逆元是其相反数\n\n实数集上的减法运算，右单位元是 0，没有左单位元，没有零元。逆元是根据单位元定义的，所以没有逆元\n\n对于一个元素不多的二元运算，我们可以画出运算表，它的行标为左元素，列标为右元素，内容为运算结果。可以通过运算表里元素排列的形状判断某一个元素是不是单位元或零元。如图所示：\n\n<img src=\"/blog/images/运算-1.webp\">\n\n{0,1}上的：\n\n<img src=\"/blog/images/运算-2.webp\">\n\n- 且运算，单位元是 1，零元是 0。且 1 不变，且 0 短路。\n- 或运算，单位元是 0，零元是 1。或 0 不变，或 1 短路。\n- 蕴含运算，左单位元是 1，右零元是 1\n- 等值运算，单位元是 1\n\n<S;o1,o2...> 是代数系统。S 是非空集，称为代数系统的域，on 是一个或多个定义在 S 上的运算（可以不同阶）。\n\n代数系统的基数是 S 的基数，若 S 是有限集，则代数系统是有限代数系统。\n\n整环：对于一个代数系统<J;+,\\*>，J 是非空集，+和\\*是其上的二元运算，如果同时满足六个性质，则该代数系统为整环：\n\n- \\+ 和 \\* 都满足交换律\n- \\+ 和 \\* 都满足结合律\n- \\* 对于 \\+ 满足分配律：a\\*(b+c) = a\\*b+a\\*c\n- \\+ 和 \\* 都有单位元\n- 任取元素 a 对 + 可逆，a+a 的逆元= “+的单位元”\n- 对\\*的消去律：任取非“+的单位元”的 a，由 a\\*b = a\\*c，可得 b=c\n\n对 <{0,1};或,且> 来说：\n\n- 两个运算的交换律、结合律、分配律都满足\n- 或的单位元是 0，且的单位元是 1\n- 没有对或的可逆性：对 1 来说，不存在它的逆元可以通过与它运算来获得或的单位元 0，所以或是不可逆的。所以该代数系统不是整环\n- 有对且的消去律：由：1 且 b = 1 且 c，可得出 b=c，所以满足对且的消去律。\n\n### 群\n\n对于代数系统<S;\\*>，S 是非空集，\\*是 S 上的二元运算 S^2 -> S\n\n- 如果 \\* 是可结合的，则该代数系统为半群\n- 若半群有单位元，则该半群为独异点\n- 若独异点的域里每个元素都有逆元，则该独异点为群\n- 若群的运算\\*是可交换的，则该群为阿贝尔群\n\n### 命题逻辑\n\n命题：参考洪帆主编的《离散数学基础（第三版）》，并加上了自己的狭隘理解，同时满足以下三条：\n\n1. 它是一个陈述句\n2. 它有一个自带的**属性**，叫**真值**，取 $0$ 或 $1$\n3. 它的真值可以**被判断**（没有说被谁判断、在什么时间被判断）\n\n> 2x - 3 = 0 <br/>\n> 这句话是假的\n\n我们**永远**没法判断它们的真值是 $0$ 还是 $1$（如果前者是一个陈述句而不是方程，我们不知道 x 是什么东西的。后者……）。所以它们**不是命题**。\n\n> 2024 年 1 月 16 号体彩排列三的开奖号码是 703\n\n它是一个命题。它的真值可以被判断，因为这件事已经发生了，但需要我们[查询资料](https://www.zhcw.com/kjxx/pl3/)。\n\n> 2024 年 1 月 17 号体彩排列三的开奖号码是 555<br> > [太阳系外有宇宙人](https://music.163.com/song?id=1883951953)\n\n它们都是命题。它们的真值可以被判断，但不是现在。\n\n命题连结词，一元的只有：否定 $\\neg$，非……。下面都是二元的。\n\n```py\ndef logic(P: bool, Q: bool) -> bool:\n```\n\n现在有一份鱼和一份熊掌。作为前件和后件。如果我们吃了，件的真值记为 $1$，否则记为 $0$；如果我们满足了（吃好了），复合命题的真值记为 $1$，否则记为 $0$\n\n合取 $\\wedge$ ……且……：全吃了，我才满足\n\n```py\nreturn P and Q\n```\n\n析取 $\\vee$ ……或……（可兼的或）：只要有吃的，我就满足\n\n```py\nreturn P or Q\n```\n\n不可兼的叫**异或**。区别是：异或的鱼和熊掌只能吃一个，同时吃会生病。\n\n```py\nreturn P ^ Q\n```\n\n等值 $\\leftrightarrow$ ……当且仅当……：是异或的对立面：同或、完美主义：要么都吃，要么都不吃，只吃一个我就难受。\n\n```py\nreturn P == Q\n```\n\n蕴含 $\\rightarrow$ ……若则……：\n\n现在有【生】和【义】，作为前件和后件。如果我们保留了，件的真值记为 $1$，否则记为 $0$；如果我们满足了（垂名了），复合命题的真值记为 $1$，否则记为 $0$\n\n注意：\n\n- 在蕴含的前件为假的情况下，复合命题为真。\n- 在蕴含的前件为真的情况下，复合命题的真值为后件的真值。\n\n如果我们[把【生】舍了](https://music.163.com/song?id=2058806391)，那还管它义不义，名字直接刻碑上了。或者这样记：如果一个人的[前提都搞错了](https://music.163.com/song?id=4237850)，那就没有必要和他讨论了，你说得都对。\n\n```py\nreturn True if not P else Q\nreturn (not P) or Q\nreturn not (P and (not Q))\n```\n\n一个文字游戏：除非 P，否则不 Q\n\n```py\nif P:\n    return Q\nelse:\n    return not Q\n```\n\n就是当且仅当\n\n```py\nreturn P == Q\n```\n","source":"_posts/数学碎片.md","raw":"---\ntitle: 数学碎片\ndate: 2024-07-21 19:00:00\npermalink: math.html\nmathjax: true\n---\n\n大部分可以再认，少部分可以再现，更少部分可以迁移。\n\n<!--more-->\n\n## 推断的有效性和可靠性\n\n推断是前提的集合加上结论。前提最少有一句，结论只有一句。\n\n一个推断是有效的：\n\n- <=> 不存在当所有前提为真时，结论为假的情况\n- <=> 对所有前提且的结果 => 结论\n- <=> （对所有前提且的结果 -> 结论）为重言式\n\n1. 小明是人（P）\n2. 小明不是人（非 P）\n3. 因此，张三会飞（Q）\n\n评估有效性需要把所有真值指派的情况列出来：\n\n| P   | 非 P | Q    |\n| --- | ---- | ---- |\n| 0   | 1    | 未知 |\n| 1   | 0    | 未知 |\n\n列出来后发现：不存在当所有前提为真时，结论为假的情况。所以这个推断是有效的。从矛盾的前提可以推出任何结论。\n\n一个推断是可靠的 <=> 论证是有效的 且 它的所有前提实际为真\n\n假言三段论是类似于这样的推断：\n\n1. A -> B\n2. B -> C\n3. 因此，A -> C\n\n| A   | B   | C   | A→B（前提 1） | B→C（前提 2） | A→C（结论） |\n| --- | --- | --- | ------------- | ------------- | ----------- |\n| 0   | 0   | 0   | 1             | 1             | 1           |\n| 0   | 0   | 1   | 1             | 1             | 1           |\n| 0   | 1   | 0   | 1             | 0             | 1           |\n| 0   | 1   | 1   | 1             | 1             | 1           |\n| 1   | 0   | 0   | 0             | 1             | 0           |\n| 1   | 0   | 1   | 0             | 1             | 1           |\n| 1   | 1   | 0   | 1             | 0             | 0           |\n| 1   | 1   | 1   | 1             | 1             | 1           |\n\n把真值表画出来之后，可以看到：当前提均为真时，结论一定为真。说明这个推断是有效的\n\n可靠性是针对一个具体论证实例的。当 ABC 取具体的值的时候（一次真值指派），如果还能保证两个前提都是为真的，那么推断是可靠的\n\n对于这个推断来说：\n\n1. A -> B（如果小明是湖北省出生的人，那么小明会飞）\n2. B -> C（如果小明会飞，那么小明的身份证以 42 开头）\n3. 因此，A -> C（因此，如果小明是湖北省出生的人，那么小明的身份证以 42 开头）\n\n现在我们知道的信息是：小明确实是湖北省出生的人，身份证以 42 开头，也不会飞。那么 A=1，B=0，C=1，对应真值表的倒数第三行\n\n首先它是有效的。其次它是不可靠的（即使它的结论为真），因为第一个前提是假的，它没有保证所有前提都为真\n\n对于这个推断来说：\n\n1. A -> B（如果小明是湖南人，那么小明是网络小说里的人物）\n2. B -> C（如果小明是网络小说里的人物，那么小明会飞）\n3. 因此，A -> C（因此，如果小明是湖南人，那么小明会飞）\n\n现在我们知道的信息是：小明确实是网络小说里的湖南人，会飞。那么 A=1，B=1，C=1\n\n首先它是有效的。其次它是可靠的，因为他的所有前提都是真的（即使第一个前提看起来有点问题），结论也是真的。【AI 判定】\n\n【AI 生成】第一个前提和结论都违背了常识，但在逻辑中，这并不影响推断的有效性或可靠性。逻辑只关心真值，而这里 A→B 的真值由小明的具体属性保证（A 真且 B 真）。A→B 的“问题”在于它的语义内容（内容上不现实），而非逻辑真值。逻辑只处理“如果 A 则 B”的真假，不处理“为什么 A 会导致 B”。\n\n## 命题逻辑\n\n在命题逻辑中，命题用大写字母表示，它的真值只能取 0 或 1，所以也叫二值逻辑。具有确定真值的命题叫命题常元，真值不确定的命题叫命题变元。\n\n运算符（命题连接词）优先级：非、且、或、蕴含、等值\n\n形如 A -> B 的，叫条件命题，或者假言命题，它陈述的是某一事物情况是另一件事物情况的条件。\n\n- 充分条件：如果 A 那么 B。A -> B 为蕴含。当蕴含的前件为假时，复合命题为真；当蕴含的前件为真时，复合命题为后件的真值；\n- 充要条件：A <-> B，当 A 和 B 真值一致时，复合命题为真，否则为假\n\n命题公式的递归定义：\n\n1. 0、1 是命题公式\n2. 命题变元是命题公式\n3. 如果 A 是命题公式，那么 !A 是命题公式\n4. 如果 A 和 B 是命题公式，那么 (A and B)、(A or B)、(A -> B)、(A <-> B)是命题公式\n5. 只有有限次利用上述四点所产生的符号串才是命题公式\n\n真值表是对于一个命题公式，把它的命题变元的真值指派的所有情况列出来，再计算结果。\n\n- 重言式 <=> 1（对它的所有真值指派都为 1）如 A or 1\n- 矛盾式 <=> 0（对它的所有真值指派都为 0）如 A and !A\n\n如果对命题公式 F 的真值指派中，存在一个是取值为真的，那么 F 称为可满足的公式。重言式 => 可满足的公式\n\n命题公式的代换实例是指，对一个命题公式，把它的一个命题变元 A 用另一个公式 B 代换，且它里面的所有 A 都被 B 代换了。\n\n代入规则：重言式的代换实例仍然是重言式。因为重言式 <=> 1，不受被代换的命题变元取值影响。\n\n子公式是指一个命题公式的一部分（连续的几个符号），且它仍然是公式。\n\n置换规则：对一个命题公式里 A 的子公式 B，如果用与该子公式等值的公式 C 去替代子公式 B，那么替换后得到的 D 与 A 等值。\n\n对偶：对一个命题公式，把它的所有且或变号，01 互变，得到的新公式是原公式的对偶。\n\n### 命题公式的等值关系和蕴含关系\n\n等值关系可以双向推，蕴含关系只能从左向右推。\n\n- 等值演算 (<=>) 像是告诉你两个数学表达式（如 (a+b)² 和 a² + 2ab + b²）在数值上总是相等的，你可以互相替换。\n- 蕴含关系 (=>) 像是告诉你一条推理规则（如 “如果 a > b 且 b > c，那么 a > c”）。它定义了从已知事实推导出新事实的合法途径。反过来不一定成立\n\n<-> 是命题连接词，经 <-> 连接后的是命题公式。而 <=> 是命题公式之间的关系符号，表示两个命题公式之间的等值关系。\n\nA <=> B 充要条件：\n\n- A <-> B 是永真式（<=>的定义）\n- 在任一组真值指派后，这两个公式的值一致（<->的定义）\n\n---\n\n=> 表示命题公式间的蕴含关系。\n\nA => B 充要条件：\n\n- A -> B 是永真式（=>的定义）\n- 在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n  - 必要性：如果 A -> B 是重言式，意味 A 和 B 的取值只可能在第 1、2、4 行里。所以说，在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n  - 充分性：如果对 AB 进行的所有真值指派里，当 A 为真时，B 一定为真，意味 A 和 B 的取值只可能在第 4 行里。所以 A -> B 是永真式\n\n| A   | B   | A->B |\n| --- | --- | ---- |\n| 0   | 0   | 1    |\n| 0   | 1   | 1    |\n| 1   | 0   | 0    |\n| 1   | 1   | 1    |\n\n前件也可以是一个集合。若 {A,B} => C，说明：在对他们进行的所有真值指派里，当 {A,B} 中公式同时为真时，C 一定为真。对于一个推断，前提为 A 和 B，结论为 C。如果这个推断是有效的，那么 {A,B} => C，或者说（A 且 B）=> C，或者说 （A 且 B）-> C <=> 1\n\n如何推证 A => B：有两种方法：\n\n1. 先假定 A 为真，再检查 B 的真值。如果 B 一定为真，蕴含关系成立；否则不成立。\n2. 先假定 B 为假，再检查 A 的真值。如果 A 不可能为真，蕴含关系成立；否则不成立。\n\n对 P and Q => P 来说：\n\n- 假定前件 P and Q 为真，那么 P 一定为真。所以蕴含关系成立\n- 假定后件 P 为假，那么前件为假（不可能为真），所以蕴含关系成立\n\n对 P or Q => P 来说：\n\n- 假定前件 P or Q 为真，那么后件的真值是不确定的。所以蕴含关系不成立\n- 假定后件 P 为假，那么前件的真值是不确定的（可能为真），所以蕴含关系不成立\n\n### 命题公式的等值演算\n\n- 对于两个命题，单独的或和且间有交换律，三个命题间有结合律。和乘法和加法类似\n  - 分配律：（A 且 B）或（A 且 C）<=> A 且（B 或 C）\n- 两命题且或的运算\n  - 且 1 或 0 不变：同一律\n  - 且 0 或 1 短路：零一律\n  - 且自身或自身不变：等幂律\n  - 矛且 0，矛或 1：互否律\n- 吸收律：三个命题以一且一或连接，后两个有括号，且前两个命题相同，那么它的值为第一个命题的值\n- P 蕴含 Q <=> 非 P 或 Q <=> (P 蕴含 Q) 且 (Q 蕴含 P)\n- P 等值 Q：析取范式，非号聚集；合取范式，非号分散\n\n<img src=\"/blog/images/P==Q.webp\">\n\n- 对命题公式 A 最外面加非 <=> 把 A 的对偶公式里的所有命题变元加非\n  - 德摩根律：多个命题以且/或连接，括号外有一个非，那么可以把非分配到括号里的各个命题上，并把且或变号\n\n通过命题公式的等值演算证明，一对矛盾的前提可以推出任何结论：\n\n<img src=\"/blog/images/P-and-not-P.webp\">\n\n### 范式\n\n当我们说^A 的主?[析合]取范式是 B$的时候，意味着 A<=>B。\n\n析取就是或，合取就是且。\n\n- 质合取式：由命题变元或其否定以连且的方式连接到一起。P and Q and !R\n  - 质合取式是矛盾式的充要条件是，它里面同时含有一个命题变元及其否定\n  - 充分性：矛且为 0，0 且短路\n  - 必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全 1，整体为 1 不矛盾，假设不成立\n- 质析取式：由命题变元或其否定以连或的方式连接到一起。P or Q or !R\n  - 质析取式是重言式的充要条件是，它里面同时含有一个命题变元及其否定\n  - 充分性：矛或为 1，1 或短路\n  - 必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全 0，整体为 0 不重言，假设不成立\n- 析取范式：外层是析取，内层是质合取式。（且且）或（且且）或（且且）\n- 合取范式：外层是合取，内层是质析取式\n\n任一公式都可变换成与它等值的析取范式或者合取范式，可能不止一种。变换的过程：\n\n1. 把蕴含改写成：非 P 或 Q，等值改写成：析取范式非号聚集；合取范式非号分散\n2. 用德摩根律把括号外的否定号向内深入到命题变元身上\n3. 用双重否定律消去非非\n4. 用分配律把：\n   - P 且（Q 或 R）变成（P 且 Q）或（P 且 R）的析取范式\n   - P 或（Q 且 R）变成（P 或 Q）且（P 或 R）的合取范式\n\n- 由一些命题变元产生的最小项，是类似于连且的质合取式，但是没有重复的变元。如对于命题变元 A 和 B， A 且 非 A 且 B 是一个质和取式，但不是最小项。最小项类似 A 且 非 B\n  - 对所有最小项进行真值指派，在每次真值指派里，有且只有一个最小项取值为 1\n  - 对某一个最小项进行真值指派，在所有真值指派里，有且只有一次取值为 1\n- 由一些命题变元产生的最大项，是类似于连或的质析取式，但是没有重复的变元。\n- 主析取范式：由不同最小项为质合取式形成的析取范式。如变元 A、B 的其中一个主析取范式是：（A 且 B）或（非 A 且 B）\n- 主合取范式：由不同最大项为质析取式形成的合取范式。如变元 A、B 的其中一个主合取范式是：（A 或 B）且（A 或 非 B）\n\nA 是重言式：\n\n- <=> A 的合取范式中（外层连且）每一质析取式（内层连或）都至少有一对矛盾的命题变元\n  - 充分性：矛或为 1，内层短路，全且 1 为 1\n  - 必要性：假设 A 的某一质析取式 Ai 不包括互矛的，那么 Ai 不是重言式，进而存在一组真值指派使 Ai 为假，外层连且短路为假，与 A 是永真式矛盾，假设不成立\n- <=> A 的主析取范式中出现了所有最小项\n  - 充分性：对它的所有最小项进行一次真值指派后，必定是一个真而其他全假，因为最小项是连且的，只有一种情况取 1。1 在连或中短路，所以主析取范式为重言式\n  - 必要性：假设 A 的主析取范式中没有出现所有最小项，至少漏了一个，那么对于某次真值指派，可能恰好为漏的那一项为 1，其他项都为 0 的情况，造成析取的结果是 0，与 A 是重言式矛盾，假设不成立\n\nA 是矛盾式：\n\n- <=> A 的析取范式中（外层连或）每一质合取式（内层连且）都至少有一对矛盾的命题变元\n  - 充分性：矛且为 0，内层短路，全或 0 为 0\n- <=> A 的主析取范式是空公式 0\n\n<img src=\"/blog/images/111.webp\">\n\n## 谓词逻辑\n\n可以独立存在的物体称为个体。可以是形象的如人，抽象的如唯物主义。\n\n一元谓词刻画的是个体的性质，n 元谓词刻画的是 n 个个体之间的关系。\n\n下面的谓词讨论的是谓词常元，不包括谓词变元。\n\n- 一元谓词 P：是大学生\n- 个体常元 a：张三\n- 个体变元 x\n- 简单命题函数 P(x)：x 是大学生。当命题函数里的所有个体变元都取值后，且可以计算出真值，才为命题\n- 命题、零元谓词 P(a)：张三是大学生\n- 二元谓词 Q：前者比后者高\n- 简单命题函数 Q(x,y)：x 比 y 高\n- 个体常元 b：李四\n- 命题、零元谓词 Q(a,b)：张三比李四高\n- 复合命题函数 P(x) and Q(x,y)：x 是大学生，且 x 比 y 高\n- 在命题函数中，个体变元的取值范围叫个体域，是命题函数的定义域\n- 量词有全称量词 ∀（个体域中任取一 x），存在量词 ∃（个体域中至少存在一 x），存在唯一量词 ∃!（个体域中存在唯一一 x）\n- 全总个体域：一切事物构成的集合\n\n> 人总是会犯错误的<br/>\n> 有的人用左手写字\n\n- H(x)：x 是人\n- M(x)：x 会犯错误\n- L(x)：x 用左手写字\n- ∀x(H(x) -> M(x))：在全总个体域里的世间万物里任取 x，如果 x 是人，那么 x 是会犯错误的\n- ∃x(H(x) and L(x))：在全总个体域里的世间万物存在 x，x 是人且 x 用左手写字\n\n原子谓词公式是不含量词的谓词 P\n\n量词“[任取|存在] x”的优先级比命题连接词的优先级高，并与其右的谓词公式 P 左结合。x 称为量词的指导变元，P 称为量词的辖域。\n\n在“[任取|存在] x”的辖域里，x 是约束变元，x 之外的变元是自由变元。\n\n## 传统逻辑\n\n### 直言命题\n\n形如 所有 A 都是 B 的叫直言命题，是传统逻辑的范畴。直言命题陈述的是两个类之间的包含关系。每一个命题的结构是：[量项][主项][连项][谓项]。量项包括全称量词、特称量词和单称量词；连项包括肯定和否定。\n\n每一个直言命题有四种语气：AEIO 分别代表全肯，全否，特肯，特否。\n\n- A 型：全称肯定（所有 S 是 P），例如“所有人都是会死的”。\n- E 型：全称否定（没有 S 是 P），例如“没有人是完美的”。\n- I 型：特称肯定（有些 S 是 P），例如“有些鸟会飞”。\n- O 型：特称否定（有些 S 不是 P），例如“有些苹果不是红色的”。\n\n### 直言命题的换质和换位【AI 生成】\n\n对直言命题来说，换质是指通过改变命题的“质”（肯定或否定），并对谓词取补集，得到一个新命题。换质后，新命题与原命题逻辑等价。操作步骤：\n\n- A 型（所有 S 是 P） → 换质为 E 型（没有 S 是非 P）。\n- E 型（没有 S 是 P） → 换质为 A 型（所有 S 是非 P）。\n- I 型（有些 S 是 P） → 换质为 O 型（有些 S 不是非 P）。\n- O 型（有些 S 不是 P） → 换质为 I 型（有些 S 是非 P）。\n\n特点：换质是有效且等值的操作，适用于所有直言命题类型（A、E、I、O）。\n\n换位：通过交换主词（Subject）和谓词（Predicate）的位置，得到一个新命题。换位后，新命题不一定与原命题等价。规则：\n\n- E 型（没有 S 是 P） → 换位为 E 型（没有 P 是 S）。例如：“没有人是完美的” → “没有完美的人”（等价）。\n- I 型（有些 S 是 P） → 换位为 I 型（有些 P 是 S）。例如：“有些鸟会飞” → “有些会飞的是鸟”（等价）。\n- A 型（所有 S 是 P） → 换位无效。标准换位不能直接应用，因为“所有 S 是 P”换位为“所有 P 是 S”不一定成立。例如：“所有人都是会死的”换位为“所有会死的都是人”是假的（动物也会死）。\n- O 型（有些 S 不是 P） → 换位无效。不能直接换位。例如：“有些苹果不是红色的”换位为“有些红色的不是苹果”可能真也可能假，不等价。\n\n特点：换位只对 E 型和 I 型 有效（新命题与原命题等价），对 A 型和 O 型无效（可能产生不等价命题）。\n\n### 直言三段论\n\n直言三段论由三个直言命题组成，AAA-1 的直言三段论是这样的：\n\n1. 所有 M 是 P\n2. 所有 S 是 M\n3. 因此，所有 S 是 P\n\n在结论中的主词记为 S 是小项，谓词记为 P 是大项。包括 P 的前提是大前提，包括 S 的前提是小前提。没有出现在结论里，而在两个前提里重复出现的是中项 M。\n\n|                        | 肯定：谓项都不周延            | 否定：谓项都周延                  |\n| ---------------------- | ----------------------------- | --------------------------------- |\n| **全称：主项都周延**   | A：所有主+是谓-，主包含在谓里 | E：没有主+是谓+，主谓互斥         |\n| **特称：主项都不周延** | I：有些主-是谓-，主谓有交     | O：有些主-不是谓+，主不包含在谓里 |\n\n<img src=\"/blog/images/AEIO.webp\">\n\n周延指的是，一个词项涵盖了他的所有外延。+记为周延，-记为不周延。\n\n> 小明是只有一只脚的；小明是人；因此，人是只有一只脚的\n\n在它的结论中人是周延的，指的是所有人。而在小前提中的人是没有周延的，只包括小明一个人。\n\n当我们说“A 是 B”的时候，往往意味着 A 在 B 的范围内，A 是 B 的一部分；说“A 不是 B”的时候，往往意味着 A 一点都不在 B 里面。\n\n所以说肯定判断的谓项都不周延，否定判断的谓项都周延。\n\n- 肯定判断的谓项都不周延：所有武汉人+都是科学家-（全肯 A），或有些武汉人-是科学家-（特肯 I），这里的科学家没有周延到所有科学家\n- 否定判断的谓项都周延：所有武汉人+都不是科学家+（全否 E），或有些武汉人-不是科学家+（特否 O），这里的科学家周延到了所有科学家\n- 特称判断的主项都不周延：因为是以有些……开头的\n- 全称判断的主项都周延：因为是以所有/没有……开头的。单称命题主词包括的对象只有一个，所以也周延\n\n格指的是，在大前提和小前提中，大项、小项和中项的排列顺序。结论的顺序一定是 S-P，小项-大项\n\n- 第 1 格：中项一左一右，是分开的。大前提 M-P，小前提 S-M\n- 第 2 格：中项都在右边。大前提 P-M，小前提 S-M\n- 第 3 格：中项都在左边。大前提 M-P，小前提 M-S\n- 第 4 格：中项一右一左，是聚集的。大前提 P-M，小前提 M-S\n\n> 小明只有一只脚；小明是人；因此，人只有一只脚\n\n它的中项都在左边，所以是第三格。全肯 A，AAA-3 属于无效推理\n\n一个 EIO-2 的有效的（但不可靠的）三段论是这样的：\n\n1. 没有安徽人是科学家（全否 E）\n2. 有些中国人是科学家（特肯 I）\n3. 因此，有些中国人不是安徽人（特否 O）\n\n如果把科学家替换成湖北人，就是有效且可靠的。\n\n如何判断三段论有效性：需要满足下列的所有规则。[或者画韦恩图，或者查表](https://zh.wikipedia.org/wiki/%E7%9B%B4%E8%A8%80%E4%B8%89%E6%AE%B5%E8%AE%BA#%E6%9C%89%E6%95%88%E4%B8%89%E6%AE%B5%E8%AB%96%E5%BC%8F)\n\n1. 结论中否定命题的数目必须和前提中否定命题的数目相等\n2. 结论中特称命题的数目必须和前提中特称命题的数目相等\n3. 结论中周延的词必须在前提中周延\n4. 中项必须周延至少一次\n\n如果语境上不能假设所有提及的集合非空，部分推论将会无效。\n\n## 形式谬误\n\n形式谬误的推理过程是无效的。\n\n有效的选言三段论是这样的：也叫析取三段论，或拒取式。\n\n1. P 或 Q\n2. 非 P\n3. 所以 Q\n\n它对应肯定选言的谬误：\n\n1. P 或 Q\n2. P\n3. 所以 Q 为假\n\n### 命题逻辑谬误\n\n手电筒发光有两个条件：电池有电，且开关打开了。\n\n- 肯定后件：如果手电筒发光了，那么它是有电的；手电筒是有电的；因此手电筒正在发光\n- 否定前件：如果手电筒发光了，那么它是有电的；手电筒没有发光；因此手电筒是没电的\n\n发现肯定后件、否定前件、肯定选言、否定联言的方式都是：通过真值表的复合命题列，加上简单命题其中的一列，找另一个简单命题列在真值表里有两种的情况，强制把它推向其中一种。如：\n\n| P：手电筒正在发光 | Q：它的电池有电 | 蕴含：若手电筒正在发光，则它的电池有电 |\n| ----------------- | --------------- | -------------------------------------- |\n| 0                 | 0               | 1                                      |\n| 0                 | 1               | 1                                      |\n| 1                 | 0               | 0                                      |\n| 1                 | 1               | 1                                      |\n\n- “若 P 则 Q”为真时\n  - P 为假时，Q 有两种情况（否定前件谬误：若 P 则 Q 为真，P 为假，推出 Q 为假）\n  - P 为真时，Q 只有一种情况（这是有效的，肯定前件的推理。手电筒正在发光，说明它的电池一定有电）\n  - Q 为假时，P 只有一种情况（这是有效的，否定后件的推理。手电筒的电池没电，说明它一定不会发光）\n  - Q 为真时，P 有两种情况（肯定后件谬误：若 P 则 Q，Q，因此 P）\n\n## 过去的碎片\n\n我们用 $m$ 表示样本数量，与维度 $n$ 区分开。用 $d$ 表示属性的个数。\n\n粗斜体小写字母为列向量，如 $\\boldsymbol{x}=(1;2;3)$，使用分号分隔。其转置为行向量，使用逗号分隔。\n\n粗斜体大写字母为矩阵。在上下文明确的情况下可不用粗体。\n\n在上下文明确的情况下可省略求和符号的起止。\n\n### 概率论与数理统计知识\n\n$\\sum x_i = m\\bar{x}$\n\n离散型随机变量函数的期望 $E(f(X))$：[参考](https://blog.csdn.net/SpiritedAway1106/article/details/107024984)。$f$ 是连续函数且级数绝对收敛，$E(f(X)) = \\sum P(x_i)f(x_i)$\n\n离散型随机变量的信息熵 $H(X)$：\n\n信息量 $I(x_i) = - \\log_2{P(x_i)}$：投一次正八面体骰子（0-7 点），有概率均等的八种结果。把每种结果都用 3 bit 的二进制数表示，熵为 3 bit。\n\n- 信息“结果是 1 点”的信息量是 3 bit，得到这个信息之后，熵剩余 0 bit\n- 信息“结果是 1 点或 2 点的其中之一”的信息量是 2 bit，得到这个信息之后，熵剩余 1 bit\n- 信息“结果是 1、2、3、4 点的其中之一”的信息量是 1 bit，得到这个信息之后，熵剩余 2 bit\n\n信息熵 $H(X) = E(I(X)) = - \\sum p_i \\log_2 p_i$。\n\n- 投一次正八面体骰子，点数结果的信息熵是 3 bit\n- 投一次 1% 概率为正面，99% 概率为反面的不均匀硬币，面结果的信息熵约 0.08 bit\n- 投一次 25% 概率为正面，75% 概率为反面的不均匀硬币，面结果的信息熵约 0.811 bit\n\n多重集合的信息熵：可能的最小值（全同）为 0，最大值（全异）为 log2 唯一值数量。\n\n$A = \\{ 1,2,2,2 \\}$\n\n$H(A) \\approx 0.811$\n\n多重集合划分后的信息熵：如把多重集合 $\\{ 1,2,2,2 \\}$ 划分成两个子集 $\\{1\\}$ 和 $\\{2,2,2\\}$ 后，信息熵变为 $0$。其划分后的信息熵定义为各个子集熵的加权和，权为子集容量占原集合的比例。划分后减少的信息熵称为划分后的信息增益。\n\n基尼指数：可能的最小值（全同）为 0，最大值（全异）为 1 - 唯一值数量的倒数。\n\n$A = \\{ 1,2,2,2 \\}$\n\n$G(A) = 1- \\sum p_i^2 = \\frac{3}{8}$\n\n类似地，划分后的基尼指数定义为各个子集基尼指数的加权和，权为子集容量占原集合的比例。\n\n### 线性代数知识\n\n- $\\boldsymbol{a}^T \\boldsymbol{b} = \\boldsymbol{b}^T \\boldsymbol{a}$\n- $(\\boldsymbol{A} + \\boldsymbol{B})^T = \\boldsymbol{A}^T + \\boldsymbol{B}^T$\n- $(\\boldsymbol{AB})^T = \\boldsymbol{B}^T\\boldsymbol{A}^T$\n- 矩阵和向量乘法分配律注意保证顺序不变，因为没有乘法交换律\n- 积的求和可以改写成两向量相乘 $\\sum_{i=1}^m x_iy_i = \\boldsymbol{x}^T\\boldsymbol{y}$\n- 遇到“行向量乘列向量加标量”的形式，可以把标量拆分成 1 和它本身，再分别补到前面那两个向量的尾巴上\n- $\\boldsymbol{A}\\boldsymbol{b} = \\boldsymbol{c}$\n- $\\boldsymbol{a}^T \\boldsymbol{B} = \\boldsymbol{c}^T$\n- 行列式为零、非满秩、不可逆的方阵称为奇异矩阵\n- 矩阵的秩：变换为行阶梯型矩阵后的非零行数\n\n矩阵和行列式的几何意义：\n\n- 矩阵可表示多个向量：\n\n  - 二阶行列式的绝对值是矩阵的两个列向量所张成的平行四边形的面积；\n  - 三阶行列式的绝对值是矩阵的三个列向量所张成的平行六面体的体积；\n  - 矩阵的秩是各向量张成空间的维数\n\n- 矩阵可表示对一个空间基（单位格子）的线性变换：\n  - 用变换矩阵左乘一个向量，就是把该向量所在的空间做了变换。新坐标在旧空间里的位置与旧坐标在新空间里的位置一致。变换矩阵的行列式为新空间的单位格子相对于旧空间单位格子的面积/体积改变的倍数。\n  - 行列式为零说明是降维打击，损失了信息，变换不可逆。\n  - 行列式为负说明空间的手性改变了\n\n方阵的余子式 $M_{ij}$ 和代数余子式 $A_{ij}$：它们都是行列式，可以求值。\n\n- 余子式为划掉原方阵第 $i$ 行 $j$ 列后剩余的方阵的行列式。\n- 代数余子式为余子式加一个正/负号，看 $i+j$ 是偶数还是奇数。\n\n方阵的顺序主子式：一个正方形框从左上角开始拉。它们都是行列式，可以求值。\n\n方阵的伴随矩阵 $A^*$：它是这样一个矩阵：新矩阵上每个位置的元素是原矩阵的一个代数余子式，代数余子式的下标和新矩阵位置的下标行列互换。对于二阶矩阵，它的伴随矩阵是主交换、副取反。\n\n方阵的逆矩阵 $A^{-1}$：等于伴随矩阵乘上行列式的倒数。\n\n高斯-若尔当方法：把增广矩阵 $A|I$ 初等行变换为 $I|A^{-1}$\n\n方阵的特征值 $\\lambda$ 和特征向量：\n\n- 方阵左乘它的特征向量，等于把这个特征向量在它的方向上伸缩/反转 $\\lambda$ 倍。\n- 如何求特征值：令特征多项式 $|\\lambda \\boldsymbol{E} - \\boldsymbol{A}| = 0$\n- 如何求特征向量：求 $(\\lambda \\boldsymbol{E} - \\boldsymbol{A})\\boldsymbol{x} = \\boldsymbol{0}$ 的基础解系\n- [如何求基础解系](https://blog.csdn.net/Daniel_tanxz/article/details/89132181)：初等行变换成行最简型\n\n$$\n\\begin{pmatrix}\n\\boldsymbol{E}_r & \\boldsymbol{F} \\\\\n0 & 0\n\\end{pmatrix}\n$$\n\n解矩阵为\n\n$$\n\\begin{pmatrix}\n- \\boldsymbol{F} \\\\\n\\boldsymbol{E}_{n-r}\n\\end{pmatrix}\n$$\n\n正定矩阵充要条件：其所有特征值都为正。或者所有顺序主子式为正。\n\n正交矩阵：$AA^T = E$。正交矩阵的各行是单位向量且两两正交，各列是单位向量且两两正交。\n\n矩阵的奇异值分解是把一个矩阵分解成三个矩阵相乘：\n\n$$\nA = U \\Sigma V^T\n$$\n\n$A$ 是实矩阵的情况下，$U$ 和 $V^T$ 都是正交矩阵，$\\Sigma$ 是与 $A$ 形状相同的对角矩阵，其对角线上的元素叫奇异值，呈非负且按降序排列。\n\n如何分解：$U$ 的每一列是 $AA^T$ 的特征向量，$V$ 的每一列是 $A^TA$ 的特征向量，$\\Sigma$ 对角线上每一个元素是 $A^TA$ 或 $AA^T$ 的特征值开根号，注意保证各奇异值和特征向量对应。\n\n### 高数知识\n\n复合函数求导法则：把内层的中介写一遍，连乘\n\nSigmoid 函数（对数几率函数）：$S(x) = \\dfrac{1}{1+e^{-x}}$，该函数图像长得和 $\\dfrac{1}{\\pi} \\arctan x + \\dfrac{1}{2}$ 差不多\n\n$$\n\\dfrac{1}{1+a^{-x}} + \\dfrac{1}{1+a^{x}} = 1\n$$\n\n$n$ 元函数 $f(\\boldsymbol{x})$：自变量有 $n$ 个，记作一个 $n$ 维列向量 $\\boldsymbol{x}$。\n\n梯度（一阶导数） $\\nabla f(\\boldsymbol{x}) = \\dfrac{\\partial f(\\boldsymbol{x})}{\\partial \\boldsymbol{x}}$\n\n梯度是一个 $n$ 维向量，各个分量是原函数在其各个自变量分量上的偏导函数 $\\dfrac{\\partial f(\\boldsymbol{x})}{\\partial {x_i}}$，前提是各个偏导数都存在。如：\n\n$$\n\\nabla (5x_1+4x_1x_2+x_3) = (5+4x_2,4x_1,1)\n$$\n\n海森矩阵（二阶导数） $\\nabla^2 f(\\boldsymbol{x}) = \\dfrac{\\partial^2 f(\\boldsymbol{x})}{\\partial \\boldsymbol{x}{\\partial \\boldsymbol{x}}^T}$：海森方阵的每一个元素是原函数的二阶偏导数，前提是各个二阶偏导数都存在。如：\n\n$$\n\\nabla^2(2x_1 + x_1x_2) =\n\\begin{pmatrix}\n0 & 1 \\\\\n1 & 0\n\\end{pmatrix}\n$$\n\n凸函数：这里的凸函数指下凸函数。\n\n凸函数任意两点的连线一定在函数图像上面，或与函数图像重合。如果一定在上面，我们称它为严格的凸函数。\n\n一元严格凸函数的例子：$y = x^2$\n\n一元非严格凸函数的例子： $y = x + 1$\n\n如何判定一元函数是凸函数/严格凸函数：其二阶导数在区间上恒大于等于/大于零\n\n如何判定**多元函数**是凸函数/**严格凸函数**：其**海森矩阵**在区间上是半正定/**正定**的\n\n矩阵微分公式：\n\n- $\\frac{\\partial \\boldsymbol{a}^T \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\frac{\\partial \\boldsymbol{x}^T \\boldsymbol{a}}{\\partial \\boldsymbol{x}} = \\boldsymbol{a}$ （南瓜书）\n\n- $\\frac{\\partial \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}^T} = \\boldsymbol{A}$ （南瓜书）\n\n- $\\frac{\\partial \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\boldsymbol{A}^T$ （https://en.wikipedia.org/wiki/Matrix_calculus 的**分母布局**）\n\n- $\\frac{\\partial \\boldsymbol{x}^T \\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} = (\\boldsymbol{A} + \\boldsymbol{A}^T) \\boldsymbol{x}$（南瓜书）\n\n### 一元线性回归\n\n目的：找出与平面直角坐标系上的 $m$ 个散点 $(x_i,y_i)$ 最接近的直线 $\\hat{y} = wx+b$\n\n找出使残差平方和最小的直线的斜率、截距，即求：\n\n$$\n(w^*,b^*) = \\underset{(w,b)}{\\mathrm{arg\\ min}} \\sum_{i=1}^{m} (y_i-wx_i-b)^2\n$$\n\n<img src=\"/blog/images/residual-error.webp\">\n\n观测值（已知的，用于训练模型的样本 $y$ 值）：$y_i$\n\n估计值（给定一个 $x_i$ 用模型 $\\hat{y} = wx+b$ 算出来的值）：$\\hat{y_i}$\n\n残差：$y_i-\\hat{y_i} = y_i-wx_i-b$\n\n这个公式是高中数学的内容，可以写成向量形式：\n\n$$\n\\begin{aligned}\nw &= \\frac{\\boldsymbol{x}^T\\boldsymbol{y} - m\\bar{x}\\bar{y}} {\\boldsymbol{x}^T\\boldsymbol{x}-m\\bar{x}^2}\n= \\frac{\\boldsymbol{x}_d^T \\boldsymbol{y}_d}{\\boldsymbol{x}_d^T \\boldsymbol{x}_d} \\\\\nb &= \\bar{y} - w\\bar{x}\n\\end{aligned}\n$$\n\n$\\boldsymbol{x}_d$ 的各个分量是 $x_i - \\bar{x}$\n\n公式是怎么来的：\n\n1. 残差平方和是关于 $w$ 和 $b$ 的二元函数，其海森矩阵为：\n\n$$\n\\begin{pmatrix}\n2 \\sum_{i=1}^m x_i^2 & 2 \\sum_{i=1}^m x_i \\\\\n2 \\sum_{i=1}^m x_i & 2m\n\\end{pmatrix}\n$$\n\n只要有一个非零的 $x$ 值，它的一阶主子式就为正；由柯西不等式的一般形式，只要有不相等的 $x$，它的二阶主子式就为正。做一元线性回归至少需要三个不同的点，如果所有 $x$ 值相同，或者都为零，就不用这个公式算了。只要用这个公式算，它的海森矩阵就是正定的，它是严格凸函数。\n\n2. 令梯度等于零向量，改写成用矩阵求解线性方程组的形式\n3. 两边左乘系数矩阵的逆矩阵，得到 $(w;b)$\n4. 把 $w$ 的分子分母同时除以 $m$\n5. 目标直线必定过均值点\n\n### 多元线性回归\n\n目的：找出 $n+1$ 维欧式空间里与 $m$ 个散点最接近的超平面：\n\n$f(\\boldsymbol{x}) = \\boldsymbol{w}^T \\boldsymbol{x} + b$ 的各项参数\n\n> 注意：这里的所有自变量（元）是一个 $n$ 维向量 $\\boldsymbol{x}$。$\\boldsymbol{w}$ 是各个一次项的系数。函数的解析式是个一次多项式\n\n“最接近”也可表示为 $f(\\boldsymbol{x}_i) \\simeq y_i$，即用模型算出来的值几乎等于观测值。\n\n“行向量乘列向量加标量”的形式，把标量 $b$ 拆分成 $b$ 和 $1$，写到前面那两个向量的尾巴上。记 $\\hat{\\boldsymbol{w}} = (\\boldsymbol{w};b)$，$\\hat{\\boldsymbol{x}} = (\\boldsymbol{x};1)$，则：\n\n$$\nf(\\boldsymbol{x}) = \\hat{\\boldsymbol{w}}^T \\hat{\\boldsymbol{x}} = \\hat{\\boldsymbol{x}}^T \\hat{\\boldsymbol{w}}\n$$\n\n公式：\n\n当 $\\boldsymbol{X}^T\\boldsymbol{X}$ 为正定矩阵时，$\\hat{\\boldsymbol{w}}$ 的全局最优解为：\n\n$$\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n$$\n\n此时的模型为：\n\n$$\nf(\\hat{\\boldsymbol{x_i}}) = \\hat{\\boldsymbol{x}}_i^T\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n$$\n\n公式是怎么来的：\n\n找出使残差平方和 $E_{\\hat{\\boldsymbol{w}}}$ 最小的各项的系数与常数项向量 $\\hat{\\boldsymbol{w}}^*$，即求：\n\n$$\n\\underset{\\hat{\\boldsymbol{w}}}{\\mathrm{arg\\ min}}\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2\n$$\n\n平方求和可改写成向量相乘，把括号里的向下影分身：\n\n$$\nE_{\\hat{\\boldsymbol{w}}} =\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2 =\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})^T\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})\n$$\n\n> 这里影分身后的 $\\boldsymbol{y}$ 和 $\\boldsymbol{X}$ 都有 $m$ 行，$\\boldsymbol{X}$ 的每一行为 $\\hat{\\boldsymbol{x}}_i^T$\n\n把 $E_{\\hat{\\boldsymbol{w}}}$ 展开，再对 $\\hat{\\boldsymbol{w}}$ 求导得：\n\n$$\n\\nabla E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T (\\boldsymbol{X} \\hat{\\boldsymbol{w}} - \\boldsymbol{y})\n$$\n\n$E_{\\hat{\\boldsymbol{w}}}$ 的海森矩阵是一阶导数再对 $\\hat{\\boldsymbol{w}}^T$ 求一次导：\n\n$$\n\\nabla^2 E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T \\boldsymbol{X}\n$$\n\n当海森矩阵为正定矩阵时，$E_{\\hat{\\boldsymbol{w}}}$ 为严格凸函数。令梯度等于零向量，求得的全局最优解为当 $E_{\\hat{\\boldsymbol{w}}}$ 取最小值时的 $\\hat{\\boldsymbol{w}}$\n\n### 梯度下降法\n\n梯度下降法是用来逼近函数取极小值时的点的。\n\n以一元下凸函数 f(x) 为例，在右侧任意取一个 x 值，函数图像在该点处下降最快的方向是该点的导数方向，且导数为正，此时需要向左逼近，把 x 值变小；如果一开始在左侧取，则导数为负，需要向右逼近，把 x 值变大。\n\n我们可以规定新取的 x 值等于上一步的 x 值减去一个与它的导数符号相同的数，这样就可以保证新的取值是一定沿着上一步相对于极小值的下降方向。\n\n方向确定了，但是可能会移动过头。由于越平缓的地方导数绝对值是越小的，为了使移动的幅度与平缓程度相称，于是我们可以规定减去的那个数等于导数乘上另一个固定的正实数。\n\n用梯度下降法求方程的解，即求一个 x 使得函数 f(x) = 0 。我们为了判断何时问题已经解决地足够好了，可以定义一个损失函数，它是用来量化离解决一个问题还有多长距离的量。\n\n最终目的是让求的 x 值使得 f(x) 的值更接近 0，为了量化更接近零的程度，我们可以用原函数的平方作为损失函数。于是问题转化成了用梯度下降法求损失函数的极小值点。\n\n在编写程序的时候，计算一个点的导数，我们可以采用计算与它相邻极近两点的割线斜率。\n\n## 十进制与 K 进制小数互转\n\nK 转 10：每一位分别乘上 K 的次方，再相加。\n\n### 2 转 10\n\n**有限小数**\n\n$11.1011\\mathrm{B} = 3.6875$\n\n| 项              | 值       |\n| --------------- | -------- |\n| $1\\times2^{1}$  | $2$      |\n| $1\\times2^{0}$  | $1$      |\n| $1\\times2^{-1}$ | $0.5$    |\n| $0\\times2^{-2}$ | $0$      |\n| $1\\times2^{-3}$ | $0.125$  |\n| $1\\times2^{-4}$ | $0.0625$ |\n| **总和**        | $3.6875$ |\n\n**无限循环小数**\n\n$1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} = 1.7$\n\n可以转换成分数计算：\n\n$$\n\\begin{aligned}\n1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} & = x \\\\\n11.\\dot{0} 11 \\dot{0} ... \\mathrm{B} & = 2x \\\\\n110110. \\dot{0} 11 \\dot{0} ... \\mathrm{B} & = 32x \\\\\n两式相减，110011\\mathrm{B} & = 30x \\\\\nx & = \\frac{110011\\mathrm{B}}{30} = \\frac{51}{30} = 1.7\n\\end{aligned}\n$$\n\n10 转 K：\n\n整数部分仍然除 K 取余，小数部分乘 K 取整，然后相加。\n\n### 10 转 2\n\n$0.7  = 0.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B}$\n\n| 小数部分乘 2         | 取整数部分 |\n| -------------------- | ---------- |\n| $0.7 \\times 2 = 1.4$ | $1$        |\n| $0.4 \\times 2 = 0.8$ | $0$        |\n| $0.8 \\times 2 = 1.6$ | $1$        |\n| $0.6 \\times 2 = 1.2$ | $1$        |\n| $0.2 \\times 2 = 0.4$ | $0$        |\n| ...                  | ...        |\n\n### 10 转 16\n\n$0.7  = 0.\\mathrm{B} \\dot{3} ... _{16}$\n\n| 小数部分乘 16          | 取整数部分   |\n| ---------------------- | ------------ |\n| $0.7 \\times 16 = 11.2$ | $\\mathrm{B}$ |\n| $0.2 \\times 16 = 3.2$  | $3$          |\n| ...                    | ...          |\n\n## 离散数学\n\n基础不牢。虽然之前及格了，但是什么都没学会。\n\n集合 A 的所有子集组成的集合，是集合 A 的幂集。{1,2}的幂集是 `{{},{1},{2},{1,2}}`。\n\n空集的幂集是 `{{}}` ，基数是 1。A 的幂集的基数 > A 的基数。\n\n元素都是集合的集合，称为集族。\n\n### 关系\n\n集合：所有 $(10,60)$ 岁的人是一个集合 $A$，所有 $(30,80)$ 岁的人是一个集合 $B$。当然有人同时属于这两个群体，也有同时不属于的。\n\n笛卡尔积：把 $A$ 放到左边，$B$ 放到右边。把左边的所有人和右边的所有人多对多配对，用一根根线连起来。这些**所有线的集合**叫笛卡尔积 $A \\times B$。当然也有自己连自己的，以及连了两次、左右互换的。注意，这些线是有方向的，是从左往右连，即 $A \\times B \\not\\equiv B \\times A$\n\n关系：从这些线里任意取几根，或者全取，或者一根都不取。**取出来的这几根线**叫关系，记作 $\\rho$。即关系是笛卡尔积的子集。$\\rho \\subseteq A \\times B$。$\\rho$ 是从 $A$ 到 $B$ 的一个关系，也是有顺序的。如果取出来的这几根线左边全是老师，线右边全是对应老师的学生，则 $\\rho$ 是从 $A$ 到 $B$ 的师生关系。张三在左边的 $A$ 里面，代号是 $a$，李四在右边的 $B$ 里面，代号是 $b$，连接它们的线记作 $(a,b)$。如果这条线**在** $\\rho$ 里面，则记作 $a \\rho b$。即张三对李四**有**师生关系 $\\rho$，张三是李四的老师。不止他们两个人在师生关系 $\\rho$ 里面。张三对李四的这根线，**在取出来的线集 $\\rho$ 里面**。这些线的集合才叫关系，而 $(a,b)$ 不叫关系，再起码也得 $\\{(a,b)\\}$。即 $a \\rho b$ 的意思是 $(a,b) \\in \\rho$， $(a,b)$ 这根线在 $\\rho$ 这个线集里面。\n\n定义域和值域：现在有一个从 $A$ 到 $B$ 的师生关系 $\\rho$，就是从 $A$ 到 $B$ 有一些线。被师生关系牵住的左边的所有人（老师），称为**这个**师生关系的定义域。右边的所有人（学生），称为**这个**师生关系的值域。这个师生关系是建立在 $A$ -> $B$ 这两个群体**之上**的。\n\n逆关系：从 $B$ 到 $A$ 的生师关系。记作 $\\tilde{\\rho}$。是 $A$ 的各个序偶反过来写。\n\n集合 $A$ 上的关系：这两边可以放同一个集合，即从 $A$ 到 $A$ 的关系 $\\rho$，直接叫集合 $A$ 上的关系。即**单个群体内部之间的线，包括自己连自己**。\n\n前面说了，关系 $\\subseteq$ 笛卡尔积。对于 $A$ 和 $A$ 的笛卡尔积，两边交换位置是相等的，可以记作 $A^2$。集合 $A$ 上的关系 $\\rho \\subseteq A^2$。注意在此时，不一定有 $\\rho = \\tilde{\\rho}$。如果 $(你, 她)\\in \\rho$ 且 $\\rho$ 是暗恋 ，不能保证 $(你, 她)\\in \\tilde{\\rho}$。[**你对别人有暗恋关系，不能保证你对别人有暗恋关系的逆**](https://music.163.com/#/song?id=430026359)。\n\n<img src=\"/blog/images/关系-0.webp\">\n\n普遍关系 $U_A$：所有人都连上线了，包括和自己。即这个关系**等于笛卡尔积** $A^2$。大家\n\n恒等关系 $I_A$：所有人都和自己连上线了，但是互相之间没有线。我\n\n具有特定性质的关系：\n\n- 自反的：对于所有 a，必须都和自己有关系。所有人都和自己连上线了，不一定和对方连不连。关系矩阵主对角线上都是 1。对于集合 A，如果它上的关系 rho 是自反的，那么 rho 里的序偶里一定有 A 的所有元素各个复读一遍\n- 反自反的：对于所有 a，都不能和自己有关系。所有人都不和自己连线，不一定和对方连不连。没有复读的\n- 对称的：对于所有 ab，如果 a 对 b 有关系，b 一定对 a 有关系。所有连线都是双向的，或者自环。关系矩阵关于主对角线对称。对于所有的 ab，如果有(a,b)，那么一定有(b,a)\n- 反对称的：对于所有 ab，如果 a 对 b 有关系，且 b 对 a 有关系，那么 ab 一定相等。不存在双向的连线（但可以自环）。关系矩阵关于主对角线反对称，对应对称位置的值相反。对于不等的 ab，如果有(a,b)，那么一定没有(b,a)\n- 恒等关系既是对称的，也是反对称的。因为它是集合里所有元素的自环。\n- 可传递的：对于所有 abc，如果 a 对 b 有关系，b 对 c 有关系，那么 a 和 c 必须有关系。对于任意一条长度为 2 的连续（同向）路径，它的起点必须可以直接通往终点。\n\n<img src=\"/blog/images/关系-1.webp\">\n\n- 在非空集合上，一个自反关系一定不是反自反的，一个对称关系可能也是反对称的\n- 在空集上，空关系同时是自反、反自反、对称、反对称、可传递的。由于没有元素，条件“空真”地成立\n\n- 等价关系是自反、对称且可传递的关系。\n- 偏序关系是自反、反对称和可传递的关系。\n\n<img src=\"/blog/images/关系-2.webp\">\n\n对实数集来说：\n\n- 小于等于关系是自反的。对于所有 a，有 a <= a\n- 小于等于关系是非对称的。由 1 <= 2，但 2 不 <= 1\n- 小于等于关系是反对称的。如果 a <= b，且 b <= a，那么 a 一定等于 b\n- 小于等于关系是可传递的。所以实数集上的“小于等于”关系是偏序。偏序用符号 ≤ 表示。\n\n闭包是指，对一个不一定具有某个性质的，集合 A 上的关系 rho，通过并的操作使它具有某个性质。在原来的线里多加几根线\n\n- 自反闭包 r：rho 并上 A 的恒等关系\n- 对称闭包 s：rho 并上 rho 的逆关系\n- 传递闭包 t：rho 的次方从 1 连并到 A 的基数。次方是同一个关系多次复合，复合是找从起点集合到终点集合的连续路。关系的复合是可结合的\n\nr(rho)、s(rho)、t(rho) 分别是集合 A 上包含 rho 的最小自反/对称/可传递的关系。\n\n对于一个等价关系，它的某个元素的等价类，从关系图上看，就是这个元素一坨所在的所有元素。等价分划就是把一坨一坨的分开。\n\n{1,2,3} 的所有分划是：`{{1,2,3}}、{{1},{2,3}}、{{1,2},{3}}、{{1,3},2}、{{1},{2},{3}}`\n\nA 的平凡分划就是 {A}，是它上普遍关系导出的等价分划，是最粗的分划。最细的分划就是切成臊子，是恒等关系导出的等价分划。\n\n### 函数\n\n函数是从集合 A（起点）到集合 B（终点）的一种特殊的关系。任取起点里的一个元素（像源），它保证往终点的某个像引出了有且只有一条线。\n\n从 A 到 B 的：\n\n- 关系，线可以有一对多的；函数，线不能有一对多的\n- 关系，定义域是 A 的子集；函数，定义域为 A\n\n函数的定义域是 A（因为是任取），值域是 B 的子集（因为可能引到同一个终点元素身上），值域包是 B。\n\n如果 A 和 B 是可数集，那么值域的元素个数可能等于定义域（双射），可能小于定义域（极端的都引到同一个终点元素身上），不可能大于定义域。\n\n内射的函数是，对于一个函数，任取起点里的两个不等元素，它们两个不会引到终点里的同一个元素上（没有多对一，再加上函数的定义保证它没有一对多，所以都是**一对一**）。即同一个像源只映射同一个像。A 基数 == 值域元素个数 <= B 基数。当内射的值域取满值域包时，内射变为双射。\n\n满射就是，**值域取满值域包**。终点的所有元素都被起点连了。A 基数大于等于 B 基数，**可能有多对一的情况**。\n\n内射且满射，称为双射。双射是一一对应的（内射保证），像和像源的个数相同，且等于 B 的基数（满射保证取满值域包）\n\n<img src=\"/blog/images/函数-1.webp\">\n\n幂等函数是指，对一个集合 A 上的函数 f，与自身复合任意次后（>=2 的整数）仍为 f\n\nA 与 B 等势（A~B） <=> 存在从 A 到 B 的双射函数。实数集的所有开区间的子集都和实数集等势，我们都可以画出一个看起来像正切函数的一支的图像，把定义域映射到 R\n\n- 可计数集\n  - 有限集：元素个数为某个正整数 m，基数是 m。或为空集，基数是 0。如 {1,2,3}\n  - 可数集（无限的，且可以排成无穷序列的形式）：与自然数集 N={0,1,2,3,...} 等势的集合，基数是阿列夫零。如 {2,4,6,8,...} 是 N 的各个元素两倍+2 的双射\n    - 可数集与[可数集|有限集]的并集是可数集，[有限个|可数个]可数集的并集是可数集\n    - 有理数集 Q 是可数集，任一个有理数都可以写成分数的形式，分子和分母所有可能的取值都是可数的。任一个有理数都可以写成有限小数或无限循环小数的形式\n- 不可数集（无限的）\n  - 无理数集是不可数的。无理数是无限不循环小数\n\n对于一个集族如 S = {A,B,C,D}，如果 A 与 B 的基数都是阿列夫零，C 与 D 的基数都是阿列夫一，那么 S 上存在一个等价关系 {(A,A),(A,B),(B,B),(C,D),(C,C),(D,D)}，它的等价分划是`{{A,B},{C,D}}`，A 的等价类是 {A,B}，A 和 B 同基（基数相同）。\n\n### 二元运算与代数系统\n\nA = {1,2,3}\n\nA^2 = {(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)}\n\nA^3 = {(1,1,1),...}\n\n函数 A^2 -> A：是 A 上的一个二元运算。n 元运算是把 A^n 映射到 A。\n\n关系（或者说函数） { ((1,1),2), ((1,2),3)} 不是 A 上的二元运算，因为定义域不等于 A^2，A 上的元素不是都和它自己以及和其他任一个元素起关系了。A 上的二元运算是从 A 的笛卡尔积向 A 的映射，它的定义域里一定有 A 里所有元素的不同排列方式的序偶。\n\n为什么除不是实数集上的二元运算，因为 (n,0) 的结果在 R 里没有对应的像，所以 (n,0) 不在定义域里，而运算要求定义域里一定要有值域包元素的所有序偶。\n\n减是实数集上的二元运算，但不是自然数集上的二元运算，因为 (1,4) 如果有像，那么 -3 是不在自然数集里的。减在实数集上封闭，在自然数集上不封闭。\n\n封闭：对于 A 上的二元运算 ◦，S 是 A 的子集，如果对于所有 S^2 里的元素，在运算之后的结果在 S 里面，那么 ◦ 在 S 上是封闭的。\n\n对于二元运算\\*：A^2 -> A：\n\n- 单位元与元素运算，结果为原元素，e \\* a = a\n- 零元与元素运算，结果为零元， z \\* a = z\n- 幂等元和他自身运算的结果不变。二元运算的单位元和零元都是幂等元\n- 左单位元和 a 运算，a 不变。a 和右零元运算，结果为右零元\n- 不可能同时有不等值的[左|右][单位元|零元]\n- a 与其右逆元运算，结果是 e\n- 当 A 的基数大于 1 时，且存在单位元和零元时，那么它们不会是同一个元素\n\n实数集上的乘法运算，单位元是 1，零元是 0。对于非零元素 a，它的逆元是其倒数\n\n实数集上的加法运算，单位元是 0，没有零元。对于元素 a，它的逆元是其相反数\n\n实数集上的减法运算，右单位元是 0，没有左单位元，没有零元。逆元是根据单位元定义的，所以没有逆元\n\n对于一个元素不多的二元运算，我们可以画出运算表，它的行标为左元素，列标为右元素，内容为运算结果。可以通过运算表里元素排列的形状判断某一个元素是不是单位元或零元。如图所示：\n\n<img src=\"/blog/images/运算-1.webp\">\n\n{0,1}上的：\n\n<img src=\"/blog/images/运算-2.webp\">\n\n- 且运算，单位元是 1，零元是 0。且 1 不变，且 0 短路。\n- 或运算，单位元是 0，零元是 1。或 0 不变，或 1 短路。\n- 蕴含运算，左单位元是 1，右零元是 1\n- 等值运算，单位元是 1\n\n<S;o1,o2...> 是代数系统。S 是非空集，称为代数系统的域，on 是一个或多个定义在 S 上的运算（可以不同阶）。\n\n代数系统的基数是 S 的基数，若 S 是有限集，则代数系统是有限代数系统。\n\n整环：对于一个代数系统<J;+,\\*>，J 是非空集，+和\\*是其上的二元运算，如果同时满足六个性质，则该代数系统为整环：\n\n- \\+ 和 \\* 都满足交换律\n- \\+ 和 \\* 都满足结合律\n- \\* 对于 \\+ 满足分配律：a\\*(b+c) = a\\*b+a\\*c\n- \\+ 和 \\* 都有单位元\n- 任取元素 a 对 + 可逆，a+a 的逆元= “+的单位元”\n- 对\\*的消去律：任取非“+的单位元”的 a，由 a\\*b = a\\*c，可得 b=c\n\n对 <{0,1};或,且> 来说：\n\n- 两个运算的交换律、结合律、分配律都满足\n- 或的单位元是 0，且的单位元是 1\n- 没有对或的可逆性：对 1 来说，不存在它的逆元可以通过与它运算来获得或的单位元 0，所以或是不可逆的。所以该代数系统不是整环\n- 有对且的消去律：由：1 且 b = 1 且 c，可得出 b=c，所以满足对且的消去律。\n\n### 群\n\n对于代数系统<S;\\*>，S 是非空集，\\*是 S 上的二元运算 S^2 -> S\n\n- 如果 \\* 是可结合的，则该代数系统为半群\n- 若半群有单位元，则该半群为独异点\n- 若独异点的域里每个元素都有逆元，则该独异点为群\n- 若群的运算\\*是可交换的，则该群为阿贝尔群\n\n### 命题逻辑\n\n命题：参考洪帆主编的《离散数学基础（第三版）》，并加上了自己的狭隘理解，同时满足以下三条：\n\n1. 它是一个陈述句\n2. 它有一个自带的**属性**，叫**真值**，取 $0$ 或 $1$\n3. 它的真值可以**被判断**（没有说被谁判断、在什么时间被判断）\n\n> 2x - 3 = 0 <br/>\n> 这句话是假的\n\n我们**永远**没法判断它们的真值是 $0$ 还是 $1$（如果前者是一个陈述句而不是方程，我们不知道 x 是什么东西的。后者……）。所以它们**不是命题**。\n\n> 2024 年 1 月 16 号体彩排列三的开奖号码是 703\n\n它是一个命题。它的真值可以被判断，因为这件事已经发生了，但需要我们[查询资料](https://www.zhcw.com/kjxx/pl3/)。\n\n> 2024 年 1 月 17 号体彩排列三的开奖号码是 555<br> > [太阳系外有宇宙人](https://music.163.com/song?id=1883951953)\n\n它们都是命题。它们的真值可以被判断，但不是现在。\n\n命题连结词，一元的只有：否定 $\\neg$，非……。下面都是二元的。\n\n```py\ndef logic(P: bool, Q: bool) -> bool:\n```\n\n现在有一份鱼和一份熊掌。作为前件和后件。如果我们吃了，件的真值记为 $1$，否则记为 $0$；如果我们满足了（吃好了），复合命题的真值记为 $1$，否则记为 $0$\n\n合取 $\\wedge$ ……且……：全吃了，我才满足\n\n```py\nreturn P and Q\n```\n\n析取 $\\vee$ ……或……（可兼的或）：只要有吃的，我就满足\n\n```py\nreturn P or Q\n```\n\n不可兼的叫**异或**。区别是：异或的鱼和熊掌只能吃一个，同时吃会生病。\n\n```py\nreturn P ^ Q\n```\n\n等值 $\\leftrightarrow$ ……当且仅当……：是异或的对立面：同或、完美主义：要么都吃，要么都不吃，只吃一个我就难受。\n\n```py\nreturn P == Q\n```\n\n蕴含 $\\rightarrow$ ……若则……：\n\n现在有【生】和【义】，作为前件和后件。如果我们保留了，件的真值记为 $1$，否则记为 $0$；如果我们满足了（垂名了），复合命题的真值记为 $1$，否则记为 $0$\n\n注意：\n\n- 在蕴含的前件为假的情况下，复合命题为真。\n- 在蕴含的前件为真的情况下，复合命题的真值为后件的真值。\n\n如果我们[把【生】舍了](https://music.163.com/song?id=2058806391)，那还管它义不义，名字直接刻碑上了。或者这样记：如果一个人的[前提都搞错了](https://music.163.com/song?id=4237850)，那就没有必要和他讨论了，你说得都对。\n\n```py\nreturn True if not P else Q\nreturn (not P) or Q\nreturn not (P and (not Q))\n```\n\n一个文字游戏：除非 P，否则不 Q\n\n```py\nif P:\n    return Q\nelse:\n    return not Q\n```\n\n就是当且仅当\n\n```py\nreturn P == Q\n```\n","slug":"数学碎片","published":1,"updated":"2025-09-14T14:51:26.883Z","__permalink":"math.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnm000d5ws6a0hf7uc0","content":"<p>大部分可以再认，少部分可以再现，更少部分可以迁移。</p>\n<span id=\"more\"></span>\n<h2 id=\"推断的有效性和可靠性\">推断的有效性和可靠性</h2>\n<p>推断是前提的集合加上结论。前提最少有一句，结论只有一句。</p>\n<p>一个推断是有效的：</p>\n<ul>\n<li>&lt;=&gt; 不存在当所有前提为真时，结论为假的情况</li>\n<li> &lt;=&gt; 对所有前提且的结果 =&gt; 结论</li>\n<li> &lt;=&gt; （对所有前提且的结果 -&gt; 结论）为重言式</li>\n</ul>\n<ol type=\"1\">\n<li>小明是人（P）</li>\n<li>小明不是人（非 P）</li>\n<li>因此，张三会飞（Q）</li>\n</ol>\n<p>评估有效性需要把所有真值指派的情况列出来：</p>\n<table>\n<thead>\n<tr>\n<th>P</th>\n<th> 非 P</th>\n<th>Q</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>1</td>\n<td> 未知</td>\n</tr>\n<tr>\n<td> 1</td>\n<td>0</td>\n<td> 未知</td>\n</tr>\n</tbody>\n</table>\n<p>列出来后发现：不存在当所有前提为真时，结论为假的情况。所以这个推断是有效的。从矛盾的前提可以推出任何结论。</p>\n<p>一个推断是可靠的 &lt;=&gt; 论证是有效的 且 它的所有前提实际为真</p>\n<p>假言三段论是类似于这样的推断：</p>\n<ol type=\"1\">\n<li>A -&gt; B</li>\n<li>B -&gt; C</li>\n<li> 因此，A -&gt; C</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>A</th>\n<th>B</th>\n<th>C</th>\n<th>A→B（前提 1）</th>\n<th>B→C（前提 2）</th>\n<th>A→C（结论）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>把真值表画出来之后，可以看到：当前提均为真时，结论一定为真。说明这个推断是有效的</p>\n<p>可靠性是针对一个具体论证实例的。当 ABC\n取具体的值的时候（一次真值指派），如果还能保证两个前提都是为真的，那么推断是可靠的</p>\n<p>对于这个推断来说：</p>\n<ol type=\"1\">\n<li>A -&gt; B（如果小明是湖北省出生的人，那么小明会飞）</li>\n<li>B -&gt; C（如果小明会飞，那么小明的身份证以 42 开头）</li>\n<li>因此，A -&gt; C（因此，如果小明是湖北省出生的人，那么小明的身份证以\n42 开头）</li>\n</ol>\n<p>现在我们知道的信息是：小明确实是湖北省出生的人，身份证以 42\n开头，也不会飞。那么 A=1，B=0，C=1，对应真值表的倒数第三行</p>\n<p>首先它是有效的。其次它是不可靠的（即使它的结论为真），因为第一个前提是假的，它没有保证所有前提都为真</p>\n<p>对于这个推断来说：</p>\n<ol type=\"1\">\n<li>A -&gt; B（如果小明是湖南人，那么小明是网络小说里的人物）</li>\n<li>B -&gt; C（如果小明是网络小说里的人物，那么小明会飞）</li>\n<li>因此，A -&gt; C（因此，如果小明是湖南人，那么小明会飞）</li>\n</ol>\n<p>现在我们知道的信息是：小明确实是网络小说里的湖南人，会飞。那么\nA=1，B=1，C=1</p>\n<p>首先它是有效的。其次它是可靠的，因为他的所有前提都是真的（即使第一个前提看起来有点问题），结论也是真的。【AI\n判定】</p>\n<p>【AI\n生成】第一个前提和结论都违背了常识，但在逻辑中，这并不影响推断的有效性或可靠性。逻辑只关心真值，而这里\nA→B 的真值由小明的具体属性保证（A 真且 B 真）。A→B\n的 “问题” 在于它的语义内容（内容上不现实），而非逻辑真值。逻辑只处理 “如果\nA 则 B” 的真假，不处理 “为什么 A 会导致 B”。</p>\n<h2 id=\"命题逻辑\">命题逻辑</h2>\n<p>在命题逻辑中，命题用大写字母表示，它的真值只能取 0 或\n1，所以也叫二值逻辑。具有确定真值的命题叫命题常元，真值不确定的命题叫命题变元。</p>\n<p>运算符（命题连接词）优先级：非、且、或、蕴含、等值</p>\n<p>形如 A -&gt; B\n的，叫条件命题，或者假言命题，它陈述的是某一事物情况是另一件事物情况的条件。</p>\n<ul>\n<li>充分条件：如果 A 那么 B。A -&gt; B\n为蕴含。当蕴含的前件为假时，复合命题为真；当蕴含的前件为真时，复合命题为后件的真值；</li>\n<li>充要条件：A &lt;-&gt; B，当 A 和 B\n真值一致时，复合命题为真，否则为假</li>\n</ul>\n<p>命题公式的递归定义：</p>\n<ol type=\"1\">\n<li>0、1 是命题公式</li>\n<li>命题变元是命题公式</li>\n<li>如果 A 是命题公式，那么！A 是命题公式</li>\n<li>如果 A 和 B 是命题公式，那么 (A and B)、(A or B)、(A -&gt; B)、(A\n&lt;-&gt; B) 是命题公式</li>\n<li>只有有限次利用上述四点所产生的符号串才是命题公式</li>\n</ol>\n<p>真值表是对于一个命题公式，把它的命题变元的真值指派的所有情况列出来，再计算结果。</p>\n<ul>\n<li>重言式 &lt;=&gt; 1（对它的所有真值指派都为 1）如 A or 1</li>\n<li> 矛盾式 &lt;=&gt; 0（对它的所有真值指派都为 0）如 A and !A</li>\n</ul>\n<p>如果对命题公式 F 的真值指派中，存在一个是取值为真的，那么 F\n称为可满足的公式。重言式 =&gt; 可满足的公式</p>\n<p>命题公式的代换实例是指，对一个命题公式，把它的一个命题变元 A\n用另一个公式 B 代换，且它里面的所有 A 都被 B 代换了。</p>\n<p>代入规则：重言式的代换实例仍然是重言式。因为重言式 &lt;=&gt;\n1，不受被代换的命题变元取值影响。</p>\n<p>子公式是指一个命题公式的一部分（连续的几个符号），且它仍然是公式。</p>\n<p>置换规则：对一个命题公式里 A 的子公式 B，如果用与该子公式等值的公式 C\n去替代子公式 B，那么替换后得到的 D 与 A 等值。</p>\n<p>对偶：对一个命题公式，把它的所有且或变号，01\n互变，得到的新公式是原公式的对偶。</p>\n<h3 id=\"命题公式的等值关系和蕴含关系\">命题公式的等值关系和蕴含关系</h3>\n<p>等值关系可以双向推，蕴含关系只能从左向右推。</p>\n<ul>\n<li>等值演算 (&lt;=&gt;) 像是告诉你两个数学表达式（如 (a+b)² 和 a² + 2ab\n+ b²）在数值上总是相等的，你可以互相替换。</li>\n<li>蕴含关系 (=&gt;) 像是告诉你一条推理规则（如 “如果 a &gt; b 且 b &gt;\nc，那么 a &gt;\nc”）。它定义了从已知事实推导出新事实的合法途径。反过来不一定成立</li>\n</ul>\n<p>&lt;-&gt; 是命题连接词，经 &lt;-&gt; 连接后的是命题公式。而 &lt;=&gt;\n是命题公式之间的关系符号，表示两个命题公式之间的等值关系。</p>\n<p>A &lt;=&gt; B 充要条件：</p>\n<ul>\n<li>A &lt;-&gt; B 是永真式（&lt;=&gt; 的定义）</li>\n<li>在任一组真值指派后，这两个公式的值一致（&lt;-&gt; 的定义）</li>\n</ul>\n<hr>\n<p>=&gt; 表示命题公式间的蕴含关系。</p>\n<p>A =&gt; B 充要条件：</p>\n<ul>\n<li>A -&gt; B 是永真式（=&gt; 的定义）</li>\n<li>在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n<ul>\n<li>必要性：如果 A -&gt; B 是重言式，意味 A 和 B 的取值只可能在第\n1、2、4 行里。所以说，在对他们进行的所有真值指派里，当 A 为真时，B\n一定为真</li>\n<li>充分性：如果对 AB 进行的所有真值指派里，当 A 为真时，B\n一定为真，意味 A 和 B 的取值只可能在第 4 行里。所以 A -&gt; B\n是永真式</li>\n</ul></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th> A</th>\n<th>B</th>\n<th>A-&gt;B</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>前件也可以是一个集合。若 {A,B} =&gt;\nC，说明：在对他们进行的所有真值指派里，当 {A,B} 中公式同时为真时，C\n一定为真。对于一个推断，前提为 A 和 B，结论为\nC。如果这个推断是有效的，那么 {A,B} =&gt; C，或者说（A 且 B）=&gt;\nC，或者说 （A 且 B）-&gt; C &lt;=&gt; 1</p>\n<p>如何推证 A =&gt; B：有两种方法：</p>\n<ol type=\"1\">\n<li>先假定 A 为真，再检查 B 的真值。如果 B\n一定为真，蕴含关系成立；否则不成立。</li>\n<li>先假定 B 为假，再检查 A 的真值。如果 A\n不可能为真，蕴含关系成立；否则不成立。</li>\n</ol>\n<p>对 P and Q =&gt; P 来说：</p>\n<ul>\n<li>假定前件 P and Q 为真，那么 P 一定为真。所以蕴含关系成立</li>\n<li>假定后件 P 为假，那么前件为假（不可能为真），所以蕴含关系成立</li>\n</ul>\n<p>对 P or Q =&gt; P 来说：</p>\n<ul>\n<li>假定前件 P or Q\n为真，那么后件的真值是不确定的。所以蕴含关系不成立</li>\n<li>假定后件 P\n为假，那么前件的真值是不确定的（可能为真），所以蕴含关系不成立</li>\n</ul>\n<h3 id=\"命题公式的等值演算\">命题公式的等值演算</h3>\n<ul>\n<li>对于两个命题，单独的或和且间有交换律，三个命题间有结合律。和乘法和加法类似\n<ul>\n<li>分配律：（A 且 B）或（A 且 C）&lt;=&gt; A 且（B 或 C）</li>\n</ul></li>\n<li>两命题且或的运算\n<ul>\n<li>且 1 或 0 不变：同一律</li>\n<li>且 0 或 1 短路：零一律</li>\n<li>且自身或自身不变：等幂律</li>\n<li>矛且 0，矛或 1：互否律</li>\n</ul></li>\n<li>吸收律：三个命题以一且一或连接，后两个有括号，且前两个命题相同，那么它的值为第一个命题的值</li>\n<li> P 蕴含 Q &lt;=&gt; 非 P 或 Q &lt;=&gt; (P 蕴含 Q) 且 (Q 蕴含 P)</li>\n<li>P 等值 Q：析取范式，非号聚集；合取范式，非号分散</li>\n</ul>\n<p><img src=\"/blog/images/P==Q.webp\"></p>\n<ul>\n<li>对命题公式 A 最外面加非 &lt;=&gt; 把 A\n的对偶公式里的所有命题变元加非\n<ul>\n<li>德摩根律：多个命题以且 / 或连接，括号外有一个非，那么可以把非分配到括号里的各个命题上，并把且或变号</li>\n</ul></li>\n</ul>\n<p>通过命题公式的等值演算证明，一对矛盾的前提可以推出任何结论：</p>\n<p><img src=\"/blog/images/P-and-not-P.webp\"></p>\n<h3 id=\"范式\">范式</h3>\n<p>当我们说 ^A 的主？[析合] 取范式是 B$ 的时候，意味着 A&lt;=&gt;B。</p>\n<p>析取就是或，合取就是且。</p>\n<ul>\n<li>质合取式：由命题变元或其否定以连且的方式连接到一起。P and Q and !R\n<ul>\n<li>质合取式是矛盾式的充要条件是，它里面同时含有一个命题变元及其否定</li>\n<li>充分性：矛且为 0，0 且短路</li>\n<li>必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全\n1，整体为 1 不矛盾，假设不成立</li>\n</ul></li>\n<li>质析取式：由命题变元或其否定以连或的方式连接到一起。P or Q or !R\n<ul>\n<li>质析取式是重言式的充要条件是，它里面同时含有一个命题变元及其否定</li>\n<li>充分性：矛或为 1，1 或短路</li>\n<li>必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全\n0，整体为 0 不重言，假设不成立</li>\n</ul></li>\n<li>析取范式：外层是析取，内层是质合取式。（且且）或（且且）或（且且）</li>\n<li>合取范式：外层是合取，内层是质析取式</li>\n</ul>\n<p>任一公式都可变换成与它等值的析取范式或者合取范式，可能不止一种。变换的过程：</p>\n<ol type=\"1\">\n<li>把蕴含改写成：非 P 或\nQ，等值改写成：析取范式非号聚集；合取范式非号分散</li>\n<li>用德摩根律把括号外的否定号向内深入到命题变元身上</li>\n<li>用双重否定律消去非非</li>\n<li>用分配律把：\n<ul>\n<li>P 且（Q 或 R）变成（P 且 Q）或（P 且 R）的析取范式</li>\n<li> P 或（Q 且 R）变成（P 或 Q）且（P 或 R）的合取范式</li>\n</ul></li>\n</ol>\n<ul>\n<li>由一些命题变元产生的最小项，是类似于连且的质合取式，但是没有重复的变元。如对于命题变元\nA 和 B， A 且 非 A 且 B 是一个质和取式，但不是最小项。最小项类似 A 且 非\nB\n<ul>\n<li>对所有最小项进行真值指派，在每次真值指派里，有且只有一个最小项取值为\n1</li>\n<li> 对某一个最小项进行真值指派，在所有真值指派里，有且只有一次取值为\n1</li>\n</ul></li>\n<li> 由一些命题变元产生的最大项，是类似于连或的质析取式，但是没有重复的变元。</li>\n<li>主析取范式：由不同最小项为质合取式形成的析取范式。如变元 A、B\n的其中一个主析取范式是：（A 且 B）或（非 A 且 B）</li>\n<li>主合取范式：由不同最大项为质析取式形成的合取范式。如变元 A、B\n的其中一个主合取范式是：（A 或 B）且（A 或 非 B）</li>\n</ul>\n<p>A 是重言式：</p>\n<ul>\n<li>&lt;=&gt; A\n的合取范式中（外层连且）每一质析取式（内层连或）都至少有一对矛盾的命题变元\n<ul>\n<li>充分性：矛或为 1，内层短路，全且 1 为 1</li>\n<li> 必要性：假设 A 的某一质析取式 Ai 不包括互矛的，那么 Ai\n不是重言式，进而存在一组真值指派使 Ai 为假，外层连且短路为假，与 A\n是永真式矛盾，假设不成立</li>\n</ul></li>\n<li> &lt;=&gt; A 的主析取范式中出现了所有最小项\n<ul>\n<li>充分性：对它的所有最小项进行一次真值指派后，必定是一个真而其他全假，因为最小项是连且的，只有一种情况取\n1。1 在连或中短路，所以主析取范式为重言式</li>\n<li>必要性：假设 A\n的主析取范式中没有出现所有最小项，至少漏了一个，那么对于某次真值指派，可能恰好为漏的那一项为\n1，其他项都为 0 的情况，造成析取的结果是 0，与 A\n是重言式矛盾，假设不成立</li>\n</ul></li>\n</ul>\n<p>A 是矛盾式：</p>\n<ul>\n<li>&lt;=&gt; A\n的析取范式中（外层连或）每一质合取式（内层连且）都至少有一对矛盾的命题变元\n<ul>\n<li>充分性：矛且为 0，内层短路，全或 0 为 0</li>\n</ul></li>\n<li>&lt;=&gt; A 的主析取范式是空公式 0</li>\n</ul>\n<p><img src=\"/blog/images/111.webp\"></p>\n<h2 id=\"谓词逻辑\">谓词逻辑</h2>\n<p>可以独立存在的物体称为个体。可以是形象的如人，抽象的如唯物主义。</p>\n<p>一元谓词刻画的是个体的性质，n 元谓词刻画的是 n 个个体之间的关系。</p>\n<p>下面的谓词讨论的是谓词常元，不包括谓词变元。</p>\n<ul>\n<li>一元谓词 P：是大学生</li>\n<li>个体常元 a：张三</li>\n<li>个体变元 x</li>\n<li> 简单命题函数 P (x)：x\n是大学生。当命题函数里的所有个体变元都取值后，且可以计算出真值，才为命题</li>\n<li>命题、零元谓词 P (a)：张三是大学生</li>\n<li>二元谓词 Q：前者比后者高</li>\n<li>简单命题函数 Q (x,y)：x 比 y 高</li>\n<li>个体常元 b：李四</li>\n<li>命题、零元谓词 Q (a,b)：张三比李四高</li>\n<li>复合命题函数 P (x) and Q (x,y)：x 是大学生，且 x 比 y 高</li>\n<li>在命题函数中，个体变元的取值范围叫个体域，是命题函数的定义域</li>\n<li>量词有全称量词 ∀（个体域中任取一 x），存在量词 ∃（个体域中至少存在一\nx），存在唯一量词 ∃!（个体域中存在唯一一 x）</li>\n<li>全总个体域：一切事物构成的集合</li>\n</ul>\n<blockquote>\n<p>人总是会犯错误的<br> 有的人用左手写字</p>\n</blockquote>\n<ul>\n<li>H (x)：x 是人</li>\n<li> M (x)：x 会犯错误</li>\n<li> L (x)：x 用左手写字</li>\n<li>∀x (H (x) -&gt; M (x))：在全总个体域里的世间万物里任取 x，如果 x\n是人，那么 x 是会犯错误的</li>\n<li>∃x (H (x) and L (x))：在全总个体域里的世间万物存在 x，x 是人且 x\n用左手写字</li>\n</ul>\n<p>原子谓词公式是不含量词的谓词 P</p>\n<p>量词 “[任取 | 存在] x” 的优先级比命题连接词的优先级高，并与其右的谓词公式\nP 左结合。x 称为量词的指导变元，P 称为量词的辖域。</p>\n<p>在 “[任取 | 存在] x” 的辖域里，x 是约束变元，x 之外的变元是自由变元。</p>\n<h2 id=\"传统逻辑\">传统逻辑</h2>\n<h3 id=\"直言命题\">直言命题</h3>\n<p>形如 所有 A 都是 B\n的叫直言命题，是传统逻辑的范畴。直言命题陈述的是两个类之间的包含关系。每一个命题的结构是：[量项][主项][连项][谓项]。量项包括全称量词、特称量词和单称量词；连项包括肯定和否定。</p>\n<p>每一个直言命题有四种语气：AEIO 分别代表全肯，全否，特肯，特否。</p>\n<ul>\n<li>A 型：全称肯定（所有 S 是 P），例如 “所有人都是会死的”。</li>\n<li>E 型：全称否定（没有 S 是 P），例如 “没有人是完美的”。</li>\n<li>I 型：特称肯定（有些 S 是 P），例如 “有些鸟会飞”。</li>\n<li>O 型：特称否定（有些 S 不是 P），例如 “有些苹果不是红色的”。</li>\n</ul>\n<h3 id=\"直言命题的换质和换位ai-生成\">直言命题的换质和换位【AI\n生成】</h3>\n<p>对直言命题来说，换质是指通过改变命题的 “质”（肯定或否定），并对谓词取补集，得到一个新命题。换质后，新命题与原命题逻辑等价。操作步骤：</p>\n<ul>\n<li>A 型（所有 S 是 P） → 换质为 E 型（没有 S 是非 P）。</li>\n<li>E 型（没有 S 是 P） → 换质为 A 型（所有 S 是非 P）。</li>\n<li>I 型（有些 S 是 P） → 换质为 O 型（有些 S 不是非 P）。</li>\n<li>O 型（有些 S 不是 P） → 换质为 I 型（有些 S 是非 P）。</li>\n</ul>\n<p>特点：换质是有效且等值的操作，适用于所有直言命题类型（A、E、I、O）。</p>\n<p>换位：通过交换主词（Subject）和谓词（Predicate）的位置，得到一个新命题。换位后，新命题不一定与原命题等价。规则：</p>\n<ul>\n<li>E 型（没有 S 是 P） → 换位为 E 型（没有 P 是\nS）。例如：“没有人是完美的” → “没有完美的人”（等价）。</li>\n<li>I 型（有些 S 是 P） → 换位为 I 型（有些 P 是 S）。例如：“有些鸟会飞”\n→ “有些会飞的是鸟”（等价）。</li>\n<li>A 型（所有 S 是 P） → 换位无效。标准换位不能直接应用，因为 “所有 S 是\nP” 换位为 “所有 P 是\nS” 不一定成立。例如：“所有人都是会死的” 换位为 “所有会死的都是人” 是假的（动物也会死）。</li>\n<li>O 型（有些 S 不是 P） →\n换位无效。不能直接换位。例如：“有些苹果不是红色的” 换位为 “有些红色的不是苹果” 可能真也可能假，不等价。</li>\n</ul>\n<p>特点：换位只对 E 型和 I 型 有效（新命题与原命题等价），对 A 型和 O\n型无效（可能产生不等价命题）。</p>\n<h3 id=\"直言三段论\">直言三段论</h3>\n<p>直言三段论由三个直言命题组成，AAA-1 的直言三段论是这样的：</p>\n<ol type=\"1\">\n<li>所有 M 是 P</li>\n<li> 所有 S 是 M</li>\n<li> 因此，所有 S 是 P</li>\n</ol>\n<p>在结论中的主词记为 S 是小项，谓词记为 P 是大项。包括 P\n的前提是大前提，包括 S\n的前提是小前提。没有出现在结论里，而在两个前提里重复出现的是中项 M。</p>\n<table>\n<colgroup>\n<col style=\"width: 26%\">\n<col style=\"width: 34%\">\n<col style=\"width: 39%\">\n</colgroup>\n<thead>\n<tr>\n<th></th>\n<th>肯定：谓项都不周延</th>\n<th>否定：谓项都周延</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>全称：主项都周延</strong></td>\n<td> A：所有主 + 是谓 -，主包含在谓里</td>\n<td> E：没有主 + 是谓 +，主谓互斥</td>\n</tr>\n<tr>\n<td><strong>特称：主项都不周延</strong></td>\n<td> I：有些主 - 是谓 -，主谓有交</td>\n<td> O：有些主 - 不是谓 +，主不包含在谓里</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"/blog/images/AEIO.webp\"></p>\n<p>周延指的是，一个词项涵盖了他的所有外延。+ 记为周延，- 记为不周延。</p>\n<blockquote>\n<p>小明是只有一只脚的；小明是人；因此，人是只有一只脚的</p>\n</blockquote>\n<p>在它的结论中人是周延的，指的是所有人。而在小前提中的人是没有周延的，只包括小明一个人。</p>\n<p>当我们说 “A 是 B” 的时候，往往意味着 A 在 B 的范围内，A 是 B\n的一部分；说 “A 不是 B” 的时候，往往意味着 A 一点都不在 B 里面。</p>\n<p>所以说肯定判断的谓项都不周延，否定判断的谓项都周延。</p>\n<ul>\n<li>肯定判断的谓项都不周延：所有武汉人 + 都是科学家 -（全肯\nA），或有些武汉人 - 是科学家 -（特肯\nI），这里的科学家没有周延到所有科学家</li>\n<li>否定判断的谓项都周延：所有武汉人 + 都不是科学家 +（全否\nE），或有些武汉人 - 不是科学家 +（特否\nO），这里的科学家周延到了所有科学家</li>\n<li>特称判断的主项都不周延：因为是以有些…… 开头的</li>\n<li>全称判断的主项都周延：因为是以所有 / 没有…… 开头的。单称命题主词包括的对象只有一个，所以也周延</li>\n</ul>\n<p>格指的是，在大前提和小前提中，大项、小项和中项的排列顺序。结论的顺序一定是\nS-P，小项 - 大项</p>\n<ul>\n<li>第 1 格：中项一左一右，是分开的。大前提 M-P，小前提 S-M</li>\n<li> 第 2 格：中项都在右边。大前提 P-M，小前提 S-M</li>\n<li> 第 3 格：中项都在左边。大前提 M-P，小前提 M-S</li>\n<li> 第 4 格：中项一右一左，是聚集的。大前提 P-M，小前提 M-S</li>\n</ul>\n<blockquote>\n<p>小明只有一只脚；小明是人；因此，人只有一只脚</p>\n</blockquote>\n<p>它的中项都在左边，所以是第三格。全肯 A，AAA-3 属于无效推理</p>\n<p>一个 EIO-2 的有效的（但不可靠的）三段论是这样的：</p>\n<ol type=\"1\">\n<li>没有安徽人是科学家（全否 E）</li>\n<li>有些中国人是科学家（特肯 I）</li>\n<li>因此，有些中国人不是安徽人（特否 O）</li>\n</ol>\n<p>如果把科学家替换成湖北人，就是有效且可靠的。</p>\n<p>如何判断三段论有效性：需要满足下列的所有规则。<a href=\"https://zh.wikipedia.org/wiki/%E7%9B%B4%E8%A8%80%E4%B8%89%E6%AE%B5%E8%AE%BA#%E6%9C%89%E6%95%88%E4%B8%89%E6%AE%B5%E8%AB%96%E5%BC%8F\">或者画韦恩图，或者查表</a></p>\n<ol type=\"1\">\n<li>结论中否定命题的数目必须和前提中否定命题的数目相等</li>\n<li>结论中特称命题的数目必须和前提中特称命题的数目相等</li>\n<li>结论中周延的词必须在前提中周延</li>\n<li>中项必须周延至少一次</li>\n</ol>\n<p>如果语境上不能假设所有提及的集合非空，部分推论将会无效。</p>\n<h2 id=\"形式谬误\">形式谬误</h2>\n<p>形式谬误的推理过程是无效的。</p>\n<p>有效的选言三段论是这样的：也叫析取三段论，或拒取式。</p>\n<ol type=\"1\">\n<li>P 或 Q</li>\n<li> 非 P</li>\n<li> 所以 Q</li>\n</ol>\n<p>它对应肯定选言的谬误：</p>\n<ol type=\"1\">\n<li>P 或 Q</li>\n<li>P</li>\n<li> 所以 Q 为假</li>\n</ol>\n<h3 id=\"命题逻辑谬误\">命题逻辑谬误</h3>\n<p>手电筒发光有两个条件：电池有电，且开关打开了。</p>\n<ul>\n<li>肯定后件：如果手电筒发光了，那么它是有电的；手电筒是有电的；因此手电筒正在发光</li>\n<li>否定前件：如果手电筒发光了，那么它是有电的；手电筒没有发光；因此手电筒是没电的</li>\n</ul>\n<p>发现肯定后件、否定前件、肯定选言、否定联言的方式都是：通过真值表的复合命题列，加上简单命题其中的一列，找另一个简单命题列在真值表里有两种的情况，强制把它推向其中一种。如：</p>\n<table>\n<colgroup>\n<col style=\"width: 24%\">\n<col style=\"width: 21%\">\n<col style=\"width: 54%\">\n</colgroup>\n<thead>\n<tr>\n<th>P：手电筒正在发光</th>\n<th> Q：它的电池有电</th>\n<th>蕴含：若手电筒正在发光，则它的电池有电</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>“若 P 则 Q” 为真时\n<ul>\n<li>P 为假时，Q 有两种情况（否定前件谬误：若 P 则 Q 为真，P 为假，推出 Q\n为假）</li>\n<li>P 为真时，Q\n只有一种情况（这是有效的，肯定前件的推理。手电筒正在发光，说明它的电池一定有电）</li>\n<li>Q 为假时，P\n只有一种情况（这是有效的，否定后件的推理。手电筒的电池没电，说明它一定不会发光）</li>\n<li>Q 为真时，P 有两种情况（肯定后件谬误：若 P 则 Q，Q，因此 P）</li>\n</ul></li>\n</ul>\n<h2 id=\"过去的碎片\">过去的碎片</h2>\n<p>我们用 <span class=\"math inline\">\\(m\\)</span> 表示样本数量，与维度\n<span class=\"math inline\">\\(n\\)</span> 区分开。用 <span class=\"math inline\">\\(d\\)</span> 表示属性的个数。</p>\n<p>粗斜体小写字母为列向量，如 <span class=\"math inline\">\\(\\boldsymbol{x}=(1;2;3)\\)</span>，使用分号分隔。其转置为行向量，使用逗号分隔。</p>\n<p>粗斜体大写字母为矩阵。在上下文明确的情况下可不用粗体。</p>\n<p>在上下文明确的情况下可省略求和符号的起止。</p>\n<h3 id=\"概率论与数理统计知识\">概率论与数理统计知识</h3>\n<p><span class=\"math inline\">\\(\\sum x_i = m\\bar{x}\\)</span></p>\n<p>离散型随机变量函数的期望 <span class=\"math inline\">\\(E(f(X))\\)</span>：<a href=\"https://blog.csdn.net/SpiritedAway1106/article/details/107024984\">参考</a>。<span class=\"math inline\">\\(f\\)</span> 是连续函数且级数绝对收敛，<span class=\"math inline\">\\(E(f(X)) = \\sum P(x_i)f(x_i)\\)</span></p>\n<p>离散型随机变量的信息熵 <span class=\"math inline\">\\(H(X)\\)</span>：</p>\n<p>信息量 <span class=\"math inline\">\\(I(x_i) = -\n\\log_2{P(x_i)}\\)</span>：投一次正八面体骰子（0-7\n点），有概率均等的八种结果。把每种结果都用 3 bit 的二进制数表示，熵为 3\nbit。</p>\n<ul>\n<li>信息 “结果是 1 点” 的信息量是 3 bit，得到这个信息之后，熵剩余 0\nbit</li>\n<li> 信息 “结果是 1 点或 2 点的其中之一” 的信息量是 2\nbit，得到这个信息之后，熵剩余 1 bit</li>\n<li> 信息 “结果是 1、2、3、4 点的其中之一” 的信息量是 1\nbit，得到这个信息之后，熵剩余 2 bit</li>\n</ul>\n<p>信息熵 <span class=\"math inline\">\\(H(X) = E(I(X)) = - \\sum p_i \\log_2\np_i\\)</span>。</p>\n<ul>\n<li>投一次正八面体骰子，点数结果的信息熵是 3 bit</li>\n<li> 投一次 1% 概率为正面，99% 概率为反面的不均匀硬币，面结果的信息熵约\n0.08 bit</li>\n<li> 投一次 25% 概率为正面，75% 概率为反面的不均匀硬币，面结果的信息熵约\n0.811 bit</li>\n</ul>\n<p>多重集合的信息熵：可能的最小值（全同）为 0，最大值（全异）为 log2\n唯一值数量。</p>\n<p><span class=\"math inline\">\\(A = \\{ 1,2,2,2 \\}\\)</span></p>\n<p><span class=\"math inline\">\\(H(A) \\approx 0.811\\)</span></p>\n<p>多重集合划分后的信息熵：如把多重集合 <span class=\"math inline\">\\(\\{\n1,2,2,2 \\}\\)</span> 划分成两个子集 <span class=\"math inline\">\\(\\{1\\}\\)</span> 和 <span class=\"math inline\">\\(\\{2,2,2\\}\\)</span> 后，信息熵变为 <span class=\"math inline\">\\(0\\)</span>。其划分后的信息熵定义为各个子集熵的加权和，权为子集容量占原集合的比例。划分后减少的信息熵称为划分后的信息增益。</p>\n<p>基尼指数：可能的最小值（全同）为 0，最大值（全异）为 1 -\n唯一值数量的倒数。</p>\n<p><span class=\"math inline\">\\(A = \\{ 1,2,2,2 \\}\\)</span></p>\n<p><span class=\"math inline\">\\(G(A) = 1- \\sum p_i^2 =\n\\frac{3}{8}\\)</span></p>\n<p>类似地，划分后的基尼指数定义为各个子集基尼指数的加权和，权为子集容量占原集合的比例。</p>\n<h3 id=\"线性代数知识\">线性代数知识</h3>\n<ul>\n<li><span class=\"math inline\">\\(\\boldsymbol{a}^T \\boldsymbol{b} =\n\\boldsymbol{b}^T \\boldsymbol{a}\\)</span></li>\n<li><span class=\"math inline\">\\((\\boldsymbol{A} + \\boldsymbol{B})^T =\n\\boldsymbol{A}^T + \\boldsymbol{B}^T\\)</span></li>\n<li><span class=\"math inline\">\\((\\boldsymbol{AB})^T =\n\\boldsymbol{B}^T\\boldsymbol{A}^T\\)</span></li>\n<li> 矩阵和向量乘法分配律注意保证顺序不变，因为没有乘法交换律</li>\n<li>积的求和可以改写成两向量相乘 <span class=\"math inline\">\\(\\sum_{i=1}^m x_iy_i =\n\\boldsymbol{x}^T\\boldsymbol{y}\\)</span></li>\n<li> 遇到 “行向量乘列向量加标量” 的形式，可以把标量拆分成 1\n和它本身，再分别补到前面那两个向量的尾巴上</li>\n<li><span class=\"math inline\"> \\(\\boldsymbol{A}\\boldsymbol{b} =\n\\boldsymbol{c}\\)</span></li>\n<li><span class=\"math inline\">\\(\\boldsymbol{a}^T \\boldsymbol{B} =\n\\boldsymbol{c}^T\\)</span></li>\n<li> 行列式为零、非满秩、不可逆的方阵称为奇异矩阵</li>\n<li>矩阵的秩：变换为行阶梯型矩阵后的非零行数</li>\n</ul>\n<p>矩阵和行列式的几何意义：</p>\n<ul>\n<li><p>矩阵可表示多个向量：</p>\n<ul>\n<li>二阶行列式的绝对值是矩阵的两个列向量所张成的平行四边形的面积；</li>\n<li>三阶行列式的绝对值是矩阵的三个列向量所张成的平行六面体的体积；</li>\n<li>矩阵的秩是各向量张成空间的维数</li>\n</ul></li>\n<li><p>矩阵可表示对一个空间基（单位格子）的线性变换：</p>\n<ul>\n<li>用变换矩阵左乘一个向量，就是把该向量所在的空间做了变换。新坐标在旧空间里的位置与旧坐标在新空间里的位置一致。变换矩阵的行列式为新空间的单位格子相对于旧空间单位格子的面积 / 体积改变的倍数。</li>\n<li>行列式为零说明是降维打击，损失了信息，变换不可逆。</li>\n<li>行列式为负说明空间的手性改变了</li>\n</ul></li>\n</ul>\n<p>方阵的余子式 <span class=\"math inline\">\\(M_{ij}\\)</span> 和代数余子式\n<span class=\"math inline\">\\(A_{ij}\\)</span>：它们都是行列式，可以求值。</p>\n<ul>\n<li>余子式为划掉原方阵第 <span class=\"math inline\">\\(i\\)</span> 行 <span class=\"math inline\">\\(j\\)</span> 列后剩余的方阵的行列式。</li>\n<li>代数余子式为余子式加一个正 / 负号，看 <span class=\"math inline\">\\(i+j\\)</span> 是偶数还是奇数。</li>\n</ul>\n<p>方阵的顺序主子式：一个正方形框从左上角开始拉。它们都是行列式，可以求值。</p>\n<p>方阵的伴随矩阵 <span class=\"math inline\">\\(A^*\\)</span>：它是这样一个矩阵：新矩阵上每个位置的元素是原矩阵的一个代数余子式，代数余子式的下标和新矩阵位置的下标行列互换。对于二阶矩阵，它的伴随矩阵是主交换、副取反。</p>\n<p>方阵的逆矩阵 <span class=\"math inline\">\\(A^{-1}\\)</span>：等于伴随矩阵乘上行列式的倒数。</p>\n<p>高斯 - 若尔当方法：把增广矩阵 <span class=\"math inline\">\\(A|I\\)</span>\n初等行变换为 <span class=\"math inline\">\\(I|A^{-1}\\)</span></p>\n<p>方阵的特征值 <span class=\"math inline\">\\(\\lambda\\)</span>\n和特征向量：</p>\n<ul>\n<li>方阵左乘它的特征向量，等于把这个特征向量在它的方向上伸缩 / 反转 <span class=\"math inline\">\\(\\lambda\\)</span> 倍。</li>\n<li>如何求特征值：令特征多项式 <span class=\"math inline\">\\(|\\lambda\n\\boldsymbol{E} - \\boldsymbol{A}| = 0\\)</span></li>\n<li> 如何求特征向量：求 <span class=\"math inline\">\\((\\lambda\n\\boldsymbol{E} - \\boldsymbol{A})\\boldsymbol{x} = \\boldsymbol{0}\\)</span>\n的基础解系</li>\n<li><a href=\"https://blog.csdn.net/Daniel_tanxz/article/details/89132181\">如何求基础解系</a>：初等行变换成行最简型</li>\n</ul>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n\\boldsymbol{E}_r &amp; \\boldsymbol{F} \\\\\n0 &amp; 0\n\\end{pmatrix}\n\\]</span></p>\n<p>解矩阵为</p>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n- \\boldsymbol{F} \\\\\n\\boldsymbol{E}_{n-r}\n\\end{pmatrix}\n\\]</span></p>\n<p>正定矩阵充要条件：其所有特征值都为正。或者所有顺序主子式为正。</p>\n<p>正交矩阵：<span class=\"math inline\">\\(AA^T =\nE\\)</span>。正交矩阵的各行是单位向量且两两正交，各列是单位向量且两两正交。</p>\n<p>矩阵的奇异值分解是把一个矩阵分解成三个矩阵相乘：</p>\n<p><span class=\"math display\">\\[\nA = U \\Sigma V^T\n\\]</span></p>\n<p><span class=\"math inline\">\\(A\\)</span> 是实矩阵的情况下，<span class=\"math inline\">\\(U\\)</span> 和 <span class=\"math inline\">\\(V^T\\)</span> 都是正交矩阵，<span class=\"math inline\">\\(\\Sigma\\)</span> 是与 <span class=\"math inline\">\\(A\\)</span>\n形状相同的对角矩阵，其对角线上的元素叫奇异值，呈非负且按降序排列。</p>\n<p>如何分解：<span class=\"math inline\">\\(U\\)</span> 的每一列是 <span class=\"math inline\">\\(AA^T\\)</span> 的特征向量，<span class=\"math inline\">\\(V\\)</span> 的每一列是 <span class=\"math inline\">\\(A^TA\\)</span> 的特征向量，<span class=\"math inline\">\\(\\Sigma\\)</span> 对角线上每一个元素是 <span class=\"math inline\">\\(A^TA\\)</span> 或 <span class=\"math inline\">\\(AA^T\\)</span>\n的特征值开根号，注意保证各奇异值和特征向量对应。</p>\n<h3 id=\"高数知识\">高数知识</h3>\n<p>复合函数求导法则：把内层的中介写一遍，连乘</p>\n<p>Sigmoid 函数（对数几率函数）：<span class=\"math inline\">\\(S(x) =\n\\dfrac{1}{1+e^{-x}}\\)</span>，该函数图像长得和 <span class=\"math inline\">\\(\\dfrac{1}{\\pi} \\arctan x + \\dfrac{1}{2}\\)</span>\n差不多</p>\n<p><span class=\"math display\">\\[\n\\dfrac{1}{1+a^{-x}} + \\dfrac{1}{1+a^{x}} = 1\n\\]</span></p>\n<p><span class=\"math inline\">\\(n\\)</span> 元函数 <span class=\"math inline\">\\(f(\\boldsymbol{x})\\)</span>：自变量有 <span class=\"math inline\">\\(n\\)</span> 个，记作一个 <span class=\"math inline\">\\(n\\)</span> 维列向量 <span class=\"math inline\">\\(\\boldsymbol{x}\\)</span>。</p>\n<p>梯度（一阶导数） <span class=\"math inline\">\\(\\nabla f(\\boldsymbol{x})\n= \\dfrac{\\partial f(\\boldsymbol{x})}{\\partial\n\\boldsymbol{x}}\\)</span></p>\n<p>梯度是一个 <span class=\"math inline\">\\(n\\)</span>\n维向量，各个分量是原函数在其各个自变量分量上的偏导函数 <span class=\"math inline\">\\(\\dfrac{\\partial f(\\boldsymbol{x})}{\\partial\n{x_i}}\\)</span>，前提是各个偏导数都存在。如：</p>\n<p><span class=\"math display\">\\[\n\\nabla (5x_1+4x_1x_2+x_3) = (5+4x_2,4x_1,1)\n\\]</span></p>\n<p>海森矩阵（二阶导数） <span class=\"math inline\">\\(\\nabla^2\nf(\\boldsymbol{x}) = \\dfrac{\\partial^2 f(\\boldsymbol{x})}{\\partial\n\\boldsymbol{x}{\\partial\n\\boldsymbol{x}}^T}\\)</span>：海森方阵的每一个元素是原函数的二阶偏导数，前提是各个二阶偏导数都存在。如：</p>\n<p><span class=\"math display\">\\[\n\\nabla^2(2x_1 + x_1x_2) =\n\\begin{pmatrix}\n0 &amp; 1 \\\\\n1 &amp; 0\n\\end{pmatrix}\n\\]</span></p>\n<p>凸函数：这里的凸函数指下凸函数。</p>\n<p>凸函数任意两点的连线一定在函数图像上面，或与函数图像重合。如果一定在上面，我们称它为严格的凸函数。</p>\n<p>一元严格凸函数的例子：<span class=\"math inline\">\\(y =\nx^2\\)</span></p>\n<p>一元非严格凸函数的例子： <span class=\"math inline\">\\(y = x +\n1\\)</span></p>\n<p>如何判定一元函数是凸函数 / 严格凸函数：其二阶导数在区间上恒大于等于 / 大于零</p>\n<p>如何判定<strong>多元函数</strong>是凸函数 / <strong>严格凸函数</strong>：其<strong>海森矩阵</strong>在区间上是半正定 / <strong>正定</strong>的</p>\n<p>矩阵微分公式：</p>\n<ul>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{a}^T\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\frac{\\partial\n\\boldsymbol{x}^T \\boldsymbol{a}}{\\partial \\boldsymbol{x}} =\n\\boldsymbol{a}\\)</span> （南瓜书）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{A}\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}^T} = \\boldsymbol{A}\\)</span>\n（南瓜书）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{A}\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\boldsymbol{A}^T\\)</span>\n（https://en.wikipedia.org/wiki/Matrix_calculus\n的<strong>分母布局</strong>）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{x}^T\n\\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} =\n(\\boldsymbol{A} + \\boldsymbol{A}^T)\n\\boldsymbol{x}\\)</span>（南瓜书）</p></li>\n</ul>\n<h3 id=\"一元线性回归\">一元线性回归</h3>\n<p>目的：找出与平面直角坐标系上的 <span class=\"math inline\">\\(m\\)</span>\n个散点 <span class=\"math inline\">\\((x_i,y_i)\\)</span> 最接近的直线 <span class=\"math inline\">\\(\\hat{y} = wx+b\\)</span></p>\n<p>找出使残差平方和最小的直线的斜率、截距，即求：</p>\n<p><span class=\"math display\">\\[\n(w^*,b^*) = \\underset{(w,b)}{\\mathrm{arg\\ min}} \\sum_{i=1}^{m}\n(y_i-wx_i-b)^2\n\\]</span></p>\n<p><img src=\"/blog/images/residual-error.webp\"></p>\n<p>观测值（已知的，用于训练模型的样本 <span class=\"math inline\">\\(y\\)</span> 值）：<span class=\"math inline\">\\(y_i\\)</span></p>\n<p>估计值（给定一个 <span class=\"math inline\">\\(x_i\\)</span> 用模型\n<span class=\"math inline\">\\(\\hat{y} = wx+b\\)</span> 算出来的值）：<span class=\"math inline\">\\(\\hat{y_i}\\)</span></p>\n<p>残差：<span class=\"math inline\">\\(y_i-\\hat{y_i} =\ny_i-wx_i-b\\)</span></p>\n<p>这个公式是高中数学的内容，可以写成向量形式：</p>\n<p><span class=\"math display\">\\[\n\\begin{aligned}\nw &amp;= \\frac{\\boldsymbol{x}^T\\boldsymbol{y} - m\\bar{x}\\bar{y}}\n{\\boldsymbol{x}^T\\boldsymbol{x}-m\\bar{x}^2}\n= \\frac{\\boldsymbol{x}_d^T \\boldsymbol{y}_d}{\\boldsymbol{x}_d^T\n\\boldsymbol{x}_d} \\\\\nb &amp;= \\bar{y} - w\\bar{x}\n\\end{aligned}\n\\]</span></p>\n<p><span class=\"math inline\">\\(\\boldsymbol{x}_d\\)</span> 的各个分量是\n<span class=\"math inline\">\\(x_i - \\bar{x}\\)</span></p>\n<p>公式是怎么来的：</p>\n<ol type=\"1\">\n<li>残差平方和是关于 <span class=\"math inline\">\\(w\\)</span> 和 <span class=\"math inline\">\\(b\\)</span> 的二元函数，其海森矩阵为：</li>\n</ol>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n2 \\sum_{i=1}^m x_i^2 &amp; 2 \\sum_{i=1}^m x_i \\\\\n2 \\sum_{i=1}^m x_i &amp; 2m\n\\end{pmatrix}\n\\]</span></p>\n<p>只要有一个非零的 <span class=\"math inline\">\\(x\\)</span>\n值，它的一阶主子式就为正；由柯西不等式的一般形式，只要有不相等的 <span class=\"math inline\">\\(x\\)</span>，它的二阶主子式就为正。做一元线性回归至少需要三个不同的点，如果所有\n<span class=\"math inline\">\\(x\\)</span>\n值相同，或者都为零，就不用这个公式算了。只要用这个公式算，它的海森矩阵就是正定的，它是严格凸函数。</p>\n<ol start=\"2\" type=\"1\">\n<li>令梯度等于零向量，改写成用矩阵求解线性方程组的形式</li>\n<li>两边左乘系数矩阵的逆矩阵，得到 <span class=\"math inline\">\\((w;b)\\)</span></li>\n<li> 把 <span class=\"math inline\">\\(w\\)</span> 的分子分母同时除以 <span class=\"math inline\">\\(m\\)</span></li>\n<li> 目标直线必定过均值点</li>\n</ol>\n<h3 id=\"多元线性回归\">多元线性回归</h3>\n<p>目的：找出 <span class=\"math inline\">\\(n+1\\)</span> 维欧式空间里与\n<span class=\"math inline\">\\(m\\)</span> 个散点最接近的超平面：</p>\n<p><span class=\"math inline\">\\(f(\\boldsymbol{x}) = \\boldsymbol{w}^T\n\\boldsymbol{x} + b\\)</span> 的各项参数</p>\n<blockquote>\n<p>注意：这里的所有自变量（元）是一个 <span class=\"math inline\">\\(n\\)</span> 维向量 <span class=\"math inline\">\\(\\boldsymbol{x}\\)</span>。<span class=\"math inline\">\\(\\boldsymbol{w}\\)</span>\n是各个一次项的系数。函数的解析式是个一次多项式</p>\n</blockquote>\n<p>“最接近” 也可表示为 <span class=\"math inline\">\\(f(\\boldsymbol{x}_i)\n\\simeq y_i\\)</span>，即用模型算出来的值几乎等于观测值。</p>\n<p>“行向量乘列向量加标量” 的形式，把标量 <span class=\"math inline\">\\(b\\)</span> 拆分成 <span class=\"math inline\">\\(b\\)</span> 和 <span class=\"math inline\">\\(1\\)</span>，写到前面那两个向量的尾巴上。记 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}} =\n(\\boldsymbol{w};b)\\)</span>，<span class=\"math inline\">\\(\\hat{\\boldsymbol{x}} =\n(\\boldsymbol{x};1)\\)</span>，则：</p>\n<p><span class=\"math display\">\\[\nf(\\boldsymbol{x}) = \\hat{\\boldsymbol{w}}^T \\hat{\\boldsymbol{x}} =\n\\hat{\\boldsymbol{x}}^T \\hat{\\boldsymbol{w}}\n\\]</span></p>\n<p>公式：</p>\n<p>当 <span class=\"math inline\">\\(\\boldsymbol{X}^T\\boldsymbol{X}\\)</span>\n为正定矩阵时，<span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span>\n的全局最优解为：</p>\n<p><span class=\"math display\">\\[\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n\\]</span></p>\n<p>此时的模型为：</p>\n<p><span class=\"math display\">\\[\nf(\\hat{\\boldsymbol{x_i}}) = \\hat{\\boldsymbol{x}}_i^T\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n\\]</span></p>\n<p>公式是怎么来的：</p>\n<p>找出使残差平方和 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n最小的各项的系数与常数项向量 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}^*\\)</span>，即求：</p>\n<p><span class=\"math display\">\\[\n\\underset{\\hat{\\boldsymbol{w}}}{\\mathrm{arg\\ min}}\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2\n\\]</span></p>\n<p>平方求和可改写成向量相乘，把括号里的向下影分身：</p>\n<p><span class=\"math display\">\\[\nE_{\\hat{\\boldsymbol{w}}} =\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2 =\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})^T\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})\n\\]</span></p>\n<blockquote>\n<p>这里影分身后的 <span class=\"math inline\">\\(\\boldsymbol{y}\\)</span> 和\n<span class=\"math inline\">\\(\\boldsymbol{X}\\)</span> 都有 <span class=\"math inline\">\\(m\\)</span> 行，<span class=\"math inline\">\\(\\boldsymbol{X}\\)</span> 的每一行为 <span class=\"math inline\">\\(\\hat{\\boldsymbol{x}}_i^T\\)</span></p>\n</blockquote>\n<p>把 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n展开，再对 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span>\n求导得：</p>\n<p><span class=\"math display\">\\[\n\\nabla E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T (\\boldsymbol{X} \\hat{\\boldsymbol{w}} -\n\\boldsymbol{y})\n\\]</span></p>\n<p><span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n的海森矩阵是一阶导数再对 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}^T\\)</span> 求一次导：</p>\n<p><span class=\"math display\">\\[\n\\nabla^2 E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T \\boldsymbol{X}\n\\]</span></p>\n<p>当海森矩阵为正定矩阵时，<span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n为严格凸函数。令梯度等于零向量，求得的全局最优解为当 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span> 取最小值时的\n<span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span></p>\n<h3 id=\"梯度下降法\">梯度下降法</h3>\n<p>梯度下降法是用来逼近函数取极小值时的点的。</p>\n<p>以一元下凸函数 f (x) 为例，在右侧任意取一个 x\n值，函数图像在该点处下降最快的方向是该点的导数方向，且导数为正，此时需要向左逼近，把\nx 值变小；如果一开始在左侧取，则导数为负，需要向右逼近，把 x\n值变大。</p>\n<p>我们可以规定新取的 x 值等于上一步的 x\n值减去一个与它的导数符号相同的数，这样就可以保证新的取值是一定沿着上一步相对于极小值的下降方向。</p>\n<p>方向确定了，但是可能会移动过头。由于越平缓的地方导数绝对值是越小的，为了使移动的幅度与平缓程度相称，于是我们可以规定减去的那个数等于导数乘上另一个固定的正实数。</p>\n<p>用梯度下降法求方程的解，即求一个 x 使得函数 f (x) = 0\n。我们为了判断何时问题已经解决地足够好了，可以定义一个损失函数，它是用来量化离解决一个问题还有多长距离的量。</p>\n<p>最终目的是让求的 x 值使得 f (x) 的值更接近\n0，为了量化更接近零的程度，我们可以用原函数的平方作为损失函数。于是问题转化成了用梯度下降法求损失函数的极小值点。</p>\n<p>在编写程序的时候，计算一个点的导数，我们可以采用计算与它相邻极近两点的割线斜率。</p>\n<h2 id=\"十进制与-k-进制小数互转\">十进制与 K 进制小数互转</h2>\n<p>K 转 10：每一位分别乘上 K 的次方，再相加。</p>\n<h3 id=\"转-10\">2 转 10</h3>\n<p><strong>有限小数</strong></p>\n<p><span class=\"math inline\">\\(11.1011\\mathrm{B} = 3.6875\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>项</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(1\\times2^{1}\\)</span></td>\n<td><span class=\"math inline\">\\(2\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{0}\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-1}\\)</span></td>\n<td><span class=\"math inline\">\\(0.5\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0\\times2^{-2}\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-3}\\)</span></td>\n<td><span class=\"math inline\">\\(0.125\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-4}\\)</span></td>\n<td><span class=\"math inline\">\\(0.0625\\)</span></td>\n</tr>\n<tr>\n<td><strong> 总和</strong></td>\n<td><span class=\"math inline\"> \\(3.6875\\)</span></td>\n</tr>\n</tbody>\n</table>\n<p><strong>无限循环小数</strong></p>\n<p><span class=\"math inline\">\\(1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} =\n1.7\\)</span></p>\n<p>可以转换成分数计算：</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n1.1 \\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = x \\\\\n11.\\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = 2x \\\\\n110110. \\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = 32x \\\\\n两式相减，110011\\mathrm {B} &amp; = 30x \\\\\nx &amp; = \\frac {110011\\mathrm {B}}{30} = \\frac {51}{30} = 1.7\n\\end {aligned}\n\\]</span></p>\n<p>10 转 K：</p>\n<p>整数部分仍然除 K 取余，小数部分乘 K 取整，然后相加。</p>\n<h3 id=\"转-2\">10 转 2</h3>\n<p><span class=\"math inline\">\\(0.7  = 0.1 \\dot{0} 11 \\dot{0} ...\n\\mathrm{B}\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>小数部分乘 2</th>\n<th> 取整数部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(0.7 \\times 2 = 1.4\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.4 \\times 2 = 0.8\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.8 \\times 2 = 1.6\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.6 \\times 2 = 1.2\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.2 \\times 2 = 0.4\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"转-16\">10 转 16</h3>\n<p><span class=\"math inline\">\\(0.7  = 0.\\mathrm{B} \\dot{3} ...\n_{16}\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>小数部分乘 16</th>\n<th> 取整数部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(0.7 \\times 16 = 11.2\\)</span></td>\n<td><span class=\"math inline\">\\(\\mathrm{B}\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.2 \\times 16 = 3.2\\)</span></td>\n<td><span class=\"math inline\">\\(3\\)</span></td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"离散数学\">离散数学</h2>\n<p>基础不牢。虽然之前及格了，但是什么都没学会。</p>\n<p>集合 A 的所有子集组成的集合，是集合 A 的幂集。{1,2} 的幂集是\n<code>{{},{1},{2},{1,2}}</code>。</p>\n<p>空集的幂集是 <code>{{}}</code> ，基数是 1。A\n的幂集的基数 &gt; A 的基数。</p>\n<p>元素都是集合的集合，称为集族。</p>\n<h3 id=\"关系\">关系</h3>\n<p>集合：所有 <span class=\"math inline\">\\((10,60)\\)</span>\n岁的人是一个集合 <span class=\"math inline\">\\(A\\)</span>，所有 <span class=\"math inline\">\\((30,80)\\)</span> 岁的人是一个集合 <span class=\"math inline\">\\(B\\)</span>。当然有人同时属于这两个群体，也有同时不属于的。</p>\n<p>笛卡尔积：把 <span class=\"math inline\">\\(A\\)</span> 放到左边，<span class=\"math inline\">\\(B\\)</span>\n放到右边。把左边的所有人和右边的所有人多对多配对，用一根根线连起来。这些<strong>所有线的集合</strong>叫笛卡尔积\n<span class=\"math inline\">\\(A \\times\nB\\)</span>。当然也有自己连自己的，以及连了两次、左右互换的。注意，这些线是有方向的，是从左往右连，即\n<span class=\"math inline\">\\(A \\times B \\not\\equiv B \\times\nA\\)</span></p>\n<p>关系：从这些线里任意取几根，或者全取，或者一根都不取。<strong>取出来的这几根线</strong>叫关系，记作\n<span class=\"math inline\">\\(\\rho\\)</span>。即关系是笛卡尔积的子集。<span class=\"math inline\">\\(\\rho \\subseteq A \\times B\\)</span>。<span class=\"math inline\">\\(\\rho\\)</span> 是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span>\n的一个关系，也是有顺序的。如果取出来的这几根线左边全是老师，线右边全是对应老师的学生，则\n<span class=\"math inline\">\\(\\rho\\)</span> 是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span> 的师生关系。张三在左边的 <span class=\"math inline\">\\(A\\)</span> 里面，代号是 <span class=\"math inline\">\\(a\\)</span>，李四在右边的 <span class=\"math inline\">\\(B\\)</span> 里面，代号是 <span class=\"math inline\">\\(b\\)</span>，连接它们的线记作 <span class=\"math inline\">\\((a,b)\\)</span>。如果这条线<strong>在</strong>\n<span class=\"math inline\"> \\(\\rho\\)</span> 里面，则记作 <span class=\"math inline\">\\(a \\rho\nb\\)</span>。即张三对李四<strong>有</strong>师生关系 <span class=\"math inline\">\\(\\rho\\)</span>，张三是李四的老师。不止他们两个人在师生关系\n<span class=\"math inline\">\\(\\rho\\)</span>\n里面。张三对李四的这根线，<strong>在取出来的线集 <span class=\"math inline\">\\(\\rho\\)</span>\n里面</strong>。这些线的集合才叫关系，而 <span class=\"math inline\">\\((a,b)\\)</span> 不叫关系，再起码也得 <span class=\"math inline\">\\(\\{(a,b)\\}\\)</span>。即 <span class=\"math inline\">\\(a \\rho b\\)</span> 的意思是 <span class=\"math inline\">\\((a,b) \\in \\rho\\)</span>， <span class=\"math inline\">\\((a,b)\\)</span> 这根线在 <span class=\"math inline\">\\(\\rho\\)</span> 这个线集里面。</p>\n<p>定义域和值域：现在有一个从 <span class=\"math inline\">\\(A\\)</span> 到\n<span class=\"math inline\">\\(B\\)</span> 的师生关系 <span class=\"math inline\">\\(\\rho\\)</span>，就是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span>\n有一些线。被师生关系牵住的左边的所有人（老师），称为<strong>这个</strong>师生关系的定义域。右边的所有人（学生），称为<strong>这个</strong>师生关系的值域。这个师生关系是建立在\n<span class=\"math inline\">\\(A\\)</span> -&gt; <span class=\"math inline\">\\(B\\)</span> 这两个群体<strong>之上</strong>的。</p>\n<p>逆关系：从 <span class=\"math inline\">\\(B\\)</span> 到 <span class=\"math inline\">\\(A\\)</span> 的生师关系。记作 <span class=\"math inline\">\\(\\tilde{\\rho}\\)</span>。是 <span class=\"math inline\">\\(A\\)</span> 的各个序偶反过来写。</p>\n<p>集合 <span class=\"math inline\">\\(A\\)</span>\n上的关系：这两边可以放同一个集合，即从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(A\\)</span> 的关系 <span class=\"math inline\">\\(\\rho\\)</span>，直接叫集合 <span class=\"math inline\">\\(A\\)</span>\n上的关系。即<strong>单个群体内部之间的线，包括自己连自己</strong>。</p>\n<p>前面说了，关系 <span class=\"math inline\">\\(\\subseteq\\)</span>\n笛卡尔积。对于 <span class=\"math inline\">\\(A\\)</span> 和 <span class=\"math inline\">\\(A\\)</span>\n的笛卡尔积，两边交换位置是相等的，可以记作 <span class=\"math inline\">\\(A^2\\)</span>。集合 <span class=\"math inline\">\\(A\\)</span> 上的关系 <span class=\"math inline\">\\(\\rho \\subseteq A^2\\)</span>。注意在此时，不一定有\n<span class=\"math inline\">\\(\\rho = \\tilde{\\rho}\\)</span>。如果 <span class=\"math inline\">\\((你，她)\\in \\rho\\)</span> 且 <span class=\"math inline\">\\(\\rho\\)</span> 是暗恋 ，不能保证 <span class=\"math inline\">\\((你，她)\\in \\tilde {\\rho}\\)</span>。<a href=\"https://music.163.com/#/song?id=430026359\"><strong>你对别人有暗恋关系，不能保证你对别人有暗恋关系的逆</strong></a>。</p>\n<p><img src=\"/blog/images/关系-0.webp\"></p>\n<p>普遍关系 <span class=\"math inline\">\\(U_A\\)</span>：所有人都连上线了，包括和自己。即这个关系<strong>等于笛卡尔积</strong>\n<span class=\"math inline\"> \\(A^2\\)</span>。大家</p>\n<p>恒等关系 <span class=\"math inline\">\\(I_A\\)</span>：所有人都和自己连上线了，但是互相之间没有线。我</p>\n<p>具有特定性质的关系：</p>\n<ul>\n<li>自反的：对于所有\na，必须都和自己有关系。所有人都和自己连上线了，不一定和对方连不连。关系矩阵主对角线上都是\n1。对于集合 A，如果它上的关系 rho 是自反的，那么 rho 里的序偶里一定有 A\n的所有元素各个复读一遍</li>\n<li>反自反的：对于所有\na，都不能和自己有关系。所有人都不和自己连线，不一定和对方连不连。没有复读的</li>\n<li>对称的：对于所有 ab，如果 a 对 b 有关系，b 一定对 a\n有关系。所有连线都是双向的，或者自环。关系矩阵关于主对角线对称。对于所有的\nab，如果有 (a,b)，那么一定有 (b,a)</li>\n<li> 反对称的：对于所有 ab，如果 a 对 b 有关系，且 b 对 a 有关系，那么 ab\n一定相等。不存在双向的连线（但可以自环）。关系矩阵关于主对角线反对称，对应对称位置的值相反。对于不等的\nab，如果有 (a,b)，那么一定没有 (b,a)</li>\n<li> 恒等关系既是对称的，也是反对称的。因为它是集合里所有元素的自环。</li>\n<li>可传递的：对于所有 abc，如果 a 对 b 有关系，b 对 c 有关系，那么 a 和\nc 必须有关系。对于任意一条长度为 2\n的连续（同向）路径，它的起点必须可以直接通往终点。</li>\n</ul>\n<p><img src=\"/blog/images/关系-1.webp\"></p>\n<ul>\n<li><p>在非空集合上，一个自反关系一定不是反自反的，一个对称关系可能也是反对称的</p></li>\n<li><p>在空集上，空关系同时是自反、反自反、对称、反对称、可传递的。由于没有元素，条件 “空真” 地成立</p></li>\n<li><p>等价关系是自反、对称且可传递的关系。</p></li>\n<li><p>偏序关系是自反、反对称和可传递的关系。</p></li>\n</ul>\n<p><img src=\"/blog/images/关系-2.webp\"></p>\n<p>对实数集来说：</p>\n<ul>\n<li>小于等于关系是自反的。对于所有 a，有 a &lt;= a</li>\n<li> 小于等于关系是非对称的。由 1 &lt;= 2，但 2 不 &lt;= 1</li>\n<li> 小于等于关系是反对称的。如果 a &lt;= b，且 b &lt;= a，那么 a\n一定等于 b</li>\n<li> 小于等于关系是可传递的。所以实数集上的 “小于等于” 关系是偏序。偏序用符号\n≤ 表示。</li>\n</ul>\n<p>闭包是指，对一个不一定具有某个性质的，集合 A 上的关系\nrho，通过并的操作使它具有某个性质。在原来的线里多加几根线</p>\n<ul>\n<li>自反闭包 r：rho 并上 A 的恒等关系</li>\n<li>对称闭包 s：rho 并上 rho 的逆关系</li>\n<li>传递闭包 t：rho 的次方从 1 连并到 A\n的基数。次方是同一个关系多次复合，复合是找从起点集合到终点集合的连续路。关系的复合是可结合的</li>\n</ul>\n<p>r (rho)、s (rho)、t (rho) 分别是集合 A 上包含 rho\n的最小自反 / 对称 / 可传递的关系。</p>\n<p>对于一个等价关系，它的某个元素的等价类，从关系图上看，就是这个元素一坨所在的所有元素。等价分划就是把一坨一坨的分开。</p>\n<p>{1,2,3}\n的所有分划是：<code>{{1,2,3}}、{{1},{2,3}}、{{1,2},{3}}、{{1,3},2}、{{1},{2},{3}}</code></p>\n<p>A 的平凡分划就是\n{A}，是它上普遍关系导出的等价分划，是最粗的分划。最细的分划就是切成臊子，是恒等关系导出的等价分划。</p>\n<h3 id=\"函数\">函数</h3>\n<p>函数是从集合 A（起点）到集合\nB（终点）的一种特殊的关系。任取起点里的一个元素（像源），它保证往终点的某个像引出了有且只有一条线。</p>\n<p>从 A 到 B 的：</p>\n<ul>\n<li>关系，线可以有一对多的；函数，线不能有一对多的</li>\n<li>关系，定义域是 A 的子集；函数，定义域为 A</li>\n</ul>\n<p>函数的定义域是 A（因为是任取），值域是 B\n的子集（因为可能引到同一个终点元素身上），值域包是 B。</p>\n<p>如果 A 和 B\n是可数集，那么值域的元素个数可能等于定义域（双射），可能小于定义域（极端的都引到同一个终点元素身上），不可能大于定义域。</p>\n<p>内射的函数是，对于一个函数，任取起点里的两个不等元素，它们两个不会引到终点里的同一个元素上（没有多对一，再加上函数的定义保证它没有一对多，所以都是<strong>一对一</strong>）。即同一个像源只映射同一个像。A\n基数 == 值域元素个数 &lt;= B\n基数。当内射的值域取满值域包时，内射变为双射。</p>\n<p>满射就是，<strong>值域取满值域包</strong>。终点的所有元素都被起点连了。A\n基数大于等于 B 基数，<strong>可能有多对一的情况</strong>。</p>\n<p>内射且满射，称为双射。双射是一一对应的（内射保证），像和像源的个数相同，且等于\nB 的基数（满射保证取满值域包）</p>\n<p><img src=\"/blog/images/函数-1.webp\"></p>\n<p>幂等函数是指，对一个集合 A 上的函数 f，与自身复合任意次后（&gt;=2\n的整数）仍为 f</p>\n<p>A 与 B 等势（A~B） &lt;=&gt; 存在从 A 到 B\n的双射函数。实数集的所有开区间的子集都和实数集等势，我们都可以画出一个看起来像正切函数的一支的图像，把定义域映射到\nR</p>\n<ul>\n<li>可计数集\n<ul>\n<li>有限集：元素个数为某个正整数 m，基数是 m。或为空集，基数是 0。如\n{1,2,3}</li>\n<li> 可数集（无限的，且可以排成无穷序列的形式）：与自然数集\nN={0,1,2,3,...} 等势的集合，基数是阿列夫零。如 {2,4,6,8,...} 是 N\n的各个元素两倍 + 2 的双射\n<ul>\n<li>可数集与 [可数集 | 有限集] 的并集是可数集，[有限个 | 可数个] 可数集的并集是可数集</li>\n<li>有理数集 Q\n是可数集，任一个有理数都可以写成分数的形式，分子和分母所有可能的取值都是可数的。任一个有理数都可以写成有限小数或无限循环小数的形式</li>\n</ul></li>\n</ul></li>\n<li>不可数集（无限的）\n<ul>\n<li>无理数集是不可数的。无理数是无限不循环小数</li>\n</ul></li>\n</ul>\n<p>对于一个集族如 S = {A,B,C,D}，如果 A 与 B 的基数都是阿列夫零，C 与 D\n的基数都是阿列夫一，那么 S 上存在一个等价关系\n{(A,A),(A,B),(B,B),(C,D),(C,C),(D,D)}，它的等价分划是 <code>{{A,B},{C,D}}</code>，A\n的等价类是 {A,B}，A 和 B 同基（基数相同）。</p>\n<h3 id=\"二元运算与代数系统\">二元运算与代数系统</h3>\n<p>A = {1,2,3}</p>\n<p>A^2 = {(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)}</p>\n<p>A^3 = {(1,1,1),...}</p>\n<p>函数 A^2 -&gt; A：是 A 上的一个二元运算。n 元运算是把 A^n 映射到\nA。</p>\n<p>关系（或者说函数） {((1,1),2), ((1,2),3)} 不是 A\n上的二元运算，因为定义域不等于 A^2，A\n上的元素不是都和它自己以及和其他任一个元素起关系了。A 上的二元运算是从 A\n的笛卡尔积向 A 的映射，它的定义域里一定有 A\n里所有元素的不同排列方式的序偶。</p>\n<p>为什么除不是实数集上的二元运算，因为 (n,0) 的结果在 R\n里没有对应的像，所以 (n,0)\n不在定义域里，而运算要求定义域里一定要有值域包元素的所有序偶。</p>\n<p>减是实数集上的二元运算，但不是自然数集上的二元运算，因为 (1,4)\n如果有像，那么 -3\n是不在自然数集里的。减在实数集上封闭，在自然数集上不封闭。</p>\n<p>封闭：对于 A 上的二元运算 ◦，S 是 A 的子集，如果对于所有 S^2\n里的元素，在运算之后的结果在 S 里面，那么 ◦ 在 S 上是封闭的。</p>\n<p>对于二元运算 *：A^2 -&gt; A：</p>\n<ul>\n<li>单位元与元素运算，结果为原元素，e * a = a</li>\n<li> 零元与元素运算，结果为零元， z * a = z</li>\n<li> 幂等元和他自身运算的结果不变。二元运算的单位元和零元都是幂等元</li>\n<li>左单位元和 a 运算，a 不变。a 和右零元运算，结果为右零元</li>\n<li>不可能同时有不等值的 [左 | 右][单位元 | 零元]</li>\n<li>a 与其右逆元运算，结果是 e</li>\n<li> 当 A 的基数大于 1\n时，且存在单位元和零元时，那么它们不会是同一个元素</li>\n</ul>\n<p>实数集上的乘法运算，单位元是 1，零元是 0。对于非零元素\na，它的逆元是其倒数</p>\n<p>实数集上的加法运算，单位元是 0，没有零元。对于元素\na，它的逆元是其相反数</p>\n<p>实数集上的减法运算，右单位元是\n0，没有左单位元，没有零元。逆元是根据单位元定义的，所以没有逆元</p>\n<p>对于一个元素不多的二元运算，我们可以画出运算表，它的行标为左元素，列标为右元素，内容为运算结果。可以通过运算表里元素排列的形状判断某一个元素是不是单位元或零元。如图所示：</p>\n<p><img src=\"/blog/images/运算-1.webp\"></p>\n<p>{0,1} 上的：</p>\n<p><img src=\"/blog/images/运算-2.webp\"></p>\n<ul>\n<li>且运算，单位元是 1，零元是 0。且 1 不变，且 0 短路。</li>\n<li>或运算，单位元是 0，零元是 1。或 0 不变，或 1 短路。</li>\n<li>蕴含运算，左单位元是 1，右零元是 1</li>\n<li> 等值运算，单位元是 1</li>\n</ul>\n<p>&lt;S;o1,o2...&gt; 是代数系统。S 是非空集，称为代数系统的域，on\n是一个或多个定义在 S 上的运算（可以不同阶）。</p>\n<p>代数系统的基数是 S 的基数，若 S\n是有限集，则代数系统是有限代数系统。</p>\n<p>整环：对于一个代数系统 &lt;J;+,*&gt;，J\n是非空集，+ 和 * 是其上的二元运算，如果同时满足六个性质，则该代数系统为整环：</p>\n<ul>\n<li>+ 和 * 都满足交换律</li>\n<li> + 和 * 都满足结合律</li>\n<li> * 对于 + 满足分配律：a*(b+c) = a*b+a*c</li>\n<li>+ 和 * 都有单位元</li>\n<li>任取元素 a 对 + 可逆，a+a 的逆元 = “+ 的单位元”</li>\n<li> 对 * 的消去律：任取非 “+ 的单位元” 的 a，由 a*b = a*c，可得 b=c</li>\n</ul>\n<p>对 &lt;{0,1}; 或，且 &gt; 来说：</p>\n<ul>\n<li>两个运算的交换律、结合律、分配律都满足</li>\n<li>或的单位元是 0，且的单位元是 1</li>\n<li> 没有对或的可逆性：对 1\n来说，不存在它的逆元可以通过与它运算来获得或的单位元\n0，所以或是不可逆的。所以该代数系统不是整环</li>\n<li>有对且的消去律：由：1 且 b = 1 且 c，可得出\nb=c，所以满足对且的消去律。</li>\n</ul>\n<h3 id=\"群\">群</h3>\n<p>对于代数系统 &lt;S;*&gt;，S 是非空集，* 是 S 上的二元运算 S^2 -&gt;\nS</p>\n<ul>\n<li>如果 * 是可结合的，则该代数系统为半群</li>\n<li>若半群有单位元，则该半群为独异点</li>\n<li>若独异点的域里每个元素都有逆元，则该独异点为群</li>\n<li>若群的运算 * 是可交换的，则该群为阿贝尔群</li>\n</ul>\n<h3 id=\"命题逻辑-1\">命题逻辑</h3>\n<p>命题：参考洪帆主编的《离散数学基础（第三版）》，并加上了自己的狭隘理解，同时满足以下三条：</p>\n<ol type=\"1\">\n<li>它是一个陈述句</li>\n<li>它有一个自带的<strong>属性</strong>，叫<strong>真值</strong>，取\n<span class=\"math inline\">\\(0\\)</span> 或 <span class=\"math inline\">\\(1\\)</span></li>\n<li> 它的真值可以<strong>被判断</strong>（没有说被谁判断、在什么时间被判断）</li>\n</ol>\n<blockquote>\n<p>2x - 3 = 0 <br> 这句话是假的</p>\n</blockquote>\n<p>我们<strong>永远</strong>没法判断它们的真值是 <span class=\"math inline\">\\(0\\)</span> 还是 <span class=\"math inline\">\\(1\\)</span>（如果前者是一个陈述句而不是方程，我们不知道\nx 是什么东西的。后者……）。所以它们<strong>不是命题</strong>。</p>\n<blockquote>\n<p>2024 年 1 月 16 号体彩排列三的开奖号码是 703</p>\n</blockquote>\n<p>它是一个命题。它的真值可以被判断，因为这件事已经发生了，但需要我们<a href=\"https://www.zhcw.com/kjxx/pl3/\">查询资料</a>。</p>\n<blockquote>\n<p>2024 年 1 月 17 号体彩排列三的开奖号码是 555<br> &gt; <a href=\"https://music.163.com/song?id=1883951953\">太阳系外有宇宙人</a></p>\n</blockquote>\n<p>它们都是命题。它们的真值可以被判断，但不是现在。</p>\n<p>命题连结词，一元的只有：否定 <span class=\"math inline\">\\(\\neg\\)</span>，非……。下面都是二元的。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">logic</span>(<span class=\"params\">P: <span class=\"built_in\">bool</span>, Q: <span class=\"built_in\">bool</span></span>) -&gt; <span class=\"built_in\">bool</span>:</span><br></pre></td></tr></tbody></table></figure>\n<p>现在有一份鱼和一份熊掌。作为前件和后件。如果我们吃了，件的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span>；如果我们满足了（吃好了），复合命题的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span></p>\n<p>合取 <span class=\"math inline\">\\(\\wedge\\)</span>\n…… 且……：全吃了，我才满足</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P <span class=\"keyword\">and</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>析取 <span class=\"math inline\">\\(\\vee\\)</span>\n…… 或……（可兼的或）：只要有吃的，我就满足</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P <span class=\"keyword\">or</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>不可兼的叫<strong>异或</strong>。区别是：异或的鱼和熊掌只能吃一个，同时吃会生病。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P ^ Q</span><br></pre></td></tr></tbody></table></figure>\n<p>等值 <span class=\"math inline\">\\(\\leftrightarrow\\)</span>\n…… 当且仅当……：是异或的对立面：同或、完美主义：要么都吃，要么都不吃，只吃一个我就难受。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P == Q</span><br></pre></td></tr></tbody></table></figure>\n<p>蕴含 <span class=\"math inline\">\\(\\rightarrow\\)</span> …… 若则……：</p>\n<p>现在有【生】和【义】，作为前件和后件。如果我们保留了，件的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span>；如果我们满足了（垂名了），复合命题的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span></p>\n<p>注意：</p>\n<ul>\n<li>在蕴含的前件为假的情况下，复合命题为真。</li>\n<li>在蕴含的前件为真的情况下，复合命题的真值为后件的真值。</li>\n</ul>\n<p>如果我们<a href=\"https://music.163.com/song?id=2058806391\">把【生】舍了</a>，那还管它义不义，名字直接刻碑上了。或者这样记：如果一个人的<a href=\"https://music.163.com/song?id=4237850\">前提都搞错了</a>，那就没有必要和他讨论了，你说得都对。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">True</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> P <span class=\"keyword\">else</span> Q</span><br><span class=\"line\"><span class=\"keyword\">return</span> (<span class=\"keyword\">not</span> P) <span class=\"keyword\">or</span> Q</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">not</span> (P <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> Q))</span><br></pre></td></tr></tbody></table></figure>\n<p>一个文字游戏：除非 P，否则不 Q</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> P:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Q</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>就是当且仅当</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P == Q</span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"<p>大部分可以再认，少部分可以再现，更少部分可以迁移。</p>","more":"<h2 id=\"推断的有效性和可靠性\">推断的有效性和可靠性</h2>\n<p>推断是前提的集合加上结论。前提最少有一句，结论只有一句。</p>\n<p>一个推断是有效的：</p>\n<ul>\n<li>&lt;=&gt; 不存在当所有前提为真时，结论为假的情况</li>\n<li> &lt;=&gt; 对所有前提且的结果 =&gt; 结论</li>\n<li> &lt;=&gt; （对所有前提且的结果 -&gt; 结论）为重言式</li>\n</ul>\n<ol type=\"1\">\n<li>小明是人（P）</li>\n<li>小明不是人（非 P）</li>\n<li>因此，张三会飞（Q）</li>\n</ol>\n<p>评估有效性需要把所有真值指派的情况列出来：</p>\n<table>\n<thead>\n<tr>\n<th>P</th>\n<th> 非 P</th>\n<th>Q</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>1</td>\n<td> 未知</td>\n</tr>\n<tr>\n<td> 1</td>\n<td>0</td>\n<td> 未知</td>\n</tr>\n</tbody>\n</table>\n<p>列出来后发现：不存在当所有前提为真时，结论为假的情况。所以这个推断是有效的。从矛盾的前提可以推出任何结论。</p>\n<p>一个推断是可靠的 &lt;=&gt; 论证是有效的 且 它的所有前提实际为真</p>\n<p>假言三段论是类似于这样的推断：</p>\n<ol type=\"1\">\n<li>A -&gt; B</li>\n<li>B -&gt; C</li>\n<li> 因此，A -&gt; C</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>A</th>\n<th>B</th>\n<th>C</th>\n<th>A→B（前提 1）</th>\n<th>B→C（前提 2）</th>\n<th>A→C（结论）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>把真值表画出来之后，可以看到：当前提均为真时，结论一定为真。说明这个推断是有效的</p>\n<p>可靠性是针对一个具体论证实例的。当 ABC\n取具体的值的时候（一次真值指派），如果还能保证两个前提都是为真的，那么推断是可靠的</p>\n<p>对于这个推断来说：</p>\n<ol type=\"1\">\n<li>A -&gt; B（如果小明是湖北省出生的人，那么小明会飞）</li>\n<li>B -&gt; C（如果小明会飞，那么小明的身份证以 42 开头）</li>\n<li>因此，A -&gt; C（因此，如果小明是湖北省出生的人，那么小明的身份证以\n42 开头）</li>\n</ol>\n<p>现在我们知道的信息是：小明确实是湖北省出生的人，身份证以 42\n开头，也不会飞。那么 A=1，B=0，C=1，对应真值表的倒数第三行</p>\n<p>首先它是有效的。其次它是不可靠的（即使它的结论为真），因为第一个前提是假的，它没有保证所有前提都为真</p>\n<p>对于这个推断来说：</p>\n<ol type=\"1\">\n<li>A -&gt; B（如果小明是湖南人，那么小明是网络小说里的人物）</li>\n<li>B -&gt; C（如果小明是网络小说里的人物，那么小明会飞）</li>\n<li>因此，A -&gt; C（因此，如果小明是湖南人，那么小明会飞）</li>\n</ol>\n<p>现在我们知道的信息是：小明确实是网络小说里的湖南人，会飞。那么\nA=1，B=1，C=1</p>\n<p>首先它是有效的。其次它是可靠的，因为他的所有前提都是真的（即使第一个前提看起来有点问题），结论也是真的。【AI\n判定】</p>\n<p>【AI\n生成】第一个前提和结论都违背了常识，但在逻辑中，这并不影响推断的有效性或可靠性。逻辑只关心真值，而这里\nA→B 的真值由小明的具体属性保证（A 真且 B 真）。A→B\n的 “问题” 在于它的语义内容（内容上不现实），而非逻辑真值。逻辑只处理 “如果\nA 则 B” 的真假，不处理 “为什么 A 会导致 B”。</p>\n<h2 id=\"命题逻辑\">命题逻辑</h2>\n<p>在命题逻辑中，命题用大写字母表示，它的真值只能取 0 或\n1，所以也叫二值逻辑。具有确定真值的命题叫命题常元，真值不确定的命题叫命题变元。</p>\n<p>运算符（命题连接词）优先级：非、且、或、蕴含、等值</p>\n<p>形如 A -&gt; B\n的，叫条件命题，或者假言命题，它陈述的是某一事物情况是另一件事物情况的条件。</p>\n<ul>\n<li>充分条件：如果 A 那么 B。A -&gt; B\n为蕴含。当蕴含的前件为假时，复合命题为真；当蕴含的前件为真时，复合命题为后件的真值；</li>\n<li>充要条件：A &lt;-&gt; B，当 A 和 B\n真值一致时，复合命题为真，否则为假</li>\n</ul>\n<p>命题公式的递归定义：</p>\n<ol type=\"1\">\n<li>0、1 是命题公式</li>\n<li>命题变元是命题公式</li>\n<li>如果 A 是命题公式，那么！A 是命题公式</li>\n<li>如果 A 和 B 是命题公式，那么 (A and B)、(A or B)、(A -&gt; B)、(A\n&lt;-&gt; B) 是命题公式</li>\n<li>只有有限次利用上述四点所产生的符号串才是命题公式</li>\n</ol>\n<p>真值表是对于一个命题公式，把它的命题变元的真值指派的所有情况列出来，再计算结果。</p>\n<ul>\n<li>重言式 &lt;=&gt; 1（对它的所有真值指派都为 1）如 A or 1</li>\n<li> 矛盾式 &lt;=&gt; 0（对它的所有真值指派都为 0）如 A and !A</li>\n</ul>\n<p>如果对命题公式 F 的真值指派中，存在一个是取值为真的，那么 F\n称为可满足的公式。重言式 =&gt; 可满足的公式</p>\n<p>命题公式的代换实例是指，对一个命题公式，把它的一个命题变元 A\n用另一个公式 B 代换，且它里面的所有 A 都被 B 代换了。</p>\n<p>代入规则：重言式的代换实例仍然是重言式。因为重言式 &lt;=&gt;\n1，不受被代换的命题变元取值影响。</p>\n<p>子公式是指一个命题公式的一部分（连续的几个符号），且它仍然是公式。</p>\n<p>置换规则：对一个命题公式里 A 的子公式 B，如果用与该子公式等值的公式 C\n去替代子公式 B，那么替换后得到的 D 与 A 等值。</p>\n<p>对偶：对一个命题公式，把它的所有且或变号，01\n互变，得到的新公式是原公式的对偶。</p>\n<h3 id=\"命题公式的等值关系和蕴含关系\">命题公式的等值关系和蕴含关系</h3>\n<p>等值关系可以双向推，蕴含关系只能从左向右推。</p>\n<ul>\n<li>等值演算 (&lt;=&gt;) 像是告诉你两个数学表达式（如 (a+b)² 和 a² + 2ab\n+ b²）在数值上总是相等的，你可以互相替换。</li>\n<li>蕴含关系 (=&gt;) 像是告诉你一条推理规则（如 “如果 a &gt; b 且 b &gt;\nc，那么 a &gt;\nc”）。它定义了从已知事实推导出新事实的合法途径。反过来不一定成立</li>\n</ul>\n<p>&lt;-&gt; 是命题连接词，经 &lt;-&gt; 连接后的是命题公式。而 &lt;=&gt;\n是命题公式之间的关系符号，表示两个命题公式之间的等值关系。</p>\n<p>A &lt;=&gt; B 充要条件：</p>\n<ul>\n<li>A &lt;-&gt; B 是永真式（&lt;=&gt; 的定义）</li>\n<li>在任一组真值指派后，这两个公式的值一致（&lt;-&gt; 的定义）</li>\n</ul>\n<hr>\n<p>=&gt; 表示命题公式间的蕴含关系。</p>\n<p>A =&gt; B 充要条件：</p>\n<ul>\n<li>A -&gt; B 是永真式（=&gt; 的定义）</li>\n<li>在对他们进行的所有真值指派里，当 A 为真时，B 一定为真\n<ul>\n<li>必要性：如果 A -&gt; B 是重言式，意味 A 和 B 的取值只可能在第\n1、2、4 行里。所以说，在对他们进行的所有真值指派里，当 A 为真时，B\n一定为真</li>\n<li>充分性：如果对 AB 进行的所有真值指派里，当 A 为真时，B\n一定为真，意味 A 和 B 的取值只可能在第 4 行里。所以 A -&gt; B\n是永真式</li>\n</ul></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th> A</th>\n<th>B</th>\n<th>A-&gt;B</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>前件也可以是一个集合。若 {A,B} =&gt;\nC，说明：在对他们进行的所有真值指派里，当 {A,B} 中公式同时为真时，C\n一定为真。对于一个推断，前提为 A 和 B，结论为\nC。如果这个推断是有效的，那么 {A,B} =&gt; C，或者说（A 且 B）=&gt;\nC，或者说 （A 且 B）-&gt; C &lt;=&gt; 1</p>\n<p>如何推证 A =&gt; B：有两种方法：</p>\n<ol type=\"1\">\n<li>先假定 A 为真，再检查 B 的真值。如果 B\n一定为真，蕴含关系成立；否则不成立。</li>\n<li>先假定 B 为假，再检查 A 的真值。如果 A\n不可能为真，蕴含关系成立；否则不成立。</li>\n</ol>\n<p>对 P and Q =&gt; P 来说：</p>\n<ul>\n<li>假定前件 P and Q 为真，那么 P 一定为真。所以蕴含关系成立</li>\n<li>假定后件 P 为假，那么前件为假（不可能为真），所以蕴含关系成立</li>\n</ul>\n<p>对 P or Q =&gt; P 来说：</p>\n<ul>\n<li>假定前件 P or Q\n为真，那么后件的真值是不确定的。所以蕴含关系不成立</li>\n<li>假定后件 P\n为假，那么前件的真值是不确定的（可能为真），所以蕴含关系不成立</li>\n</ul>\n<h3 id=\"命题公式的等值演算\">命题公式的等值演算</h3>\n<ul>\n<li>对于两个命题，单独的或和且间有交换律，三个命题间有结合律。和乘法和加法类似\n<ul>\n<li>分配律：（A 且 B）或（A 且 C）&lt;=&gt; A 且（B 或 C）</li>\n</ul></li>\n<li>两命题且或的运算\n<ul>\n<li>且 1 或 0 不变：同一律</li>\n<li>且 0 或 1 短路：零一律</li>\n<li>且自身或自身不变：等幂律</li>\n<li>矛且 0，矛或 1：互否律</li>\n</ul></li>\n<li>吸收律：三个命题以一且一或连接，后两个有括号，且前两个命题相同，那么它的值为第一个命题的值</li>\n<li> P 蕴含 Q &lt;=&gt; 非 P 或 Q &lt;=&gt; (P 蕴含 Q) 且 (Q 蕴含 P)</li>\n<li>P 等值 Q：析取范式，非号聚集；合取范式，非号分散</li>\n</ul>\n<p><img src=\"/blog/images/P==Q.webp\"></p>\n<ul>\n<li>对命题公式 A 最外面加非 &lt;=&gt; 把 A\n的对偶公式里的所有命题变元加非\n<ul>\n<li>德摩根律：多个命题以且 / 或连接，括号外有一个非，那么可以把非分配到括号里的各个命题上，并把且或变号</li>\n</ul></li>\n</ul>\n<p>通过命题公式的等值演算证明，一对矛盾的前提可以推出任何结论：</p>\n<p><img src=\"/blog/images/P-and-not-P.webp\"></p>\n<h3 id=\"范式\">范式</h3>\n<p>当我们说 ^A 的主？[析合] 取范式是 B$ 的时候，意味着 A&lt;=&gt;B。</p>\n<p>析取就是或，合取就是且。</p>\n<ul>\n<li>质合取式：由命题变元或其否定以连且的方式连接到一起。P and Q and !R\n<ul>\n<li>质合取式是矛盾式的充要条件是，它里面同时含有一个命题变元及其否定</li>\n<li>充分性：矛且为 0，0 且短路</li>\n<li>必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全\n1，整体为 1 不矛盾，假设不成立</li>\n</ul></li>\n<li>质析取式：由命题变元或其否定以连或的方式连接到一起。P or Q or !R\n<ul>\n<li>质析取式是重言式的充要条件是，它里面同时含有一个命题变元及其否定</li>\n<li>充分性：矛或为 1，1 或短路</li>\n<li>必要性：假设质合取式中没有同时含有一个命题变元及其否定，那么总能指派真值使得它每个部分全\n0，整体为 0 不重言，假设不成立</li>\n</ul></li>\n<li>析取范式：外层是析取，内层是质合取式。（且且）或（且且）或（且且）</li>\n<li>合取范式：外层是合取，内层是质析取式</li>\n</ul>\n<p>任一公式都可变换成与它等值的析取范式或者合取范式，可能不止一种。变换的过程：</p>\n<ol type=\"1\">\n<li>把蕴含改写成：非 P 或\nQ，等值改写成：析取范式非号聚集；合取范式非号分散</li>\n<li>用德摩根律把括号外的否定号向内深入到命题变元身上</li>\n<li>用双重否定律消去非非</li>\n<li>用分配律把：\n<ul>\n<li>P 且（Q 或 R）变成（P 且 Q）或（P 且 R）的析取范式</li>\n<li> P 或（Q 且 R）变成（P 或 Q）且（P 或 R）的合取范式</li>\n</ul></li>\n</ol>\n<ul>\n<li>由一些命题变元产生的最小项，是类似于连且的质合取式，但是没有重复的变元。如对于命题变元\nA 和 B， A 且 非 A 且 B 是一个质和取式，但不是最小项。最小项类似 A 且 非\nB\n<ul>\n<li>对所有最小项进行真值指派，在每次真值指派里，有且只有一个最小项取值为\n1</li>\n<li> 对某一个最小项进行真值指派，在所有真值指派里，有且只有一次取值为\n1</li>\n</ul></li>\n<li> 由一些命题变元产生的最大项，是类似于连或的质析取式，但是没有重复的变元。</li>\n<li>主析取范式：由不同最小项为质合取式形成的析取范式。如变元 A、B\n的其中一个主析取范式是：（A 且 B）或（非 A 且 B）</li>\n<li>主合取范式：由不同最大项为质析取式形成的合取范式。如变元 A、B\n的其中一个主合取范式是：（A 或 B）且（A 或 非 B）</li>\n</ul>\n<p>A 是重言式：</p>\n<ul>\n<li>&lt;=&gt; A\n的合取范式中（外层连且）每一质析取式（内层连或）都至少有一对矛盾的命题变元\n<ul>\n<li>充分性：矛或为 1，内层短路，全且 1 为 1</li>\n<li> 必要性：假设 A 的某一质析取式 Ai 不包括互矛的，那么 Ai\n不是重言式，进而存在一组真值指派使 Ai 为假，外层连且短路为假，与 A\n是永真式矛盾，假设不成立</li>\n</ul></li>\n<li> &lt;=&gt; A 的主析取范式中出现了所有最小项\n<ul>\n<li>充分性：对它的所有最小项进行一次真值指派后，必定是一个真而其他全假，因为最小项是连且的，只有一种情况取\n1。1 在连或中短路，所以主析取范式为重言式</li>\n<li>必要性：假设 A\n的主析取范式中没有出现所有最小项，至少漏了一个，那么对于某次真值指派，可能恰好为漏的那一项为\n1，其他项都为 0 的情况，造成析取的结果是 0，与 A\n是重言式矛盾，假设不成立</li>\n</ul></li>\n</ul>\n<p>A 是矛盾式：</p>\n<ul>\n<li>&lt;=&gt; A\n的析取范式中（外层连或）每一质合取式（内层连且）都至少有一对矛盾的命题变元\n<ul>\n<li>充分性：矛且为 0，内层短路，全或 0 为 0</li>\n</ul></li>\n<li>&lt;=&gt; A 的主析取范式是空公式 0</li>\n</ul>\n<p><img src=\"/blog/images/111.webp\"></p>\n<h2 id=\"谓词逻辑\">谓词逻辑</h2>\n<p>可以独立存在的物体称为个体。可以是形象的如人，抽象的如唯物主义。</p>\n<p>一元谓词刻画的是个体的性质，n 元谓词刻画的是 n 个个体之间的关系。</p>\n<p>下面的谓词讨论的是谓词常元，不包括谓词变元。</p>\n<ul>\n<li>一元谓词 P：是大学生</li>\n<li>个体常元 a：张三</li>\n<li>个体变元 x</li>\n<li> 简单命题函数 P (x)：x\n是大学生。当命题函数里的所有个体变元都取值后，且可以计算出真值，才为命题</li>\n<li>命题、零元谓词 P (a)：张三是大学生</li>\n<li>二元谓词 Q：前者比后者高</li>\n<li>简单命题函数 Q (x,y)：x 比 y 高</li>\n<li>个体常元 b：李四</li>\n<li>命题、零元谓词 Q (a,b)：张三比李四高</li>\n<li>复合命题函数 P (x) and Q (x,y)：x 是大学生，且 x 比 y 高</li>\n<li>在命题函数中，个体变元的取值范围叫个体域，是命题函数的定义域</li>\n<li>量词有全称量词 ∀（个体域中任取一 x），存在量词 ∃（个体域中至少存在一\nx），存在唯一量词 ∃!（个体域中存在唯一一 x）</li>\n<li>全总个体域：一切事物构成的集合</li>\n</ul>\n<blockquote>\n<p>人总是会犯错误的<br> 有的人用左手写字</p>\n</blockquote>\n<ul>\n<li>H (x)：x 是人</li>\n<li> M (x)：x 会犯错误</li>\n<li> L (x)：x 用左手写字</li>\n<li>∀x (H (x) -&gt; M (x))：在全总个体域里的世间万物里任取 x，如果 x\n是人，那么 x 是会犯错误的</li>\n<li>∃x (H (x) and L (x))：在全总个体域里的世间万物存在 x，x 是人且 x\n用左手写字</li>\n</ul>\n<p>原子谓词公式是不含量词的谓词 P</p>\n<p>量词 “[任取 | 存在] x” 的优先级比命题连接词的优先级高，并与其右的谓词公式\nP 左结合。x 称为量词的指导变元，P 称为量词的辖域。</p>\n<p>在 “[任取 | 存在] x” 的辖域里，x 是约束变元，x 之外的变元是自由变元。</p>\n<h2 id=\"传统逻辑\">传统逻辑</h2>\n<h3 id=\"直言命题\">直言命题</h3>\n<p>形如 所有 A 都是 B\n的叫直言命题，是传统逻辑的范畴。直言命题陈述的是两个类之间的包含关系。每一个命题的结构是：[量项][主项][连项][谓项]。量项包括全称量词、特称量词和单称量词；连项包括肯定和否定。</p>\n<p>每一个直言命题有四种语气：AEIO 分别代表全肯，全否，特肯，特否。</p>\n<ul>\n<li>A 型：全称肯定（所有 S 是 P），例如 “所有人都是会死的”。</li>\n<li>E 型：全称否定（没有 S 是 P），例如 “没有人是完美的”。</li>\n<li>I 型：特称肯定（有些 S 是 P），例如 “有些鸟会飞”。</li>\n<li>O 型：特称否定（有些 S 不是 P），例如 “有些苹果不是红色的”。</li>\n</ul>\n<h3 id=\"直言命题的换质和换位ai-生成\">直言命题的换质和换位【AI\n生成】</h3>\n<p>对直言命题来说，换质是指通过改变命题的 “质”（肯定或否定），并对谓词取补集，得到一个新命题。换质后，新命题与原命题逻辑等价。操作步骤：</p>\n<ul>\n<li>A 型（所有 S 是 P） → 换质为 E 型（没有 S 是非 P）。</li>\n<li>E 型（没有 S 是 P） → 换质为 A 型（所有 S 是非 P）。</li>\n<li>I 型（有些 S 是 P） → 换质为 O 型（有些 S 不是非 P）。</li>\n<li>O 型（有些 S 不是 P） → 换质为 I 型（有些 S 是非 P）。</li>\n</ul>\n<p>特点：换质是有效且等值的操作，适用于所有直言命题类型（A、E、I、O）。</p>\n<p>换位：通过交换主词（Subject）和谓词（Predicate）的位置，得到一个新命题。换位后，新命题不一定与原命题等价。规则：</p>\n<ul>\n<li>E 型（没有 S 是 P） → 换位为 E 型（没有 P 是\nS）。例如：“没有人是完美的” → “没有完美的人”（等价）。</li>\n<li>I 型（有些 S 是 P） → 换位为 I 型（有些 P 是 S）。例如：“有些鸟会飞”\n→ “有些会飞的是鸟”（等价）。</li>\n<li>A 型（所有 S 是 P） → 换位无效。标准换位不能直接应用，因为 “所有 S 是\nP” 换位为 “所有 P 是\nS” 不一定成立。例如：“所有人都是会死的” 换位为 “所有会死的都是人” 是假的（动物也会死）。</li>\n<li>O 型（有些 S 不是 P） →\n换位无效。不能直接换位。例如：“有些苹果不是红色的” 换位为 “有些红色的不是苹果” 可能真也可能假，不等价。</li>\n</ul>\n<p>特点：换位只对 E 型和 I 型 有效（新命题与原命题等价），对 A 型和 O\n型无效（可能产生不等价命题）。</p>\n<h3 id=\"直言三段论\">直言三段论</h3>\n<p>直言三段论由三个直言命题组成，AAA-1 的直言三段论是这样的：</p>\n<ol type=\"1\">\n<li>所有 M 是 P</li>\n<li> 所有 S 是 M</li>\n<li> 因此，所有 S 是 P</li>\n</ol>\n<p>在结论中的主词记为 S 是小项，谓词记为 P 是大项。包括 P\n的前提是大前提，包括 S\n的前提是小前提。没有出现在结论里，而在两个前提里重复出现的是中项 M。</p>\n<table>\n<colgroup>\n<col style=\"width: 26%\">\n<col style=\"width: 34%\">\n<col style=\"width: 39%\">\n</colgroup>\n<thead>\n<tr>\n<th></th>\n<th>肯定：谓项都不周延</th>\n<th>否定：谓项都周延</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>全称：主项都周延</strong></td>\n<td> A：所有主 + 是谓 -，主包含在谓里</td>\n<td> E：没有主 + 是谓 +，主谓互斥</td>\n</tr>\n<tr>\n<td><strong>特称：主项都不周延</strong></td>\n<td> I：有些主 - 是谓 -，主谓有交</td>\n<td> O：有些主 - 不是谓 +，主不包含在谓里</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"/blog/images/AEIO.webp\"></p>\n<p>周延指的是，一个词项涵盖了他的所有外延。+ 记为周延，- 记为不周延。</p>\n<blockquote>\n<p>小明是只有一只脚的；小明是人；因此，人是只有一只脚的</p>\n</blockquote>\n<p>在它的结论中人是周延的，指的是所有人。而在小前提中的人是没有周延的，只包括小明一个人。</p>\n<p>当我们说 “A 是 B” 的时候，往往意味着 A 在 B 的范围内，A 是 B\n的一部分；说 “A 不是 B” 的时候，往往意味着 A 一点都不在 B 里面。</p>\n<p>所以说肯定判断的谓项都不周延，否定判断的谓项都周延。</p>\n<ul>\n<li>肯定判断的谓项都不周延：所有武汉人 + 都是科学家 -（全肯\nA），或有些武汉人 - 是科学家 -（特肯\nI），这里的科学家没有周延到所有科学家</li>\n<li>否定判断的谓项都周延：所有武汉人 + 都不是科学家 +（全否\nE），或有些武汉人 - 不是科学家 +（特否\nO），这里的科学家周延到了所有科学家</li>\n<li>特称判断的主项都不周延：因为是以有些…… 开头的</li>\n<li>全称判断的主项都周延：因为是以所有 / 没有…… 开头的。单称命题主词包括的对象只有一个，所以也周延</li>\n</ul>\n<p>格指的是，在大前提和小前提中，大项、小项和中项的排列顺序。结论的顺序一定是\nS-P，小项 - 大项</p>\n<ul>\n<li>第 1 格：中项一左一右，是分开的。大前提 M-P，小前提 S-M</li>\n<li> 第 2 格：中项都在右边。大前提 P-M，小前提 S-M</li>\n<li> 第 3 格：中项都在左边。大前提 M-P，小前提 M-S</li>\n<li> 第 4 格：中项一右一左，是聚集的。大前提 P-M，小前提 M-S</li>\n</ul>\n<blockquote>\n<p>小明只有一只脚；小明是人；因此，人只有一只脚</p>\n</blockquote>\n<p>它的中项都在左边，所以是第三格。全肯 A，AAA-3 属于无效推理</p>\n<p>一个 EIO-2 的有效的（但不可靠的）三段论是这样的：</p>\n<ol type=\"1\">\n<li>没有安徽人是科学家（全否 E）</li>\n<li>有些中国人是科学家（特肯 I）</li>\n<li>因此，有些中国人不是安徽人（特否 O）</li>\n</ol>\n<p>如果把科学家替换成湖北人，就是有效且可靠的。</p>\n<p>如何判断三段论有效性：需要满足下列的所有规则。<a href=\"https://zh.wikipedia.org/wiki/%E7%9B%B4%E8%A8%80%E4%B8%89%E6%AE%B5%E8%AE%BA#%E6%9C%89%E6%95%88%E4%B8%89%E6%AE%B5%E8%AB%96%E5%BC%8F\">或者画韦恩图，或者查表</a></p>\n<ol type=\"1\">\n<li>结论中否定命题的数目必须和前提中否定命题的数目相等</li>\n<li>结论中特称命题的数目必须和前提中特称命题的数目相等</li>\n<li>结论中周延的词必须在前提中周延</li>\n<li>中项必须周延至少一次</li>\n</ol>\n<p>如果语境上不能假设所有提及的集合非空，部分推论将会无效。</p>\n<h2 id=\"形式谬误\">形式谬误</h2>\n<p>形式谬误的推理过程是无效的。</p>\n<p>有效的选言三段论是这样的：也叫析取三段论，或拒取式。</p>\n<ol type=\"1\">\n<li>P 或 Q</li>\n<li> 非 P</li>\n<li> 所以 Q</li>\n</ol>\n<p>它对应肯定选言的谬误：</p>\n<ol type=\"1\">\n<li>P 或 Q</li>\n<li>P</li>\n<li> 所以 Q 为假</li>\n</ol>\n<h3 id=\"命题逻辑谬误\">命题逻辑谬误</h3>\n<p>手电筒发光有两个条件：电池有电，且开关打开了。</p>\n<ul>\n<li>肯定后件：如果手电筒发光了，那么它是有电的；手电筒是有电的；因此手电筒正在发光</li>\n<li>否定前件：如果手电筒发光了，那么它是有电的；手电筒没有发光；因此手电筒是没电的</li>\n</ul>\n<p>发现肯定后件、否定前件、肯定选言、否定联言的方式都是：通过真值表的复合命题列，加上简单命题其中的一列，找另一个简单命题列在真值表里有两种的情况，强制把它推向其中一种。如：</p>\n<table>\n<colgroup>\n<col style=\"width: 24%\">\n<col style=\"width: 21%\">\n<col style=\"width: 54%\">\n</colgroup>\n<thead>\n<tr>\n<th>P：手电筒正在发光</th>\n<th> Q：它的电池有电</th>\n<th>蕴含：若手电筒正在发光，则它的电池有电</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>“若 P 则 Q” 为真时\n<ul>\n<li>P 为假时，Q 有两种情况（否定前件谬误：若 P 则 Q 为真，P 为假，推出 Q\n为假）</li>\n<li>P 为真时，Q\n只有一种情况（这是有效的，肯定前件的推理。手电筒正在发光，说明它的电池一定有电）</li>\n<li>Q 为假时，P\n只有一种情况（这是有效的，否定后件的推理。手电筒的电池没电，说明它一定不会发光）</li>\n<li>Q 为真时，P 有两种情况（肯定后件谬误：若 P 则 Q，Q，因此 P）</li>\n</ul></li>\n</ul>\n<h2 id=\"过去的碎片\">过去的碎片</h2>\n<p>我们用 <span class=\"math inline\">\\(m\\)</span> 表示样本数量，与维度\n<span class=\"math inline\">\\(n\\)</span> 区分开。用 <span class=\"math inline\">\\(d\\)</span> 表示属性的个数。</p>\n<p>粗斜体小写字母为列向量，如 <span class=\"math inline\">\\(\\boldsymbol{x}=(1;2;3)\\)</span>，使用分号分隔。其转置为行向量，使用逗号分隔。</p>\n<p>粗斜体大写字母为矩阵。在上下文明确的情况下可不用粗体。</p>\n<p>在上下文明确的情况下可省略求和符号的起止。</p>\n<h3 id=\"概率论与数理统计知识\">概率论与数理统计知识</h3>\n<p><span class=\"math inline\">\\(\\sum x_i = m\\bar{x}\\)</span></p>\n<p>离散型随机变量函数的期望 <span class=\"math inline\">\\(E(f(X))\\)</span>：<a href=\"https://blog.csdn.net/SpiritedAway1106/article/details/107024984\">参考</a>。<span class=\"math inline\">\\(f\\)</span> 是连续函数且级数绝对收敛，<span class=\"math inline\">\\(E(f(X)) = \\sum P(x_i)f(x_i)\\)</span></p>\n<p>离散型随机变量的信息熵 <span class=\"math inline\">\\(H(X)\\)</span>：</p>\n<p>信息量 <span class=\"math inline\">\\(I(x_i) = -\n\\log_2{P(x_i)}\\)</span>：投一次正八面体骰子（0-7\n点），有概率均等的八种结果。把每种结果都用 3 bit 的二进制数表示，熵为 3\nbit。</p>\n<ul>\n<li>信息 “结果是 1 点” 的信息量是 3 bit，得到这个信息之后，熵剩余 0\nbit</li>\n<li> 信息 “结果是 1 点或 2 点的其中之一” 的信息量是 2\nbit，得到这个信息之后，熵剩余 1 bit</li>\n<li> 信息 “结果是 1、2、3、4 点的其中之一” 的信息量是 1\nbit，得到这个信息之后，熵剩余 2 bit</li>\n</ul>\n<p>信息熵 <span class=\"math inline\">\\(H(X) = E(I(X)) = - \\sum p_i \\log_2\np_i\\)</span>。</p>\n<ul>\n<li>投一次正八面体骰子，点数结果的信息熵是 3 bit</li>\n<li> 投一次 1% 概率为正面，99% 概率为反面的不均匀硬币，面结果的信息熵约\n0.08 bit</li>\n<li> 投一次 25% 概率为正面，75% 概率为反面的不均匀硬币，面结果的信息熵约\n0.811 bit</li>\n</ul>\n<p>多重集合的信息熵：可能的最小值（全同）为 0，最大值（全异）为 log2\n唯一值数量。</p>\n<p><span class=\"math inline\">\\(A = \\{ 1,2,2,2 \\}\\)</span></p>\n<p><span class=\"math inline\">\\(H(A) \\approx 0.811\\)</span></p>\n<p>多重集合划分后的信息熵：如把多重集合 <span class=\"math inline\">\\(\\{\n1,2,2,2 \\}\\)</span> 划分成两个子集 <span class=\"math inline\">\\(\\{1\\}\\)</span> 和 <span class=\"math inline\">\\(\\{2,2,2\\}\\)</span> 后，信息熵变为 <span class=\"math inline\">\\(0\\)</span>。其划分后的信息熵定义为各个子集熵的加权和，权为子集容量占原集合的比例。划分后减少的信息熵称为划分后的信息增益。</p>\n<p>基尼指数：可能的最小值（全同）为 0，最大值（全异）为 1 -\n唯一值数量的倒数。</p>\n<p><span class=\"math inline\">\\(A = \\{ 1,2,2,2 \\}\\)</span></p>\n<p><span class=\"math inline\">\\(G(A) = 1- \\sum p_i^2 =\n\\frac{3}{8}\\)</span></p>\n<p>类似地，划分后的基尼指数定义为各个子集基尼指数的加权和，权为子集容量占原集合的比例。</p>\n<h3 id=\"线性代数知识\">线性代数知识</h3>\n<ul>\n<li><span class=\"math inline\">\\(\\boldsymbol{a}^T \\boldsymbol{b} =\n\\boldsymbol{b}^T \\boldsymbol{a}\\)</span></li>\n<li><span class=\"math inline\">\\((\\boldsymbol{A} + \\boldsymbol{B})^T =\n\\boldsymbol{A}^T + \\boldsymbol{B}^T\\)</span></li>\n<li><span class=\"math inline\">\\((\\boldsymbol{AB})^T =\n\\boldsymbol{B}^T\\boldsymbol{A}^T\\)</span></li>\n<li> 矩阵和向量乘法分配律注意保证顺序不变，因为没有乘法交换律</li>\n<li>积的求和可以改写成两向量相乘 <span class=\"math inline\">\\(\\sum_{i=1}^m x_iy_i =\n\\boldsymbol{x}^T\\boldsymbol{y}\\)</span></li>\n<li> 遇到 “行向量乘列向量加标量” 的形式，可以把标量拆分成 1\n和它本身，再分别补到前面那两个向量的尾巴上</li>\n<li><span class=\"math inline\"> \\(\\boldsymbol{A}\\boldsymbol{b} =\n\\boldsymbol{c}\\)</span></li>\n<li><span class=\"math inline\">\\(\\boldsymbol{a}^T \\boldsymbol{B} =\n\\boldsymbol{c}^T\\)</span></li>\n<li> 行列式为零、非满秩、不可逆的方阵称为奇异矩阵</li>\n<li>矩阵的秩：变换为行阶梯型矩阵后的非零行数</li>\n</ul>\n<p>矩阵和行列式的几何意义：</p>\n<ul>\n<li><p>矩阵可表示多个向量：</p>\n<ul>\n<li>二阶行列式的绝对值是矩阵的两个列向量所张成的平行四边形的面积；</li>\n<li>三阶行列式的绝对值是矩阵的三个列向量所张成的平行六面体的体积；</li>\n<li>矩阵的秩是各向量张成空间的维数</li>\n</ul></li>\n<li><p>矩阵可表示对一个空间基（单位格子）的线性变换：</p>\n<ul>\n<li>用变换矩阵左乘一个向量，就是把该向量所在的空间做了变换。新坐标在旧空间里的位置与旧坐标在新空间里的位置一致。变换矩阵的行列式为新空间的单位格子相对于旧空间单位格子的面积 / 体积改变的倍数。</li>\n<li>行列式为零说明是降维打击，损失了信息，变换不可逆。</li>\n<li>行列式为负说明空间的手性改变了</li>\n</ul></li>\n</ul>\n<p>方阵的余子式 <span class=\"math inline\">\\(M_{ij}\\)</span> 和代数余子式\n<span class=\"math inline\">\\(A_{ij}\\)</span>：它们都是行列式，可以求值。</p>\n<ul>\n<li>余子式为划掉原方阵第 <span class=\"math inline\">\\(i\\)</span> 行 <span class=\"math inline\">\\(j\\)</span> 列后剩余的方阵的行列式。</li>\n<li>代数余子式为余子式加一个正 / 负号，看 <span class=\"math inline\">\\(i+j\\)</span> 是偶数还是奇数。</li>\n</ul>\n<p>方阵的顺序主子式：一个正方形框从左上角开始拉。它们都是行列式，可以求值。</p>\n<p>方阵的伴随矩阵 <span class=\"math inline\">\\(A^*\\)</span>：它是这样一个矩阵：新矩阵上每个位置的元素是原矩阵的一个代数余子式，代数余子式的下标和新矩阵位置的下标行列互换。对于二阶矩阵，它的伴随矩阵是主交换、副取反。</p>\n<p>方阵的逆矩阵 <span class=\"math inline\">\\(A^{-1}\\)</span>：等于伴随矩阵乘上行列式的倒数。</p>\n<p>高斯 - 若尔当方法：把增广矩阵 <span class=\"math inline\">\\(A|I\\)</span>\n初等行变换为 <span class=\"math inline\">\\(I|A^{-1}\\)</span></p>\n<p>方阵的特征值 <span class=\"math inline\">\\(\\lambda\\)</span>\n和特征向量：</p>\n<ul>\n<li>方阵左乘它的特征向量，等于把这个特征向量在它的方向上伸缩 / 反转 <span class=\"math inline\">\\(\\lambda\\)</span> 倍。</li>\n<li>如何求特征值：令特征多项式 <span class=\"math inline\">\\(|\\lambda\n\\boldsymbol{E} - \\boldsymbol{A}| = 0\\)</span></li>\n<li> 如何求特征向量：求 <span class=\"math inline\">\\((\\lambda\n\\boldsymbol{E} - \\boldsymbol{A})\\boldsymbol{x} = \\boldsymbol{0}\\)</span>\n的基础解系</li>\n<li><a href=\"https://blog.csdn.net/Daniel_tanxz/article/details/89132181\">如何求基础解系</a>：初等行变换成行最简型</li>\n</ul>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n\\boldsymbol{E}_r &amp; \\boldsymbol{F} \\\\\n0 &amp; 0\n\\end{pmatrix}\n\\]</span></p>\n<p>解矩阵为</p>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n- \\boldsymbol{F} \\\\\n\\boldsymbol{E}_{n-r}\n\\end{pmatrix}\n\\]</span></p>\n<p>正定矩阵充要条件：其所有特征值都为正。或者所有顺序主子式为正。</p>\n<p>正交矩阵：<span class=\"math inline\">\\(AA^T =\nE\\)</span>。正交矩阵的各行是单位向量且两两正交，各列是单位向量且两两正交。</p>\n<p>矩阵的奇异值分解是把一个矩阵分解成三个矩阵相乘：</p>\n<p><span class=\"math display\">\\[\nA = U \\Sigma V^T\n\\]</span></p>\n<p><span class=\"math inline\">\\(A\\)</span> 是实矩阵的情况下，<span class=\"math inline\">\\(U\\)</span> 和 <span class=\"math inline\">\\(V^T\\)</span> 都是正交矩阵，<span class=\"math inline\">\\(\\Sigma\\)</span> 是与 <span class=\"math inline\">\\(A\\)</span>\n形状相同的对角矩阵，其对角线上的元素叫奇异值，呈非负且按降序排列。</p>\n<p>如何分解：<span class=\"math inline\">\\(U\\)</span> 的每一列是 <span class=\"math inline\">\\(AA^T\\)</span> 的特征向量，<span class=\"math inline\">\\(V\\)</span> 的每一列是 <span class=\"math inline\">\\(A^TA\\)</span> 的特征向量，<span class=\"math inline\">\\(\\Sigma\\)</span> 对角线上每一个元素是 <span class=\"math inline\">\\(A^TA\\)</span> 或 <span class=\"math inline\">\\(AA^T\\)</span>\n的特征值开根号，注意保证各奇异值和特征向量对应。</p>\n<h3 id=\"高数知识\">高数知识</h3>\n<p>复合函数求导法则：把内层的中介写一遍，连乘</p>\n<p>Sigmoid 函数（对数几率函数）：<span class=\"math inline\">\\(S(x) =\n\\dfrac{1}{1+e^{-x}}\\)</span>，该函数图像长得和 <span class=\"math inline\">\\(\\dfrac{1}{\\pi} \\arctan x + \\dfrac{1}{2}\\)</span>\n差不多</p>\n<p><span class=\"math display\">\\[\n\\dfrac{1}{1+a^{-x}} + \\dfrac{1}{1+a^{x}} = 1\n\\]</span></p>\n<p><span class=\"math inline\">\\(n\\)</span> 元函数 <span class=\"math inline\">\\(f(\\boldsymbol{x})\\)</span>：自变量有 <span class=\"math inline\">\\(n\\)</span> 个，记作一个 <span class=\"math inline\">\\(n\\)</span> 维列向量 <span class=\"math inline\">\\(\\boldsymbol{x}\\)</span>。</p>\n<p>梯度（一阶导数） <span class=\"math inline\">\\(\\nabla f(\\boldsymbol{x})\n= \\dfrac{\\partial f(\\boldsymbol{x})}{\\partial\n\\boldsymbol{x}}\\)</span></p>\n<p>梯度是一个 <span class=\"math inline\">\\(n\\)</span>\n维向量，各个分量是原函数在其各个自变量分量上的偏导函数 <span class=\"math inline\">\\(\\dfrac{\\partial f(\\boldsymbol{x})}{\\partial\n{x_i}}\\)</span>，前提是各个偏导数都存在。如：</p>\n<p><span class=\"math display\">\\[\n\\nabla (5x_1+4x_1x_2+x_3) = (5+4x_2,4x_1,1)\n\\]</span></p>\n<p>海森矩阵（二阶导数） <span class=\"math inline\">\\(\\nabla^2\nf(\\boldsymbol{x}) = \\dfrac{\\partial^2 f(\\boldsymbol{x})}{\\partial\n\\boldsymbol{x}{\\partial\n\\boldsymbol{x}}^T}\\)</span>：海森方阵的每一个元素是原函数的二阶偏导数，前提是各个二阶偏导数都存在。如：</p>\n<p><span class=\"math display\">\\[\n\\nabla^2(2x_1 + x_1x_2) =\n\\begin{pmatrix}\n0 &amp; 1 \\\\\n1 &amp; 0\n\\end{pmatrix}\n\\]</span></p>\n<p>凸函数：这里的凸函数指下凸函数。</p>\n<p>凸函数任意两点的连线一定在函数图像上面，或与函数图像重合。如果一定在上面，我们称它为严格的凸函数。</p>\n<p>一元严格凸函数的例子：<span class=\"math inline\">\\(y =\nx^2\\)</span></p>\n<p>一元非严格凸函数的例子： <span class=\"math inline\">\\(y = x +\n1\\)</span></p>\n<p>如何判定一元函数是凸函数 / 严格凸函数：其二阶导数在区间上恒大于等于 / 大于零</p>\n<p>如何判定<strong>多元函数</strong>是凸函数 / <strong>严格凸函数</strong>：其<strong>海森矩阵</strong>在区间上是半正定 / <strong>正定</strong>的</p>\n<p>矩阵微分公式：</p>\n<ul>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{a}^T\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\frac{\\partial\n\\boldsymbol{x}^T \\boldsymbol{a}}{\\partial \\boldsymbol{x}} =\n\\boldsymbol{a}\\)</span> （南瓜书）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{A}\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}^T} = \\boldsymbol{A}\\)</span>\n（南瓜书）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{A}\n\\boldsymbol{x}}{\\partial \\boldsymbol{x}} = \\boldsymbol{A}^T\\)</span>\n（https://en.wikipedia.org/wiki/Matrix_calculus\n的<strong>分母布局</strong>）</p></li>\n<li><p><span class=\"math inline\">\\(\\frac{\\partial \\boldsymbol{x}^T\n\\boldsymbol{A} \\boldsymbol{x}}{\\partial \\boldsymbol{x}} =\n(\\boldsymbol{A} + \\boldsymbol{A}^T)\n\\boldsymbol{x}\\)</span>（南瓜书）</p></li>\n</ul>\n<h3 id=\"一元线性回归\">一元线性回归</h3>\n<p>目的：找出与平面直角坐标系上的 <span class=\"math inline\">\\(m\\)</span>\n个散点 <span class=\"math inline\">\\((x_i,y_i)\\)</span> 最接近的直线 <span class=\"math inline\">\\(\\hat{y} = wx+b\\)</span></p>\n<p>找出使残差平方和最小的直线的斜率、截距，即求：</p>\n<p><span class=\"math display\">\\[\n(w^*,b^*) = \\underset{(w,b)}{\\mathrm{arg\\ min}} \\sum_{i=1}^{m}\n(y_i-wx_i-b)^2\n\\]</span></p>\n<p><img src=\"/blog/images/residual-error.webp\"></p>\n<p>观测值（已知的，用于训练模型的样本 <span class=\"math inline\">\\(y\\)</span> 值）：<span class=\"math inline\">\\(y_i\\)</span></p>\n<p>估计值（给定一个 <span class=\"math inline\">\\(x_i\\)</span> 用模型\n<span class=\"math inline\">\\(\\hat{y} = wx+b\\)</span> 算出来的值）：<span class=\"math inline\">\\(\\hat{y_i}\\)</span></p>\n<p>残差：<span class=\"math inline\">\\(y_i-\\hat{y_i} =\ny_i-wx_i-b\\)</span></p>\n<p>这个公式是高中数学的内容，可以写成向量形式：</p>\n<p><span class=\"math display\">\\[\n\\begin{aligned}\nw &amp;= \\frac{\\boldsymbol{x}^T\\boldsymbol{y} - m\\bar{x}\\bar{y}}\n{\\boldsymbol{x}^T\\boldsymbol{x}-m\\bar{x}^2}\n= \\frac{\\boldsymbol{x}_d^T \\boldsymbol{y}_d}{\\boldsymbol{x}_d^T\n\\boldsymbol{x}_d} \\\\\nb &amp;= \\bar{y} - w\\bar{x}\n\\end{aligned}\n\\]</span></p>\n<p><span class=\"math inline\">\\(\\boldsymbol{x}_d\\)</span> 的各个分量是\n<span class=\"math inline\">\\(x_i - \\bar{x}\\)</span></p>\n<p>公式是怎么来的：</p>\n<ol type=\"1\">\n<li>残差平方和是关于 <span class=\"math inline\">\\(w\\)</span> 和 <span class=\"math inline\">\\(b\\)</span> 的二元函数，其海森矩阵为：</li>\n</ol>\n<p><span class=\"math display\">\\[\n\\begin{pmatrix}\n2 \\sum_{i=1}^m x_i^2 &amp; 2 \\sum_{i=1}^m x_i \\\\\n2 \\sum_{i=1}^m x_i &amp; 2m\n\\end{pmatrix}\n\\]</span></p>\n<p>只要有一个非零的 <span class=\"math inline\">\\(x\\)</span>\n值，它的一阶主子式就为正；由柯西不等式的一般形式，只要有不相等的 <span class=\"math inline\">\\(x\\)</span>，它的二阶主子式就为正。做一元线性回归至少需要三个不同的点，如果所有\n<span class=\"math inline\">\\(x\\)</span>\n值相同，或者都为零，就不用这个公式算了。只要用这个公式算，它的海森矩阵就是正定的，它是严格凸函数。</p>\n<ol start=\"2\" type=\"1\">\n<li>令梯度等于零向量，改写成用矩阵求解线性方程组的形式</li>\n<li>两边左乘系数矩阵的逆矩阵，得到 <span class=\"math inline\">\\((w;b)\\)</span></li>\n<li> 把 <span class=\"math inline\">\\(w\\)</span> 的分子分母同时除以 <span class=\"math inline\">\\(m\\)</span></li>\n<li> 目标直线必定过均值点</li>\n</ol>\n<h3 id=\"多元线性回归\">多元线性回归</h3>\n<p>目的：找出 <span class=\"math inline\">\\(n+1\\)</span> 维欧式空间里与\n<span class=\"math inline\">\\(m\\)</span> 个散点最接近的超平面：</p>\n<p><span class=\"math inline\">\\(f(\\boldsymbol{x}) = \\boldsymbol{w}^T\n\\boldsymbol{x} + b\\)</span> 的各项参数</p>\n<blockquote>\n<p>注意：这里的所有自变量（元）是一个 <span class=\"math inline\">\\(n\\)</span> 维向量 <span class=\"math inline\">\\(\\boldsymbol{x}\\)</span>。<span class=\"math inline\">\\(\\boldsymbol{w}\\)</span>\n是各个一次项的系数。函数的解析式是个一次多项式</p>\n</blockquote>\n<p>“最接近” 也可表示为 <span class=\"math inline\">\\(f(\\boldsymbol{x}_i)\n\\simeq y_i\\)</span>，即用模型算出来的值几乎等于观测值。</p>\n<p>“行向量乘列向量加标量” 的形式，把标量 <span class=\"math inline\">\\(b\\)</span> 拆分成 <span class=\"math inline\">\\(b\\)</span> 和 <span class=\"math inline\">\\(1\\)</span>，写到前面那两个向量的尾巴上。记 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}} =\n(\\boldsymbol{w};b)\\)</span>，<span class=\"math inline\">\\(\\hat{\\boldsymbol{x}} =\n(\\boldsymbol{x};1)\\)</span>，则：</p>\n<p><span class=\"math display\">\\[\nf(\\boldsymbol{x}) = \\hat{\\boldsymbol{w}}^T \\hat{\\boldsymbol{x}} =\n\\hat{\\boldsymbol{x}}^T \\hat{\\boldsymbol{w}}\n\\]</span></p>\n<p>公式：</p>\n<p>当 <span class=\"math inline\">\\(\\boldsymbol{X}^T\\boldsymbol{X}\\)</span>\n为正定矩阵时，<span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span>\n的全局最优解为：</p>\n<p><span class=\"math display\">\\[\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n\\]</span></p>\n<p>此时的模型为：</p>\n<p><span class=\"math display\">\\[\nf(\\hat{\\boldsymbol{x_i}}) = \\hat{\\boldsymbol{x}}_i^T\n(\\boldsymbol{X}^T\\boldsymbol{X})^{-1} \\boldsymbol{X}^T\\boldsymbol{y}\n\\]</span></p>\n<p>公式是怎么来的：</p>\n<p>找出使残差平方和 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n最小的各项的系数与常数项向量 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}^*\\)</span>，即求：</p>\n<p><span class=\"math display\">\\[\n\\underset{\\hat{\\boldsymbol{w}}}{\\mathrm{arg\\ min}}\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2\n\\]</span></p>\n<p>平方求和可改写成向量相乘，把括号里的向下影分身：</p>\n<p><span class=\"math display\">\\[\nE_{\\hat{\\boldsymbol{w}}} =\n\\sum_{i=1}^{m}\n(y_i - \\hat{\\boldsymbol{x}}_i^T \\hat{\\boldsymbol{w}})^2 =\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})^T\n(\\boldsymbol{y} - \\boldsymbol{X} \\hat{\\boldsymbol{w}})\n\\]</span></p>\n<blockquote>\n<p>这里影分身后的 <span class=\"math inline\">\\(\\boldsymbol{y}\\)</span> 和\n<span class=\"math inline\">\\(\\boldsymbol{X}\\)</span> 都有 <span class=\"math inline\">\\(m\\)</span> 行，<span class=\"math inline\">\\(\\boldsymbol{X}\\)</span> 的每一行为 <span class=\"math inline\">\\(\\hat{\\boldsymbol{x}}_i^T\\)</span></p>\n</blockquote>\n<p>把 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n展开，再对 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span>\n求导得：</p>\n<p><span class=\"math display\">\\[\n\\nabla E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T (\\boldsymbol{X} \\hat{\\boldsymbol{w}} -\n\\boldsymbol{y})\n\\]</span></p>\n<p><span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n的海森矩阵是一阶导数再对 <span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}^T\\)</span> 求一次导：</p>\n<p><span class=\"math display\">\\[\n\\nabla^2 E_{\\hat{\\boldsymbol{w}}} =\n2 \\boldsymbol{X}^T \\boldsymbol{X}\n\\]</span></p>\n<p>当海森矩阵为正定矩阵时，<span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span>\n为严格凸函数。令梯度等于零向量，求得的全局最优解为当 <span class=\"math inline\">\\(E_{\\hat{\\boldsymbol{w}}}\\)</span> 取最小值时的\n<span class=\"math inline\">\\(\\hat{\\boldsymbol{w}}\\)</span></p>\n<h3 id=\"梯度下降法\">梯度下降法</h3>\n<p>梯度下降法是用来逼近函数取极小值时的点的。</p>\n<p>以一元下凸函数 f (x) 为例，在右侧任意取一个 x\n值，函数图像在该点处下降最快的方向是该点的导数方向，且导数为正，此时需要向左逼近，把\nx 值变小；如果一开始在左侧取，则导数为负，需要向右逼近，把 x\n值变大。</p>\n<p>我们可以规定新取的 x 值等于上一步的 x\n值减去一个与它的导数符号相同的数，这样就可以保证新的取值是一定沿着上一步相对于极小值的下降方向。</p>\n<p>方向确定了，但是可能会移动过头。由于越平缓的地方导数绝对值是越小的，为了使移动的幅度与平缓程度相称，于是我们可以规定减去的那个数等于导数乘上另一个固定的正实数。</p>\n<p>用梯度下降法求方程的解，即求一个 x 使得函数 f (x) = 0\n。我们为了判断何时问题已经解决地足够好了，可以定义一个损失函数，它是用来量化离解决一个问题还有多长距离的量。</p>\n<p>最终目的是让求的 x 值使得 f (x) 的值更接近\n0，为了量化更接近零的程度，我们可以用原函数的平方作为损失函数。于是问题转化成了用梯度下降法求损失函数的极小值点。</p>\n<p>在编写程序的时候，计算一个点的导数，我们可以采用计算与它相邻极近两点的割线斜率。</p>\n<h2 id=\"十进制与-k-进制小数互转\">十进制与 K 进制小数互转</h2>\n<p>K 转 10：每一位分别乘上 K 的次方，再相加。</p>\n<h3 id=\"转-10\">2 转 10</h3>\n<p><strong>有限小数</strong></p>\n<p><span class=\"math inline\">\\(11.1011\\mathrm{B} = 3.6875\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>项</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(1\\times2^{1}\\)</span></td>\n<td><span class=\"math inline\">\\(2\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{0}\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-1}\\)</span></td>\n<td><span class=\"math inline\">\\(0.5\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0\\times2^{-2}\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-3}\\)</span></td>\n<td><span class=\"math inline\">\\(0.125\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(1\\times2^{-4}\\)</span></td>\n<td><span class=\"math inline\">\\(0.0625\\)</span></td>\n</tr>\n<tr>\n<td><strong> 总和</strong></td>\n<td><span class=\"math inline\"> \\(3.6875\\)</span></td>\n</tr>\n</tbody>\n</table>\n<p><strong>无限循环小数</strong></p>\n<p><span class=\"math inline\">\\(1.1 \\dot{0} 11 \\dot{0} ... \\mathrm{B} =\n1.7\\)</span></p>\n<p>可以转换成分数计算：</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n1.1 \\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = x \\\\\n11.\\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = 2x \\\\\n110110. \\dot {0} 11 \\dot {0} ... \\mathrm {B} &amp; = 32x \\\\\n两式相减，110011\\mathrm {B} &amp; = 30x \\\\\nx &amp; = \\frac {110011\\mathrm {B}}{30} = \\frac {51}{30} = 1.7\n\\end {aligned}\n\\]</span></p>\n<p>10 转 K：</p>\n<p>整数部分仍然除 K 取余，小数部分乘 K 取整，然后相加。</p>\n<h3 id=\"转-2\">10 转 2</h3>\n<p><span class=\"math inline\">\\(0.7  = 0.1 \\dot{0} 11 \\dot{0} ...\n\\mathrm{B}\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>小数部分乘 2</th>\n<th> 取整数部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(0.7 \\times 2 = 1.4\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.4 \\times 2 = 0.8\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.8 \\times 2 = 1.6\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.6 \\times 2 = 1.2\\)</span></td>\n<td><span class=\"math inline\">\\(1\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.2 \\times 2 = 0.4\\)</span></td>\n<td><span class=\"math inline\">\\(0\\)</span></td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"转-16\">10 转 16</h3>\n<p><span class=\"math inline\">\\(0.7  = 0.\\mathrm{B} \\dot{3} ...\n_{16}\\)</span></p>\n<table>\n<thead>\n<tr>\n<th>小数部分乘 16</th>\n<th> 取整数部分</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"math inline\"> \\(0.7 \\times 16 = 11.2\\)</span></td>\n<td><span class=\"math inline\">\\(\\mathrm{B}\\)</span></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(0.2 \\times 16 = 3.2\\)</span></td>\n<td><span class=\"math inline\">\\(3\\)</span></td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"离散数学\">离散数学</h2>\n<p>基础不牢。虽然之前及格了，但是什么都没学会。</p>\n<p>集合 A 的所有子集组成的集合，是集合 A 的幂集。{1,2} 的幂集是\n<code>{{},{1},{2},{1,2}}</code>。</p>\n<p>空集的幂集是 <code>{{}}</code> ，基数是 1。A\n的幂集的基数 &gt; A 的基数。</p>\n<p>元素都是集合的集合，称为集族。</p>\n<h3 id=\"关系\">关系</h3>\n<p>集合：所有 <span class=\"math inline\">\\((10,60)\\)</span>\n岁的人是一个集合 <span class=\"math inline\">\\(A\\)</span>，所有 <span class=\"math inline\">\\((30,80)\\)</span> 岁的人是一个集合 <span class=\"math inline\">\\(B\\)</span>。当然有人同时属于这两个群体，也有同时不属于的。</p>\n<p>笛卡尔积：把 <span class=\"math inline\">\\(A\\)</span> 放到左边，<span class=\"math inline\">\\(B\\)</span>\n放到右边。把左边的所有人和右边的所有人多对多配对，用一根根线连起来。这些<strong>所有线的集合</strong>叫笛卡尔积\n<span class=\"math inline\">\\(A \\times\nB\\)</span>。当然也有自己连自己的，以及连了两次、左右互换的。注意，这些线是有方向的，是从左往右连，即\n<span class=\"math inline\">\\(A \\times B \\not\\equiv B \\times\nA\\)</span></p>\n<p>关系：从这些线里任意取几根，或者全取，或者一根都不取。<strong>取出来的这几根线</strong>叫关系，记作\n<span class=\"math inline\">\\(\\rho\\)</span>。即关系是笛卡尔积的子集。<span class=\"math inline\">\\(\\rho \\subseteq A \\times B\\)</span>。<span class=\"math inline\">\\(\\rho\\)</span> 是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span>\n的一个关系，也是有顺序的。如果取出来的这几根线左边全是老师，线右边全是对应老师的学生，则\n<span class=\"math inline\">\\(\\rho\\)</span> 是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span> 的师生关系。张三在左边的 <span class=\"math inline\">\\(A\\)</span> 里面，代号是 <span class=\"math inline\">\\(a\\)</span>，李四在右边的 <span class=\"math inline\">\\(B\\)</span> 里面，代号是 <span class=\"math inline\">\\(b\\)</span>，连接它们的线记作 <span class=\"math inline\">\\((a,b)\\)</span>。如果这条线<strong>在</strong>\n<span class=\"math inline\"> \\(\\rho\\)</span> 里面，则记作 <span class=\"math inline\">\\(a \\rho\nb\\)</span>。即张三对李四<strong>有</strong>师生关系 <span class=\"math inline\">\\(\\rho\\)</span>，张三是李四的老师。不止他们两个人在师生关系\n<span class=\"math inline\">\\(\\rho\\)</span>\n里面。张三对李四的这根线，<strong>在取出来的线集 <span class=\"math inline\">\\(\\rho\\)</span>\n里面</strong>。这些线的集合才叫关系，而 <span class=\"math inline\">\\((a,b)\\)</span> 不叫关系，再起码也得 <span class=\"math inline\">\\(\\{(a,b)\\}\\)</span>。即 <span class=\"math inline\">\\(a \\rho b\\)</span> 的意思是 <span class=\"math inline\">\\((a,b) \\in \\rho\\)</span>， <span class=\"math inline\">\\((a,b)\\)</span> 这根线在 <span class=\"math inline\">\\(\\rho\\)</span> 这个线集里面。</p>\n<p>定义域和值域：现在有一个从 <span class=\"math inline\">\\(A\\)</span> 到\n<span class=\"math inline\">\\(B\\)</span> 的师生关系 <span class=\"math inline\">\\(\\rho\\)</span>，就是从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(B\\)</span>\n有一些线。被师生关系牵住的左边的所有人（老师），称为<strong>这个</strong>师生关系的定义域。右边的所有人（学生），称为<strong>这个</strong>师生关系的值域。这个师生关系是建立在\n<span class=\"math inline\">\\(A\\)</span> -&gt; <span class=\"math inline\">\\(B\\)</span> 这两个群体<strong>之上</strong>的。</p>\n<p>逆关系：从 <span class=\"math inline\">\\(B\\)</span> 到 <span class=\"math inline\">\\(A\\)</span> 的生师关系。记作 <span class=\"math inline\">\\(\\tilde{\\rho}\\)</span>。是 <span class=\"math inline\">\\(A\\)</span> 的各个序偶反过来写。</p>\n<p>集合 <span class=\"math inline\">\\(A\\)</span>\n上的关系：这两边可以放同一个集合，即从 <span class=\"math inline\">\\(A\\)</span> 到 <span class=\"math inline\">\\(A\\)</span> 的关系 <span class=\"math inline\">\\(\\rho\\)</span>，直接叫集合 <span class=\"math inline\">\\(A\\)</span>\n上的关系。即<strong>单个群体内部之间的线，包括自己连自己</strong>。</p>\n<p>前面说了，关系 <span class=\"math inline\">\\(\\subseteq\\)</span>\n笛卡尔积。对于 <span class=\"math inline\">\\(A\\)</span> 和 <span class=\"math inline\">\\(A\\)</span>\n的笛卡尔积，两边交换位置是相等的，可以记作 <span class=\"math inline\">\\(A^2\\)</span>。集合 <span class=\"math inline\">\\(A\\)</span> 上的关系 <span class=\"math inline\">\\(\\rho \\subseteq A^2\\)</span>。注意在此时，不一定有\n<span class=\"math inline\">\\(\\rho = \\tilde{\\rho}\\)</span>。如果 <span class=\"math inline\">\\((你，她)\\in \\rho\\)</span> 且 <span class=\"math inline\">\\(\\rho\\)</span> 是暗恋 ，不能保证 <span class=\"math inline\">\\((你，她)\\in \\tilde {\\rho}\\)</span>。<a href=\"https://music.163.com/#/song?id=430026359\"><strong>你对别人有暗恋关系，不能保证你对别人有暗恋关系的逆</strong></a>。</p>\n<p><img src=\"/blog/images/关系-0.webp\"></p>\n<p>普遍关系 <span class=\"math inline\">\\(U_A\\)</span>：所有人都连上线了，包括和自己。即这个关系<strong>等于笛卡尔积</strong>\n<span class=\"math inline\"> \\(A^2\\)</span>。大家</p>\n<p>恒等关系 <span class=\"math inline\">\\(I_A\\)</span>：所有人都和自己连上线了，但是互相之间没有线。我</p>\n<p>具有特定性质的关系：</p>\n<ul>\n<li>自反的：对于所有\na，必须都和自己有关系。所有人都和自己连上线了，不一定和对方连不连。关系矩阵主对角线上都是\n1。对于集合 A，如果它上的关系 rho 是自反的，那么 rho 里的序偶里一定有 A\n的所有元素各个复读一遍</li>\n<li>反自反的：对于所有\na，都不能和自己有关系。所有人都不和自己连线，不一定和对方连不连。没有复读的</li>\n<li>对称的：对于所有 ab，如果 a 对 b 有关系，b 一定对 a\n有关系。所有连线都是双向的，或者自环。关系矩阵关于主对角线对称。对于所有的\nab，如果有 (a,b)，那么一定有 (b,a)</li>\n<li> 反对称的：对于所有 ab，如果 a 对 b 有关系，且 b 对 a 有关系，那么 ab\n一定相等。不存在双向的连线（但可以自环）。关系矩阵关于主对角线反对称，对应对称位置的值相反。对于不等的\nab，如果有 (a,b)，那么一定没有 (b,a)</li>\n<li> 恒等关系既是对称的，也是反对称的。因为它是集合里所有元素的自环。</li>\n<li>可传递的：对于所有 abc，如果 a 对 b 有关系，b 对 c 有关系，那么 a 和\nc 必须有关系。对于任意一条长度为 2\n的连续（同向）路径，它的起点必须可以直接通往终点。</li>\n</ul>\n<p><img src=\"/blog/images/关系-1.webp\"></p>\n<ul>\n<li><p>在非空集合上，一个自反关系一定不是反自反的，一个对称关系可能也是反对称的</p></li>\n<li><p>在空集上，空关系同时是自反、反自反、对称、反对称、可传递的。由于没有元素，条件 “空真” 地成立</p></li>\n<li><p>等价关系是自反、对称且可传递的关系。</p></li>\n<li><p>偏序关系是自反、反对称和可传递的关系。</p></li>\n</ul>\n<p><img src=\"/blog/images/关系-2.webp\"></p>\n<p>对实数集来说：</p>\n<ul>\n<li>小于等于关系是自反的。对于所有 a，有 a &lt;= a</li>\n<li> 小于等于关系是非对称的。由 1 &lt;= 2，但 2 不 &lt;= 1</li>\n<li> 小于等于关系是反对称的。如果 a &lt;= b，且 b &lt;= a，那么 a\n一定等于 b</li>\n<li> 小于等于关系是可传递的。所以实数集上的 “小于等于” 关系是偏序。偏序用符号\n≤ 表示。</li>\n</ul>\n<p>闭包是指，对一个不一定具有某个性质的，集合 A 上的关系\nrho，通过并的操作使它具有某个性质。在原来的线里多加几根线</p>\n<ul>\n<li>自反闭包 r：rho 并上 A 的恒等关系</li>\n<li>对称闭包 s：rho 并上 rho 的逆关系</li>\n<li>传递闭包 t：rho 的次方从 1 连并到 A\n的基数。次方是同一个关系多次复合，复合是找从起点集合到终点集合的连续路。关系的复合是可结合的</li>\n</ul>\n<p>r (rho)、s (rho)、t (rho) 分别是集合 A 上包含 rho\n的最小自反 / 对称 / 可传递的关系。</p>\n<p>对于一个等价关系，它的某个元素的等价类，从关系图上看，就是这个元素一坨所在的所有元素。等价分划就是把一坨一坨的分开。</p>\n<p>{1,2,3}\n的所有分划是：<code>{{1,2,3}}、{{1},{2,3}}、{{1,2},{3}}、{{1,3},2}、{{1},{2},{3}}</code></p>\n<p>A 的平凡分划就是\n{A}，是它上普遍关系导出的等价分划，是最粗的分划。最细的分划就是切成臊子，是恒等关系导出的等价分划。</p>\n<h3 id=\"函数\">函数</h3>\n<p>函数是从集合 A（起点）到集合\nB（终点）的一种特殊的关系。任取起点里的一个元素（像源），它保证往终点的某个像引出了有且只有一条线。</p>\n<p>从 A 到 B 的：</p>\n<ul>\n<li>关系，线可以有一对多的；函数，线不能有一对多的</li>\n<li>关系，定义域是 A 的子集；函数，定义域为 A</li>\n</ul>\n<p>函数的定义域是 A（因为是任取），值域是 B\n的子集（因为可能引到同一个终点元素身上），值域包是 B。</p>\n<p>如果 A 和 B\n是可数集，那么值域的元素个数可能等于定义域（双射），可能小于定义域（极端的都引到同一个终点元素身上），不可能大于定义域。</p>\n<p>内射的函数是，对于一个函数，任取起点里的两个不等元素，它们两个不会引到终点里的同一个元素上（没有多对一，再加上函数的定义保证它没有一对多，所以都是<strong>一对一</strong>）。即同一个像源只映射同一个像。A\n基数 == 值域元素个数 &lt;= B\n基数。当内射的值域取满值域包时，内射变为双射。</p>\n<p>满射就是，<strong>值域取满值域包</strong>。终点的所有元素都被起点连了。A\n基数大于等于 B 基数，<strong>可能有多对一的情况</strong>。</p>\n<p>内射且满射，称为双射。双射是一一对应的（内射保证），像和像源的个数相同，且等于\nB 的基数（满射保证取满值域包）</p>\n<p><img src=\"/blog/images/函数-1.webp\"></p>\n<p>幂等函数是指，对一个集合 A 上的函数 f，与自身复合任意次后（&gt;=2\n的整数）仍为 f</p>\n<p>A 与 B 等势（A~B） &lt;=&gt; 存在从 A 到 B\n的双射函数。实数集的所有开区间的子集都和实数集等势，我们都可以画出一个看起来像正切函数的一支的图像，把定义域映射到\nR</p>\n<ul>\n<li>可计数集\n<ul>\n<li>有限集：元素个数为某个正整数 m，基数是 m。或为空集，基数是 0。如\n{1,2,3}</li>\n<li> 可数集（无限的，且可以排成无穷序列的形式）：与自然数集\nN={0,1,2,3,...} 等势的集合，基数是阿列夫零。如 {2,4,6,8,...} 是 N\n的各个元素两倍 + 2 的双射\n<ul>\n<li>可数集与 [可数集 | 有限集] 的并集是可数集，[有限个 | 可数个] 可数集的并集是可数集</li>\n<li>有理数集 Q\n是可数集，任一个有理数都可以写成分数的形式，分子和分母所有可能的取值都是可数的。任一个有理数都可以写成有限小数或无限循环小数的形式</li>\n</ul></li>\n</ul></li>\n<li>不可数集（无限的）\n<ul>\n<li>无理数集是不可数的。无理数是无限不循环小数</li>\n</ul></li>\n</ul>\n<p>对于一个集族如 S = {A,B,C,D}，如果 A 与 B 的基数都是阿列夫零，C 与 D\n的基数都是阿列夫一，那么 S 上存在一个等价关系\n{(A,A),(A,B),(B,B),(C,D),(C,C),(D,D)}，它的等价分划是 <code>{{A,B},{C,D}}</code>，A\n的等价类是 {A,B}，A 和 B 同基（基数相同）。</p>\n<h3 id=\"二元运算与代数系统\">二元运算与代数系统</h3>\n<p>A = {1,2,3}</p>\n<p>A^2 = {(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)}</p>\n<p>A^3 = {(1,1,1),...}</p>\n<p>函数 A^2 -&gt; A：是 A 上的一个二元运算。n 元运算是把 A^n 映射到\nA。</p>\n<p>关系（或者说函数） {((1,1),2), ((1,2),3)} 不是 A\n上的二元运算，因为定义域不等于 A^2，A\n上的元素不是都和它自己以及和其他任一个元素起关系了。A 上的二元运算是从 A\n的笛卡尔积向 A 的映射，它的定义域里一定有 A\n里所有元素的不同排列方式的序偶。</p>\n<p>为什么除不是实数集上的二元运算，因为 (n,0) 的结果在 R\n里没有对应的像，所以 (n,0)\n不在定义域里，而运算要求定义域里一定要有值域包元素的所有序偶。</p>\n<p>减是实数集上的二元运算，但不是自然数集上的二元运算，因为 (1,4)\n如果有像，那么 -3\n是不在自然数集里的。减在实数集上封闭，在自然数集上不封闭。</p>\n<p>封闭：对于 A 上的二元运算 ◦，S 是 A 的子集，如果对于所有 S^2\n里的元素，在运算之后的结果在 S 里面，那么 ◦ 在 S 上是封闭的。</p>\n<p>对于二元运算 *：A^2 -&gt; A：</p>\n<ul>\n<li>单位元与元素运算，结果为原元素，e * a = a</li>\n<li> 零元与元素运算，结果为零元， z * a = z</li>\n<li> 幂等元和他自身运算的结果不变。二元运算的单位元和零元都是幂等元</li>\n<li>左单位元和 a 运算，a 不变。a 和右零元运算，结果为右零元</li>\n<li>不可能同时有不等值的 [左 | 右][单位元 | 零元]</li>\n<li>a 与其右逆元运算，结果是 e</li>\n<li> 当 A 的基数大于 1\n时，且存在单位元和零元时，那么它们不会是同一个元素</li>\n</ul>\n<p>实数集上的乘法运算，单位元是 1，零元是 0。对于非零元素\na，它的逆元是其倒数</p>\n<p>实数集上的加法运算，单位元是 0，没有零元。对于元素\na，它的逆元是其相反数</p>\n<p>实数集上的减法运算，右单位元是\n0，没有左单位元，没有零元。逆元是根据单位元定义的，所以没有逆元</p>\n<p>对于一个元素不多的二元运算，我们可以画出运算表，它的行标为左元素，列标为右元素，内容为运算结果。可以通过运算表里元素排列的形状判断某一个元素是不是单位元或零元。如图所示：</p>\n<p><img src=\"/blog/images/运算-1.webp\"></p>\n<p>{0,1} 上的：</p>\n<p><img src=\"/blog/images/运算-2.webp\"></p>\n<ul>\n<li>且运算，单位元是 1，零元是 0。且 1 不变，且 0 短路。</li>\n<li>或运算，单位元是 0，零元是 1。或 0 不变，或 1 短路。</li>\n<li>蕴含运算，左单位元是 1，右零元是 1</li>\n<li> 等值运算，单位元是 1</li>\n</ul>\n<p>&lt;S;o1,o2...&gt; 是代数系统。S 是非空集，称为代数系统的域，on\n是一个或多个定义在 S 上的运算（可以不同阶）。</p>\n<p>代数系统的基数是 S 的基数，若 S\n是有限集，则代数系统是有限代数系统。</p>\n<p>整环：对于一个代数系统 &lt;J;+,*&gt;，J\n是非空集，+ 和 * 是其上的二元运算，如果同时满足六个性质，则该代数系统为整环：</p>\n<ul>\n<li>+ 和 * 都满足交换律</li>\n<li> + 和 * 都满足结合律</li>\n<li> * 对于 + 满足分配律：a*(b+c) = a*b+a*c</li>\n<li>+ 和 * 都有单位元</li>\n<li>任取元素 a 对 + 可逆，a+a 的逆元 = “+ 的单位元”</li>\n<li> 对 * 的消去律：任取非 “+ 的单位元” 的 a，由 a*b = a*c，可得 b=c</li>\n</ul>\n<p>对 &lt;{0,1}; 或，且 &gt; 来说：</p>\n<ul>\n<li>两个运算的交换律、结合律、分配律都满足</li>\n<li>或的单位元是 0，且的单位元是 1</li>\n<li> 没有对或的可逆性：对 1\n来说，不存在它的逆元可以通过与它运算来获得或的单位元\n0，所以或是不可逆的。所以该代数系统不是整环</li>\n<li>有对且的消去律：由：1 且 b = 1 且 c，可得出\nb=c，所以满足对且的消去律。</li>\n</ul>\n<h3 id=\"群\">群</h3>\n<p>对于代数系统 &lt;S;*&gt;，S 是非空集，* 是 S 上的二元运算 S^2 -&gt;\nS</p>\n<ul>\n<li>如果 * 是可结合的，则该代数系统为半群</li>\n<li>若半群有单位元，则该半群为独异点</li>\n<li>若独异点的域里每个元素都有逆元，则该独异点为群</li>\n<li>若群的运算 * 是可交换的，则该群为阿贝尔群</li>\n</ul>\n<h3 id=\"命题逻辑-1\">命题逻辑</h3>\n<p>命题：参考洪帆主编的《离散数学基础（第三版）》，并加上了自己的狭隘理解，同时满足以下三条：</p>\n<ol type=\"1\">\n<li>它是一个陈述句</li>\n<li>它有一个自带的<strong>属性</strong>，叫<strong>真值</strong>，取\n<span class=\"math inline\">\\(0\\)</span> 或 <span class=\"math inline\">\\(1\\)</span></li>\n<li> 它的真值可以<strong>被判断</strong>（没有说被谁判断、在什么时间被判断）</li>\n</ol>\n<blockquote>\n<p>2x - 3 = 0 <br> 这句话是假的</p>\n</blockquote>\n<p>我们<strong>永远</strong>没法判断它们的真值是 <span class=\"math inline\">\\(0\\)</span> 还是 <span class=\"math inline\">\\(1\\)</span>（如果前者是一个陈述句而不是方程，我们不知道\nx 是什么东西的。后者……）。所以它们<strong>不是命题</strong>。</p>\n<blockquote>\n<p>2024 年 1 月 16 号体彩排列三的开奖号码是 703</p>\n</blockquote>\n<p>它是一个命题。它的真值可以被判断，因为这件事已经发生了，但需要我们<a href=\"https://www.zhcw.com/kjxx/pl3/\">查询资料</a>。</p>\n<blockquote>\n<p>2024 年 1 月 17 号体彩排列三的开奖号码是 555<br> &gt; <a href=\"https://music.163.com/song?id=1883951953\">太阳系外有宇宙人</a></p>\n</blockquote>\n<p>它们都是命题。它们的真值可以被判断，但不是现在。</p>\n<p>命题连结词，一元的只有：否定 <span class=\"math inline\">\\(\\neg\\)</span>，非……。下面都是二元的。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">logic</span>(<span class=\"params\">P: <span class=\"built_in\">bool</span>, Q: <span class=\"built_in\">bool</span></span>) -&gt; <span class=\"built_in\">bool</span>:</span><br></pre></td></tr></tbody></table></figure>\n<p>现在有一份鱼和一份熊掌。作为前件和后件。如果我们吃了，件的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span>；如果我们满足了（吃好了），复合命题的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span></p>\n<p>合取 <span class=\"math inline\">\\(\\wedge\\)</span>\n…… 且……：全吃了，我才满足</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P <span class=\"keyword\">and</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>析取 <span class=\"math inline\">\\(\\vee\\)</span>\n…… 或……（可兼的或）：只要有吃的，我就满足</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P <span class=\"keyword\">or</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>不可兼的叫<strong>异或</strong>。区别是：异或的鱼和熊掌只能吃一个，同时吃会生病。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P ^ Q</span><br></pre></td></tr></tbody></table></figure>\n<p>等值 <span class=\"math inline\">\\(\\leftrightarrow\\)</span>\n…… 当且仅当……：是异或的对立面：同或、完美主义：要么都吃，要么都不吃，只吃一个我就难受。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P == Q</span><br></pre></td></tr></tbody></table></figure>\n<p>蕴含 <span class=\"math inline\">\\(\\rightarrow\\)</span> …… 若则……：</p>\n<p>现在有【生】和【义】，作为前件和后件。如果我们保留了，件的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span>；如果我们满足了（垂名了），复合命题的真值记为\n<span class=\"math inline\">\\(1\\)</span>，否则记为 <span class=\"math inline\">\\(0\\)</span></p>\n<p>注意：</p>\n<ul>\n<li>在蕴含的前件为假的情况下，复合命题为真。</li>\n<li>在蕴含的前件为真的情况下，复合命题的真值为后件的真值。</li>\n</ul>\n<p>如果我们<a href=\"https://music.163.com/song?id=2058806391\">把【生】舍了</a>，那还管它义不义，名字直接刻碑上了。或者这样记：如果一个人的<a href=\"https://music.163.com/song?id=4237850\">前提都搞错了</a>，那就没有必要和他讨论了，你说得都对。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">True</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> P <span class=\"keyword\">else</span> Q</span><br><span class=\"line\"><span class=\"keyword\">return</span> (<span class=\"keyword\">not</span> P) <span class=\"keyword\">or</span> Q</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">not</span> (P <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> Q))</span><br></pre></td></tr></tbody></table></figure>\n<p>一个文字游戏：除非 P，否则不 Q</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> P:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Q</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">not</span> Q</span><br></pre></td></tr></tbody></table></figure>\n<p>就是当且仅当</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> P == Q</span><br></pre></td></tr></tbody></table></figure>"},{"title":"旧事与牢骚","date":"2016-10-13T13:01:00.000Z","mathjax":true,"_content":"\n## 自我概念与解释相关的话题\n\n### 电子游戏给我们的启示\n\n为什么电子游戏会让人上瘾，我认为其中很重要的一点是分数的积累。带段位的游戏可以从 0 分一直打到大师级别，肉鸽类的游戏在一个小阶段里做出的选择和加成效果会延续到之后的所有阶段里。游戏和学习考试的区别是，后者没有一个可以看得见的经验条，考试的目的是满或者过，游戏的目的是加；考试有上限，游戏无上限。如果我们把游戏这一套挪到现实生活里，用经验值衡量有没有做一件事，段位分衡量做这件事的成功或失败的结果，在做一件事情之后，经验分一定会增加，而段位分随着做这件事后的结果而变化，在一个赛季之后会掉一点。那可能对于一些，想做，但是坚持不下去的事情有帮助。目标和规划还是太难了，用月度任务可能更好一点。\n\n游戏是一种工具，关键是看它用到什么地方。由于它能使人兴奋，所以通常不用到睡觉之前，而是起床闹钟响了之后。\n\n动作类游戏，对于一个难打的 BOOS，你的第一步一定是打，被一个招打死之后，记住。然后下一次的时候再尝试如何避开这个招，这种通过多次试错来找出一种固定应对套路的过程，被玩家称作背板。这是在变化中寻找不变。但一些需要临场应变的策略类游戏，如果你提前就定好了一种打法，那么当事情的发展不随你的期望的时候，如果你不变，就大概率会失败。\n\n游戏还可以培养一个人的团队协作能力和领导能力。如一个 20v20 的游戏里，在开局之前每一方的士兵会根据以往的战绩投票选出一个指挥官，指挥官相对于普通士兵有额外的全局技能，通过语音实时指挥每一个点的具体打法和应变策略。如果指挥官不得力，可以有人发起弹劾，弹劾通过后发起者成为新的指挥官（事实上，能力强的开麦指挥官是很少见的，听指挥的士兵次之）。还有一个游戏可以和 AI 的队友组队，如果你把它不当人看，比如开局就让它帮你捡东西，那么它会直接远离你。\n\n### 人和人之间为什么会出现误解\n\n先讨论一个问题。我们先定义一下：如果一个人做事时不以满足别人的期望为主要动力，那么他做的这件事就能够被称为是“在为自己活”，反之就是在为别人活。那么，现在有一个过去从来没有听过为自己活的理念的人张三，在他看到李四说“人要为自己活”之后，认为李四说的非常对，于是，他开始做一些事情了。现在请问，张三之后做的事情算不算在为自己活？你可能会觉得这个问题的信息是不够的，因为我们不知道张三之后做的事情具体是什么，如果张三认为李四的话隐含了“我想让你们听我的，你们都要为自己活啊”，且在听了李四的话之后，认同了他的期望，以满足李四的期望为主要动力来做事。那么，他就是在为李四活了。至少在一个短期的时间内是这样的，直到李四的观念被张三内化和修正成自己的观念了。但如果李四的话的意思是：“人要为自己活，但是你听不听我的话都可以”。那么，张三在听了李四的话之后会有……\n\n从这里可以看到，在理解一句话的时候，我们心里是预设了很多前提的，而对于简单的一句话，说出这句话的人不一定会把他的所有前提都说出来。它的信息量是有限的，而在没有更多上下文的情况下，想要理解一句话，我们必须要根据自己已有的经验来补全这句话里的每一个前提。即使对同一个前提，我们的理解也可能是不同的。这就类似于命题逻辑里的真值指派，我们说的一句话就类似于一个命题公式，这句话里的一些模糊和歧义的词语称为命题变元，而我们通过对这一句话里的每一个的命题变元的理解，一次断句方式的组合，称为对这句话的一次真值指派，或者叫语义赋值。在这次真值指派之后，通常会得到一个确定的结论，这个确定的结论称为我们对这句话的解释。\n\n有时候，当我们想要反驳对方时，或许是不接受对方的真值指派和自己的不一致，想用自己的真值指派盖过别人的。如果把自己和对方的前提都列出来，会发现对方也可以解释成合理的，自己只是想要提出一种不同的解释角度。比如“所有吃饱后的痛苦，都是吃饱了撑的”这句话。如果把它解释为：“过去的吃饱经历把吃饱的阈值给拉高了，使得对于同一个食物摄入量，可以使过去的自己吃饱，而不能使现在的自己吃饱”。即自己过去是吃饱的，而现在没有吃饱。这句话里的两个“吃饱”都是一个过去时，“吃饱后的痛苦”是现在时，“吃饱后的痛苦”意味着，在吃饱之后又过了一段时间后，变成没有吃饱了。吃饱和痛苦是不能同时存在的，有张音乐专辑叫《每到夜里我就很饿》就是这个意思：有痛苦，说明是现在没\"吃饱”。撑有两种意思：撑大和支撑。上面说的是撑大的意思，支撑的解释方式是：“如果想要感受到上层需求没有被满足所带来的痛苦，前提是下层需求在此时一定是被满足了的”。就是你如果现在是饥饿的，当别人训斥你的时候你就不会生气了，因为你的焦点是如何吃饭，而不是如何反驳他。这仍然存在一种比较特别的情况：你在学校里非常饿，点了一个外卖，去拿的时候发现被人偷了，请问这时候你出现的痛苦情绪是不是：吃饱了撑的？但如果你认为，在非常饿的时候点外卖本身就是吃撑了的话。马斯洛需求金字塔里，当上层需求和下层需求没有被满足时，都会出现情绪，只是因人而异，强弱程度不同。越接近下层的，是未满足时的平均痛苦程度更大的，我们失去一个亲人或者好朋友的痛苦不一定比我们没吃一顿饭要轻。痛苦是改变的动力之一，另一个动力是激励，但是我感受激励的能力可能比别人弱。所以我才说，为什么要等到重大变故之后才能改变。\n\n如果我们仅仅说到这里，就认定对方是错误的，那么这实际上是通过寻找一条路径，用自己的子公式的解释和对方的不一致来反驳对方的整个解释。\n\n### 一些抬杠\n\n“世上本无事，庸人自扰之”：世上本无路，庸人自走之；世上本无经，唐僧自取之；世上本无猴，石缝自崩之；世上本无你，_____？\n\n天下本无事，庸人扰之为烦耳。第澄其源，何忧不简邪？\n\n“想全是问题，做才是答案”：长考全是问题，臭棋才是答案。\n\n“吃饱后的一切痛苦，都是吃饱了撑的”：站起来说话的所有人，都是腰不疼的。\n\n“未经他人苦，莫劝他人善”：未欠他人钱，莫劝他人还。\n\n“忠言逆耳利于行”：比干逆耳裂于心；屈原逆耳喂鱼行。\n\n### 为什么文字的性格比口头的活跃\n\n准备和修改的时间长，单位时间的注意资源占用少：文字有组织语言的时间，它的缓冲区比口头的大，在打字的同时可以看到，还可以根据上下文修改几遍。文字的是想到哪里写到哪里，有想法的时候随时记录，这里的一段话可能是由来自于不同时间的想法拼到一起的。现实的状况是，我一次根本说不了那么多，除非处于一种非常想说，且有说的素材的状态。这里相当于是自己语言能力的极限了。在说话的过程中，你还额外需要去控制自己的语气和音量，额外给你之前说过的话做一个短时记忆，这相对于打字都会占用更多的资源。\n\nAI 直接改写与带动的作用：你可以用 AI 修改你的文字，使你的文字更加流畅。在 AI 的流畅语境下，可能会带动你自己的文风。这种情况就像，在一个大家都有负面情绪的环境下，比如葬礼上放哀乐，会带动你的情绪与他们一致。用一个更恰当的类比是，AI 就是一本书，看 AIGC 和读书是差不多的，是一个学习写字的过程。\n\n但 AI 生成也是有弊端的：当你给出不合适的提示词的时候，它会曲解你的原意，给你添油加醋。这可能会造成别人的误解，因为你原本的情绪和 AI 生成的是不一致的。很多纠结的时候就是出自这种情况：觉得 AI 写的文字太油滑了，但是比自己写得好。用 AI 直接修改过的文字在站点的所有地方都被标注了。剩余的内容都是没有经过 AI 直接改写的。AI 的正面作用是，它（有时）可以帮我们厘清不明确甚至错误的概念，这时我们称此为间接修改。方式是，把写的话发给 AI，后面再问一句准确吗。我们如何发现 AI 的局限性：找一本书里列举的事实，问 AI 有没有这件事。\n\n不懂装懂的情况：在和真人交流的过程中，自己对不明白的概念是不会详细地讲的。而在文字的环境下，在对某一个词语并不了解的时候，会出现假装自己懂的情况。这有时会造成用词不当或者明显的错误，比如我在前几个月才发现，以前的离散数学笔记里有一个明显的常识性的错误，公式都错了。这就和 AI 的幻觉差不多，因为我和它都是通过以前阅读过的文字按概率生成的。为什么会出现这种情况，因为在这些笔记里没有举具体的例子，只是把别人抽象的话复述一遍，先假装自己明白了再说。这是一种故意把信息熵增大的行为，形成了一种“我明白了，但是你还没明白”的假象，就是我比你懂得多，你还不懂，我要找一个地方超过你。这是一种不自信的表现，因为你不如我的背后其实是我不如你，我在某些地方是不如你的，所以我才需要找另外的地方去超过你。\n\n目的上的：因为这里是主场，在出于一种追求节目效果的情况下，可能会故意地夸大一些事实。节目效果的意思是：故意地给别人留下某种印象，不管是好的还是坏的，且留下好的和坏的印象都有好处。\n\n### 为什么有些内容不愿意删\n\n有一方面还是因为舍不得的，认为有比没有好。\n\n1. 做反面教材也是有用的。现在展示自己身上不好的地方，是为了让别人未来不要变成自己这样。\n2. 追求一种同频共振。作一面镜子，让对方看到，现在的我和以前的对方身上是有相似之处的，在某种程度上感化对方。展示自己弱小的一面，以求别人宽容，把自己现在身上的责任减轻一点。造成一个投射性认同的节目效果，疾病继发性获益。\n\n因为我意识到了第二点，所以老是感觉不安心，感觉把自己不好的事情说出来是不对的。但是从第一点来说，我还是不想删除这些内容的。这是一个非常矛盾的地方，感觉必须有人激我一下，或者自己的生活出现重大变故，比如有人根据我发出来的东西排挤我之后我才会改变，否则我是不会删除的。事实上，第一点可以说成是对第二点的掩盖，因为第一点的预想结果其实是，让别人吸取经验教训，然后让他们不要这样，以及让他们对自己的孩子不要这样，这又隐含了一个把责任推到父母身上的问题。\n\n<img src=\"/blog/images/100mdjht.webp\">\n\n事实上，如果真的有人在看到这里之后有意地排挤我，说明他居然真的把我当回事了，能抽出自己宝贵的时间看一个人发的牢骚。虽然点进来的不一定是完全关心我的人，但不关心我的人一定不会点进来。所以不管怎么说，我的愿望都完成了。\n\n### 为什么说自己是伪善的\n\n这可能是因为我对善的偏见。我对善的理解是，在任何场合下说的都是真心话，而为了让对方开心说的场面话和客气话都是违心的，因为你的最终目的是先让对方开心，再让对方给你回报，或者说是，你想从对方身上获取回报。我认为从对方身上获取回报是不对的，其实我很小的时候就能感觉到，有时候一个人说的话，纯粹是想让对方开心，而不一定是自己的真心话。至于为什么不对，我现在还没明白，可能就是看《水浒传》看的。\n\n由于你无法保证你在任何情况下说的都是真心话，所以自洽的方式就是说自己是伪善的。就像郑智化《水手》那首歌里唱的，“说着言不由衷的话，戴着伪善的面具”，当然它还有一句词，叫“擦干泪，不要问为什么”。\n\n### 未完成事件\n\n荣格有一个个案：老妪的右手会间歇性地做出一个奇怪的向下压的动作，当他询问老妪，这是否在纪念你逝世的丈夫，在模仿他修鞋的动作后，这个持续多年的动作竟从此消失了。\n\n最近突然想到一个之前从来没有提到过的事件，可以用来解释维持我现在别扭性格的部分原因：在 2014 年之前，郧县还不是十堰市的一个区，它们的经济发展水平和教育资源是相差较大的。所以在新区小学，有个同学在知道我从十堰转学过来之后，露出了一脸惊讶的表情，并说了“羡慕我”的话。但我当时的情绪首先是优越感，其次是优越感带来的负罪感。因为我感到和其他人都不一样，这是一种恐高症。这可以从一种方面解释，为什么我不愿意对别人说“好话”。因为我可能在害怕别人和我出现一样的惭愧的情绪。\n\n关于搬家的事情，我最近又做了一个无恐惧感的噩梦，后来发现它是有一种含义的：在一间没有刷漆的房子内部有两个房间，房间的连接处是一个门，但它没有具体的门，只有一个框或者洞，就像没有装修的房子那样，只有水泥墙。在离门不远的天花板上面垂下来一个左右摆动的钟摆，在钟摆的末端有一个圆孔，如果把头伸进去，圆孔刚好可以容纳，且头会随着钟摆的摆动而撞在门框上。仓库的原型是我在十堰一个人玩时进过的一个，里面确实没刷漆，但它只有通往外界的一个门框，只有一个房间。如果把两个房间解读成搬家前后的内部世界的话，那么这说明我已经倾向于把它们连接到一起看。但最后我只是看着那个钟摆，而没有把头伸进去。\n\n### 吃饱了撑的\n\n现在的空腹体重比去年同期下降了两公斤，现在是 56 公斤。上一代人可能都有类似的经历：在感到非常饿的时候可以撑一段时间不吃饭，消耗自身的肝糖原和脂肪来提升血糖水平后，会有一点饱的感觉。但这种感觉撑不了很长的时间，最终还是要靠吃饭来撑。在控制食量上，长期饿过的人，比如在地震时被困过的人，他在脱离困境后吃的第一顿饭，可能比没有类似经历的人更容易吃撑。\n\n### 可能收到的批评类型：目前共 15 种\n\n在网上看到一句带有评判性质的话，有时习惯性地会代入自己，如果说中了类似的点，自己会难受好一阵子。这或许是一种巴纳姆效应，巴纳姆是 18 世纪美国的马戏团艺人，他说自己的节目之所以受欢迎，是因为包含了所有人都喜欢的成分。不喜欢的成分也是类似的，每个人都可能有一些相似的，不愿意被别人指责的地方。但有时候，自己还是想收到别人的批评，因为别人可能指出自己没意识到的问题。这里整理了可能收到的批评类型，但这些并不一定是自己都认同的。\n\n1. 全能：没人在意你/你把自己想得太重要了/自以为是/自作多情/自命不凡/你的观众没你想的那么多\n2. 局限：夏虫不可语冰/朝菌不知晦朔/坐井观天/管中窥豹/一叶障目/盲人摸象/夜郎自大/以蠡测海/思而不学则殆/以后当你看到你以前写的东西，就会 xxx/一瓶子不满，半瓶子晃荡/无知者无畏/达克效应\n3. 执行力/复现/拖延：知之非艰，行之唯艰/一屋不扫/五谷不分/爱幻想/心比天高/纸上谈兵/闭门造车/尽信书，则不如无书/看起来知道自己的问题，但是改得很慢/语言的巨人，行动的矮子/想不切实际的东西没用/你的未来怎么办\n4. 盲目试水：做事之前没有规划，不穿鞋就过河/愣头青/眉毛胡子一把抓/凡事预则立，不预则废\n5. 稳定/可靠：你的行为是不可预测的/不守信\n6. 完美主义：对自己和他人的要求高/捡了芝麻，丢了西瓜/人至察则无徒/吹毛求疵/求全责备\n7. 刻舟求剑：过去的事情放不下去，不会向前看/守株待兔/郑人买履\n8. 不会表达自己的情绪/感情，而是情绪化地表达\n9. 过度分化：相处时的主观感受不好，太注重自己，没有替对方着想/自私/不愿意问对方是怎么想的/共情能力不强/站着说话不腰疼/喜欢过度揣摩他人的想法/以小人之心度君子之腹\n10. 过度融合：指导欲太强了，喜欢干涉对方的选择，让对方按自己想的做/越俎代庖/揠苗助长/投射性认同\n11. 庸人自扰/内归因：你想得太多了/喜欢抬杠/钻牛角尖/太老实/固执/较真/玻璃心/敏感/自卑导致自负/越缺什么，越在意什么/疑心生暗鬼/杯弓蛇影/风声鹤唳/草木皆兵/矫情/把自己看得太低下了/妄自菲薄\n12. 外归因：发牢骚，抱怨别人是不对的，给别人以及第三者留下的印象不好/怨天尤人/祥林嫂\n13. 确实有一件事情做的不合适，有更合适的解决方法\n14. 隐喻性的，可以激励自己反思的非直接的批评\n15. [自我批评是虚伪的](#为什么说自己是伪善的)/不真诚的/只是为了“彰显道德高度”/这反而看起来你对道理一点都不懂/有隙则明示之，令其谗不得入/用自我批评获取心理安慰，反而逃避改变\n\n关于随便看到一句批评的话就认为是说自己属于防御机制过强还是过弱：防御的定义是把负面情绪的组成部分从意识觉察中排除出去。如果我先认定它在说我，就能提前准备反击、解释、承受伤害，这样就不会被突如其来的批评击垮，是一种预支现在的焦虑以避免未来更大痛苦的策略（贝勃定律）。所以从未来的角度看是强，从当下的角度看是无效。\n\n我给自己的评价就是：我是一个无知的人，什么都不懂。这样当别人再说你无知的时候，你就不会生气了，因为生气了就说明，你认为自己不是无知的。你把“别人不了解你”所带来的愤怒转化成了“我早就知道你会这么说”了。\n\n> （AIGC）\n> 行为背后的动机是恐惧，而非自信：这种行为模式的深层动机通常是：“如果我表现出真正的自己（可能的不完美），别人就不会喜欢我、重视我。所以我必须先发制人，通过自我贬低来控制别人的反应，确保我能获得我需要的认可。”这种动机源于对被忽视、被否定、不被重视的深刻恐惧。而恐惧是低自尊的典型驱动力。真正高自尊的人不会活在这种恐惧中，因此也不需要费尽心机去操控别人的看法。<br>\n> 这是一种心理防御策略：通过主动贬低自己，他实现了两个防御目的：<br>\n>\n> - 降低预期：把自己的位置放得很低，这样任何小小的成功都会被视为“超常发挥”，任何失败都“理所应当”。这避免了失败时自尊心遭受毁灭性打击。<br>\n> - 规避风险：抢先说出自己的缺点，就抢走了别人批评他的机会，从而避免了来自他人的、最令人恐惧的否定。\n\n### 什么叫正确\n\n对于我以前为什么发一些东西，我可以说出来背后的原因是什么，但我[不认为](#为什么文字的性格比口头的活跃)自己说出的所有话都是正确的。正确是一种在特定视角下的判断。\n\n- 场域：在什么情况下是正确的，而在情况之外不一定正确。比如在伊斯兰教的语境下，猪不能被人吃是正确的；在十六进制下，8+8=10 是正确的\n- 本体：正确指向什么\n  - 符合客观现实，既定事实。如现在是白天，如果同一个地方的人有人说是白天，有人说是晚上，那么就乱套了\n  - 符合客观规律，得到大量证据支持。如天上有大片乌云，就有可能下雨\n- 认识：如何判断正确，被解释为正确的\n  - 通过自己已有的认知图式。如一个自己以前持有的观念，在后续可能会消失\n  - 通过群体共识，如一本书出版之前需要经过审核\n- 目的：正确有什么用\n  - 可以用于解决某一个特定问题的\n  - 可以满足人需求的，消除负面情绪的。\n    - （生理的需要）如每天要吃饭\n    - （安全的需要）稳定的，可以预测的。如在多数地区，黑夜和一年四季都总是会有规律地出现的\n    - （归属与爱的需要）在群体里拥有地位，符合已有规则（共识）\n      - 法律法规：公平的底线。违法的人会被惩罚\n      - 伦理道德：理想的高线\n      - 推理形式上的共识。非胡言乱语\n    - （尊重的需要）自尊和被别人尊重\n      - 符合自己从以往经历里总结出来的经验（出于自我价值肯定，或者不希望看到没有经验的人重蹈覆辙）\n      - 没有说出的话，和说话人身份之间，或者在特定情景下的冲突\n  - 可以激发负面情绪的，如批评。批评既激发了被批评者的羞耻感，又满足了被批评者的需要（如果是需要的话），一般是先有负面情绪，后有正面情绪\n\n### 我的优点\n\n- 节俭。[小学时期没用完的草稿本到现在还在](#为什么有些内容不愿意删)。恩格尔系数高。\n\n### 如何看待负面情绪\n\n负面情绪能让自己切切实实地感受到，自己是存在的，活着是有意义的。\n\n<img src=\"/blog/images/-emo.webp\">\n\n### 自身存在的沟通问题\n\n有时候觉得，在和对方沟通时，自己没有把自己和对方放在同一个地位上。有时候会故意示弱，还有的时候，对方很热情，但是自己很冷漠。这是因为历史遗留的问题，当自己收到对方的鼓励或者赞美的时候，自己会非常感动，无言以对，无可报答的感觉。这种感觉非常强烈，所以自己在某种层面上，为了避免收到鼓励，会有意或者无意地闹事，比如对对方忽冷忽热，刚热完就冷了。因为我还不太适应这种热的感觉。\n\n表意不清，推责的情况：有时候，我想对对方提出一个需求，但是感觉这个需求是不太合适的，所以我会用一种奇怪的方式表达出来。有一种逼迫对方必须问下去，或者照着来的感觉，其实是想让对方代自己做出这个不合适的选择。这个问题已经存在几年了。\n\n### 内向者的围城【部分 AI 改写】\n\n\"围城\"这一概念意味着外界的人渴望进入却难以如愿，而身处其中的人又渴望逃离却难以抽身。然而，这并非一个恒定不变的状态——并非所有的人都向往着进入这座城，也不是所有人都急于逃离。实际上，只有在你对这个题目产生兴趣，想要进一步了解它，但在真正开始阅读之前那短暂的一瞬间，“围城”才真正存在。一旦你继续阅读下去，这座围城便不攻自破。\n\n张三（化名），是我高中的同窗好友，我们俩是班上仅有的两位在语文考试中不写作文的学生。一天晚上，他突然从教学楼跃下，让所有人震惊不已。毕竟，没有人曾对他做过任何恶意的事情。幸运的是，他安然无恙，并且至今仍与我保持着联系。在彼此的交流中，我们发现了一些或许在外人看来难以理解的事情。通过相互的理解和支持，我们更加能够体谅对方。于是，我们决定一起分享这些事情背后的故事，希望能帮助更多的人理解这种独特的心理状态。这段经历让我们意识到，每个人内心都有一座自己的“围城”，而真正的解放在于找到能够理解和接纳自己的人。\n\n张三的故事是一段独特而又复杂的内心旅程，他是那种即使在黑夜中也能勇敢前行的内向者。不过，张三的勇气并不体现在通常意义上，而是以一种更为微妙的方式呈现出来：小时候，当一位老师表扬张三时，他反而羞愧难当，脸红到耳根，仿佛老师的赞赏是对他的某种惩罚；过年时，张三收到亲戚的红包，心中默默致谢，却未曾开口表达，在他看来，这些钱并非自己应得，因为他并未为这份礼物做出什么贡献；每次心理治疗结束后离开诊所时，张三总是侧身而出，这种方式成为了他特有的告别方式，治疗师后来解释说，这是他表达感谢和再见的独特方法；在学校里，张三几乎不主动与人交谈，他总是默默地坐在自己的位置上，除了偶尔去卫生间，几乎从不离开座位；即使内心充满了不安，张三也从未将“我不说话是因为我害怕你们”这句话说出口。\n\n张三总结了导致他那次冲动行为的根本和直接原因：\n\n- **根本原因之一**：对人际交往的恐惧。尽管他渴望与人沟通，却害怕每一个人。那次行为，某种程度上是他希望引起他人关注的一种象征性表达。\n- **直接原因之一**：感到无助。在自杀前半小时，他的情绪经历了从焦虑抑郁到极度冷静再到轻微兴奋的变化。在最初的阶段，他渴望与人倾诉，却又不敢开口，这种矛盾的情绪让他倍感煎熬。\n- **根本原因之二**：对世界的怀疑。高中时期，由于缺乏哲学教育，张三开始阅读一些网络文章，比如光子延迟选择实验、缸中之脑等，这些内容让他对现实产生了深深的疑惑。\n- **直接原因之二**：对死亡的好奇。他想知道死亡之后的世界会是怎样的（验证唯我论是否正确，死后精神是否仍然存在），甚至期望通过这种方式实现精神上的自由，即摆脱所有的恐惧和束缚。\n\n缸中之脑指的是，如果你的脑子被取出来了，放在一个缸里，通过仪器模拟出了外界的各种刺激信号，且你的意识仍然存在并能对此做出反应，那么你该如何知道你实际在不在这个缸里？我们之所以畏惧这个问题，是因为它有一点阴谋论的味道。这个话题的一种终结方式是，我们本来就是缸中之脑，这个“缸”就是我们除了脑子之外的肉体的部分。\n\n### 死亡相关的话题\n\n我认为死亡目前并不是一个沉重的话题。虽然它迟早会发生的，但只有发生了，才知道有多沉重。\n\n我在以前冷血的时候，曾有过一种这样的想法：当我看到别人劝一个人不要自杀的时候，我会和自杀者共情，而讨厌劝的一方。因为自杀是人家自己做出的选择，你压根不知道他之前经历了什么事情，为什么要用一句话就把人家打发了。另外，不是说自杀是不能谈的：\n\n> 误解一：讲述自杀是个坏主意，鼓励可以化解自杀。<br>\n> 事实：在人们眼里，自杀，是一件耻辱的事情，因此大多数有自杀意图的人都不知道该和谁说话。与鼓励自杀行为不同，公开讲述这些想法，可以给当事人带来其他的选择，或者有时间重新考虑自己的决定，从而防止自杀。<br>\n> ——[《自杀的 5 个误解》](https://www.psychspace.com/psych/viewnews-15939)\n\n要谈就谈详细一点。这里提出一个问题：自杀的人究竟是在逃避自己对生活的责任，还是因为责任感太大了，所以感觉自己根本担负不起呢。我认为两者是可以同时成立的，当我们在焦虑一件事情的时候，比如备考的时候，是在害怕考差了。如果没有责任感的话，根本就不会焦虑，考 0 分和我又有什么关系呢。詹姆士认为，自尊=成功/抱负，如果抱负太大了，自尊会低。\n\n当然，还存在着一种情况，就是在事中全去逃避了，事后才去反思。\n\n之前在知乎上看到一个挺有意思的动画，讲的一个人在死亡之后，会转生到同一个世界线的其他时间线上，记忆清除后变成另一个人。换句话说，我们在当前世界线上遇到的所有人都可能是同一个人。这种世界观可能会增强我们活下去的信念，因为所有相遇都是与同一个灵魂的重逢。\n\n### 说话卡壳的原因【部分 AI 改写】\n\n说话卡壳的直接原因往往在于大脑尚未完成从思考到表达的转换过程，左半球额下回靠近外侧裂的布洛卡中枢没有被充分地利用。对于内向者来说，他们常常会在心中与自己对话，这就是所谓的“想的模式”。在这种模式下，当他们思考完毕时，内心就会有一种任务完成的感觉，进而让大脑进入休息状态。而在“说的模式”下，当一个人真正说出话语时，才会感受到任务的完成，随之而来的是大脑的放松。想象这样一个场景：当我准备用声音来表达某个想法时，却不自觉地进入了“想的模式”，结果是没有发出声音，但大脑误以为话已说完，从而停止了工作。有时候在口头聊天说话的时候，回一句话会回两次，因为不确定第一次是否属于在想的模式下的。\n\n在打字时，我们通常处于“想的模式”，有时候我们也会小声念出文字，但这时声带并不会震动，我们只是用气息在模拟说话。如果尝试直接按照稿子朗读，则需要经过一番练习。例如，我曾尝试[录制一段音频](https://www.bilibili.com/video/BV1ef421z7y6)，结果发现同一句台词需要反复录好几次才能满意。这是因为过去我很少说话，所以现在说一会儿就会感到疲惫。通过这个经历，我意识到，要想流畅地表达自己，就需要不断地练习，让大脑和身体适应从思考到发声的转换过程。\n\n说话卡壳的根本原因是语料库和对话经验不够。\n\n说话声音小的直接原因是过去在一个大的空间距离下经历的有效对话频次少。\n\n### 症状自述悖论【部分 AI 改写】\n\n当症状浮现时，我发现自己无法用言语准确地表达内心的感受；可一旦试图用语言捕捉这份体验，开始组织言辞之际，那份难以言喻的症状便悄然消逝；为了能够用文字记录下这份感受，我不得不放弃某些细节上的精确性，转而寻求一种大致贴切的描述方式。若要用数学中的图像来比喻这一过程：语言的描述就像是函数的微分，而症状本身则是魏尔斯特拉斯函数——它处处连续，但却处处不可微。\n\n$$\nW(x) = \\sum\\limits_{n=0}^{\\infty}a^{n}\\cos(b^n \\pi x) \\quad a=0.5,b=13\n$$\n\n<img src=\"/blog/images/weierstrassa=0.5b=13.webp\">\n\n而最终描述出的症状，就像是函数 $2\\cos(\\pi x)$，虽然在宏观上与原本的症状相似，但细节之处却大相径庭。\n\n<img src=\"/blog/images/2cospix.webp\">\n\n如果用[博洛米结](https://dra-m.com/borromean-knot/)（Borromean Knots）来观察这个问题：症状是处于实在界的，而语言则是属于象征界的。这两者之间，存在着难以逾越的鸿沟。\n\n### 心理疾病的病名：何时为结果，何时为原因【部分 AI 改写】\n\n心理疾病就好比，你在一条狭窄的小路上遇到了一条看起来凶猛的蛇。这条蛇虽然是无毒的，但你心里没底，毕竟你之前已经被蛇咬过好几次了。现在要过这条路，心里七上八下的。吃药就好比，你戴上了一副高度近视眼镜，蛇的存在感瞬间减弱，你看不清它了，但走不走这条路还是得靠你自己拿主意。\n\n“他这人表现成这样，是因为他有抑郁症。”这种说法有点像：“他这人一看到长条状的东西就发抖，是因为他有井绳病”；或者：“这个老烟枪一天咳到晚，是因为他得了肺炎”。心理疾病的病名更像是给症状贴了个标签，但并没有解释症状形成的原因。它们的信息量其实很大，是当事人经历过去事件后形成的创伤，以及现在表现出来的一系列异常的心理和行为，外显出来的综合性结果的缩写。但是从评价者的角度来说，这是一种对他人没有进行充分了解、信息量不够多的情况下，把病名作为一个信息熵大的名词，试图去合理化当事人现今表现出来的所有异常行为，来满足自己的安全需要。\n\n## 黑历史与以往经历相关的话题\n\n### 散点、移动平均和累积平均\n\n散点图揭示了每一天的具体数据，它的优点和缺点都是太详细了。\n\n7 周期的移动平均至少要有 7 个数据，第 n 天（n>=7）在图表上展示的数据是第 n-6 天到第 n 天的平均值。它的特点是受区间内的极端数据影响，而不受区间外的极端数据影响，揭示的是短期的趋势。\n\n第 n 天的累积平均是从第一天到第 n 天的平均值。它的特点是，如果当天的实际数据大于前一天求的平均值，折线就会上升，反之会下降。它受所有历史数据的影响。\n\n<img src=\"/blog/images/life.webp\">\n\n### 做梦梦到旋律\n\n梦里梦到九个音符，醒来后通过网易云哼歌识曲，匹配到了[《FIRE BIRD》](https://music.163.com/#/song?id=1463130183)1 分 06 秒的前十个音，它是动画《BanG Dream!》里的一首曲子。我没看过这个动画，但和它前六个音的绝对音高和时值是完全撞上的，后半句有两个音是音高一样的，但是顺序不一样，最后一个音音高一样，这一句的总时值一样，而且这一句是在整首歌里重复出现的一句。如何解释这个现象呢，要么是以前在什么途径下间接的听过这首歌，造成有内隐记忆，做梦的时候内隐记忆从潜意识里被提取出来，但部分不一致，或者在以往编码的时候就不一致。或者以前没听过这首歌，没有关于它的记忆，但是有听过其他曲库的记忆，在对以往记忆进行创造性整合的过程中巧合地造成与现实一致，就像凯库勒做梦梦见苯分子的结构是环，是因为他有衔尾蛇的记忆，加上他一直在研究苯。再加上音符的排列顺序是有限的，撞几个音很正常，一些被误解为抄袭的音乐也是这样的，何况我只撞了六个。后来想起来是来自[《Heaven’s falling down》](https://music.163.com/#/song?id=2003595837)的第一句。再后来，发现自己确实是在一个途径下间接地听过这首歌。\n\n之前很少出现过做梦梦到旋律的情况，有个位数的次数，大部分没有撑到记住然后醒来。\n\n后续又梦到了一次不一样的：\n\n> 31356 6653223<br/>\n> 31356 673737i<br/>\n> 31356 6653232376<br/>\n> 712 143771 (7 底下加点)\n\n但没有匹配到特别像的，后来想起来可能是来自以前听过的一首歌（[《词不达意》](https://music.163.com/#/song?id=1936043266)1:20 到 2:06）\n\n### 抽奖-累积话费-3G 违约-京译精选的套路方式\n\n起因：\n\n出青年路地铁口，同济医学院附近，被两个人要求用微信扫码，说是点个赞，抽奖，中了一个三等奖，平板的名额。被其中一个人带去万松园横路人行天桥下的“网点”。里面有一个被称为主管的男子，他说天下没有免费的午餐，要求我签合约。当时没有拍照，类似是这样的（图源抖音）。\n\n<img src=\"/blog/images/what.webp\">\n\n合约有三种可以选择的方式。第一种方式是计算手机号累积的话费，一直累积到 4800 元，不限时间，但是必须保证手机在 4G 和 5G 网的范围内，在 2G 和 3G 网的范围内会有违约金。他说这个目的是为了保证用户一直不转网，如果换号了还是在本运营商里就可以，还给我看了一个其他用户出现违约金的截图。该合约需要话费账单累积到 4800 元才能结束，不限时间，在结束之前一直有限制 4/5G 网络的违约金限制，如果违约会有短信通知。\n\n我因为担心会有违约金，所以选择第三种方式。第三种方式是用一个平台，用上面的购物币买那个平台上的东西。中途他引导我下载一些其他能贷款的平台，如美团、京东、安逸花，试图从上面贷款。\n\n最后在美团平台上借款 1000 元（这 1000 元先到了我的银行卡，后通过支付宝转入对方账户，我在美团平台上需要还款），用花呗给对方付款 2000 元。这 3000 元最后到了一个叫“京译精选”的平台上，合约的内容是必须在那个平台上用这 3000 购物币消费，用一个不到一千元的平板做交换。\n\n相当于我贷款 3000 换了一个不到 1000 的平板，加上可能为真的 3000 购物币。\n\n我还不确定这件事情能不能被定性为骗局：\n\n矛盾：\n\n1. 我本来准备去献血的，结果摊上这个事情。我还以为上次献血换来的“运气”到了，那两个人看到中奖也惊讶了一下\n2. 那个抽奖页面的域名好像不是运营商官方的，域名中含有 a 和横杠，以 org 结尾，但忘记具体是什么了\n3. 那两个人本来是让我自己去营业厅兑换的，后来是其中一个人领我去营业厅\n4. 《京译精选》APP 内显示的备案号是：粤 ICP 备 2021067300 号-4A，查了一下是真的\n5. 不知道合约有没有效力，虽然对方在线下是有实体店的，但是实体店的招牌上，包括合约上都没有任何一个运营商的商标。他没有给我留一份合约，我也没有要\n6. 收款方是武汉市江汉区金鑫通讯设备经营部（个体工商户），在用支付宝付款的时候看见手机出现一个弹窗“正在安装证书”。这里的证书是指支付宝的安全证书，在安全中心小程序->更多服务->数字证书可以查看：根据监管部门的要求，安装数字证书可提升余额支付单日额度，可能是一个反诈的东西。他直接用的是我的付款码，加上对方中途老是抢手机，太急躁了，聊天也聊得过于多了。\n7. 按我的性格，对方是主动的，一直有人在和我聊天分散注意力，且店里还放着音乐，我是被动的。签合约的时候，在那个环境下，我中途也想走的，说能不能取消，在此之前已经按了一个手印了。他说是成年人了，签了就不能取消，一直问我有没有听懂，我回答的都是听懂了。我中途有几分钟是卡壳没有说话的，他说他工作这么多年，从来没见过这样的人，和他的一个老表一样内向，但是那个老表起码能够正常地和人交流。我当时只想逃离那个环境，结束这件事，但是怕有直接走了会什么不合适的地方（因为我之前已经按手印了，加上他一直在催我说话），所以最后我还是让对方用手机操作了。中途还有美团的 950133 风控打电话了，但是那时候手机在他手上，他回复对方并问我：没有看过刷单的视频，什么都没有。\n\n证据有短信和 APP 里的借款记录，我给那个男子发身份证照片的微信聊天记录（因为贷款需要实名，由于我手机的原因上传不了照片，所以他帮我拍照），平板，和两个用支付宝转账的记录，京译精选的 APP。我当时很紧张，压根没想到给合约拍照。他还拍了一张让我真人拿着的、按过手印的合约照片，但是那个合约原本是我选择第一种方式的，后来他把第一种方式的合约撕了，说这已经没什么用了，保留了一张我选择第三种方式的合约。\n\n结果：\n\n我从一开始就注意到了事情的所有细节。就像上一次确凿受骗一样，上次是被骗了 200 现金当路费，用一个手表交换，对方报的手机号是 13x55667788，这正常人都会怀疑的，但是出于一种助人的情节我还是相信他的。这次没有走，首先是自己贪图小利，其次是对方说的一句话：“你已经是成年人了，合约签了就不能取消”。\n\n在百度贴吧上搜到了一个[一模一样的案例](https://tieba.baidu.com/p/8997885141)。我把帖子截图发给对方，并要求退款，次日上午到店退款并还款成功，并签了退款协议，一式两份。这相当于我这辈子干的第一件硬气的事。\n\n### 旧事\n\n最痛苦的一段时间，就是刚复学住寝室的时候，每天过得心如刀割。因为我不敢和他们说话，所以白天能避开就避开，但是别的人多的地方我也不敢去，所以就在学校的一片树林里的一个凳子上坐着，晚上插着耳机听《秦皇岛》，基本都听吐了，还是不行。他们晚上在打游戏，我也不好意思给他们提意见，住了至少有一两个学期，基本一句话都没有说，所以最后才搬到校外了。更痛苦的是开学的时候，因为我没有寝室钥匙。高中有一天中午还被锁在寝室里了。我的昨天永远都是黑历史。乐观一点的说法就是一直在进步。\n\n有时候我会出现全身刺痛的情况，猜测的原因有两点，太久没有运动，没有出汗了（即使在前天晚上洗了澡也会出现这种情况）+惭愧。最强烈的一次就是休学的那次，当辅导员提起“黄若凡在网上 xxx 的时候”，我那时候是全身发痒和发痛的，表现得确实不像正常人。休学是 2021 年上半年，但是我直到 2023 年下半年才变得愿意说话，那时候父亲来看我，我还把他弄哭了，因为他觉得自己太委屈了，怎么有这样的儿子。有时候，我在看自己以前写的东西的时候，也会出现这种情况。说不定当有人在我面前提起这个站点的时候，可能也会出现。所以这是一件非常矛盾的事情，既想有存在感，又害怕有存在感。\n\n初中时期的执念：我觉得有必要把这些事重新提一遍。因为我第一次写童年回忆录就是在初中写的，回忆了搬家之前的经历。那说明我初中时期是有委屈的，但是这个委屈一直都没有表达出来，在这之前是写过一次的，后来又被我删了。现在我觉得没必要删了：\n\n1. 和班上性子最野的五个同学分到一个组，他们天天上课讲黄色笑话。牵连我，老师认为我没有听讲\n2. 数学老师认为我没有听讲，批评我。我现在还记得，当她报考试成绩，报出我满分时，她是什么表情\n3. 英语老师由于我们组闹，让我回答 PPT 上的问题，我没有回答上来，她认为我没有听讲。事实是因为换座位我调到后头了，我眼睛近视，看不见\n4. 语文老师罚我蹲着写作文。事实是我不会写，写不出来\n5. 地理老师挺好的，但是有一次上课坐对面的同学闹我，结果到最后只有我被叫到办公室了。他拿起了成绩表，发现我排在中间，然后说：怪不得你成绩差。这纯属于是自己倒霉，因为我在之前都是排在前几名，就这一次失误了，刚好被他撞上。这件事情的结果是我在办公室哭抽抽了。\n6. 有一个人欺凌我，但是我有一次给他反击了。\n\n初中我还当过生物课代表，是生物老师为了锻炼我。说明我那时候也不是完全怂的，但是也仅限于和同桌说话，听讲的时候不敢抬头太高，不敢看老师眼睛，当然其他所有人的眼睛都不敢看。现在至少在多数情况下都敢看人眼睛了。\n\n### 家族黑历史【AI 改写】\n\n黃化某者，郧陽府之巨賈也。駕舳艫溯漢水而上，歷險巇至於秦地，購蔬果如薯葯、龍須草之屬，復轉輸漢口埠頭鬻賣，獲利頗豐，儲鏹以囊盛之。迨清季，化某卒，遺孀康書芝與三男。一夜，蒙面蟊賊夤夜來襲，持械脅迫，窮凶極惡，迫其供出財寶之所。康氏不勝其怖，遂洩密所藏金銀之地，在一處幽邃岩穴之中，賊眾悉數奪之而去。族人聞此變故，義憤填膺，謀以報之。遂駕扁舟，偽為行商，誘賊出沒。二賊見狀，一人臨舟探視，一人守岸瞭望。舟中伏甲突起，賊首立斷，拋屍於漢水之中，瞭望者惶遽遁逸，不知所終。自此家道衰落。康氏遷居異鄉，至趙川營飯鋪以度日，後為其子迎歸奉養，得以終老。太史公曰：清季之際，婦人之位卑賤，康氏長罹纏足之苦，失侶無依，而獨力撫孤，劬勞備嘗，誠可哀也。\n\n### 2025 年中总结【AI 改写】\n\n在大学的旅程里，有一门课《人生风险与社会保障》成为了我学术生涯的一颗璀璨明珠，以 99 分的成绩高悬于我的成绩单之上。这似乎是在提醒着我，在过去的岁月中，生活的不确定性一直伴随着我，而我也因此更加深刻地认识到社会支持体系的重要性。\n\n回望 2024 年 6 月的生产实习经历，即便是在紧张到发抖的情况下，我还是带领了一个三人小组获得了优秀的评价。这段经历不仅证明了我的心理承受能力，也让我感激那些在我身旁提供无私帮助的伙伴们。然而，或许是因为过度兴奋，我未能及时向他们表达谢意；或是出于某种内心的矛盾，我选择在此时此刻用文字来传达那份迟来的感谢。\n\n### 2024 年中总结\n\n你一排单词只认得 `⭐Stars` ，不知道给浏览器装一个翻译插件，不知道 node_modules 是什么意思，命令行经验仅限于 `adb` 和 `fastboot` 刷机。但你还是建了一个仓库，把博客框架 Hexo 折腾了下来，再折腾到仓库里面，这就是你在 2021 年 3 月 6 日加入 Github 时的情形。你成功搭出来了属于自己的博客界面，并可以通过 ruofancooh.github.io 访问。\n\n但是后来你删库了。因为你的自信不足，不敢去折腾配置文件，加上不知道该写什么东西。在几十天之后，你休学了。在休学的一年里，你除了看了一点高数书之外，什么事情都没干，现在**忘完了**。但不管是刚开始时的第一个初心，被你忽略的第二个初心，不想捡起来的第三个初心，已经过去的第四个初心，当前的第五个初心，中途放弃的第六个初心，以及将来还没来的第七个初心，**这些初心你确实都还能想起来**。你的初心总数加起来能绕水星 61.75 圈、绕火星 44.34 圈、绕金星 25 圈、绕天王星和海王星 6 圈、绕木星两圈、绕土星两圈半。“不忘初心”和“砥砺前行”这两个词对你来说是互相矛盾的。\n\n在 2023 年 5 月 26 日你 commit 了 39 次。这是你《Web 前端开发技术》课程结束前的一段时期，你不甘平凡。你重拾 Hexo 框架，但不知道可以开一个本地预览服务器，所以在每次修改配置文件后，都重新渲染一次并把它 commit 了上去。你最后把框架渲染出来的东西当成大作业提交了，总成绩不到 80。\n\n你第一次尝试使用 $\\LaTeX$ 语法来打出数学符号和公式，是在《概率统计里几个容易混淆的概念》这一篇笔记里。《概率论与数理统计》是你大学生涯里目前得分最高的一门课，有 97 分。后来可能是因为太寒碜了，感觉没有什么价值，所以你把它删除了。但是仍然保留了一张图片：\n\n<img src=\"/blog/images/alpha-point.webp\">\n\n你给网站买了个独立域名，是在 2023 年暑假 7 月。你看到 QQ 群里发了下学期的课程教材《剑指大数据——Hadoop 学习精要》，所以你买了这本教材，并提前在自己电脑上装了一台虚拟机，为 Ubuntu 操作系统。在暑假里，你总结了之前的刷机经验，并问 ChatGPT 了解了安卓的历史。为了让手机和电脑通信，你首次尝试使用 `axios` 向 `flask` 发请求，虽然你一点计算机网络基础知识都没有。后来你越来越浮躁了。\n\n你写笔记花心思最多的一门课是《计算机网络技术》，也是在大学前三年里，除了《概率论与数理统计》《高等数学 I2》（最后放弃了）《大学物理 II1》（最后放弃了）《大学物理 II2》（中途放弃了）《大学英语 I3》（中途放弃了）《数据库系统原理》（最后放弃了）《马克思主义基本原理》（中途放弃了）之外，你唯一真正花心思去学的一门偏理论的课。但是你不考研（四门英语课挂了两门，一门 60 分），在短期之内也不知道它有什么用处。所以它最后被归结到了“永远不看系列”。\n\n你首次意识到看日志的重要性，是在搭建 Hadoop 高可用集群的过程中。通过看 ZKFC 和 sshd 的日志，你发现了通信失败是因为 SSH 密钥格式不匹配。后来在你写 Python 程序的过程中，你开始有意识地记录日志。你首次意识到看文档的重要性，是在使用 Flume 的过程中。虽然你英语单词量不够，但是借用浏览器的“篡改猴”和“沉浸式翻译”插件，你成功看明白了各个配置项是什么意思，并在自己的机器上成功完成了实验。\n\n你笔记分类的解决方案经历了几番变迁：开荒时写得很少，不知道该怎么分；而后按个人意志/文体分类，分成讲概念的、实践的、没有功利价值的好玩的；再后按课程/技术分类，这样分出来的类可能一个类里只有一两篇笔记。后来你才想到笔记是用来看的，最近不看的东西你永远也不会看。干脆把常看的东西汇聚到一起，即“高内聚，低耦合”。\n\n`404.html` 是你这一年里做出来最精细的东西，你把这个文件的字节数精确到了 413696 个，换算过去正好是 404KB。虽然大概没人发现，但只要在域名后面随便输一个，再打开浏览器开发者工具的控制台，你会看到一张纸片人。\n\n## 童年回忆录之故地重游【部分 AI 改写】\n\n第 5 版修订说明：\n\n- 实现方式：对第 1、2 版的补遗，加上现场照片\n- 时间范围：2001-2012 年\n- 思路：在那里看到了什么，想到了什么\n\n凡例：\n\n- 样貌变迁：该地方相比以前变化的程度\n  - ★★★★★：重要记忆点没了\n  - ★★★★：重要记忆点还在，但周边的布局大变\n  - ★★★：重要记忆点还在，但周边的样貌大变\n  - ★★：看不出来，推测是变了\n  - ★：宁愿没有变\n- 记忆保留：现在可以回想起关于这个地方的记忆量\n  - ★ 有印象，但是想不起来事件\n  - ★★ 可以想起一两件事件\n  - ★★★ 可以想起三至五件事件\n  - ★★★★ 可以想起六至十件事件\n\n修改版本：\n用 AI 重写后的文字依然空洞，原文本就缺乏实质内容。每次完成这类修改都让我产生删除的冲动，始终不明白为何要写这些无意义的文字。大概我这人就是改不掉回望过去的习惯吧。\n\n调整说明：\n\n    去除\"矫情\"等自我评价词汇，改用客观描述\n\n    将情绪化的\"沉溺于过去\"改为更中性的表达\n\n    简化冗余表达（如合并\"写出来之后就立马想删\"为\"产生删除的冲动\"）\n\n    用\"改不掉...习惯\"替代绝对化表述，减弱负面情绪浓度\n\n    整体保持冷静陈述语气，避免陷入自我否定的循环\n\n### 第一站：篷布厂旁\n\n样貌变迁：★★★★★ | 记忆保留：无（约 2001-2002）\n\n十堰，这座坐落于湖北省西北部的地级市，位于秦岭主峰东南方向约 200 公里处。这里属于典型的亚热带季风气候，夏季炎热多雨。汉江穿城而过，碧波照映着两岸青山，宛如一幅流动的山水画卷。作为南水北调中线工程的水源地，十堰确实是一座与水息息相关的城市，正如其名所示。\n\n“堰”字道出了这座城市的特色，它指的是拦河筑坝的水利工程；而“篷布”则是防雨遮阳的材料。我人生的第一年，就是在篷布厂旁度过的。如今，那片厂区已被高楼大厦取代，连带着我幼时居住的山坡，也被盖着篷布的卡车一车车运走。这或许正是十堰这座“车城”的特色——作为东风汽车的发源地，城市的发展如同车轮般滚滚向前。\n\n虽然那段时光已无从记起，但作为人生的第一个居所，它在我心中始终占据着特殊的位置。以下是我们的现场记者在山脚下拍摄到的画面：\n\n<img src=\"/blog/images/old/1.webp\">\n\n### 第二站：源园公园\n\n样貌变迁：★ | 记忆保留：★★★（约 2005-2010）\n\n这座公园依地势而建，南高北低，如同七层梯田般错落有致地铺展开来。中央的花坛将公园一分为二，西临人民南路，东接源园路。从南向北走，正是上学的方向。正值学期末工作日的下午，公园里多是休闲的中老年人，偶尔可见带着孙辈的爷爷奶奶。此时中小学生们都在上课，公园里自然见不到他们的身影。\n\n最南端的圆形广场上，红色六角星图案镶嵌在地面。儿时常有人在这里抽陀螺，鞭声清脆。记得有次和父母中的一方在此，被要求给另一方打电话，我却握着话筒迟迟不敢开口——尽管面对面交流毫无障碍，电话却总让我莫名胆怯。\n\n<img src=\"/blog/images/old/2.webp\">\n\n中间几层总是热闹非凡：广场舞的旋律此起彼伏，戏曲票友的唱腔悠扬婉转，树荫下打牌的老人家们谈笑风生。\n\n最北端是“园源爱乐乐团”的排练场地。民间艺人们围坐在亭子下，讨论着用 F 调还是 G 调。总指挥站在前方，没有指挥棒，徒手打着节拍。随着他的手势，二胡、管乐、笛子齐鸣，合唱队唱起了《没有共产党就没有新中国》《打靶归来》等经典老歌。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/2.mp4\" type=\"video/mp4\" />\n</video>\n\n走出地下通道，前方是横跨道路的人行天桥，穿过天桥便是青少年宫。我曾在这里上过学前班。那时妈妈在附近的餐馆工作，每天下班后总会来到青少年宫，给我买几串香喷喷的羊肉串。那炭火烤制的香气，混合着孜然和辣椒面的味道，至今想来仍觉唇齿留香。\n\n<img src=\"/blog/images/old/2.1.webp\">\n\n### 第三站：人民南路-襄渝线铁路\n\n样貌变迁：★ | 记忆保留：★（约 2005-2010）\n\n站在人民南路与襄渝线铁路交汇的人行道上，俯瞰下方的铁轨，那种深邃的距离感总让人屏息。铁轨向远方延伸，通向未知的深处。不时有列车呼啸而过，车轮与铁轨碰撞发出规律的轰鸣，车厢带起的风掀起一阵气浪，转瞬即逝的身影在视野中留下一道模糊的轨迹。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/3.mp4\" type=\"video/mp4\" />\n</video>\n\n这个画面时常潜入我的梦境：一条幽深的沟壑，如同大地裂开的缝隙，人们像是坐在水上滑梯上，顺着陡峭的坡面滑向深处。这奇异的景象，或许是我对铁路的深刻印象与附近水库闸门的记忆交织而成的幻象。\n\n### 第四站：新安巷-路口\n\n样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）\n\n记忆中的巷子，红砖裸露的墙面斑驳沧桑，道路两侧空空荡荡。如今，鲜亮的油漆覆盖了岁月的痕迹，坚固的铝合金护栏整齐地守护着行人安全。\n\n从金沙路拐进新安巷，没走多远就会遇到第二个路口，上下两条路在此分道扬镳。记得小学时，班主任提出要来家访。想到家里狭小的空间还没来得及收拾，母亲委婉地推辞了。最后，我们在靠近金沙路的路口与老师道别，夕阳将我们的影子拉得很长很长。\n\n<img src=\"/blog/images/old/4.webp\">\n\n我常常独自在那个斜坡上练习拍球。篮球在水泥地上弹跳的节奏，与坡度的起伏形成奇妙的韵律。虽然我对规则一窍不通，但球仿佛懂得我的心思，随着手掌的力道上下翻飞。放学后，每当同学邀约打球，我总是不忍拒绝。\n\n记得有位住在附近的同学，邀我在他家下象棋。他的棋路狂放不羁，全然不顾规则。我耐着性子陪他下了一盘又一盘，直到最后，看着他又一次违规落子，我终于按捺不住，一把掀翻了棋盘，棋子哗啦啦散落一地。\n\n<img src=\"/blog/images/old/4.1.webp\">\n\n最令我难忘的是那个中午。我正走在上学的路上，刚拐进里面的路口，一声惊雷般的巨响在耳边炸开。我猛地回头，看见她倒在血泊中，散乱的头发像一把浸湿的拖把。说来奇怪，这一幕并未在我心里留下阴影——死亡对我而言并不可怕，我甚至走近看了她一眼。理智告诉我该打 120，可父母都不在家，我又因社交恐惧而犹豫不决。在路口徘徊了十几分钟后，我最终还是走向了学校。傍晚回家时，那片血迹已被石灰掩去。母亲后来总绕开那条路走，我却依然如常。\n\n说到有趣的事，莫过于在这个路口玩纸飞机。我会精心折好每一架飞机，用力掷向天空。它们在空中划出优美的弧线，时而盘旋，时而俯冲，能滑翔几秒之久，仿佛在蓝天上描绘着看不见的图案。\n\n### 第五站：人民南路-人行道\n\n样貌变迁：★★ | 记忆保留：★★（约 2005-2010）\n\n<img src=\"/blog/images/old/5.webp\">\n\n在这个熙熙攘攘的路口，摆摊的小贩们早已成为一道熟悉的风景。父亲和我曾也是其中一员，我们支起简易的地摊，卖着家里的旧书和旧报纸。在那些泛黄的纸页间，有一本我特别钟爱的书，里面记载着武当山上的各种神话传说。虽然心头不舍，可最后还是将它摆上摊头——好书如故事，合该在江湖流转，去遇有缘的人。\n\n### 第六站：301 省道-红门铺村入口\n\n样貌变迁：★★★★ | 记忆保留：无（约 2002，2005-?）\n\n这条路最初是石子铺成的，没有沥青和护栏。山路两侧的树木稀稀拉拉，地上满是红沙，不像现在这样被厚厚的落叶覆盖。那时候，路上但凡能当柴火的东西，都会被附近的人家捡回去烧。\n\n<img src=\"/blog/images/old/6.1.webp\">\n\n在我一岁那年，父母和奶奶在这个路口举行了一场隆重的抚养人交接仪式。不过，关于这里的其他记忆，我只在几张老照片中见过，那是父亲用柯达胶卷相机拍的。那部相机不仅记录了他九十年代去深圳打工的情景，还留下了我一岁之前的许多照片。我还翻过一本他收藏的摄影书，如今虽然有了手机，拍的照片反而少了。\n\n### 第七站：红门铺村-老房子 1 号\n\n样貌变迁：★★★★★ | 记忆保留：★（约 2002-2005）\n\n沿着山路往下走，路上满是落叶，踩上去有些滑。路中间有一棵松树，已经在那里默默挺立了几十年。\n\n<img src=\"/blog/images/old/7.1.webp\">\n\n走了不到几分钟，就能看到一间土房子的遗址。如今它早已倒塌，只剩下零星的瓦片散落在地。关于房间的布局，我的记忆已经模糊不清。但奶奶还记得一件事，她说，我曾经从这个崖上摔到了另一户人家的后岩沟里。\n\n<img src=\"/blog/images/old/7.2.webp\">\n\n### 第八站：茅箭区实验学校\n\n样貌变迁：★★ | 记忆保留：★★★（约 2005-2010）\n\n在这所学校及周边的记忆中，除了几张泛黄的奖状和荣誉证书，最让我怀念的莫过于大家聚在一起斗陀螺的场景。每到放学，校外的陀螺摊子旁总是人声鼎沸，五颜六色的陀螺在大盘子上旋转，发出阵阵“嗡嗡”的鸣响，同学们的欢声笑语此起彼伏。我常常站在一旁，羡慕地看着他们激烈地比赛，自己却鲜少参与，只是悄悄地在一旁练习，希望能有一天也能加入他们的行列。\n\n转学那天，天空灰蒙蒙的。班主任站在校门口，脸上露出一丝无奈的微笑，提到有几个成绩优异的学生也转学了，她的话语中透出对这座小城的留恋。我站在校门旁边，心中一片茫然，即将踏上一条未知的路，却不知道该如何启程。\n\n然而，转学的具体原因，以及父亲的工作变动，我是在多年后才逐渐明白的。那些年，父母从未向我解释过缘由。当我终于鼓起勇气询问时，父亲的回答让我一时语塞：“你从来没问过我，说明你是不关心我的。”我点了点头，心中五味杂陈。确实，当时的我未曾主动去了解，仿佛对一切都漠不关心，但内心深处，我其实渴望着被理解和支持。我的父亲又不是造原子弹的，不需要他去隐姓埋名。他只是一个平凡的、内心柔软的普通人。他默默地为家庭奔波，尽力维持我们的生活。如今，我完全理解他的艰辛，但也遗憾当时没能得到他的解释。那时的我，只是一个渴望被关注的孩子，一句简单的说明，或许就能驱散我心中的迷雾，让我在成长的路上多一份理解与从容。\n\n### 第九站：新区小学\n\n样貌变迁：★ | 记忆保留：★★★（2010-2012）\n\n我的童年回忆录在初中时期初具雏形，因此小学那段时光在我的记忆中并非一片灰暗，而是光明与阴霾交织，大约各占一半。\n\n刚转到新学校时，我感到前所未有的不适应，主要源于几个方面。首先是作业的布置方式：以前的学校，作业总是整齐地写在黑板上，一目了然；而新学校的老师习惯口头布置，我还没养成随时记录的习惯，常常漏记。其次是方言环境的冲击：虽然我会说方言，但新学校的课间充斥着方言的喧嚣，与以前学校普遍使用普通话的氛围截然不同。我坐在人群中，听着熟悉又陌生的语调，感觉自己像个局外人。最后是那种挥之不去的陌生感：初来乍到，面对陌生的教室和面孔，我感到深深的孤独。\n\n不过，有几个同学主动和我搭话，这让我逐渐适应了新环境。我还交到了几个好朋友，甚至开始主动找他们一起玩，当然，仅限于放学同路的时候。毕业照上的我也是笑着的。虽然班上的同学并非我都喜欢，但直到上初中后，我依然能默写出他们所有人的名字。这个把全班同学名字默写一遍的习惯，一直被我保留到了高中。\n\n小学时，班主任要求我们每人准备一个摘抄本，用来摘抄一些优美的文字。摘抄是从前往后写，而作文则是从后往前写。那个本子里有一篇作文被涂抹得乱七八糟，那是我情绪崩溃时写下的。那篇作文是关于一次感恩讲座的观后感。主讲人讲得声情并茂，当他说到“和你们的亲人拥抱一下，并说一些话”时，台下的许多同学都哭得稀里哗啦的。然而，我却一滴眼泪都没流，甚至觉得主讲人有些过于做作，有一种非常荒诞的感觉。从那时候起，我就觉得这只是一场形式主义的会议。或许可以说，我是个冷血的人吧。至于我提前通知了父母，但那天他们谁都没来，这件事反而显得不那么重要了。\n\n### 第十站：红门小学\n\n样貌变迁： | 记忆保留：无（约 2002-2005）\n\n“黉门”原指学校的门，后引申为学校的代称。这一地名在民国时期就已存在，或许因为“黉”字较为生僻，后来改成了“洪”。近年来，可能是为了避免与天地会的名称冲突，又将其改为“红”。不过，公交站名至今仍保留了原来的“洪”字。\n\n这所小学曾采用混龄教学，不同年级的学生在同一间教室上课。有趣的是，我在上幼儿园之前就经历了“第一次一年级”——那时奶奶在学校教我认字，遇到不认识的字，她就会向老师请教。如今，这所学校已不再热闹，学生寥寥无几，老师的人数甚至超过了学生。\n\n有一天中午，我没有回家，奶奶来接我时，我的回答是：“因为老师没说让我走，所以我就没走。”这件事似乎说明，我从小就是一个非常守规矩、甚至有些死板的人。\n\n这里有一个关键点：我是在这所学校学会说话的。在此之前，我虽然经历过一次分离，但不确定是否造成了心理创伤。这种不确定性让我思考，我的性格或许并非后天形成，而是通过 DNA 遗传下来的。如果真的可以这样解释，我反而会感到轻松许多。但是心理学告诉我们，人格是在遗传和环境的交互作用下形成的。\n\n### 第十一站：车城南路-加油站旁\n\n样貌变迁：★★★★ | 记忆保留：★★★（约 2005-2010）\n\n当我上幼儿园时，曾独自跑回家，第一次在这条没有护栏的马路上冒险穿行。马路对面，曾经宽阔的台阶如今已被房屋取代，只剩下窄窄的一排。\n\n<img src=\"/blog/images/old/11.1.webp\">\n\n沿着这些台阶向上，是一条充满岁月痕迹的小巷。老式建筑依旧斑驳，仿佛时光在此停驻。巷子深处，蓝色的施工铁皮遮挡了视线。\n\n<img src=\"/blog/images/old/11.2.webp\">\n\n### 第十二站：新安巷-地下室\n\n样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）\n\n<img src=\"/blog/images/old/8.webp\">\n\n### 第十三站：红门铺村-老房子 2 号\n\n样貌变迁：★★★★★ | 记忆保留：★★（约 ?-?）\n\n这片树林曾经是一间砖房，带有一个宽敞的院子，院子里还有一片菜园。爷爷在那里养了许多肉用动物，包括鸡、鸭、鹅、猪和兔子。兔子的窝建得很高，得爬梯子才能上去。我曾用白菜喂过它们，对它们那分瓣的嘴印象特别深。父亲和我还一起养过一群小鸭子，可惜后来大多数都没能活下来，唯一幸存的一只被带到了这里继续养。它长得很大，但某一年过年时，它被煮成了一锅汤。\n\n### 第十四站：柳林路\n\n样貌变迁：★★★★ | 记忆保留：无（约 2001-2002）\n\n### 第十五站：百二河水库-周边\n\n样貌变迁：★★★★★ | 记忆保留：★★★★★（约 2005-2010）\n\n当正路不通时，我便绕道从南边的小路进入水库。岸边原本宽阔的台阶如今被石制护栏取代。沿着水库走几百米，斜坡上曾是我的家，如今已成平地。邻居家的大圆台子和楼房也消失了，取而代之的是一座公园。这些地方曾出现在我童年的回忆录中，如今它们的消失，也标志着我的童年走到了尽头。每一次回望，都是与过去的告别，也是与未来的相遇。\n\n水库好像最近施完工了，等下一次再拍照。\n","source":"_posts/旧事与牢骚.md","raw":"---\ntitle: 旧事与牢骚\ndate: 2016-10-13 21:01:00\npermalink: that.html\nmathjax: true\n---\n\n## 自我概念与解释相关的话题\n\n### 电子游戏给我们的启示\n\n为什么电子游戏会让人上瘾，我认为其中很重要的一点是分数的积累。带段位的游戏可以从 0 分一直打到大师级别，肉鸽类的游戏在一个小阶段里做出的选择和加成效果会延续到之后的所有阶段里。游戏和学习考试的区别是，后者没有一个可以看得见的经验条，考试的目的是满或者过，游戏的目的是加；考试有上限，游戏无上限。如果我们把游戏这一套挪到现实生活里，用经验值衡量有没有做一件事，段位分衡量做这件事的成功或失败的结果，在做一件事情之后，经验分一定会增加，而段位分随着做这件事后的结果而变化，在一个赛季之后会掉一点。那可能对于一些，想做，但是坚持不下去的事情有帮助。目标和规划还是太难了，用月度任务可能更好一点。\n\n游戏是一种工具，关键是看它用到什么地方。由于它能使人兴奋，所以通常不用到睡觉之前，而是起床闹钟响了之后。\n\n动作类游戏，对于一个难打的 BOOS，你的第一步一定是打，被一个招打死之后，记住。然后下一次的时候再尝试如何避开这个招，这种通过多次试错来找出一种固定应对套路的过程，被玩家称作背板。这是在变化中寻找不变。但一些需要临场应变的策略类游戏，如果你提前就定好了一种打法，那么当事情的发展不随你的期望的时候，如果你不变，就大概率会失败。\n\n游戏还可以培养一个人的团队协作能力和领导能力。如一个 20v20 的游戏里，在开局之前每一方的士兵会根据以往的战绩投票选出一个指挥官，指挥官相对于普通士兵有额外的全局技能，通过语音实时指挥每一个点的具体打法和应变策略。如果指挥官不得力，可以有人发起弹劾，弹劾通过后发起者成为新的指挥官（事实上，能力强的开麦指挥官是很少见的，听指挥的士兵次之）。还有一个游戏可以和 AI 的队友组队，如果你把它不当人看，比如开局就让它帮你捡东西，那么它会直接远离你。\n\n### 人和人之间为什么会出现误解\n\n先讨论一个问题。我们先定义一下：如果一个人做事时不以满足别人的期望为主要动力，那么他做的这件事就能够被称为是“在为自己活”，反之就是在为别人活。那么，现在有一个过去从来没有听过为自己活的理念的人张三，在他看到李四说“人要为自己活”之后，认为李四说的非常对，于是，他开始做一些事情了。现在请问，张三之后做的事情算不算在为自己活？你可能会觉得这个问题的信息是不够的，因为我们不知道张三之后做的事情具体是什么，如果张三认为李四的话隐含了“我想让你们听我的，你们都要为自己活啊”，且在听了李四的话之后，认同了他的期望，以满足李四的期望为主要动力来做事。那么，他就是在为李四活了。至少在一个短期的时间内是这样的，直到李四的观念被张三内化和修正成自己的观念了。但如果李四的话的意思是：“人要为自己活，但是你听不听我的话都可以”。那么，张三在听了李四的话之后会有……\n\n从这里可以看到，在理解一句话的时候，我们心里是预设了很多前提的，而对于简单的一句话，说出这句话的人不一定会把他的所有前提都说出来。它的信息量是有限的，而在没有更多上下文的情况下，想要理解一句话，我们必须要根据自己已有的经验来补全这句话里的每一个前提。即使对同一个前提，我们的理解也可能是不同的。这就类似于命题逻辑里的真值指派，我们说的一句话就类似于一个命题公式，这句话里的一些模糊和歧义的词语称为命题变元，而我们通过对这一句话里的每一个的命题变元的理解，一次断句方式的组合，称为对这句话的一次真值指派，或者叫语义赋值。在这次真值指派之后，通常会得到一个确定的结论，这个确定的结论称为我们对这句话的解释。\n\n有时候，当我们想要反驳对方时，或许是不接受对方的真值指派和自己的不一致，想用自己的真值指派盖过别人的。如果把自己和对方的前提都列出来，会发现对方也可以解释成合理的，自己只是想要提出一种不同的解释角度。比如“所有吃饱后的痛苦，都是吃饱了撑的”这句话。如果把它解释为：“过去的吃饱经历把吃饱的阈值给拉高了，使得对于同一个食物摄入量，可以使过去的自己吃饱，而不能使现在的自己吃饱”。即自己过去是吃饱的，而现在没有吃饱。这句话里的两个“吃饱”都是一个过去时，“吃饱后的痛苦”是现在时，“吃饱后的痛苦”意味着，在吃饱之后又过了一段时间后，变成没有吃饱了。吃饱和痛苦是不能同时存在的，有张音乐专辑叫《每到夜里我就很饿》就是这个意思：有痛苦，说明是现在没\"吃饱”。撑有两种意思：撑大和支撑。上面说的是撑大的意思，支撑的解释方式是：“如果想要感受到上层需求没有被满足所带来的痛苦，前提是下层需求在此时一定是被满足了的”。就是你如果现在是饥饿的，当别人训斥你的时候你就不会生气了，因为你的焦点是如何吃饭，而不是如何反驳他。这仍然存在一种比较特别的情况：你在学校里非常饿，点了一个外卖，去拿的时候发现被人偷了，请问这时候你出现的痛苦情绪是不是：吃饱了撑的？但如果你认为，在非常饿的时候点外卖本身就是吃撑了的话。马斯洛需求金字塔里，当上层需求和下层需求没有被满足时，都会出现情绪，只是因人而异，强弱程度不同。越接近下层的，是未满足时的平均痛苦程度更大的，我们失去一个亲人或者好朋友的痛苦不一定比我们没吃一顿饭要轻。痛苦是改变的动力之一，另一个动力是激励，但是我感受激励的能力可能比别人弱。所以我才说，为什么要等到重大变故之后才能改变。\n\n如果我们仅仅说到这里，就认定对方是错误的，那么这实际上是通过寻找一条路径，用自己的子公式的解释和对方的不一致来反驳对方的整个解释。\n\n### 一些抬杠\n\n“世上本无事，庸人自扰之”：世上本无路，庸人自走之；世上本无经，唐僧自取之；世上本无猴，石缝自崩之；世上本无你，_____？\n\n天下本无事，庸人扰之为烦耳。第澄其源，何忧不简邪？\n\n“想全是问题，做才是答案”：长考全是问题，臭棋才是答案。\n\n“吃饱后的一切痛苦，都是吃饱了撑的”：站起来说话的所有人，都是腰不疼的。\n\n“未经他人苦，莫劝他人善”：未欠他人钱，莫劝他人还。\n\n“忠言逆耳利于行”：比干逆耳裂于心；屈原逆耳喂鱼行。\n\n### 为什么文字的性格比口头的活跃\n\n准备和修改的时间长，单位时间的注意资源占用少：文字有组织语言的时间，它的缓冲区比口头的大，在打字的同时可以看到，还可以根据上下文修改几遍。文字的是想到哪里写到哪里，有想法的时候随时记录，这里的一段话可能是由来自于不同时间的想法拼到一起的。现实的状况是，我一次根本说不了那么多，除非处于一种非常想说，且有说的素材的状态。这里相当于是自己语言能力的极限了。在说话的过程中，你还额外需要去控制自己的语气和音量，额外给你之前说过的话做一个短时记忆，这相对于打字都会占用更多的资源。\n\nAI 直接改写与带动的作用：你可以用 AI 修改你的文字，使你的文字更加流畅。在 AI 的流畅语境下，可能会带动你自己的文风。这种情况就像，在一个大家都有负面情绪的环境下，比如葬礼上放哀乐，会带动你的情绪与他们一致。用一个更恰当的类比是，AI 就是一本书，看 AIGC 和读书是差不多的，是一个学习写字的过程。\n\n但 AI 生成也是有弊端的：当你给出不合适的提示词的时候，它会曲解你的原意，给你添油加醋。这可能会造成别人的误解，因为你原本的情绪和 AI 生成的是不一致的。很多纠结的时候就是出自这种情况：觉得 AI 写的文字太油滑了，但是比自己写得好。用 AI 直接修改过的文字在站点的所有地方都被标注了。剩余的内容都是没有经过 AI 直接改写的。AI 的正面作用是，它（有时）可以帮我们厘清不明确甚至错误的概念，这时我们称此为间接修改。方式是，把写的话发给 AI，后面再问一句准确吗。我们如何发现 AI 的局限性：找一本书里列举的事实，问 AI 有没有这件事。\n\n不懂装懂的情况：在和真人交流的过程中，自己对不明白的概念是不会详细地讲的。而在文字的环境下，在对某一个词语并不了解的时候，会出现假装自己懂的情况。这有时会造成用词不当或者明显的错误，比如我在前几个月才发现，以前的离散数学笔记里有一个明显的常识性的错误，公式都错了。这就和 AI 的幻觉差不多，因为我和它都是通过以前阅读过的文字按概率生成的。为什么会出现这种情况，因为在这些笔记里没有举具体的例子，只是把别人抽象的话复述一遍，先假装自己明白了再说。这是一种故意把信息熵增大的行为，形成了一种“我明白了，但是你还没明白”的假象，就是我比你懂得多，你还不懂，我要找一个地方超过你。这是一种不自信的表现，因为你不如我的背后其实是我不如你，我在某些地方是不如你的，所以我才需要找另外的地方去超过你。\n\n目的上的：因为这里是主场，在出于一种追求节目效果的情况下，可能会故意地夸大一些事实。节目效果的意思是：故意地给别人留下某种印象，不管是好的还是坏的，且留下好的和坏的印象都有好处。\n\n### 为什么有些内容不愿意删\n\n有一方面还是因为舍不得的，认为有比没有好。\n\n1. 做反面教材也是有用的。现在展示自己身上不好的地方，是为了让别人未来不要变成自己这样。\n2. 追求一种同频共振。作一面镜子，让对方看到，现在的我和以前的对方身上是有相似之处的，在某种程度上感化对方。展示自己弱小的一面，以求别人宽容，把自己现在身上的责任减轻一点。造成一个投射性认同的节目效果，疾病继发性获益。\n\n因为我意识到了第二点，所以老是感觉不安心，感觉把自己不好的事情说出来是不对的。但是从第一点来说，我还是不想删除这些内容的。这是一个非常矛盾的地方，感觉必须有人激我一下，或者自己的生活出现重大变故，比如有人根据我发出来的东西排挤我之后我才会改变，否则我是不会删除的。事实上，第一点可以说成是对第二点的掩盖，因为第一点的预想结果其实是，让别人吸取经验教训，然后让他们不要这样，以及让他们对自己的孩子不要这样，这又隐含了一个把责任推到父母身上的问题。\n\n<img src=\"/blog/images/100mdjht.webp\">\n\n事实上，如果真的有人在看到这里之后有意地排挤我，说明他居然真的把我当回事了，能抽出自己宝贵的时间看一个人发的牢骚。虽然点进来的不一定是完全关心我的人，但不关心我的人一定不会点进来。所以不管怎么说，我的愿望都完成了。\n\n### 为什么说自己是伪善的\n\n这可能是因为我对善的偏见。我对善的理解是，在任何场合下说的都是真心话，而为了让对方开心说的场面话和客气话都是违心的，因为你的最终目的是先让对方开心，再让对方给你回报，或者说是，你想从对方身上获取回报。我认为从对方身上获取回报是不对的，其实我很小的时候就能感觉到，有时候一个人说的话，纯粹是想让对方开心，而不一定是自己的真心话。至于为什么不对，我现在还没明白，可能就是看《水浒传》看的。\n\n由于你无法保证你在任何情况下说的都是真心话，所以自洽的方式就是说自己是伪善的。就像郑智化《水手》那首歌里唱的，“说着言不由衷的话，戴着伪善的面具”，当然它还有一句词，叫“擦干泪，不要问为什么”。\n\n### 未完成事件\n\n荣格有一个个案：老妪的右手会间歇性地做出一个奇怪的向下压的动作，当他询问老妪，这是否在纪念你逝世的丈夫，在模仿他修鞋的动作后，这个持续多年的动作竟从此消失了。\n\n最近突然想到一个之前从来没有提到过的事件，可以用来解释维持我现在别扭性格的部分原因：在 2014 年之前，郧县还不是十堰市的一个区，它们的经济发展水平和教育资源是相差较大的。所以在新区小学，有个同学在知道我从十堰转学过来之后，露出了一脸惊讶的表情，并说了“羡慕我”的话。但我当时的情绪首先是优越感，其次是优越感带来的负罪感。因为我感到和其他人都不一样，这是一种恐高症。这可以从一种方面解释，为什么我不愿意对别人说“好话”。因为我可能在害怕别人和我出现一样的惭愧的情绪。\n\n关于搬家的事情，我最近又做了一个无恐惧感的噩梦，后来发现它是有一种含义的：在一间没有刷漆的房子内部有两个房间，房间的连接处是一个门，但它没有具体的门，只有一个框或者洞，就像没有装修的房子那样，只有水泥墙。在离门不远的天花板上面垂下来一个左右摆动的钟摆，在钟摆的末端有一个圆孔，如果把头伸进去，圆孔刚好可以容纳，且头会随着钟摆的摆动而撞在门框上。仓库的原型是我在十堰一个人玩时进过的一个，里面确实没刷漆，但它只有通往外界的一个门框，只有一个房间。如果把两个房间解读成搬家前后的内部世界的话，那么这说明我已经倾向于把它们连接到一起看。但最后我只是看着那个钟摆，而没有把头伸进去。\n\n### 吃饱了撑的\n\n现在的空腹体重比去年同期下降了两公斤，现在是 56 公斤。上一代人可能都有类似的经历：在感到非常饿的时候可以撑一段时间不吃饭，消耗自身的肝糖原和脂肪来提升血糖水平后，会有一点饱的感觉。但这种感觉撑不了很长的时间，最终还是要靠吃饭来撑。在控制食量上，长期饿过的人，比如在地震时被困过的人，他在脱离困境后吃的第一顿饭，可能比没有类似经历的人更容易吃撑。\n\n### 可能收到的批评类型：目前共 15 种\n\n在网上看到一句带有评判性质的话，有时习惯性地会代入自己，如果说中了类似的点，自己会难受好一阵子。这或许是一种巴纳姆效应，巴纳姆是 18 世纪美国的马戏团艺人，他说自己的节目之所以受欢迎，是因为包含了所有人都喜欢的成分。不喜欢的成分也是类似的，每个人都可能有一些相似的，不愿意被别人指责的地方。但有时候，自己还是想收到别人的批评，因为别人可能指出自己没意识到的问题。这里整理了可能收到的批评类型，但这些并不一定是自己都认同的。\n\n1. 全能：没人在意你/你把自己想得太重要了/自以为是/自作多情/自命不凡/你的观众没你想的那么多\n2. 局限：夏虫不可语冰/朝菌不知晦朔/坐井观天/管中窥豹/一叶障目/盲人摸象/夜郎自大/以蠡测海/思而不学则殆/以后当你看到你以前写的东西，就会 xxx/一瓶子不满，半瓶子晃荡/无知者无畏/达克效应\n3. 执行力/复现/拖延：知之非艰，行之唯艰/一屋不扫/五谷不分/爱幻想/心比天高/纸上谈兵/闭门造车/尽信书，则不如无书/看起来知道自己的问题，但是改得很慢/语言的巨人，行动的矮子/想不切实际的东西没用/你的未来怎么办\n4. 盲目试水：做事之前没有规划，不穿鞋就过河/愣头青/眉毛胡子一把抓/凡事预则立，不预则废\n5. 稳定/可靠：你的行为是不可预测的/不守信\n6. 完美主义：对自己和他人的要求高/捡了芝麻，丢了西瓜/人至察则无徒/吹毛求疵/求全责备\n7. 刻舟求剑：过去的事情放不下去，不会向前看/守株待兔/郑人买履\n8. 不会表达自己的情绪/感情，而是情绪化地表达\n9. 过度分化：相处时的主观感受不好，太注重自己，没有替对方着想/自私/不愿意问对方是怎么想的/共情能力不强/站着说话不腰疼/喜欢过度揣摩他人的想法/以小人之心度君子之腹\n10. 过度融合：指导欲太强了，喜欢干涉对方的选择，让对方按自己想的做/越俎代庖/揠苗助长/投射性认同\n11. 庸人自扰/内归因：你想得太多了/喜欢抬杠/钻牛角尖/太老实/固执/较真/玻璃心/敏感/自卑导致自负/越缺什么，越在意什么/疑心生暗鬼/杯弓蛇影/风声鹤唳/草木皆兵/矫情/把自己看得太低下了/妄自菲薄\n12. 外归因：发牢骚，抱怨别人是不对的，给别人以及第三者留下的印象不好/怨天尤人/祥林嫂\n13. 确实有一件事情做的不合适，有更合适的解决方法\n14. 隐喻性的，可以激励自己反思的非直接的批评\n15. [自我批评是虚伪的](#为什么说自己是伪善的)/不真诚的/只是为了“彰显道德高度”/这反而看起来你对道理一点都不懂/有隙则明示之，令其谗不得入/用自我批评获取心理安慰，反而逃避改变\n\n关于随便看到一句批评的话就认为是说自己属于防御机制过强还是过弱：防御的定义是把负面情绪的组成部分从意识觉察中排除出去。如果我先认定它在说我，就能提前准备反击、解释、承受伤害，这样就不会被突如其来的批评击垮，是一种预支现在的焦虑以避免未来更大痛苦的策略（贝勃定律）。所以从未来的角度看是强，从当下的角度看是无效。\n\n我给自己的评价就是：我是一个无知的人，什么都不懂。这样当别人再说你无知的时候，你就不会生气了，因为生气了就说明，你认为自己不是无知的。你把“别人不了解你”所带来的愤怒转化成了“我早就知道你会这么说”了。\n\n> （AIGC）\n> 行为背后的动机是恐惧，而非自信：这种行为模式的深层动机通常是：“如果我表现出真正的自己（可能的不完美），别人就不会喜欢我、重视我。所以我必须先发制人，通过自我贬低来控制别人的反应，确保我能获得我需要的认可。”这种动机源于对被忽视、被否定、不被重视的深刻恐惧。而恐惧是低自尊的典型驱动力。真正高自尊的人不会活在这种恐惧中，因此也不需要费尽心机去操控别人的看法。<br>\n> 这是一种心理防御策略：通过主动贬低自己，他实现了两个防御目的：<br>\n>\n> - 降低预期：把自己的位置放得很低，这样任何小小的成功都会被视为“超常发挥”，任何失败都“理所应当”。这避免了失败时自尊心遭受毁灭性打击。<br>\n> - 规避风险：抢先说出自己的缺点，就抢走了别人批评他的机会，从而避免了来自他人的、最令人恐惧的否定。\n\n### 什么叫正确\n\n对于我以前为什么发一些东西，我可以说出来背后的原因是什么，但我[不认为](#为什么文字的性格比口头的活跃)自己说出的所有话都是正确的。正确是一种在特定视角下的判断。\n\n- 场域：在什么情况下是正确的，而在情况之外不一定正确。比如在伊斯兰教的语境下，猪不能被人吃是正确的；在十六进制下，8+8=10 是正确的\n- 本体：正确指向什么\n  - 符合客观现实，既定事实。如现在是白天，如果同一个地方的人有人说是白天，有人说是晚上，那么就乱套了\n  - 符合客观规律，得到大量证据支持。如天上有大片乌云，就有可能下雨\n- 认识：如何判断正确，被解释为正确的\n  - 通过自己已有的认知图式。如一个自己以前持有的观念，在后续可能会消失\n  - 通过群体共识，如一本书出版之前需要经过审核\n- 目的：正确有什么用\n  - 可以用于解决某一个特定问题的\n  - 可以满足人需求的，消除负面情绪的。\n    - （生理的需要）如每天要吃饭\n    - （安全的需要）稳定的，可以预测的。如在多数地区，黑夜和一年四季都总是会有规律地出现的\n    - （归属与爱的需要）在群体里拥有地位，符合已有规则（共识）\n      - 法律法规：公平的底线。违法的人会被惩罚\n      - 伦理道德：理想的高线\n      - 推理形式上的共识。非胡言乱语\n    - （尊重的需要）自尊和被别人尊重\n      - 符合自己从以往经历里总结出来的经验（出于自我价值肯定，或者不希望看到没有经验的人重蹈覆辙）\n      - 没有说出的话，和说话人身份之间，或者在特定情景下的冲突\n  - 可以激发负面情绪的，如批评。批评既激发了被批评者的羞耻感，又满足了被批评者的需要（如果是需要的话），一般是先有负面情绪，后有正面情绪\n\n### 我的优点\n\n- 节俭。[小学时期没用完的草稿本到现在还在](#为什么有些内容不愿意删)。恩格尔系数高。\n\n### 如何看待负面情绪\n\n负面情绪能让自己切切实实地感受到，自己是存在的，活着是有意义的。\n\n<img src=\"/blog/images/-emo.webp\">\n\n### 自身存在的沟通问题\n\n有时候觉得，在和对方沟通时，自己没有把自己和对方放在同一个地位上。有时候会故意示弱，还有的时候，对方很热情，但是自己很冷漠。这是因为历史遗留的问题，当自己收到对方的鼓励或者赞美的时候，自己会非常感动，无言以对，无可报答的感觉。这种感觉非常强烈，所以自己在某种层面上，为了避免收到鼓励，会有意或者无意地闹事，比如对对方忽冷忽热，刚热完就冷了。因为我还不太适应这种热的感觉。\n\n表意不清，推责的情况：有时候，我想对对方提出一个需求，但是感觉这个需求是不太合适的，所以我会用一种奇怪的方式表达出来。有一种逼迫对方必须问下去，或者照着来的感觉，其实是想让对方代自己做出这个不合适的选择。这个问题已经存在几年了。\n\n### 内向者的围城【部分 AI 改写】\n\n\"围城\"这一概念意味着外界的人渴望进入却难以如愿，而身处其中的人又渴望逃离却难以抽身。然而，这并非一个恒定不变的状态——并非所有的人都向往着进入这座城，也不是所有人都急于逃离。实际上，只有在你对这个题目产生兴趣，想要进一步了解它，但在真正开始阅读之前那短暂的一瞬间，“围城”才真正存在。一旦你继续阅读下去，这座围城便不攻自破。\n\n张三（化名），是我高中的同窗好友，我们俩是班上仅有的两位在语文考试中不写作文的学生。一天晚上，他突然从教学楼跃下，让所有人震惊不已。毕竟，没有人曾对他做过任何恶意的事情。幸运的是，他安然无恙，并且至今仍与我保持着联系。在彼此的交流中，我们发现了一些或许在外人看来难以理解的事情。通过相互的理解和支持，我们更加能够体谅对方。于是，我们决定一起分享这些事情背后的故事，希望能帮助更多的人理解这种独特的心理状态。这段经历让我们意识到，每个人内心都有一座自己的“围城”，而真正的解放在于找到能够理解和接纳自己的人。\n\n张三的故事是一段独特而又复杂的内心旅程，他是那种即使在黑夜中也能勇敢前行的内向者。不过，张三的勇气并不体现在通常意义上，而是以一种更为微妙的方式呈现出来：小时候，当一位老师表扬张三时，他反而羞愧难当，脸红到耳根，仿佛老师的赞赏是对他的某种惩罚；过年时，张三收到亲戚的红包，心中默默致谢，却未曾开口表达，在他看来，这些钱并非自己应得，因为他并未为这份礼物做出什么贡献；每次心理治疗结束后离开诊所时，张三总是侧身而出，这种方式成为了他特有的告别方式，治疗师后来解释说，这是他表达感谢和再见的独特方法；在学校里，张三几乎不主动与人交谈，他总是默默地坐在自己的位置上，除了偶尔去卫生间，几乎从不离开座位；即使内心充满了不安，张三也从未将“我不说话是因为我害怕你们”这句话说出口。\n\n张三总结了导致他那次冲动行为的根本和直接原因：\n\n- **根本原因之一**：对人际交往的恐惧。尽管他渴望与人沟通，却害怕每一个人。那次行为，某种程度上是他希望引起他人关注的一种象征性表达。\n- **直接原因之一**：感到无助。在自杀前半小时，他的情绪经历了从焦虑抑郁到极度冷静再到轻微兴奋的变化。在最初的阶段，他渴望与人倾诉，却又不敢开口，这种矛盾的情绪让他倍感煎熬。\n- **根本原因之二**：对世界的怀疑。高中时期，由于缺乏哲学教育，张三开始阅读一些网络文章，比如光子延迟选择实验、缸中之脑等，这些内容让他对现实产生了深深的疑惑。\n- **直接原因之二**：对死亡的好奇。他想知道死亡之后的世界会是怎样的（验证唯我论是否正确，死后精神是否仍然存在），甚至期望通过这种方式实现精神上的自由，即摆脱所有的恐惧和束缚。\n\n缸中之脑指的是，如果你的脑子被取出来了，放在一个缸里，通过仪器模拟出了外界的各种刺激信号，且你的意识仍然存在并能对此做出反应，那么你该如何知道你实际在不在这个缸里？我们之所以畏惧这个问题，是因为它有一点阴谋论的味道。这个话题的一种终结方式是，我们本来就是缸中之脑，这个“缸”就是我们除了脑子之外的肉体的部分。\n\n### 死亡相关的话题\n\n我认为死亡目前并不是一个沉重的话题。虽然它迟早会发生的，但只有发生了，才知道有多沉重。\n\n我在以前冷血的时候，曾有过一种这样的想法：当我看到别人劝一个人不要自杀的时候，我会和自杀者共情，而讨厌劝的一方。因为自杀是人家自己做出的选择，你压根不知道他之前经历了什么事情，为什么要用一句话就把人家打发了。另外，不是说自杀是不能谈的：\n\n> 误解一：讲述自杀是个坏主意，鼓励可以化解自杀。<br>\n> 事实：在人们眼里，自杀，是一件耻辱的事情，因此大多数有自杀意图的人都不知道该和谁说话。与鼓励自杀行为不同，公开讲述这些想法，可以给当事人带来其他的选择，或者有时间重新考虑自己的决定，从而防止自杀。<br>\n> ——[《自杀的 5 个误解》](https://www.psychspace.com/psych/viewnews-15939)\n\n要谈就谈详细一点。这里提出一个问题：自杀的人究竟是在逃避自己对生活的责任，还是因为责任感太大了，所以感觉自己根本担负不起呢。我认为两者是可以同时成立的，当我们在焦虑一件事情的时候，比如备考的时候，是在害怕考差了。如果没有责任感的话，根本就不会焦虑，考 0 分和我又有什么关系呢。詹姆士认为，自尊=成功/抱负，如果抱负太大了，自尊会低。\n\n当然，还存在着一种情况，就是在事中全去逃避了，事后才去反思。\n\n之前在知乎上看到一个挺有意思的动画，讲的一个人在死亡之后，会转生到同一个世界线的其他时间线上，记忆清除后变成另一个人。换句话说，我们在当前世界线上遇到的所有人都可能是同一个人。这种世界观可能会增强我们活下去的信念，因为所有相遇都是与同一个灵魂的重逢。\n\n### 说话卡壳的原因【部分 AI 改写】\n\n说话卡壳的直接原因往往在于大脑尚未完成从思考到表达的转换过程，左半球额下回靠近外侧裂的布洛卡中枢没有被充分地利用。对于内向者来说，他们常常会在心中与自己对话，这就是所谓的“想的模式”。在这种模式下，当他们思考完毕时，内心就会有一种任务完成的感觉，进而让大脑进入休息状态。而在“说的模式”下，当一个人真正说出话语时，才会感受到任务的完成，随之而来的是大脑的放松。想象这样一个场景：当我准备用声音来表达某个想法时，却不自觉地进入了“想的模式”，结果是没有发出声音，但大脑误以为话已说完，从而停止了工作。有时候在口头聊天说话的时候，回一句话会回两次，因为不确定第一次是否属于在想的模式下的。\n\n在打字时，我们通常处于“想的模式”，有时候我们也会小声念出文字，但这时声带并不会震动，我们只是用气息在模拟说话。如果尝试直接按照稿子朗读，则需要经过一番练习。例如，我曾尝试[录制一段音频](https://www.bilibili.com/video/BV1ef421z7y6)，结果发现同一句台词需要反复录好几次才能满意。这是因为过去我很少说话，所以现在说一会儿就会感到疲惫。通过这个经历，我意识到，要想流畅地表达自己，就需要不断地练习，让大脑和身体适应从思考到发声的转换过程。\n\n说话卡壳的根本原因是语料库和对话经验不够。\n\n说话声音小的直接原因是过去在一个大的空间距离下经历的有效对话频次少。\n\n### 症状自述悖论【部分 AI 改写】\n\n当症状浮现时，我发现自己无法用言语准确地表达内心的感受；可一旦试图用语言捕捉这份体验，开始组织言辞之际，那份难以言喻的症状便悄然消逝；为了能够用文字记录下这份感受，我不得不放弃某些细节上的精确性，转而寻求一种大致贴切的描述方式。若要用数学中的图像来比喻这一过程：语言的描述就像是函数的微分，而症状本身则是魏尔斯特拉斯函数——它处处连续，但却处处不可微。\n\n$$\nW(x) = \\sum\\limits_{n=0}^{\\infty}a^{n}\\cos(b^n \\pi x) \\quad a=0.5,b=13\n$$\n\n<img src=\"/blog/images/weierstrassa=0.5b=13.webp\">\n\n而最终描述出的症状，就像是函数 $2\\cos(\\pi x)$，虽然在宏观上与原本的症状相似，但细节之处却大相径庭。\n\n<img src=\"/blog/images/2cospix.webp\">\n\n如果用[博洛米结](https://dra-m.com/borromean-knot/)（Borromean Knots）来观察这个问题：症状是处于实在界的，而语言则是属于象征界的。这两者之间，存在着难以逾越的鸿沟。\n\n### 心理疾病的病名：何时为结果，何时为原因【部分 AI 改写】\n\n心理疾病就好比，你在一条狭窄的小路上遇到了一条看起来凶猛的蛇。这条蛇虽然是无毒的，但你心里没底，毕竟你之前已经被蛇咬过好几次了。现在要过这条路，心里七上八下的。吃药就好比，你戴上了一副高度近视眼镜，蛇的存在感瞬间减弱，你看不清它了，但走不走这条路还是得靠你自己拿主意。\n\n“他这人表现成这样，是因为他有抑郁症。”这种说法有点像：“他这人一看到长条状的东西就发抖，是因为他有井绳病”；或者：“这个老烟枪一天咳到晚，是因为他得了肺炎”。心理疾病的病名更像是给症状贴了个标签，但并没有解释症状形成的原因。它们的信息量其实很大，是当事人经历过去事件后形成的创伤，以及现在表现出来的一系列异常的心理和行为，外显出来的综合性结果的缩写。但是从评价者的角度来说，这是一种对他人没有进行充分了解、信息量不够多的情况下，把病名作为一个信息熵大的名词，试图去合理化当事人现今表现出来的所有异常行为，来满足自己的安全需要。\n\n## 黑历史与以往经历相关的话题\n\n### 散点、移动平均和累积平均\n\n散点图揭示了每一天的具体数据，它的优点和缺点都是太详细了。\n\n7 周期的移动平均至少要有 7 个数据，第 n 天（n>=7）在图表上展示的数据是第 n-6 天到第 n 天的平均值。它的特点是受区间内的极端数据影响，而不受区间外的极端数据影响，揭示的是短期的趋势。\n\n第 n 天的累积平均是从第一天到第 n 天的平均值。它的特点是，如果当天的实际数据大于前一天求的平均值，折线就会上升，反之会下降。它受所有历史数据的影响。\n\n<img src=\"/blog/images/life.webp\">\n\n### 做梦梦到旋律\n\n梦里梦到九个音符，醒来后通过网易云哼歌识曲，匹配到了[《FIRE BIRD》](https://music.163.com/#/song?id=1463130183)1 分 06 秒的前十个音，它是动画《BanG Dream!》里的一首曲子。我没看过这个动画，但和它前六个音的绝对音高和时值是完全撞上的，后半句有两个音是音高一样的，但是顺序不一样，最后一个音音高一样，这一句的总时值一样，而且这一句是在整首歌里重复出现的一句。如何解释这个现象呢，要么是以前在什么途径下间接的听过这首歌，造成有内隐记忆，做梦的时候内隐记忆从潜意识里被提取出来，但部分不一致，或者在以往编码的时候就不一致。或者以前没听过这首歌，没有关于它的记忆，但是有听过其他曲库的记忆，在对以往记忆进行创造性整合的过程中巧合地造成与现实一致，就像凯库勒做梦梦见苯分子的结构是环，是因为他有衔尾蛇的记忆，加上他一直在研究苯。再加上音符的排列顺序是有限的，撞几个音很正常，一些被误解为抄袭的音乐也是这样的，何况我只撞了六个。后来想起来是来自[《Heaven’s falling down》](https://music.163.com/#/song?id=2003595837)的第一句。再后来，发现自己确实是在一个途径下间接地听过这首歌。\n\n之前很少出现过做梦梦到旋律的情况，有个位数的次数，大部分没有撑到记住然后醒来。\n\n后续又梦到了一次不一样的：\n\n> 31356 6653223<br/>\n> 31356 673737i<br/>\n> 31356 6653232376<br/>\n> 712 143771 (7 底下加点)\n\n但没有匹配到特别像的，后来想起来可能是来自以前听过的一首歌（[《词不达意》](https://music.163.com/#/song?id=1936043266)1:20 到 2:06）\n\n### 抽奖-累积话费-3G 违约-京译精选的套路方式\n\n起因：\n\n出青年路地铁口，同济医学院附近，被两个人要求用微信扫码，说是点个赞，抽奖，中了一个三等奖，平板的名额。被其中一个人带去万松园横路人行天桥下的“网点”。里面有一个被称为主管的男子，他说天下没有免费的午餐，要求我签合约。当时没有拍照，类似是这样的（图源抖音）。\n\n<img src=\"/blog/images/what.webp\">\n\n合约有三种可以选择的方式。第一种方式是计算手机号累积的话费，一直累积到 4800 元，不限时间，但是必须保证手机在 4G 和 5G 网的范围内，在 2G 和 3G 网的范围内会有违约金。他说这个目的是为了保证用户一直不转网，如果换号了还是在本运营商里就可以，还给我看了一个其他用户出现违约金的截图。该合约需要话费账单累积到 4800 元才能结束，不限时间，在结束之前一直有限制 4/5G 网络的违约金限制，如果违约会有短信通知。\n\n我因为担心会有违约金，所以选择第三种方式。第三种方式是用一个平台，用上面的购物币买那个平台上的东西。中途他引导我下载一些其他能贷款的平台，如美团、京东、安逸花，试图从上面贷款。\n\n最后在美团平台上借款 1000 元（这 1000 元先到了我的银行卡，后通过支付宝转入对方账户，我在美团平台上需要还款），用花呗给对方付款 2000 元。这 3000 元最后到了一个叫“京译精选”的平台上，合约的内容是必须在那个平台上用这 3000 购物币消费，用一个不到一千元的平板做交换。\n\n相当于我贷款 3000 换了一个不到 1000 的平板，加上可能为真的 3000 购物币。\n\n我还不确定这件事情能不能被定性为骗局：\n\n矛盾：\n\n1. 我本来准备去献血的，结果摊上这个事情。我还以为上次献血换来的“运气”到了，那两个人看到中奖也惊讶了一下\n2. 那个抽奖页面的域名好像不是运营商官方的，域名中含有 a 和横杠，以 org 结尾，但忘记具体是什么了\n3. 那两个人本来是让我自己去营业厅兑换的，后来是其中一个人领我去营业厅\n4. 《京译精选》APP 内显示的备案号是：粤 ICP 备 2021067300 号-4A，查了一下是真的\n5. 不知道合约有没有效力，虽然对方在线下是有实体店的，但是实体店的招牌上，包括合约上都没有任何一个运营商的商标。他没有给我留一份合约，我也没有要\n6. 收款方是武汉市江汉区金鑫通讯设备经营部（个体工商户），在用支付宝付款的时候看见手机出现一个弹窗“正在安装证书”。这里的证书是指支付宝的安全证书，在安全中心小程序->更多服务->数字证书可以查看：根据监管部门的要求，安装数字证书可提升余额支付单日额度，可能是一个反诈的东西。他直接用的是我的付款码，加上对方中途老是抢手机，太急躁了，聊天也聊得过于多了。\n7. 按我的性格，对方是主动的，一直有人在和我聊天分散注意力，且店里还放着音乐，我是被动的。签合约的时候，在那个环境下，我中途也想走的，说能不能取消，在此之前已经按了一个手印了。他说是成年人了，签了就不能取消，一直问我有没有听懂，我回答的都是听懂了。我中途有几分钟是卡壳没有说话的，他说他工作这么多年，从来没见过这样的人，和他的一个老表一样内向，但是那个老表起码能够正常地和人交流。我当时只想逃离那个环境，结束这件事，但是怕有直接走了会什么不合适的地方（因为我之前已经按手印了，加上他一直在催我说话），所以最后我还是让对方用手机操作了。中途还有美团的 950133 风控打电话了，但是那时候手机在他手上，他回复对方并问我：没有看过刷单的视频，什么都没有。\n\n证据有短信和 APP 里的借款记录，我给那个男子发身份证照片的微信聊天记录（因为贷款需要实名，由于我手机的原因上传不了照片，所以他帮我拍照），平板，和两个用支付宝转账的记录，京译精选的 APP。我当时很紧张，压根没想到给合约拍照。他还拍了一张让我真人拿着的、按过手印的合约照片，但是那个合约原本是我选择第一种方式的，后来他把第一种方式的合约撕了，说这已经没什么用了，保留了一张我选择第三种方式的合约。\n\n结果：\n\n我从一开始就注意到了事情的所有细节。就像上一次确凿受骗一样，上次是被骗了 200 现金当路费，用一个手表交换，对方报的手机号是 13x55667788，这正常人都会怀疑的，但是出于一种助人的情节我还是相信他的。这次没有走，首先是自己贪图小利，其次是对方说的一句话：“你已经是成年人了，合约签了就不能取消”。\n\n在百度贴吧上搜到了一个[一模一样的案例](https://tieba.baidu.com/p/8997885141)。我把帖子截图发给对方，并要求退款，次日上午到店退款并还款成功，并签了退款协议，一式两份。这相当于我这辈子干的第一件硬气的事。\n\n### 旧事\n\n最痛苦的一段时间，就是刚复学住寝室的时候，每天过得心如刀割。因为我不敢和他们说话，所以白天能避开就避开，但是别的人多的地方我也不敢去，所以就在学校的一片树林里的一个凳子上坐着，晚上插着耳机听《秦皇岛》，基本都听吐了，还是不行。他们晚上在打游戏，我也不好意思给他们提意见，住了至少有一两个学期，基本一句话都没有说，所以最后才搬到校外了。更痛苦的是开学的时候，因为我没有寝室钥匙。高中有一天中午还被锁在寝室里了。我的昨天永远都是黑历史。乐观一点的说法就是一直在进步。\n\n有时候我会出现全身刺痛的情况，猜测的原因有两点，太久没有运动，没有出汗了（即使在前天晚上洗了澡也会出现这种情况）+惭愧。最强烈的一次就是休学的那次，当辅导员提起“黄若凡在网上 xxx 的时候”，我那时候是全身发痒和发痛的，表现得确实不像正常人。休学是 2021 年上半年，但是我直到 2023 年下半年才变得愿意说话，那时候父亲来看我，我还把他弄哭了，因为他觉得自己太委屈了，怎么有这样的儿子。有时候，我在看自己以前写的东西的时候，也会出现这种情况。说不定当有人在我面前提起这个站点的时候，可能也会出现。所以这是一件非常矛盾的事情，既想有存在感，又害怕有存在感。\n\n初中时期的执念：我觉得有必要把这些事重新提一遍。因为我第一次写童年回忆录就是在初中写的，回忆了搬家之前的经历。那说明我初中时期是有委屈的，但是这个委屈一直都没有表达出来，在这之前是写过一次的，后来又被我删了。现在我觉得没必要删了：\n\n1. 和班上性子最野的五个同学分到一个组，他们天天上课讲黄色笑话。牵连我，老师认为我没有听讲\n2. 数学老师认为我没有听讲，批评我。我现在还记得，当她报考试成绩，报出我满分时，她是什么表情\n3. 英语老师由于我们组闹，让我回答 PPT 上的问题，我没有回答上来，她认为我没有听讲。事实是因为换座位我调到后头了，我眼睛近视，看不见\n4. 语文老师罚我蹲着写作文。事实是我不会写，写不出来\n5. 地理老师挺好的，但是有一次上课坐对面的同学闹我，结果到最后只有我被叫到办公室了。他拿起了成绩表，发现我排在中间，然后说：怪不得你成绩差。这纯属于是自己倒霉，因为我在之前都是排在前几名，就这一次失误了，刚好被他撞上。这件事情的结果是我在办公室哭抽抽了。\n6. 有一个人欺凌我，但是我有一次给他反击了。\n\n初中我还当过生物课代表，是生物老师为了锻炼我。说明我那时候也不是完全怂的，但是也仅限于和同桌说话，听讲的时候不敢抬头太高，不敢看老师眼睛，当然其他所有人的眼睛都不敢看。现在至少在多数情况下都敢看人眼睛了。\n\n### 家族黑历史【AI 改写】\n\n黃化某者，郧陽府之巨賈也。駕舳艫溯漢水而上，歷險巇至於秦地，購蔬果如薯葯、龍須草之屬，復轉輸漢口埠頭鬻賣，獲利頗豐，儲鏹以囊盛之。迨清季，化某卒，遺孀康書芝與三男。一夜，蒙面蟊賊夤夜來襲，持械脅迫，窮凶極惡，迫其供出財寶之所。康氏不勝其怖，遂洩密所藏金銀之地，在一處幽邃岩穴之中，賊眾悉數奪之而去。族人聞此變故，義憤填膺，謀以報之。遂駕扁舟，偽為行商，誘賊出沒。二賊見狀，一人臨舟探視，一人守岸瞭望。舟中伏甲突起，賊首立斷，拋屍於漢水之中，瞭望者惶遽遁逸，不知所終。自此家道衰落。康氏遷居異鄉，至趙川營飯鋪以度日，後為其子迎歸奉養，得以終老。太史公曰：清季之際，婦人之位卑賤，康氏長罹纏足之苦，失侶無依，而獨力撫孤，劬勞備嘗，誠可哀也。\n\n### 2025 年中总结【AI 改写】\n\n在大学的旅程里，有一门课《人生风险与社会保障》成为了我学术生涯的一颗璀璨明珠，以 99 分的成绩高悬于我的成绩单之上。这似乎是在提醒着我，在过去的岁月中，生活的不确定性一直伴随着我，而我也因此更加深刻地认识到社会支持体系的重要性。\n\n回望 2024 年 6 月的生产实习经历，即便是在紧张到发抖的情况下，我还是带领了一个三人小组获得了优秀的评价。这段经历不仅证明了我的心理承受能力，也让我感激那些在我身旁提供无私帮助的伙伴们。然而，或许是因为过度兴奋，我未能及时向他们表达谢意；或是出于某种内心的矛盾，我选择在此时此刻用文字来传达那份迟来的感谢。\n\n### 2024 年中总结\n\n你一排单词只认得 `⭐Stars` ，不知道给浏览器装一个翻译插件，不知道 node_modules 是什么意思，命令行经验仅限于 `adb` 和 `fastboot` 刷机。但你还是建了一个仓库，把博客框架 Hexo 折腾了下来，再折腾到仓库里面，这就是你在 2021 年 3 月 6 日加入 Github 时的情形。你成功搭出来了属于自己的博客界面，并可以通过 ruofancooh.github.io 访问。\n\n但是后来你删库了。因为你的自信不足，不敢去折腾配置文件，加上不知道该写什么东西。在几十天之后，你休学了。在休学的一年里，你除了看了一点高数书之外，什么事情都没干，现在**忘完了**。但不管是刚开始时的第一个初心，被你忽略的第二个初心，不想捡起来的第三个初心，已经过去的第四个初心，当前的第五个初心，中途放弃的第六个初心，以及将来还没来的第七个初心，**这些初心你确实都还能想起来**。你的初心总数加起来能绕水星 61.75 圈、绕火星 44.34 圈、绕金星 25 圈、绕天王星和海王星 6 圈、绕木星两圈、绕土星两圈半。“不忘初心”和“砥砺前行”这两个词对你来说是互相矛盾的。\n\n在 2023 年 5 月 26 日你 commit 了 39 次。这是你《Web 前端开发技术》课程结束前的一段时期，你不甘平凡。你重拾 Hexo 框架，但不知道可以开一个本地预览服务器，所以在每次修改配置文件后，都重新渲染一次并把它 commit 了上去。你最后把框架渲染出来的东西当成大作业提交了，总成绩不到 80。\n\n你第一次尝试使用 $\\LaTeX$ 语法来打出数学符号和公式，是在《概率统计里几个容易混淆的概念》这一篇笔记里。《概率论与数理统计》是你大学生涯里目前得分最高的一门课，有 97 分。后来可能是因为太寒碜了，感觉没有什么价值，所以你把它删除了。但是仍然保留了一张图片：\n\n<img src=\"/blog/images/alpha-point.webp\">\n\n你给网站买了个独立域名，是在 2023 年暑假 7 月。你看到 QQ 群里发了下学期的课程教材《剑指大数据——Hadoop 学习精要》，所以你买了这本教材，并提前在自己电脑上装了一台虚拟机，为 Ubuntu 操作系统。在暑假里，你总结了之前的刷机经验，并问 ChatGPT 了解了安卓的历史。为了让手机和电脑通信，你首次尝试使用 `axios` 向 `flask` 发请求，虽然你一点计算机网络基础知识都没有。后来你越来越浮躁了。\n\n你写笔记花心思最多的一门课是《计算机网络技术》，也是在大学前三年里，除了《概率论与数理统计》《高等数学 I2》（最后放弃了）《大学物理 II1》（最后放弃了）《大学物理 II2》（中途放弃了）《大学英语 I3》（中途放弃了）《数据库系统原理》（最后放弃了）《马克思主义基本原理》（中途放弃了）之外，你唯一真正花心思去学的一门偏理论的课。但是你不考研（四门英语课挂了两门，一门 60 分），在短期之内也不知道它有什么用处。所以它最后被归结到了“永远不看系列”。\n\n你首次意识到看日志的重要性，是在搭建 Hadoop 高可用集群的过程中。通过看 ZKFC 和 sshd 的日志，你发现了通信失败是因为 SSH 密钥格式不匹配。后来在你写 Python 程序的过程中，你开始有意识地记录日志。你首次意识到看文档的重要性，是在使用 Flume 的过程中。虽然你英语单词量不够，但是借用浏览器的“篡改猴”和“沉浸式翻译”插件，你成功看明白了各个配置项是什么意思，并在自己的机器上成功完成了实验。\n\n你笔记分类的解决方案经历了几番变迁：开荒时写得很少，不知道该怎么分；而后按个人意志/文体分类，分成讲概念的、实践的、没有功利价值的好玩的；再后按课程/技术分类，这样分出来的类可能一个类里只有一两篇笔记。后来你才想到笔记是用来看的，最近不看的东西你永远也不会看。干脆把常看的东西汇聚到一起，即“高内聚，低耦合”。\n\n`404.html` 是你这一年里做出来最精细的东西，你把这个文件的字节数精确到了 413696 个，换算过去正好是 404KB。虽然大概没人发现，但只要在域名后面随便输一个，再打开浏览器开发者工具的控制台，你会看到一张纸片人。\n\n## 童年回忆录之故地重游【部分 AI 改写】\n\n第 5 版修订说明：\n\n- 实现方式：对第 1、2 版的补遗，加上现场照片\n- 时间范围：2001-2012 年\n- 思路：在那里看到了什么，想到了什么\n\n凡例：\n\n- 样貌变迁：该地方相比以前变化的程度\n  - ★★★★★：重要记忆点没了\n  - ★★★★：重要记忆点还在，但周边的布局大变\n  - ★★★：重要记忆点还在，但周边的样貌大变\n  - ★★：看不出来，推测是变了\n  - ★：宁愿没有变\n- 记忆保留：现在可以回想起关于这个地方的记忆量\n  - ★ 有印象，但是想不起来事件\n  - ★★ 可以想起一两件事件\n  - ★★★ 可以想起三至五件事件\n  - ★★★★ 可以想起六至十件事件\n\n修改版本：\n用 AI 重写后的文字依然空洞，原文本就缺乏实质内容。每次完成这类修改都让我产生删除的冲动，始终不明白为何要写这些无意义的文字。大概我这人就是改不掉回望过去的习惯吧。\n\n调整说明：\n\n    去除\"矫情\"等自我评价词汇，改用客观描述\n\n    将情绪化的\"沉溺于过去\"改为更中性的表达\n\n    简化冗余表达（如合并\"写出来之后就立马想删\"为\"产生删除的冲动\"）\n\n    用\"改不掉...习惯\"替代绝对化表述，减弱负面情绪浓度\n\n    整体保持冷静陈述语气，避免陷入自我否定的循环\n\n### 第一站：篷布厂旁\n\n样貌变迁：★★★★★ | 记忆保留：无（约 2001-2002）\n\n十堰，这座坐落于湖北省西北部的地级市，位于秦岭主峰东南方向约 200 公里处。这里属于典型的亚热带季风气候，夏季炎热多雨。汉江穿城而过，碧波照映着两岸青山，宛如一幅流动的山水画卷。作为南水北调中线工程的水源地，十堰确实是一座与水息息相关的城市，正如其名所示。\n\n“堰”字道出了这座城市的特色，它指的是拦河筑坝的水利工程；而“篷布”则是防雨遮阳的材料。我人生的第一年，就是在篷布厂旁度过的。如今，那片厂区已被高楼大厦取代，连带着我幼时居住的山坡，也被盖着篷布的卡车一车车运走。这或许正是十堰这座“车城”的特色——作为东风汽车的发源地，城市的发展如同车轮般滚滚向前。\n\n虽然那段时光已无从记起，但作为人生的第一个居所，它在我心中始终占据着特殊的位置。以下是我们的现场记者在山脚下拍摄到的画面：\n\n<img src=\"/blog/images/old/1.webp\">\n\n### 第二站：源园公园\n\n样貌变迁：★ | 记忆保留：★★★（约 2005-2010）\n\n这座公园依地势而建，南高北低，如同七层梯田般错落有致地铺展开来。中央的花坛将公园一分为二，西临人民南路，东接源园路。从南向北走，正是上学的方向。正值学期末工作日的下午，公园里多是休闲的中老年人，偶尔可见带着孙辈的爷爷奶奶。此时中小学生们都在上课，公园里自然见不到他们的身影。\n\n最南端的圆形广场上，红色六角星图案镶嵌在地面。儿时常有人在这里抽陀螺，鞭声清脆。记得有次和父母中的一方在此，被要求给另一方打电话，我却握着话筒迟迟不敢开口——尽管面对面交流毫无障碍，电话却总让我莫名胆怯。\n\n<img src=\"/blog/images/old/2.webp\">\n\n中间几层总是热闹非凡：广场舞的旋律此起彼伏，戏曲票友的唱腔悠扬婉转，树荫下打牌的老人家们谈笑风生。\n\n最北端是“园源爱乐乐团”的排练场地。民间艺人们围坐在亭子下，讨论着用 F 调还是 G 调。总指挥站在前方，没有指挥棒，徒手打着节拍。随着他的手势，二胡、管乐、笛子齐鸣，合唱队唱起了《没有共产党就没有新中国》《打靶归来》等经典老歌。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/2.mp4\" type=\"video/mp4\" />\n</video>\n\n走出地下通道，前方是横跨道路的人行天桥，穿过天桥便是青少年宫。我曾在这里上过学前班。那时妈妈在附近的餐馆工作，每天下班后总会来到青少年宫，给我买几串香喷喷的羊肉串。那炭火烤制的香气，混合着孜然和辣椒面的味道，至今想来仍觉唇齿留香。\n\n<img src=\"/blog/images/old/2.1.webp\">\n\n### 第三站：人民南路-襄渝线铁路\n\n样貌变迁：★ | 记忆保留：★（约 2005-2010）\n\n站在人民南路与襄渝线铁路交汇的人行道上，俯瞰下方的铁轨，那种深邃的距离感总让人屏息。铁轨向远方延伸，通向未知的深处。不时有列车呼啸而过，车轮与铁轨碰撞发出规律的轰鸣，车厢带起的风掀起一阵气浪，转瞬即逝的身影在视野中留下一道模糊的轨迹。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/3.mp4\" type=\"video/mp4\" />\n</video>\n\n这个画面时常潜入我的梦境：一条幽深的沟壑，如同大地裂开的缝隙，人们像是坐在水上滑梯上，顺着陡峭的坡面滑向深处。这奇异的景象，或许是我对铁路的深刻印象与附近水库闸门的记忆交织而成的幻象。\n\n### 第四站：新安巷-路口\n\n样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）\n\n记忆中的巷子，红砖裸露的墙面斑驳沧桑，道路两侧空空荡荡。如今，鲜亮的油漆覆盖了岁月的痕迹，坚固的铝合金护栏整齐地守护着行人安全。\n\n从金沙路拐进新安巷，没走多远就会遇到第二个路口，上下两条路在此分道扬镳。记得小学时，班主任提出要来家访。想到家里狭小的空间还没来得及收拾，母亲委婉地推辞了。最后，我们在靠近金沙路的路口与老师道别，夕阳将我们的影子拉得很长很长。\n\n<img src=\"/blog/images/old/4.webp\">\n\n我常常独自在那个斜坡上练习拍球。篮球在水泥地上弹跳的节奏，与坡度的起伏形成奇妙的韵律。虽然我对规则一窍不通，但球仿佛懂得我的心思，随着手掌的力道上下翻飞。放学后，每当同学邀约打球，我总是不忍拒绝。\n\n记得有位住在附近的同学，邀我在他家下象棋。他的棋路狂放不羁，全然不顾规则。我耐着性子陪他下了一盘又一盘，直到最后，看着他又一次违规落子，我终于按捺不住，一把掀翻了棋盘，棋子哗啦啦散落一地。\n\n<img src=\"/blog/images/old/4.1.webp\">\n\n最令我难忘的是那个中午。我正走在上学的路上，刚拐进里面的路口，一声惊雷般的巨响在耳边炸开。我猛地回头，看见她倒在血泊中，散乱的头发像一把浸湿的拖把。说来奇怪，这一幕并未在我心里留下阴影——死亡对我而言并不可怕，我甚至走近看了她一眼。理智告诉我该打 120，可父母都不在家，我又因社交恐惧而犹豫不决。在路口徘徊了十几分钟后，我最终还是走向了学校。傍晚回家时，那片血迹已被石灰掩去。母亲后来总绕开那条路走，我却依然如常。\n\n说到有趣的事，莫过于在这个路口玩纸飞机。我会精心折好每一架飞机，用力掷向天空。它们在空中划出优美的弧线，时而盘旋，时而俯冲，能滑翔几秒之久，仿佛在蓝天上描绘着看不见的图案。\n\n### 第五站：人民南路-人行道\n\n样貌变迁：★★ | 记忆保留：★★（约 2005-2010）\n\n<img src=\"/blog/images/old/5.webp\">\n\n在这个熙熙攘攘的路口，摆摊的小贩们早已成为一道熟悉的风景。父亲和我曾也是其中一员，我们支起简易的地摊，卖着家里的旧书和旧报纸。在那些泛黄的纸页间，有一本我特别钟爱的书，里面记载着武当山上的各种神话传说。虽然心头不舍，可最后还是将它摆上摊头——好书如故事，合该在江湖流转，去遇有缘的人。\n\n### 第六站：301 省道-红门铺村入口\n\n样貌变迁：★★★★ | 记忆保留：无（约 2002，2005-?）\n\n这条路最初是石子铺成的，没有沥青和护栏。山路两侧的树木稀稀拉拉，地上满是红沙，不像现在这样被厚厚的落叶覆盖。那时候，路上但凡能当柴火的东西，都会被附近的人家捡回去烧。\n\n<img src=\"/blog/images/old/6.1.webp\">\n\n在我一岁那年，父母和奶奶在这个路口举行了一场隆重的抚养人交接仪式。不过，关于这里的其他记忆，我只在几张老照片中见过，那是父亲用柯达胶卷相机拍的。那部相机不仅记录了他九十年代去深圳打工的情景，还留下了我一岁之前的许多照片。我还翻过一本他收藏的摄影书，如今虽然有了手机，拍的照片反而少了。\n\n### 第七站：红门铺村-老房子 1 号\n\n样貌变迁：★★★★★ | 记忆保留：★（约 2002-2005）\n\n沿着山路往下走，路上满是落叶，踩上去有些滑。路中间有一棵松树，已经在那里默默挺立了几十年。\n\n<img src=\"/blog/images/old/7.1.webp\">\n\n走了不到几分钟，就能看到一间土房子的遗址。如今它早已倒塌，只剩下零星的瓦片散落在地。关于房间的布局，我的记忆已经模糊不清。但奶奶还记得一件事，她说，我曾经从这个崖上摔到了另一户人家的后岩沟里。\n\n<img src=\"/blog/images/old/7.2.webp\">\n\n### 第八站：茅箭区实验学校\n\n样貌变迁：★★ | 记忆保留：★★★（约 2005-2010）\n\n在这所学校及周边的记忆中，除了几张泛黄的奖状和荣誉证书，最让我怀念的莫过于大家聚在一起斗陀螺的场景。每到放学，校外的陀螺摊子旁总是人声鼎沸，五颜六色的陀螺在大盘子上旋转，发出阵阵“嗡嗡”的鸣响，同学们的欢声笑语此起彼伏。我常常站在一旁，羡慕地看着他们激烈地比赛，自己却鲜少参与，只是悄悄地在一旁练习，希望能有一天也能加入他们的行列。\n\n转学那天，天空灰蒙蒙的。班主任站在校门口，脸上露出一丝无奈的微笑，提到有几个成绩优异的学生也转学了，她的话语中透出对这座小城的留恋。我站在校门旁边，心中一片茫然，即将踏上一条未知的路，却不知道该如何启程。\n\n然而，转学的具体原因，以及父亲的工作变动，我是在多年后才逐渐明白的。那些年，父母从未向我解释过缘由。当我终于鼓起勇气询问时，父亲的回答让我一时语塞：“你从来没问过我，说明你是不关心我的。”我点了点头，心中五味杂陈。确实，当时的我未曾主动去了解，仿佛对一切都漠不关心，但内心深处，我其实渴望着被理解和支持。我的父亲又不是造原子弹的，不需要他去隐姓埋名。他只是一个平凡的、内心柔软的普通人。他默默地为家庭奔波，尽力维持我们的生活。如今，我完全理解他的艰辛，但也遗憾当时没能得到他的解释。那时的我，只是一个渴望被关注的孩子，一句简单的说明，或许就能驱散我心中的迷雾，让我在成长的路上多一份理解与从容。\n\n### 第九站：新区小学\n\n样貌变迁：★ | 记忆保留：★★★（2010-2012）\n\n我的童年回忆录在初中时期初具雏形，因此小学那段时光在我的记忆中并非一片灰暗，而是光明与阴霾交织，大约各占一半。\n\n刚转到新学校时，我感到前所未有的不适应，主要源于几个方面。首先是作业的布置方式：以前的学校，作业总是整齐地写在黑板上，一目了然；而新学校的老师习惯口头布置，我还没养成随时记录的习惯，常常漏记。其次是方言环境的冲击：虽然我会说方言，但新学校的课间充斥着方言的喧嚣，与以前学校普遍使用普通话的氛围截然不同。我坐在人群中，听着熟悉又陌生的语调，感觉自己像个局外人。最后是那种挥之不去的陌生感：初来乍到，面对陌生的教室和面孔，我感到深深的孤独。\n\n不过，有几个同学主动和我搭话，这让我逐渐适应了新环境。我还交到了几个好朋友，甚至开始主动找他们一起玩，当然，仅限于放学同路的时候。毕业照上的我也是笑着的。虽然班上的同学并非我都喜欢，但直到上初中后，我依然能默写出他们所有人的名字。这个把全班同学名字默写一遍的习惯，一直被我保留到了高中。\n\n小学时，班主任要求我们每人准备一个摘抄本，用来摘抄一些优美的文字。摘抄是从前往后写，而作文则是从后往前写。那个本子里有一篇作文被涂抹得乱七八糟，那是我情绪崩溃时写下的。那篇作文是关于一次感恩讲座的观后感。主讲人讲得声情并茂，当他说到“和你们的亲人拥抱一下，并说一些话”时，台下的许多同学都哭得稀里哗啦的。然而，我却一滴眼泪都没流，甚至觉得主讲人有些过于做作，有一种非常荒诞的感觉。从那时候起，我就觉得这只是一场形式主义的会议。或许可以说，我是个冷血的人吧。至于我提前通知了父母，但那天他们谁都没来，这件事反而显得不那么重要了。\n\n### 第十站：红门小学\n\n样貌变迁： | 记忆保留：无（约 2002-2005）\n\n“黉门”原指学校的门，后引申为学校的代称。这一地名在民国时期就已存在，或许因为“黉”字较为生僻，后来改成了“洪”。近年来，可能是为了避免与天地会的名称冲突，又将其改为“红”。不过，公交站名至今仍保留了原来的“洪”字。\n\n这所小学曾采用混龄教学，不同年级的学生在同一间教室上课。有趣的是，我在上幼儿园之前就经历了“第一次一年级”——那时奶奶在学校教我认字，遇到不认识的字，她就会向老师请教。如今，这所学校已不再热闹，学生寥寥无几，老师的人数甚至超过了学生。\n\n有一天中午，我没有回家，奶奶来接我时，我的回答是：“因为老师没说让我走，所以我就没走。”这件事似乎说明，我从小就是一个非常守规矩、甚至有些死板的人。\n\n这里有一个关键点：我是在这所学校学会说话的。在此之前，我虽然经历过一次分离，但不确定是否造成了心理创伤。这种不确定性让我思考，我的性格或许并非后天形成，而是通过 DNA 遗传下来的。如果真的可以这样解释，我反而会感到轻松许多。但是心理学告诉我们，人格是在遗传和环境的交互作用下形成的。\n\n### 第十一站：车城南路-加油站旁\n\n样貌变迁：★★★★ | 记忆保留：★★★（约 2005-2010）\n\n当我上幼儿园时，曾独自跑回家，第一次在这条没有护栏的马路上冒险穿行。马路对面，曾经宽阔的台阶如今已被房屋取代，只剩下窄窄的一排。\n\n<img src=\"/blog/images/old/11.1.webp\">\n\n沿着这些台阶向上，是一条充满岁月痕迹的小巷。老式建筑依旧斑驳，仿佛时光在此停驻。巷子深处，蓝色的施工铁皮遮挡了视线。\n\n<img src=\"/blog/images/old/11.2.webp\">\n\n### 第十二站：新安巷-地下室\n\n样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）\n\n<img src=\"/blog/images/old/8.webp\">\n\n### 第十三站：红门铺村-老房子 2 号\n\n样貌变迁：★★★★★ | 记忆保留：★★（约 ?-?）\n\n这片树林曾经是一间砖房，带有一个宽敞的院子，院子里还有一片菜园。爷爷在那里养了许多肉用动物，包括鸡、鸭、鹅、猪和兔子。兔子的窝建得很高，得爬梯子才能上去。我曾用白菜喂过它们，对它们那分瓣的嘴印象特别深。父亲和我还一起养过一群小鸭子，可惜后来大多数都没能活下来，唯一幸存的一只被带到了这里继续养。它长得很大，但某一年过年时，它被煮成了一锅汤。\n\n### 第十四站：柳林路\n\n样貌变迁：★★★★ | 记忆保留：无（约 2001-2002）\n\n### 第十五站：百二河水库-周边\n\n样貌变迁：★★★★★ | 记忆保留：★★★★★（约 2005-2010）\n\n当正路不通时，我便绕道从南边的小路进入水库。岸边原本宽阔的台阶如今被石制护栏取代。沿着水库走几百米，斜坡上曾是我的家，如今已成平地。邻居家的大圆台子和楼房也消失了，取而代之的是一座公园。这些地方曾出现在我童年的回忆录中，如今它们的消失，也标志着我的童年走到了尽头。每一次回望，都是与过去的告别，也是与未来的相遇。\n\n水库好像最近施完工了，等下一次再拍照。\n","slug":"旧事与牢骚","published":1,"updated":"2025-09-26T01:32:05.116Z","__permalink":"that.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnn000e5ws6gkhmb2f0","content":"<h2 id=\"自我概念与解释相关的话题\">自我概念与解释相关的话题</h2>\n<h3 id=\"电子游戏给我们的启示\">电子游戏给我们的启示</h3>\n<p>为什么电子游戏会让人上瘾，我认为其中很重要的一点是分数的积累。带段位的游戏可以从\n0\n分一直打到大师级别，肉鸽类的游戏在一个小阶段里做出的选择和加成效果会延续到之后的所有阶段里。游戏和学习考试的区别是，后者没有一个可以看得见的经验条，考试的目的是满或者过，游戏的目的是加；考试有上限，游戏无上限。如果我们把游戏这一套挪到现实生活里，用经验值衡量有没有做一件事，段位分衡量做这件事的成功或失败的结果，在做一件事情之后，经验分一定会增加，而段位分随着做这件事后的结果而变化，在一个赛季之后会掉一点。那可能对于一些，想做，但是坚持不下去的事情有帮助。目标和规划还是太难了，用月度任务可能更好一点。</p>\n<p>游戏是一种工具，关键是看它用到什么地方。由于它能使人兴奋，所以通常不用到睡觉之前，而是起床闹钟响了之后。</p>\n<p>动作类游戏，对于一个难打的\nBOOS，你的第一步一定是打，被一个招打死之后，记住。然后下一次的时候再尝试如何避开这个招，这种通过多次试错来找出一种固定应对套路的过程，被玩家称作背板。这是在变化中寻找不变。但一些需要临场应变的策略类游戏，如果你提前就定好了一种打法，那么当事情的发展不随你的期望的时候，如果你不变，就大概率会失败。</p>\n<p>游戏还可以培养一个人的团队协作能力和领导能力。如一个 20v20\n的游戏里，在开局之前每一方的士兵会根据以往的战绩投票选出一个指挥官，指挥官相对于普通士兵有额外的全局技能，通过语音实时指挥每一个点的具体打法和应变策略。如果指挥官不得力，可以有人发起弹劾，弹劾通过后发起者成为新的指挥官（事实上，能力强的开麦指挥官是很少见的，听指挥的士兵次之）。还有一个游戏可以和\nAI\n的队友组队，如果你把它不当人看，比如开局就让它帮你捡东西，那么它会直接远离你。</p>\n<h3 id=\"人和人之间为什么会出现误解\">人和人之间为什么会出现误解</h3>\n<p>先讨论一个问题。我们先定义一下：如果一个人做事时不以满足别人的期望为主要动力，那么他做的这件事就能够被称为是 “在为自己活”，反之就是在为别人活。那么，现在有一个过去从来没有听过为自己活的理念的人张三，在他看到李四说 “人要为自己活” 之后，认为李四说的非常对，于是，他开始做一些事情了。现在请问，张三之后做的事情算不算在为自己活？你可能会觉得这个问题的信息是不够的，因为我们不知道张三之后做的事情具体是什么，如果张三认为李四的话隐含了 “我想让你们听我的，你们都要为自己活啊”，且在听了李四的话之后，认同了他的期望，以满足李四的期望为主要动力来做事。那么，他就是在为李四活了。至少在一个短期的时间内是这样的，直到李四的观念被张三内化和修正成自己的观念了。但如果李四的话的意思是：“人要为自己活，但是你听不听我的话都可以”。那么，张三在听了李四的话之后会有……</p>\n<p>从这里可以看到，在理解一句话的时候，我们心里是预设了很多前提的，而对于简单的一句话，说出这句话的人不一定会把他的所有前提都说出来。它的信息量是有限的，而在没有更多上下文的情况下，想要理解一句话，我们必须要根据自己已有的经验来补全这句话里的每一个前提。即使对同一个前提，我们的理解也可能是不同的。这就类似于命题逻辑里的真值指派，我们说的一句话就类似于一个命题公式，这句话里的一些模糊和歧义的词语称为命题变元，而我们通过对这一句话里的每一个的命题变元的理解，一次断句方式的组合，称为对这句话的一次真值指派，或者叫语义赋值。在这次真值指派之后，通常会得到一个确定的结论，这个确定的结论称为我们对这句话的解释。</p>\n<p>有时候，当我们想要反驳对方时，或许是不接受对方的真值指派和自己的不一致，想用自己的真值指派盖过别人的。如果把自己和对方的前提都列出来，会发现对方也可以解释成合理的，自己只是想要提出一种不同的解释角度。比如 “所有吃饱后的痛苦，都是吃饱了撑的” 这句话。如果把它解释为：“过去的吃饱经历把吃饱的阈值给拉高了，使得对于同一个食物摄入量，可以使过去的自己吃饱，而不能使现在的自己吃饱”。即自己过去是吃饱的，而现在没有吃饱。这句话里的两个 “吃饱” 都是一个过去时，“吃饱后的痛苦” 是现在时，“吃饱后的痛苦” 意味着，在吃饱之后又过了一段时间后，变成没有吃饱了。吃饱和痛苦是不能同时存在的，有张音乐专辑叫《每到夜里我就很饿》就是这个意思：有痛苦，说明是现在没 \" 吃饱”。撑有两种意思：撑大和支撑。上面说的是撑大的意思，支撑的解释方式是：“如果想要感受到上层需求没有被满足所带来的痛苦，前提是下层需求在此时一定是被满足了的”。就是你如果现在是饥饿的，当别人训斥你的时候你就不会生气了，因为你的焦点是如何吃饭，而不是如何反驳他。这仍然存在一种比较特别的情况：你在学校里非常饿，点了一个外卖，去拿的时候发现被人偷了，请问这时候你出现的痛苦情绪是不是：吃饱了撑的？但如果你认为，在非常饿的时候点外卖本身就是吃撑了的话。马斯洛需求金字塔里，当上层需求和下层需求没有被满足时，都会出现情绪，只是因人而异，强弱程度不同。越接近下层的，是未满足时的平均痛苦程度更大的，我们失去一个亲人或者好朋友的痛苦不一定比我们没吃一顿饭要轻。痛苦是改变的动力之一，另一个动力是激励，但是我感受激励的能力可能比别人弱。所以我才说，为什么要等到重大变故之后才能改变。</p>\n<p>如果我们仅仅说到这里，就认定对方是错误的，那么这实际上是通过寻找一条路径，用自己的子公式的解释和对方的不一致来反驳对方的整个解释。</p>\n<h3 id=\"一些抬杠\">一些抬杠</h3>\n<p>“世上本无事，庸人自扰之”：世上本无路，庸人自走之；世上本无经，唐僧自取之；世上本无猴，石缝自崩之；世上本无你，_____？</p>\n<p>天下本无事，庸人扰之为烦耳。第澄其源，何忧不简邪？</p>\n<p>“想全是问题，做才是答案”：长考全是问题，臭棋才是答案。</p>\n<p>“吃饱后的一切痛苦，都是吃饱了撑的”：站起来说话的所有人，都是腰不疼的。</p>\n<p>“未经他人苦，莫劝他人善”：未欠他人钱，莫劝他人还。</p>\n<p>“忠言逆耳利于行”：比干逆耳裂于心；屈原逆耳喂鱼行。</p>\n<h3 id=\"为什么文字的性格比口头的活跃\">为什么文字的性格比口头的活跃</h3>\n<p>准备和修改的时间长，单位时间的注意资源占用少：文字有组织语言的时间，它的缓冲区比口头的大，在打字的同时可以看到，还可以根据上下文修改几遍。文字的是想到哪里写到哪里，有想法的时候随时记录，这里的一段话可能是由来自于不同时间的想法拼到一起的。现实的状况是，我一次根本说不了那么多，除非处于一种非常想说，且有说的素材的状态。这里相当于是自己语言能力的极限了。在说话的过程中，你还额外需要去控制自己的语气和音量，额外给你之前说过的话做一个短时记忆，这相对于打字都会占用更多的资源。</p>\n<p>AI 直接改写与带动的作用：你可以用 AI\n修改你的文字，使你的文字更加流畅。在 AI\n的流畅语境下，可能会带动你自己的文风。这种情况就像，在一个大家都有负面情绪的环境下，比如葬礼上放哀乐，会带动你的情绪与他们一致。用一个更恰当的类比是，AI\n就是一本书，看 AIGC 和读书是差不多的，是一个学习写字的过程。</p>\n<p>但 AI\n生成也是有弊端的：当你给出不合适的提示词的时候，它会曲解你的原意，给你添油加醋。这可能会造成别人的误解，因为你原本的情绪和\nAI 生成的是不一致的。很多纠结的时候就是出自这种情况：觉得 AI\n写的文字太油滑了，但是比自己写得好。用 AI\n直接修改过的文字在站点的所有地方都被标注了。剩余的内容都是没有经过 AI\n直接改写的。AI\n的正面作用是，它（有时）可以帮我们厘清不明确甚至错误的概念，这时我们称此为间接修改。方式是，把写的话发给\nAI，后面再问一句准确吗。我们如何发现 AI\n的局限性：找一本书里列举的事实，问 AI 有没有这件事。</p>\n<p>不懂装懂的情况：在和真人交流的过程中，自己对不明白的概念是不会详细地讲的。而在文字的环境下，在对某一个词语并不了解的时候，会出现假装自己懂的情况。这有时会造成用词不当或者明显的错误，比如我在前几个月才发现，以前的离散数学笔记里有一个明显的常识性的错误，公式都错了。这就和\nAI\n的幻觉差不多，因为我和它都是通过以前阅读过的文字按概率生成的。为什么会出现这种情况，因为在这些笔记里没有举具体的例子，只是把别人抽象的话复述一遍，先假装自己明白了再说。这是一种故意把信息熵增大的行为，形成了一种 “我明白了，但是你还没明白” 的假象，就是我比你懂得多，你还不懂，我要找一个地方超过你。这是一种不自信的表现，因为你不如我的背后其实是我不如你，我在某些地方是不如你的，所以我才需要找另外的地方去超过你。</p>\n<p>目的上的：因为这里是主场，在出于一种追求节目效果的情况下，可能会故意地夸大一些事实。节目效果的意思是：故意地给别人留下某种印象，不管是好的还是坏的，且留下好的和坏的印象都有好处。</p>\n<h3 id=\"为什么有些内容不愿意删\">为什么有些内容不愿意删</h3>\n<p>有一方面还是因为舍不得的，认为有比没有好。</p>\n<ol type=\"1\">\n<li>做反面教材也是有用的。现在展示自己身上不好的地方，是为了让别人未来不要变成自己这样。</li>\n<li>追求一种同频共振。作一面镜子，让对方看到，现在的我和以前的对方身上是有相似之处的，在某种程度上感化对方。展示自己弱小的一面，以求别人宽容，把自己现在身上的责任减轻一点。造成一个投射性认同的节目效果，疾病继发性获益。</li>\n</ol>\n<p>因为我意识到了第二点，所以老是感觉不安心，感觉把自己不好的事情说出来是不对的。但是从第一点来说，我还是不想删除这些内容的。这是一个非常矛盾的地方，感觉必须有人激我一下，或者自己的生活出现重大变故，比如有人根据我发出来的东西排挤我之后我才会改变，否则我是不会删除的。事实上，第一点可以说成是对第二点的掩盖，因为第一点的预想结果其实是，让别人吸取经验教训，然后让他们不要这样，以及让他们对自己的孩子不要这样，这又隐含了一个把责任推到父母身上的问题。</p>\n<p><img src=\"/blog/images/100mdjht.webp\"></p>\n<p>事实上，如果真的有人在看到这里之后有意地排挤我，说明他居然真的把我当回事了，能抽出自己宝贵的时间看一个人发的牢骚。虽然点进来的不一定是完全关心我的人，但不关心我的人一定不会点进来。所以不管怎么说，我的愿望都完成了。</p>\n<h3 id=\"为什么说自己是伪善的\">为什么说自己是伪善的</h3>\n<p>这可能是因为我对善的偏见。我对善的理解是，在任何场合下说的都是真心话，而为了让对方开心说的场面话和客气话都是违心的，因为你的最终目的是先让对方开心，再让对方给你回报，或者说是，你想从对方身上获取回报。我认为从对方身上获取回报是不对的，其实我很小的时候就能感觉到，有时候一个人说的话，纯粹是想让对方开心，而不一定是自己的真心话。至于为什么不对，我现在还没明白，可能就是看《水浒传》看的。</p>\n<p>由于你无法保证你在任何情况下说的都是真心话，所以自洽的方式就是说自己是伪善的。就像郑智化《水手》那首歌里唱的，“说着言不由衷的话，戴着伪善的面具”，当然它还有一句词，叫 “擦干泪，不要问为什么”。</p>\n<h3 id=\"未完成事件\">未完成事件</h3>\n<p>荣格有一个个案：老妪的右手会间歇性地做出一个奇怪的向下压的动作，当他询问老妪，这是否在纪念你逝世的丈夫，在模仿他修鞋的动作后，这个持续多年的动作竟从此消失了。</p>\n<p>最近突然想到一个之前从来没有提到过的事件，可以用来解释维持我现在别扭性格的部分原因：在\n2014\n年之前，郧县还不是十堰市的一个区，它们的经济发展水平和教育资源是相差较大的。所以在新区小学，有个同学在知道我从十堰转学过来之后，露出了一脸惊讶的表情，并说了 “羡慕我” 的话。但我当时的情绪首先是优越感，其次是优越感带来的负罪感。因为我感到和其他人都不一样，这是一种恐高症。这可以从一种方面解释，为什么我不愿意对别人说 “好话”。因为我可能在害怕别人和我出现一样的惭愧的情绪。</p>\n<p>关于搬家的事情，我最近又做了一个无恐惧感的噩梦，后来发现它是有一种含义的：在一间没有刷漆的房子内部有两个房间，房间的连接处是一个门，但它没有具体的门，只有一个框或者洞，就像没有装修的房子那样，只有水泥墙。在离门不远的天花板上面垂下来一个左右摆动的钟摆，在钟摆的末端有一个圆孔，如果把头伸进去，圆孔刚好可以容纳，且头会随着钟摆的摆动而撞在门框上。仓库的原型是我在十堰一个人玩时进过的一个，里面确实没刷漆，但它只有通往外界的一个门框，只有一个房间。如果把两个房间解读成搬家前后的内部世界的话，那么这说明我已经倾向于把它们连接到一起看。但最后我只是看着那个钟摆，而没有把头伸进去。</p>\n<h3 id=\"吃饱了撑的\">吃饱了撑的</h3>\n<p>现在的空腹体重比去年同期下降了两公斤，现在是 56\n公斤。上一代人可能都有类似的经历：在感到非常饿的时候可以撑一段时间不吃饭，消耗自身的肝糖原和脂肪来提升血糖水平后，会有一点饱的感觉。但这种感觉撑不了很长的时间，最终还是要靠吃饭来撑。在控制食量上，长期饿过的人，比如在地震时被困过的人，他在脱离困境后吃的第一顿饭，可能比没有类似经历的人更容易吃撑。</p>\n<h3 id=\"可能收到的批评类型目前共-15-种\">可能收到的批评类型：目前共 15\n种</h3>\n<p>在网上看到一句带有评判性质的话，有时习惯性地会代入自己，如果说中了类似的点，自己会难受好一阵子。这或许是一种巴纳姆效应，巴纳姆是\n18\n世纪美国的马戏团艺人，他说自己的节目之所以受欢迎，是因为包含了所有人都喜欢的成分。不喜欢的成分也是类似的，每个人都可能有一些相似的，不愿意被别人指责的地方。但有时候，自己还是想收到别人的批评，因为别人可能指出自己没意识到的问题。这里整理了可能收到的批评类型，但这些并不一定是自己都认同的。</p>\n<ol type=\"1\">\n<li>全能：没人在意你 / 你把自己想得太重要了 / 自以为是 / 自作多情 / 自命不凡 / 你的观众没你想的那么多</li>\n<li>局限：夏虫不可语冰 / 朝菌不知晦朔 / 坐井观天 / 管中窥豹 / 一叶障目 / 盲人摸象 / 夜郎自大 / 以蠡测海 / 思而不学则殆 / 以后当你看到你以前写的东西，就会\nxxx / 一瓶子不满，半瓶子晃荡 / 无知者无畏 / 达克效应</li>\n<li>执行力 / 复现 / 拖延：知之非艰，行之唯艰 / 一屋不扫 / 五谷不分 / 爱幻想 / 心比天高 / 纸上谈兵 / 闭门造车 / 尽信书，则不如无书 / 看起来知道自己的问题，但是改得很慢 / 语言的巨人，行动的矮子 / 想不切实际的东西没用 / 你的未来怎么办</li>\n<li>盲目试水：做事之前没有规划，不穿鞋就过河 / 愣头青 / 眉毛胡子一把抓 / 凡事预则立，不预则废</li>\n<li>稳定 / 可靠：你的行为是不可预测的 / 不守信</li>\n<li>完美主义：对自己和他人的要求高 / 捡了芝麻，丢了西瓜 / 人至察则无徒 / 吹毛求疵 / 求全责备</li>\n<li>刻舟求剑：过去的事情放不下去，不会向前看 / 守株待兔 / 郑人买履</li>\n<li>不会表达自己的情绪 / 感情，而是情绪化地表达</li>\n<li>过度分化：相处时的主观感受不好，太注重自己，没有替对方着想 / 自私 / 不愿意问对方是怎么想的 / 共情能力不强 / 站着说话不腰疼 / 喜欢过度揣摩他人的想法 / 以小人之心度君子之腹</li>\n<li>过度融合：指导欲太强了，喜欢干涉对方的选择，让对方按自己想的做 / 越俎代庖 / 揠苗助长 / 投射性认同</li>\n<li>庸人自扰 / 内归因：你想得太多了 / 喜欢抬杠 / 钻牛角尖 / 太老实 / 固执 / 较真 / 玻璃心 / 敏感 / 自卑导致自负 / 越缺什么，越在意什么 / 疑心生暗鬼 / 杯弓蛇影 / 风声鹤唳 / 草木皆兵 / 矫情 / 把自己看得太低下了 / 妄自菲薄</li>\n<li>外归因：发牢骚，抱怨别人是不对的，给别人以及第三者留下的印象不好 / 怨天尤人 / 祥林嫂</li>\n<li>确实有一件事情做的不合适，有更合适的解决方法</li>\n<li>隐喻性的，可以激励自己反思的非直接的批评</li>\n<li><a href=\"#为什么说自己是伪善的\">自我批评是虚伪的</a> / 不真诚的 / 只是为了 “彰显道德高度”/ 这反而看起来你对道理一点都不懂 / 有隙则明示之，令其谗不得入 / 用自我批评获取心理安慰，反而逃避改变</li>\n</ol>\n<p>关于随便看到一句批评的话就认为是说自己属于防御机制过强还是过弱：防御的定义是把负面情绪的组成部分从意识觉察中排除出去。如果我先认定它在说我，就能提前准备反击、解释、承受伤害，这样就不会被突如其来的批评击垮，是一种预支现在的焦虑以避免未来更大痛苦的策略（贝勃定律）。所以从未来的角度看是强，从当下的角度看是无效。</p>\n<p>我给自己的评价就是：我是一个无知的人，什么都不懂。这样当别人再说你无知的时候，你就不会生气了，因为生气了就说明，你认为自己不是无知的。你把 “别人不了解你” 所带来的愤怒转化成了 “我早就知道你会这么说” 了。</p>\n<blockquote>\n<p>（AIGC）\n行为背后的动机是恐惧，而非自信：这种行为模式的深层动机通常是：“如果我表现出真正的自己（可能的不完美），别人就不会喜欢我、重视我。所以我必须先发制人，通过自我贬低来控制别人的反应，确保我能获得我需要的认可。” 这种动机源于对被忽视、被否定、不被重视的深刻恐惧。而恐惧是低自尊的典型驱动力。真正高自尊的人不会活在这种恐惧中，因此也不需要费尽心机去操控别人的看法。<br>\n这是一种心理防御策略：通过主动贬低自己，他实现了两个防御目的：<br></p>\n<ul>\n<li>降低预期：把自己的位置放得很低，这样任何小小的成功都会被视为 “超常发挥”，任何失败都 “理所应当”。这避免了失败时自尊心遭受毁灭性打击。<br></li>\n<li>规避风险：抢先说出自己的缺点，就抢走了别人批评他的机会，从而避免了来自他人的、最令人恐惧的否定。</li>\n</ul>\n</blockquote>\n<h3 id=\"什么叫正确\">什么叫正确</h3>\n<p>对于我以前为什么发一些东西，我可以说出来背后的原因是什么，但我<a href=\"#为什么文字的性格比口头的活跃\">不认为</a>自己说出的所有话都是正确的。正确是一种在特定视角下的判断。</p>\n<ul>\n<li>场域：在什么情况下是正确的，而在情况之外不一定正确。比如在伊斯兰教的语境下，猪不能被人吃是正确的；在十六进制下，8+8=10\n是正确的</li>\n<li>本体：正确指向什么\n<ul>\n<li>符合客观现实，既定事实。如现在是白天，如果同一个地方的人有人说是白天，有人说是晚上，那么就乱套了</li>\n<li>符合客观规律，得到大量证据支持。如天上有大片乌云，就有可能下雨</li>\n</ul></li>\n<li>认识：如何判断正确，被解释为正确的\n<ul>\n<li>通过自己已有的认知图式。如一个自己以前持有的观念，在后续可能会消失</li>\n<li>通过群体共识，如一本书出版之前需要经过审核</li>\n</ul></li>\n<li>目的：正确有什么用\n<ul>\n<li>可以用于解决某一个特定问题的</li>\n<li>可以满足人需求的，消除负面情绪的。\n<ul>\n<li>（生理的需要）如每天要吃饭</li>\n<li>（安全的需要）稳定的，可以预测的。如在多数地区，黑夜和一年四季都总是会有规律地出现的</li>\n<li>（归属与爱的需要）在群体里拥有地位，符合已有规则（共识）\n<ul>\n<li>法律法规：公平的底线。违法的人会被惩罚</li>\n<li>伦理道德：理想的高线</li>\n<li>推理形式上的共识。非胡言乱语</li>\n</ul></li>\n<li>（尊重的需要）自尊和被别人尊重\n<ul>\n<li>符合自己从以往经历里总结出来的经验（出于自我价值肯定，或者不希望看到没有经验的人重蹈覆辙）</li>\n<li>没有说出的话，和说话人身份之间，或者在特定情景下的冲突</li>\n</ul></li>\n</ul></li>\n<li>可以激发负面情绪的，如批评。批评既激发了被批评者的羞耻感，又满足了被批评者的需要（如果是需要的话），一般是先有负面情绪，后有正面情绪</li>\n</ul></li>\n</ul>\n<h3 id=\"我的优点\">我的优点</h3>\n<ul>\n<li>节俭。<a href=\"#为什么有些内容不愿意删\">小学时期没用完的草稿本到现在还在</a>。恩格尔系数高。</li>\n</ul>\n<h3 id=\"如何看待负面情绪\">如何看待负面情绪</h3>\n<p>负面情绪能让自己切切实实地感受到，自己是存在的，活着是有意义的。</p>\n<p><img src=\"/blog/images/-emo.webp\"></p>\n<h3 id=\"自身存在的沟通问题\">自身存在的沟通问题</h3>\n<p>有时候觉得，在和对方沟通时，自己没有把自己和对方放在同一个地位上。有时候会故意示弱，还有的时候，对方很热情，但是自己很冷漠。这是因为历史遗留的问题，当自己收到对方的鼓励或者赞美的时候，自己会非常感动，无言以对，无可报答的感觉。这种感觉非常强烈，所以自己在某种层面上，为了避免收到鼓励，会有意或者无意地闹事，比如对对方忽冷忽热，刚热完就冷了。因为我还不太适应这种热的感觉。</p>\n<p>表意不清，推责的情况：有时候，我想对对方提出一个需求，但是感觉这个需求是不太合适的，所以我会用一种奇怪的方式表达出来。有一种逼迫对方必须问下去，或者照着来的感觉，其实是想让对方代自己做出这个不合适的选择。这个问题已经存在几年了。</p>\n<h3 id=\"内向者的围城部分-ai-改写\">内向者的围城【部分 AI 改写】</h3>\n<p>\"围城\" 这一概念意味着外界的人渴望进入却难以如愿，而身处其中的人又渴望逃离却难以抽身。然而，这并非一个恒定不变的状态 —— 并非所有的人都向往着进入这座城，也不是所有人都急于逃离。实际上，只有在你对这个题目产生兴趣，想要进一步了解它，但在真正开始阅读之前那短暂的一瞬间，“围城” 才真正存在。一旦你继续阅读下去，这座围城便不攻自破。</p>\n<p>张三（化名），是我高中的同窗好友，我们俩是班上仅有的两位在语文考试中不写作文的学生。一天晚上，他突然从教学楼跃下，让所有人震惊不已。毕竟，没有人曾对他做过任何恶意的事情。幸运的是，他安然无恙，并且至今仍与我保持着联系。在彼此的交流中，我们发现了一些或许在外人看来难以理解的事情。通过相互的理解和支持，我们更加能够体谅对方。于是，我们决定一起分享这些事情背后的故事，希望能帮助更多的人理解这种独特的心理状态。这段经历让我们意识到，每个人内心都有一座自己的 “围城”，而真正的解放在于找到能够理解和接纳自己的人。</p>\n<p>张三的故事是一段独特而又复杂的内心旅程，他是那种即使在黑夜中也能勇敢前行的内向者。不过，张三的勇气并不体现在通常意义上，而是以一种更为微妙的方式呈现出来：小时候，当一位老师表扬张三时，他反而羞愧难当，脸红到耳根，仿佛老师的赞赏是对他的某种惩罚；过年时，张三收到亲戚的红包，心中默默致谢，却未曾开口表达，在他看来，这些钱并非自己应得，因为他并未为这份礼物做出什么贡献；每次心理治疗结束后离开诊所时，张三总是侧身而出，这种方式成为了他特有的告别方式，治疗师后来解释说，这是他表达感谢和再见的独特方法；在学校里，张三几乎不主动与人交谈，他总是默默地坐在自己的位置上，除了偶尔去卫生间，几乎从不离开座位；即使内心充满了不安，张三也从未将 “我不说话是因为我害怕你们” 这句话说出口。</p>\n<p>张三总结了导致他那次冲动行为的根本和直接原因：</p>\n<ul>\n<li><strong>根本原因之一</strong>：对人际交往的恐惧。尽管他渴望与人沟通，却害怕每一个人。那次行为，某种程度上是他希望引起他人关注的一种象征性表达。</li>\n<li><strong>直接原因之一</strong>：感到无助。在自杀前半小时，他的情绪经历了从焦虑抑郁到极度冷静再到轻微兴奋的变化。在最初的阶段，他渴望与人倾诉，却又不敢开口，这种矛盾的情绪让他倍感煎熬。</li>\n<li><strong>根本原因之二</strong>：对世界的怀疑。高中时期，由于缺乏哲学教育，张三开始阅读一些网络文章，比如光子延迟选择实验、缸中之脑等，这些内容让他对现实产生了深深的疑惑。</li>\n<li><strong>直接原因之二</strong>：对死亡的好奇。他想知道死亡之后的世界会是怎样的（验证唯我论是否正确，死后精神是否仍然存在），甚至期望通过这种方式实现精神上的自由，即摆脱所有的恐惧和束缚。</li>\n</ul>\n<p>缸中之脑指的是，如果你的脑子被取出来了，放在一个缸里，通过仪器模拟出了外界的各种刺激信号，且你的意识仍然存在并能对此做出反应，那么你该如何知道你实际在不在这个缸里？我们之所以畏惧这个问题，是因为它有一点阴谋论的味道。这个话题的一种终结方式是，我们本来就是缸中之脑，这个 “缸” 就是我们除了脑子之外的肉体的部分。</p>\n<h3 id=\"死亡相关的话题\">死亡相关的话题</h3>\n<p>我认为死亡目前并不是一个沉重的话题。虽然它迟早会发生的，但只有发生了，才知道有多沉重。</p>\n<p>我在以前冷血的时候，曾有过一种这样的想法：当我看到别人劝一个人不要自杀的时候，我会和自杀者共情，而讨厌劝的一方。因为自杀是人家自己做出的选择，你压根不知道他之前经历了什么事情，为什么要用一句话就把人家打发了。另外，不是说自杀是不能谈的：</p>\n<blockquote>\n<p>误解一：讲述自杀是个坏主意，鼓励可以化解自杀。<br>\n事实：在人们眼里，自杀，是一件耻辱的事情，因此大多数有自杀意图的人都不知道该和谁说话。与鼓励自杀行为不同，公开讲述这些想法，可以给当事人带来其他的选择，或者有时间重新考虑自己的决定，从而防止自杀。<br>\n——<a href=\"https://www.psychspace.com/psych/viewnews-15939\">《自杀的 5\n个误解》</a></p>\n</blockquote>\n<p>要谈就谈详细一点。这里提出一个问题：自杀的人究竟是在逃避自己对生活的责任，还是因为责任感太大了，所以感觉自己根本担负不起呢。我认为两者是可以同时成立的，当我们在焦虑一件事情的时候，比如备考的时候，是在害怕考差了。如果没有责任感的话，根本就不会焦虑，考\n0\n分和我又有什么关系呢。詹姆士认为，自尊 = 成功 / 抱负，如果抱负太大了，自尊会低。</p>\n<p>当然，还存在着一种情况，就是在事中全去逃避了，事后才去反思。</p>\n<p>之前在知乎上看到一个挺有意思的动画，讲的一个人在死亡之后，会转生到同一个世界线的其他时间线上，记忆清除后变成另一个人。换句话说，我们在当前世界线上遇到的所有人都可能是同一个人。这种世界观可能会增强我们活下去的信念，因为所有相遇都是与同一个灵魂的重逢。</p>\n<h3 id=\"说话卡壳的原因部分-ai-改写\">说话卡壳的原因【部分 AI 改写】</h3>\n<p>说话卡壳的直接原因往往在于大脑尚未完成从思考到表达的转换过程，左半球额下回靠近外侧裂的布洛卡中枢没有被充分地利用。对于内向者来说，他们常常会在心中与自己对话，这就是所谓的 “想的模式”。在这种模式下，当他们思考完毕时，内心就会有一种任务完成的感觉，进而让大脑进入休息状态。而在 “说的模式” 下，当一个人真正说出话语时，才会感受到任务的完成，随之而来的是大脑的放松。想象这样一个场景：当我准备用声音来表达某个想法时，却不自觉地进入了 “想的模式”，结果是没有发出声音，但大脑误以为话已说完，从而停止了工作。有时候在口头聊天说话的时候，回一句话会回两次，因为不确定第一次是否属于在想的模式下的。</p>\n<p>在打字时，我们通常处于 “想的模式”，有时候我们也会小声念出文字，但这时声带并不会震动，我们只是用气息在模拟说话。如果尝试直接按照稿子朗读，则需要经过一番练习。例如，我曾尝试<a href=\"https://www.bilibili.com/video/BV1ef421z7y6\">录制一段音频</a>，结果发现同一句台词需要反复录好几次才能满意。这是因为过去我很少说话，所以现在说一会儿就会感到疲惫。通过这个经历，我意识到，要想流畅地表达自己，就需要不断地练习，让大脑和身体适应从思考到发声的转换过程。</p>\n<p>说话卡壳的根本原因是语料库和对话经验不够。</p>\n<p>说话声音小的直接原因是过去在一个大的空间距离下经历的有效对话频次少。</p>\n<h3 id=\"症状自述悖论部分-ai-改写\">症状自述悖论【部分 AI 改写】</h3>\n<p>当症状浮现时，我发现自己无法用言语准确地表达内心的感受；可一旦试图用语言捕捉这份体验，开始组织言辞之际，那份难以言喻的症状便悄然消逝；为了能够用文字记录下这份感受，我不得不放弃某些细节上的精确性，转而寻求一种大致贴切的描述方式。若要用数学中的图像来比喻这一过程：语言的描述就像是函数的微分，而症状本身则是魏尔斯特拉斯函数 —— 它处处连续，但却处处不可微。</p>\n<p><span class=\"math display\">\\[\nW(x) = \\sum\\limits_{n=0}^{\\infty}a^{n}\\cos(b^n \\pi x) \\quad a=0.5,b=13\n\\]</span></p>\n<p><img src=\"/blog/images/weierstrassa=0.5b=13.webp\"></p>\n<p>而最终描述出的症状，就像是函数 <span class=\"math inline\">\\(2\\cos(\\pi\nx)\\)</span>，虽然在宏观上与原本的症状相似，但细节之处却大相径庭。</p>\n<p><img src=\"/blog/images/2cospix.webp\"></p>\n<p>如果用<a href=\"https://dra-m.com/borromean-knot/\">博洛米结</a>（Borromean\nKnots）来观察这个问题：症状是处于实在界的，而语言则是属于象征界的。这两者之间，存在着难以逾越的鸿沟。</p>\n<h3 id=\"心理疾病的病名何时为结果何时为原因部分-ai-改写\">心理疾病的病名：何时为结果，何时为原因【部分\nAI 改写】</h3>\n<p>心理疾病就好比，你在一条狭窄的小路上遇到了一条看起来凶猛的蛇。这条蛇虽然是无毒的，但你心里没底，毕竟你之前已经被蛇咬过好几次了。现在要过这条路，心里七上八下的。吃药就好比，你戴上了一副高度近视眼镜，蛇的存在感瞬间减弱，你看不清它了，但走不走这条路还是得靠你自己拿主意。</p>\n<p>“他这人表现成这样，是因为他有抑郁症。” 这种说法有点像：“他这人一看到长条状的东西就发抖，是因为他有井绳病”；或者：“这个老烟枪一天咳到晚，是因为他得了肺炎”。心理疾病的病名更像是给症状贴了个标签，但并没有解释症状形成的原因。它们的信息量其实很大，是当事人经历过去事件后形成的创伤，以及现在表现出来的一系列异常的心理和行为，外显出来的综合性结果的缩写。但是从评价者的角度来说，这是一种对他人没有进行充分了解、信息量不够多的情况下，把病名作为一个信息熵大的名词，试图去合理化当事人现今表现出来的所有异常行为，来满足自己的安全需要。</p>\n<h2 id=\"黑历史与以往经历相关的话题\">黑历史与以往经历相关的话题</h2>\n<h3 id=\"散点移动平均和累积平均\">散点、移动平均和累积平均</h3>\n<p>散点图揭示了每一天的具体数据，它的优点和缺点都是太详细了。</p>\n<p>7 周期的移动平均至少要有 7 个数据，第 n\n天（n&gt;=7）在图表上展示的数据是第 n-6 天到第 n\n天的平均值。它的特点是受区间内的极端数据影响，而不受区间外的极端数据影响，揭示的是短期的趋势。</p>\n<p>第 n 天的累积平均是从第一天到第 n\n天的平均值。它的特点是，如果当天的实际数据大于前一天求的平均值，折线就会上升，反之会下降。它受所有历史数据的影响。</p>\n<p><img src=\"/blog/images/life.webp\"></p>\n<h3 id=\"做梦梦到旋律\">做梦梦到旋律</h3>\n<p>梦里梦到九个音符，醒来后通过网易云哼歌识曲，匹配到了<a href=\"https://music.163.com/#/song?id=1463130183\">《FIRE BIRD》</a>1 分\n06 秒的前十个音，它是动画《BanG\nDream!》里的一首曲子。我没看过这个动画，但和它前六个音的绝对音高和时值是完全撞上的，后半句有两个音是音高一样的，但是顺序不一样，最后一个音音高一样，这一句的总时值一样，而且这一句是在整首歌里重复出现的一句。如何解释这个现象呢，要么是以前在什么途径下间接的听过这首歌，造成有内隐记忆，做梦的时候内隐记忆从潜意识里被提取出来，但部分不一致，或者在以往编码的时候就不一致。或者以前没听过这首歌，没有关于它的记忆，但是有听过其他曲库的记忆，在对以往记忆进行创造性整合的过程中巧合地造成与现实一致，就像凯库勒做梦梦见苯分子的结构是环，是因为他有衔尾蛇的记忆，加上他一直在研究苯。再加上音符的排列顺序是有限的，撞几个音很正常，一些被误解为抄袭的音乐也是这样的，何况我只撞了六个。后来想起来是来自<a href=\"https://music.163.com/#/song?id=2003595837\">《Heaven’s falling\ndown》</a>的第一句。再后来，发现自己确实是在一个途径下间接地听过这首歌。</p>\n<p>之前很少出现过做梦梦到旋律的情况，有个位数的次数，大部分没有撑到记住然后醒来。</p>\n<p>后续又梦到了一次不一样的：</p>\n<blockquote>\n<p>31356 6653223<br> 31356 673737i<br> 31356 6653232376<br> 712\n143771 (7 底下加点)</p>\n</blockquote>\n<p>但没有匹配到特别像的，后来想起来可能是来自以前听过的一首歌（<a href=\"https://music.163.com/#/song?id=1936043266\">《词不达意》</a>1:20\n到 2:06）</p>\n<h3 id=\"抽奖-累积话费-3g-违约-京译精选的套路方式\">抽奖 - 累积话费 - 3G\n违约 - 京译精选的套路方式</h3>\n<p>起因：</p>\n<p>出青年路地铁口，同济医学院附近，被两个人要求用微信扫码，说是点个赞，抽奖，中了一个三等奖，平板的名额。被其中一个人带去万松园横路人行天桥下的 “网点”。里面有一个被称为主管的男子，他说天下没有免费的午餐，要求我签合约。当时没有拍照，类似是这样的（图源抖音）。</p>\n<p><img src=\"/blog/images/what.webp\"></p>\n<p>合约有三种可以选择的方式。第一种方式是计算手机号累积的话费，一直累积到\n4800 元，不限时间，但是必须保证手机在 4G 和 5G 网的范围内，在 2G 和 3G\n网的范围内会有违约金。他说这个目的是为了保证用户一直不转网，如果换号了还是在本运营商里就可以，还给我看了一个其他用户出现违约金的截图。该合约需要话费账单累积到\n4800 元才能结束，不限时间，在结束之前一直有限制 4/5G\n网络的违约金限制，如果违约会有短信通知。</p>\n<p>我因为担心会有违约金，所以选择第三种方式。第三种方式是用一个平台，用上面的购物币买那个平台上的东西。中途他引导我下载一些其他能贷款的平台，如美团、京东、安逸花，试图从上面贷款。</p>\n<p>最后在美团平台上借款 1000 元（这 1000\n元先到了我的银行卡，后通过支付宝转入对方账户，我在美团平台上需要还款），用花呗给对方付款\n2000 元。这 3000\n元最后到了一个叫 “京译精选” 的平台上，合约的内容是必须在那个平台上用这\n3000 购物币消费，用一个不到一千元的平板做交换。</p>\n<p>相当于我贷款 3000 换了一个不到 1000 的平板，加上可能为真的 3000\n购物币。</p>\n<p>我还不确定这件事情能不能被定性为骗局：</p>\n<p>矛盾：</p>\n<ol type=\"1\">\n<li>我本来准备去献血的，结果摊上这个事情。我还以为上次献血换来的 “运气” 到了，那两个人看到中奖也惊讶了一下</li>\n<li>那个抽奖页面的域名好像不是运营商官方的，域名中含有 a 和横杠，以 org\n结尾，但忘记具体是什么了</li>\n<li>那两个人本来是让我自己去营业厅兑换的，后来是其中一个人领我去营业厅</li>\n<li>《京译精选》APP 内显示的备案号是：粤 ICP 备 2021067300\n号 - 4A，查了一下是真的</li>\n<li>不知道合约有没有效力，虽然对方在线下是有实体店的，但是实体店的招牌上，包括合约上都没有任何一个运营商的商标。他没有给我留一份合约，我也没有要</li>\n<li>收款方是武汉市江汉区金鑫通讯设备经营部（个体工商户），在用支付宝付款的时候看见手机出现一个弹窗 “正在安装证书”。这里的证书是指支付宝的安全证书，在安全中心小程序 -&gt; 更多服务 -&gt; 数字证书可以查看：根据监管部门的要求，安装数字证书可提升余额支付单日额度，可能是一个反诈的东西。他直接用的是我的付款码，加上对方中途老是抢手机，太急躁了，聊天也聊得过于多了。</li>\n<li>按我的性格，对方是主动的，一直有人在和我聊天分散注意力，且店里还放着音乐，我是被动的。签合约的时候，在那个环境下，我中途也想走的，说能不能取消，在此之前已经按了一个手印了。他说是成年人了，签了就不能取消，一直问我有没有听懂，我回答的都是听懂了。我中途有几分钟是卡壳没有说话的，他说他工作这么多年，从来没见过这样的人，和他的一个老表一样内向，但是那个老表起码能够正常地和人交流。我当时只想逃离那个环境，结束这件事，但是怕有直接走了会什么不合适的地方（因为我之前已经按手印了，加上他一直在催我说话），所以最后我还是让对方用手机操作了。中途还有美团的\n950133\n风控打电话了，但是那时候手机在他手上，他回复对方并问我：没有看过刷单的视频，什么都没有。</li>\n</ol>\n<p>证据有短信和 APP\n里的借款记录，我给那个男子发身份证照片的微信聊天记录（因为贷款需要实名，由于我手机的原因上传不了照片，所以他帮我拍照），平板，和两个用支付宝转账的记录，京译精选的\nAPP。我当时很紧张，压根没想到给合约拍照。他还拍了一张让我真人拿着的、按过手印的合约照片，但是那个合约原本是我选择第一种方式的，后来他把第一种方式的合约撕了，说这已经没什么用了，保留了一张我选择第三种方式的合约。</p>\n<p>结果：</p>\n<p>我从一开始就注意到了事情的所有细节。就像上一次确凿受骗一样，上次是被骗了\n200 现金当路费，用一个手表交换，对方报的手机号是\n13x55667788，这正常人都会怀疑的，但是出于一种助人的情节我还是相信他的。这次没有走，首先是自己贪图小利，其次是对方说的一句话：“你已经是成年人了，合约签了就不能取消”。</p>\n<p>在百度贴吧上搜到了一个<a href=\"https://tieba.baidu.com/p/8997885141\">一模一样的案例</a>。我把帖子截图发给对方，并要求退款，次日上午到店退款并还款成功，并签了退款协议，一式两份。这相当于我这辈子干的第一件硬气的事。</p>\n<h3 id=\"旧事\">旧事</h3>\n<p>最痛苦的一段时间，就是刚复学住寝室的时候，每天过得心如刀割。因为我不敢和他们说话，所以白天能避开就避开，但是别的人多的地方我也不敢去，所以就在学校的一片树林里的一个凳子上坐着，晚上插着耳机听《秦皇岛》，基本都听吐了，还是不行。他们晚上在打游戏，我也不好意思给他们提意见，住了至少有一两个学期，基本一句话都没有说，所以最后才搬到校外了。更痛苦的是开学的时候，因为我没有寝室钥匙。高中有一天中午还被锁在寝室里了。我的昨天永远都是黑历史。乐观一点的说法就是一直在进步。</p>\n<p>有时候我会出现全身刺痛的情况，猜测的原因有两点，太久没有运动，没有出汗了（即使在前天晚上洗了澡也会出现这种情况）+ 惭愧。最强烈的一次就是休学的那次，当辅导员提起 “黄若凡在网上\nxxx 的时候”，我那时候是全身发痒和发痛的，表现得确实不像正常人。休学是\n2021 年上半年，但是我直到 2023\n年下半年才变得愿意说话，那时候父亲来看我，我还把他弄哭了，因为他觉得自己太委屈了，怎么有这样的儿子。有时候，我在看自己以前写的东西的时候，也会出现这种情况。说不定当有人在我面前提起这个站点的时候，可能也会出现。所以这是一件非常矛盾的事情，既想有存在感，又害怕有存在感。</p>\n<p>初中时期的执念：我觉得有必要把这些事重新提一遍。因为我第一次写童年回忆录就是在初中写的，回忆了搬家之前的经历。那说明我初中时期是有委屈的，但是这个委屈一直都没有表达出来，在这之前是写过一次的，后来又被我删了。现在我觉得没必要删了：</p>\n<ol type=\"1\">\n<li>和班上性子最野的五个同学分到一个组，他们天天上课讲黄色笑话。牵连我，老师认为我没有听讲</li>\n<li>数学老师认为我没有听讲，批评我。我现在还记得，当她报考试成绩，报出我满分时，她是什么表情</li>\n<li>英语老师由于我们组闹，让我回答 PPT\n上的问题，我没有回答上来，她认为我没有听讲。事实是因为换座位我调到后头了，我眼睛近视，看不见</li>\n<li>语文老师罚我蹲着写作文。事实是我不会写，写不出来</li>\n<li>地理老师挺好的，但是有一次上课坐对面的同学闹我，结果到最后只有我被叫到办公室了。他拿起了成绩表，发现我排在中间，然后说：怪不得你成绩差。这纯属于是自己倒霉，因为我在之前都是排在前几名，就这一次失误了，刚好被他撞上。这件事情的结果是我在办公室哭抽抽了。</li>\n<li>有一个人欺凌我，但是我有一次给他反击了。</li>\n</ol>\n<p>初中我还当过生物课代表，是生物老师为了锻炼我。说明我那时候也不是完全怂的，但是也仅限于和同桌说话，听讲的时候不敢抬头太高，不敢看老师眼睛，当然其他所有人的眼睛都不敢看。现在至少在多数情况下都敢看人眼睛了。</p>\n<h3 id=\"家族黑历史ai-改写\">家族黑历史【AI 改写】</h3>\n<p>黃化某者，郧陽府之巨賈也。駕舳艫溯漢水而上，歷險巇至於秦地，購蔬果如薯葯、龍須草之屬，復轉輸漢口埠頭鬻賣，獲利頗豐，儲鏹以囊盛之。迨清季，化某卒，遺孀康書芝與三男。一夜，蒙面蟊賊夤夜來襲，持械脅迫，窮凶極惡，迫其供出財寶之所。康氏不勝其怖，遂洩密所藏金銀之地，在一處幽邃岩穴之中，賊眾悉數奪之而去。族人聞此變故，義憤填膺，謀以報之。遂駕扁舟，偽為行商，誘賊出沒。二賊見狀，一人臨舟探視，一人守岸瞭望。舟中伏甲突起，賊首立斷，拋屍於漢水之中，瞭望者惶遽遁逸，不知所終。自此家道衰落。康氏遷居異鄉，至趙川營飯鋪以度日，後為其子迎歸奉養，得以終老。太史公曰：清季之際，婦人之位卑賤，康氏長罹纏足之苦，失侶無依，而獨力撫孤，劬勞備嘗，誠可哀也。</p>\n<h3 id=\"年中总结ai-改写\">2025 年中总结【AI 改写】</h3>\n<p>在大学的旅程里，有一门课《人生风险与社会保障》成为了我学术生涯的一颗璀璨明珠，以\n99\n分的成绩高悬于我的成绩单之上。这似乎是在提醒着我，在过去的岁月中，生活的不确定性一直伴随着我，而我也因此更加深刻地认识到社会支持体系的重要性。</p>\n<p>回望 2024 年 6\n月的生产实习经历，即便是在紧张到发抖的情况下，我还是带领了一个三人小组获得了优秀的评价。这段经历不仅证明了我的心理承受能力，也让我感激那些在我身旁提供无私帮助的伙伴们。然而，或许是因为过度兴奋，我未能及时向他们表达谢意；或是出于某种内心的矛盾，我选择在此时此刻用文字来传达那份迟来的感谢。</p>\n<h3 id=\"年中总结\">2024 年中总结</h3>\n<p>你一排单词只认得 <code>⭐Stars</code>\n，不知道给浏览器装一个翻译插件，不知道 node_modules\n是什么意思，命令行经验仅限于 <code>adb</code> 和 <code>fastboot</code>\n刷机。但你还是建了一个仓库，把博客框架 Hexo\n折腾了下来，再折腾到仓库里面，这就是你在 2021 年 3 月 6 日加入 Github\n时的情形。你成功搭出来了属于自己的博客界面，并可以通过\nruofancooh.github.io 访问。</p>\n<p>但是后来你删库了。因为你的自信不足，不敢去折腾配置文件，加上不知道该写什么东西。在几十天之后，你休学了。在休学的一年里，你除了看了一点高数书之外，什么事情都没干，现在<strong>忘完了</strong>。但不管是刚开始时的第一个初心，被你忽略的第二个初心，不想捡起来的第三个初心，已经过去的第四个初心，当前的第五个初心，中途放弃的第六个初心，以及将来还没来的第七个初心，<strong>这些初心你确实都还能想起来</strong>。你的初心总数加起来能绕水星\n61.75 圈、绕火星 44.34 圈、绕金星 25 圈、绕天王星和海王星 6\n圈、绕木星两圈、绕土星两圈半。“不忘初心” 和 “砥砺前行” 这两个词对你来说是互相矛盾的。</p>\n<p>在 2023 年 5 月 26 日你 commit 了 39 次。这是你《Web\n前端开发技术》课程结束前的一段时期，你不甘平凡。你重拾 Hexo\n框架，但不知道可以开一个本地预览服务器，所以在每次修改配置文件后，都重新渲染一次并把它\ncommit 了上去。你最后把框架渲染出来的东西当成大作业提交了，总成绩不到\n80。</p>\n<p>你第一次尝试使用 <span class=\"math inline\">\\(\\LaTeX\\)</span>\n语法来打出数学符号和公式，是在《概率统计里几个容易混淆的概念》这一篇笔记里。《概率论与数理统计》是你大学生涯里目前得分最高的一门课，有\n97\n分。后来可能是因为太寒碜了，感觉没有什么价值，所以你把它删除了。但是仍然保留了一张图片：</p>\n<p><img src=\"/blog/images/alpha-point.webp\"></p>\n<p>你给网站买了个独立域名，是在 2023 年暑假 7 月。你看到 QQ\n群里发了下学期的课程教材《剑指大数据 ——Hadoop\n学习精要》，所以你买了这本教材，并提前在自己电脑上装了一台虚拟机，为\nUbuntu 操作系统。在暑假里，你总结了之前的刷机经验，并问 ChatGPT\n了解了安卓的历史。为了让手机和电脑通信，你首次尝试使用\n<code>axios</code> 向 <code>flask</code>\n发请求，虽然你一点计算机网络基础知识都没有。后来你越来越浮躁了。</p>\n<p>你写笔记花心思最多的一门课是《计算机网络技术》，也是在大学前三年里，除了《概率论与数理统计》《高等数学\nI2》（最后放弃了）《大学物理 II1》（最后放弃了）《大学物理\nII2》（中途放弃了）《大学英语\nI3》（中途放弃了）《数据库系统原理》（最后放弃了）《马克思主义基本原理》（中途放弃了）之外，你唯一真正花心思去学的一门偏理论的课。但是你不考研（四门英语课挂了两门，一门\n60\n分），在短期之内也不知道它有什么用处。所以它最后被归结到了 “永远不看系列”。</p>\n<p>你首次意识到看日志的重要性，是在搭建 Hadoop\n高可用集群的过程中。通过看 ZKFC 和 sshd 的日志，你发现了通信失败是因为\nSSH 密钥格式不匹配。后来在你写 Python\n程序的过程中，你开始有意识地记录日志。你首次意识到看文档的重要性，是在使用\nFlume\n的过程中。虽然你英语单词量不够，但是借用浏览器的 “篡改猴” 和 “沉浸式翻译” 插件，你成功看明白了各个配置项是什么意思，并在自己的机器上成功完成了实验。</p>\n<p>你笔记分类的解决方案经历了几番变迁：开荒时写得很少，不知道该怎么分；而后按个人意志 / 文体分类，分成讲概念的、实践的、没有功利价值的好玩的；再后按课程 / 技术分类，这样分出来的类可能一个类里只有一两篇笔记。后来你才想到笔记是用来看的，最近不看的东西你永远也不会看。干脆把常看的东西汇聚到一起，即 “高内聚，低耦合”。</p>\n<p><code>404.html</code>\n是你这一年里做出来最精细的东西，你把这个文件的字节数精确到了 413696\n个，换算过去正好是\n404KB。虽然大概没人发现，但只要在域名后面随便输一个，再打开浏览器开发者工具的控制台，你会看到一张纸片人。</p>\n<h2 id=\"童年回忆录之故地重游部分-ai-改写\">童年回忆录之故地重游【部分 AI\n改写】</h2>\n<p>第 5 版修订说明：</p>\n<ul>\n<li>实现方式：对第 1、2 版的补遗，加上现场照片</li>\n<li>时间范围：2001-2012 年</li>\n<li>思路：在那里看到了什么，想到了什么</li>\n</ul>\n<p>凡例：</p>\n<ul>\n<li>样貌变迁：该地方相比以前变化的程度\n<ul>\n<li>★★★★★：重要记忆点没了</li>\n<li>★★★★：重要记忆点还在，但周边的布局大变</li>\n<li>★★★：重要记忆点还在，但周边的样貌大变</li>\n<li>★★：看不出来，推测是变了</li>\n<li>★：宁愿没有变</li>\n</ul></li>\n<li>记忆保留：现在可以回想起关于这个地方的记忆量\n<ul>\n<li>★ 有印象，但是想不起来事件</li>\n<li>★★ 可以想起一两件事件</li>\n<li>★★★ 可以想起三至五件事件</li>\n<li>★★★★ 可以想起六至十件事件</li>\n</ul></li>\n</ul>\n<p>修改版本： 用 AI\n重写后的文字依然空洞，原文本就缺乏实质内容。每次完成这类修改都让我产生删除的冲动，始终不明白为何要写这些无意义的文字。大概我这人就是改不掉回望过去的习惯吧。</p>\n<p>调整说明：</p>\n<pre><code>去除\"矫情\"等自我评价词汇，改用客观描述\n\n将情绪化的\"沉溺于过去\"改为更中性的表达\n\n简化冗余表达（如合并\"写出来之后就立马想删\"为\"产生删除的冲动\"）\n\n用\"改不掉...习惯\"替代绝对化表述，减弱负面情绪浓度\n\n整体保持冷静陈述语气，避免陷入自我否定的循环</code></pre>\n<h3 id=\"第一站篷布厂旁\">第一站：篷布厂旁</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：无（约 2001-2002）</p>\n<p>十堰，这座坐落于湖北省西北部的地级市，位于秦岭主峰东南方向约 200\n公里处。这里属于典型的亚热带季风气候，夏季炎热多雨。汉江穿城而过，碧波照映着两岸青山，宛如一幅流动的山水画卷。作为南水北调中线工程的水源地，十堰确实是一座与水息息相关的城市，正如其名所示。</p>\n<p>“堰” 字道出了这座城市的特色，它指的是拦河筑坝的水利工程；而 “篷布” 则是防雨遮阳的材料。我人生的第一年，就是在篷布厂旁度过的。如今，那片厂区已被高楼大厦取代，连带着我幼时居住的山坡，也被盖着篷布的卡车一车车运走。这或许正是十堰这座 “车城” 的特色 —— 作为东风汽车的发源地，城市的发展如同车轮般滚滚向前。</p>\n<p>虽然那段时光已无从记起，但作为人生的第一个居所，它在我心中始终占据着特殊的位置。以下是我们的现场记者在山脚下拍摄到的画面：</p>\n<p><img src=\"/blog/images/old/1.webp\"></p>\n<h3 id=\"第二站源园公园\">第二站：源园公园</h3>\n<p>样貌变迁：★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>这座公园依地势而建，南高北低，如同七层梯田般错落有致地铺展开来。中央的花坛将公园一分为二，西临人民南路，东接源园路。从南向北走，正是上学的方向。正值学期末工作日的下午，公园里多是休闲的中老年人，偶尔可见带着孙辈的爷爷奶奶。此时中小学生们都在上课，公园里自然见不到他们的身影。</p>\n<p>最南端的圆形广场上，红色六角星图案镶嵌在地面。儿时常有人在这里抽陀螺，鞭声清脆。记得有次和父母中的一方在此，被要求给另一方打电话，我却握着话筒迟迟不敢开口 —— 尽管面对面交流毫无障碍，电话却总让我莫名胆怯。</p>\n<p><img src=\"/blog/images/old/2.webp\"></p>\n<p>中间几层总是热闹非凡：广场舞的旋律此起彼伏，戏曲票友的唱腔悠扬婉转，树荫下打牌的老人家们谈笑风生。</p>\n<p>最北端是 “园源爱乐乐团” 的排练场地。民间艺人们围坐在亭子下，讨论着用 F\n调还是 G\n调。总指挥站在前方，没有指挥棒，徒手打着节拍。随着他的手势，二胡、管乐、笛子齐鸣，合唱队唱起了《没有共产党就没有新中国》《打靶归来》等经典老歌。</p>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/2.mp4\" type=\"video/mp4\">\n</video>\n<p>走出地下通道，前方是横跨道路的人行天桥，穿过天桥便是青少年宫。我曾在这里上过学前班。那时妈妈在附近的餐馆工作，每天下班后总会来到青少年宫，给我买几串香喷喷的羊肉串。那炭火烤制的香气，混合着孜然和辣椒面的味道，至今想来仍觉唇齿留香。</p>\n<p><img src=\"/blog/images/old/2.1.webp\"></p>\n<h3 id=\"第三站人民南路-襄渝线铁路\">第三站：人民南路 - 襄渝线铁路</h3>\n<p>样貌变迁：★ | 记忆保留：★（约 2005-2010）</p>\n<p>站在人民南路与襄渝线铁路交汇的人行道上，俯瞰下方的铁轨，那种深邃的距离感总让人屏息。铁轨向远方延伸，通向未知的深处。不时有列车呼啸而过，车轮与铁轨碰撞发出规律的轰鸣，车厢带起的风掀起一阵气浪，转瞬即逝的身影在视野中留下一道模糊的轨迹。</p>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/3.mp4\" type=\"video/mp4\">\n</video>\n<p>这个画面时常潜入我的梦境：一条幽深的沟壑，如同大地裂开的缝隙，人们像是坐在水上滑梯上，顺着陡峭的坡面滑向深处。这奇异的景象，或许是我对铁路的深刻印象与附近水库闸门的记忆交织而成的幻象。</p>\n<h3 id=\"第四站新安巷-路口\">第四站：新安巷 - 路口</h3>\n<p>样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）</p>\n<p>记忆中的巷子，红砖裸露的墙面斑驳沧桑，道路两侧空空荡荡。如今，鲜亮的油漆覆盖了岁月的痕迹，坚固的铝合金护栏整齐地守护着行人安全。</p>\n<p>从金沙路拐进新安巷，没走多远就会遇到第二个路口，上下两条路在此分道扬镳。记得小学时，班主任提出要来家访。想到家里狭小的空间还没来得及收拾，母亲委婉地推辞了。最后，我们在靠近金沙路的路口与老师道别，夕阳将我们的影子拉得很长很长。</p>\n<p><img src=\"/blog/images/old/4.webp\"></p>\n<p>我常常独自在那个斜坡上练习拍球。篮球在水泥地上弹跳的节奏，与坡度的起伏形成奇妙的韵律。虽然我对规则一窍不通，但球仿佛懂得我的心思，随着手掌的力道上下翻飞。放学后，每当同学邀约打球，我总是不忍拒绝。</p>\n<p>记得有位住在附近的同学，邀我在他家下象棋。他的棋路狂放不羁，全然不顾规则。我耐着性子陪他下了一盘又一盘，直到最后，看着他又一次违规落子，我终于按捺不住，一把掀翻了棋盘，棋子哗啦啦散落一地。</p>\n<p><img src=\"/blog/images/old/4.1.webp\"></p>\n<p>最令我难忘的是那个中午。我正走在上学的路上，刚拐进里面的路口，一声惊雷般的巨响在耳边炸开。我猛地回头，看见她倒在血泊中，散乱的头发像一把浸湿的拖把。说来奇怪，这一幕并未在我心里留下阴影 —— 死亡对我而言并不可怕，我甚至走近看了她一眼。理智告诉我该打\n120，可父母都不在家，我又因社交恐惧而犹豫不决。在路口徘徊了十几分钟后，我最终还是走向了学校。傍晚回家时，那片血迹已被石灰掩去。母亲后来总绕开那条路走，我却依然如常。</p>\n<p>说到有趣的事，莫过于在这个路口玩纸飞机。我会精心折好每一架飞机，用力掷向天空。它们在空中划出优美的弧线，时而盘旋，时而俯冲，能滑翔几秒之久，仿佛在蓝天上描绘着看不见的图案。</p>\n<h3 id=\"第五站人民南路-人行道\">第五站：人民南路 - 人行道</h3>\n<p>样貌变迁：★★ | 记忆保留：★★（约 2005-2010）</p>\n<p><img src=\"/blog/images/old/5.webp\"></p>\n<p>在这个熙熙攘攘的路口，摆摊的小贩们早已成为一道熟悉的风景。父亲和我曾也是其中一员，我们支起简易的地摊，卖着家里的旧书和旧报纸。在那些泛黄的纸页间，有一本我特别钟爱的书，里面记载着武当山上的各种神话传说。虽然心头不舍，可最后还是将它摆上摊头 —— 好书如故事，合该在江湖流转，去遇有缘的人。</p>\n<h3 id=\"第六站301-省道-红门铺村入口\">第六站：301 省道 - 红门铺村入口</h3>\n<p>样貌变迁：★★★★ | 记忆保留：无（约 2002，2005-?）</p>\n<p>这条路最初是石子铺成的，没有沥青和护栏。山路两侧的树木稀稀拉拉，地上满是红沙，不像现在这样被厚厚的落叶覆盖。那时候，路上但凡能当柴火的东西，都会被附近的人家捡回去烧。</p>\n<p><img src=\"/blog/images/old/6.1.webp\"></p>\n<p>在我一岁那年，父母和奶奶在这个路口举行了一场隆重的抚养人交接仪式。不过，关于这里的其他记忆，我只在几张老照片中见过，那是父亲用柯达胶卷相机拍的。那部相机不仅记录了他九十年代去深圳打工的情景，还留下了我一岁之前的许多照片。我还翻过一本他收藏的摄影书，如今虽然有了手机，拍的照片反而少了。</p>\n<h3 id=\"第七站红门铺村-老房子-1-号\">第七站：红门铺村 - 老房子 1 号</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★（约 2002-2005）</p>\n<p>沿着山路往下走，路上满是落叶，踩上去有些滑。路中间有一棵松树，已经在那里默默挺立了几十年。</p>\n<p><img src=\"/blog/images/old/7.1.webp\"></p>\n<p>走了不到几分钟，就能看到一间土房子的遗址。如今它早已倒塌，只剩下零星的瓦片散落在地。关于房间的布局，我的记忆已经模糊不清。但奶奶还记得一件事，她说，我曾经从这个崖上摔到了另一户人家的后岩沟里。</p>\n<p><img src=\"/blog/images/old/7.2.webp\"></p>\n<h3 id=\"第八站茅箭区实验学校\">第八站：茅箭区实验学校</h3>\n<p>样貌变迁：★★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>在这所学校及周边的记忆中，除了几张泛黄的奖状和荣誉证书，最让我怀念的莫过于大家聚在一起斗陀螺的场景。每到放学，校外的陀螺摊子旁总是人声鼎沸，五颜六色的陀螺在大盘子上旋转，发出阵阵 “嗡嗡” 的鸣响，同学们的欢声笑语此起彼伏。我常常站在一旁，羡慕地看着他们激烈地比赛，自己却鲜少参与，只是悄悄地在一旁练习，希望能有一天也能加入他们的行列。</p>\n<p>转学那天，天空灰蒙蒙的。班主任站在校门口，脸上露出一丝无奈的微笑，提到有几个成绩优异的学生也转学了，她的话语中透出对这座小城的留恋。我站在校门旁边，心中一片茫然，即将踏上一条未知的路，却不知道该如何启程。</p>\n<p>然而，转学的具体原因，以及父亲的工作变动，我是在多年后才逐渐明白的。那些年，父母从未向我解释过缘由。当我终于鼓起勇气询问时，父亲的回答让我一时语塞：“你从来没问过我，说明你是不关心我的。” 我点了点头，心中五味杂陈。确实，当时的我未曾主动去了解，仿佛对一切都漠不关心，但内心深处，我其实渴望着被理解和支持。我的父亲又不是造原子弹的，不需要他去隐姓埋名。他只是一个平凡的、内心柔软的普通人。他默默地为家庭奔波，尽力维持我们的生活。如今，我完全理解他的艰辛，但也遗憾当时没能得到他的解释。那时的我，只是一个渴望被关注的孩子，一句简单的说明，或许就能驱散我心中的迷雾，让我在成长的路上多一份理解与从容。</p>\n<h3 id=\"第九站新区小学\">第九站：新区小学</h3>\n<p>样貌变迁：★ | 记忆保留：★★★（2010-2012）</p>\n<p>我的童年回忆录在初中时期初具雏形，因此小学那段时光在我的记忆中并非一片灰暗，而是光明与阴霾交织，大约各占一半。</p>\n<p>刚转到新学校时，我感到前所未有的不适应，主要源于几个方面。首先是作业的布置方式：以前的学校，作业总是整齐地写在黑板上，一目了然；而新学校的老师习惯口头布置，我还没养成随时记录的习惯，常常漏记。其次是方言环境的冲击：虽然我会说方言，但新学校的课间充斥着方言的喧嚣，与以前学校普遍使用普通话的氛围截然不同。我坐在人群中，听着熟悉又陌生的语调，感觉自己像个局外人。最后是那种挥之不去的陌生感：初来乍到，面对陌生的教室和面孔，我感到深深的孤独。</p>\n<p>不过，有几个同学主动和我搭话，这让我逐渐适应了新环境。我还交到了几个好朋友，甚至开始主动找他们一起玩，当然，仅限于放学同路的时候。毕业照上的我也是笑着的。虽然班上的同学并非我都喜欢，但直到上初中后，我依然能默写出他们所有人的名字。这个把全班同学名字默写一遍的习惯，一直被我保留到了高中。</p>\n<p>小学时，班主任要求我们每人准备一个摘抄本，用来摘抄一些优美的文字。摘抄是从前往后写，而作文则是从后往前写。那个本子里有一篇作文被涂抹得乱七八糟，那是我情绪崩溃时写下的。那篇作文是关于一次感恩讲座的观后感。主讲人讲得声情并茂，当他说到 “和你们的亲人拥抱一下，并说一些话” 时，台下的许多同学都哭得稀里哗啦的。然而，我却一滴眼泪都没流，甚至觉得主讲人有些过于做作，有一种非常荒诞的感觉。从那时候起，我就觉得这只是一场形式主义的会议。或许可以说，我是个冷血的人吧。至于我提前通知了父母，但那天他们谁都没来，这件事反而显得不那么重要了。</p>\n<h3 id=\"第十站红门小学\">第十站：红门小学</h3>\n<p>样貌变迁： | 记忆保留：无（约 2002-2005）</p>\n<p>“黉门” 原指学校的门，后引申为学校的代称。这一地名在民国时期就已存在，或许因为 “黉” 字较为生僻，后来改成了 “洪”。近年来，可能是为了避免与天地会的名称冲突，又将其改为 “红”。不过，公交站名至今仍保留了原来的 “洪” 字。</p>\n<p>这所小学曾采用混龄教学，不同年级的学生在同一间教室上课。有趣的是，我在上幼儿园之前就经历了 “第一次一年级”—— 那时奶奶在学校教我认字，遇到不认识的字，她就会向老师请教。如今，这所学校已不再热闹，学生寥寥无几，老师的人数甚至超过了学生。</p>\n<p>有一天中午，我没有回家，奶奶来接我时，我的回答是：“因为老师没说让我走，所以我就没走。” 这件事似乎说明，我从小就是一个非常守规矩、甚至有些死板的人。</p>\n<p>这里有一个关键点：我是在这所学校学会说话的。在此之前，我虽然经历过一次分离，但不确定是否造成了心理创伤。这种不确定性让我思考，我的性格或许并非后天形成，而是通过\nDNA\n遗传下来的。如果真的可以这样解释，我反而会感到轻松许多。但是心理学告诉我们，人格是在遗传和环境的交互作用下形成的。</p>\n<h3 id=\"第十一站车城南路-加油站旁\">第十一站：车城南路 - 加油站旁</h3>\n<p>样貌变迁：★★★★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>当我上幼儿园时，曾独自跑回家，第一次在这条没有护栏的马路上冒险穿行。马路对面，曾经宽阔的台阶如今已被房屋取代，只剩下窄窄的一排。</p>\n<p><img src=\"/blog/images/old/11.1.webp\"></p>\n<p>沿着这些台阶向上，是一条充满岁月痕迹的小巷。老式建筑依旧斑驳，仿佛时光在此停驻。巷子深处，蓝色的施工铁皮遮挡了视线。</p>\n<p><img src=\"/blog/images/old/11.2.webp\"></p>\n<h3 id=\"第十二站新安巷-地下室\">第十二站：新安巷 - 地下室</h3>\n<p>样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）</p>\n<p><img src=\"/blog/images/old/8.webp\"></p>\n<h3 id=\"第十三站红门铺村-老房子-2-号\">第十三站：红门铺村 - 老房子 2\n号</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★★（约？-?）</p>\n<p>这片树林曾经是一间砖房，带有一个宽敞的院子，院子里还有一片菜园。爷爷在那里养了许多肉用动物，包括鸡、鸭、鹅、猪和兔子。兔子的窝建得很高，得爬梯子才能上去。我曾用白菜喂过它们，对它们那分瓣的嘴印象特别深。父亲和我还一起养过一群小鸭子，可惜后来大多数都没能活下来，唯一幸存的一只被带到了这里继续养。它长得很大，但某一年过年时，它被煮成了一锅汤。</p>\n<h3 id=\"第十四站柳林路\">第十四站：柳林路</h3>\n<p>样貌变迁：★★★★ | 记忆保留：无（约 2001-2002）</p>\n<h3 id=\"第十五站百二河水库-周边\">第十五站：百二河水库 - 周边</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★★★★★（约 2005-2010）</p>\n<p>当正路不通时，我便绕道从南边的小路进入水库。岸边原本宽阔的台阶如今被石制护栏取代。沿着水库走几百米，斜坡上曾是我的家，如今已成平地。邻居家的大圆台子和楼房也消失了，取而代之的是一座公园。这些地方曾出现在我童年的回忆录中，如今它们的消失，也标志着我的童年走到了尽头。每一次回望，都是与过去的告别，也是与未来的相遇。</p>\n<p>水库好像最近施完工了，等下一次再拍照。</p>\n","excerpt":"","more":"<h2 id=\"自我概念与解释相关的话题\">自我概念与解释相关的话题</h2>\n<h3 id=\"电子游戏给我们的启示\">电子游戏给我们的启示</h3>\n<p>为什么电子游戏会让人上瘾，我认为其中很重要的一点是分数的积累。带段位的游戏可以从\n0\n分一直打到大师级别，肉鸽类的游戏在一个小阶段里做出的选择和加成效果会延续到之后的所有阶段里。游戏和学习考试的区别是，后者没有一个可以看得见的经验条，考试的目的是满或者过，游戏的目的是加；考试有上限，游戏无上限。如果我们把游戏这一套挪到现实生活里，用经验值衡量有没有做一件事，段位分衡量做这件事的成功或失败的结果，在做一件事情之后，经验分一定会增加，而段位分随着做这件事后的结果而变化，在一个赛季之后会掉一点。那可能对于一些，想做，但是坚持不下去的事情有帮助。目标和规划还是太难了，用月度任务可能更好一点。</p>\n<p>游戏是一种工具，关键是看它用到什么地方。由于它能使人兴奋，所以通常不用到睡觉之前，而是起床闹钟响了之后。</p>\n<p>动作类游戏，对于一个难打的\nBOOS，你的第一步一定是打，被一个招打死之后，记住。然后下一次的时候再尝试如何避开这个招，这种通过多次试错来找出一种固定应对套路的过程，被玩家称作背板。这是在变化中寻找不变。但一些需要临场应变的策略类游戏，如果你提前就定好了一种打法，那么当事情的发展不随你的期望的时候，如果你不变，就大概率会失败。</p>\n<p>游戏还可以培养一个人的团队协作能力和领导能力。如一个 20v20\n的游戏里，在开局之前每一方的士兵会根据以往的战绩投票选出一个指挥官，指挥官相对于普通士兵有额外的全局技能，通过语音实时指挥每一个点的具体打法和应变策略。如果指挥官不得力，可以有人发起弹劾，弹劾通过后发起者成为新的指挥官（事实上，能力强的开麦指挥官是很少见的，听指挥的士兵次之）。还有一个游戏可以和\nAI\n的队友组队，如果你把它不当人看，比如开局就让它帮你捡东西，那么它会直接远离你。</p>\n<h3 id=\"人和人之间为什么会出现误解\">人和人之间为什么会出现误解</h3>\n<p>先讨论一个问题。我们先定义一下：如果一个人做事时不以满足别人的期望为主要动力，那么他做的这件事就能够被称为是 “在为自己活”，反之就是在为别人活。那么，现在有一个过去从来没有听过为自己活的理念的人张三，在他看到李四说 “人要为自己活” 之后，认为李四说的非常对，于是，他开始做一些事情了。现在请问，张三之后做的事情算不算在为自己活？你可能会觉得这个问题的信息是不够的，因为我们不知道张三之后做的事情具体是什么，如果张三认为李四的话隐含了 “我想让你们听我的，你们都要为自己活啊”，且在听了李四的话之后，认同了他的期望，以满足李四的期望为主要动力来做事。那么，他就是在为李四活了。至少在一个短期的时间内是这样的，直到李四的观念被张三内化和修正成自己的观念了。但如果李四的话的意思是：“人要为自己活，但是你听不听我的话都可以”。那么，张三在听了李四的话之后会有……</p>\n<p>从这里可以看到，在理解一句话的时候，我们心里是预设了很多前提的，而对于简单的一句话，说出这句话的人不一定会把他的所有前提都说出来。它的信息量是有限的，而在没有更多上下文的情况下，想要理解一句话，我们必须要根据自己已有的经验来补全这句话里的每一个前提。即使对同一个前提，我们的理解也可能是不同的。这就类似于命题逻辑里的真值指派，我们说的一句话就类似于一个命题公式，这句话里的一些模糊和歧义的词语称为命题变元，而我们通过对这一句话里的每一个的命题变元的理解，一次断句方式的组合，称为对这句话的一次真值指派，或者叫语义赋值。在这次真值指派之后，通常会得到一个确定的结论，这个确定的结论称为我们对这句话的解释。</p>\n<p>有时候，当我们想要反驳对方时，或许是不接受对方的真值指派和自己的不一致，想用自己的真值指派盖过别人的。如果把自己和对方的前提都列出来，会发现对方也可以解释成合理的，自己只是想要提出一种不同的解释角度。比如 “所有吃饱后的痛苦，都是吃饱了撑的” 这句话。如果把它解释为：“过去的吃饱经历把吃饱的阈值给拉高了，使得对于同一个食物摄入量，可以使过去的自己吃饱，而不能使现在的自己吃饱”。即自己过去是吃饱的，而现在没有吃饱。这句话里的两个 “吃饱” 都是一个过去时，“吃饱后的痛苦” 是现在时，“吃饱后的痛苦” 意味着，在吃饱之后又过了一段时间后，变成没有吃饱了。吃饱和痛苦是不能同时存在的，有张音乐专辑叫《每到夜里我就很饿》就是这个意思：有痛苦，说明是现在没 \" 吃饱”。撑有两种意思：撑大和支撑。上面说的是撑大的意思，支撑的解释方式是：“如果想要感受到上层需求没有被满足所带来的痛苦，前提是下层需求在此时一定是被满足了的”。就是你如果现在是饥饿的，当别人训斥你的时候你就不会生气了，因为你的焦点是如何吃饭，而不是如何反驳他。这仍然存在一种比较特别的情况：你在学校里非常饿，点了一个外卖，去拿的时候发现被人偷了，请问这时候你出现的痛苦情绪是不是：吃饱了撑的？但如果你认为，在非常饿的时候点外卖本身就是吃撑了的话。马斯洛需求金字塔里，当上层需求和下层需求没有被满足时，都会出现情绪，只是因人而异，强弱程度不同。越接近下层的，是未满足时的平均痛苦程度更大的，我们失去一个亲人或者好朋友的痛苦不一定比我们没吃一顿饭要轻。痛苦是改变的动力之一，另一个动力是激励，但是我感受激励的能力可能比别人弱。所以我才说，为什么要等到重大变故之后才能改变。</p>\n<p>如果我们仅仅说到这里，就认定对方是错误的，那么这实际上是通过寻找一条路径，用自己的子公式的解释和对方的不一致来反驳对方的整个解释。</p>\n<h3 id=\"一些抬杠\">一些抬杠</h3>\n<p>“世上本无事，庸人自扰之”：世上本无路，庸人自走之；世上本无经，唐僧自取之；世上本无猴，石缝自崩之；世上本无你，_____？</p>\n<p>天下本无事，庸人扰之为烦耳。第澄其源，何忧不简邪？</p>\n<p>“想全是问题，做才是答案”：长考全是问题，臭棋才是答案。</p>\n<p>“吃饱后的一切痛苦，都是吃饱了撑的”：站起来说话的所有人，都是腰不疼的。</p>\n<p>“未经他人苦，莫劝他人善”：未欠他人钱，莫劝他人还。</p>\n<p>“忠言逆耳利于行”：比干逆耳裂于心；屈原逆耳喂鱼行。</p>\n<h3 id=\"为什么文字的性格比口头的活跃\">为什么文字的性格比口头的活跃</h3>\n<p>准备和修改的时间长，单位时间的注意资源占用少：文字有组织语言的时间，它的缓冲区比口头的大，在打字的同时可以看到，还可以根据上下文修改几遍。文字的是想到哪里写到哪里，有想法的时候随时记录，这里的一段话可能是由来自于不同时间的想法拼到一起的。现实的状况是，我一次根本说不了那么多，除非处于一种非常想说，且有说的素材的状态。这里相当于是自己语言能力的极限了。在说话的过程中，你还额外需要去控制自己的语气和音量，额外给你之前说过的话做一个短时记忆，这相对于打字都会占用更多的资源。</p>\n<p>AI 直接改写与带动的作用：你可以用 AI\n修改你的文字，使你的文字更加流畅。在 AI\n的流畅语境下，可能会带动你自己的文风。这种情况就像，在一个大家都有负面情绪的环境下，比如葬礼上放哀乐，会带动你的情绪与他们一致。用一个更恰当的类比是，AI\n就是一本书，看 AIGC 和读书是差不多的，是一个学习写字的过程。</p>\n<p>但 AI\n生成也是有弊端的：当你给出不合适的提示词的时候，它会曲解你的原意，给你添油加醋。这可能会造成别人的误解，因为你原本的情绪和\nAI 生成的是不一致的。很多纠结的时候就是出自这种情况：觉得 AI\n写的文字太油滑了，但是比自己写得好。用 AI\n直接修改过的文字在站点的所有地方都被标注了。剩余的内容都是没有经过 AI\n直接改写的。AI\n的正面作用是，它（有时）可以帮我们厘清不明确甚至错误的概念，这时我们称此为间接修改。方式是，把写的话发给\nAI，后面再问一句准确吗。我们如何发现 AI\n的局限性：找一本书里列举的事实，问 AI 有没有这件事。</p>\n<p>不懂装懂的情况：在和真人交流的过程中，自己对不明白的概念是不会详细地讲的。而在文字的环境下，在对某一个词语并不了解的时候，会出现假装自己懂的情况。这有时会造成用词不当或者明显的错误，比如我在前几个月才发现，以前的离散数学笔记里有一个明显的常识性的错误，公式都错了。这就和\nAI\n的幻觉差不多，因为我和它都是通过以前阅读过的文字按概率生成的。为什么会出现这种情况，因为在这些笔记里没有举具体的例子，只是把别人抽象的话复述一遍，先假装自己明白了再说。这是一种故意把信息熵增大的行为，形成了一种 “我明白了，但是你还没明白” 的假象，就是我比你懂得多，你还不懂，我要找一个地方超过你。这是一种不自信的表现，因为你不如我的背后其实是我不如你，我在某些地方是不如你的，所以我才需要找另外的地方去超过你。</p>\n<p>目的上的：因为这里是主场，在出于一种追求节目效果的情况下，可能会故意地夸大一些事实。节目效果的意思是：故意地给别人留下某种印象，不管是好的还是坏的，且留下好的和坏的印象都有好处。</p>\n<h3 id=\"为什么有些内容不愿意删\">为什么有些内容不愿意删</h3>\n<p>有一方面还是因为舍不得的，认为有比没有好。</p>\n<ol type=\"1\">\n<li>做反面教材也是有用的。现在展示自己身上不好的地方，是为了让别人未来不要变成自己这样。</li>\n<li>追求一种同频共振。作一面镜子，让对方看到，现在的我和以前的对方身上是有相似之处的，在某种程度上感化对方。展示自己弱小的一面，以求别人宽容，把自己现在身上的责任减轻一点。造成一个投射性认同的节目效果，疾病继发性获益。</li>\n</ol>\n<p>因为我意识到了第二点，所以老是感觉不安心，感觉把自己不好的事情说出来是不对的。但是从第一点来说，我还是不想删除这些内容的。这是一个非常矛盾的地方，感觉必须有人激我一下，或者自己的生活出现重大变故，比如有人根据我发出来的东西排挤我之后我才会改变，否则我是不会删除的。事实上，第一点可以说成是对第二点的掩盖，因为第一点的预想结果其实是，让别人吸取经验教训，然后让他们不要这样，以及让他们对自己的孩子不要这样，这又隐含了一个把责任推到父母身上的问题。</p>\n<p><img src=\"/blog/images/100mdjht.webp\"></p>\n<p>事实上，如果真的有人在看到这里之后有意地排挤我，说明他居然真的把我当回事了，能抽出自己宝贵的时间看一个人发的牢骚。虽然点进来的不一定是完全关心我的人，但不关心我的人一定不会点进来。所以不管怎么说，我的愿望都完成了。</p>\n<h3 id=\"为什么说自己是伪善的\">为什么说自己是伪善的</h3>\n<p>这可能是因为我对善的偏见。我对善的理解是，在任何场合下说的都是真心话，而为了让对方开心说的场面话和客气话都是违心的，因为你的最终目的是先让对方开心，再让对方给你回报，或者说是，你想从对方身上获取回报。我认为从对方身上获取回报是不对的，其实我很小的时候就能感觉到，有时候一个人说的话，纯粹是想让对方开心，而不一定是自己的真心话。至于为什么不对，我现在还没明白，可能就是看《水浒传》看的。</p>\n<p>由于你无法保证你在任何情况下说的都是真心话，所以自洽的方式就是说自己是伪善的。就像郑智化《水手》那首歌里唱的，“说着言不由衷的话，戴着伪善的面具”，当然它还有一句词，叫 “擦干泪，不要问为什么”。</p>\n<h3 id=\"未完成事件\">未完成事件</h3>\n<p>荣格有一个个案：老妪的右手会间歇性地做出一个奇怪的向下压的动作，当他询问老妪，这是否在纪念你逝世的丈夫，在模仿他修鞋的动作后，这个持续多年的动作竟从此消失了。</p>\n<p>最近突然想到一个之前从来没有提到过的事件，可以用来解释维持我现在别扭性格的部分原因：在\n2014\n年之前，郧县还不是十堰市的一个区，它们的经济发展水平和教育资源是相差较大的。所以在新区小学，有个同学在知道我从十堰转学过来之后，露出了一脸惊讶的表情，并说了 “羡慕我” 的话。但我当时的情绪首先是优越感，其次是优越感带来的负罪感。因为我感到和其他人都不一样，这是一种恐高症。这可以从一种方面解释，为什么我不愿意对别人说 “好话”。因为我可能在害怕别人和我出现一样的惭愧的情绪。</p>\n<p>关于搬家的事情，我最近又做了一个无恐惧感的噩梦，后来发现它是有一种含义的：在一间没有刷漆的房子内部有两个房间，房间的连接处是一个门，但它没有具体的门，只有一个框或者洞，就像没有装修的房子那样，只有水泥墙。在离门不远的天花板上面垂下来一个左右摆动的钟摆，在钟摆的末端有一个圆孔，如果把头伸进去，圆孔刚好可以容纳，且头会随着钟摆的摆动而撞在门框上。仓库的原型是我在十堰一个人玩时进过的一个，里面确实没刷漆，但它只有通往外界的一个门框，只有一个房间。如果把两个房间解读成搬家前后的内部世界的话，那么这说明我已经倾向于把它们连接到一起看。但最后我只是看着那个钟摆，而没有把头伸进去。</p>\n<h3 id=\"吃饱了撑的\">吃饱了撑的</h3>\n<p>现在的空腹体重比去年同期下降了两公斤，现在是 56\n公斤。上一代人可能都有类似的经历：在感到非常饿的时候可以撑一段时间不吃饭，消耗自身的肝糖原和脂肪来提升血糖水平后，会有一点饱的感觉。但这种感觉撑不了很长的时间，最终还是要靠吃饭来撑。在控制食量上，长期饿过的人，比如在地震时被困过的人，他在脱离困境后吃的第一顿饭，可能比没有类似经历的人更容易吃撑。</p>\n<h3 id=\"可能收到的批评类型目前共-15-种\">可能收到的批评类型：目前共 15\n种</h3>\n<p>在网上看到一句带有评判性质的话，有时习惯性地会代入自己，如果说中了类似的点，自己会难受好一阵子。这或许是一种巴纳姆效应，巴纳姆是\n18\n世纪美国的马戏团艺人，他说自己的节目之所以受欢迎，是因为包含了所有人都喜欢的成分。不喜欢的成分也是类似的，每个人都可能有一些相似的，不愿意被别人指责的地方。但有时候，自己还是想收到别人的批评，因为别人可能指出自己没意识到的问题。这里整理了可能收到的批评类型，但这些并不一定是自己都认同的。</p>\n<ol type=\"1\">\n<li>全能：没人在意你 / 你把自己想得太重要了 / 自以为是 / 自作多情 / 自命不凡 / 你的观众没你想的那么多</li>\n<li>局限：夏虫不可语冰 / 朝菌不知晦朔 / 坐井观天 / 管中窥豹 / 一叶障目 / 盲人摸象 / 夜郎自大 / 以蠡测海 / 思而不学则殆 / 以后当你看到你以前写的东西，就会\nxxx / 一瓶子不满，半瓶子晃荡 / 无知者无畏 / 达克效应</li>\n<li>执行力 / 复现 / 拖延：知之非艰，行之唯艰 / 一屋不扫 / 五谷不分 / 爱幻想 / 心比天高 / 纸上谈兵 / 闭门造车 / 尽信书，则不如无书 / 看起来知道自己的问题，但是改得很慢 / 语言的巨人，行动的矮子 / 想不切实际的东西没用 / 你的未来怎么办</li>\n<li>盲目试水：做事之前没有规划，不穿鞋就过河 / 愣头青 / 眉毛胡子一把抓 / 凡事预则立，不预则废</li>\n<li>稳定 / 可靠：你的行为是不可预测的 / 不守信</li>\n<li>完美主义：对自己和他人的要求高 / 捡了芝麻，丢了西瓜 / 人至察则无徒 / 吹毛求疵 / 求全责备</li>\n<li>刻舟求剑：过去的事情放不下去，不会向前看 / 守株待兔 / 郑人买履</li>\n<li>不会表达自己的情绪 / 感情，而是情绪化地表达</li>\n<li>过度分化：相处时的主观感受不好，太注重自己，没有替对方着想 / 自私 / 不愿意问对方是怎么想的 / 共情能力不强 / 站着说话不腰疼 / 喜欢过度揣摩他人的想法 / 以小人之心度君子之腹</li>\n<li>过度融合：指导欲太强了，喜欢干涉对方的选择，让对方按自己想的做 / 越俎代庖 / 揠苗助长 / 投射性认同</li>\n<li>庸人自扰 / 内归因：你想得太多了 / 喜欢抬杠 / 钻牛角尖 / 太老实 / 固执 / 较真 / 玻璃心 / 敏感 / 自卑导致自负 / 越缺什么，越在意什么 / 疑心生暗鬼 / 杯弓蛇影 / 风声鹤唳 / 草木皆兵 / 矫情 / 把自己看得太低下了 / 妄自菲薄</li>\n<li>外归因：发牢骚，抱怨别人是不对的，给别人以及第三者留下的印象不好 / 怨天尤人 / 祥林嫂</li>\n<li>确实有一件事情做的不合适，有更合适的解决方法</li>\n<li>隐喻性的，可以激励自己反思的非直接的批评</li>\n<li><a href=\"#为什么说自己是伪善的\">自我批评是虚伪的</a> / 不真诚的 / 只是为了 “彰显道德高度”/ 这反而看起来你对道理一点都不懂 / 有隙则明示之，令其谗不得入 / 用自我批评获取心理安慰，反而逃避改变</li>\n</ol>\n<p>关于随便看到一句批评的话就认为是说自己属于防御机制过强还是过弱：防御的定义是把负面情绪的组成部分从意识觉察中排除出去。如果我先认定它在说我，就能提前准备反击、解释、承受伤害，这样就不会被突如其来的批评击垮，是一种预支现在的焦虑以避免未来更大痛苦的策略（贝勃定律）。所以从未来的角度看是强，从当下的角度看是无效。</p>\n<p>我给自己的评价就是：我是一个无知的人，什么都不懂。这样当别人再说你无知的时候，你就不会生气了，因为生气了就说明，你认为自己不是无知的。你把 “别人不了解你” 所带来的愤怒转化成了 “我早就知道你会这么说” 了。</p>\n<blockquote>\n<p>（AIGC）\n行为背后的动机是恐惧，而非自信：这种行为模式的深层动机通常是：“如果我表现出真正的自己（可能的不完美），别人就不会喜欢我、重视我。所以我必须先发制人，通过自我贬低来控制别人的反应，确保我能获得我需要的认可。” 这种动机源于对被忽视、被否定、不被重视的深刻恐惧。而恐惧是低自尊的典型驱动力。真正高自尊的人不会活在这种恐惧中，因此也不需要费尽心机去操控别人的看法。<br>\n这是一种心理防御策略：通过主动贬低自己，他实现了两个防御目的：<br></p>\n<ul>\n<li>降低预期：把自己的位置放得很低，这样任何小小的成功都会被视为 “超常发挥”，任何失败都 “理所应当”。这避免了失败时自尊心遭受毁灭性打击。<br></li>\n<li>规避风险：抢先说出自己的缺点，就抢走了别人批评他的机会，从而避免了来自他人的、最令人恐惧的否定。</li>\n</ul>\n</blockquote>\n<h3 id=\"什么叫正确\">什么叫正确</h3>\n<p>对于我以前为什么发一些东西，我可以说出来背后的原因是什么，但我<a href=\"#为什么文字的性格比口头的活跃\">不认为</a>自己说出的所有话都是正确的。正确是一种在特定视角下的判断。</p>\n<ul>\n<li>场域：在什么情况下是正确的，而在情况之外不一定正确。比如在伊斯兰教的语境下，猪不能被人吃是正确的；在十六进制下，8+8=10\n是正确的</li>\n<li>本体：正确指向什么\n<ul>\n<li>符合客观现实，既定事实。如现在是白天，如果同一个地方的人有人说是白天，有人说是晚上，那么就乱套了</li>\n<li>符合客观规律，得到大量证据支持。如天上有大片乌云，就有可能下雨</li>\n</ul></li>\n<li>认识：如何判断正确，被解释为正确的\n<ul>\n<li>通过自己已有的认知图式。如一个自己以前持有的观念，在后续可能会消失</li>\n<li>通过群体共识，如一本书出版之前需要经过审核</li>\n</ul></li>\n<li>目的：正确有什么用\n<ul>\n<li>可以用于解决某一个特定问题的</li>\n<li>可以满足人需求的，消除负面情绪的。\n<ul>\n<li>（生理的需要）如每天要吃饭</li>\n<li>（安全的需要）稳定的，可以预测的。如在多数地区，黑夜和一年四季都总是会有规律地出现的</li>\n<li>（归属与爱的需要）在群体里拥有地位，符合已有规则（共识）\n<ul>\n<li>法律法规：公平的底线。违法的人会被惩罚</li>\n<li>伦理道德：理想的高线</li>\n<li>推理形式上的共识。非胡言乱语</li>\n</ul></li>\n<li>（尊重的需要）自尊和被别人尊重\n<ul>\n<li>符合自己从以往经历里总结出来的经验（出于自我价值肯定，或者不希望看到没有经验的人重蹈覆辙）</li>\n<li>没有说出的话，和说话人身份之间，或者在特定情景下的冲突</li>\n</ul></li>\n</ul></li>\n<li>可以激发负面情绪的，如批评。批评既激发了被批评者的羞耻感，又满足了被批评者的需要（如果是需要的话），一般是先有负面情绪，后有正面情绪</li>\n</ul></li>\n</ul>\n<h3 id=\"我的优点\">我的优点</h3>\n<ul>\n<li>节俭。<a href=\"#为什么有些内容不愿意删\">小学时期没用完的草稿本到现在还在</a>。恩格尔系数高。</li>\n</ul>\n<h3 id=\"如何看待负面情绪\">如何看待负面情绪</h3>\n<p>负面情绪能让自己切切实实地感受到，自己是存在的，活着是有意义的。</p>\n<p><img src=\"/blog/images/-emo.webp\"></p>\n<h3 id=\"自身存在的沟通问题\">自身存在的沟通问题</h3>\n<p>有时候觉得，在和对方沟通时，自己没有把自己和对方放在同一个地位上。有时候会故意示弱，还有的时候，对方很热情，但是自己很冷漠。这是因为历史遗留的问题，当自己收到对方的鼓励或者赞美的时候，自己会非常感动，无言以对，无可报答的感觉。这种感觉非常强烈，所以自己在某种层面上，为了避免收到鼓励，会有意或者无意地闹事，比如对对方忽冷忽热，刚热完就冷了。因为我还不太适应这种热的感觉。</p>\n<p>表意不清，推责的情况：有时候，我想对对方提出一个需求，但是感觉这个需求是不太合适的，所以我会用一种奇怪的方式表达出来。有一种逼迫对方必须问下去，或者照着来的感觉，其实是想让对方代自己做出这个不合适的选择。这个问题已经存在几年了。</p>\n<h3 id=\"内向者的围城部分-ai-改写\">内向者的围城【部分 AI 改写】</h3>\n<p>\"围城\" 这一概念意味着外界的人渴望进入却难以如愿，而身处其中的人又渴望逃离却难以抽身。然而，这并非一个恒定不变的状态 —— 并非所有的人都向往着进入这座城，也不是所有人都急于逃离。实际上，只有在你对这个题目产生兴趣，想要进一步了解它，但在真正开始阅读之前那短暂的一瞬间，“围城” 才真正存在。一旦你继续阅读下去，这座围城便不攻自破。</p>\n<p>张三（化名），是我高中的同窗好友，我们俩是班上仅有的两位在语文考试中不写作文的学生。一天晚上，他突然从教学楼跃下，让所有人震惊不已。毕竟，没有人曾对他做过任何恶意的事情。幸运的是，他安然无恙，并且至今仍与我保持着联系。在彼此的交流中，我们发现了一些或许在外人看来难以理解的事情。通过相互的理解和支持，我们更加能够体谅对方。于是，我们决定一起分享这些事情背后的故事，希望能帮助更多的人理解这种独特的心理状态。这段经历让我们意识到，每个人内心都有一座自己的 “围城”，而真正的解放在于找到能够理解和接纳自己的人。</p>\n<p>张三的故事是一段独特而又复杂的内心旅程，他是那种即使在黑夜中也能勇敢前行的内向者。不过，张三的勇气并不体现在通常意义上，而是以一种更为微妙的方式呈现出来：小时候，当一位老师表扬张三时，他反而羞愧难当，脸红到耳根，仿佛老师的赞赏是对他的某种惩罚；过年时，张三收到亲戚的红包，心中默默致谢，却未曾开口表达，在他看来，这些钱并非自己应得，因为他并未为这份礼物做出什么贡献；每次心理治疗结束后离开诊所时，张三总是侧身而出，这种方式成为了他特有的告别方式，治疗师后来解释说，这是他表达感谢和再见的独特方法；在学校里，张三几乎不主动与人交谈，他总是默默地坐在自己的位置上，除了偶尔去卫生间，几乎从不离开座位；即使内心充满了不安，张三也从未将 “我不说话是因为我害怕你们” 这句话说出口。</p>\n<p>张三总结了导致他那次冲动行为的根本和直接原因：</p>\n<ul>\n<li><strong>根本原因之一</strong>：对人际交往的恐惧。尽管他渴望与人沟通，却害怕每一个人。那次行为，某种程度上是他希望引起他人关注的一种象征性表达。</li>\n<li><strong>直接原因之一</strong>：感到无助。在自杀前半小时，他的情绪经历了从焦虑抑郁到极度冷静再到轻微兴奋的变化。在最初的阶段，他渴望与人倾诉，却又不敢开口，这种矛盾的情绪让他倍感煎熬。</li>\n<li><strong>根本原因之二</strong>：对世界的怀疑。高中时期，由于缺乏哲学教育，张三开始阅读一些网络文章，比如光子延迟选择实验、缸中之脑等，这些内容让他对现实产生了深深的疑惑。</li>\n<li><strong>直接原因之二</strong>：对死亡的好奇。他想知道死亡之后的世界会是怎样的（验证唯我论是否正确，死后精神是否仍然存在），甚至期望通过这种方式实现精神上的自由，即摆脱所有的恐惧和束缚。</li>\n</ul>\n<p>缸中之脑指的是，如果你的脑子被取出来了，放在一个缸里，通过仪器模拟出了外界的各种刺激信号，且你的意识仍然存在并能对此做出反应，那么你该如何知道你实际在不在这个缸里？我们之所以畏惧这个问题，是因为它有一点阴谋论的味道。这个话题的一种终结方式是，我们本来就是缸中之脑，这个 “缸” 就是我们除了脑子之外的肉体的部分。</p>\n<h3 id=\"死亡相关的话题\">死亡相关的话题</h3>\n<p>我认为死亡目前并不是一个沉重的话题。虽然它迟早会发生的，但只有发生了，才知道有多沉重。</p>\n<p>我在以前冷血的时候，曾有过一种这样的想法：当我看到别人劝一个人不要自杀的时候，我会和自杀者共情，而讨厌劝的一方。因为自杀是人家自己做出的选择，你压根不知道他之前经历了什么事情，为什么要用一句话就把人家打发了。另外，不是说自杀是不能谈的：</p>\n<blockquote>\n<p>误解一：讲述自杀是个坏主意，鼓励可以化解自杀。<br>\n事实：在人们眼里，自杀，是一件耻辱的事情，因此大多数有自杀意图的人都不知道该和谁说话。与鼓励自杀行为不同，公开讲述这些想法，可以给当事人带来其他的选择，或者有时间重新考虑自己的决定，从而防止自杀。<br>\n——<a href=\"https://www.psychspace.com/psych/viewnews-15939\">《自杀的 5\n个误解》</a></p>\n</blockquote>\n<p>要谈就谈详细一点。这里提出一个问题：自杀的人究竟是在逃避自己对生活的责任，还是因为责任感太大了，所以感觉自己根本担负不起呢。我认为两者是可以同时成立的，当我们在焦虑一件事情的时候，比如备考的时候，是在害怕考差了。如果没有责任感的话，根本就不会焦虑，考\n0\n分和我又有什么关系呢。詹姆士认为，自尊 = 成功 / 抱负，如果抱负太大了，自尊会低。</p>\n<p>当然，还存在着一种情况，就是在事中全去逃避了，事后才去反思。</p>\n<p>之前在知乎上看到一个挺有意思的动画，讲的一个人在死亡之后，会转生到同一个世界线的其他时间线上，记忆清除后变成另一个人。换句话说，我们在当前世界线上遇到的所有人都可能是同一个人。这种世界观可能会增强我们活下去的信念，因为所有相遇都是与同一个灵魂的重逢。</p>\n<h3 id=\"说话卡壳的原因部分-ai-改写\">说话卡壳的原因【部分 AI 改写】</h3>\n<p>说话卡壳的直接原因往往在于大脑尚未完成从思考到表达的转换过程，左半球额下回靠近外侧裂的布洛卡中枢没有被充分地利用。对于内向者来说，他们常常会在心中与自己对话，这就是所谓的 “想的模式”。在这种模式下，当他们思考完毕时，内心就会有一种任务完成的感觉，进而让大脑进入休息状态。而在 “说的模式” 下，当一个人真正说出话语时，才会感受到任务的完成，随之而来的是大脑的放松。想象这样一个场景：当我准备用声音来表达某个想法时，却不自觉地进入了 “想的模式”，结果是没有发出声音，但大脑误以为话已说完，从而停止了工作。有时候在口头聊天说话的时候，回一句话会回两次，因为不确定第一次是否属于在想的模式下的。</p>\n<p>在打字时，我们通常处于 “想的模式”，有时候我们也会小声念出文字，但这时声带并不会震动，我们只是用气息在模拟说话。如果尝试直接按照稿子朗读，则需要经过一番练习。例如，我曾尝试<a href=\"https://www.bilibili.com/video/BV1ef421z7y6\">录制一段音频</a>，结果发现同一句台词需要反复录好几次才能满意。这是因为过去我很少说话，所以现在说一会儿就会感到疲惫。通过这个经历，我意识到，要想流畅地表达自己，就需要不断地练习，让大脑和身体适应从思考到发声的转换过程。</p>\n<p>说话卡壳的根本原因是语料库和对话经验不够。</p>\n<p>说话声音小的直接原因是过去在一个大的空间距离下经历的有效对话频次少。</p>\n<h3 id=\"症状自述悖论部分-ai-改写\">症状自述悖论【部分 AI 改写】</h3>\n<p>当症状浮现时，我发现自己无法用言语准确地表达内心的感受；可一旦试图用语言捕捉这份体验，开始组织言辞之际，那份难以言喻的症状便悄然消逝；为了能够用文字记录下这份感受，我不得不放弃某些细节上的精确性，转而寻求一种大致贴切的描述方式。若要用数学中的图像来比喻这一过程：语言的描述就像是函数的微分，而症状本身则是魏尔斯特拉斯函数 —— 它处处连续，但却处处不可微。</p>\n<p><span class=\"math display\">\\[\nW(x) = \\sum\\limits_{n=0}^{\\infty}a^{n}\\cos(b^n \\pi x) \\quad a=0.5,b=13\n\\]</span></p>\n<p><img src=\"/blog/images/weierstrassa=0.5b=13.webp\"></p>\n<p>而最终描述出的症状，就像是函数 <span class=\"math inline\">\\(2\\cos(\\pi\nx)\\)</span>，虽然在宏观上与原本的症状相似，但细节之处却大相径庭。</p>\n<p><img src=\"/blog/images/2cospix.webp\"></p>\n<p>如果用<a href=\"https://dra-m.com/borromean-knot/\">博洛米结</a>（Borromean\nKnots）来观察这个问题：症状是处于实在界的，而语言则是属于象征界的。这两者之间，存在着难以逾越的鸿沟。</p>\n<h3 id=\"心理疾病的病名何时为结果何时为原因部分-ai-改写\">心理疾病的病名：何时为结果，何时为原因【部分\nAI 改写】</h3>\n<p>心理疾病就好比，你在一条狭窄的小路上遇到了一条看起来凶猛的蛇。这条蛇虽然是无毒的，但你心里没底，毕竟你之前已经被蛇咬过好几次了。现在要过这条路，心里七上八下的。吃药就好比，你戴上了一副高度近视眼镜，蛇的存在感瞬间减弱，你看不清它了，但走不走这条路还是得靠你自己拿主意。</p>\n<p>“他这人表现成这样，是因为他有抑郁症。” 这种说法有点像：“他这人一看到长条状的东西就发抖，是因为他有井绳病”；或者：“这个老烟枪一天咳到晚，是因为他得了肺炎”。心理疾病的病名更像是给症状贴了个标签，但并没有解释症状形成的原因。它们的信息量其实很大，是当事人经历过去事件后形成的创伤，以及现在表现出来的一系列异常的心理和行为，外显出来的综合性结果的缩写。但是从评价者的角度来说，这是一种对他人没有进行充分了解、信息量不够多的情况下，把病名作为一个信息熵大的名词，试图去合理化当事人现今表现出来的所有异常行为，来满足自己的安全需要。</p>\n<h2 id=\"黑历史与以往经历相关的话题\">黑历史与以往经历相关的话题</h2>\n<h3 id=\"散点移动平均和累积平均\">散点、移动平均和累积平均</h3>\n<p>散点图揭示了每一天的具体数据，它的优点和缺点都是太详细了。</p>\n<p>7 周期的移动平均至少要有 7 个数据，第 n\n天（n&gt;=7）在图表上展示的数据是第 n-6 天到第 n\n天的平均值。它的特点是受区间内的极端数据影响，而不受区间外的极端数据影响，揭示的是短期的趋势。</p>\n<p>第 n 天的累积平均是从第一天到第 n\n天的平均值。它的特点是，如果当天的实际数据大于前一天求的平均值，折线就会上升，反之会下降。它受所有历史数据的影响。</p>\n<p><img src=\"/blog/images/life.webp\"></p>\n<h3 id=\"做梦梦到旋律\">做梦梦到旋律</h3>\n<p>梦里梦到九个音符，醒来后通过网易云哼歌识曲，匹配到了<a href=\"https://music.163.com/#/song?id=1463130183\">《FIRE BIRD》</a>1 分\n06 秒的前十个音，它是动画《BanG\nDream!》里的一首曲子。我没看过这个动画，但和它前六个音的绝对音高和时值是完全撞上的，后半句有两个音是音高一样的，但是顺序不一样，最后一个音音高一样，这一句的总时值一样，而且这一句是在整首歌里重复出现的一句。如何解释这个现象呢，要么是以前在什么途径下间接的听过这首歌，造成有内隐记忆，做梦的时候内隐记忆从潜意识里被提取出来，但部分不一致，或者在以往编码的时候就不一致。或者以前没听过这首歌，没有关于它的记忆，但是有听过其他曲库的记忆，在对以往记忆进行创造性整合的过程中巧合地造成与现实一致，就像凯库勒做梦梦见苯分子的结构是环，是因为他有衔尾蛇的记忆，加上他一直在研究苯。再加上音符的排列顺序是有限的，撞几个音很正常，一些被误解为抄袭的音乐也是这样的，何况我只撞了六个。后来想起来是来自<a href=\"https://music.163.com/#/song?id=2003595837\">《Heaven’s falling\ndown》</a>的第一句。再后来，发现自己确实是在一个途径下间接地听过这首歌。</p>\n<p>之前很少出现过做梦梦到旋律的情况，有个位数的次数，大部分没有撑到记住然后醒来。</p>\n<p>后续又梦到了一次不一样的：</p>\n<blockquote>\n<p>31356 6653223<br> 31356 673737i<br> 31356 6653232376<br> 712\n143771 (7 底下加点)</p>\n</blockquote>\n<p>但没有匹配到特别像的，后来想起来可能是来自以前听过的一首歌（<a href=\"https://music.163.com/#/song?id=1936043266\">《词不达意》</a>1:20\n到 2:06）</p>\n<h3 id=\"抽奖-累积话费-3g-违约-京译精选的套路方式\">抽奖 - 累积话费 - 3G\n违约 - 京译精选的套路方式</h3>\n<p>起因：</p>\n<p>出青年路地铁口，同济医学院附近，被两个人要求用微信扫码，说是点个赞，抽奖，中了一个三等奖，平板的名额。被其中一个人带去万松园横路人行天桥下的 “网点”。里面有一个被称为主管的男子，他说天下没有免费的午餐，要求我签合约。当时没有拍照，类似是这样的（图源抖音）。</p>\n<p><img src=\"/blog/images/what.webp\"></p>\n<p>合约有三种可以选择的方式。第一种方式是计算手机号累积的话费，一直累积到\n4800 元，不限时间，但是必须保证手机在 4G 和 5G 网的范围内，在 2G 和 3G\n网的范围内会有违约金。他说这个目的是为了保证用户一直不转网，如果换号了还是在本运营商里就可以，还给我看了一个其他用户出现违约金的截图。该合约需要话费账单累积到\n4800 元才能结束，不限时间，在结束之前一直有限制 4/5G\n网络的违约金限制，如果违约会有短信通知。</p>\n<p>我因为担心会有违约金，所以选择第三种方式。第三种方式是用一个平台，用上面的购物币买那个平台上的东西。中途他引导我下载一些其他能贷款的平台，如美团、京东、安逸花，试图从上面贷款。</p>\n<p>最后在美团平台上借款 1000 元（这 1000\n元先到了我的银行卡，后通过支付宝转入对方账户，我在美团平台上需要还款），用花呗给对方付款\n2000 元。这 3000\n元最后到了一个叫 “京译精选” 的平台上，合约的内容是必须在那个平台上用这\n3000 购物币消费，用一个不到一千元的平板做交换。</p>\n<p>相当于我贷款 3000 换了一个不到 1000 的平板，加上可能为真的 3000\n购物币。</p>\n<p>我还不确定这件事情能不能被定性为骗局：</p>\n<p>矛盾：</p>\n<ol type=\"1\">\n<li>我本来准备去献血的，结果摊上这个事情。我还以为上次献血换来的 “运气” 到了，那两个人看到中奖也惊讶了一下</li>\n<li>那个抽奖页面的域名好像不是运营商官方的，域名中含有 a 和横杠，以 org\n结尾，但忘记具体是什么了</li>\n<li>那两个人本来是让我自己去营业厅兑换的，后来是其中一个人领我去营业厅</li>\n<li>《京译精选》APP 内显示的备案号是：粤 ICP 备 2021067300\n号 - 4A，查了一下是真的</li>\n<li>不知道合约有没有效力，虽然对方在线下是有实体店的，但是实体店的招牌上，包括合约上都没有任何一个运营商的商标。他没有给我留一份合约，我也没有要</li>\n<li>收款方是武汉市江汉区金鑫通讯设备经营部（个体工商户），在用支付宝付款的时候看见手机出现一个弹窗 “正在安装证书”。这里的证书是指支付宝的安全证书，在安全中心小程序 -&gt; 更多服务 -&gt; 数字证书可以查看：根据监管部门的要求，安装数字证书可提升余额支付单日额度，可能是一个反诈的东西。他直接用的是我的付款码，加上对方中途老是抢手机，太急躁了，聊天也聊得过于多了。</li>\n<li>按我的性格，对方是主动的，一直有人在和我聊天分散注意力，且店里还放着音乐，我是被动的。签合约的时候，在那个环境下，我中途也想走的，说能不能取消，在此之前已经按了一个手印了。他说是成年人了，签了就不能取消，一直问我有没有听懂，我回答的都是听懂了。我中途有几分钟是卡壳没有说话的，他说他工作这么多年，从来没见过这样的人，和他的一个老表一样内向，但是那个老表起码能够正常地和人交流。我当时只想逃离那个环境，结束这件事，但是怕有直接走了会什么不合适的地方（因为我之前已经按手印了，加上他一直在催我说话），所以最后我还是让对方用手机操作了。中途还有美团的\n950133\n风控打电话了，但是那时候手机在他手上，他回复对方并问我：没有看过刷单的视频，什么都没有。</li>\n</ol>\n<p>证据有短信和 APP\n里的借款记录，我给那个男子发身份证照片的微信聊天记录（因为贷款需要实名，由于我手机的原因上传不了照片，所以他帮我拍照），平板，和两个用支付宝转账的记录，京译精选的\nAPP。我当时很紧张，压根没想到给合约拍照。他还拍了一张让我真人拿着的、按过手印的合约照片，但是那个合约原本是我选择第一种方式的，后来他把第一种方式的合约撕了，说这已经没什么用了，保留了一张我选择第三种方式的合约。</p>\n<p>结果：</p>\n<p>我从一开始就注意到了事情的所有细节。就像上一次确凿受骗一样，上次是被骗了\n200 现金当路费，用一个手表交换，对方报的手机号是\n13x55667788，这正常人都会怀疑的，但是出于一种助人的情节我还是相信他的。这次没有走，首先是自己贪图小利，其次是对方说的一句话：“你已经是成年人了，合约签了就不能取消”。</p>\n<p>在百度贴吧上搜到了一个<a href=\"https://tieba.baidu.com/p/8997885141\">一模一样的案例</a>。我把帖子截图发给对方，并要求退款，次日上午到店退款并还款成功，并签了退款协议，一式两份。这相当于我这辈子干的第一件硬气的事。</p>\n<h3 id=\"旧事\">旧事</h3>\n<p>最痛苦的一段时间，就是刚复学住寝室的时候，每天过得心如刀割。因为我不敢和他们说话，所以白天能避开就避开，但是别的人多的地方我也不敢去，所以就在学校的一片树林里的一个凳子上坐着，晚上插着耳机听《秦皇岛》，基本都听吐了，还是不行。他们晚上在打游戏，我也不好意思给他们提意见，住了至少有一两个学期，基本一句话都没有说，所以最后才搬到校外了。更痛苦的是开学的时候，因为我没有寝室钥匙。高中有一天中午还被锁在寝室里了。我的昨天永远都是黑历史。乐观一点的说法就是一直在进步。</p>\n<p>有时候我会出现全身刺痛的情况，猜测的原因有两点，太久没有运动，没有出汗了（即使在前天晚上洗了澡也会出现这种情况）+ 惭愧。最强烈的一次就是休学的那次，当辅导员提起 “黄若凡在网上\nxxx 的时候”，我那时候是全身发痒和发痛的，表现得确实不像正常人。休学是\n2021 年上半年，但是我直到 2023\n年下半年才变得愿意说话，那时候父亲来看我，我还把他弄哭了，因为他觉得自己太委屈了，怎么有这样的儿子。有时候，我在看自己以前写的东西的时候，也会出现这种情况。说不定当有人在我面前提起这个站点的时候，可能也会出现。所以这是一件非常矛盾的事情，既想有存在感，又害怕有存在感。</p>\n<p>初中时期的执念：我觉得有必要把这些事重新提一遍。因为我第一次写童年回忆录就是在初中写的，回忆了搬家之前的经历。那说明我初中时期是有委屈的，但是这个委屈一直都没有表达出来，在这之前是写过一次的，后来又被我删了。现在我觉得没必要删了：</p>\n<ol type=\"1\">\n<li>和班上性子最野的五个同学分到一个组，他们天天上课讲黄色笑话。牵连我，老师认为我没有听讲</li>\n<li>数学老师认为我没有听讲，批评我。我现在还记得，当她报考试成绩，报出我满分时，她是什么表情</li>\n<li>英语老师由于我们组闹，让我回答 PPT\n上的问题，我没有回答上来，她认为我没有听讲。事实是因为换座位我调到后头了，我眼睛近视，看不见</li>\n<li>语文老师罚我蹲着写作文。事实是我不会写，写不出来</li>\n<li>地理老师挺好的，但是有一次上课坐对面的同学闹我，结果到最后只有我被叫到办公室了。他拿起了成绩表，发现我排在中间，然后说：怪不得你成绩差。这纯属于是自己倒霉，因为我在之前都是排在前几名，就这一次失误了，刚好被他撞上。这件事情的结果是我在办公室哭抽抽了。</li>\n<li>有一个人欺凌我，但是我有一次给他反击了。</li>\n</ol>\n<p>初中我还当过生物课代表，是生物老师为了锻炼我。说明我那时候也不是完全怂的，但是也仅限于和同桌说话，听讲的时候不敢抬头太高，不敢看老师眼睛，当然其他所有人的眼睛都不敢看。现在至少在多数情况下都敢看人眼睛了。</p>\n<h3 id=\"家族黑历史ai-改写\">家族黑历史【AI 改写】</h3>\n<p>黃化某者，郧陽府之巨賈也。駕舳艫溯漢水而上，歷險巇至於秦地，購蔬果如薯葯、龍須草之屬，復轉輸漢口埠頭鬻賣，獲利頗豐，儲鏹以囊盛之。迨清季，化某卒，遺孀康書芝與三男。一夜，蒙面蟊賊夤夜來襲，持械脅迫，窮凶極惡，迫其供出財寶之所。康氏不勝其怖，遂洩密所藏金銀之地，在一處幽邃岩穴之中，賊眾悉數奪之而去。族人聞此變故，義憤填膺，謀以報之。遂駕扁舟，偽為行商，誘賊出沒。二賊見狀，一人臨舟探視，一人守岸瞭望。舟中伏甲突起，賊首立斷，拋屍於漢水之中，瞭望者惶遽遁逸，不知所終。自此家道衰落。康氏遷居異鄉，至趙川營飯鋪以度日，後為其子迎歸奉養，得以終老。太史公曰：清季之際，婦人之位卑賤，康氏長罹纏足之苦，失侶無依，而獨力撫孤，劬勞備嘗，誠可哀也。</p>\n<h3 id=\"年中总结ai-改写\">2025 年中总结【AI 改写】</h3>\n<p>在大学的旅程里，有一门课《人生风险与社会保障》成为了我学术生涯的一颗璀璨明珠，以\n99\n分的成绩高悬于我的成绩单之上。这似乎是在提醒着我，在过去的岁月中，生活的不确定性一直伴随着我，而我也因此更加深刻地认识到社会支持体系的重要性。</p>\n<p>回望 2024 年 6\n月的生产实习经历，即便是在紧张到发抖的情况下，我还是带领了一个三人小组获得了优秀的评价。这段经历不仅证明了我的心理承受能力，也让我感激那些在我身旁提供无私帮助的伙伴们。然而，或许是因为过度兴奋，我未能及时向他们表达谢意；或是出于某种内心的矛盾，我选择在此时此刻用文字来传达那份迟来的感谢。</p>\n<h3 id=\"年中总结\">2024 年中总结</h3>\n<p>你一排单词只认得 <code>⭐Stars</code>\n，不知道给浏览器装一个翻译插件，不知道 node_modules\n是什么意思，命令行经验仅限于 <code>adb</code> 和 <code>fastboot</code>\n刷机。但你还是建了一个仓库，把博客框架 Hexo\n折腾了下来，再折腾到仓库里面，这就是你在 2021 年 3 月 6 日加入 Github\n时的情形。你成功搭出来了属于自己的博客界面，并可以通过\nruofancooh.github.io 访问。</p>\n<p>但是后来你删库了。因为你的自信不足，不敢去折腾配置文件，加上不知道该写什么东西。在几十天之后，你休学了。在休学的一年里，你除了看了一点高数书之外，什么事情都没干，现在<strong>忘完了</strong>。但不管是刚开始时的第一个初心，被你忽略的第二个初心，不想捡起来的第三个初心，已经过去的第四个初心，当前的第五个初心，中途放弃的第六个初心，以及将来还没来的第七个初心，<strong>这些初心你确实都还能想起来</strong>。你的初心总数加起来能绕水星\n61.75 圈、绕火星 44.34 圈、绕金星 25 圈、绕天王星和海王星 6\n圈、绕木星两圈、绕土星两圈半。“不忘初心” 和 “砥砺前行” 这两个词对你来说是互相矛盾的。</p>\n<p>在 2023 年 5 月 26 日你 commit 了 39 次。这是你《Web\n前端开发技术》课程结束前的一段时期，你不甘平凡。你重拾 Hexo\n框架，但不知道可以开一个本地预览服务器，所以在每次修改配置文件后，都重新渲染一次并把它\ncommit 了上去。你最后把框架渲染出来的东西当成大作业提交了，总成绩不到\n80。</p>\n<p>你第一次尝试使用 <span class=\"math inline\">\\(\\LaTeX\\)</span>\n语法来打出数学符号和公式，是在《概率统计里几个容易混淆的概念》这一篇笔记里。《概率论与数理统计》是你大学生涯里目前得分最高的一门课，有\n97\n分。后来可能是因为太寒碜了，感觉没有什么价值，所以你把它删除了。但是仍然保留了一张图片：</p>\n<p><img src=\"/blog/images/alpha-point.webp\"></p>\n<p>你给网站买了个独立域名，是在 2023 年暑假 7 月。你看到 QQ\n群里发了下学期的课程教材《剑指大数据 ——Hadoop\n学习精要》，所以你买了这本教材，并提前在自己电脑上装了一台虚拟机，为\nUbuntu 操作系统。在暑假里，你总结了之前的刷机经验，并问 ChatGPT\n了解了安卓的历史。为了让手机和电脑通信，你首次尝试使用\n<code>axios</code> 向 <code>flask</code>\n发请求，虽然你一点计算机网络基础知识都没有。后来你越来越浮躁了。</p>\n<p>你写笔记花心思最多的一门课是《计算机网络技术》，也是在大学前三年里，除了《概率论与数理统计》《高等数学\nI2》（最后放弃了）《大学物理 II1》（最后放弃了）《大学物理\nII2》（中途放弃了）《大学英语\nI3》（中途放弃了）《数据库系统原理》（最后放弃了）《马克思主义基本原理》（中途放弃了）之外，你唯一真正花心思去学的一门偏理论的课。但是你不考研（四门英语课挂了两门，一门\n60\n分），在短期之内也不知道它有什么用处。所以它最后被归结到了 “永远不看系列”。</p>\n<p>你首次意识到看日志的重要性，是在搭建 Hadoop\n高可用集群的过程中。通过看 ZKFC 和 sshd 的日志，你发现了通信失败是因为\nSSH 密钥格式不匹配。后来在你写 Python\n程序的过程中，你开始有意识地记录日志。你首次意识到看文档的重要性，是在使用\nFlume\n的过程中。虽然你英语单词量不够，但是借用浏览器的 “篡改猴” 和 “沉浸式翻译” 插件，你成功看明白了各个配置项是什么意思，并在自己的机器上成功完成了实验。</p>\n<p>你笔记分类的解决方案经历了几番变迁：开荒时写得很少，不知道该怎么分；而后按个人意志 / 文体分类，分成讲概念的、实践的、没有功利价值的好玩的；再后按课程 / 技术分类，这样分出来的类可能一个类里只有一两篇笔记。后来你才想到笔记是用来看的，最近不看的东西你永远也不会看。干脆把常看的东西汇聚到一起，即 “高内聚，低耦合”。</p>\n<p><code>404.html</code>\n是你这一年里做出来最精细的东西，你把这个文件的字节数精确到了 413696\n个，换算过去正好是\n404KB。虽然大概没人发现，但只要在域名后面随便输一个，再打开浏览器开发者工具的控制台，你会看到一张纸片人。</p>\n<h2 id=\"童年回忆录之故地重游部分-ai-改写\">童年回忆录之故地重游【部分 AI\n改写】</h2>\n<p>第 5 版修订说明：</p>\n<ul>\n<li>实现方式：对第 1、2 版的补遗，加上现场照片</li>\n<li>时间范围：2001-2012 年</li>\n<li>思路：在那里看到了什么，想到了什么</li>\n</ul>\n<p>凡例：</p>\n<ul>\n<li>样貌变迁：该地方相比以前变化的程度\n<ul>\n<li>★★★★★：重要记忆点没了</li>\n<li>★★★★：重要记忆点还在，但周边的布局大变</li>\n<li>★★★：重要记忆点还在，但周边的样貌大变</li>\n<li>★★：看不出来，推测是变了</li>\n<li>★：宁愿没有变</li>\n</ul></li>\n<li>记忆保留：现在可以回想起关于这个地方的记忆量\n<ul>\n<li>★ 有印象，但是想不起来事件</li>\n<li>★★ 可以想起一两件事件</li>\n<li>★★★ 可以想起三至五件事件</li>\n<li>★★★★ 可以想起六至十件事件</li>\n</ul></li>\n</ul>\n<p>修改版本： 用 AI\n重写后的文字依然空洞，原文本就缺乏实质内容。每次完成这类修改都让我产生删除的冲动，始终不明白为何要写这些无意义的文字。大概我这人就是改不掉回望过去的习惯吧。</p>\n<p>调整说明：</p>\n<pre><code>去除\"矫情\"等自我评价词汇，改用客观描述\n\n将情绪化的\"沉溺于过去\"改为更中性的表达\n\n简化冗余表达（如合并\"写出来之后就立马想删\"为\"产生删除的冲动\"）\n\n用\"改不掉...习惯\"替代绝对化表述，减弱负面情绪浓度\n\n整体保持冷静陈述语气，避免陷入自我否定的循环</code></pre>\n<h3 id=\"第一站篷布厂旁\">第一站：篷布厂旁</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：无（约 2001-2002）</p>\n<p>十堰，这座坐落于湖北省西北部的地级市，位于秦岭主峰东南方向约 200\n公里处。这里属于典型的亚热带季风气候，夏季炎热多雨。汉江穿城而过，碧波照映着两岸青山，宛如一幅流动的山水画卷。作为南水北调中线工程的水源地，十堰确实是一座与水息息相关的城市，正如其名所示。</p>\n<p>“堰” 字道出了这座城市的特色，它指的是拦河筑坝的水利工程；而 “篷布” 则是防雨遮阳的材料。我人生的第一年，就是在篷布厂旁度过的。如今，那片厂区已被高楼大厦取代，连带着我幼时居住的山坡，也被盖着篷布的卡车一车车运走。这或许正是十堰这座 “车城” 的特色 —— 作为东风汽车的发源地，城市的发展如同车轮般滚滚向前。</p>\n<p>虽然那段时光已无从记起，但作为人生的第一个居所，它在我心中始终占据着特殊的位置。以下是我们的现场记者在山脚下拍摄到的画面：</p>\n<p><img src=\"/blog/images/old/1.webp\"></p>\n<h3 id=\"第二站源园公园\">第二站：源园公园</h3>\n<p>样貌变迁：★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>这座公园依地势而建，南高北低，如同七层梯田般错落有致地铺展开来。中央的花坛将公园一分为二，西临人民南路，东接源园路。从南向北走，正是上学的方向。正值学期末工作日的下午，公园里多是休闲的中老年人，偶尔可见带着孙辈的爷爷奶奶。此时中小学生们都在上课，公园里自然见不到他们的身影。</p>\n<p>最南端的圆形广场上，红色六角星图案镶嵌在地面。儿时常有人在这里抽陀螺，鞭声清脆。记得有次和父母中的一方在此，被要求给另一方打电话，我却握着话筒迟迟不敢开口 —— 尽管面对面交流毫无障碍，电话却总让我莫名胆怯。</p>\n<p><img src=\"/blog/images/old/2.webp\"></p>\n<p>中间几层总是热闹非凡：广场舞的旋律此起彼伏，戏曲票友的唱腔悠扬婉转，树荫下打牌的老人家们谈笑风生。</p>\n<p>最北端是 “园源爱乐乐团” 的排练场地。民间艺人们围坐在亭子下，讨论着用 F\n调还是 G\n调。总指挥站在前方，没有指挥棒，徒手打着节拍。随着他的手势，二胡、管乐、笛子齐鸣，合唱队唱起了《没有共产党就没有新中国》《打靶归来》等经典老歌。</p>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/2.mp4\" type=\"video/mp4\">\n</video>\n<p>走出地下通道，前方是横跨道路的人行天桥，穿过天桥便是青少年宫。我曾在这里上过学前班。那时妈妈在附近的餐馆工作，每天下班后总会来到青少年宫，给我买几串香喷喷的羊肉串。那炭火烤制的香气，混合着孜然和辣椒面的味道，至今想来仍觉唇齿留香。</p>\n<p><img src=\"/blog/images/old/2.1.webp\"></p>\n<h3 id=\"第三站人民南路-襄渝线铁路\">第三站：人民南路 - 襄渝线铁路</h3>\n<p>样貌变迁：★ | 记忆保留：★（约 2005-2010）</p>\n<p>站在人民南路与襄渝线铁路交汇的人行道上，俯瞰下方的铁轨，那种深邃的距离感总让人屏息。铁轨向远方延伸，通向未知的深处。不时有列车呼啸而过，车轮与铁轨碰撞发出规律的轰鸣，车厢带起的风掀起一阵气浪，转瞬即逝的身影在视野中留下一道模糊的轨迹。</p>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/3.mp4\" type=\"video/mp4\">\n</video>\n<p>这个画面时常潜入我的梦境：一条幽深的沟壑，如同大地裂开的缝隙，人们像是坐在水上滑梯上，顺着陡峭的坡面滑向深处。这奇异的景象，或许是我对铁路的深刻印象与附近水库闸门的记忆交织而成的幻象。</p>\n<h3 id=\"第四站新安巷-路口\">第四站：新安巷 - 路口</h3>\n<p>样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）</p>\n<p>记忆中的巷子，红砖裸露的墙面斑驳沧桑，道路两侧空空荡荡。如今，鲜亮的油漆覆盖了岁月的痕迹，坚固的铝合金护栏整齐地守护着行人安全。</p>\n<p>从金沙路拐进新安巷，没走多远就会遇到第二个路口，上下两条路在此分道扬镳。记得小学时，班主任提出要来家访。想到家里狭小的空间还没来得及收拾，母亲委婉地推辞了。最后，我们在靠近金沙路的路口与老师道别，夕阳将我们的影子拉得很长很长。</p>\n<p><img src=\"/blog/images/old/4.webp\"></p>\n<p>我常常独自在那个斜坡上练习拍球。篮球在水泥地上弹跳的节奏，与坡度的起伏形成奇妙的韵律。虽然我对规则一窍不通，但球仿佛懂得我的心思，随着手掌的力道上下翻飞。放学后，每当同学邀约打球，我总是不忍拒绝。</p>\n<p>记得有位住在附近的同学，邀我在他家下象棋。他的棋路狂放不羁，全然不顾规则。我耐着性子陪他下了一盘又一盘，直到最后，看着他又一次违规落子，我终于按捺不住，一把掀翻了棋盘，棋子哗啦啦散落一地。</p>\n<p><img src=\"/blog/images/old/4.1.webp\"></p>\n<p>最令我难忘的是那个中午。我正走在上学的路上，刚拐进里面的路口，一声惊雷般的巨响在耳边炸开。我猛地回头，看见她倒在血泊中，散乱的头发像一把浸湿的拖把。说来奇怪，这一幕并未在我心里留下阴影 —— 死亡对我而言并不可怕，我甚至走近看了她一眼。理智告诉我该打\n120，可父母都不在家，我又因社交恐惧而犹豫不决。在路口徘徊了十几分钟后，我最终还是走向了学校。傍晚回家时，那片血迹已被石灰掩去。母亲后来总绕开那条路走，我却依然如常。</p>\n<p>说到有趣的事，莫过于在这个路口玩纸飞机。我会精心折好每一架飞机，用力掷向天空。它们在空中划出优美的弧线，时而盘旋，时而俯冲，能滑翔几秒之久，仿佛在蓝天上描绘着看不见的图案。</p>\n<h3 id=\"第五站人民南路-人行道\">第五站：人民南路 - 人行道</h3>\n<p>样貌变迁：★★ | 记忆保留：★★（约 2005-2010）</p>\n<p><img src=\"/blog/images/old/5.webp\"></p>\n<p>在这个熙熙攘攘的路口，摆摊的小贩们早已成为一道熟悉的风景。父亲和我曾也是其中一员，我们支起简易的地摊，卖着家里的旧书和旧报纸。在那些泛黄的纸页间，有一本我特别钟爱的书，里面记载着武当山上的各种神话传说。虽然心头不舍，可最后还是将它摆上摊头 —— 好书如故事，合该在江湖流转，去遇有缘的人。</p>\n<h3 id=\"第六站301-省道-红门铺村入口\">第六站：301 省道 - 红门铺村入口</h3>\n<p>样貌变迁：★★★★ | 记忆保留：无（约 2002，2005-?）</p>\n<p>这条路最初是石子铺成的，没有沥青和护栏。山路两侧的树木稀稀拉拉，地上满是红沙，不像现在这样被厚厚的落叶覆盖。那时候，路上但凡能当柴火的东西，都会被附近的人家捡回去烧。</p>\n<p><img src=\"/blog/images/old/6.1.webp\"></p>\n<p>在我一岁那年，父母和奶奶在这个路口举行了一场隆重的抚养人交接仪式。不过，关于这里的其他记忆，我只在几张老照片中见过，那是父亲用柯达胶卷相机拍的。那部相机不仅记录了他九十年代去深圳打工的情景，还留下了我一岁之前的许多照片。我还翻过一本他收藏的摄影书，如今虽然有了手机，拍的照片反而少了。</p>\n<h3 id=\"第七站红门铺村-老房子-1-号\">第七站：红门铺村 - 老房子 1 号</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★（约 2002-2005）</p>\n<p>沿着山路往下走，路上满是落叶，踩上去有些滑。路中间有一棵松树，已经在那里默默挺立了几十年。</p>\n<p><img src=\"/blog/images/old/7.1.webp\"></p>\n<p>走了不到几分钟，就能看到一间土房子的遗址。如今它早已倒塌，只剩下零星的瓦片散落在地。关于房间的布局，我的记忆已经模糊不清。但奶奶还记得一件事，她说，我曾经从这个崖上摔到了另一户人家的后岩沟里。</p>\n<p><img src=\"/blog/images/old/7.2.webp\"></p>\n<h3 id=\"第八站茅箭区实验学校\">第八站：茅箭区实验学校</h3>\n<p>样貌变迁：★★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>在这所学校及周边的记忆中，除了几张泛黄的奖状和荣誉证书，最让我怀念的莫过于大家聚在一起斗陀螺的场景。每到放学，校外的陀螺摊子旁总是人声鼎沸，五颜六色的陀螺在大盘子上旋转，发出阵阵 “嗡嗡” 的鸣响，同学们的欢声笑语此起彼伏。我常常站在一旁，羡慕地看着他们激烈地比赛，自己却鲜少参与，只是悄悄地在一旁练习，希望能有一天也能加入他们的行列。</p>\n<p>转学那天，天空灰蒙蒙的。班主任站在校门口，脸上露出一丝无奈的微笑，提到有几个成绩优异的学生也转学了，她的话语中透出对这座小城的留恋。我站在校门旁边，心中一片茫然，即将踏上一条未知的路，却不知道该如何启程。</p>\n<p>然而，转学的具体原因，以及父亲的工作变动，我是在多年后才逐渐明白的。那些年，父母从未向我解释过缘由。当我终于鼓起勇气询问时，父亲的回答让我一时语塞：“你从来没问过我，说明你是不关心我的。” 我点了点头，心中五味杂陈。确实，当时的我未曾主动去了解，仿佛对一切都漠不关心，但内心深处，我其实渴望着被理解和支持。我的父亲又不是造原子弹的，不需要他去隐姓埋名。他只是一个平凡的、内心柔软的普通人。他默默地为家庭奔波，尽力维持我们的生活。如今，我完全理解他的艰辛，但也遗憾当时没能得到他的解释。那时的我，只是一个渴望被关注的孩子，一句简单的说明，或许就能驱散我心中的迷雾，让我在成长的路上多一份理解与从容。</p>\n<h3 id=\"第九站新区小学\">第九站：新区小学</h3>\n<p>样貌变迁：★ | 记忆保留：★★★（2010-2012）</p>\n<p>我的童年回忆录在初中时期初具雏形，因此小学那段时光在我的记忆中并非一片灰暗，而是光明与阴霾交织，大约各占一半。</p>\n<p>刚转到新学校时，我感到前所未有的不适应，主要源于几个方面。首先是作业的布置方式：以前的学校，作业总是整齐地写在黑板上，一目了然；而新学校的老师习惯口头布置，我还没养成随时记录的习惯，常常漏记。其次是方言环境的冲击：虽然我会说方言，但新学校的课间充斥着方言的喧嚣，与以前学校普遍使用普通话的氛围截然不同。我坐在人群中，听着熟悉又陌生的语调，感觉自己像个局外人。最后是那种挥之不去的陌生感：初来乍到，面对陌生的教室和面孔，我感到深深的孤独。</p>\n<p>不过，有几个同学主动和我搭话，这让我逐渐适应了新环境。我还交到了几个好朋友，甚至开始主动找他们一起玩，当然，仅限于放学同路的时候。毕业照上的我也是笑着的。虽然班上的同学并非我都喜欢，但直到上初中后，我依然能默写出他们所有人的名字。这个把全班同学名字默写一遍的习惯，一直被我保留到了高中。</p>\n<p>小学时，班主任要求我们每人准备一个摘抄本，用来摘抄一些优美的文字。摘抄是从前往后写，而作文则是从后往前写。那个本子里有一篇作文被涂抹得乱七八糟，那是我情绪崩溃时写下的。那篇作文是关于一次感恩讲座的观后感。主讲人讲得声情并茂，当他说到 “和你们的亲人拥抱一下，并说一些话” 时，台下的许多同学都哭得稀里哗啦的。然而，我却一滴眼泪都没流，甚至觉得主讲人有些过于做作，有一种非常荒诞的感觉。从那时候起，我就觉得这只是一场形式主义的会议。或许可以说，我是个冷血的人吧。至于我提前通知了父母，但那天他们谁都没来，这件事反而显得不那么重要了。</p>\n<h3 id=\"第十站红门小学\">第十站：红门小学</h3>\n<p>样貌变迁： | 记忆保留：无（约 2002-2005）</p>\n<p>“黉门” 原指学校的门，后引申为学校的代称。这一地名在民国时期就已存在，或许因为 “黉” 字较为生僻，后来改成了 “洪”。近年来，可能是为了避免与天地会的名称冲突，又将其改为 “红”。不过，公交站名至今仍保留了原来的 “洪” 字。</p>\n<p>这所小学曾采用混龄教学，不同年级的学生在同一间教室上课。有趣的是，我在上幼儿园之前就经历了 “第一次一年级”—— 那时奶奶在学校教我认字，遇到不认识的字，她就会向老师请教。如今，这所学校已不再热闹，学生寥寥无几，老师的人数甚至超过了学生。</p>\n<p>有一天中午，我没有回家，奶奶来接我时，我的回答是：“因为老师没说让我走，所以我就没走。” 这件事似乎说明，我从小就是一个非常守规矩、甚至有些死板的人。</p>\n<p>这里有一个关键点：我是在这所学校学会说话的。在此之前，我虽然经历过一次分离，但不确定是否造成了心理创伤。这种不确定性让我思考，我的性格或许并非后天形成，而是通过\nDNA\n遗传下来的。如果真的可以这样解释，我反而会感到轻松许多。但是心理学告诉我们，人格是在遗传和环境的交互作用下形成的。</p>\n<h3 id=\"第十一站车城南路-加油站旁\">第十一站：车城南路 - 加油站旁</h3>\n<p>样貌变迁：★★★★ | 记忆保留：★★★（约 2005-2010）</p>\n<p>当我上幼儿园时，曾独自跑回家，第一次在这条没有护栏的马路上冒险穿行。马路对面，曾经宽阔的台阶如今已被房屋取代，只剩下窄窄的一排。</p>\n<p><img src=\"/blog/images/old/11.1.webp\"></p>\n<p>沿着这些台阶向上，是一条充满岁月痕迹的小巷。老式建筑依旧斑驳，仿佛时光在此停驻。巷子深处，蓝色的施工铁皮遮挡了视线。</p>\n<p><img src=\"/blog/images/old/11.2.webp\"></p>\n<h3 id=\"第十二站新安巷-地下室\">第十二站：新安巷 - 地下室</h3>\n<p>样貌变迁：★★★ | 记忆保留：★★★★（2010-2012）</p>\n<p><img src=\"/blog/images/old/8.webp\"></p>\n<h3 id=\"第十三站红门铺村-老房子-2-号\">第十三站：红门铺村 - 老房子 2\n号</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★★（约？-?）</p>\n<p>这片树林曾经是一间砖房，带有一个宽敞的院子，院子里还有一片菜园。爷爷在那里养了许多肉用动物，包括鸡、鸭、鹅、猪和兔子。兔子的窝建得很高，得爬梯子才能上去。我曾用白菜喂过它们，对它们那分瓣的嘴印象特别深。父亲和我还一起养过一群小鸭子，可惜后来大多数都没能活下来，唯一幸存的一只被带到了这里继续养。它长得很大，但某一年过年时，它被煮成了一锅汤。</p>\n<h3 id=\"第十四站柳林路\">第十四站：柳林路</h3>\n<p>样貌变迁：★★★★ | 记忆保留：无（约 2001-2002）</p>\n<h3 id=\"第十五站百二河水库-周边\">第十五站：百二河水库 - 周边</h3>\n<p>样貌变迁：★★★★★ | 记忆保留：★★★★★（约 2005-2010）</p>\n<p>当正路不通时，我便绕道从南边的小路进入水库。岸边原本宽阔的台阶如今被石制护栏取代。沿着水库走几百米，斜坡上曾是我的家，如今已成平地。邻居家的大圆台子和楼房也消失了，取而代之的是一座公园。这些地方曾出现在我童年的回忆录中，如今它们的消失，也标志着我的童年走到了尽头。每一次回望，都是与过去的告别，也是与未来的相遇。</p>\n<p>水库好像最近施完工了，等下一次再拍照。</p>\n"},{"title":"汽车线束操作工","date":"2025-09-14T12:00:00.000Z","_content":"\n## 何为线束\n\n一束铜导线捆在一起，少则1根，多则200根。每一束线上都绑定了一个软塑料卡片，称为单子。单子上标注了这束线所属的订单号，直径，塞子型号，端子型号等信息。\n\n对于同一束线，它们的长度、直径是相同的，但露头的长度可能有所不同。如一头都露得长，一头都露得短。\n\n## 何为端子\n\n一个金属的接触件，一端需铆压到铜线上，另一端插到空插头上。\n\n有针型的和环形的。\n\n不同型号的线可能用同一型号的端子。\n\n## 安全生产\n\n机器出问题，先断电。通电时手不要伸进机器。\n\n铆压机的模具有温度，取下来的时候注意也不要伸进去。\n\n## 穿密封塞\n\n带孔塑料塞子，大头向下，穿到露头的铜线上。小头的一端可能离外皮的末端极小一段距离，或离一小段距离，或平齐。露头的程度视端子的型号而定，塞子本体视塞子型号而定。\n\n穿塞和穿线号管、铆压之前，都要确保其型号与单子上标注的一致。\n\n机器比手快，用手穿有时铜丝会扎手指。但有些塞子只能用手穿，因为塞子的种类比穿塞机的数量多。穿塞机-1,n-塞子型号-1,m-塞子本体。端子本体-n,1-端子型号-m,1-铆压机。\n\n流程：\n\n1. 把架子上刚运来的线束，根据塞子型号进行初步地择，目的是把它们放在对应的穿塞机旁边。\n2. 找一台机器，准备穿塞。\n3. 在机器旁，或者手穿时进行二次择线，把相同端子型号的线放在一起，以及把不同束线的穿塞一端放在同一头。这样在穿塞时便于自己操作，在穿塞后便于铆压工操作。\n4. 穿塞之前，注意对照卡片上线束的露头长度，如果两头长度不一样，但一眼看不出来，就手工比对一下两头的长度，确保穿的是正确长度的一头。\n5. 穿塞。尽量不要把线的另一端放在地上。手穿穿不上时可以旋转一下。\n6. 穿完几束相同端子型号的线后，送到对应的铆压机旁边。\n\n## 半自动穿塞机\n\n有旋钮可以调，穿塞后塞子顶端和线皮顶端的距离，即线皮从塞子里露出来的程度。左拧小右拧大，或者说左浅右深。如果距离不合适，后续铆压会出问题，还是要一个个的手工调整，所以重点是先试穿几个，在开头就把机器调准。但有些机器的旋钮还会在穿塞的过程中松动，所以若自己感觉露头的长度变了，还需要继续调整。\n\n穿之前把炸毛的线头捋直，否则有几根外侧的线会弯折180度，卡在塞子和线皮的缝隙里。在手穿情况下也会有概率出现，比如没有把眼对准。\n\n当线束太短时，可以把皮筋往后拉一点，以防机器夹手。\n\n技巧：穿塞或铆压之前用皮筋把线束的前端绑起来，便于拿线。\n\n技巧：对于一些不带大卡片，未知数量的线束，如果不想用手计数的话，可以把机器上的计数器归零，用机器计数。\n\n如何换弹：把后面的塞子桶取下来，向里倒塞子，不要超过桶的三分之一，目测更少。\n\n卡壳处理：塞子有时会在导引槽里卡住，用一个钩子拨弄几下。\n\n## 半自动铆压机\n\n作用：把端子铆压到露头的铜线上。包括有密封塞和无密封塞的线。\n\n机器负责送端子排和铆压。人负责放置端子排，更换模具，调模具的力度，用脚踩踏板使机器做出铆压的动作。所以叫半自动。\n\n配合端子轮盘和模具使用。端子轮盘是一个纸质的，大号的，饼型带河岸的卷筒，一卷上是一排连在一起的同型号端子。模具用于连接机器发力点和端子排，模具正对操作者的下方有一个槽，用于放置待铆的铜线。\n\n拿线的手法为左手后，右手前。左手无名指和小指夹着线，剩余指使其伸直。右手把线放在模具的槽子里。已铆的线先拿在右手，如果太多了，可以放在桌面上或换手。\n\n模具可拆卸，不同的模具对应不同的端子型号，对于同一个模具，可能用于两种及以上的端子型号，有些不同型号的端子也可以互为替代地用。\n\n端子的中间有一个洞。\n\n合格标准：洞里可见铜丝，但铜丝不能向前顶满洞，不能顶得太过了。线皮不能被压凸起。保证端子在圆柱面上把线完整地360度包裹。\n\n难点1：对于挡板距离不合适的模具，试铆，找到线往前伸的合适距离，并在之后的每一次目测保持这个距离。目测的参照物是，端子的中间一段。线露头的一段比其略长，将线的前端向端子的中间一段的前端过一点，这样就可以保证洞里可见铜丝。\n\n难点2：机器可调力度，对于更细的线，要用更紧的力度？调力度的旋钮是在机器与模具的上方连接处，左拧，或者说俯视顺时针拧是更紧的力度。当一个圆在顺时针旋转时，它的下端是往左的，上端是往右的。\n\n难点3：不合格重铆时，需要重新剥皮。左手拿线，右手用剪刀，左右手向相反方向转，剪刀下边向内转，向外扯。如果用力过猛，可能会把铜丝剪断或刮掉一半。还需要保证露头的长度尽量与同束上的其他线保持一致，如果太短，铜丝露不出来。这意味着在操作不熟的情况下，如果想把铆失误的线统一留到最后处理，至少要留一根没有铆的线，用于参照长度。或者每铆一根线后都看一下，失误一根后立即处理。前者是比后者省时间的。\n\n一束线铆完之后，对其刚铆的一端包上塑料袋或塞到塑料杯子里，并绑上皮筋，以免磕碰刮擦。\n\n失误1：线有两端，有些如A1和B1。A1是由自动机器铆的，B1是半自动机器铆的。A1和B1的端子通常不一样，A1由别人铆完之后，B1由自己铆。而A1和B1的端子轮盘可能会放在同一台机器旁边，这意味着，如果你提前不熟悉这个规则，在A1被铆好的前提下，你可能会把另一头也铆成A1的端子，因为你只看了端子的型号，而没有看A1和B1，把机器旁边放的端子和单子上的一个对上了，就想当然地认为是需要铆这个。如果出现这种情况，需要把已铆错一头的所有线剪了，而且是一根根地贴着端子末端剪，如果并在一起剪，由于你没有把所有线对齐，会把有些线剪得更短。然后用剥皮机重新剥露头。\n\n失误2：挂端子轮盘的架子是可以前后拉的，这意味着，在端子没用完的情况下，在同一台机器上换轮盘是不用把一盘整个取下来后和别的盘换位的。而在端子用完的情况下，换轮盘的方式是，把其中一根杆子往右倾斜。\n\n重新插端子排时，需要拧一个旋钮，使一个缝隙扩大，把端子排的边端卡进去，其中一个端子与放线的口对齐，上完之后再拧紧。如果上完之后忘记拧紧了，会铆不上。\n\n卡壳处理：在铆压的过程中，如果端子轮盘的底面和桌面的左边不垂直，即端子排没有正对口，或没有及时地把端子排向下拉一点，预留一个送排的长度，那么可能使位于机器边缘的端子卡住。这时候需要先断电，再松开连接的地方，把卡住的端子用剪刀拉出来，重新把端子排送到机器口。另外还要注意，端子轮盘上的纸带太长了可以撕掉，防止纸带被卷入机器。\n\n另一种故障：铆完一个之后，机器有概率不往前送排。这种情况需要找师傅修，磨模具的零件，上油。\n\n## 拉力计\n\n测线所能承受的拉力，据此调机器的力度，以及填机器的自检记录表。\n\n已铆的端子相对于未铆的端子，会有一个压痕，据此看机器的力度是否合适。\n\n## 穿线号管\n\n纸质或塑料扁长管。文字的左边朝下。穿完绑皮筋以免掉。\n\n## 绑皮筋\n\n带疙瘩的皮筋，不翻折，而是左手拽着疙瘩，右手直接把线身绕一圈后卡在疙瘩上。\n\n## 其他工序\n\n### 辨认线的色号\n\n为了确保插入空插头的线颜色代码和图纸上标注的一致。色号大致是颜色英文的首字母，其中存在几个多值的优先级，如B是黑色，Be是蓝色，Br是棕色；G是绿色，Gr是灰色。特别地，紫色是V，而P是粉色。对于双色的线，主色在前辅色在后，主色的目测表面积比辅色大，如蓝黑是BeB。\n\n### 插端子\n\n把已铆压铜线上的端子随线插到空插头里。\n\n图纸上标注线号的是正对插头接触件的视图，实际的插入视图是图纸上的镜像，从另一端插。每个端子的凹槽向下。每根线上标有线号，对着图纸按照“右插左”的镜像形式插。插完之后再把插头上的卡扣按下去\n\n### 剥线皮\n\n一种粗的线，外面有一层塑料硬皮，夹缝有两层带洞的金属软皮，里面包裹着双绞线。\n\n目的：把两层软皮分开，并露出里面的双绞线\n\n方法：先把外层软皮向下多次摩擦，使其变蓬松，再把头端弯折180度，在外层软皮上用工具插一个洞，把内层软皮随双绞线从外层软皮里拽出来，金蝉脱壳。\n\n### 缠胶带\n\n起始状态：胶带揭起的一端在上方，有胶的一面正对人。\n\n正视图为从右向左绕圈缠，胶带先往里后往外。右视图为卷芯的圆心绕着电线轴顺时针旋转并后退。\n\n手法为：左手拇指推胶带身子外侧，右手食指钩卷芯内侧。胶带身子紧贴电线。\n\n分密绕，花绕和点扎。","source":"_posts/汽车线束操作工.md","raw":"---\ntitle: 汽车线束操作工\ndate: 2025-09-14 20:00:00\npermalink: worker.html\n---\n\n## 何为线束\n\n一束铜导线捆在一起，少则1根，多则200根。每一束线上都绑定了一个软塑料卡片，称为单子。单子上标注了这束线所属的订单号，直径，塞子型号，端子型号等信息。\n\n对于同一束线，它们的长度、直径是相同的，但露头的长度可能有所不同。如一头都露得长，一头都露得短。\n\n## 何为端子\n\n一个金属的接触件，一端需铆压到铜线上，另一端插到空插头上。\n\n有针型的和环形的。\n\n不同型号的线可能用同一型号的端子。\n\n## 安全生产\n\n机器出问题，先断电。通电时手不要伸进机器。\n\n铆压机的模具有温度，取下来的时候注意也不要伸进去。\n\n## 穿密封塞\n\n带孔塑料塞子，大头向下，穿到露头的铜线上。小头的一端可能离外皮的末端极小一段距离，或离一小段距离，或平齐。露头的程度视端子的型号而定，塞子本体视塞子型号而定。\n\n穿塞和穿线号管、铆压之前，都要确保其型号与单子上标注的一致。\n\n机器比手快，用手穿有时铜丝会扎手指。但有些塞子只能用手穿，因为塞子的种类比穿塞机的数量多。穿塞机-1,n-塞子型号-1,m-塞子本体。端子本体-n,1-端子型号-m,1-铆压机。\n\n流程：\n\n1. 把架子上刚运来的线束，根据塞子型号进行初步地择，目的是把它们放在对应的穿塞机旁边。\n2. 找一台机器，准备穿塞。\n3. 在机器旁，或者手穿时进行二次择线，把相同端子型号的线放在一起，以及把不同束线的穿塞一端放在同一头。这样在穿塞时便于自己操作，在穿塞后便于铆压工操作。\n4. 穿塞之前，注意对照卡片上线束的露头长度，如果两头长度不一样，但一眼看不出来，就手工比对一下两头的长度，确保穿的是正确长度的一头。\n5. 穿塞。尽量不要把线的另一端放在地上。手穿穿不上时可以旋转一下。\n6. 穿完几束相同端子型号的线后，送到对应的铆压机旁边。\n\n## 半自动穿塞机\n\n有旋钮可以调，穿塞后塞子顶端和线皮顶端的距离，即线皮从塞子里露出来的程度。左拧小右拧大，或者说左浅右深。如果距离不合适，后续铆压会出问题，还是要一个个的手工调整，所以重点是先试穿几个，在开头就把机器调准。但有些机器的旋钮还会在穿塞的过程中松动，所以若自己感觉露头的长度变了，还需要继续调整。\n\n穿之前把炸毛的线头捋直，否则有几根外侧的线会弯折180度，卡在塞子和线皮的缝隙里。在手穿情况下也会有概率出现，比如没有把眼对准。\n\n当线束太短时，可以把皮筋往后拉一点，以防机器夹手。\n\n技巧：穿塞或铆压之前用皮筋把线束的前端绑起来，便于拿线。\n\n技巧：对于一些不带大卡片，未知数量的线束，如果不想用手计数的话，可以把机器上的计数器归零，用机器计数。\n\n如何换弹：把后面的塞子桶取下来，向里倒塞子，不要超过桶的三分之一，目测更少。\n\n卡壳处理：塞子有时会在导引槽里卡住，用一个钩子拨弄几下。\n\n## 半自动铆压机\n\n作用：把端子铆压到露头的铜线上。包括有密封塞和无密封塞的线。\n\n机器负责送端子排和铆压。人负责放置端子排，更换模具，调模具的力度，用脚踩踏板使机器做出铆压的动作。所以叫半自动。\n\n配合端子轮盘和模具使用。端子轮盘是一个纸质的，大号的，饼型带河岸的卷筒，一卷上是一排连在一起的同型号端子。模具用于连接机器发力点和端子排，模具正对操作者的下方有一个槽，用于放置待铆的铜线。\n\n拿线的手法为左手后，右手前。左手无名指和小指夹着线，剩余指使其伸直。右手把线放在模具的槽子里。已铆的线先拿在右手，如果太多了，可以放在桌面上或换手。\n\n模具可拆卸，不同的模具对应不同的端子型号，对于同一个模具，可能用于两种及以上的端子型号，有些不同型号的端子也可以互为替代地用。\n\n端子的中间有一个洞。\n\n合格标准：洞里可见铜丝，但铜丝不能向前顶满洞，不能顶得太过了。线皮不能被压凸起。保证端子在圆柱面上把线完整地360度包裹。\n\n难点1：对于挡板距离不合适的模具，试铆，找到线往前伸的合适距离，并在之后的每一次目测保持这个距离。目测的参照物是，端子的中间一段。线露头的一段比其略长，将线的前端向端子的中间一段的前端过一点，这样就可以保证洞里可见铜丝。\n\n难点2：机器可调力度，对于更细的线，要用更紧的力度？调力度的旋钮是在机器与模具的上方连接处，左拧，或者说俯视顺时针拧是更紧的力度。当一个圆在顺时针旋转时，它的下端是往左的，上端是往右的。\n\n难点3：不合格重铆时，需要重新剥皮。左手拿线，右手用剪刀，左右手向相反方向转，剪刀下边向内转，向外扯。如果用力过猛，可能会把铜丝剪断或刮掉一半。还需要保证露头的长度尽量与同束上的其他线保持一致，如果太短，铜丝露不出来。这意味着在操作不熟的情况下，如果想把铆失误的线统一留到最后处理，至少要留一根没有铆的线，用于参照长度。或者每铆一根线后都看一下，失误一根后立即处理。前者是比后者省时间的。\n\n一束线铆完之后，对其刚铆的一端包上塑料袋或塞到塑料杯子里，并绑上皮筋，以免磕碰刮擦。\n\n失误1：线有两端，有些如A1和B1。A1是由自动机器铆的，B1是半自动机器铆的。A1和B1的端子通常不一样，A1由别人铆完之后，B1由自己铆。而A1和B1的端子轮盘可能会放在同一台机器旁边，这意味着，如果你提前不熟悉这个规则，在A1被铆好的前提下，你可能会把另一头也铆成A1的端子，因为你只看了端子的型号，而没有看A1和B1，把机器旁边放的端子和单子上的一个对上了，就想当然地认为是需要铆这个。如果出现这种情况，需要把已铆错一头的所有线剪了，而且是一根根地贴着端子末端剪，如果并在一起剪，由于你没有把所有线对齐，会把有些线剪得更短。然后用剥皮机重新剥露头。\n\n失误2：挂端子轮盘的架子是可以前后拉的，这意味着，在端子没用完的情况下，在同一台机器上换轮盘是不用把一盘整个取下来后和别的盘换位的。而在端子用完的情况下，换轮盘的方式是，把其中一根杆子往右倾斜。\n\n重新插端子排时，需要拧一个旋钮，使一个缝隙扩大，把端子排的边端卡进去，其中一个端子与放线的口对齐，上完之后再拧紧。如果上完之后忘记拧紧了，会铆不上。\n\n卡壳处理：在铆压的过程中，如果端子轮盘的底面和桌面的左边不垂直，即端子排没有正对口，或没有及时地把端子排向下拉一点，预留一个送排的长度，那么可能使位于机器边缘的端子卡住。这时候需要先断电，再松开连接的地方，把卡住的端子用剪刀拉出来，重新把端子排送到机器口。另外还要注意，端子轮盘上的纸带太长了可以撕掉，防止纸带被卷入机器。\n\n另一种故障：铆完一个之后，机器有概率不往前送排。这种情况需要找师傅修，磨模具的零件，上油。\n\n## 拉力计\n\n测线所能承受的拉力，据此调机器的力度，以及填机器的自检记录表。\n\n已铆的端子相对于未铆的端子，会有一个压痕，据此看机器的力度是否合适。\n\n## 穿线号管\n\n纸质或塑料扁长管。文字的左边朝下。穿完绑皮筋以免掉。\n\n## 绑皮筋\n\n带疙瘩的皮筋，不翻折，而是左手拽着疙瘩，右手直接把线身绕一圈后卡在疙瘩上。\n\n## 其他工序\n\n### 辨认线的色号\n\n为了确保插入空插头的线颜色代码和图纸上标注的一致。色号大致是颜色英文的首字母，其中存在几个多值的优先级，如B是黑色，Be是蓝色，Br是棕色；G是绿色，Gr是灰色。特别地，紫色是V，而P是粉色。对于双色的线，主色在前辅色在后，主色的目测表面积比辅色大，如蓝黑是BeB。\n\n### 插端子\n\n把已铆压铜线上的端子随线插到空插头里。\n\n图纸上标注线号的是正对插头接触件的视图，实际的插入视图是图纸上的镜像，从另一端插。每个端子的凹槽向下。每根线上标有线号，对着图纸按照“右插左”的镜像形式插。插完之后再把插头上的卡扣按下去\n\n### 剥线皮\n\n一种粗的线，外面有一层塑料硬皮，夹缝有两层带洞的金属软皮，里面包裹着双绞线。\n\n目的：把两层软皮分开，并露出里面的双绞线\n\n方法：先把外层软皮向下多次摩擦，使其变蓬松，再把头端弯折180度，在外层软皮上用工具插一个洞，把内层软皮随双绞线从外层软皮里拽出来，金蝉脱壳。\n\n### 缠胶带\n\n起始状态：胶带揭起的一端在上方，有胶的一面正对人。\n\n正视图为从右向左绕圈缠，胶带先往里后往外。右视图为卷芯的圆心绕着电线轴顺时针旋转并后退。\n\n手法为：左手拇指推胶带身子外侧，右手食指钩卷芯内侧。胶带身子紧贴电线。\n\n分密绕，花绕和点扎。","slug":"汽车线束操作工","published":1,"updated":"2025-09-25T14:24:50.678Z","__permalink":"worker.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnn000f5ws6exox55gt","content":"<h2 id=\"何为线束\">何为线束</h2>\n<p>一束铜导线捆在一起，少则 1 根，多则 200 根。每一束线上都绑定了一个软塑料卡片，称为单子。单子上标注了这束线所属的订单号，直径，塞子型号，端子型号等信息。</p>\n<p>对于同一束线，它们的长度、直径是相同的，但露头的长度可能有所不同。如一头都露得长，一头都露得短。</p>\n<h2 id=\"何为端子\">何为端子</h2>\n<p>一个金属的接触件，一端需铆压到铜线上，另一端插到空插头上。</p>\n<p>有针型的和环形的。</p>\n<p>不同型号的线可能用同一型号的端子。</p>\n<h2 id=\"安全生产\">安全生产</h2>\n<p>机器出问题，先断电。通电时手不要伸进机器。</p>\n<p>铆压机的模具有温度，取下来的时候注意也不要伸进去。</p>\n<h2 id=\"穿密封塞\">穿密封塞</h2>\n<p>带孔塑料塞子，大头向下，穿到露头的铜线上。小头的一端可能离外皮的末端极小一段距离，或离一小段距离，或平齐。露头的程度视端子的型号而定，塞子本体视塞子型号而定。</p>\n<p>穿塞和穿线号管、铆压之前，都要确保其型号与单子上标注的一致。</p>\n<p>机器比手快，用手穿有时铜丝会扎手指。但有些塞子只能用手穿，因为塞子的种类比穿塞机的数量多。穿塞机 - 1,n - 塞子型号 - 1,m - 塞子本体。端子本体 - n,1 - 端子型号 - m,1 - 铆压机。</p>\n<p>流程：</p>\n<ol type=\"1\">\n<li>把架子上刚运来的线束，根据塞子型号进行初步地择，目的是把它们放在对应的穿塞机旁边。</li>\n<li>找一台机器，准备穿塞。</li>\n<li>在机器旁，或者手穿时进行二次择线，把相同端子型号的线放在一起，以及把不同束线的穿塞一端放在同一头。这样在穿塞时便于自己操作，在穿塞后便于铆压工操作。</li>\n<li>穿塞之前，注意对照卡片上线束的露头长度，如果两头长度不一样，但一眼看不出来，就手工比对一下两头的长度，确保穿的是正确长度的一头。</li>\n<li>穿塞。尽量不要把线的另一端放在地上。手穿穿不上时可以旋转一下。</li>\n<li>穿完几束相同端子型号的线后，送到对应的铆压机旁边。</li>\n</ol>\n<h2 id=\"半自动穿塞机\">半自动穿塞机</h2>\n<p>有旋钮可以调，穿塞后塞子顶端和线皮顶端的距离，即线皮从塞子里露出来的程度。左拧小右拧大，或者说左浅右深。如果距离不合适，后续铆压会出问题，还是要一个个的手工调整，所以重点是先试穿几个，在开头就把机器调准。但有些机器的旋钮还会在穿塞的过程中松动，所以若自己感觉露头的长度变了，还需要继续调整。</p>\n<p>穿之前把炸毛的线头捋直，否则有几根外侧的线会弯折 180 度，卡在塞子和线皮的缝隙里。在手穿情况下也会有概率出现，比如没有把眼对准。</p>\n<p>当线束太短时，可以把皮筋往后拉一点，以防机器夹手。</p>\n<p>技巧：穿塞或铆压之前用皮筋把线束的前端绑起来，便于拿线。</p>\n<p>技巧：对于一些不带大卡片，未知数量的线束，如果不想用手计数的话，可以把机器上的计数器归零，用机器计数。</p>\n<p>如何换弹：把后面的塞子桶取下来，向里倒塞子，不要超过桶的三分之一，目测更少。</p>\n<p>卡壳处理：塞子有时会在导引槽里卡住，用一个钩子拨弄几下。</p>\n<h2 id=\"半自动铆压机\">半自动铆压机</h2>\n<p>作用：把端子铆压到露头的铜线上。包括有密封塞和无密封塞的线。</p>\n<p>机器负责送端子排和铆压。人负责放置端子排，更换模具，调模具的力度，用脚踩踏板使机器做出铆压的动作。所以叫半自动。</p>\n<p>配合端子轮盘和模具使用。端子轮盘是一个纸质的，大号的，饼型带河岸的卷筒，一卷上是一排连在一起的同型号端子。模具用于连接机器发力点和端子排，模具正对操作者的下方有一个槽，用于放置待铆的铜线。</p>\n<p>拿线的手法为左手后，右手前。左手无名指和小指夹着线，剩余指使其伸直。右手把线放在模具的槽子里。已铆的线先拿在右手，如果太多了，可以放在桌面上或换手。</p>\n<p>模具可拆卸，不同的模具对应不同的端子型号，对于同一个模具，可能用于两种及以上的端子型号，有些不同型号的端子也可以互为替代地用。</p>\n<p>端子的中间有一个洞。</p>\n<p>合格标准：洞里可见铜丝，但铜丝不能向前顶满洞，不能顶得太过了。线皮不能被压凸起。保证端子在圆柱面上把线完整地 360 度包裹。</p>\n<p>难点 1：对于挡板距离不合适的模具，试铆，找到线往前伸的合适距离，并在之后的每一次目测保持这个距离。目测的参照物是，端子的中间一段。线露头的一段比其略长，将线的前端向端子的中间一段的前端过一点，这样就可以保证洞里可见铜丝。</p>\n<p>难点 2：机器可调力度，对于更细的线，要用更紧的力度？调力度的旋钮是在机器与模具的上方连接处，左拧，或者说俯视顺时针拧是更紧的力度。当一个圆在顺时针旋转时，它的下端是往左的，上端是往右的。</p>\n<p>难点 3：不合格重铆时，需要重新剥皮。左手拿线，右手用剪刀，左右手向相反方向转，剪刀下边向内转，向外扯。如果用力过猛，可能会把铜丝剪断或刮掉一半。还需要保证露头的长度尽量与同束上的其他线保持一致，如果太短，铜丝露不出来。这意味着在操作不熟的情况下，如果想把铆失误的线统一留到最后处理，至少要留一根没有铆的线，用于参照长度。或者每铆一根线后都看一下，失误一根后立即处理。前者是比后者省时间的。</p>\n<p>一束线铆完之后，对其刚铆的一端包上塑料袋或塞到塑料杯子里，并绑上皮筋，以免磕碰刮擦。</p>\n<p>失误 1：线有两端，有些如 A1 和 B1。A1 是由自动机器铆的，B1 是半自动机器铆的。A1 和 B1 的端子通常不一样，A1 由别人铆完之后，B1 由自己铆。而 A1 和 B1 的端子轮盘可能会放在同一台机器旁边，这意味着，如果你提前不熟悉这个规则，在 A1 被铆好的前提下，你可能会把另一头也铆成 A1 的端子，因为你只看了端子的型号，而没有看 A1 和 B1，把机器旁边放的端子和单子上的一个对上了，就想当然地认为是需要铆这个。如果出现这种情况，需要把已铆错一头的所有线剪了，而且是一根根地贴着端子末端剪，如果并在一起剪，由于你没有把所有线对齐，会把有些线剪得更短。然后用剥皮机重新剥露头。</p>\n<p>失误 2：挂端子轮盘的架子是可以前后拉的，这意味着，在端子没用完的情况下，在同一台机器上换轮盘是不用把一盘整个取下来后和别的盘换位的。而在端子用完的情况下，换轮盘的方式是，把其中一根杆子往右倾斜。</p>\n<p>重新插端子排时，需要拧一个旋钮，使一个缝隙扩大，把端子排的边端卡进去，其中一个端子与放线的口对齐，上完之后再拧紧。如果上完之后忘记拧紧了，会铆不上。</p>\n<p>卡壳处理：在铆压的过程中，如果端子轮盘的底面和桌面的左边不垂直，即端子排没有正对口，或没有及时地把端子排向下拉一点，预留一个送排的长度，那么可能使位于机器边缘的端子卡住。这时候需要先断电，再松开连接的地方，把卡住的端子用剪刀拉出来，重新把端子排送到机器口。另外还要注意，端子轮盘上的纸带太长了可以撕掉，防止纸带被卷入机器。</p>\n<p>另一种故障：铆完一个之后，机器有概率不往前送排。这种情况需要找师傅修，磨模具的零件，上油。</p>\n<h2 id=\"拉力计\">拉力计</h2>\n<p>测线所能承受的拉力，据此调机器的力度，以及填机器的自检记录表。</p>\n<p>已铆的端子相对于未铆的端子，会有一个压痕，据此看机器的力度是否合适。</p>\n<h2 id=\"穿线号管\">穿线号管</h2>\n<p>纸质或塑料扁长管。文字的左边朝下。穿完绑皮筋以免掉。</p>\n<h2 id=\"绑皮筋\">绑皮筋</h2>\n<p>带疙瘩的皮筋，不翻折，而是左手拽着疙瘩，右手直接把线身绕一圈后卡在疙瘩上。</p>\n<h2 id=\"其他工序\">其他工序</h2>\n<h3 id=\"辨认线的色号\">辨认线的色号</h3>\n<p>为了确保插入空插头的线颜色代码和图纸上标注的一致。色号大致是颜色英文的首字母，其中存在几个多值的优先级，如 B 是黑色，Be 是蓝色，Br 是棕色；G 是绿色，Gr 是灰色。特别地，紫色是 V，而 P 是粉色。对于双色的线，主色在前辅色在后，主色的目测表面积比辅色大，如蓝黑是 BeB。</p>\n<h3 id=\"插端子\">插端子</h3>\n<p>把已铆压铜线上的端子随线插到空插头里。</p>\n<p>图纸上标注线号的是正对插头接触件的视图，实际的插入视图是图纸上的镜像，从另一端插。每个端子的凹槽向下。每根线上标有线号，对着图纸按照 “右插左” 的镜像形式插。插完之后再把插头上的卡扣按下去</p>\n<h3 id=\"剥线皮\">剥线皮</h3>\n<p>一种粗的线，外面有一层塑料硬皮，夹缝有两层带洞的金属软皮，里面包裹着双绞线。</p>\n<p>目的：把两层软皮分开，并露出里面的双绞线</p>\n<p>方法：先把外层软皮向下多次摩擦，使其变蓬松，再把头端弯折 180 度，在外层软皮上用工具插一个洞，把内层软皮随双绞线从外层软皮里拽出来，金蝉脱壳。</p>\n<h3 id=\"缠胶带\">缠胶带</h3>\n<p>起始状态：胶带揭起的一端在上方，有胶的一面正对人。</p>\n<p>正视图为从右向左绕圈缠，胶带先往里后往外。右视图为卷芯的圆心绕着电线轴顺时针旋转并后退。</p>\n<p>手法为：左手拇指推胶带身子外侧，右手食指钩卷芯内侧。胶带身子紧贴电线。</p>\n<p>分密绕，花绕和点扎。</p>\n","excerpt":"","more":"<h2 id=\"何为线束\">何为线束</h2>\n<p>一束铜导线捆在一起，少则 1 根，多则 200 根。每一束线上都绑定了一个软塑料卡片，称为单子。单子上标注了这束线所属的订单号，直径，塞子型号，端子型号等信息。</p>\n<p>对于同一束线，它们的长度、直径是相同的，但露头的长度可能有所不同。如一头都露得长，一头都露得短。</p>\n<h2 id=\"何为端子\">何为端子</h2>\n<p>一个金属的接触件，一端需铆压到铜线上，另一端插到空插头上。</p>\n<p>有针型的和环形的。</p>\n<p>不同型号的线可能用同一型号的端子。</p>\n<h2 id=\"安全生产\">安全生产</h2>\n<p>机器出问题，先断电。通电时手不要伸进机器。</p>\n<p>铆压机的模具有温度，取下来的时候注意也不要伸进去。</p>\n<h2 id=\"穿密封塞\">穿密封塞</h2>\n<p>带孔塑料塞子，大头向下，穿到露头的铜线上。小头的一端可能离外皮的末端极小一段距离，或离一小段距离，或平齐。露头的程度视端子的型号而定，塞子本体视塞子型号而定。</p>\n<p>穿塞和穿线号管、铆压之前，都要确保其型号与单子上标注的一致。</p>\n<p>机器比手快，用手穿有时铜丝会扎手指。但有些塞子只能用手穿，因为塞子的种类比穿塞机的数量多。穿塞机 - 1,n - 塞子型号 - 1,m - 塞子本体。端子本体 - n,1 - 端子型号 - m,1 - 铆压机。</p>\n<p>流程：</p>\n<ol type=\"1\">\n<li>把架子上刚运来的线束，根据塞子型号进行初步地择，目的是把它们放在对应的穿塞机旁边。</li>\n<li>找一台机器，准备穿塞。</li>\n<li>在机器旁，或者手穿时进行二次择线，把相同端子型号的线放在一起，以及把不同束线的穿塞一端放在同一头。这样在穿塞时便于自己操作，在穿塞后便于铆压工操作。</li>\n<li>穿塞之前，注意对照卡片上线束的露头长度，如果两头长度不一样，但一眼看不出来，就手工比对一下两头的长度，确保穿的是正确长度的一头。</li>\n<li>穿塞。尽量不要把线的另一端放在地上。手穿穿不上时可以旋转一下。</li>\n<li>穿完几束相同端子型号的线后，送到对应的铆压机旁边。</li>\n</ol>\n<h2 id=\"半自动穿塞机\">半自动穿塞机</h2>\n<p>有旋钮可以调，穿塞后塞子顶端和线皮顶端的距离，即线皮从塞子里露出来的程度。左拧小右拧大，或者说左浅右深。如果距离不合适，后续铆压会出问题，还是要一个个的手工调整，所以重点是先试穿几个，在开头就把机器调准。但有些机器的旋钮还会在穿塞的过程中松动，所以若自己感觉露头的长度变了，还需要继续调整。</p>\n<p>穿之前把炸毛的线头捋直，否则有几根外侧的线会弯折 180 度，卡在塞子和线皮的缝隙里。在手穿情况下也会有概率出现，比如没有把眼对准。</p>\n<p>当线束太短时，可以把皮筋往后拉一点，以防机器夹手。</p>\n<p>技巧：穿塞或铆压之前用皮筋把线束的前端绑起来，便于拿线。</p>\n<p>技巧：对于一些不带大卡片，未知数量的线束，如果不想用手计数的话，可以把机器上的计数器归零，用机器计数。</p>\n<p>如何换弹：把后面的塞子桶取下来，向里倒塞子，不要超过桶的三分之一，目测更少。</p>\n<p>卡壳处理：塞子有时会在导引槽里卡住，用一个钩子拨弄几下。</p>\n<h2 id=\"半自动铆压机\">半自动铆压机</h2>\n<p>作用：把端子铆压到露头的铜线上。包括有密封塞和无密封塞的线。</p>\n<p>机器负责送端子排和铆压。人负责放置端子排，更换模具，调模具的力度，用脚踩踏板使机器做出铆压的动作。所以叫半自动。</p>\n<p>配合端子轮盘和模具使用。端子轮盘是一个纸质的，大号的，饼型带河岸的卷筒，一卷上是一排连在一起的同型号端子。模具用于连接机器发力点和端子排，模具正对操作者的下方有一个槽，用于放置待铆的铜线。</p>\n<p>拿线的手法为左手后，右手前。左手无名指和小指夹着线，剩余指使其伸直。右手把线放在模具的槽子里。已铆的线先拿在右手，如果太多了，可以放在桌面上或换手。</p>\n<p>模具可拆卸，不同的模具对应不同的端子型号，对于同一个模具，可能用于两种及以上的端子型号，有些不同型号的端子也可以互为替代地用。</p>\n<p>端子的中间有一个洞。</p>\n<p>合格标准：洞里可见铜丝，但铜丝不能向前顶满洞，不能顶得太过了。线皮不能被压凸起。保证端子在圆柱面上把线完整地 360 度包裹。</p>\n<p>难点 1：对于挡板距离不合适的模具，试铆，找到线往前伸的合适距离，并在之后的每一次目测保持这个距离。目测的参照物是，端子的中间一段。线露头的一段比其略长，将线的前端向端子的中间一段的前端过一点，这样就可以保证洞里可见铜丝。</p>\n<p>难点 2：机器可调力度，对于更细的线，要用更紧的力度？调力度的旋钮是在机器与模具的上方连接处，左拧，或者说俯视顺时针拧是更紧的力度。当一个圆在顺时针旋转时，它的下端是往左的，上端是往右的。</p>\n<p>难点 3：不合格重铆时，需要重新剥皮。左手拿线，右手用剪刀，左右手向相反方向转，剪刀下边向内转，向外扯。如果用力过猛，可能会把铜丝剪断或刮掉一半。还需要保证露头的长度尽量与同束上的其他线保持一致，如果太短，铜丝露不出来。这意味着在操作不熟的情况下，如果想把铆失误的线统一留到最后处理，至少要留一根没有铆的线，用于参照长度。或者每铆一根线后都看一下，失误一根后立即处理。前者是比后者省时间的。</p>\n<p>一束线铆完之后，对其刚铆的一端包上塑料袋或塞到塑料杯子里，并绑上皮筋，以免磕碰刮擦。</p>\n<p>失误 1：线有两端，有些如 A1 和 B1。A1 是由自动机器铆的，B1 是半自动机器铆的。A1 和 B1 的端子通常不一样，A1 由别人铆完之后，B1 由自己铆。而 A1 和 B1 的端子轮盘可能会放在同一台机器旁边，这意味着，如果你提前不熟悉这个规则，在 A1 被铆好的前提下，你可能会把另一头也铆成 A1 的端子，因为你只看了端子的型号，而没有看 A1 和 B1，把机器旁边放的端子和单子上的一个对上了，就想当然地认为是需要铆这个。如果出现这种情况，需要把已铆错一头的所有线剪了，而且是一根根地贴着端子末端剪，如果并在一起剪，由于你没有把所有线对齐，会把有些线剪得更短。然后用剥皮机重新剥露头。</p>\n<p>失误 2：挂端子轮盘的架子是可以前后拉的，这意味着，在端子没用完的情况下，在同一台机器上换轮盘是不用把一盘整个取下来后和别的盘换位的。而在端子用完的情况下，换轮盘的方式是，把其中一根杆子往右倾斜。</p>\n<p>重新插端子排时，需要拧一个旋钮，使一个缝隙扩大，把端子排的边端卡进去，其中一个端子与放线的口对齐，上完之后再拧紧。如果上完之后忘记拧紧了，会铆不上。</p>\n<p>卡壳处理：在铆压的过程中，如果端子轮盘的底面和桌面的左边不垂直，即端子排没有正对口，或没有及时地把端子排向下拉一点，预留一个送排的长度，那么可能使位于机器边缘的端子卡住。这时候需要先断电，再松开连接的地方，把卡住的端子用剪刀拉出来，重新把端子排送到机器口。另外还要注意，端子轮盘上的纸带太长了可以撕掉，防止纸带被卷入机器。</p>\n<p>另一种故障：铆完一个之后，机器有概率不往前送排。这种情况需要找师傅修，磨模具的零件，上油。</p>\n<h2 id=\"拉力计\">拉力计</h2>\n<p>测线所能承受的拉力，据此调机器的力度，以及填机器的自检记录表。</p>\n<p>已铆的端子相对于未铆的端子，会有一个压痕，据此看机器的力度是否合适。</p>\n<h2 id=\"穿线号管\">穿线号管</h2>\n<p>纸质或塑料扁长管。文字的左边朝下。穿完绑皮筋以免掉。</p>\n<h2 id=\"绑皮筋\">绑皮筋</h2>\n<p>带疙瘩的皮筋，不翻折，而是左手拽着疙瘩，右手直接把线身绕一圈后卡在疙瘩上。</p>\n<h2 id=\"其他工序\">其他工序</h2>\n<h3 id=\"辨认线的色号\">辨认线的色号</h3>\n<p>为了确保插入空插头的线颜色代码和图纸上标注的一致。色号大致是颜色英文的首字母，其中存在几个多值的优先级，如 B 是黑色，Be 是蓝色，Br 是棕色；G 是绿色，Gr 是灰色。特别地，紫色是 V，而 P 是粉色。对于双色的线，主色在前辅色在后，主色的目测表面积比辅色大，如蓝黑是 BeB。</p>\n<h3 id=\"插端子\">插端子</h3>\n<p>把已铆压铜线上的端子随线插到空插头里。</p>\n<p>图纸上标注线号的是正对插头接触件的视图，实际的插入视图是图纸上的镜像，从另一端插。每个端子的凹槽向下。每根线上标有线号，对着图纸按照 “右插左” 的镜像形式插。插完之后再把插头上的卡扣按下去</p>\n<h3 id=\"剥线皮\">剥线皮</h3>\n<p>一种粗的线，外面有一层塑料硬皮，夹缝有两层带洞的金属软皮，里面包裹着双绞线。</p>\n<p>目的：把两层软皮分开，并露出里面的双绞线</p>\n<p>方法：先把外层软皮向下多次摩擦，使其变蓬松，再把头端弯折 180 度，在外层软皮上用工具插一个洞，把内层软皮随双绞线从外层软皮里拽出来，金蝉脱壳。</p>\n<h3 id=\"缠胶带\">缠胶带</h3>\n<p>起始状态：胶带揭起的一端在上方，有胶的一面正对人。</p>\n<p>正视图为从右向左绕圈缠，胶带先往里后往外。右视图为卷芯的圆心绕着电线轴顺时针旋转并后退。</p>\n<p>手法为：左手拇指推胶带身子外侧，右手食指钩卷芯内侧。胶带身子紧贴电线。</p>\n<p>分密绕，花绕和点扎。</p>\n"},{"title":"时间和历法","date":"2024-11-23T11:00:00.000Z","mathjax":true,"_content":"\n一些没弄明白的问题。\n\n## 现在是几点\n\n来自原子钟的时间是国际原子时 TAI，它代表了秒的定义最准确的实现。各独立地方的原子时 TA(k) 定期传送给法国巴黎的国际权度局 BIPM。\n\n来自天文观测的时间是世界时 UT，它代表了地球实际自转的节律，现在使用的是 UT1。由于地球的自转速度不是固定的，长期看来有减慢的趋势，所以 UT1 的秒长和 TAI 不一样。\n\n来自 NTP 服务器和卫星信号的时间是协调世界时 UTC，是我们在手机电脑上看到的时间。东八区的北京时间是 UTC 加上 8 个小时，是 <span id=\"currentTime\"></span>\n\n<script>\nfunction updateTime() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以要+1\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    const formattedTime = `${year} 年 ${month} 月 ${day} 日 ${hours} 时 ${minutes} 分 ${seconds} 秒。`;\n    document.getElementById('currentTime').textContent = formattedTime;\n}\nwindow.onload = function() {\n    updateTime();\n    setInterval(updateTime, 1000);\n};\n</script>\n\nUTC 的秒长遵循 TAI，节律遵循 UT1。当 UT1 与 UTC 的时间差接近 0.9 秒时，会向 UTC 里插入一个闰秒，以确保 UTC 与 UT1 之间的时间差不超过 0.9 秒。闰秒的时刻类似 23:59:60，会引起部分软件出 BUG。所以在 2022 年 11 月的第 27 届国际计量大会上，科学家和政府代表投票决定到 2035 年取消闰秒。中国科学院国家授时中心每月的[《时间频率公报》](https://nadc.china-vo.org/timedb/TimeFrequency_Bulletin)里有 TAI、UT1 与 UTC 的差值，和下一次的闰秒预告。\n\nUNIX 时间是从 UTC 1970 年 1 月 1 日 0 时 0 分 0 秒起至现在的总秒数，不包括闰秒。对于记录 UNIX 时间的 32 位有符号整数变量来说，它的最大值是 2^31-1，从上述时间向后推这些秒后，是 2038 年 1 月 19 日 3 时 14 分 07 秒。在下一秒，用于保存时间的变量会变成 -2^31，时间会变成 1901 年 12 月 13 日，这被称为 2038 年问题。如果用 32 位无符号整数表示 UNIX 时间，问题会延后到 2106 年。如果用 64 位有符号整数会延后到 2922 亿年后。\n\n## 一天有多长时间\n\n恒星日是以遥远的恒星为参照物，地球自转 360 度的时间，约为 23 小时 56 分钟 4 秒。恒星日的长度不是固定的，因为地球的自转速度不是固定的，自转轴也不是固定的。地球表面和内部的物质运动造成自转轴和极点在地球表面移动，称极移。\n\n真太阳日是 UT1 的参照，UT1 对 UT0 做了极移的修正，是一个正午到下一个正午太阳连续两次过上中天的时间，是地球自转约 360 度 59 分的时间。因为地球除了自转，还会绕太阳公转，在自转一周之后地球已经不在原来的公转位置上了，还需要额外转约 59 分才能使原来的点对准太阳。\n\n平太阳日是 UTC 的参照，是真太阳日的平均，长度是固定的 24 小时，是我们现在所说的一天。\n\n## 一年有多长时间\n\n恒星年是以遥远的恒星为参照物，地球的轨道周期，地球绕太阳公转 360 度的时间，约 365.2564 平太阳日。\n\n回归年是以地球为参照物，太阳连续两次过春分点的时间。春分点是天赤道和黄道的交点，黄道是太阳绕地球转的轨道，如果把地球看作是静止在一个位置上的，且在不观测其他天体的情况下，太阳就是绕着地球转的。\n\n回归年的长度不是固定的，因为地球的自转轴不是固定的。太阳、月球及其他行星作用在地球赤道隆起部分的引力矩引起地轴进动。进动就是一个快倒下的陀螺，它的转轴会在一个圆锥面上旋转。在地轴进动的同时，其他细微的抖动称章动。地轴进动和章动引起岁差，即春分点的变化。\n\n<img src=\"/blog/images/ecliptic.jpg\">\n\n在黄道上的点取平均值的年称为平回归年，当前的平回归年约 365.2422 平太阳日。而现行公历的平年是 365 天，大约每四年就会有一天的误差：\n\n- 0.2422 \\* 4 = 0.9688\n- 0.2422 \\* 100 = 24.22\n- 0.2422 \\* 400 = 96.88\n\n所以现行公历每四年闰一天，每 100 年闰 24 天，每 400 年闰 97 天，闰的一天加到二月里。准确地说，年份能被 400 整除的是闰年，能被 4 整除且不能被 100 整除的也是闰年，剩下的是平年。\n\n## 儒略历和格里历\n\n公元前 46 年，罗马共和国的儒略·凯萨采纳埃及数学家兼天文学家索西琴尼的计算提出了儒略历，是简单的四年闰一次。儒略历从公元前 45 年 1 月 1 日开始实施，这是第一次修 BUG。\n\n这一改革原本可以顺利实施，但祭司们执行错了，即他们每三年而不是每四年就增加一个闰日。这个错误持续了 36 年，在此期间多插入了 3 个不必要的闰日。直到这个错误被发现后，奥古斯都下令在接下来的十二年中不再增加任何闰日，以此来纠正之前因祭司多加的 3 天，这是第二次修 BUG。\n\n直到公元 4 年以后，儒略历才按照恺撒的意图运行，所以下一个闰年是公元 8 年，此后每隔四年就有一个闰年。平均一年 365.25 天，仍然与平回归年的天数有差异。\n\n误差累积到了 1582 年，复活节的日期与春分相差甚远，罗马教皇格里高利十三世将儒略历改为意大利医生兼哲学家阿洛伊修斯的历法，把日历年的平均长度从 365.25 天减少到 365.2425 天，即现行的闰年方式。规定 1582 年 10 月 4 日的后一天是 10 月 15 日，以弥补误差，这是第三次修 BUG。即现行的格里历、公历。\n\n所以，更准确地说是：\n\n- 在 1583 年及以后的格里历里，年份能被 400 整除的是闰年，能被 4 整除且不能被 100 整除的也是闰年，剩下的是平年。闰年有 366 天，平年有 365 天。\n- 在格里历里，1582 年有 355 天；在儒略历里，1582 年有 365 天。\n- 在 4 年至 1581 年的儒略历里，能被 4 整除的必定是闰年 366 天，剩下的都是平年 365 天。\n- 在前 45 年至 3 年的儒略历里，挺混乱的，参考[Julian calendar](https://en.wikipedia.org/wiki/Julian_calendar)。\n- 在儒略历实施的前一年（公元前 46 年），罗马当年里有 445 天。\n- 在前 47 年及之前的罗马历法里，平年有 355 天，闰年有 377 或 378 天。\n\n## 公元纪年和世纪\n\n公历（格里历）和公元纪年的意思不一样，前者是历法，后者是年号。公元纪年最初是基于儒略历的，6 世纪的时候，东罗马帝国的僧侣狄奥尼修斯把耶稣基督诞生的那一年作为公元 1 年（Anno Domini 1，即主的年份 1 年），在此之前的为公元前（Before Christ）。\n\n世纪是基于公元纪年体系来划分的时间单位，一个世纪有 100 年。\n\n- 没有公元 0 年。\n- 1 世纪的第一天是 1 年 1 月 1 日。它的前一天是前 1 世纪的最后一天，是前 1 年 12 月 31 日。\n- 公元前 5 世纪是前 500 年的第一天到前 401 年的最后一天。\n- 20 世纪是 1901 年 1 月 1 日到 2000 年 12 月 31 日。\n\n## 一个月有多长时间\n\n恒星月是以遥远的恒星为参照物，月球的轨道周期，月球绕地球公转 360 度的时间，约 27.32166 天。地球和月球的质心在距离地心约 4671 公里，即地球赤道半径约 0.73 倍的地球内部，两者各自围绕着质心运转。\n\n回归月是月球连续两次通过天空同一点的平均时间，约 27.32158 天。由于月亮是不会发光的，它反射的是太阳的光，所以我们不像用回归年一样用它编历法。\n\n朔望月是在地球上看到的月亮的一个完整的阴晴圆缺周期，平均 29.5306 天。朔为新月，望为满月。在月球绕地球公转的同时，地球也在围绕太阳公转。当月球完成一次公转回到相同位置时，地球已经沿着其公转轨道前进了一段距离，月球需要额外的时间才能再次与太阳对齐形成新月或满月，所以朔望月比回归月长。\n\n<img src=\"/blog/images/moon.jpg\">\n\n当月球相对于地球离阳光更近时，在地球上看到的是新月：\n\n<img src=\"/blog/images/shuo.webp\">\n\n当地球相对于月球离阳光更近时，在地球上看到的是满月：\n\n<img src=\"/blog/images/wang.webp\">\n\n图片来自[Earth Space Lab](https://www.earthspacelab.com/app/moon-phases/zh)。\n\n## 农历\n\n以回归年为基础制定的历法叫阳历，如儒略历和格里历；以朔望月为基础制定的历法叫阴历，如伊斯兰历。\n\n我国现行的农历是阴阳合历，月长遵循朔望月，通过闰月来确保与回归年的天数相差不大。\n\n农历是怎么制定的：根据[GB/T 33661-2017 农历的编算和颁行](https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=E107EA4DE9725EDF819F33C60A44B296)，它的基础是月球和太阳的地心视黄经，参考的是国际地球自转和参考系服务规范（[IERS Conventions](https://www.iers.org/IERS/EN/DataProducts/Conventions/conventions.html)）的模型。\n\n- 一天的范围是北京时间 0 时到 24 时；\n- 二十四节气为一个回归年里，包含太阳地心视黄经为 $15k$ 度的时刻的一天，$k \\in [0,23] \\cap \\mathbb{Z}$，其中春分为 0 度。\n- 中气是二十四节气中从冬至开始，逢奇序数的节气。即冬至，大雪，……，春分，谷雨，……\n- 包含月球和太阳的地心视黄经相等时刻的一天为朔日，为农历月的第一天；\n- 包含冬至在内的农历月为农历十一月；\n- 农历十一月向后数（不包括闰月）的第二个月为农历年的第一个月，即正月；\n- 若从某个农历十一月到下个农历十一月（左闭右开）之间有 13 个农历月，则需要置闰。置闰规则为：取其中最先出现的一个不包含中气的农历月为农历闰月。\n\n为什么农历平均十九年七闰：\n\n- 朔望月平均 29.5306 天，两个朔日可能相差 30 天或 29 天，即大小月的区别。\n- 回归年平均 365.2422 天。一个回归年里一定有 24 个节气。\n- 两者相除，一个回归年平均有 12.368 个朔望月。\n- 0.368 \\* 19 = 6.992\n\n## 生辰八字\n\n生辰八字是出生的年月日时刻向天干地支的八个字的映射，它不是按现行农历排的，但节气和年柱可以参考农历来做判断。由年柱、月柱、日柱、时柱组成，每个柱由一个天干和一个地支组成。\n\n- 天干：甲乙丙丁午己庚辛壬癸\n- 地支：子丑寅卯辰巳午未申酉戌亥\n- 干支：甲子到癸亥，共 60 个\n\n排柱：\n\n- 年柱：在立春之前出生的属于上一年，否则属于本年。\n- 月柱：按相隔的两个节气划分一个月\n  - 正月：立春至惊蛰前一日\n  - 十二月：小寒至立春前一日\n  - 天干：正月的天干 = 年天干 +2\n  - 地支：十一月为子，正月为寅，二月为卯，依次类推\n- 日柱：在北京时间 23 点到 24 点出生的属于后一天，不属于当天。注意这个算法可能会影响月柱\n  - 1949 年 10 月 1 日 = 甲子，60 天一循环。\n  - 2001 年 1 月 1 日巧合地 = 甲子。参考[日期计算器](https://tool.lu/datecalc/)\n- 经笔者单一数据的验证，[天气万年历](https://wannianli.tianqi.com/)的年月日柱是准的，如果不考虑时辰的话。\n- 时柱：古人把一天分为十二个时辰，从子时到亥时。\n  - 亥时（人定）相当于现在的晚上 9 点到 11 点，人和猪都该睡觉了，也叫二更。\n  - 一更（黄昏）是晚上 7 点到 9 点，是戌时，太阳已经落山了，狗开始守门了。\n  - 三更（夜半）是次日的子时，是现在的 11 点到次日 1 点。五更（平旦）是寅时，凌晨三点到五点。\n  - 地支：等于时辰的地支\n  - 天干：参考百度百科的[时辰干支查算表](https://baike.baidu.com/item/%E7%94%9F%E8%BE%B0%E5%85%AB%E5%AD%97)，起始点是：日干支甲己 + 子时 = 甲子。\n","source":"_posts/时间和历法.md","raw":"---\ntitle: 时间和历法\ndate: 2024-11-23 19:00:00\npermalink: time.html\nmathjax: true\n---\n\n一些没弄明白的问题。\n\n## 现在是几点\n\n来自原子钟的时间是国际原子时 TAI，它代表了秒的定义最准确的实现。各独立地方的原子时 TA(k) 定期传送给法国巴黎的国际权度局 BIPM。\n\n来自天文观测的时间是世界时 UT，它代表了地球实际自转的节律，现在使用的是 UT1。由于地球的自转速度不是固定的，长期看来有减慢的趋势，所以 UT1 的秒长和 TAI 不一样。\n\n来自 NTP 服务器和卫星信号的时间是协调世界时 UTC，是我们在手机电脑上看到的时间。东八区的北京时间是 UTC 加上 8 个小时，是 <span id=\"currentTime\"></span>\n\n<script>\nfunction updateTime() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以要+1\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    const formattedTime = `${year} 年 ${month} 月 ${day} 日 ${hours} 时 ${minutes} 分 ${seconds} 秒。`;\n    document.getElementById('currentTime').textContent = formattedTime;\n}\nwindow.onload = function() {\n    updateTime();\n    setInterval(updateTime, 1000);\n};\n</script>\n\nUTC 的秒长遵循 TAI，节律遵循 UT1。当 UT1 与 UTC 的时间差接近 0.9 秒时，会向 UTC 里插入一个闰秒，以确保 UTC 与 UT1 之间的时间差不超过 0.9 秒。闰秒的时刻类似 23:59:60，会引起部分软件出 BUG。所以在 2022 年 11 月的第 27 届国际计量大会上，科学家和政府代表投票决定到 2035 年取消闰秒。中国科学院国家授时中心每月的[《时间频率公报》](https://nadc.china-vo.org/timedb/TimeFrequency_Bulletin)里有 TAI、UT1 与 UTC 的差值，和下一次的闰秒预告。\n\nUNIX 时间是从 UTC 1970 年 1 月 1 日 0 时 0 分 0 秒起至现在的总秒数，不包括闰秒。对于记录 UNIX 时间的 32 位有符号整数变量来说，它的最大值是 2^31-1，从上述时间向后推这些秒后，是 2038 年 1 月 19 日 3 时 14 分 07 秒。在下一秒，用于保存时间的变量会变成 -2^31，时间会变成 1901 年 12 月 13 日，这被称为 2038 年问题。如果用 32 位无符号整数表示 UNIX 时间，问题会延后到 2106 年。如果用 64 位有符号整数会延后到 2922 亿年后。\n\n## 一天有多长时间\n\n恒星日是以遥远的恒星为参照物，地球自转 360 度的时间，约为 23 小时 56 分钟 4 秒。恒星日的长度不是固定的，因为地球的自转速度不是固定的，自转轴也不是固定的。地球表面和内部的物质运动造成自转轴和极点在地球表面移动，称极移。\n\n真太阳日是 UT1 的参照，UT1 对 UT0 做了极移的修正，是一个正午到下一个正午太阳连续两次过上中天的时间，是地球自转约 360 度 59 分的时间。因为地球除了自转，还会绕太阳公转，在自转一周之后地球已经不在原来的公转位置上了，还需要额外转约 59 分才能使原来的点对准太阳。\n\n平太阳日是 UTC 的参照，是真太阳日的平均，长度是固定的 24 小时，是我们现在所说的一天。\n\n## 一年有多长时间\n\n恒星年是以遥远的恒星为参照物，地球的轨道周期，地球绕太阳公转 360 度的时间，约 365.2564 平太阳日。\n\n回归年是以地球为参照物，太阳连续两次过春分点的时间。春分点是天赤道和黄道的交点，黄道是太阳绕地球转的轨道，如果把地球看作是静止在一个位置上的，且在不观测其他天体的情况下，太阳就是绕着地球转的。\n\n回归年的长度不是固定的，因为地球的自转轴不是固定的。太阳、月球及其他行星作用在地球赤道隆起部分的引力矩引起地轴进动。进动就是一个快倒下的陀螺，它的转轴会在一个圆锥面上旋转。在地轴进动的同时，其他细微的抖动称章动。地轴进动和章动引起岁差，即春分点的变化。\n\n<img src=\"/blog/images/ecliptic.jpg\">\n\n在黄道上的点取平均值的年称为平回归年，当前的平回归年约 365.2422 平太阳日。而现行公历的平年是 365 天，大约每四年就会有一天的误差：\n\n- 0.2422 \\* 4 = 0.9688\n- 0.2422 \\* 100 = 24.22\n- 0.2422 \\* 400 = 96.88\n\n所以现行公历每四年闰一天，每 100 年闰 24 天，每 400 年闰 97 天，闰的一天加到二月里。准确地说，年份能被 400 整除的是闰年，能被 4 整除且不能被 100 整除的也是闰年，剩下的是平年。\n\n## 儒略历和格里历\n\n公元前 46 年，罗马共和国的儒略·凯萨采纳埃及数学家兼天文学家索西琴尼的计算提出了儒略历，是简单的四年闰一次。儒略历从公元前 45 年 1 月 1 日开始实施，这是第一次修 BUG。\n\n这一改革原本可以顺利实施，但祭司们执行错了，即他们每三年而不是每四年就增加一个闰日。这个错误持续了 36 年，在此期间多插入了 3 个不必要的闰日。直到这个错误被发现后，奥古斯都下令在接下来的十二年中不再增加任何闰日，以此来纠正之前因祭司多加的 3 天，这是第二次修 BUG。\n\n直到公元 4 年以后，儒略历才按照恺撒的意图运行，所以下一个闰年是公元 8 年，此后每隔四年就有一个闰年。平均一年 365.25 天，仍然与平回归年的天数有差异。\n\n误差累积到了 1582 年，复活节的日期与春分相差甚远，罗马教皇格里高利十三世将儒略历改为意大利医生兼哲学家阿洛伊修斯的历法，把日历年的平均长度从 365.25 天减少到 365.2425 天，即现行的闰年方式。规定 1582 年 10 月 4 日的后一天是 10 月 15 日，以弥补误差，这是第三次修 BUG。即现行的格里历、公历。\n\n所以，更准确地说是：\n\n- 在 1583 年及以后的格里历里，年份能被 400 整除的是闰年，能被 4 整除且不能被 100 整除的也是闰年，剩下的是平年。闰年有 366 天，平年有 365 天。\n- 在格里历里，1582 年有 355 天；在儒略历里，1582 年有 365 天。\n- 在 4 年至 1581 年的儒略历里，能被 4 整除的必定是闰年 366 天，剩下的都是平年 365 天。\n- 在前 45 年至 3 年的儒略历里，挺混乱的，参考[Julian calendar](https://en.wikipedia.org/wiki/Julian_calendar)。\n- 在儒略历实施的前一年（公元前 46 年），罗马当年里有 445 天。\n- 在前 47 年及之前的罗马历法里，平年有 355 天，闰年有 377 或 378 天。\n\n## 公元纪年和世纪\n\n公历（格里历）和公元纪年的意思不一样，前者是历法，后者是年号。公元纪年最初是基于儒略历的，6 世纪的时候，东罗马帝国的僧侣狄奥尼修斯把耶稣基督诞生的那一年作为公元 1 年（Anno Domini 1，即主的年份 1 年），在此之前的为公元前（Before Christ）。\n\n世纪是基于公元纪年体系来划分的时间单位，一个世纪有 100 年。\n\n- 没有公元 0 年。\n- 1 世纪的第一天是 1 年 1 月 1 日。它的前一天是前 1 世纪的最后一天，是前 1 年 12 月 31 日。\n- 公元前 5 世纪是前 500 年的第一天到前 401 年的最后一天。\n- 20 世纪是 1901 年 1 月 1 日到 2000 年 12 月 31 日。\n\n## 一个月有多长时间\n\n恒星月是以遥远的恒星为参照物，月球的轨道周期，月球绕地球公转 360 度的时间，约 27.32166 天。地球和月球的质心在距离地心约 4671 公里，即地球赤道半径约 0.73 倍的地球内部，两者各自围绕着质心运转。\n\n回归月是月球连续两次通过天空同一点的平均时间，约 27.32158 天。由于月亮是不会发光的，它反射的是太阳的光，所以我们不像用回归年一样用它编历法。\n\n朔望月是在地球上看到的月亮的一个完整的阴晴圆缺周期，平均 29.5306 天。朔为新月，望为满月。在月球绕地球公转的同时，地球也在围绕太阳公转。当月球完成一次公转回到相同位置时，地球已经沿着其公转轨道前进了一段距离，月球需要额外的时间才能再次与太阳对齐形成新月或满月，所以朔望月比回归月长。\n\n<img src=\"/blog/images/moon.jpg\">\n\n当月球相对于地球离阳光更近时，在地球上看到的是新月：\n\n<img src=\"/blog/images/shuo.webp\">\n\n当地球相对于月球离阳光更近时，在地球上看到的是满月：\n\n<img src=\"/blog/images/wang.webp\">\n\n图片来自[Earth Space Lab](https://www.earthspacelab.com/app/moon-phases/zh)。\n\n## 农历\n\n以回归年为基础制定的历法叫阳历，如儒略历和格里历；以朔望月为基础制定的历法叫阴历，如伊斯兰历。\n\n我国现行的农历是阴阳合历，月长遵循朔望月，通过闰月来确保与回归年的天数相差不大。\n\n农历是怎么制定的：根据[GB/T 33661-2017 农历的编算和颁行](https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=E107EA4DE9725EDF819F33C60A44B296)，它的基础是月球和太阳的地心视黄经，参考的是国际地球自转和参考系服务规范（[IERS Conventions](https://www.iers.org/IERS/EN/DataProducts/Conventions/conventions.html)）的模型。\n\n- 一天的范围是北京时间 0 时到 24 时；\n- 二十四节气为一个回归年里，包含太阳地心视黄经为 $15k$ 度的时刻的一天，$k \\in [0,23] \\cap \\mathbb{Z}$，其中春分为 0 度。\n- 中气是二十四节气中从冬至开始，逢奇序数的节气。即冬至，大雪，……，春分，谷雨，……\n- 包含月球和太阳的地心视黄经相等时刻的一天为朔日，为农历月的第一天；\n- 包含冬至在内的农历月为农历十一月；\n- 农历十一月向后数（不包括闰月）的第二个月为农历年的第一个月，即正月；\n- 若从某个农历十一月到下个农历十一月（左闭右开）之间有 13 个农历月，则需要置闰。置闰规则为：取其中最先出现的一个不包含中气的农历月为农历闰月。\n\n为什么农历平均十九年七闰：\n\n- 朔望月平均 29.5306 天，两个朔日可能相差 30 天或 29 天，即大小月的区别。\n- 回归年平均 365.2422 天。一个回归年里一定有 24 个节气。\n- 两者相除，一个回归年平均有 12.368 个朔望月。\n- 0.368 \\* 19 = 6.992\n\n## 生辰八字\n\n生辰八字是出生的年月日时刻向天干地支的八个字的映射，它不是按现行农历排的，但节气和年柱可以参考农历来做判断。由年柱、月柱、日柱、时柱组成，每个柱由一个天干和一个地支组成。\n\n- 天干：甲乙丙丁午己庚辛壬癸\n- 地支：子丑寅卯辰巳午未申酉戌亥\n- 干支：甲子到癸亥，共 60 个\n\n排柱：\n\n- 年柱：在立春之前出生的属于上一年，否则属于本年。\n- 月柱：按相隔的两个节气划分一个月\n  - 正月：立春至惊蛰前一日\n  - 十二月：小寒至立春前一日\n  - 天干：正月的天干 = 年天干 +2\n  - 地支：十一月为子，正月为寅，二月为卯，依次类推\n- 日柱：在北京时间 23 点到 24 点出生的属于后一天，不属于当天。注意这个算法可能会影响月柱\n  - 1949 年 10 月 1 日 = 甲子，60 天一循环。\n  - 2001 年 1 月 1 日巧合地 = 甲子。参考[日期计算器](https://tool.lu/datecalc/)\n- 经笔者单一数据的验证，[天气万年历](https://wannianli.tianqi.com/)的年月日柱是准的，如果不考虑时辰的话。\n- 时柱：古人把一天分为十二个时辰，从子时到亥时。\n  - 亥时（人定）相当于现在的晚上 9 点到 11 点，人和猪都该睡觉了，也叫二更。\n  - 一更（黄昏）是晚上 7 点到 9 点，是戌时，太阳已经落山了，狗开始守门了。\n  - 三更（夜半）是次日的子时，是现在的 11 点到次日 1 点。五更（平旦）是寅时，凌晨三点到五点。\n  - 地支：等于时辰的地支\n  - 天干：参考百度百科的[时辰干支查算表](https://baike.baidu.com/item/%E7%94%9F%E8%BE%B0%E5%85%AB%E5%AD%97)，起始点是：日干支甲己 + 子时 = 甲子。\n","slug":"时间和历法","published":1,"updated":"2025-09-14T14:51:19.739Z","__permalink":"time.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lno000g5ws68rf4gtj1","content":"<p>一些没弄明白的问题。</p>\n<h2 id=\"现在是几点\">现在是几点</h2>\n<p>来自原子钟的时间是国际原子时\nTAI，它代表了秒的定义最准确的实现。各独立地方的原子时 TA (k)\n定期传送给法国巴黎的国际权度局 BIPM。</p>\n<p>来自天文观测的时间是世界时\nUT，它代表了地球实际自转的节律，现在使用的是\nUT1。由于地球的自转速度不是固定的，长期看来有减慢的趋势，所以 UT1\n的秒长和 TAI 不一样。</p>\n<p>来自 NTP 服务器和卫星信号的时间是协调世界时\nUTC，是我们在手机电脑上看到的时间。东八区的北京时间是 UTC 加上 8\n个小时，是 <span id=\"currentTime\"></span></p>\n<script>\nfunction updateTime() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以要+1\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    const formattedTime = `${year} 年 ${month} 月 ${day} 日 ${hours} 时 ${minutes} 分 ${seconds} 秒。`;\n    document.getElementById('currentTime').textContent = formattedTime;\n}\nwindow.onload = function() {\n    updateTime();\n    setInterval(updateTime, 1000);\n};\n</script>\n<p>UTC 的秒长遵循 TAI，节律遵循 UT1。当 UT1 与 UTC 的时间差接近 0.9\n秒时，会向 UTC 里插入一个闰秒，以确保 UTC 与 UT1 之间的时间差不超过 0.9\n秒。闰秒的时刻类似 23:59:60，会引起部分软件出 BUG。所以在 2022 年 11\n月的第 27 届国际计量大会上，科学家和政府代表投票决定到 2035\n年取消闰秒。中国科学院国家授时中心每月的<a href=\"https://nadc.china-vo.org/timedb/TimeFrequency_Bulletin\">《时间频率公报》</a>里有\nTAI、UT1 与 UTC 的差值，和下一次的闰秒预告。</p>\n<p>UNIX 时间是从 UTC 1970 年 1 月 1 日 0 时 0 分 0\n秒起至现在的总秒数，不包括闰秒。对于记录 UNIX 时间的 32\n位有符号整数变量来说，它的最大值是 2^31-1，从上述时间向后推这些秒后，是\n2038 年 1 月 19 日 3 时 14 分 07 秒。在下一秒，用于保存时间的变量会变成\n-2^31，时间会变成 1901 年 12 月 13 日，这被称为 2038 年问题。如果用 32\n位无符号整数表示 UNIX 时间，问题会延后到 2106 年。如果用 64\n位有符号整数会延后到 2922 亿年后。</p>\n<h2 id=\"一天有多长时间\">一天有多长时间</h2>\n<p>恒星日是以遥远的恒星为参照物，地球自转 360 度的时间，约为 23 小时 56\n分钟 4\n秒。恒星日的长度不是固定的，因为地球的自转速度不是固定的，自转轴也不是固定的。地球表面和内部的物质运动造成自转轴和极点在地球表面移动，称极移。</p>\n<p>真太阳日是 UT1 的参照，UT1 对 UT0\n做了极移的修正，是一个正午到下一个正午太阳连续两次过上中天的时间，是地球自转约\n360 度 59\n分的时间。因为地球除了自转，还会绕太阳公转，在自转一周之后地球已经不在原来的公转位置上了，还需要额外转约\n59 分才能使原来的点对准太阳。</p>\n<p>平太阳日是 UTC 的参照，是真太阳日的平均，长度是固定的 24\n小时，是我们现在所说的一天。</p>\n<h2 id=\"一年有多长时间\">一年有多长时间</h2>\n<p>恒星年是以遥远的恒星为参照物，地球的轨道周期，地球绕太阳公转 360\n度的时间，约 365.2564 平太阳日。</p>\n<p>回归年是以地球为参照物，太阳连续两次过春分点的时间。春分点是天赤道和黄道的交点，黄道是太阳绕地球转的轨道，如果把地球看作是静止在一个位置上的，且在不观测其他天体的情况下，太阳就是绕着地球转的。</p>\n<p>回归年的长度不是固定的，因为地球的自转轴不是固定的。太阳、月球及其他行星作用在地球赤道隆起部分的引力矩引起地轴进动。进动就是一个快倒下的陀螺，它的转轴会在一个圆锥面上旋转。在地轴进动的同时，其他细微的抖动称章动。地轴进动和章动引起岁差，即春分点的变化。</p>\n<p><img src=\"/blog/images/ecliptic.jpg\"></p>\n<p>在黄道上的点取平均值的年称为平回归年，当前的平回归年约 365.2422\n平太阳日。而现行公历的平年是 365 天，大约每四年就会有一天的误差：</p>\n<ul>\n<li>0.2422 * 4 = 0.9688</li>\n<li>0.2422 * 100 = 24.22</li>\n<li>0.2422 * 400 = 96.88</li>\n</ul>\n<p>所以现行公历每四年闰一天，每 100 年闰 24 天，每 400 年闰 97\n天，闰的一天加到二月里。准确地说，年份能被 400 整除的是闰年，能被 4\n整除且不能被 100 整除的也是闰年，剩下的是平年。</p>\n<h2 id=\"儒略历和格里历\">儒略历和格里历</h2>\n<p>公元前 46\n年，罗马共和国的儒略・凯萨采纳埃及数学家兼天文学家索西琴尼的计算提出了儒略历，是简单的四年闰一次。儒略历从公元前\n45 年 1 月 1 日开始实施，这是第一次修 BUG。</p>\n<p>这一改革原本可以顺利实施，但祭司们执行错了，即他们每三年而不是每四年就增加一个闰日。这个错误持续了\n36 年，在此期间多插入了 3\n个不必要的闰日。直到这个错误被发现后，奥古斯都下令在接下来的十二年中不再增加任何闰日，以此来纠正之前因祭司多加的\n3 天，这是第二次修 BUG。</p>\n<p>直到公元 4 年以后，儒略历才按照恺撒的意图运行，所以下一个闰年是公元 8\n年，此后每隔四年就有一个闰年。平均一年 365.25\n天，仍然与平回归年的天数有差异。</p>\n<p>误差累积到了 1582\n年，复活节的日期与春分相差甚远，罗马教皇格里高利十三世将儒略历改为意大利医生兼哲学家阿洛伊修斯的历法，把日历年的平均长度从\n365.25 天减少到 365.2425 天，即现行的闰年方式。规定 1582 年 10 月 4\n日的后一天是 10 月 15 日，以弥补误差，这是第三次修\nBUG。即现行的格里历、公历。</p>\n<p>所以，更准确地说是：</p>\n<ul>\n<li>在 1583 年及以后的格里历里，年份能被 400 整除的是闰年，能被 4\n整除且不能被 100 整除的也是闰年，剩下的是平年。闰年有 366 天，平年有 365\n天。</li>\n<li>在格里历里，1582 年有 355 天；在儒略历里，1582 年有 365 天。</li>\n<li>在 4 年至 1581 年的儒略历里，能被 4 整除的必定是闰年 366\n天，剩下的都是平年 365 天。</li>\n<li>在前 45 年至 3 年的儒略历里，挺混乱的，参考 <a href=\"https://en.wikipedia.org/wiki/Julian_calendar\">Julian\ncalendar</a>。</li>\n<li>在儒略历实施的前一年（公元前 46 年），罗马当年里有 445 天。</li>\n<li>在前 47 年及之前的罗马历法里，平年有 355 天，闰年有 377 或 378\n天。</li>\n</ul>\n<h2 id=\"公元纪年和世纪\">公元纪年和世纪</h2>\n<p>公历（格里历）和公元纪年的意思不一样，前者是历法，后者是年号。公元纪年最初是基于儒略历的，6\n世纪的时候，东罗马帝国的僧侣狄奥尼修斯把耶稣基督诞生的那一年作为公元 1\n年（Anno Domini 1，即主的年份 1 年），在此之前的为公元前（Before\nChrist）。</p>\n<p>世纪是基于公元纪年体系来划分的时间单位，一个世纪有 100 年。</p>\n<ul>\n<li>没有公元 0 年。</li>\n<li>1 世纪的第一天是 1 年 1 月 1 日。它的前一天是前 1\n世纪的最后一天，是前 1 年 12 月 31 日。</li>\n<li>公元前 5 世纪是前 500 年的第一天到前 401 年的最后一天。</li>\n<li>20 世纪是 1901 年 1 月 1 日到 2000 年 12 月 31 日。</li>\n</ul>\n<h2 id=\"一个月有多长时间\">一个月有多长时间</h2>\n<p>恒星月是以遥远的恒星为参照物，月球的轨道周期，月球绕地球公转 360\n度的时间，约 27.32166 天。地球和月球的质心在距离地心约 4671\n公里，即地球赤道半径约 0.73 倍的地球内部，两者各自围绕着质心运转。</p>\n<p>回归月是月球连续两次通过天空同一点的平均时间，约 27.32158\n天。由于月亮是不会发光的，它反射的是太阳的光，所以我们不像用回归年一样用它编历法。</p>\n<p>朔望月是在地球上看到的月亮的一个完整的阴晴圆缺周期，平均 29.5306\n天。朔为新月，望为满月。在月球绕地球公转的同时，地球也在围绕太阳公转。当月球完成一次公转回到相同位置时，地球已经沿着其公转轨道前进了一段距离，月球需要额外的时间才能再次与太阳对齐形成新月或满月，所以朔望月比回归月长。</p>\n<p><img src=\"/blog/images/moon.jpg\"></p>\n<p>当月球相对于地球离阳光更近时，在地球上看到的是新月：</p>\n<p><img src=\"/blog/images/shuo.webp\"></p>\n<p>当地球相对于月球离阳光更近时，在地球上看到的是满月：</p>\n<p><img src=\"/blog/images/wang.webp\"></p>\n<p>图片来自 <a href=\"https://www.earthspacelab.com/app/moon-phases/zh\">Earth Space\nLab</a>。</p>\n<h2 id=\"农历\">农历</h2>\n<p>以回归年为基础制定的历法叫阳历，如儒略历和格里历；以朔望月为基础制定的历法叫阴历，如伊斯兰历。</p>\n<p>我国现行的农历是阴阳合历，月长遵循朔望月，通过闰月来确保与回归年的天数相差不大。</p>\n<p>农历是怎么制定的：根据 <a href=\"https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=E107EA4DE9725EDF819F33C60A44B296\">GB/T\n33661-2017\n农历的编算和颁行</a>，它的基础是月球和太阳的地心视黄经，参考的是国际地球自转和参考系服务规范（<a href=\"https://www.iers.org/IERS/EN/DataProducts/Conventions/conventions.html\">IERS\nConventions</a>）的模型。</p>\n<ul>\n<li>一天的范围是北京时间 0 时到 24 时；</li>\n<li>二十四节气为一个回归年里，包含太阳地心视黄经为 <span class=\"math inline\">\\(15k\\)</span> 度的时刻的一天，<span class=\"math inline\">\\(k \\in [0,23] \\cap \\mathbb{Z}\\)</span>，其中春分为\n0 度。</li>\n<li>中气是二十四节气中从冬至开始，逢奇序数的节气。即冬至，大雪，……，春分，谷雨，……</li>\n<li> 包含月球和太阳的地心视黄经相等时刻的一天为朔日，为农历月的第一天；</li>\n<li>包含冬至在内的农历月为农历十一月；</li>\n<li>农历十一月向后数（不包括闰月）的第二个月为农历年的第一个月，即正月；</li>\n<li>若从某个农历十一月到下个农历十一月（左闭右开）之间有 13\n个农历月，则需要置闰。置闰规则为：取其中最先出现的一个不包含中气的农历月为农历闰月。</li>\n</ul>\n<p>为什么农历平均十九年七闰：</p>\n<ul>\n<li>朔望月平均 29.5306 天，两个朔日可能相差 30 天或 29\n天，即大小月的区别。</li>\n<li>回归年平均 365.2422 天。一个回归年里一定有 24 个节气。</li>\n<li>两者相除，一个回归年平均有 12.368 个朔望月。</li>\n<li>0.368 * 19 = 6.992</li>\n</ul>\n<h2 id=\"生辰八字\">生辰八字</h2>\n<p>生辰八字是出生的年月日时刻向天干地支的八个字的映射，它不是按现行农历排的，但节气和年柱可以参考农历来做判断。由年柱、月柱、日柱、时柱组成，每个柱由一个天干和一个地支组成。</p>\n<ul>\n<li>天干：甲乙丙丁午己庚辛壬癸</li>\n<li>地支：子丑寅卯辰巳午未申酉戌亥</li>\n<li>干支：甲子到癸亥，共 60 个</li>\n</ul>\n<p>排柱：</p>\n<ul>\n<li>年柱：在立春之前出生的属于上一年，否则属于本年。</li>\n<li>月柱：按相隔的两个节气划分一个月\n<ul>\n<li>正月：立春至惊蛰前一日</li>\n<li>十二月：小寒至立春前一日</li>\n<li>天干：正月的天干 = 年天干 +2</li>\n<li> 地支：十一月为子，正月为寅，二月为卯，依次类推</li>\n</ul></li>\n<li>日柱：在北京时间 23 点到 24\n点出生的属于后一天，不属于当天。注意这个算法可能会影响月柱\n<ul>\n<li>1949 年 10 月 1 日 = 甲子，60 天一循环。</li>\n<li>2001 年 1 月 1 日巧合地 = 甲子。参考<a href=\"https://tool.lu/datecalc/\">日期计算器</a></li>\n</ul></li>\n<li>经笔者单一数据的验证，<a href=\"https://wannianli.tianqi.com/\">天气万年历</a>的年月日柱是准的，如果不考虑时辰的话。</li>\n<li>时柱：古人把一天分为十二个时辰，从子时到亥时。\n<ul>\n<li>亥时（人定）相当于现在的晚上 9 点到 11\n点，人和猪都该睡觉了，也叫二更。</li>\n<li>一更（黄昏）是晚上 7 点到 9\n点，是戌时，太阳已经落山了，狗开始守门了。</li>\n<li>三更（夜半）是次日的子时，是现在的 11 点到次日 1\n点。五更（平旦）是寅时，凌晨三点到五点。</li>\n<li>地支：等于时辰的地支</li>\n<li>天干：参考百度百科的<a href=\"https://baike.baidu.com/item/%E7%94%9F%E8%BE%B0%E5%85%AB%E5%AD%97\">时辰干支查算表</a>，起始点是：日干支甲己\n+ 子时 = 甲子。</li>\n</ul></li>\n</ul>\n","excerpt":"","more":"<p>一些没弄明白的问题。</p>\n<h2 id=\"现在是几点\">现在是几点</h2>\n<p>来自原子钟的时间是国际原子时\nTAI，它代表了秒的定义最准确的实现。各独立地方的原子时 TA (k)\n定期传送给法国巴黎的国际权度局 BIPM。</p>\n<p>来自天文观测的时间是世界时\nUT，它代表了地球实际自转的节律，现在使用的是\nUT1。由于地球的自转速度不是固定的，长期看来有减慢的趋势，所以 UT1\n的秒长和 TAI 不一样。</p>\n<p>来自 NTP 服务器和卫星信号的时间是协调世界时\nUTC，是我们在手机电脑上看到的时间。东八区的北京时间是 UTC 加上 8\n个小时，是 <span id=\"currentTime\"></span></p>\n<script>\nfunction updateTime() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // 月份从0开始，所以要+1\n    const day = String(now.getDate()).padStart(2, '0');\n    const hours = String(now.getHours()).padStart(2, '0');\n    const minutes = String(now.getMinutes()).padStart(2, '0');\n    const seconds = String(now.getSeconds()).padStart(2, '0');\n    const formattedTime = `${year} 年 ${month} 月 ${day} 日 ${hours} 时 ${minutes} 分 ${seconds} 秒。`;\n    document.getElementById('currentTime').textContent = formattedTime;\n}\nwindow.onload = function() {\n    updateTime();\n    setInterval(updateTime, 1000);\n};\n</script>\n<p>UTC 的秒长遵循 TAI，节律遵循 UT1。当 UT1 与 UTC 的时间差接近 0.9\n秒时，会向 UTC 里插入一个闰秒，以确保 UTC 与 UT1 之间的时间差不超过 0.9\n秒。闰秒的时刻类似 23:59:60，会引起部分软件出 BUG。所以在 2022 年 11\n月的第 27 届国际计量大会上，科学家和政府代表投票决定到 2035\n年取消闰秒。中国科学院国家授时中心每月的<a href=\"https://nadc.china-vo.org/timedb/TimeFrequency_Bulletin\">《时间频率公报》</a>里有\nTAI、UT1 与 UTC 的差值，和下一次的闰秒预告。</p>\n<p>UNIX 时间是从 UTC 1970 年 1 月 1 日 0 时 0 分 0\n秒起至现在的总秒数，不包括闰秒。对于记录 UNIX 时间的 32\n位有符号整数变量来说，它的最大值是 2^31-1，从上述时间向后推这些秒后，是\n2038 年 1 月 19 日 3 时 14 分 07 秒。在下一秒，用于保存时间的变量会变成\n-2^31，时间会变成 1901 年 12 月 13 日，这被称为 2038 年问题。如果用 32\n位无符号整数表示 UNIX 时间，问题会延后到 2106 年。如果用 64\n位有符号整数会延后到 2922 亿年后。</p>\n<h2 id=\"一天有多长时间\">一天有多长时间</h2>\n<p>恒星日是以遥远的恒星为参照物，地球自转 360 度的时间，约为 23 小时 56\n分钟 4\n秒。恒星日的长度不是固定的，因为地球的自转速度不是固定的，自转轴也不是固定的。地球表面和内部的物质运动造成自转轴和极点在地球表面移动，称极移。</p>\n<p>真太阳日是 UT1 的参照，UT1 对 UT0\n做了极移的修正，是一个正午到下一个正午太阳连续两次过上中天的时间，是地球自转约\n360 度 59\n分的时间。因为地球除了自转，还会绕太阳公转，在自转一周之后地球已经不在原来的公转位置上了，还需要额外转约\n59 分才能使原来的点对准太阳。</p>\n<p>平太阳日是 UTC 的参照，是真太阳日的平均，长度是固定的 24\n小时，是我们现在所说的一天。</p>\n<h2 id=\"一年有多长时间\">一年有多长时间</h2>\n<p>恒星年是以遥远的恒星为参照物，地球的轨道周期，地球绕太阳公转 360\n度的时间，约 365.2564 平太阳日。</p>\n<p>回归年是以地球为参照物，太阳连续两次过春分点的时间。春分点是天赤道和黄道的交点，黄道是太阳绕地球转的轨道，如果把地球看作是静止在一个位置上的，且在不观测其他天体的情况下，太阳就是绕着地球转的。</p>\n<p>回归年的长度不是固定的，因为地球的自转轴不是固定的。太阳、月球及其他行星作用在地球赤道隆起部分的引力矩引起地轴进动。进动就是一个快倒下的陀螺，它的转轴会在一个圆锥面上旋转。在地轴进动的同时，其他细微的抖动称章动。地轴进动和章动引起岁差，即春分点的变化。</p>\n<p><img src=\"/blog/images/ecliptic.jpg\"></p>\n<p>在黄道上的点取平均值的年称为平回归年，当前的平回归年约 365.2422\n平太阳日。而现行公历的平年是 365 天，大约每四年就会有一天的误差：</p>\n<ul>\n<li>0.2422 * 4 = 0.9688</li>\n<li>0.2422 * 100 = 24.22</li>\n<li>0.2422 * 400 = 96.88</li>\n</ul>\n<p>所以现行公历每四年闰一天，每 100 年闰 24 天，每 400 年闰 97\n天，闰的一天加到二月里。准确地说，年份能被 400 整除的是闰年，能被 4\n整除且不能被 100 整除的也是闰年，剩下的是平年。</p>\n<h2 id=\"儒略历和格里历\">儒略历和格里历</h2>\n<p>公元前 46\n年，罗马共和国的儒略・凯萨采纳埃及数学家兼天文学家索西琴尼的计算提出了儒略历，是简单的四年闰一次。儒略历从公元前\n45 年 1 月 1 日开始实施，这是第一次修 BUG。</p>\n<p>这一改革原本可以顺利实施，但祭司们执行错了，即他们每三年而不是每四年就增加一个闰日。这个错误持续了\n36 年，在此期间多插入了 3\n个不必要的闰日。直到这个错误被发现后，奥古斯都下令在接下来的十二年中不再增加任何闰日，以此来纠正之前因祭司多加的\n3 天，这是第二次修 BUG。</p>\n<p>直到公元 4 年以后，儒略历才按照恺撒的意图运行，所以下一个闰年是公元 8\n年，此后每隔四年就有一个闰年。平均一年 365.25\n天，仍然与平回归年的天数有差异。</p>\n<p>误差累积到了 1582\n年，复活节的日期与春分相差甚远，罗马教皇格里高利十三世将儒略历改为意大利医生兼哲学家阿洛伊修斯的历法，把日历年的平均长度从\n365.25 天减少到 365.2425 天，即现行的闰年方式。规定 1582 年 10 月 4\n日的后一天是 10 月 15 日，以弥补误差，这是第三次修\nBUG。即现行的格里历、公历。</p>\n<p>所以，更准确地说是：</p>\n<ul>\n<li>在 1583 年及以后的格里历里，年份能被 400 整除的是闰年，能被 4\n整除且不能被 100 整除的也是闰年，剩下的是平年。闰年有 366 天，平年有 365\n天。</li>\n<li>在格里历里，1582 年有 355 天；在儒略历里，1582 年有 365 天。</li>\n<li>在 4 年至 1581 年的儒略历里，能被 4 整除的必定是闰年 366\n天，剩下的都是平年 365 天。</li>\n<li>在前 45 年至 3 年的儒略历里，挺混乱的，参考 <a href=\"https://en.wikipedia.org/wiki/Julian_calendar\">Julian\ncalendar</a>。</li>\n<li>在儒略历实施的前一年（公元前 46 年），罗马当年里有 445 天。</li>\n<li>在前 47 年及之前的罗马历法里，平年有 355 天，闰年有 377 或 378\n天。</li>\n</ul>\n<h2 id=\"公元纪年和世纪\">公元纪年和世纪</h2>\n<p>公历（格里历）和公元纪年的意思不一样，前者是历法，后者是年号。公元纪年最初是基于儒略历的，6\n世纪的时候，东罗马帝国的僧侣狄奥尼修斯把耶稣基督诞生的那一年作为公元 1\n年（Anno Domini 1，即主的年份 1 年），在此之前的为公元前（Before\nChrist）。</p>\n<p>世纪是基于公元纪年体系来划分的时间单位，一个世纪有 100 年。</p>\n<ul>\n<li>没有公元 0 年。</li>\n<li>1 世纪的第一天是 1 年 1 月 1 日。它的前一天是前 1\n世纪的最后一天，是前 1 年 12 月 31 日。</li>\n<li>公元前 5 世纪是前 500 年的第一天到前 401 年的最后一天。</li>\n<li>20 世纪是 1901 年 1 月 1 日到 2000 年 12 月 31 日。</li>\n</ul>\n<h2 id=\"一个月有多长时间\">一个月有多长时间</h2>\n<p>恒星月是以遥远的恒星为参照物，月球的轨道周期，月球绕地球公转 360\n度的时间，约 27.32166 天。地球和月球的质心在距离地心约 4671\n公里，即地球赤道半径约 0.73 倍的地球内部，两者各自围绕着质心运转。</p>\n<p>回归月是月球连续两次通过天空同一点的平均时间，约 27.32158\n天。由于月亮是不会发光的，它反射的是太阳的光，所以我们不像用回归年一样用它编历法。</p>\n<p>朔望月是在地球上看到的月亮的一个完整的阴晴圆缺周期，平均 29.5306\n天。朔为新月，望为满月。在月球绕地球公转的同时，地球也在围绕太阳公转。当月球完成一次公转回到相同位置时，地球已经沿着其公转轨道前进了一段距离，月球需要额外的时间才能再次与太阳对齐形成新月或满月，所以朔望月比回归月长。</p>\n<p><img src=\"/blog/images/moon.jpg\"></p>\n<p>当月球相对于地球离阳光更近时，在地球上看到的是新月：</p>\n<p><img src=\"/blog/images/shuo.webp\"></p>\n<p>当地球相对于月球离阳光更近时，在地球上看到的是满月：</p>\n<p><img src=\"/blog/images/wang.webp\"></p>\n<p>图片来自 <a href=\"https://www.earthspacelab.com/app/moon-phases/zh\">Earth Space\nLab</a>。</p>\n<h2 id=\"农历\">农历</h2>\n<p>以回归年为基础制定的历法叫阳历，如儒略历和格里历；以朔望月为基础制定的历法叫阴历，如伊斯兰历。</p>\n<p>我国现行的农历是阴阳合历，月长遵循朔望月，通过闰月来确保与回归年的天数相差不大。</p>\n<p>农历是怎么制定的：根据 <a href=\"https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=E107EA4DE9725EDF819F33C60A44B296\">GB/T\n33661-2017\n农历的编算和颁行</a>，它的基础是月球和太阳的地心视黄经，参考的是国际地球自转和参考系服务规范（<a href=\"https://www.iers.org/IERS/EN/DataProducts/Conventions/conventions.html\">IERS\nConventions</a>）的模型。</p>\n<ul>\n<li>一天的范围是北京时间 0 时到 24 时；</li>\n<li>二十四节气为一个回归年里，包含太阳地心视黄经为 <span class=\"math inline\">\\(15k\\)</span> 度的时刻的一天，<span class=\"math inline\">\\(k \\in [0,23] \\cap \\mathbb{Z}\\)</span>，其中春分为\n0 度。</li>\n<li>中气是二十四节气中从冬至开始，逢奇序数的节气。即冬至，大雪，……，春分，谷雨，……</li>\n<li> 包含月球和太阳的地心视黄经相等时刻的一天为朔日，为农历月的第一天；</li>\n<li>包含冬至在内的农历月为农历十一月；</li>\n<li>农历十一月向后数（不包括闰月）的第二个月为农历年的第一个月，即正月；</li>\n<li>若从某个农历十一月到下个农历十一月（左闭右开）之间有 13\n个农历月，则需要置闰。置闰规则为：取其中最先出现的一个不包含中气的农历月为农历闰月。</li>\n</ul>\n<p>为什么农历平均十九年七闰：</p>\n<ul>\n<li>朔望月平均 29.5306 天，两个朔日可能相差 30 天或 29\n天，即大小月的区别。</li>\n<li>回归年平均 365.2422 天。一个回归年里一定有 24 个节气。</li>\n<li>两者相除，一个回归年平均有 12.368 个朔望月。</li>\n<li>0.368 * 19 = 6.992</li>\n</ul>\n<h2 id=\"生辰八字\">生辰八字</h2>\n<p>生辰八字是出生的年月日时刻向天干地支的八个字的映射，它不是按现行农历排的，但节气和年柱可以参考农历来做判断。由年柱、月柱、日柱、时柱组成，每个柱由一个天干和一个地支组成。</p>\n<ul>\n<li>天干：甲乙丙丁午己庚辛壬癸</li>\n<li>地支：子丑寅卯辰巳午未申酉戌亥</li>\n<li>干支：甲子到癸亥，共 60 个</li>\n</ul>\n<p>排柱：</p>\n<ul>\n<li>年柱：在立春之前出生的属于上一年，否则属于本年。</li>\n<li>月柱：按相隔的两个节气划分一个月\n<ul>\n<li>正月：立春至惊蛰前一日</li>\n<li>十二月：小寒至立春前一日</li>\n<li>天干：正月的天干 = 年天干 +2</li>\n<li> 地支：十一月为子，正月为寅，二月为卯，依次类推</li>\n</ul></li>\n<li>日柱：在北京时间 23 点到 24\n点出生的属于后一天，不属于当天。注意这个算法可能会影响月柱\n<ul>\n<li>1949 年 10 月 1 日 = 甲子，60 天一循环。</li>\n<li>2001 年 1 月 1 日巧合地 = 甲子。参考<a href=\"https://tool.lu/datecalc/\">日期计算器</a></li>\n</ul></li>\n<li>经笔者单一数据的验证，<a href=\"https://wannianli.tianqi.com/\">天气万年历</a>的年月日柱是准的，如果不考虑时辰的话。</li>\n<li>时柱：古人把一天分为十二个时辰，从子时到亥时。\n<ul>\n<li>亥时（人定）相当于现在的晚上 9 点到 11\n点，人和猪都该睡觉了，也叫二更。</li>\n<li>一更（黄昏）是晚上 7 点到 9\n点，是戌时，太阳已经落山了，狗开始守门了。</li>\n<li>三更（夜半）是次日的子时，是现在的 11 点到次日 1\n点。五更（平旦）是寅时，凌晨三点到五点。</li>\n<li>地支：等于时辰的地支</li>\n<li>天干：参考百度百科的<a href=\"https://baike.baidu.com/item/%E7%94%9F%E8%BE%B0%E5%85%AB%E5%AD%97\">时辰干支查算表</a>，起始点是：日干支甲己\n+ 子时 = 甲子。</li>\n</ul></li>\n</ul>\n"},{"title":"献血的流程","date":"2024-12-09T16:00:00.000Z","_content":"\n## 全血\n\n1. 提前四小时要吃饭。找到献血点在哪里，然后过去。献血点的饮料和零食是免费的，不用提前买\n2. 微信扫码登记，填问卷问你的病史，做没做过大手术。如果你戴眼镜了，可能会有人问你有多少度，有没有视网膜之类的疾病。扫脸核对本人身份，填表签字。\n3. 量血压和脉搏，确保在正常范围内。如果你紧张导致血压高，可以歇几分钟\n4. 先在手指头上采少量血，涂到试纸上可以直接看出来血型\n5. 再在手背上抽一点血，测基本的指标是否达标，在几分钟之内出结果\n6. 全血一次可以献 200、300 或 400 毫升\n7. 坐在沙发上，两腿平放到高凳子上与腰同高。采血点为左上臂或右上臂，手里拿一块弹性的海绵，让你周期性地捏一下再松开，直到数分钟后采血完成\n8. 采血完后，对于采血的那只胳膊绑上绷带，40 分钟之后拆。该胳膊在之后的一段时间内不能提重物，不能做剧烈运动\n9. 采血完后待十几分钟，确保没有异常感受\n10. 领献血证和纪念品。献血证是一张双面的纸质卡片，纪念品有线上积分兑换的，也有线下的，线下的包括牛奶、背包、雨伞、娃娃之类的，然后离场\n11. 献完血之后吃主食，补充含蛋白质的食物如瘦肉、鸡蛋、牛奶，多喝水，不熬夜\n12. 对采的血做进一步的检查，在一个星期之内通过了会给你发短信\n\n<img src=\"/blog/images/donate-blood-1.webp\">\n\n13. 两次献全血之间需要隔 6 个月；全血到下次成分血要隔 3 个月；成分血到下次全血隔四个星期；两次成分血之间要隔两个星期，且一年最多献 24 次。\n\n## 成分血\n\n成分血可以献血小板。1U（治疗量）血小板在献血量统计上等价于 200ml 全血。血小板是需求最多的，它的保存时间是 5 天，像粒细胞（颗粒白细胞）是保存时间短的，干细胞需要提前加入中华骨髓库等配型，不是想献就能献的，所以一般都献血小板。\n\n合格标准：血小板 150\\*10^9/L 以上，血红蛋白 120g/L 以上，红细胞压积 50% 以下，ALT（转氨酶）50 以下。\n\n抽血有两种方式，可以打一根针或者两根针。一根针是先抽一部分，过滤之后再返输回去，分时间片循环；两根针是同时打到两根手臂上，一根抽完过滤之后另一根立马输送回去。前者相应地比后者时间长。笔者这次打的是一根针，1U 的血小板，约 1 至 1.5 小时，剩余所需时间在过程中由程序测算：\n\n<img src=\"/blog/images/platelet-collection.webp\">\n\n1U 的血小板是黄色的，看起来就几十 ml。另外还保留了一点血浆用于保存血小板。\n\n进采血的屋子前需要戴鞋套。抽血前和中途为了防止缺钙，会喝葡萄糖酸钙。除了返输过滤后的血液，也会返输生理盐水。柠檬酸钠用于抗凝。\n\n献完后几天之内可以恢复原来的浓度，所以它规定的最短间隔献血时间比全血短。\n\n## 路费报销\n\n在武汉血液中心献成分血可以报销路费。如果没有发票，报 50 元；如果有发票，报的钱比单程的两倍多一点，且最高 160 元。\n\n如果献血者最近有熬夜或者吃药，可能会导致转氨酶浓度升高，从而无法通过初筛，初筛不通过仍可报销路费。但如果连续三次都没有通过，第三次（或者第四次？）会不给报了。这可能为了防止有心人从中获利。\n\n还可以管饭，没吃饭也可以也先吃一顿，再验血。\n\n## 为什么\n\n根本原因是助人为乐，补偿自己以前的愿望；直接原因是可以加学分，以及把这个经历写出来让别人看；后补原因是新陈代谢、反向形成、预支。\n\n根据[《湖北省公民临床用血价格公示》](https://www.whblood.org.cn/common/onlyArticle/565557196893458432)，每 200 毫升全血 230 元，1U 血小板 1500 元。\n\n<img src=\"/blog/images/donate-blood-2.webp\">\n\n## 器官捐献\n\n1. 可以申请，也可以取消。申请了之后只是给你邮寄一张登记卡，是褐色的，看起来挺丑的，但是它可能蕴含着一种传承的意思，是皮肤、树和土地的颜色。\n2. 需要等到死亡之后，通过医学评估，且所有的直系亲属（父母、配偶、成年子女）同意后才可捐献\n3. 不会影响抢救和治疗\n\n<img src=\"/blog/images/donate-organ.webp\">\n","source":"_posts/献血的流程.md","raw":"---\ntitle: 献血的流程\ndate: 2024-12-10 00:00:00\npermalink: donate-blood.html\n---\n\n## 全血\n\n1. 提前四小时要吃饭。找到献血点在哪里，然后过去。献血点的饮料和零食是免费的，不用提前买\n2. 微信扫码登记，填问卷问你的病史，做没做过大手术。如果你戴眼镜了，可能会有人问你有多少度，有没有视网膜之类的疾病。扫脸核对本人身份，填表签字。\n3. 量血压和脉搏，确保在正常范围内。如果你紧张导致血压高，可以歇几分钟\n4. 先在手指头上采少量血，涂到试纸上可以直接看出来血型\n5. 再在手背上抽一点血，测基本的指标是否达标，在几分钟之内出结果\n6. 全血一次可以献 200、300 或 400 毫升\n7. 坐在沙发上，两腿平放到高凳子上与腰同高。采血点为左上臂或右上臂，手里拿一块弹性的海绵，让你周期性地捏一下再松开，直到数分钟后采血完成\n8. 采血完后，对于采血的那只胳膊绑上绷带，40 分钟之后拆。该胳膊在之后的一段时间内不能提重物，不能做剧烈运动\n9. 采血完后待十几分钟，确保没有异常感受\n10. 领献血证和纪念品。献血证是一张双面的纸质卡片，纪念品有线上积分兑换的，也有线下的，线下的包括牛奶、背包、雨伞、娃娃之类的，然后离场\n11. 献完血之后吃主食，补充含蛋白质的食物如瘦肉、鸡蛋、牛奶，多喝水，不熬夜\n12. 对采的血做进一步的检查，在一个星期之内通过了会给你发短信\n\n<img src=\"/blog/images/donate-blood-1.webp\">\n\n13. 两次献全血之间需要隔 6 个月；全血到下次成分血要隔 3 个月；成分血到下次全血隔四个星期；两次成分血之间要隔两个星期，且一年最多献 24 次。\n\n## 成分血\n\n成分血可以献血小板。1U（治疗量）血小板在献血量统计上等价于 200ml 全血。血小板是需求最多的，它的保存时间是 5 天，像粒细胞（颗粒白细胞）是保存时间短的，干细胞需要提前加入中华骨髓库等配型，不是想献就能献的，所以一般都献血小板。\n\n合格标准：血小板 150\\*10^9/L 以上，血红蛋白 120g/L 以上，红细胞压积 50% 以下，ALT（转氨酶）50 以下。\n\n抽血有两种方式，可以打一根针或者两根针。一根针是先抽一部分，过滤之后再返输回去，分时间片循环；两根针是同时打到两根手臂上，一根抽完过滤之后另一根立马输送回去。前者相应地比后者时间长。笔者这次打的是一根针，1U 的血小板，约 1 至 1.5 小时，剩余所需时间在过程中由程序测算：\n\n<img src=\"/blog/images/platelet-collection.webp\">\n\n1U 的血小板是黄色的，看起来就几十 ml。另外还保留了一点血浆用于保存血小板。\n\n进采血的屋子前需要戴鞋套。抽血前和中途为了防止缺钙，会喝葡萄糖酸钙。除了返输过滤后的血液，也会返输生理盐水。柠檬酸钠用于抗凝。\n\n献完后几天之内可以恢复原来的浓度，所以它规定的最短间隔献血时间比全血短。\n\n## 路费报销\n\n在武汉血液中心献成分血可以报销路费。如果没有发票，报 50 元；如果有发票，报的钱比单程的两倍多一点，且最高 160 元。\n\n如果献血者最近有熬夜或者吃药，可能会导致转氨酶浓度升高，从而无法通过初筛，初筛不通过仍可报销路费。但如果连续三次都没有通过，第三次（或者第四次？）会不给报了。这可能为了防止有心人从中获利。\n\n还可以管饭，没吃饭也可以也先吃一顿，再验血。\n\n## 为什么\n\n根本原因是助人为乐，补偿自己以前的愿望；直接原因是可以加学分，以及把这个经历写出来让别人看；后补原因是新陈代谢、反向形成、预支。\n\n根据[《湖北省公民临床用血价格公示》](https://www.whblood.org.cn/common/onlyArticle/565557196893458432)，每 200 毫升全血 230 元，1U 血小板 1500 元。\n\n<img src=\"/blog/images/donate-blood-2.webp\">\n\n## 器官捐献\n\n1. 可以申请，也可以取消。申请了之后只是给你邮寄一张登记卡，是褐色的，看起来挺丑的，但是它可能蕴含着一种传承的意思，是皮肤、树和土地的颜色。\n2. 需要等到死亡之后，通过医学评估，且所有的直系亲属（父母、配偶、成年子女）同意后才可捐献\n3. 不会影响抢救和治疗\n\n<img src=\"/blog/images/donate-organ.webp\">\n","slug":"献血的流程","published":1,"updated":"2025-09-15T15:05:04.344Z","__permalink":"donate-blood.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lno000h5ws6fo5338a1","content":"<h2 id=\"全血\">全血</h2>\n<ol type=\"1\">\n<li>提前四小时要吃饭。找到献血点在哪里，然后过去。献血点的饮料和零食是免费的，不用提前买</li>\n<li>微信扫码登记，填问卷问你的病史，做没做过大手术。如果你戴眼镜了，可能会有人问你有多少度，有没有视网膜之类的疾病。扫脸核对本人身份，填表签字。</li>\n<li>量血压和脉搏，确保在正常范围内。如果你紧张导致血压高，可以歇几分钟</li>\n<li>先在手指头上采少量血，涂到试纸上可以直接看出来血型</li>\n<li>再在手背上抽一点血，测基本的指标是否达标，在几分钟之内出结果</li>\n<li>全血一次可以献 200、300 或 400 毫升</li>\n<li>坐在沙发上，两腿平放到高凳子上与腰同高。采血点为左上臂或右上臂，手里拿一块弹性的海绵，让你周期性地捏一下再松开，直到数分钟后采血完成</li>\n<li>采血完后，对于采血的那只胳膊绑上绷带，40\n分钟之后拆。该胳膊在之后的一段时间内不能提重物，不能做剧烈运动</li>\n<li>采血完后待十几分钟，确保没有异常感受</li>\n<li>领献血证和纪念品。献血证是一张双面的纸质卡片，纪念品有线上积分兑换的，也有线下的，线下的包括牛奶、背包、雨伞、娃娃之类的，然后离场</li>\n<li>献完血之后吃主食，补充含蛋白质的食物如瘦肉、鸡蛋、牛奶，多喝水，不熬夜</li>\n<li>对采的血做进一步的检查，在一个星期之内通过了会给你发短信</li>\n</ol>\n<p><img src=\"/blog/images/donate-blood-1.webp\"></p>\n<ol start=\"13\" type=\"1\">\n<li>两次献全血之间需要隔 6 个月；全血到下次成分血要隔 3\n个月；成分血到下次全血隔四个星期；两次成分血之间要隔两个星期，且一年最多献\n24 次。</li>\n</ol>\n<h2 id=\"成分血\">成分血</h2>\n<p>成分血可以献血小板。1U（治疗量）血小板在献血量统计上等价于 200ml\n全血。血小板是需求最多的，它的保存时间是 5\n天，像粒细胞（颗粒白细胞）是保存时间短的，干细胞需要提前加入中华骨髓库等配型，不是想献就能献的，所以一般都献血小板。</p>\n<p>合格标准：血小板 150*10^9/L 以上，血红蛋白 120g/L 以上，红细胞压积\n50% 以下，ALT（转氨酶）50 以下。</p>\n<p>抽血有两种方式，可以打一根针或者两根针。一根针是先抽一部分，过滤之后再返输回去，分时间片循环；两根针是同时打到两根手臂上，一根抽完过滤之后另一根立马输送回去。前者相应地比后者时间长。笔者这次打的是一根针，1U\n的血小板，约 1 至 1.5 小时，剩余所需时间在过程中由程序测算：</p>\n<p><img src=\"/blog/images/platelet-collection.webp\"></p>\n<p>1U 的血小板是黄色的，看起来就几十\nml。另外还保留了一点血浆用于保存血小板。</p>\n<p>进采血的屋子前需要戴鞋套。抽血前和中途为了防止缺钙，会喝葡萄糖酸钙。除了返输过滤后的血液，也会返输生理盐水。柠檬酸钠用于抗凝。</p>\n<p>献完后几天之内可以恢复原来的浓度，所以它规定的最短间隔献血时间比全血短。</p>\n<h2 id=\"路费报销\">路费报销</h2>\n<p>在武汉血液中心献成分血可以报销路费。如果没有发票，报 50\n元；如果有发票，报的钱比单程的两倍多一点，且最高 160 元。</p>\n<p>如果献血者最近有熬夜或者吃药，可能会导致转氨酶浓度升高，从而无法通过初筛，初筛不通过仍可报销路费。但如果连续三次都没有通过，第三次（或者第四次？）会不给报了。这可能为了防止有心人从中获利。</p>\n<p>还可以管饭，没吃饭也可以也先吃一顿，再验血。</p>\n<h2 id=\"为什么\">为什么</h2>\n<p>根本原因是助人为乐，补偿自己以前的愿望；直接原因是可以加学分，以及把这个经历写出来让别人看；后补原因是新陈代谢、反向形成、预支。</p>\n<p>根据<a href=\"https://www.whblood.org.cn/common/onlyArticle/565557196893458432\">《湖北省公民临床用血价格公示》</a>，每\n200 毫升全血 230 元，1U 血小板 1500 元。</p>\n<p><img src=\"/blog/images/donate-blood-2.webp\"></p>\n<h2 id=\"器官捐献\">器官捐献</h2>\n<ol type=\"1\">\n<li>可以申请，也可以取消。申请了之后只是给你邮寄一张登记卡，是褐色的，看起来挺丑的，但是它可能蕴含着一种传承的意思，是皮肤、树和土地的颜色。</li>\n<li>需要等到死亡之后，通过医学评估，且所有的直系亲属（父母、配偶、成年子女）同意后才可捐献</li>\n<li>不会影响抢救和治疗</li>\n</ol>\n<p><img src=\"/blog/images/donate-organ.webp\"></p>\n","excerpt":"","more":"<h2 id=\"全血\">全血</h2>\n<ol type=\"1\">\n<li>提前四小时要吃饭。找到献血点在哪里，然后过去。献血点的饮料和零食是免费的，不用提前买</li>\n<li>微信扫码登记，填问卷问你的病史，做没做过大手术。如果你戴眼镜了，可能会有人问你有多少度，有没有视网膜之类的疾病。扫脸核对本人身份，填表签字。</li>\n<li>量血压和脉搏，确保在正常范围内。如果你紧张导致血压高，可以歇几分钟</li>\n<li>先在手指头上采少量血，涂到试纸上可以直接看出来血型</li>\n<li>再在手背上抽一点血，测基本的指标是否达标，在几分钟之内出结果</li>\n<li>全血一次可以献 200、300 或 400 毫升</li>\n<li>坐在沙发上，两腿平放到高凳子上与腰同高。采血点为左上臂或右上臂，手里拿一块弹性的海绵，让你周期性地捏一下再松开，直到数分钟后采血完成</li>\n<li>采血完后，对于采血的那只胳膊绑上绷带，40\n分钟之后拆。该胳膊在之后的一段时间内不能提重物，不能做剧烈运动</li>\n<li>采血完后待十几分钟，确保没有异常感受</li>\n<li>领献血证和纪念品。献血证是一张双面的纸质卡片，纪念品有线上积分兑换的，也有线下的，线下的包括牛奶、背包、雨伞、娃娃之类的，然后离场</li>\n<li>献完血之后吃主食，补充含蛋白质的食物如瘦肉、鸡蛋、牛奶，多喝水，不熬夜</li>\n<li>对采的血做进一步的检查，在一个星期之内通过了会给你发短信</li>\n</ol>\n<p><img src=\"/blog/images/donate-blood-1.webp\"></p>\n<ol start=\"13\" type=\"1\">\n<li>两次献全血之间需要隔 6 个月；全血到下次成分血要隔 3\n个月；成分血到下次全血隔四个星期；两次成分血之间要隔两个星期，且一年最多献\n24 次。</li>\n</ol>\n<h2 id=\"成分血\">成分血</h2>\n<p>成分血可以献血小板。1U（治疗量）血小板在献血量统计上等价于 200ml\n全血。血小板是需求最多的，它的保存时间是 5\n天，像粒细胞（颗粒白细胞）是保存时间短的，干细胞需要提前加入中华骨髓库等配型，不是想献就能献的，所以一般都献血小板。</p>\n<p>合格标准：血小板 150*10^9/L 以上，血红蛋白 120g/L 以上，红细胞压积\n50% 以下，ALT（转氨酶）50 以下。</p>\n<p>抽血有两种方式，可以打一根针或者两根针。一根针是先抽一部分，过滤之后再返输回去，分时间片循环；两根针是同时打到两根手臂上，一根抽完过滤之后另一根立马输送回去。前者相应地比后者时间长。笔者这次打的是一根针，1U\n的血小板，约 1 至 1.5 小时，剩余所需时间在过程中由程序测算：</p>\n<p><img src=\"/blog/images/platelet-collection.webp\"></p>\n<p>1U 的血小板是黄色的，看起来就几十\nml。另外还保留了一点血浆用于保存血小板。</p>\n<p>进采血的屋子前需要戴鞋套。抽血前和中途为了防止缺钙，会喝葡萄糖酸钙。除了返输过滤后的血液，也会返输生理盐水。柠檬酸钠用于抗凝。</p>\n<p>献完后几天之内可以恢复原来的浓度，所以它规定的最短间隔献血时间比全血短。</p>\n<h2 id=\"路费报销\">路费报销</h2>\n<p>在武汉血液中心献成分血可以报销路费。如果没有发票，报 50\n元；如果有发票，报的钱比单程的两倍多一点，且最高 160 元。</p>\n<p>如果献血者最近有熬夜或者吃药，可能会导致转氨酶浓度升高，从而无法通过初筛，初筛不通过仍可报销路费。但如果连续三次都没有通过，第三次（或者第四次？）会不给报了。这可能为了防止有心人从中获利。</p>\n<p>还可以管饭，没吃饭也可以也先吃一顿，再验血。</p>\n<h2 id=\"为什么\">为什么</h2>\n<p>根本原因是助人为乐，补偿自己以前的愿望；直接原因是可以加学分，以及把这个经历写出来让别人看；后补原因是新陈代谢、反向形成、预支。</p>\n<p>根据<a href=\"https://www.whblood.org.cn/common/onlyArticle/565557196893458432\">《湖北省公民临床用血价格公示》</a>，每\n200 毫升全血 230 元，1U 血小板 1500 元。</p>\n<p><img src=\"/blog/images/donate-blood-2.webp\"></p>\n<h2 id=\"器官捐献\">器官捐献</h2>\n<ol type=\"1\">\n<li>可以申请，也可以取消。申请了之后只是给你邮寄一张登记卡，是褐色的，看起来挺丑的，但是它可能蕴含着一种传承的意思，是皮肤、树和土地的颜色。</li>\n<li>需要等到死亡之后，通过医学评估，且所有的直系亲属（父母、配偶、成年子女）同意后才可捐献</li>\n<li>不会影响抢救和治疗</li>\n</ol>\n<p><img src=\"/blog/images/donate-organ.webp\"></p>\n"},{"title":"用 GIMP 让拍摄的纸上的字更清晰","date":"2023-09-14T06:30:00.000Z","_content":"\n0. [GIMP](https://www.gimp.org/downloads/)\n1. 拍摄\n2. 裁剪\n3. **彩色转黑白**\n4. **白平衡**\n5. 导出图片\n\n---\n\n1. 首先要拍清晰，手不抖。\n   <img src=\"/blog/images/hw-0.webp\">\n2. 在拍完之后适当裁剪。\n3. - GIMP -> 文件 -> 打开 -> 选择图片\n   - GIMP -> 颜色 -> 去色 -> 彩色到灰度\n     <img src=\"/blog/images/hw-1.webp\">\n\n看起来雾蒙蒙的，而且太白了。\n\n4. 白平衡\n\n   - GIMP -> 颜色 -> 自动 -> 白平衡\n     <img src=\"/blog/images/hw-2.webp\">\n     看起来好多了。\n\n5. 导出图片\n\n   - GIMP -> 文件 -> 导出为 -> 文件名.jpg -> 导出\n   - 其中，【保存 Exif 数据】、【保存 XMP 数据】、【保存 IPTC 数据】、【保存缩略图】、【保存色彩配置文件】都不用选。【高级选项】调了没看出明显区别，所以不用调。\n   - 导出质量设成 `10` 就行，质量越低文件越小，只要还能分辨出字就行。\n   - 笔者用 `10` 导出看起来和导出前没啥区别，但是用 `0` 导出就：\n     <img src=\"/blog/images/hw-3.webp\">\n     有点恐怖。~~但是更清楚了~~\n","source":"_posts/用GIMP让拍摄的纸上的字更清晰.md","raw":"---\ntitle: 用 GIMP 让拍摄的纸上的字更清晰\ndate: 2023-09-14 14:30:00\npermalink: gimp-make-words-on-the-photographed-paper-clearer.html\n---\n\n0. [GIMP](https://www.gimp.org/downloads/)\n1. 拍摄\n2. 裁剪\n3. **彩色转黑白**\n4. **白平衡**\n5. 导出图片\n\n---\n\n1. 首先要拍清晰，手不抖。\n   <img src=\"/blog/images/hw-0.webp\">\n2. 在拍完之后适当裁剪。\n3. - GIMP -> 文件 -> 打开 -> 选择图片\n   - GIMP -> 颜色 -> 去色 -> 彩色到灰度\n     <img src=\"/blog/images/hw-1.webp\">\n\n看起来雾蒙蒙的，而且太白了。\n\n4. 白平衡\n\n   - GIMP -> 颜色 -> 自动 -> 白平衡\n     <img src=\"/blog/images/hw-2.webp\">\n     看起来好多了。\n\n5. 导出图片\n\n   - GIMP -> 文件 -> 导出为 -> 文件名.jpg -> 导出\n   - 其中，【保存 Exif 数据】、【保存 XMP 数据】、【保存 IPTC 数据】、【保存缩略图】、【保存色彩配置文件】都不用选。【高级选项】调了没看出明显区别，所以不用调。\n   - 导出质量设成 `10` 就行，质量越低文件越小，只要还能分辨出字就行。\n   - 笔者用 `10` 导出看起来和导出前没啥区别，但是用 `0` 导出就：\n     <img src=\"/blog/images/hw-3.webp\">\n     有点恐怖。~~但是更清楚了~~\n","slug":"用GIMP让拍摄的纸上的字更清晰","published":1,"updated":"2025-09-14T14:52:08.903Z","__permalink":"gimp-make-words-on-the-photographed-paper-clearer.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnp000i5ws614gcgv44","content":"<ol start=\"0\" type=\"1\">\n<li><a href=\"https://www.gimp.org/downloads/\">GIMP</a></li>\n<li> 拍摄</li>\n<li>裁剪</li>\n<li><strong>彩色转黑白</strong></li>\n<li><strong>白平衡</strong></li>\n<li>导出图片</li>\n</ol>\n<hr>\n<ol type=\"1\">\n<li>首先要拍清晰，手不抖。 <img src=\"/blog/images/hw-0.webp\"></li>\n<li>在拍完之后适当裁剪。</li>\n<li><ul>\n<li>GIMP -&gt; 文件 -&gt; 打开 -&gt; 选择图片</li>\n<li> GIMP -&gt; 颜色 -&gt; 去色 -&gt; 彩色到灰度\n<img src=\"/blog/images/hw-1.webp\"></li>\n</ul></li>\n</ol>\n<p>看起来雾蒙蒙的，而且太白了。</p>\n<ol start=\"4\" type=\"1\">\n<li><p>白平衡</p>\n<ul>\n<li>GIMP -&gt; 颜色 -&gt; 自动 -&gt; 白平衡\n<img src=\"/blog/images/hw-2.webp\"> 看起来好多了。</li>\n</ul></li>\n<li><p>导出图片</p>\n<ul>\n<li>GIMP -&gt; 文件 -&gt; 导出为 -&gt; 文件名.jpg -&gt; 导出</li>\n<li>其中，【保存 Exif 数据】、【保存 XMP 数据】、【保存 IPTC\n数据】、【保存缩略图】、【保存色彩配置文件】都不用选。【高级选项】调了没看出明显区别，所以不用调。</li>\n<li>导出质量设成 <code>10</code>\n就行，质量越低文件越小，只要还能分辨出字就行。</li>\n<li>笔者用 <code>10</code> 导出看起来和导出前没啥区别，但是用\n<code>0</code> 导出就： <img src=\"/blog/images/hw-3.webp\">\n有点恐怖。<del>但是更清楚了</del></li>\n</ul></li>\n</ol>\n","excerpt":"","more":"<ol start=\"0\" type=\"1\">\n<li><a href=\"https://www.gimp.org/downloads/\">GIMP</a></li>\n<li> 拍摄</li>\n<li>裁剪</li>\n<li><strong>彩色转黑白</strong></li>\n<li><strong>白平衡</strong></li>\n<li>导出图片</li>\n</ol>\n<hr>\n<ol type=\"1\">\n<li>首先要拍清晰，手不抖。 <img src=\"/blog/images/hw-0.webp\"></li>\n<li>在拍完之后适当裁剪。</li>\n<li><ul>\n<li>GIMP -&gt; 文件 -&gt; 打开 -&gt; 选择图片</li>\n<li> GIMP -&gt; 颜色 -&gt; 去色 -&gt; 彩色到灰度\n<img src=\"/blog/images/hw-1.webp\"></li>\n</ul></li>\n</ol>\n<p>看起来雾蒙蒙的，而且太白了。</p>\n<ol start=\"4\" type=\"1\">\n<li><p>白平衡</p>\n<ul>\n<li>GIMP -&gt; 颜色 -&gt; 自动 -&gt; 白平衡\n<img src=\"/blog/images/hw-2.webp\"> 看起来好多了。</li>\n</ul></li>\n<li><p>导出图片</p>\n<ul>\n<li>GIMP -&gt; 文件 -&gt; 导出为 -&gt; 文件名.jpg -&gt; 导出</li>\n<li>其中，【保存 Exif 数据】、【保存 XMP 数据】、【保存 IPTC\n数据】、【保存缩略图】、【保存色彩配置文件】都不用选。【高级选项】调了没看出明显区别，所以不用调。</li>\n<li>导出质量设成 <code>10</code>\n就行，质量越低文件越小，只要还能分辨出字就行。</li>\n<li>笔者用 <code>10</code> 导出看起来和导出前没啥区别，但是用\n<code>0</code> 导出就： <img src=\"/blog/images/hw-3.webp\">\n有点恐怖。<del>但是更清楚了</del></li>\n</ul></li>\n</ol>\n"},{"title":"用 Magisk 获取 Android 手机的 root 权限","date":"2023-07-08T14:24:00.000Z","_content":"\n好奇心旺盛。\n\n<!--more-->\n\n你需要：\n\n- 一台系统为 Android 6.0 以上的手机\n- 一台能够正常使用 [Android SDK Platform-Tools](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn) 的电脑\n\n另外，如果你手机的 Android kernel 版本在 5.10 以上，你也可以使用[KernelSU](https://kernelsu.org/zh_CN/)——这不属于此教程的范围。\n\n## 背景知识\n\n### Linux 与 Android\n\nLinux 是一种操作系统内核，由 Linus Torvalds 开发。**基于 Linux 内核**，Android Inc.公司开发出了 Android 操作系统。\n\n2005 年，Google 收购 Android Inc.。2007 年，Google 将 Android 的源代码公开，并创建了[AOSP](https://source.android.google.cn/?hl=zh-cn)（Android Open Source Project）项目。\n\n许多手机厂商的定制系统，如 MIUI、Flyme、HarmonyOS 等都是**基于 AOSP 源码**开发的。和 AOSP 对标的[OpenHarmony](https://gitee.com/openharmony)也有用到 Linux 内核。所以，如果你的手机不是苹果，它里面大概率就会有一个修改过的 Linux 内核。\n\n### Linux 与 Android 中的用户权限\n\nLinux 操作系统是多用户操作系统，用户`root`拥有最高权限——对系统的完全控制权。拥有 root 权限的用户可以把其他用户添加到 root 用户组。在 root 用户组里，每个用户都有 root 权限。\n\n在 Android 操作系统中，**每个应用（APP）都是一个独立的用户**。如果没有`root`用户把 APP 添加到 root 用户组，就没有 APP 能够获得 root 权限。\n\n而在正常情况下，你在手机上见到的所有画面都是 APP 的进程（比如系统界面是`com.android.systemui`）。这时想要获得 root 权限，就需要修改更底层的东西。\n\n### Bootloader 锁\n\nBootloader，即启动引导加载程序。它负责在计算机启动时，引导操作系统加载。\n\n在 bootloader 执行的过程中，如果签名验证未通过，说明系统底层文件被修改。这时 bootloader 会停止执行，**无法进入系统**。这被称为 bootloader（BL）锁。\n\n### Magisk\n\nThe **Magic Mask** for Android，是一套用于定制 Android 的开源软件。它可以为应用程序提供 root 访问权限。后文简称**面具**。\n\n面具获取 root 权限的原理是通过修改 boot 分区，代理 linux 内核的第一个进程 init。[^1]\n\n[^1]: [何为 root？维术：https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg](https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg)\n\n面具修改了系统分区。因此，使用面具的前提是解除 BL 锁。\n\n## 准备工作\n\n### 解除 BL 锁\n\n> 解锁 BootLoader 实际上就是让 BootLoader 启动链上某些阶段的签名验证不生效。[^2]\n\n[^2]: [当我们谈论解锁 BootLoader 时，我们在谈论什么？维术：https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg](https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg)\n\n你需要在你手机厂商的网站上申请，然后用他们提供的工具解锁。但不是所有厂商都支持。\n\n注意：解锁 BL 后会**清除所有用户数据，恢复出厂设置**。请提前做好你重要文件的备份。\n\n### 提取 boot.img\n\n在网上搜索，找到你手机的安装包。\n\n通常是一个`.zip`或.`tgz`格式的压缩包。确保手机型号一致、操作系统版本一致。\n\n解压后找到`boot.img`或者`init_boot.img（如果有）`。复制两份，分别保存到手机和电脑，备用。\n\n- 如果你找不到`boot.img`，而找到了`payload.bin`：参考[这篇教程](https://magiskcn.com/payload-dumper-go-boot)。或者使用[MT 管理器](https://mt2.cn/)提取。\n- 如果你的手机<em><strong>已经 root 了</strong></em>：可以在`adb shell`下使用`ls -l /dev/block/by-name/`查看分区表。找到 boot 分区，比如`/dev/block/sdc41`。使用`dd if=/dev/block/sdc41 of=/sdcard/boot.img`提取 boot 分区。\n\n### 通过 USB 调试手机\n\n在手机设置里找到系统版本（比如 MIUI，是在“全部参数”里的“MIUI 版本”）。连续点击，直到手机出现提示框“您现在处于开发者模式”。\n\n在手机设置里找到开发者选项，进入。找到**USB 调试**选项并开启。\n\n下载[Android SDK Platform-Tools](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn)，解压到你喜欢的目录。比如`D:\\platform-tools`。你会看到目录里有`adb.exe`和`fastboot.exe`等一些文件。\n\n打开命令行（Windows 下 win+R 输入 cmd，回车），你会看到：\n\n```shell\nC:\\Users\\你的用户名\\>\n```\n\n这是你当前所在的目录。当你要执行一个`.exe`文件时，系统先从当前目录里寻找。如果找不到，就从环境变量里寻找。再找不到就打印错误信息。\n\n你刚才解压出来的`.exe`文件只能在它们所在的目录下运行。如果不想切换目录，想让它们在任意目录下都可以运行，需要把它们**所在的目录**添加到**环境变量 Path**。\n\nWindows 10 下，`Win + I`打开设置。系统->关于->高级系统设置->环境变量，双击系统变量`Path`，新建，把`D:\\platform-tools`复制到列表，确定确定确定。这样环境变量就设置好了。\n\n用数据线连接手机和电脑。你可以尝试在`cmd`里使用命令\n\n```shell\nadb devices\n```\n\n这时手机会弹出授权窗口。点击确定，你会在电脑上看到：\n\n```shell\nList of devices attached\n你手机的序列号        device\n```\n\n说明 adb 连接成功。\n\n## 戴上面具\n\n[下载面具](https://github.com/topjohnwu/Magisk/releases)并安装打开，你将看到：\n\n<img src=\"/blog/images/magisk.webp\">\n\n如果 Ramdisk 为**否**，或者你的手机品牌是**华为**或**三星**：参考 [Magisk 中文文档](https://jesse205.github.io/MagiskChineseDocument/install.html)。\n\n点击“安装”按钮。如果你手机的安装包中有`vbmeta.img`，选中“修补 boot 映像中的 vbmeta”选项。否则不选中。\n\n在方式中选择“选择并修补一个文件”。然后选择你提取出来的`boot.img`或`init_boot.img`。点击“安装”。\n\n面具会把修补后的文件`magisk_patched-[版本号_随机字符].img`存放到 SD 卡的`Download`目录下。\n\n把修补后的文件复制到电脑：\n\n```shell\nadb pull /sdcard/Download/magisk_patched-[版本号_随机字符].img 电脑上的一个文件夹路径\n```\n\n重启手机到`fastboot`模式：\n\n```shell\nadb reboot bootloader\n```\n\n刷写新的`boot`分区：\n\n```shell\nfastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\magisk_patched-[版本号_随机字符].img\n```\n\n重启手机：\n\n```shell\nfastboot reboot\n```\n\n打开面具。如果看到了 Magisk->当前的版本号，说明成功。\n\n- 如果你的手机打不开了：说明面具不适合你的手机，或者你有地方做错了。\n  你需要长按【电源】键重启，然后马上同时按住【电源】键和【音量+】键（也有手机是【电源】键和【音量-】键）。这会把手机重启到`fastboot`模式。\n  然后使用以下命令恢复 boot 分区：\n  ```shell\n  fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\你修补前的boot.img\n  ```\n- 在安装面具后：需要禁用系统自动更新。[后续处理——更新系统时](#后续处理更新系统时)\n\n## 隐藏面具\n\n为了用户安全，一些银行类的 app 在检测到 root 后会禁止用户使用。需要对这一类 app 隐藏 root。\n\n### 使用 Shamiko 隐藏 root\n\nShamiko 是一个面具模块，用于隐藏 root。\n\n- 如果使用的是[Magisk Delta](https://github.com/magojohnji/Magisk-delta/blob/main/intro.md)，则不能安装此模块。可用其内置的 MagiskHide。\n\n在面具设置里：\n\n- 找到“Zygisk”，**开启**。\n\n- 找到“遵守排除列表”，**关闭**。\n\n- 找到“配置排除列表”，选择要对其隐藏 root 的应用。点击，在展开的列表里全部打上勾，直到上方进度条满。\n\n[下载 Shamiko](https://github.com/LSPosed/LSPosed.github.io/releases/) 。打开面具->模块->从本地安装->选择下载的`shamiko-[版本号]-release.zip`->确定->重启手机。\n\n如果看到模块->Shamiko 的简介里露出了 😋，说明 Shamiko 正常运行。\n\n### 使用随机包名隐藏面具应用\n\n面具设置->隐藏 Magisk 应用\n\n## 后续处理——更新系统时\n\n系统更新前：先打开面具，选择“卸载 Magisk”->**还原原厂映像**。然后更新系统。\n\n系统更新后：仍然使用提取 boot->修补 boot->刷入 boot 的方式安装面具。\n\n- 如果希望在更新系统时保留面具：参考[这篇文档](https://jesse205.github.io/MagiskChineseDocument/ota.html)。\n","source":"_posts/用Magisk获取Android手机的root权限.md","raw":"---\ntitle: 用 Magisk 获取 Android 手机的 root 权限\ndate: 2023-7-8 22:24:00\npermalink: magisk.html\n---\n\n好奇心旺盛。\n\n<!--more-->\n\n你需要：\n\n- 一台系统为 Android 6.0 以上的手机\n- 一台能够正常使用 [Android SDK Platform-Tools](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn) 的电脑\n\n另外，如果你手机的 Android kernel 版本在 5.10 以上，你也可以使用[KernelSU](https://kernelsu.org/zh_CN/)——这不属于此教程的范围。\n\n## 背景知识\n\n### Linux 与 Android\n\nLinux 是一种操作系统内核，由 Linus Torvalds 开发。**基于 Linux 内核**，Android Inc.公司开发出了 Android 操作系统。\n\n2005 年，Google 收购 Android Inc.。2007 年，Google 将 Android 的源代码公开，并创建了[AOSP](https://source.android.google.cn/?hl=zh-cn)（Android Open Source Project）项目。\n\n许多手机厂商的定制系统，如 MIUI、Flyme、HarmonyOS 等都是**基于 AOSP 源码**开发的。和 AOSP 对标的[OpenHarmony](https://gitee.com/openharmony)也有用到 Linux 内核。所以，如果你的手机不是苹果，它里面大概率就会有一个修改过的 Linux 内核。\n\n### Linux 与 Android 中的用户权限\n\nLinux 操作系统是多用户操作系统，用户`root`拥有最高权限——对系统的完全控制权。拥有 root 权限的用户可以把其他用户添加到 root 用户组。在 root 用户组里，每个用户都有 root 权限。\n\n在 Android 操作系统中，**每个应用（APP）都是一个独立的用户**。如果没有`root`用户把 APP 添加到 root 用户组，就没有 APP 能够获得 root 权限。\n\n而在正常情况下，你在手机上见到的所有画面都是 APP 的进程（比如系统界面是`com.android.systemui`）。这时想要获得 root 权限，就需要修改更底层的东西。\n\n### Bootloader 锁\n\nBootloader，即启动引导加载程序。它负责在计算机启动时，引导操作系统加载。\n\n在 bootloader 执行的过程中，如果签名验证未通过，说明系统底层文件被修改。这时 bootloader 会停止执行，**无法进入系统**。这被称为 bootloader（BL）锁。\n\n### Magisk\n\nThe **Magic Mask** for Android，是一套用于定制 Android 的开源软件。它可以为应用程序提供 root 访问权限。后文简称**面具**。\n\n面具获取 root 权限的原理是通过修改 boot 分区，代理 linux 内核的第一个进程 init。[^1]\n\n[^1]: [何为 root？维术：https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg](https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg)\n\n面具修改了系统分区。因此，使用面具的前提是解除 BL 锁。\n\n## 准备工作\n\n### 解除 BL 锁\n\n> 解锁 BootLoader 实际上就是让 BootLoader 启动链上某些阶段的签名验证不生效。[^2]\n\n[^2]: [当我们谈论解锁 BootLoader 时，我们在谈论什么？维术：https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg](https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg)\n\n你需要在你手机厂商的网站上申请，然后用他们提供的工具解锁。但不是所有厂商都支持。\n\n注意：解锁 BL 后会**清除所有用户数据，恢复出厂设置**。请提前做好你重要文件的备份。\n\n### 提取 boot.img\n\n在网上搜索，找到你手机的安装包。\n\n通常是一个`.zip`或.`tgz`格式的压缩包。确保手机型号一致、操作系统版本一致。\n\n解压后找到`boot.img`或者`init_boot.img（如果有）`。复制两份，分别保存到手机和电脑，备用。\n\n- 如果你找不到`boot.img`，而找到了`payload.bin`：参考[这篇教程](https://magiskcn.com/payload-dumper-go-boot)。或者使用[MT 管理器](https://mt2.cn/)提取。\n- 如果你的手机<em><strong>已经 root 了</strong></em>：可以在`adb shell`下使用`ls -l /dev/block/by-name/`查看分区表。找到 boot 分区，比如`/dev/block/sdc41`。使用`dd if=/dev/block/sdc41 of=/sdcard/boot.img`提取 boot 分区。\n\n### 通过 USB 调试手机\n\n在手机设置里找到系统版本（比如 MIUI，是在“全部参数”里的“MIUI 版本”）。连续点击，直到手机出现提示框“您现在处于开发者模式”。\n\n在手机设置里找到开发者选项，进入。找到**USB 调试**选项并开启。\n\n下载[Android SDK Platform-Tools](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn)，解压到你喜欢的目录。比如`D:\\platform-tools`。你会看到目录里有`adb.exe`和`fastboot.exe`等一些文件。\n\n打开命令行（Windows 下 win+R 输入 cmd，回车），你会看到：\n\n```shell\nC:\\Users\\你的用户名\\>\n```\n\n这是你当前所在的目录。当你要执行一个`.exe`文件时，系统先从当前目录里寻找。如果找不到，就从环境变量里寻找。再找不到就打印错误信息。\n\n你刚才解压出来的`.exe`文件只能在它们所在的目录下运行。如果不想切换目录，想让它们在任意目录下都可以运行，需要把它们**所在的目录**添加到**环境变量 Path**。\n\nWindows 10 下，`Win + I`打开设置。系统->关于->高级系统设置->环境变量，双击系统变量`Path`，新建，把`D:\\platform-tools`复制到列表，确定确定确定。这样环境变量就设置好了。\n\n用数据线连接手机和电脑。你可以尝试在`cmd`里使用命令\n\n```shell\nadb devices\n```\n\n这时手机会弹出授权窗口。点击确定，你会在电脑上看到：\n\n```shell\nList of devices attached\n你手机的序列号        device\n```\n\n说明 adb 连接成功。\n\n## 戴上面具\n\n[下载面具](https://github.com/topjohnwu/Magisk/releases)并安装打开，你将看到：\n\n<img src=\"/blog/images/magisk.webp\">\n\n如果 Ramdisk 为**否**，或者你的手机品牌是**华为**或**三星**：参考 [Magisk 中文文档](https://jesse205.github.io/MagiskChineseDocument/install.html)。\n\n点击“安装”按钮。如果你手机的安装包中有`vbmeta.img`，选中“修补 boot 映像中的 vbmeta”选项。否则不选中。\n\n在方式中选择“选择并修补一个文件”。然后选择你提取出来的`boot.img`或`init_boot.img`。点击“安装”。\n\n面具会把修补后的文件`magisk_patched-[版本号_随机字符].img`存放到 SD 卡的`Download`目录下。\n\n把修补后的文件复制到电脑：\n\n```shell\nadb pull /sdcard/Download/magisk_patched-[版本号_随机字符].img 电脑上的一个文件夹路径\n```\n\n重启手机到`fastboot`模式：\n\n```shell\nadb reboot bootloader\n```\n\n刷写新的`boot`分区：\n\n```shell\nfastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\magisk_patched-[版本号_随机字符].img\n```\n\n重启手机：\n\n```shell\nfastboot reboot\n```\n\n打开面具。如果看到了 Magisk->当前的版本号，说明成功。\n\n- 如果你的手机打不开了：说明面具不适合你的手机，或者你有地方做错了。\n  你需要长按【电源】键重启，然后马上同时按住【电源】键和【音量+】键（也有手机是【电源】键和【音量-】键）。这会把手机重启到`fastboot`模式。\n  然后使用以下命令恢复 boot 分区：\n  ```shell\n  fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\你修补前的boot.img\n  ```\n- 在安装面具后：需要禁用系统自动更新。[后续处理——更新系统时](#后续处理更新系统时)\n\n## 隐藏面具\n\n为了用户安全，一些银行类的 app 在检测到 root 后会禁止用户使用。需要对这一类 app 隐藏 root。\n\n### 使用 Shamiko 隐藏 root\n\nShamiko 是一个面具模块，用于隐藏 root。\n\n- 如果使用的是[Magisk Delta](https://github.com/magojohnji/Magisk-delta/blob/main/intro.md)，则不能安装此模块。可用其内置的 MagiskHide。\n\n在面具设置里：\n\n- 找到“Zygisk”，**开启**。\n\n- 找到“遵守排除列表”，**关闭**。\n\n- 找到“配置排除列表”，选择要对其隐藏 root 的应用。点击，在展开的列表里全部打上勾，直到上方进度条满。\n\n[下载 Shamiko](https://github.com/LSPosed/LSPosed.github.io/releases/) 。打开面具->模块->从本地安装->选择下载的`shamiko-[版本号]-release.zip`->确定->重启手机。\n\n如果看到模块->Shamiko 的简介里露出了 😋，说明 Shamiko 正常运行。\n\n### 使用随机包名隐藏面具应用\n\n面具设置->隐藏 Magisk 应用\n\n## 后续处理——更新系统时\n\n系统更新前：先打开面具，选择“卸载 Magisk”->**还原原厂映像**。然后更新系统。\n\n系统更新后：仍然使用提取 boot->修补 boot->刷入 boot 的方式安装面具。\n\n- 如果希望在更新系统时保留面具：参考[这篇文档](https://jesse205.github.io/MagiskChineseDocument/ota.html)。\n","slug":"用Magisk获取Android手机的root权限","published":1,"updated":"2025-09-14T14:52:14.883Z","__permalink":"magisk.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnp000j5ws65je6ht3o","content":"<p>好奇心旺盛。</p>\n<span id=\"more\"></span>\n<p>你需要：</p>\n<ul>\n<li>一台系统为 Android 6.0 以上的手机</li>\n<li>一台能够正常使用 <a href=\"https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn\">Android\nSDK Platform-Tools</a> 的电脑</li>\n</ul>\n<p>另外，如果你手机的 Android kernel 版本在 5.10 以上，你也可以使用 <a href=\"https://kernelsu.org/zh_CN/\">KernelSU</a>—— 这不属于此教程的范围。</p>\n<h2 id=\"背景知识\">背景知识</h2>\n<h3 id=\"linux-与-android\">Linux 与 Android</h3>\n<p>Linux 是一种操作系统内核，由 Linus Torvalds 开发。<strong>基于 Linux\n内核</strong>，Android Inc. 公司开发出了 Android 操作系统。</p>\n<p>2005 年，Google 收购 Android Inc.。2007 年，Google 将 Android\n的源代码公开，并创建了 <a href=\"https://source.android.google.cn/?hl=zh-cn\">AOSP</a>（Android Open\nSource Project）项目。</p>\n<p>许多手机厂商的定制系统，如 MIUI、Flyme、HarmonyOS 等都是<strong>基于\nAOSP 源码</strong>开发的。和 AOSP 对标的 <a href=\"https://gitee.com/openharmony\">OpenHarmony</a> 也有用到 Linux\n内核。所以，如果你的手机不是苹果，它里面大概率就会有一个修改过的 Linux\n内核。</p>\n<h3 id=\"linux-与-android-中的用户权限\">Linux 与 Android\n中的用户权限</h3>\n<p>Linux\n操作系统是多用户操作系统，用户 <code>root</code> 拥有最高权限 —— 对系统的完全控制权。拥有\nroot 权限的用户可以把其他用户添加到 root 用户组。在 root\n用户组里，每个用户都有 root 权限。</p>\n<p>在 Android\n操作系统中，<strong>每个应用（APP）都是一个独立的用户</strong>。如果没有 <code>root</code> 用户把\nAPP 添加到 root 用户组，就没有 APP 能够获得 root 权限。</p>\n<p>而在正常情况下，你在手机上见到的所有画面都是 APP\n的进程（比如系统界面是 <code>com.android.systemui</code>）。这时想要获得\nroot 权限，就需要修改更底层的东西。</p>\n<h3 id=\"bootloader-锁\">Bootloader 锁</h3>\n<p>Bootloader，即启动引导加载程序。它负责在计算机启动时，引导操作系统加载。</p>\n<p>在 bootloader\n执行的过程中，如果签名验证未通过，说明系统底层文件被修改。这时\nbootloader 会停止执行，<strong>无法进入系统</strong>。这被称为\nbootloader（BL）锁。</p>\n<h3 id=\"magisk\">Magisk</h3>\n<p>The <strong>Magic Mask</strong> for Android，是一套用于定制 Android\n的开源软件。它可以为应用程序提供 root\n访问权限。后文简称<strong>面具</strong>。</p>\n<p>面具获取 root 权限的原理是通过修改 boot 分区，代理 linux\n内核的第一个进程 init。<a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a></p>\n<p>面具修改了系统分区。因此，使用面具的前提是解除 BL 锁。</p>\n<h2 id=\"准备工作\">准备工作</h2>\n<h3 id=\"解除-bl-锁\">解除 BL 锁</h3>\n<blockquote>\n<p>解锁 BootLoader 实际上就是让 BootLoader\n启动链上某些阶段的签名验证不生效。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p>你需要在你手机厂商的网站上申请，然后用他们提供的工具解锁。但不是所有厂商都支持。</p>\n<p>注意：解锁 BL\n后会<strong>清除所有用户数据，恢复出厂设置</strong>。请提前做好你重要文件的备份。</p>\n<h3 id=\"提取-boot.img\">提取 boot.img</h3>\n<p>在网上搜索，找到你手机的安装包。</p>\n<p>通常是一个<code>.zip</code> 或.<code>tgz</code> 格式的压缩包。确保手机型号一致、操作系统版本一致。</p>\n<p>解压后找到 <code>boot.img</code> 或者 <code>init_boot.img（如果有）</code>。复制两份，分别保存到手机和电脑，备用。</p>\n<ul>\n<li>如果你找不到 <code>boot.img</code>，而找到了 <code>payload.bin</code>：参考<a href=\"https://magiskcn.com/payload-dumper-go-boot\">这篇教程</a>。或者使用 <a href=\"https://mt2.cn/\">MT 管理器</a>提取。</li>\n<li>如果你的手机<em><strong>已经 root\n了</strong></em>：可以在 <code>adb shell</code> 下使用 <code>ls -l /dev/block/by-name/</code> 查看分区表。找到\nboot\n分区，比如 <code>/dev/block/sdc41</code>。使用 <code>dd if=/dev/block/sdc41 of=/sdcard/boot.img</code> 提取\nboot 分区。</li>\n</ul>\n<h3 id=\"通过-usb-调试手机\">通过 USB 调试手机</h3>\n<p>在手机设置里找到系统版本（比如 MIUI，是在 “全部参数” 里的 “MIUI\n版本”）。连续点击，直到手机出现提示框 “您现在处于开发者模式”。</p>\n<p>在手机设置里找到开发者选项，进入。找到 <strong>USB\n调试</strong>选项并开启。</p>\n<p>下载 <a href=\"https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn\">Android\nSDK\nPlatform-Tools</a>，解压到你喜欢的目录。比如 <code>D:\\platform-tools</code>。你会看到目录里有 <code>adb.exe</code> 和 <code>fastboot.exe</code> 等一些文件。</p>\n<p>打开命令行（Windows 下 win+R 输入 cmd，回车），你会看到：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\你的用户名\\&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>这是你当前所在的目录。当你要执行一个<code>.exe</code> 文件时，系统先从当前目录里寻找。如果找不到，就从环境变量里寻找。再找不到就打印错误信息。</p>\n<p>你刚才解压出来的<code>.exe</code> 文件只能在它们所在的目录下运行。如果不想切换目录，想让它们在任意目录下都可以运行，需要把它们<strong>所在的目录</strong>添加到<strong>环境变量\nPath</strong>。</p>\n<p>Windows 10\n下，<code>Win + I</code> 打开设置。系统 -&gt; 关于 -&gt; 高级系统设置 -&gt; 环境变量，双击系统变量 <code>Path</code>，新建，把 <code>D:\\platform-tools</code> 复制到列表，确定确定确定。这样环境变量就设置好了。</p>\n<p>用数据线连接手机和电脑。你可以尝试在 <code>cmd</code> 里使用命令</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb devices</span><br></pre></td></tr></tbody></table></figure>\n<p>这时手机会弹出授权窗口。点击确定，你会在电脑上看到：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List of devices attached</span><br><span class=\"line\">你手机的序列号        device</span><br></pre></td></tr></tbody></table></figure>\n<p>说明 adb 连接成功。</p>\n<h2 id=\"戴上面具\">戴上面具</h2>\n<p><a href=\"https://github.com/topjohnwu/Magisk/releases\">下载面具</a>并安装打开，你将看到：</p>\n<p><img src=\"/blog/images/magisk.webp\"></p>\n<p>如果 Ramdisk\n为<strong>否</strong>，或者你的手机品牌是<strong>华为</strong>或<strong>三星</strong>：参考\n<a href=\"https://jesse205.github.io/MagiskChineseDocument/install.html\">Magisk\n中文文档</a>。</p>\n<p>点击 “安装” 按钮。如果你手机的安装包中有 <code>vbmeta.img</code>，选中 “修补\nboot 映像中的 vbmeta” 选项。否则不选中。</p>\n<p>在方式中选择 “选择并修补一个文件”。然后选择你提取出来的 <code>boot.img</code> 或 <code>init_boot.img</code>。点击 “安装”。</p>\n<p>面具会把修补后的文件 <code>magisk_patched-[版本号_随机字符].img</code> 存放到\nSD 卡的 <code>Download</code> 目录下。</p>\n<p>把修补后的文件复制到电脑：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb pull /sdcard/Download/magisk_patched-[版本号_随机字符].img 电脑上的一个文件夹路径</span><br></pre></td></tr></tbody></table></figure>\n<p>重启手机到 <code>fastboot</code> 模式：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb reboot bootloader</span><br></pre></td></tr></tbody></table></figure>\n<p>刷写新的 <code>boot</code> 分区：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\magisk_patched-[版本号_随机字符].img</span><br></pre></td></tr></tbody></table></figure>\n<p>重启手机：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot reboot</span><br></pre></td></tr></tbody></table></figure>\n<p>打开面具。如果看到了 Magisk-&gt; 当前的版本号，说明成功。</p>\n<ul>\n<li>如果你的手机打不开了：说明面具不适合你的手机，或者你有地方做错了。\n你需要长按【电源】键重启，然后马上同时按住【电源】键和【音量 +】键（也有手机是【电源】键和【音量 -】键）。这会把手机重启到 <code>fastboot</code> 模式。\n然后使用以下命令恢复 boot 分区： <figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\你修补前的boot.img</span><br></pre></td></tr></tbody></table></figure></li>\n<li>在安装面具后：需要禁用系统自动更新。<a href=\"#后续处理更新系统时\">后续处理 —— 更新系统时</a></li>\n</ul>\n<h2 id=\"隐藏面具\">隐藏面具</h2>\n<p>为了用户安全，一些银行类的 app 在检测到 root\n后会禁止用户使用。需要对这一类 app 隐藏 root。</p>\n<h3 id=\"使用-shamiko-隐藏-root\">使用 Shamiko 隐藏 root</h3>\n<p>Shamiko 是一个面具模块，用于隐藏 root。</p>\n<ul>\n<li>如果使用的是 <a href=\"https://github.com/magojohnji/Magisk-delta/blob/main/intro.md\">Magisk\nDelta</a>，则不能安装此模块。可用其内置的 MagiskHide。</li>\n</ul>\n<p>在面具设置里：</p>\n<ul>\n<li><p>找到 “Zygisk”，<strong>开启</strong>。</p></li>\n<li><p>找到 “遵守排除列表”，<strong>关闭</strong>。</p></li>\n<li><p>找到 “配置排除列表”，选择要对其隐藏 root\n的应用。点击，在展开的列表里全部打上勾，直到上方进度条满。</p></li>\n</ul>\n<p><a href=\"https://github.com/LSPosed/LSPosed.github.io/releases/\">下载\nShamiko</a>\n。打开面具 -&gt; 模块 -&gt; 从本地安装 -&gt; 选择下载的 <code>shamiko-[版本号]-release.zip</code>-&gt; 确定 -&gt; 重启手机。</p>\n<p>如果看到模块 -&gt;Shamiko 的简介里露出了 😋，说明 Shamiko\n正常运行。</p>\n<h3 id=\"使用随机包名隐藏面具应用\">使用随机包名隐藏面具应用</h3>\n<p>面具设置 -&gt; 隐藏 Magisk 应用</p>\n<h2 id=\"后续处理更新系统时\">后续处理 —— 更新系统时</h2>\n<p>系统更新前：先打开面具，选择 “卸载\nMagisk”-&gt; <strong>还原原厂映像</strong>。然后更新系统。</p>\n<p>系统更新后：仍然使用提取 boot-&gt; 修补 boot-&gt; 刷入 boot\n的方式安装面具。</p>\n<ul>\n<li>如果希望在更新系统时保留面具：参考<a href=\"https://jesse205.github.io/MagiskChineseDocument/ota.html\">这篇文档</a>。</li>\n</ul>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg\">何为\nroot？维术：https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg\">当我们谈论解锁\nBootLoader\n时，我们在谈论什么？维术：https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>\n","excerpt":"<p>好奇心旺盛。</p>","more":"<p>你需要：</p>\n<ul>\n<li>一台系统为 Android 6.0 以上的手机</li>\n<li>一台能够正常使用 <a href=\"https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn\">Android\nSDK Platform-Tools</a> 的电脑</li>\n</ul>\n<p>另外，如果你手机的 Android kernel 版本在 5.10 以上，你也可以使用 <a href=\"https://kernelsu.org/zh_CN/\">KernelSU</a>—— 这不属于此教程的范围。</p>\n<h2 id=\"背景知识\">背景知识</h2>\n<h3 id=\"linux-与-android\">Linux 与 Android</h3>\n<p>Linux 是一种操作系统内核，由 Linus Torvalds 开发。<strong>基于 Linux\n内核</strong>，Android Inc. 公司开发出了 Android 操作系统。</p>\n<p>2005 年，Google 收购 Android Inc.。2007 年，Google 将 Android\n的源代码公开，并创建了 <a href=\"https://source.android.google.cn/?hl=zh-cn\">AOSP</a>（Android Open\nSource Project）项目。</p>\n<p>许多手机厂商的定制系统，如 MIUI、Flyme、HarmonyOS 等都是<strong>基于\nAOSP 源码</strong>开发的。和 AOSP 对标的 <a href=\"https://gitee.com/openharmony\">OpenHarmony</a> 也有用到 Linux\n内核。所以，如果你的手机不是苹果，它里面大概率就会有一个修改过的 Linux\n内核。</p>\n<h3 id=\"linux-与-android-中的用户权限\">Linux 与 Android\n中的用户权限</h3>\n<p>Linux\n操作系统是多用户操作系统，用户 <code>root</code> 拥有最高权限 —— 对系统的完全控制权。拥有\nroot 权限的用户可以把其他用户添加到 root 用户组。在 root\n用户组里，每个用户都有 root 权限。</p>\n<p>在 Android\n操作系统中，<strong>每个应用（APP）都是一个独立的用户</strong>。如果没有 <code>root</code> 用户把\nAPP 添加到 root 用户组，就没有 APP 能够获得 root 权限。</p>\n<p>而在正常情况下，你在手机上见到的所有画面都是 APP\n的进程（比如系统界面是 <code>com.android.systemui</code>）。这时想要获得\nroot 权限，就需要修改更底层的东西。</p>\n<h3 id=\"bootloader-锁\">Bootloader 锁</h3>\n<p>Bootloader，即启动引导加载程序。它负责在计算机启动时，引导操作系统加载。</p>\n<p>在 bootloader\n执行的过程中，如果签名验证未通过，说明系统底层文件被修改。这时\nbootloader 会停止执行，<strong>无法进入系统</strong>。这被称为\nbootloader（BL）锁。</p>\n<h3 id=\"magisk\">Magisk</h3>\n<p>The <strong>Magic Mask</strong> for Android，是一套用于定制 Android\n的开源软件。它可以为应用程序提供 root\n访问权限。后文简称<strong>面具</strong>。</p>\n<p>面具获取 root 权限的原理是通过修改 boot 分区，代理 linux\n内核的第一个进程 init。<a href=\"#fn1\" class=\"footnote-ref\" id=\"fnref1\" role=\"doc-noteref\"><sup>1</sup></a></p>\n<p>面具修改了系统分区。因此，使用面具的前提是解除 BL 锁。</p>\n<h2 id=\"准备工作\">准备工作</h2>\n<h3 id=\"解除-bl-锁\">解除 BL 锁</h3>\n<blockquote>\n<p>解锁 BootLoader 实际上就是让 BootLoader\n启动链上某些阶段的签名验证不生效。<a href=\"#fn2\" class=\"footnote-ref\" id=\"fnref2\" role=\"doc-noteref\"><sup>2</sup></a></p>\n</blockquote>\n<p>你需要在你手机厂商的网站上申请，然后用他们提供的工具解锁。但不是所有厂商都支持。</p>\n<p>注意：解锁 BL\n后会<strong>清除所有用户数据，恢复出厂设置</strong>。请提前做好你重要文件的备份。</p>\n<h3 id=\"提取-boot.img\">提取 boot.img</h3>\n<p>在网上搜索，找到你手机的安装包。</p>\n<p>通常是一个<code>.zip</code> 或.<code>tgz</code> 格式的压缩包。确保手机型号一致、操作系统版本一致。</p>\n<p>解压后找到 <code>boot.img</code> 或者 <code>init_boot.img（如果有）</code>。复制两份，分别保存到手机和电脑，备用。</p>\n<ul>\n<li>如果你找不到 <code>boot.img</code>，而找到了 <code>payload.bin</code>：参考<a href=\"https://magiskcn.com/payload-dumper-go-boot\">这篇教程</a>。或者使用 <a href=\"https://mt2.cn/\">MT 管理器</a>提取。</li>\n<li>如果你的手机<em><strong>已经 root\n了</strong></em>：可以在 <code>adb shell</code> 下使用 <code>ls -l /dev/block/by-name/</code> 查看分区表。找到\nboot\n分区，比如 <code>/dev/block/sdc41</code>。使用 <code>dd if=/dev/block/sdc41 of=/sdcard/boot.img</code> 提取\nboot 分区。</li>\n</ul>\n<h3 id=\"通过-usb-调试手机\">通过 USB 调试手机</h3>\n<p>在手机设置里找到系统版本（比如 MIUI，是在 “全部参数” 里的 “MIUI\n版本”）。连续点击，直到手机出现提示框 “您现在处于开发者模式”。</p>\n<p>在手机设置里找到开发者选项，进入。找到 <strong>USB\n调试</strong>选项并开启。</p>\n<p>下载 <a href=\"https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn\">Android\nSDK\nPlatform-Tools</a>，解压到你喜欢的目录。比如 <code>D:\\platform-tools</code>。你会看到目录里有 <code>adb.exe</code> 和 <code>fastboot.exe</code> 等一些文件。</p>\n<p>打开命令行（Windows 下 win+R 输入 cmd，回车），你会看到：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\你的用户名\\&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>这是你当前所在的目录。当你要执行一个<code>.exe</code> 文件时，系统先从当前目录里寻找。如果找不到，就从环境变量里寻找。再找不到就打印错误信息。</p>\n<p>你刚才解压出来的<code>.exe</code> 文件只能在它们所在的目录下运行。如果不想切换目录，想让它们在任意目录下都可以运行，需要把它们<strong>所在的目录</strong>添加到<strong>环境变量\nPath</strong>。</p>\n<p>Windows 10\n下，<code>Win + I</code> 打开设置。系统 -&gt; 关于 -&gt; 高级系统设置 -&gt; 环境变量，双击系统变量 <code>Path</code>，新建，把 <code>D:\\platform-tools</code> 复制到列表，确定确定确定。这样环境变量就设置好了。</p>\n<p>用数据线连接手机和电脑。你可以尝试在 <code>cmd</code> 里使用命令</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb devices</span><br></pre></td></tr></tbody></table></figure>\n<p>这时手机会弹出授权窗口。点击确定，你会在电脑上看到：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List of devices attached</span><br><span class=\"line\">你手机的序列号        device</span><br></pre></td></tr></tbody></table></figure>\n<p>说明 adb 连接成功。</p>\n<h2 id=\"戴上面具\">戴上面具</h2>\n<p><a href=\"https://github.com/topjohnwu/Magisk/releases\">下载面具</a>并安装打开，你将看到：</p>\n<p><img src=\"/blog/images/magisk.webp\"></p>\n<p>如果 Ramdisk\n为<strong>否</strong>，或者你的手机品牌是<strong>华为</strong>或<strong>三星</strong>：参考\n<a href=\"https://jesse205.github.io/MagiskChineseDocument/install.html\">Magisk\n中文文档</a>。</p>\n<p>点击 “安装” 按钮。如果你手机的安装包中有 <code>vbmeta.img</code>，选中 “修补\nboot 映像中的 vbmeta” 选项。否则不选中。</p>\n<p>在方式中选择 “选择并修补一个文件”。然后选择你提取出来的 <code>boot.img</code> 或 <code>init_boot.img</code>。点击 “安装”。</p>\n<p>面具会把修补后的文件 <code>magisk_patched-[版本号_随机字符].img</code> 存放到\nSD 卡的 <code>Download</code> 目录下。</p>\n<p>把修补后的文件复制到电脑：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb pull /sdcard/Download/magisk_patched-[版本号_随机字符].img 电脑上的一个文件夹路径</span><br></pre></td></tr></tbody></table></figure>\n<p>重启手机到 <code>fastboot</code> 模式：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb reboot bootloader</span><br></pre></td></tr></tbody></table></figure>\n<p>刷写新的 <code>boot</code> 分区：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\magisk_patched-[版本号_随机字符].img</span><br></pre></td></tr></tbody></table></figure>\n<p>重启手机：</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot reboot</span><br></pre></td></tr></tbody></table></figure>\n<p>打开面具。如果看到了 Magisk-&gt; 当前的版本号，说明成功。</p>\n<ul>\n<li>如果你的手机打不开了：说明面具不适合你的手机，或者你有地方做错了。\n你需要长按【电源】键重启，然后马上同时按住【电源】键和【音量 +】键（也有手机是【电源】键和【音量 -】键）。这会把手机重启到 <code>fastboot</code> 模式。\n然后使用以下命令恢复 boot 分区： <figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fastboot flash boot（或者init_boot） 电脑上的一个文件夹路径\\你修补前的boot.img</span><br></pre></td></tr></tbody></table></figure></li>\n<li>在安装面具后：需要禁用系统自动更新。<a href=\"#后续处理更新系统时\">后续处理 —— 更新系统时</a></li>\n</ul>\n<h2 id=\"隐藏面具\">隐藏面具</h2>\n<p>为了用户安全，一些银行类的 app 在检测到 root\n后会禁止用户使用。需要对这一类 app 隐藏 root。</p>\n<h3 id=\"使用-shamiko-隐藏-root\">使用 Shamiko 隐藏 root</h3>\n<p>Shamiko 是一个面具模块，用于隐藏 root。</p>\n<ul>\n<li>如果使用的是 <a href=\"https://github.com/magojohnji/Magisk-delta/blob/main/intro.md\">Magisk\nDelta</a>，则不能安装此模块。可用其内置的 MagiskHide。</li>\n</ul>\n<p>在面具设置里：</p>\n<ul>\n<li><p>找到 “Zygisk”，<strong>开启</strong>。</p></li>\n<li><p>找到 “遵守排除列表”，<strong>关闭</strong>。</p></li>\n<li><p>找到 “配置排除列表”，选择要对其隐藏 root\n的应用。点击，在展开的列表里全部打上勾，直到上方进度条满。</p></li>\n</ul>\n<p><a href=\"https://github.com/LSPosed/LSPosed.github.io/releases/\">下载\nShamiko</a>\n。打开面具 -&gt; 模块 -&gt; 从本地安装 -&gt; 选择下载的 <code>shamiko-[版本号]-release.zip</code>-&gt; 确定 -&gt; 重启手机。</p>\n<p>如果看到模块 -&gt;Shamiko 的简介里露出了 😋，说明 Shamiko\n正常运行。</p>\n<h3 id=\"使用随机包名隐藏面具应用\">使用随机包名隐藏面具应用</h3>\n<p>面具设置 -&gt; 隐藏 Magisk 应用</p>\n<h2 id=\"后续处理更新系统时\">后续处理 —— 更新系统时</h2>\n<p>系统更新前：先打开面具，选择 “卸载\nMagisk”-&gt; <strong>还原原厂映像</strong>。然后更新系统。</p>\n<p>系统更新后：仍然使用提取 boot-&gt; 修补 boot-&gt; 刷入 boot\n的方式安装面具。</p>\n<ul>\n<li>如果希望在更新系统时保留面具：参考<a href=\"https://jesse205.github.io/MagiskChineseDocument/ota.html\">这篇文档</a>。</li>\n</ul>\n<section id=\"footnotes\" class=\"footnotes footnotes-end-of-document\" role=\"doc-endnotes\">\n<hr>\n<ol>\n<li id=\"fn1\"><p><a href=\"https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg\">何为\nroot？维术：https://mp.weixin.qq.com/s/eF9izvazeSZ1bVxOcxamQg</a><a href=\"#fnref1\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n<li id=\"fn2\"><p><a href=\"https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg\">当我们谈论解锁\nBootLoader\n时，我们在谈论什么？维术：https://mp.weixin.qq.com/s/-9VKyraHq5Qt2PTzqVqZOg</a><a href=\"#fnref2\" class=\"footnote-back\" role=\"doc-backlink\">↩︎</a></p></li>\n</ol>\n</section>"},{"title":"笑话的分类","date":"2024-05-22T16:00:00.000Z","_content":"\n可以说所有笑话的原理都是预期违背、状态转移、跳跃：到达或稳定在预期状态的失败过程。\n\n> 18 世纪的康德被认为是第一个从乖讹的角度为幽默下了完整定义的人。他指出，幽默来自于“从期待到期待落空的突然转换”。——[教你写笑话（幽默创作原理）](https://zhuanlan.zhihu.com/p/44548925)\n\n下面举的例子可能用到不止一种手法，段子来自[弱智吧官微](https://www.weibo.com/u/7031421269)和[赵本山小品](http://www.zhaobenshan.org/online/)等。\n\n## 第四面墙之内的场景跳跃\n\n### 故事线上的顺序场景跳跃：从正经到不正经\n\n> 坐好啊！下面请听第一个话题：母猪的产后护理\n\n在不正经之后通常会有一句话把它兜回来，类似相声的“去你的吧”“就这个啊”“没听说过”：\n\n> 拿错书了\n\n### 故事线上的逆序场景跳跃：callback\n\n> 咱俩一块玩，我叫逗你玩，我姓逗，叫逗你玩<br/>\n> ……<br/>\n> 妈妈，拿咱褂子呢。谁呀？逗你玩儿\n\n> 赵忠祥是我的心中偶像<br/>\n> ……<br/>\n> 我十分想见赵忠祥\n\n> 搭专机来的<br/>\n> 那太贵了，那我们报不起\n\n## 同一时间上的场景重叠：双关\n\n双关的表和里：表是通常意义上、一般的词义；里是特化的词义，是段子作者真正想要读者意识到的词义。\n\n### 读音活用：谐音双关\n\n> 刘邦今年读高一，正是打击楚的时候\n\n> “我让你把碳酸钠和盐酸拿来，怎么就拿来一瓶生理盐水？” “我道上混的。”\n\n### 字形活用：空目双关\n\n> “看看扔子。”刘备接过赵云手里的阿斗说道\n\n### 词性活用：断句双关\n\n> 车站门口卖榴莲，臭外地的\n\n> 顾客就是上帝，所以客观就是主观\n\n> 导师让我帮他端杯水，我忙着搞学术不端\n\n### 句义活用：类比双关\n\n> 死刑犯没有吃最后一顿饭，因为他坚信少吃一顿不会死\n\n> 如果你想在这个城市站稳脚跟，你的年龄最好要达到一周岁\n\n> 被门夹过的核桃还能补脑吗\n\n## 第四面墙两头的场景跳跃：正常人不会这么干\n\n### 典故重写、典故与白话互相切换\n\n> 我的这张旧船票还能否登上你的破船\n\n> 后来怎么样了？涛声依旧了\n\n> 开会的时候只有 18g 水要分给 6.02x10^23 个领导该怎么分？\n\n### 不同场景/典故切换、乱炖\n\n> 镇关西挨了三拳后心领神会，晚上三更准时来到鲁提辖的房间\n\n> 机智的诸葛亮将稻草人涂黑，成功从美国警察处借来十万颗子弹\n\n### 人、事、物与环境不匹配\n\n王警官系列、食人族系列、规则怪谈\n\n> 学校出现电锯杀人狂，校方反应迅速组织人员前来没收其大功率电器\n\n### 地狱笑话：当事人不会觉得好笑\n\n> 医院床位那么紧张，为什么不弄成上下铺呢\n\n> 杨过只剩一只手都这么厉害，两只手都没了还得了？\n\n### 归因偏差：因果颠倒、扩大词义\n\n> 早知道最后被第三志愿录取，第三志愿就应该填清华的\n\n> 你这个双人份的薯条套餐为什么只有奇数根\n\n### 本格弱智：说不定是真的弱智\n\n> 我从 1 一直数到了 10000 都没有发现两个相同的数字\n\n## 故事传递上的跳跃\n\n### 押韵：听觉上的 callback\n\n> 我叫白云，我叫黑土；我七十一，我七十五；我属鸡，我属虎\n\n> 他这个人就好比当年的三毛、哪吒、金刚葫芦娃\n\n### 重复：听觉与视觉上的 callback\n\n> 叠词词，恶心心\n\n### 自指：视觉上的 callback\n\n> 冷知识：冒号前面的才是冷知识\n\n### 拆字：视觉上的 callback\n\n> 要不是有耳朵，川普就变成晋三了\n\n> 成长为什么会有痛苦，因为宝宝去掉宝盖头就玉玉了\n\n### 从有到无的跳跃：return 0、废话文学\n\n> 据说每个胖子都是潜力股，瘦下来的话就会很瘦\n\n### 叙述性诡计：叙述者与接收者信息不对等\n\n> “你是清朝来的吧？”人们纷纷赞叹朱元璋思想先进\n\n### 部分信息缺失：冰山之上、之下信息不对等\n\n> 评论区留下身份证号后两位，一样的在一起\n\n### 三方跳跃：句子自身（符号）、句义（剧情）、句子的载体（平台）\n\n- 句子的排版表意\n\n> 不义不义不义<br/>\n> 不义自己不义<br/>\n> 不义不义不义<br/>\n\n- 句子的自我表达\n\n> 本次“最快抄写自己名字一百遍”比赛的获胜者是：\n\n正方辩题：白色不可以作为字体的颜色。反方辩题：<span style=\"color:#fff\">白色可以作为字体的颜色<span>\n","source":"_posts/笑话的分类.md","raw":"---\ntitle: 笑话的分类\ndate: 2024-05-23 00:00:00\npermalink: joke.html\n---\n\n可以说所有笑话的原理都是预期违背、状态转移、跳跃：到达或稳定在预期状态的失败过程。\n\n> 18 世纪的康德被认为是第一个从乖讹的角度为幽默下了完整定义的人。他指出，幽默来自于“从期待到期待落空的突然转换”。——[教你写笑话（幽默创作原理）](https://zhuanlan.zhihu.com/p/44548925)\n\n下面举的例子可能用到不止一种手法，段子来自[弱智吧官微](https://www.weibo.com/u/7031421269)和[赵本山小品](http://www.zhaobenshan.org/online/)等。\n\n## 第四面墙之内的场景跳跃\n\n### 故事线上的顺序场景跳跃：从正经到不正经\n\n> 坐好啊！下面请听第一个话题：母猪的产后护理\n\n在不正经之后通常会有一句话把它兜回来，类似相声的“去你的吧”“就这个啊”“没听说过”：\n\n> 拿错书了\n\n### 故事线上的逆序场景跳跃：callback\n\n> 咱俩一块玩，我叫逗你玩，我姓逗，叫逗你玩<br/>\n> ……<br/>\n> 妈妈，拿咱褂子呢。谁呀？逗你玩儿\n\n> 赵忠祥是我的心中偶像<br/>\n> ……<br/>\n> 我十分想见赵忠祥\n\n> 搭专机来的<br/>\n> 那太贵了，那我们报不起\n\n## 同一时间上的场景重叠：双关\n\n双关的表和里：表是通常意义上、一般的词义；里是特化的词义，是段子作者真正想要读者意识到的词义。\n\n### 读音活用：谐音双关\n\n> 刘邦今年读高一，正是打击楚的时候\n\n> “我让你把碳酸钠和盐酸拿来，怎么就拿来一瓶生理盐水？” “我道上混的。”\n\n### 字形活用：空目双关\n\n> “看看扔子。”刘备接过赵云手里的阿斗说道\n\n### 词性活用：断句双关\n\n> 车站门口卖榴莲，臭外地的\n\n> 顾客就是上帝，所以客观就是主观\n\n> 导师让我帮他端杯水，我忙着搞学术不端\n\n### 句义活用：类比双关\n\n> 死刑犯没有吃最后一顿饭，因为他坚信少吃一顿不会死\n\n> 如果你想在这个城市站稳脚跟，你的年龄最好要达到一周岁\n\n> 被门夹过的核桃还能补脑吗\n\n## 第四面墙两头的场景跳跃：正常人不会这么干\n\n### 典故重写、典故与白话互相切换\n\n> 我的这张旧船票还能否登上你的破船\n\n> 后来怎么样了？涛声依旧了\n\n> 开会的时候只有 18g 水要分给 6.02x10^23 个领导该怎么分？\n\n### 不同场景/典故切换、乱炖\n\n> 镇关西挨了三拳后心领神会，晚上三更准时来到鲁提辖的房间\n\n> 机智的诸葛亮将稻草人涂黑，成功从美国警察处借来十万颗子弹\n\n### 人、事、物与环境不匹配\n\n王警官系列、食人族系列、规则怪谈\n\n> 学校出现电锯杀人狂，校方反应迅速组织人员前来没收其大功率电器\n\n### 地狱笑话：当事人不会觉得好笑\n\n> 医院床位那么紧张，为什么不弄成上下铺呢\n\n> 杨过只剩一只手都这么厉害，两只手都没了还得了？\n\n### 归因偏差：因果颠倒、扩大词义\n\n> 早知道最后被第三志愿录取，第三志愿就应该填清华的\n\n> 你这个双人份的薯条套餐为什么只有奇数根\n\n### 本格弱智：说不定是真的弱智\n\n> 我从 1 一直数到了 10000 都没有发现两个相同的数字\n\n## 故事传递上的跳跃\n\n### 押韵：听觉上的 callback\n\n> 我叫白云，我叫黑土；我七十一，我七十五；我属鸡，我属虎\n\n> 他这个人就好比当年的三毛、哪吒、金刚葫芦娃\n\n### 重复：听觉与视觉上的 callback\n\n> 叠词词，恶心心\n\n### 自指：视觉上的 callback\n\n> 冷知识：冒号前面的才是冷知识\n\n### 拆字：视觉上的 callback\n\n> 要不是有耳朵，川普就变成晋三了\n\n> 成长为什么会有痛苦，因为宝宝去掉宝盖头就玉玉了\n\n### 从有到无的跳跃：return 0、废话文学\n\n> 据说每个胖子都是潜力股，瘦下来的话就会很瘦\n\n### 叙述性诡计：叙述者与接收者信息不对等\n\n> “你是清朝来的吧？”人们纷纷赞叹朱元璋思想先进\n\n### 部分信息缺失：冰山之上、之下信息不对等\n\n> 评论区留下身份证号后两位，一样的在一起\n\n### 三方跳跃：句子自身（符号）、句义（剧情）、句子的载体（平台）\n\n- 句子的排版表意\n\n> 不义不义不义<br/>\n> 不义自己不义<br/>\n> 不义不义不义<br/>\n\n- 句子的自我表达\n\n> 本次“最快抄写自己名字一百遍”比赛的获胜者是：\n\n正方辩题：白色不可以作为字体的颜色。反方辩题：<span style=\"color:#fff\">白色可以作为字体的颜色<span>\n","slug":"笑话的分类","published":1,"updated":"2025-09-14T14:51:49.679Z","__permalink":"joke.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnq000k5ws63g0hevaw","content":"<p>可以说所有笑话的原理都是预期违背、状态转移、跳跃：到达或稳定在预期状态的失败过程。</p>\n<blockquote>\n<p>18\n世纪的康德被认为是第一个从乖讹的角度为幽默下了完整定义的人。他指出，幽默来自于 “从期待到期待落空的突然转换”。—— <a href=\"https://zhuanlan.zhihu.com/p/44548925\">教你写笑话（幽默创作原理）</a></p>\n</blockquote>\n<p>下面举的例子可能用到不止一种手法，段子来自<a href=\"https://www.weibo.com/u/7031421269\">弱智吧官微</a>和<a href=\"http://www.zhaobenshan.org/online/\">赵本山小品</a>等。</p>\n<h2 id=\"第四面墙之内的场景跳跃\">第四面墙之内的场景跳跃</h2>\n<h3 id=\"故事线上的顺序场景跳跃从正经到不正经\">故事线上的顺序场景跳跃：从正经到不正经</h3>\n<blockquote>\n<p>坐好啊！下面请听第一个话题：母猪的产后护理</p>\n</blockquote>\n<p>在不正经之后通常会有一句话把它兜回来，类似相声的 “去你的吧”“就这个啊”“没听说过”：</p>\n<blockquote>\n<p>拿错书了</p>\n</blockquote>\n<h3 id=\"故事线上的逆序场景跳跃callback\">故事线上的逆序场景跳跃：callback</h3>\n<blockquote>\n<p>咱俩一块玩，我叫逗你玩，我姓逗，叫逗你玩<br> ……<br>\n妈妈，拿咱褂子呢。谁呀？逗你玩儿</p>\n</blockquote>\n<blockquote>\n<p>赵忠祥是我的心中偶像<br> ……<br> 我十分想见赵忠祥</p>\n</blockquote>\n<blockquote>\n<p>搭专机来的<br> 那太贵了，那我们报不起</p>\n</blockquote>\n<h2 id=\"同一时间上的场景重叠双关\">同一时间上的场景重叠：双关</h2>\n<p>双关的表和里：表是通常意义上、一般的词义；里是特化的词义，是段子作者真正想要读者意识到的词义。</p>\n<h3 id=\"读音活用谐音双关\">读音活用：谐音双关</h3>\n<blockquote>\n<p>刘邦今年读高一，正是打击楚的时候</p>\n</blockquote>\n<blockquote>\n<p>“我让你把碳酸钠和盐酸拿来，怎么就拿来一瓶生理盐水？”\n“我道上混的。”</p>\n</blockquote>\n<h3 id=\"字形活用空目双关\">字形活用：空目双关</h3>\n<blockquote>\n<p>“看看扔子。” 刘备接过赵云手里的阿斗说道</p>\n</blockquote>\n<h3 id=\"词性活用断句双关\">词性活用：断句双关</h3>\n<blockquote>\n<p>车站门口卖榴莲，臭外地的</p>\n</blockquote>\n<blockquote>\n<p>顾客就是上帝，所以客观就是主观</p>\n</blockquote>\n<blockquote>\n<p>导师让我帮他端杯水，我忙着搞学术不端</p>\n</blockquote>\n<h3 id=\"句义活用类比双关\">句义活用：类比双关</h3>\n<blockquote>\n<p>死刑犯没有吃最后一顿饭，因为他坚信少吃一顿不会死</p>\n</blockquote>\n<blockquote>\n<p>如果你想在这个城市站稳脚跟，你的年龄最好要达到一周岁</p>\n</blockquote>\n<blockquote>\n<p>被门夹过的核桃还能补脑吗</p>\n</blockquote>\n<h2 id=\"第四面墙两头的场景跳跃正常人不会这么干\">第四面墙两头的场景跳跃：正常人不会这么干</h2>\n<h3 id=\"典故重写典故与白话互相切换\">典故重写、典故与白话互相切换</h3>\n<blockquote>\n<p>我的这张旧船票还能否登上你的破船</p>\n</blockquote>\n<blockquote>\n<p>后来怎么样了？涛声依旧了</p>\n</blockquote>\n<blockquote>\n<p>开会的时候只有 18g 水要分给 6.02x10^23 个领导该怎么分？</p>\n</blockquote>\n<h3 id=\"不同场景典故切换乱炖\">不同场景 / 典故切换、乱炖</h3>\n<blockquote>\n<p>镇关西挨了三拳后心领神会，晚上三更准时来到鲁提辖的房间</p>\n</blockquote>\n<blockquote>\n<p>机智的诸葛亮将稻草人涂黑，成功从美国警察处借来十万颗子弹</p>\n</blockquote>\n<h3 id=\"人事物与环境不匹配\">人、事、物与环境不匹配</h3>\n<p>王警官系列、食人族系列、规则怪谈</p>\n<blockquote>\n<p>学校出现电锯杀人狂，校方反应迅速组织人员前来没收其大功率电器</p>\n</blockquote>\n<h3 id=\"地狱笑话当事人不会觉得好笑\">地狱笑话：当事人不会觉得好笑</h3>\n<blockquote>\n<p>医院床位那么紧张，为什么不弄成上下铺呢</p>\n</blockquote>\n<blockquote>\n<p>杨过只剩一只手都这么厉害，两只手都没了还得了？</p>\n</blockquote>\n<h3 id=\"归因偏差因果颠倒扩大词义\">归因偏差：因果颠倒、扩大词义</h3>\n<blockquote>\n<p>早知道最后被第三志愿录取，第三志愿就应该填清华的</p>\n</blockquote>\n<blockquote>\n<p>你这个双人份的薯条套餐为什么只有奇数根</p>\n</blockquote>\n<h3 id=\"本格弱智说不定是真的弱智\">本格弱智：说不定是真的弱智</h3>\n<blockquote>\n<p>我从 1 一直数到了 10000 都没有发现两个相同的数字</p>\n</blockquote>\n<h2 id=\"故事传递上的跳跃\">故事传递上的跳跃</h2>\n<h3 id=\"押韵听觉上的-callback\">押韵：听觉上的 callback</h3>\n<blockquote>\n<p>我叫白云，我叫黑土；我七十一，我七十五；我属鸡，我属虎</p>\n</blockquote>\n<blockquote>\n<p>他这个人就好比当年的三毛、哪吒、金刚葫芦娃</p>\n</blockquote>\n<h3 id=\"重复听觉与视觉上的-callback\">重复：听觉与视觉上的 callback</h3>\n<blockquote>\n<p>叠词词，恶心心</p>\n</blockquote>\n<h3 id=\"自指视觉上的-callback\">自指：视觉上的 callback</h3>\n<blockquote>\n<p>冷知识：冒号前面的才是冷知识</p>\n</blockquote>\n<h3 id=\"拆字视觉上的-callback\">拆字：视觉上的 callback</h3>\n<blockquote>\n<p>要不是有耳朵，川普就变成晋三了</p>\n</blockquote>\n<blockquote>\n<p>成长为什么会有痛苦，因为宝宝去掉宝盖头就玉玉了</p>\n</blockquote>\n<h3 id=\"从有到无的跳跃return-0废话文学\">从有到无的跳跃：return\n0、废话文学</h3>\n<blockquote>\n<p>据说每个胖子都是潜力股，瘦下来的话就会很瘦</p>\n</blockquote>\n<h3 id=\"叙述性诡计叙述者与接收者信息不对等\">叙述性诡计：叙述者与接收者信息不对等</h3>\n<blockquote>\n<p>“你是清朝来的吧？” 人们纷纷赞叹朱元璋思想先进</p>\n</blockquote>\n<h3 id=\"部分信息缺失冰山之上之下信息不对等\">部分信息缺失：冰山之上、之下信息不对等</h3>\n<blockquote>\n<p>评论区留下身份证号后两位，一样的在一起</p>\n</blockquote>\n<h3 id=\"三方跳跃句子自身符号句义剧情句子的载体平台\">三方跳跃：句子自身（符号）、句义（剧情）、句子的载体（平台）</h3>\n<ul>\n<li>句子的排版表意</li>\n</ul>\n<blockquote>\n<p>不义不义不义<br> 不义自己不义<br> 不义不义不义<br></p>\n</blockquote>\n<ul>\n<li>句子的自我表达</li>\n</ul>\n<blockquote>\n<p>本次 “最快抄写自己名字一百遍” 比赛的获胜者是：</p>\n</blockquote>\n<p>正方辩题：白色不可以作为字体的颜色。反方辩题：<span style=\"color:#fff\">白色可以作为字体的颜色<span></span></span></p>\n","excerpt":"","more":"<p>可以说所有笑话的原理都是预期违背、状态转移、跳跃：到达或稳定在预期状态的失败过程。</p>\n<blockquote>\n<p>18\n世纪的康德被认为是第一个从乖讹的角度为幽默下了完整定义的人。他指出，幽默来自于 “从期待到期待落空的突然转换”。—— <a href=\"https://zhuanlan.zhihu.com/p/44548925\">教你写笑话（幽默创作原理）</a></p>\n</blockquote>\n<p>下面举的例子可能用到不止一种手法，段子来自<a href=\"https://www.weibo.com/u/7031421269\">弱智吧官微</a>和<a href=\"http://www.zhaobenshan.org/online/\">赵本山小品</a>等。</p>\n<h2 id=\"第四面墙之内的场景跳跃\">第四面墙之内的场景跳跃</h2>\n<h3 id=\"故事线上的顺序场景跳跃从正经到不正经\">故事线上的顺序场景跳跃：从正经到不正经</h3>\n<blockquote>\n<p>坐好啊！下面请听第一个话题：母猪的产后护理</p>\n</blockquote>\n<p>在不正经之后通常会有一句话把它兜回来，类似相声的 “去你的吧”“就这个啊”“没听说过”：</p>\n<blockquote>\n<p>拿错书了</p>\n</blockquote>\n<h3 id=\"故事线上的逆序场景跳跃callback\">故事线上的逆序场景跳跃：callback</h3>\n<blockquote>\n<p>咱俩一块玩，我叫逗你玩，我姓逗，叫逗你玩<br> ……<br>\n妈妈，拿咱褂子呢。谁呀？逗你玩儿</p>\n</blockquote>\n<blockquote>\n<p>赵忠祥是我的心中偶像<br> ……<br> 我十分想见赵忠祥</p>\n</blockquote>\n<blockquote>\n<p>搭专机来的<br> 那太贵了，那我们报不起</p>\n</blockquote>\n<h2 id=\"同一时间上的场景重叠双关\">同一时间上的场景重叠：双关</h2>\n<p>双关的表和里：表是通常意义上、一般的词义；里是特化的词义，是段子作者真正想要读者意识到的词义。</p>\n<h3 id=\"读音活用谐音双关\">读音活用：谐音双关</h3>\n<blockquote>\n<p>刘邦今年读高一，正是打击楚的时候</p>\n</blockquote>\n<blockquote>\n<p>“我让你把碳酸钠和盐酸拿来，怎么就拿来一瓶生理盐水？”\n“我道上混的。”</p>\n</blockquote>\n<h3 id=\"字形活用空目双关\">字形活用：空目双关</h3>\n<blockquote>\n<p>“看看扔子。” 刘备接过赵云手里的阿斗说道</p>\n</blockquote>\n<h3 id=\"词性活用断句双关\">词性活用：断句双关</h3>\n<blockquote>\n<p>车站门口卖榴莲，臭外地的</p>\n</blockquote>\n<blockquote>\n<p>顾客就是上帝，所以客观就是主观</p>\n</blockquote>\n<blockquote>\n<p>导师让我帮他端杯水，我忙着搞学术不端</p>\n</blockquote>\n<h3 id=\"句义活用类比双关\">句义活用：类比双关</h3>\n<blockquote>\n<p>死刑犯没有吃最后一顿饭，因为他坚信少吃一顿不会死</p>\n</blockquote>\n<blockquote>\n<p>如果你想在这个城市站稳脚跟，你的年龄最好要达到一周岁</p>\n</blockquote>\n<blockquote>\n<p>被门夹过的核桃还能补脑吗</p>\n</blockquote>\n<h2 id=\"第四面墙两头的场景跳跃正常人不会这么干\">第四面墙两头的场景跳跃：正常人不会这么干</h2>\n<h3 id=\"典故重写典故与白话互相切换\">典故重写、典故与白话互相切换</h3>\n<blockquote>\n<p>我的这张旧船票还能否登上你的破船</p>\n</blockquote>\n<blockquote>\n<p>后来怎么样了？涛声依旧了</p>\n</blockquote>\n<blockquote>\n<p>开会的时候只有 18g 水要分给 6.02x10^23 个领导该怎么分？</p>\n</blockquote>\n<h3 id=\"不同场景典故切换乱炖\">不同场景 / 典故切换、乱炖</h3>\n<blockquote>\n<p>镇关西挨了三拳后心领神会，晚上三更准时来到鲁提辖的房间</p>\n</blockquote>\n<blockquote>\n<p>机智的诸葛亮将稻草人涂黑，成功从美国警察处借来十万颗子弹</p>\n</blockquote>\n<h3 id=\"人事物与环境不匹配\">人、事、物与环境不匹配</h3>\n<p>王警官系列、食人族系列、规则怪谈</p>\n<blockquote>\n<p>学校出现电锯杀人狂，校方反应迅速组织人员前来没收其大功率电器</p>\n</blockquote>\n<h3 id=\"地狱笑话当事人不会觉得好笑\">地狱笑话：当事人不会觉得好笑</h3>\n<blockquote>\n<p>医院床位那么紧张，为什么不弄成上下铺呢</p>\n</blockquote>\n<blockquote>\n<p>杨过只剩一只手都这么厉害，两只手都没了还得了？</p>\n</blockquote>\n<h3 id=\"归因偏差因果颠倒扩大词义\">归因偏差：因果颠倒、扩大词义</h3>\n<blockquote>\n<p>早知道最后被第三志愿录取，第三志愿就应该填清华的</p>\n</blockquote>\n<blockquote>\n<p>你这个双人份的薯条套餐为什么只有奇数根</p>\n</blockquote>\n<h3 id=\"本格弱智说不定是真的弱智\">本格弱智：说不定是真的弱智</h3>\n<blockquote>\n<p>我从 1 一直数到了 10000 都没有发现两个相同的数字</p>\n</blockquote>\n<h2 id=\"故事传递上的跳跃\">故事传递上的跳跃</h2>\n<h3 id=\"押韵听觉上的-callback\">押韵：听觉上的 callback</h3>\n<blockquote>\n<p>我叫白云，我叫黑土；我七十一，我七十五；我属鸡，我属虎</p>\n</blockquote>\n<blockquote>\n<p>他这个人就好比当年的三毛、哪吒、金刚葫芦娃</p>\n</blockquote>\n<h3 id=\"重复听觉与视觉上的-callback\">重复：听觉与视觉上的 callback</h3>\n<blockquote>\n<p>叠词词，恶心心</p>\n</blockquote>\n<h3 id=\"自指视觉上的-callback\">自指：视觉上的 callback</h3>\n<blockquote>\n<p>冷知识：冒号前面的才是冷知识</p>\n</blockquote>\n<h3 id=\"拆字视觉上的-callback\">拆字：视觉上的 callback</h3>\n<blockquote>\n<p>要不是有耳朵，川普就变成晋三了</p>\n</blockquote>\n<blockquote>\n<p>成长为什么会有痛苦，因为宝宝去掉宝盖头就玉玉了</p>\n</blockquote>\n<h3 id=\"从有到无的跳跃return-0废话文学\">从有到无的跳跃：return\n0、废话文学</h3>\n<blockquote>\n<p>据说每个胖子都是潜力股，瘦下来的话就会很瘦</p>\n</blockquote>\n<h3 id=\"叙述性诡计叙述者与接收者信息不对等\">叙述性诡计：叙述者与接收者信息不对等</h3>\n<blockquote>\n<p>“你是清朝来的吧？” 人们纷纷赞叹朱元璋思想先进</p>\n</blockquote>\n<h3 id=\"部分信息缺失冰山之上之下信息不对等\">部分信息缺失：冰山之上、之下信息不对等</h3>\n<blockquote>\n<p>评论区留下身份证号后两位，一样的在一起</p>\n</blockquote>\n<h3 id=\"三方跳跃句子自身符号句义剧情句子的载体平台\">三方跳跃：句子自身（符号）、句义（剧情）、句子的载体（平台）</h3>\n<ul>\n<li>句子的排版表意</li>\n</ul>\n<blockquote>\n<p>不义不义不义<br> 不义自己不义<br> 不义不义不义<br></p>\n</blockquote>\n<ul>\n<li>句子的自我表达</li>\n</ul>\n<blockquote>\n<p>本次 “最快抄写自己名字一百遍” 比赛的获胜者是：</p>\n</blockquote>\n<p>正方辩题：白色不可以作为字体的颜色。反方辩题：<span style=\"color:#fff\">白色可以作为字体的颜色<span></span></span></p>\n"},{"title":"漫无止境的童年","date":"2024-07-13T11:00:00.000Z","mathjax":true,"_content":"\n<img src=\"/blog/images/game/any.webp\">\n\n精神分析理论认为，游戏是一种通过主动控制情境来调节情绪、释放焦虑、补偿愿望的过程。认知发展理论认为，游戏创造着最近发展区。按体现孩子认知发展的水平来分类，可把游戏分为三个阶段：\n\n- 婴儿期的机能游戏：通过重复的动作来探索环境，发展身体能力，适应生活。如亲子互动，爬行，拍打玩具。\n- 幼儿期的象征性游戏：以经验为基础，通过想象和角色扮演赋予物体或动作象征意义。如过家家，假装打仗。\n- 童年期及以后的规则性游戏：强调合作，竞争和逻辑思维。如桌游和球类运动。\n\n## 非电子游戏\n\n寒暑假回老家玩的：\n\n用麻将砌房子\n\n<img src=\"/blog/images/game/belfry.webp\">\n\n模仿电视打牌节目。用 26 个英文字母加一个 $\\pi$ 作为选手的名字，一人分饰27角附带记分：\n\n1. 先给三位玩家发牌，如 A B C，留三张底牌\n2. 每局的底分为 1，起始倍数为 1\n3. 在叫地主之前，每个人都有一次明牌的机会。明牌翻 8 倍，且最先明牌的人有优先叫地主的权利。实现的方式是，把三个人的牌都理好之后，看有没有人牌是特别好的，有就明牌，并且抢占叫地主的优先级。可能只有这一条是无法做到公平的，因为你作为一个上帝视角，如果有两手好牌，你必定是有一个先后看到的顺序的，你无法模拟在现实里抢明牌的情况，只能选一个牌更好的人。\n4. 开始叫地主。叫地主的顺序在每局结束之后轮换一下\n5. 如果有人抢地主，翻 2 倍。每人最多抢一次地主，也就是说，最先叫地主的人还有一次“我抢”的机会。同时，不叫的人是不能抢地主的。\n6. 在叫地主和抢地主的时候，你必须站在每一位玩家的立场上，只根据他们自身持有的有限信息，来判断叫不叫牌。这时候底牌和其他人的牌是不能参考的，你要假装自己不知道。在局中的时候同理，除非有人明牌了。\n7. 在地主确定之后，底牌才能翻开。这时候规定，中间一张底牌的点数加一的牌为癞子。如底牌的第二张是 K，那么 A 为癞子；如果是 2 或者王，那么 3 为癞子。从这里我们可以看到，3 为癞子的概率是 $\\frac{6}{54}$，4/.../2 为癞子的概率是 $\\frac{4}{54}$，王不能当癞子\n8. 作地主的人，在出第一手牌之前，额外有一次明牌的机会，如果他在之前没有明牌的话。\n9. 软炸翻 2 倍，硬炸翻 4 倍，纯癞子炸翻 8 倍，春天翻 8 倍，倍数上不封顶。在以前《影视智斗星》这个节目也是没有封顶倍数的，所以出现过中场负 10000 分的情况，几乎能确定冠军，后面根本不用打了，它在 2008 年左右大概叫《挑战大民星》之类的名字。我们这个游戏为了刺激和好玩，还是没有封顶倍数的，这可能存在一个人为了追分，在发第一张牌之后就会强行地明牌抢地主而不管自己的牌是好还是坏。\n10. 一局结束之后，计分。如本局的倍数是 8 倍，地主赢了，那么地主+16，农民-8。\n11. 一桌打十局。所有桌打完之后，按分数共同参与排序。27 进 18，18 进 9，9 进 3\n\n进阶的玩法是，可以给每一位选手设定一个性格。比如把 A 设定成豪放的，B设定成稳重的。\n\n自制什么棋：我还曾经把月饼和粽子盒子的内侧变成了奇幻地图，绘制了各种地形，并设置了前进、后退等行动指令。四个橡皮擦化身成勇敢的探险家，在投掷骰子之后按点数移动，目标是成为第一个到达终点的人。随着游戏的发展，邻居小孩也加入了进来，他们（事实上只有一个人）增加了金币和商店系统，使得这场冒险变得更加精彩纷呈。\n\n与好友共度的高中时光：进入高中后，我和一位朋友发明了几款不独特的纸笔游戏来打发时间：\n\n- 三维五子棋：我们利用作文本连续几页的页面来创造一种立体感，或者直接采用纯坐标的方式来进行对弈，给传统的平面五子棋带来了新的维度。由于二维的五子棋都有黑棋先手必胜的说法了，所以三维的可能是黑占大优的，但是我们只是试了一下，实际上它是不好玩的。坐标对弈的胜利判定条件是：一方有五个棋子的坐标三个分量分别都成了-1/0/1 的等差数列。\n- 脑黑洞：这款游戏由朋友原创，一方画出某样东西 A，另一方则要画出能够克制 A 的东西，并且给出合理的解释。不论多么天马行空的想法，只要逻辑自洽就能成立，这样的互动既考验着我们的创造力也锻炼了解释能力。\n- 纸上谈兵：受到在线游戏[《Tank Trouble》](https://tank-trouble.co/)和[《MUTINY》](https://www.4399.com/flash/220013_1.htm)启发，我在物理实验课上构思出了这款战略游戏。玩家需要在回合开始前决定是进行移动还是攻击。移动就是按照所画路线行进，而攻击则要看线路是否能触及对手。游戏还引入了不同类型的单位，增添了战术层面的选择（现在都忘了）。\n\n<img src=\"/blog/images/game/paper-attack.gif\">\n\n这些游戏不仅充实了我的童年与青少年时期，更是在没有高科技玩具的情况下，教会了我如何利用身边的一切去创造快乐。每当回忆起那些日子，心中总是充满温暖与感激。\n\n玩具：没有弹珠，所以打瓶盖，小时候把瓶盖装了一个鞋盒子；有一段时间玩过带发射器和链条的陀螺，说明我以前也不是不愿意花钱的；还买过游戏王的卡，但是在 21 世纪 10 年代里的、不知道第几次的童年告别仪式里被我扔了；扑克牌的玩法有斗地主、接竹竿和 7 鬼 523；还玩过象棋和五子棋，水平在知道规则的程度。五子棋应该可以和小白下平，用八卦阵就行了。\n\n象棋告诉我们的：拱一个卒，或者用车看两条线，在当前的这一步是没什么效果的，它的效果在后面才有；下限时的象棋可以锻炼决策能力。\n\n拍手游戏：在我转学前的那个环境里，这是一系列适合两人或多人参与的互动游戏的统称，结合了口令与手势，带有升级机制的回合制对决。玩家通过一只嘴和两只手掌来施展预先商定好的招式以克制对手。基础技能分为三大类：吸气、防御以及攻击。吸气是给自己加 1MP，在使用攻击技能和部分高等级的防御技能需要消耗气。为了确保动作的一致性，在每个回合开始前，参与者需先拍手同步节奏；而在执行招式时，则需配合相应的手势与口号。\n\n大自然：虽然我老家在农村，但是我基本没有上山和下河玩过，没有对应的记忆。这张照片是 2024 年拍的，人可以一次踏入两条河流：\n\n<img src=\"/blog/images/game/river.webp\">\n\n控梦：有一段时间，我关注过清明梦的贴吧，甚至还有一段时间真的做了清醒梦，它多出现在睡回笼觉的时候，就是你的一部分意识可以意识到你在做梦，进而可以在梦里活动。分自由的活动和有限制的活动，我只能做到有限制的活动，比如在天上飞，飞起来之后保持不了太长的时间，总会受到地心引力下坠。但是后来都没在乎这个事了，梦也做得很少，也可能是做了忘了。《梦控师》这本书系统地介绍了做清明梦的方法。\n\n### 川牌规则\n\n戳牌，即四川长牌。仅限于笔者祖父母和外祖父母那一带地区的玩法。\n\n牌面：21 种 x 4 张 = 84 张牌。这里为了介绍，把长得一样的牌叫同种牌。两种黑八不算是同一种，因为长得不一样。\n\n- 正门：天牌（66 宋江）> 地牌（11 公孙胜）> 人牌（44 秦明）> 和牌（13 柴进）>\n- 长门：长三（33 武松）> 梅十（55 董平）> 板凳（22 鲁智深）\n- 幺门：疙瘩（15 徐宁）> 幺七（16 索超）> 四六（46 杨志）> 虎头（56 张清）\n- 点门：\n  - 黑点：黑九（36 吴用）> 平八（26 林冲）、弯八（35 关胜）> 黑七（25 花荣）> 黑五（23 朱仝）\n  - 红点：红九（45 卢俊义）> 红七（34 呼延灼）> 红五（14 李应）>\n- 猴：公猴/红三（12 戴宗）、母猴/红六（24 刘唐）\n\n牌型与比较系统：\n\n- 重叠牌型。同种牌出 1 张到 4 张\n  - 正门+长门算一个系统\n  - 幺门算一个系统\n  - 黑点算一个系统\n  - 红点+猴算一个系统\n  - 如：两张天牌可管两张人牌或两张梅十，但不能管一张梅十、两张黑九或两张幺七；黑九不能管红七。\n- 组合牌型。组合规则为：天九、地八、人七、和五。一张及以上的（天/地/人/和）牌与一张及以上的对应的（九点/八点/七点/五点）牌组合为 2 至 12 张的组合牌，例如：\n  - 天牌 + 红九 + 黑九 + 黑九 = 四天九\n  - 地牌 + 黑八 = 两地八\n  - 人牌 + 人牌 + 红七 = 三人七\n  - 和牌 + 和牌 + 红五 + 黑五 = 四和五\n  - 这四种情况算一个系统\n  - 如：四地八可管四人七、四和五，但不能管三人七或五和五。\n\n去向：分为手牌、桌面和积分堆。\n\n接牌时手牌按门类分为不同的列。\n\n1. 顺序接牌，接到一对公母猴牌直接放到己方的积分堆。如果一对都不成，单猴单出被红点管；如果除了一对还有别的猴，也直接放到积分堆。\n2. 按圈出牌，类似升级、拱猪，但不能垫牌。每一圈里能管必管，要求在同一个比较系统里，且张数相同。管不了时 pass\n   - 第一个接牌的人为首引\n   - 一圈结束后，牌最大的一方把他在本圈出的一手牌放到己方的积分堆，并作为下一圈的领出\n3. 仅一人未出完手牌时，本局结束。积分堆里牌张数最多的一方获胜。\n\n其他判定规则：如果一位玩家认为自己剩余的手牌全大，可以进行摊牌。三个人 20 张算赢。如果摊牌失误，就是丢脸了。\n\n### 打燕窝\n\n在郧阳区城关镇的西北方向上有一个堰河村，是 11 路公交车的终点站，其所在地原名叫大堰。2001 年，大堰乡被并入了城关镇，所以它现在属城关镇管辖。在堰河村的北面，230 省道的堰河大桥路段，有一条小河叫仙人河，它是汉江支流的一个起端。\n\n<img src=\"/blog/images/打燕窝地理位置.webp\">\n\n事实上在我站立的地方附近也是仙人河。从河长牌子上可以看到，这条河长达 31.5 km。并且，在离仙人河牌子不远的地方，还有狮子河的牌子。但只有腾讯地图把它们标出来了，高德和百度地图都没标。\n\n在堰河大桥下河岸顺着水源方向走二十分钟左右，就能看到打燕窝。它是崖壁上自然形成的一个洞，站在岸边的人向里面扔石头祈福，如果扔进了，就预示着好运。\n\n<img src=\"/blog/images/打燕窝.webp\">\n\n## 单机游戏\n\n### 摩托罗拉 C117 自定义铃声语法说明\n\n我最早接触的电子设备，大概就是奶奶手中的那部手机了。这款手机诞生于 2005 年，它拥有一块单色屏幕，内置了三款小游戏——黑白棋、小蜜蜂以及弹球，成了我当时探索数字世界的窗口。\n\n<img src=\"/blog/images/game/C117.webp\">\n\n它还可以自定义铃声。在铃音类型 -> 我的铃音里可以自定义四首曲子，每首曲子的保存方式是一串 0 至 255 字符的文本。音域在 F3 至 E7 之间。\n\n符号表：\n\n| 符号                         | 说明                                                                   |\n| ---------------------------- | ---------------------------------------------------------------------- |\n| a #a b c #c d #d e f #f g #g | 音级                                                                   |\n| r                            | 休止符                                                                 |\n| \\*3 \\*4 \\*5 \\*6 \\*7          | 与音级右结合，指示之后的几个音级所在的分组。缺省为 4                   |\n| 0 1 2 3 4 5                  | 与音级或休止符左结合，指示该音符的时长，从全音符到 32 分音符。缺省为 2 |\n\n如：\n\n- `*4a0`，它代表 A4 的全音符。\n- `*5a`，它和 `*5a2` 的语义相同，代表 A5 的四分音符。\n- `*4#a1`，它代表 A#4 的二分音符。\n- `*4#ab3`，它代表一个 A#4 的四分音符和一个 B4 的八分音符。\n\n输入方式：\n\n- 上下键：\\*3f \\*3#f \\*3g 至 \\*7#d \\*7e\n- 1 键：1 . : ; 在它的帮助里显示可以输入附点音符，但是笔者没有测试成功它的语法。\n- 2 键：a b c 2\n- 3 键：d e f 3\n- 4 键：g 4\n- 5 键：5\n- 6 键：6\n- 7 键：r 7\n- 8 键：8\n- 9 键：( ) @ 9\n- 0 键：0 \\* # &\n- \\* 键：光标左移\n- \\# 键：光标右移\n\n示例：《万象霜天》的开头部分。\n\n```\n*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bbbb#g#g#g*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bb*5#c1r1*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r#g1rb*7#c3*6b3#g1r#f1rer*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r*7#c1re#f3e3\n```\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/moto.mp4\" type=\"video/mp4\" />\n</video>\n\n这里为了易读，添加了空格、换行\n\n```\n*5e#c*4b*5#c *4#g*5#c#c#c *4b*5#c#c#c e#c*4b*5#c\n太初太易 无相无形 莫知浊重 孰辨清轻\n绵绵若存 用之不勤 礼乐即作 仁义乃兴\n\ne#f#g#f #fee#d #d*4bbb b#g#g#g\n生乎混沌 分其昏明 天得以健 地得以宁\n\ne#f#g#f #fee#d #d*4bb*5#c1 r1\n我有此言 众妙之门 万类咸听\n\n*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r #g1r b*7#c3*6b3#g1r #f1r er\n\n*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r *7#c1r e#f3e3\n```\n\n最后一段以 \\*7 开始，#f7 超出音域了，所以响的是音域内的最高音 E7。\n\n### PC-Windows\n\n大约在 2008 年，我在十堰市上小学。信息技术课是我最早接触电脑的地方，那时电脑里装有金山打字通，里面有一个警察追小偷的游戏。从那时起，我的性格就显得格外倔强。记得有一次，教室里有一台无法启动的电脑，而其他电脑都已经正常开机了。尽管如此，我却坚持在这台故障电脑前不停地按键尝试，不肯放弃。最终，在我的不懈努力下，那台电脑竟然被我成功启动了。然而，就在那一刻，下课铃声也响了起来。\n\n2010 年至 2012 年，我住在县城的一间地下室里。那时家里唯一的信息设备除了手机就是一台收音机、一台没有接线的大头电视，偶尔还有一段短暂的时间给电视接线了。每个周末，父亲都会带我去他的单位玩电脑，那是我们最快乐的时光。在那台没有联网的 XP 系统电脑上，有一个游戏叫《合金弹头合集》，它收集了《合金弹头》的一至五（1996-2003）。面对这个新奇的游戏，我和父亲都感到茫然，不知该如何下手。于是，我决定采用最直接的方法——遍历法，逐一尝试键盘上的每一个按键。经过一番摸索，我意外地发现 1 键是用来开始游戏和投币的，WASD 则控制角色移动，而 JKLUIO 分别对应开枪、跳跃和扔手雷等功能。不仅如此，通过不断的尝试与探索，我还发现按 1+2 键可以调出游戏的作弊面板，在那里可以开启无限手雷等强大功能。在此之前，我从未接触过如此复杂的键位设置，而且我们的电脑也没有联网，无法访问像 4399 这样的游戏网站，英文自然也看不懂。\n\n<img src=\"/blog/images/game/metal-slug.webp\">\n\n后来有一天晚上放学回家，我发现家里多了一个箱子。由于从 2010 年开始我就有了社交恐惧症，我不敢直接询问箱子里装的是什么，但偷偷摸了一下，听到了鼠标点击的声音。不久之后，这台电脑就被组装了起来：VGA 接口的显示器、PS/2 接口的鼠标和键盘，以及一个需要插三根线的小音响。\n\n约 2012 年末，在我小学六年级的那段日子里，家里终于接通了有线网络。每次打开电脑都需要在宽带连接中输入账号密码才能上网。为了限制我玩游戏的时间，父亲还特意设置了开机密码。但我有一次偷看了父亲输入密码的过程，然后用遍历法试了出来。后来，我又发现了可以在 BIOS 中清空密码的方法。某次，我在电脑上看到了一个叫做“一键 GHOST”的程序，出于好奇想试一试，结果不小心将整个 C 盘的数据“归零”了，幸好其他盘中的文件还在。这些经历不仅记录了我的成长轨迹，也见证了我的好奇心和不断探索的精神。\n\n我曾深深沉迷于《植物大战僵尸》（2009），每天中午上学前都会准时为禅境花园里的植物们浇水，那份小小的仪式感成为了日常的一部分。为了探索游戏的无限可能，我还下载过各种修改器。其中最难忘的一次体验，莫过于释放了一整排全屏的火爆辣椒，那一刻，所有的僵尸瞬间被清空，那种震撼至今仍然历历在目。通过修改器的帮助，我还解锁了游戏中那些未曾正式发布的隐藏关卡，让我得以一窥游戏背后更多不为人知的秘密。我还曾动手修改过游戏汉化包中的一个文本文件，试图给植物们换上新的名字。虽然由于字符限制，新名字并不总是完整呈现，但这种创造性的尝试依然给我带来了极大的乐趣。\n\n《愤怒的小鸟：星球大战 2》（2013）至少陪伴我度过了两次冒险旅程。有一次，在干妈家再次下载了这款游戏。那段时间里，由于社交焦虑（就像近十年来的状态一样），我的世界几乎完全被电脑占据。虽然这样的生活充满了矛盾——既有游戏带来的快乐，也有内心的孤独与挣扎。\n\n在电脑开始菜单的附件游戏中，《Microsoft 网上红心大战》给我留下了深刻的印象。尽管名字中带有“网上”二字，但实际上无需联网也能玩。这是我首次体验按花色出牌的游戏规则。游戏设定为一人对抗三名电脑对手，每局结束时玩家得分通常为负数或零分，正分极为少见。后来玩过《拱猪》之后，我才发现这个游戏实际上是从《红心大战》演变而来的。此外，我还曾在扫雷网上上传了自己的游戏录像，尽管我的技术水平连业余都算不上。有趣的是，为了录制这些视频，还需要下载专门的竞赛用软件，而不是使用电脑自带的扫雷程序。\n\n### 自制超级马里奥地图\n\nSMX（2006）贴吧的关注人数现在和十年前（2014 年）相比几乎没有变化，一直都是几百人左右。即使在十年前，SMX 也已经是一个过气的项目了，因为相比之下，SMBX（2009）的地图编辑器更加成熟，其贴吧的关注人数超过了一千人。那时，我甚至还不明白什么是主机游戏，自然也就错过了《超级马里奥制造》的消息。初中时期的 2014 年左右，我在这样一个逐渐被人遗忘的环境中投入了大量的时间来制作 SMX 的地图，主要是为了逃避现实。那些精心设计的无趣地图至今仍保存在我的 GitHub 仓库中。\n\n> 这是当今我觉得唯一有意思的一张。就像现在这个网站一样，再过几年我就会觉得它一点意思也没有了。\n\n<img src=\"/blog/images/game/smx.gif\">\n\n如今，SMX 本体在其[作者 Gsk 的网站](http://www.gsksoft.cn/smx/index.html)上已经无法下载了。如果你现在想在 Windows 10 下运行它的地图播放器，你还需要额外注册 `dx7vb.dll` 用于播放声音。而它的地图编辑器会报依赖错误，你或许还需要去配 VB 的环境，不知道应该怎么办。\n\n同年，我通过优酷网（或类似的视频平台）上一位名叫独翼神龙的播主分享的链接，下载了 FC 模拟器和《超级马里奥兄弟》（1985）。后来，我又下载了一个可以修改《超级马里奥兄弟》NES 文件的地图编辑器。尽管没有多少美感和设计思路，我还是乐此不疲地制作了好几个改版 ROM。从那时起，我就开始间歇性地回忆起童年的美好时光。我的第一个无趣的视频是在酷 6 网上发布的，因此数字 6 对我来说有着特殊的意义。\n\n### 主机游戏\n\n大约在 2008 年，父亲买了一个带卡带的键盘，里面配有两种卡：学习卡和游戏卡。这个键盘通过 CVBS 接口的三条线连接到家里的大头电视上，用于显示图像和声音。此外，还配备了两个使用 DB9 串口线的手柄，供我们玩游戏。学习卡可以用来练习五笔打字，而游戏卡则包含了一些经典的 FC 游戏，如《超级马里奥兄弟》、足球游戏以及一系列与奥运会相关的游戏。\n\n那个键盘后来被带到了老家，最终被收了起来。最后，我像拆解收音机和其他旧物一样，将它拆解了，这似乎成了我与那段永远回不去的童年的告别仪式。\n\n除了那个卡带上的 FC 游戏和网上的一些超马一代改版，其他 FC 游戏印象深刻的只有《成龙之龙》（1991）和《超级马里奥兄弟 3》（1988）。随后的日子里，我又下载了 NDS 模拟器。在这个模拟器中，我主要玩了《马里奥赛车 DS》（2005）和《新超级马里奥兄弟》（2006）。尤其是《马里奥赛车 DS》，那条令人印象深刻的彩虹赛道至今仍让我回味无穷。这些游戏不仅丰富了我的业余时间，也成为了我童年记忆中不可或缺的一部分。\n\n### 网页-Flash\n\n之所以将 Flash 游戏归类为单机游戏，是因为除了在 4399、7k7k 等知名网站上可以在线游玩外，这些游戏还可以下载后在本地运行。它们通常以`.swf`文件的形式存在，只需使用 IE 浏览器调用 Adobe Flash Player 打开即可，尽管每次打开前都需要忽略一遍浏览器的安全警告。\n\n记得父亲曾在那台没有联网、仅配备 2G 内存的 Windows XP 电脑上，通过 U 盘传输了一些 Flash 游戏给我。那些简单的游戏成为了我童年的一部分，带给我无数欢乐时光。十年之后，正是在这台老旧的操作系统下，我用 Vegas 10 剪辑出了一段播放量达到几十万的视频。这段经历不仅见证了技术的进步，也记录了我对游戏和创作的热爱。\n\n### 电视与机顶盒\n\n以前在奶奶家的非智能老式液晶电视上玩过奥赛罗棋。后续还有一个能玩游戏的 IPTV 机顶盒，上面有一些可以用遥控器玩的游戏，甚至还有一款养成类的 GalGame。我还在上面看了《纸片马里奥·千年之门》的实况，所以所有执念都是有原因的。\n\n## 手机游戏回顾\n\n单机游戏：\n\n- 《水果忍者》（2010）：在这款游戏中，你可以尽情挥刀切水果，享受简单而畅快的切割乐趣。\n- 《2048》：通过数字拼接挑战你的耐力极限，这款游戏看似简单却能让人沉迷其中，不断追求更高的分数。\n- 《别踩白块儿》（2014）：这是一款音乐游戏，玩家需要跟随节奏快速点击屏幕上的方块，体验音乐与反应速度的完美结合。\n- 《纪念碑谷》（2014）：唯美画面与精妙视错觉相结合，带你进入一个充满奇幻色彩的世界。每一关都是一次视觉与智力的双重盛宴。\n- 《物理画线》：通过巧妙地画线，引导小球顺利滚入杯中。这款游戏不仅考验玩家的创造力，还锻炼了逻辑思维和物理直觉。\n- 《曲中剑》（2022）：将中国古典音乐与武侠元素完美融合，让你在优美的旋律中体验流畅的剑术对决，感受传统文化的魅力。\n- 《艾希》（2017）：独特的叙事风格和战斗体验，尤其是那个令人印象深刻的旁白，让整个游戏过程充满了趣味和惊喜。\n\n艾希（ICEY）是一款多平台的游戏。里面有几个非常有意思的地方（剧透预警）：\n\n1. 在里面有一个让你做出选择的房间。但不管最后你选择哪个选项，它必定会是错误的选择\n2. 人物的名字刚开始是艾希，后来触发事件之后变成佑希。在全部通关之后，它会变成你最开始输入的名字。\n\n联网游戏：\n\n- 《玩吧》：多样化的社交娱乐游戏，代表是你画我猜。\n- 《JJ 比赛》（2007-）：丰富的棋牌游戏选择，包括斗地主、升级、麻将、台球、中国象棋、干瞪眼等。以前甚至还有德州扑克和拼三张。\n- 《贪吃蛇大作战》：经典的 io 游戏。\n\n## 古早网络游戏回忆\n\n> 1994-2000：从四大门户到搜索<br/>\n> 2001-2009：从搜索到社交化网络<br/>\n> 2010-2018：移动互联网和自媒体\n\n- WAP 文字游戏：《3GQQ 幻想西游》（约 2006-2013）是我最早接触的网络游戏。现在网上还存在一些可以玩的[复刻版本](http://3gyx.cn/)。还有一些文字版的游戏：QQ 农场、牧场等，父亲也喜欢玩，以前的网络加载一个页面要一分钟。\n- QQ 宠物：QQ 宠物和《大乐斗 Ⅱ》（2010-2018）曾是我的虚拟伙伴。在《大乐斗 Ⅱ》中，有一个被动技能，可以让宠物有 15%的概率在死后复活。记得有一次，我的运气特别好，在一局游戏中这个技能竟然触发了三次，让我惊喜不已。\n- QQ 游戏：老版的《欢乐斗地主》（2008-）、《你画我猜》和《TNT 弹道轨迹》（2011-2018）等游戏陪伴了我无数个日夜。现在，《谁是卧底》依然是 QQ 游戏中存活的一员。\n- 网页游戏：我玩过的第一款也是唯一一款网页 FPS 游戏是《创世兵魂》（2012-2018），它在 2018 年底停服——而那时《绝地求生：刺激战场》已经风靡一时。\n\n## 《和平精英》战略与战术指南\n\n在《和平精英》这款由腾讯光子工作室群精心打造的 FPS 手游中，玩家将体验到与端游《绝地求生》（PUBG）相似的紧张刺激。为了在这场生存竞赛中脱颖而出，不仅需要精准的射击技巧，还需要高明的战略和灵活的战术。下面，让我们一起来看看如何提升你的游戏表现。\n\n战略篇：\n\n1. 声音辨位的艺术：在特训岛上，你可以专门训练听声辨位的能力。2D 环境下的声音定位通常是新手能够掌握的基本技能。室内的声音定位包括：\n   - 如果听到的声音比较沉闷，那敌人很可能位于你上方；\n   - 清脆但略带沉闷的声音提示敌人可能在下层；\n   - 清晰且带有风声或颗粒感的声音意味着敌人就在同一层；\n   - 当声音似乎直接从头顶传来时，说明有人在楼顶活动。\n2. 团队合作的重要性：在随机匹配的游戏中，队友往往不会开启语音交流。这时，你需要主动扮演团队中的黏合剂角色，跟随一位队友行动，适时提供支援，共同进退。\n3. 辅助瞄准的双刃剑：辅助瞄准功能可以快速帮助新玩家上手，但它可能会削弱玩家自行调整准星追踪目标的能力。如果你已经掌握了拉枪技巧，不妨尝试关闭辅助瞄准，以提高自己的反应速度和精确度。（我胡说的）\n4. 多指操作的巧妙运用：传统二指操作限制了视角转换与射击的同时进行。采用三指乃至四指操作可以让移动、瞄准、开火等动作更加流畅自如。\n\n- 左手大拇指：控制角色移动\n- 右手大拇指：转动视角、蹲趴跳\n- 左手食指：开火\n- 右手食指：探头和开镜\n\n战术篇：\n\n1. 利用地形优势：第三人称视角给予玩家信息上的不对称优势，利用墙壁、树木、车辆等作为掩体，卡住视角观察对手而不被发现。烟雾弹也是转移位置时的好帮手，但在未暴露的情况下使用反而会暴露行踪。\n2. 优先处理紧急情况：当遭遇近距离威胁时，应立即转而应对；如果正在救助队友而敌人逼近，则需先确保自身安全再考虑救援；面对多个方向的威胁时，要根据具体情况判断哪个威胁最为紧迫，并优先解决。\n3. 高处制胜：占据高地如山顶或屋顶，能让你拥有更广阔的视野和攻击角度，但也要小心成为显眼的目标。\n4. 精准射击的小贴士\n\n- 远距离射击时采取蹲姿或趴姿有助于减少武器后坐力的影响。\n- 对于近身作战，保持静止仅用视角转向来锁定目标可提高命中率。\n- UMP45 冲锋枪搭配直角握把和三倍镜是中近距离战斗的理想选择；而对于极近距离交战，全自动霰弹枪 AA12-G 则是不二之选。（我胡说的）\n\n5. 灵活机动，迷惑对手：打一枪换一个地方的原则虽然简单，执行起来却要求玩家具备敏锐的战场感知能力。通过不断变换位置，你能让敌人难以捉摸你的动向，从而为自己争取更多存活的机会。\n\n记住，在《和平精英》的世界里，每一次成功的背后都是无数次练习的结果。希望以上这些策略能够帮助你在游戏中取得更好的成绩！\n\n## 金手指、TAS 与 RTA：游戏中的不同通关艺术\n\n在电子游戏的世界里，玩家们追求着各种各样的成就。从简单的作弊到极限竞速，不同的玩家有着各自的目标和方法。其中，“金手指”、“TAS”以及“RTA”就是三种具有代表性的玩法。\n\n**金手指**这个名字听起来颇具神秘色彩，它实际上是指一种通过修改游戏内存来达到作弊目的的技术。想象一下，当你能够随意改变游戏内的数值时，无论是无限生命还是无敌状态，一切皆有可能。但这种做法显然破坏了游戏的平衡性和挑战性。\n\n相比之下，**TAS（Tool-Assisted Speedrun）**则显得更加精致而专业。TAS 意为工具辅助下的速度挑战。这里的“工具”并不是指直接干预游戏内部数据，而是指一系列高级技巧和工具，帮助玩家探索理论上最佳的游戏完成方式。TAS 过程包括：\n\n- **精确记录**：每一步操作都被详细记录下来，就像电影导演精心安排每一帧的画面。\n- **慢动作重播**：使用模拟器让游戏逐帧运行，允许玩家微调每一个细节，直至完美无缺。\n- **即时修正**：如果某一时刻的表现不尽如人意，可以立即回溯并重新尝试，直到满意为止。\n- **利用 BUG**：甚至会巧妙地利用游戏中存在的漏洞或特性，创造出令人惊叹的效果。比如使[《超级马里奥世界》](https://www.bilibili.com/video/BV1Ks411S7Fd)的内存溢出，提前加载出通关动画。\n\n最终成果是一个包含了所有最优操作序列的数据文件。除了追求最快通关外，还有一种叫做 Superplay 的 TAS 类型，专注于展示高超技艺而非单纯的速度，比如[超级马里奥一代[最多金币]世界记录](https://www.bilibili.com/video/BV16s41127MM)。\n\n最后提到的是**RTA（Real Time Attack）**，这是一种纯粹基于人类实时反应的真实时间挑战。没有预录的操作、没有 S/L 的机会，在这里，每一次按键都决定着成败。RTA 考验的是选手们实际操作能力的巅峰表现。\n\n总之，无论你偏好哪一种方式，这些活动都展示了人们对游戏热爱的不同侧面，并且促进了社区之间的交流与进步。\n\n## 主机游戏推荐\n\n### 《纸片马里奥：千年之门》\n\n《纸片马里奥：千年之门》（也被称为《纸片马里奥 RPG》）是一款 2004 年发布的经典游戏，是任天堂 GameCube 平台上的纸片马里奥系列的第二部作品。如果你渴望在电脑上重温这款佳作，你将需要一个 NGC 模拟器，比如 [Dolphin](https://cn.dolphin-emu.org/?cr=cn)，以及该游戏的[汉化版镜像文件](http://pan.baidu.com/s/18BIxs)。通过配置独立显卡渲染，大部分玩家可以在自己的笔记本电脑上享受到流畅的游戏体验，即便偶尔会遇到一些小卡顿。另外，玩家还可以通过按 Tab 键让模拟器内的游戏时间流速变快，减少跑路、过场动画、技能和战斗的后摇时间。\n\n这款游戏巧妙地结合了 2.5D 视觉效果，利用固定视角、透视变换和场景旋转等手法来创造一种独特的立体感。游戏中的人物被设计为真实的“纸片人”，这种创意让整个冒险过程充满了惊喜。\n\n<img src=\"/blog/images/game/pm-1.gif\">\n\n《千年之门》的世界庞大且充满细节，尤其是那座名为“巨大之树”的地图，其复杂的结构很容易让人迷失方向。此外，无赖镇和下水道这样的区域几乎每一章都会出现，并逐渐解锁新的部分。要探索这些地方，玩家有时得变身为纸片、纸飞机或纸船，这不仅增加了游戏的乐趣，还考验着玩家的解谜技巧。\n\n角色成长系统围绕着 HP（生命值）、FP（花点数，用于特殊技能）、BP（徽章点数，影响佩戴徽章的能力）和 SP（战斗中观众给予的增益）展开。每次升级都需要累积 100 个星星点数，而玩家可以自由选择强化哪一项属性。有趣的是，后期可以通过特定徽章来提升基础的 HP 和 FP，因此不少玩家倾向于专注于增加 BP。\n\n游戏社区中流传着一种被称为“五血流”的激进策略：玩家故意将角色的生命值降至最低限度，然后换取在低血量下加成攻击力的徽章，以期在战斗中造成极大伤害。尽管我本人并未尝试这种方法，但我确实提升了常规跳跃攻击的威力，在某些关卡能够迅速结束战斗。\n\n如果你在游戏中遇到困难，不妨查阅[相关攻略](https://jokerm.com/notes/gg/paper-mario-ttyd-story/)，但请小心避免剧透。值得注意的是，现存的一些攻略可能基于 Switch 重制版本，与原版存在差异。另外，游戏的故事情节并不落俗套；它超越了传统的勇者救公主模式，而且在每个章节之间，玩家甚至有机会操控反派角色及公主，增添了不少新鲜感。\n\n总之，《纸片马里奥：千年之门》以其创新的游戏机制、丰富的世界观以及非线性的叙事方式赢得了玩家们的喜爱，即使是在今天，依然值得一试。\n\n---\n\n那个 72 是小时，中途看了五次以上游戏攻略。[据说](https://www.ign.com/game/paper-mario-the-thousand-year-door)推主线只用 30 多个小时。\n\n<img src=\"/blog/images/game/pm-2.webp\">\n\n### 《超级纸片马里奥》\n\n[《超级纸片马里奥》](https://pan.baidu.com/s/1pERej)作为纸片马里奥系列的第三部作品，给玩家带来了一次令人耳目一新的游戏体验。与前作采用的传统回合制战斗不同，这部 2007 年登陆 Wii 平台的游戏让玩家重拾了经典的平台跳跃乐趣。Wii 作为第七世代的游戏主机之一，以其独特的体感遥控器著称，为游戏增添了别样的互动方式。\n\n如果你想要重温或首次探索这款经典之作，但又没有 Wii 主机的话，使用 Dolphin 模拟器是个不错的选择——尽管这意味着你需要花点心思去配置按键映射来适应 PC 操作，对于那些不愿意为此花费额外时间的人来说，购买一个兼容的手柄或许能够提供更加直接且流畅的游戏体验。\n\n这款游戏的一大特色就是其创新性的视角切换功能：只需轻按一个按钮，你就可以在 2D 和 3D 视图之间自由转换，这不仅极大地丰富了游戏的探索性和趣味性，还带来了许多令人惊喜的设计。\n\n<img src=\"/blog/images/game/spm-1.gif\">\n\n不过，正如任何新奇尝试都可能遇到的问题一样，在某些情况下这种视角切换也可能导致意想不到的结果，比如角色意外地“翻车”，这样的小插曲反而为冒险旅程增添了几分幽默感：\n\n<img src=\"/blog/images/game/spm-2.gif\">\n\n无论是成功还是小小的失误，这些元素共同构成了《超级纸片马里奥》独一无二的魅力所在。\n\n### 《超级马里奥银河》\n\n- 主题：该游戏以宇宙、银河和星星为主题，将广袤的宇宙与温暖的人文关怀结合在一起，给玩家带来了一种独特的陪伴感。\n- 玩法：重力方向不是固定的，每一个星球有它自己的引力场，一般来说是人物站立的地方与重心的连线。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-ddxyh.mp4\" type=\"video/mp4\" />\n</video>\n\n- 操作上的技巧：\n  - 滞空：在跳起来的最高点晃一下右手柄\n  - 助跑前空翻（三级跳）：在助跑连跳的第三次\n  - 原地后空翻：蹲+跳，注意跳之前的脸朝向和高台相反\n  - 侧翻：在回头的一瞬间跳\n  - 远跳：前进时蹲+跳\n  - 在跳跃高度上，助跑前空翻 > 侧翻 ≳ 原地后空翻 > 助跑二级跳 > 助跑/原地普通跳 > 远跳\n  - 水底游泳的脑袋朝向：左右是随手柄的，但是上下是反的。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-pfysyh.mp4\" type=\"video/mp4\" />\n</video>\n\n- 人体陀螺：\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-top.mp4\" type=\"video/mp4\" />\n</video>\n\n- 局限性：出于 Wii 机能和游戏制作理念和成本方面的限制，它的摄像机视角并不是完全自由的。\n\n如果不使用实体手柄，而是用海豚模拟器的按键映射玩的话，当我们想要使用手柄的“指向”功能与游戏中的部分对象交互时，比如收集星星碎片和拉牵引星的时候，可能会出现交互不了的情况。这时我们需要取消勾选这个选项：\n\n<img src=\"/blog/images/game/smg-cpu-efb.webp\">\n\n## 《和平精英》游戏操作二指转四指的心得\n\n当你在《和平精英》中从二指操作逐渐过渡到四指操作后，可能会发现一个有趣的现象：随着技术的提升，你遇到的对手似乎也都是四指高手。这种情况下，即便你的技巧有所提高，有时候还是难以战胜那些同样精通四指操作的玩家。这就像是一种奇妙的游戏平衡，当你因胜利而欢呼时，或许对面正因失败而懊恼；反之亦然。这就是所谓的“摔手机守恒定律”（零和博弈）。现在和平精英是有一个进入前三还是前五就显示胜利了，你可以选择退出游戏。但是都开一局了，一般来说都是想拿第一的。\n\n在这种充满变数的竞争环境中，有些玩家会发展出一些奇特的行为模式来增添游戏的乐趣或发泄情绪。比如，在某局游戏中，有的玩家会选择开船返回出生岛绕一圈，或者驾车沿着沙漠公路环行，甚至利用汽车喇叭和枪声创造节奏感。更有甚者，他们会尝试挑战不捡任何物资就吃鸡这样的极限任务。这些行为虽然看起来奇怪，但并不算是消极游戏。\n\n真正的消极游戏行为则更为具体且有目的性。例如：\n\n1. 在超体对抗模式下选择“战地医师”角色。\n2. 与队友分开跳伞，并在他们无法迅速到达的地方放置医疗站并收集自救器。\n3. 捡取大量药品，准备长时间待在毒圈边缘。\n4. 寻找一位非“闪电尖兵”职业的队友，共同行动。\n5. 当机会出现时，等待队友进入特定结构的房子——那种只有一人身子宽出口的房间。\n\n<img src=\"/blog/images/game/peace-1.webp\">\n\n6. 然后站在或是蹲在这个位置上，将队友卡在房间内无法动弹。\n\n<img src=\"/blog/images/game/peace-2.webp\">\n\n这种情况下的堵门行为往往比普通模式下的同类事件更加令人沮丧。\n","source":"_posts/漫无止境的童年.md","raw":"---\ntitle: 漫无止境的童年\ndate: 2024-07-13 19:00:00\npermalink: game.html\nmathjax: true\n---\n\n<img src=\"/blog/images/game/any.webp\">\n\n精神分析理论认为，游戏是一种通过主动控制情境来调节情绪、释放焦虑、补偿愿望的过程。认知发展理论认为，游戏创造着最近发展区。按体现孩子认知发展的水平来分类，可把游戏分为三个阶段：\n\n- 婴儿期的机能游戏：通过重复的动作来探索环境，发展身体能力，适应生活。如亲子互动，爬行，拍打玩具。\n- 幼儿期的象征性游戏：以经验为基础，通过想象和角色扮演赋予物体或动作象征意义。如过家家，假装打仗。\n- 童年期及以后的规则性游戏：强调合作，竞争和逻辑思维。如桌游和球类运动。\n\n## 非电子游戏\n\n寒暑假回老家玩的：\n\n用麻将砌房子\n\n<img src=\"/blog/images/game/belfry.webp\">\n\n模仿电视打牌节目。用 26 个英文字母加一个 $\\pi$ 作为选手的名字，一人分饰27角附带记分：\n\n1. 先给三位玩家发牌，如 A B C，留三张底牌\n2. 每局的底分为 1，起始倍数为 1\n3. 在叫地主之前，每个人都有一次明牌的机会。明牌翻 8 倍，且最先明牌的人有优先叫地主的权利。实现的方式是，把三个人的牌都理好之后，看有没有人牌是特别好的，有就明牌，并且抢占叫地主的优先级。可能只有这一条是无法做到公平的，因为你作为一个上帝视角，如果有两手好牌，你必定是有一个先后看到的顺序的，你无法模拟在现实里抢明牌的情况，只能选一个牌更好的人。\n4. 开始叫地主。叫地主的顺序在每局结束之后轮换一下\n5. 如果有人抢地主，翻 2 倍。每人最多抢一次地主，也就是说，最先叫地主的人还有一次“我抢”的机会。同时，不叫的人是不能抢地主的。\n6. 在叫地主和抢地主的时候，你必须站在每一位玩家的立场上，只根据他们自身持有的有限信息，来判断叫不叫牌。这时候底牌和其他人的牌是不能参考的，你要假装自己不知道。在局中的时候同理，除非有人明牌了。\n7. 在地主确定之后，底牌才能翻开。这时候规定，中间一张底牌的点数加一的牌为癞子。如底牌的第二张是 K，那么 A 为癞子；如果是 2 或者王，那么 3 为癞子。从这里我们可以看到，3 为癞子的概率是 $\\frac{6}{54}$，4/.../2 为癞子的概率是 $\\frac{4}{54}$，王不能当癞子\n8. 作地主的人，在出第一手牌之前，额外有一次明牌的机会，如果他在之前没有明牌的话。\n9. 软炸翻 2 倍，硬炸翻 4 倍，纯癞子炸翻 8 倍，春天翻 8 倍，倍数上不封顶。在以前《影视智斗星》这个节目也是没有封顶倍数的，所以出现过中场负 10000 分的情况，几乎能确定冠军，后面根本不用打了，它在 2008 年左右大概叫《挑战大民星》之类的名字。我们这个游戏为了刺激和好玩，还是没有封顶倍数的，这可能存在一个人为了追分，在发第一张牌之后就会强行地明牌抢地主而不管自己的牌是好还是坏。\n10. 一局结束之后，计分。如本局的倍数是 8 倍，地主赢了，那么地主+16，农民-8。\n11. 一桌打十局。所有桌打完之后，按分数共同参与排序。27 进 18，18 进 9，9 进 3\n\n进阶的玩法是，可以给每一位选手设定一个性格。比如把 A 设定成豪放的，B设定成稳重的。\n\n自制什么棋：我还曾经把月饼和粽子盒子的内侧变成了奇幻地图，绘制了各种地形，并设置了前进、后退等行动指令。四个橡皮擦化身成勇敢的探险家，在投掷骰子之后按点数移动，目标是成为第一个到达终点的人。随着游戏的发展，邻居小孩也加入了进来，他们（事实上只有一个人）增加了金币和商店系统，使得这场冒险变得更加精彩纷呈。\n\n与好友共度的高中时光：进入高中后，我和一位朋友发明了几款不独特的纸笔游戏来打发时间：\n\n- 三维五子棋：我们利用作文本连续几页的页面来创造一种立体感，或者直接采用纯坐标的方式来进行对弈，给传统的平面五子棋带来了新的维度。由于二维的五子棋都有黑棋先手必胜的说法了，所以三维的可能是黑占大优的，但是我们只是试了一下，实际上它是不好玩的。坐标对弈的胜利判定条件是：一方有五个棋子的坐标三个分量分别都成了-1/0/1 的等差数列。\n- 脑黑洞：这款游戏由朋友原创，一方画出某样东西 A，另一方则要画出能够克制 A 的东西，并且给出合理的解释。不论多么天马行空的想法，只要逻辑自洽就能成立，这样的互动既考验着我们的创造力也锻炼了解释能力。\n- 纸上谈兵：受到在线游戏[《Tank Trouble》](https://tank-trouble.co/)和[《MUTINY》](https://www.4399.com/flash/220013_1.htm)启发，我在物理实验课上构思出了这款战略游戏。玩家需要在回合开始前决定是进行移动还是攻击。移动就是按照所画路线行进，而攻击则要看线路是否能触及对手。游戏还引入了不同类型的单位，增添了战术层面的选择（现在都忘了）。\n\n<img src=\"/blog/images/game/paper-attack.gif\">\n\n这些游戏不仅充实了我的童年与青少年时期，更是在没有高科技玩具的情况下，教会了我如何利用身边的一切去创造快乐。每当回忆起那些日子，心中总是充满温暖与感激。\n\n玩具：没有弹珠，所以打瓶盖，小时候把瓶盖装了一个鞋盒子；有一段时间玩过带发射器和链条的陀螺，说明我以前也不是不愿意花钱的；还买过游戏王的卡，但是在 21 世纪 10 年代里的、不知道第几次的童年告别仪式里被我扔了；扑克牌的玩法有斗地主、接竹竿和 7 鬼 523；还玩过象棋和五子棋，水平在知道规则的程度。五子棋应该可以和小白下平，用八卦阵就行了。\n\n象棋告诉我们的：拱一个卒，或者用车看两条线，在当前的这一步是没什么效果的，它的效果在后面才有；下限时的象棋可以锻炼决策能力。\n\n拍手游戏：在我转学前的那个环境里，这是一系列适合两人或多人参与的互动游戏的统称，结合了口令与手势，带有升级机制的回合制对决。玩家通过一只嘴和两只手掌来施展预先商定好的招式以克制对手。基础技能分为三大类：吸气、防御以及攻击。吸气是给自己加 1MP，在使用攻击技能和部分高等级的防御技能需要消耗气。为了确保动作的一致性，在每个回合开始前，参与者需先拍手同步节奏；而在执行招式时，则需配合相应的手势与口号。\n\n大自然：虽然我老家在农村，但是我基本没有上山和下河玩过，没有对应的记忆。这张照片是 2024 年拍的，人可以一次踏入两条河流：\n\n<img src=\"/blog/images/game/river.webp\">\n\n控梦：有一段时间，我关注过清明梦的贴吧，甚至还有一段时间真的做了清醒梦，它多出现在睡回笼觉的时候，就是你的一部分意识可以意识到你在做梦，进而可以在梦里活动。分自由的活动和有限制的活动，我只能做到有限制的活动，比如在天上飞，飞起来之后保持不了太长的时间，总会受到地心引力下坠。但是后来都没在乎这个事了，梦也做得很少，也可能是做了忘了。《梦控师》这本书系统地介绍了做清明梦的方法。\n\n### 川牌规则\n\n戳牌，即四川长牌。仅限于笔者祖父母和外祖父母那一带地区的玩法。\n\n牌面：21 种 x 4 张 = 84 张牌。这里为了介绍，把长得一样的牌叫同种牌。两种黑八不算是同一种，因为长得不一样。\n\n- 正门：天牌（66 宋江）> 地牌（11 公孙胜）> 人牌（44 秦明）> 和牌（13 柴进）>\n- 长门：长三（33 武松）> 梅十（55 董平）> 板凳（22 鲁智深）\n- 幺门：疙瘩（15 徐宁）> 幺七（16 索超）> 四六（46 杨志）> 虎头（56 张清）\n- 点门：\n  - 黑点：黑九（36 吴用）> 平八（26 林冲）、弯八（35 关胜）> 黑七（25 花荣）> 黑五（23 朱仝）\n  - 红点：红九（45 卢俊义）> 红七（34 呼延灼）> 红五（14 李应）>\n- 猴：公猴/红三（12 戴宗）、母猴/红六（24 刘唐）\n\n牌型与比较系统：\n\n- 重叠牌型。同种牌出 1 张到 4 张\n  - 正门+长门算一个系统\n  - 幺门算一个系统\n  - 黑点算一个系统\n  - 红点+猴算一个系统\n  - 如：两张天牌可管两张人牌或两张梅十，但不能管一张梅十、两张黑九或两张幺七；黑九不能管红七。\n- 组合牌型。组合规则为：天九、地八、人七、和五。一张及以上的（天/地/人/和）牌与一张及以上的对应的（九点/八点/七点/五点）牌组合为 2 至 12 张的组合牌，例如：\n  - 天牌 + 红九 + 黑九 + 黑九 = 四天九\n  - 地牌 + 黑八 = 两地八\n  - 人牌 + 人牌 + 红七 = 三人七\n  - 和牌 + 和牌 + 红五 + 黑五 = 四和五\n  - 这四种情况算一个系统\n  - 如：四地八可管四人七、四和五，但不能管三人七或五和五。\n\n去向：分为手牌、桌面和积分堆。\n\n接牌时手牌按门类分为不同的列。\n\n1. 顺序接牌，接到一对公母猴牌直接放到己方的积分堆。如果一对都不成，单猴单出被红点管；如果除了一对还有别的猴，也直接放到积分堆。\n2. 按圈出牌，类似升级、拱猪，但不能垫牌。每一圈里能管必管，要求在同一个比较系统里，且张数相同。管不了时 pass\n   - 第一个接牌的人为首引\n   - 一圈结束后，牌最大的一方把他在本圈出的一手牌放到己方的积分堆，并作为下一圈的领出\n3. 仅一人未出完手牌时，本局结束。积分堆里牌张数最多的一方获胜。\n\n其他判定规则：如果一位玩家认为自己剩余的手牌全大，可以进行摊牌。三个人 20 张算赢。如果摊牌失误，就是丢脸了。\n\n### 打燕窝\n\n在郧阳区城关镇的西北方向上有一个堰河村，是 11 路公交车的终点站，其所在地原名叫大堰。2001 年，大堰乡被并入了城关镇，所以它现在属城关镇管辖。在堰河村的北面，230 省道的堰河大桥路段，有一条小河叫仙人河，它是汉江支流的一个起端。\n\n<img src=\"/blog/images/打燕窝地理位置.webp\">\n\n事实上在我站立的地方附近也是仙人河。从河长牌子上可以看到，这条河长达 31.5 km。并且，在离仙人河牌子不远的地方，还有狮子河的牌子。但只有腾讯地图把它们标出来了，高德和百度地图都没标。\n\n在堰河大桥下河岸顺着水源方向走二十分钟左右，就能看到打燕窝。它是崖壁上自然形成的一个洞，站在岸边的人向里面扔石头祈福，如果扔进了，就预示着好运。\n\n<img src=\"/blog/images/打燕窝.webp\">\n\n## 单机游戏\n\n### 摩托罗拉 C117 自定义铃声语法说明\n\n我最早接触的电子设备，大概就是奶奶手中的那部手机了。这款手机诞生于 2005 年，它拥有一块单色屏幕，内置了三款小游戏——黑白棋、小蜜蜂以及弹球，成了我当时探索数字世界的窗口。\n\n<img src=\"/blog/images/game/C117.webp\">\n\n它还可以自定义铃声。在铃音类型 -> 我的铃音里可以自定义四首曲子，每首曲子的保存方式是一串 0 至 255 字符的文本。音域在 F3 至 E7 之间。\n\n符号表：\n\n| 符号                         | 说明                                                                   |\n| ---------------------------- | ---------------------------------------------------------------------- |\n| a #a b c #c d #d e f #f g #g | 音级                                                                   |\n| r                            | 休止符                                                                 |\n| \\*3 \\*4 \\*5 \\*6 \\*7          | 与音级右结合，指示之后的几个音级所在的分组。缺省为 4                   |\n| 0 1 2 3 4 5                  | 与音级或休止符左结合，指示该音符的时长，从全音符到 32 分音符。缺省为 2 |\n\n如：\n\n- `*4a0`，它代表 A4 的全音符。\n- `*5a`，它和 `*5a2` 的语义相同，代表 A5 的四分音符。\n- `*4#a1`，它代表 A#4 的二分音符。\n- `*4#ab3`，它代表一个 A#4 的四分音符和一个 B4 的八分音符。\n\n输入方式：\n\n- 上下键：\\*3f \\*3#f \\*3g 至 \\*7#d \\*7e\n- 1 键：1 . : ; 在它的帮助里显示可以输入附点音符，但是笔者没有测试成功它的语法。\n- 2 键：a b c 2\n- 3 键：d e f 3\n- 4 键：g 4\n- 5 键：5\n- 6 键：6\n- 7 键：r 7\n- 8 键：8\n- 9 键：( ) @ 9\n- 0 键：0 \\* # &\n- \\* 键：光标左移\n- \\# 键：光标右移\n\n示例：《万象霜天》的开头部分。\n\n```\n*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bbbb#g#g#g*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bb*5#c1r1*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r#g1rb*7#c3*6b3#g1r#f1rer*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r*7#c1re#f3e3\n```\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/moto.mp4\" type=\"video/mp4\" />\n</video>\n\n这里为了易读，添加了空格、换行\n\n```\n*5e#c*4b*5#c *4#g*5#c#c#c *4b*5#c#c#c e#c*4b*5#c\n太初太易 无相无形 莫知浊重 孰辨清轻\n绵绵若存 用之不勤 礼乐即作 仁义乃兴\n\ne#f#g#f #fee#d #d*4bbb b#g#g#g\n生乎混沌 分其昏明 天得以健 地得以宁\n\ne#f#g#f #fee#d #d*4bb*5#c1 r1\n我有此言 众妙之门 万类咸听\n\n*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r #g1r b*7#c3*6b3#g1r #f1r er\n\n*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r *7#c1r e#f3e3\n```\n\n最后一段以 \\*7 开始，#f7 超出音域了，所以响的是音域内的最高音 E7。\n\n### PC-Windows\n\n大约在 2008 年，我在十堰市上小学。信息技术课是我最早接触电脑的地方，那时电脑里装有金山打字通，里面有一个警察追小偷的游戏。从那时起，我的性格就显得格外倔强。记得有一次，教室里有一台无法启动的电脑，而其他电脑都已经正常开机了。尽管如此，我却坚持在这台故障电脑前不停地按键尝试，不肯放弃。最终，在我的不懈努力下，那台电脑竟然被我成功启动了。然而，就在那一刻，下课铃声也响了起来。\n\n2010 年至 2012 年，我住在县城的一间地下室里。那时家里唯一的信息设备除了手机就是一台收音机、一台没有接线的大头电视，偶尔还有一段短暂的时间给电视接线了。每个周末，父亲都会带我去他的单位玩电脑，那是我们最快乐的时光。在那台没有联网的 XP 系统电脑上，有一个游戏叫《合金弹头合集》，它收集了《合金弹头》的一至五（1996-2003）。面对这个新奇的游戏，我和父亲都感到茫然，不知该如何下手。于是，我决定采用最直接的方法——遍历法，逐一尝试键盘上的每一个按键。经过一番摸索，我意外地发现 1 键是用来开始游戏和投币的，WASD 则控制角色移动，而 JKLUIO 分别对应开枪、跳跃和扔手雷等功能。不仅如此，通过不断的尝试与探索，我还发现按 1+2 键可以调出游戏的作弊面板，在那里可以开启无限手雷等强大功能。在此之前，我从未接触过如此复杂的键位设置，而且我们的电脑也没有联网，无法访问像 4399 这样的游戏网站，英文自然也看不懂。\n\n<img src=\"/blog/images/game/metal-slug.webp\">\n\n后来有一天晚上放学回家，我发现家里多了一个箱子。由于从 2010 年开始我就有了社交恐惧症，我不敢直接询问箱子里装的是什么，但偷偷摸了一下，听到了鼠标点击的声音。不久之后，这台电脑就被组装了起来：VGA 接口的显示器、PS/2 接口的鼠标和键盘，以及一个需要插三根线的小音响。\n\n约 2012 年末，在我小学六年级的那段日子里，家里终于接通了有线网络。每次打开电脑都需要在宽带连接中输入账号密码才能上网。为了限制我玩游戏的时间，父亲还特意设置了开机密码。但我有一次偷看了父亲输入密码的过程，然后用遍历法试了出来。后来，我又发现了可以在 BIOS 中清空密码的方法。某次，我在电脑上看到了一个叫做“一键 GHOST”的程序，出于好奇想试一试，结果不小心将整个 C 盘的数据“归零”了，幸好其他盘中的文件还在。这些经历不仅记录了我的成长轨迹，也见证了我的好奇心和不断探索的精神。\n\n我曾深深沉迷于《植物大战僵尸》（2009），每天中午上学前都会准时为禅境花园里的植物们浇水，那份小小的仪式感成为了日常的一部分。为了探索游戏的无限可能，我还下载过各种修改器。其中最难忘的一次体验，莫过于释放了一整排全屏的火爆辣椒，那一刻，所有的僵尸瞬间被清空，那种震撼至今仍然历历在目。通过修改器的帮助，我还解锁了游戏中那些未曾正式发布的隐藏关卡，让我得以一窥游戏背后更多不为人知的秘密。我还曾动手修改过游戏汉化包中的一个文本文件，试图给植物们换上新的名字。虽然由于字符限制，新名字并不总是完整呈现，但这种创造性的尝试依然给我带来了极大的乐趣。\n\n《愤怒的小鸟：星球大战 2》（2013）至少陪伴我度过了两次冒险旅程。有一次，在干妈家再次下载了这款游戏。那段时间里，由于社交焦虑（就像近十年来的状态一样），我的世界几乎完全被电脑占据。虽然这样的生活充满了矛盾——既有游戏带来的快乐，也有内心的孤独与挣扎。\n\n在电脑开始菜单的附件游戏中，《Microsoft 网上红心大战》给我留下了深刻的印象。尽管名字中带有“网上”二字，但实际上无需联网也能玩。这是我首次体验按花色出牌的游戏规则。游戏设定为一人对抗三名电脑对手，每局结束时玩家得分通常为负数或零分，正分极为少见。后来玩过《拱猪》之后，我才发现这个游戏实际上是从《红心大战》演变而来的。此外，我还曾在扫雷网上上传了自己的游戏录像，尽管我的技术水平连业余都算不上。有趣的是，为了录制这些视频，还需要下载专门的竞赛用软件，而不是使用电脑自带的扫雷程序。\n\n### 自制超级马里奥地图\n\nSMX（2006）贴吧的关注人数现在和十年前（2014 年）相比几乎没有变化，一直都是几百人左右。即使在十年前，SMX 也已经是一个过气的项目了，因为相比之下，SMBX（2009）的地图编辑器更加成熟，其贴吧的关注人数超过了一千人。那时，我甚至还不明白什么是主机游戏，自然也就错过了《超级马里奥制造》的消息。初中时期的 2014 年左右，我在这样一个逐渐被人遗忘的环境中投入了大量的时间来制作 SMX 的地图，主要是为了逃避现实。那些精心设计的无趣地图至今仍保存在我的 GitHub 仓库中。\n\n> 这是当今我觉得唯一有意思的一张。就像现在这个网站一样，再过几年我就会觉得它一点意思也没有了。\n\n<img src=\"/blog/images/game/smx.gif\">\n\n如今，SMX 本体在其[作者 Gsk 的网站](http://www.gsksoft.cn/smx/index.html)上已经无法下载了。如果你现在想在 Windows 10 下运行它的地图播放器，你还需要额外注册 `dx7vb.dll` 用于播放声音。而它的地图编辑器会报依赖错误，你或许还需要去配 VB 的环境，不知道应该怎么办。\n\n同年，我通过优酷网（或类似的视频平台）上一位名叫独翼神龙的播主分享的链接，下载了 FC 模拟器和《超级马里奥兄弟》（1985）。后来，我又下载了一个可以修改《超级马里奥兄弟》NES 文件的地图编辑器。尽管没有多少美感和设计思路，我还是乐此不疲地制作了好几个改版 ROM。从那时起，我就开始间歇性地回忆起童年的美好时光。我的第一个无趣的视频是在酷 6 网上发布的，因此数字 6 对我来说有着特殊的意义。\n\n### 主机游戏\n\n大约在 2008 年，父亲买了一个带卡带的键盘，里面配有两种卡：学习卡和游戏卡。这个键盘通过 CVBS 接口的三条线连接到家里的大头电视上，用于显示图像和声音。此外，还配备了两个使用 DB9 串口线的手柄，供我们玩游戏。学习卡可以用来练习五笔打字，而游戏卡则包含了一些经典的 FC 游戏，如《超级马里奥兄弟》、足球游戏以及一系列与奥运会相关的游戏。\n\n那个键盘后来被带到了老家，最终被收了起来。最后，我像拆解收音机和其他旧物一样，将它拆解了，这似乎成了我与那段永远回不去的童年的告别仪式。\n\n除了那个卡带上的 FC 游戏和网上的一些超马一代改版，其他 FC 游戏印象深刻的只有《成龙之龙》（1991）和《超级马里奥兄弟 3》（1988）。随后的日子里，我又下载了 NDS 模拟器。在这个模拟器中，我主要玩了《马里奥赛车 DS》（2005）和《新超级马里奥兄弟》（2006）。尤其是《马里奥赛车 DS》，那条令人印象深刻的彩虹赛道至今仍让我回味无穷。这些游戏不仅丰富了我的业余时间，也成为了我童年记忆中不可或缺的一部分。\n\n### 网页-Flash\n\n之所以将 Flash 游戏归类为单机游戏，是因为除了在 4399、7k7k 等知名网站上可以在线游玩外，这些游戏还可以下载后在本地运行。它们通常以`.swf`文件的形式存在，只需使用 IE 浏览器调用 Adobe Flash Player 打开即可，尽管每次打开前都需要忽略一遍浏览器的安全警告。\n\n记得父亲曾在那台没有联网、仅配备 2G 内存的 Windows XP 电脑上，通过 U 盘传输了一些 Flash 游戏给我。那些简单的游戏成为了我童年的一部分，带给我无数欢乐时光。十年之后，正是在这台老旧的操作系统下，我用 Vegas 10 剪辑出了一段播放量达到几十万的视频。这段经历不仅见证了技术的进步，也记录了我对游戏和创作的热爱。\n\n### 电视与机顶盒\n\n以前在奶奶家的非智能老式液晶电视上玩过奥赛罗棋。后续还有一个能玩游戏的 IPTV 机顶盒，上面有一些可以用遥控器玩的游戏，甚至还有一款养成类的 GalGame。我还在上面看了《纸片马里奥·千年之门》的实况，所以所有执念都是有原因的。\n\n## 手机游戏回顾\n\n单机游戏：\n\n- 《水果忍者》（2010）：在这款游戏中，你可以尽情挥刀切水果，享受简单而畅快的切割乐趣。\n- 《2048》：通过数字拼接挑战你的耐力极限，这款游戏看似简单却能让人沉迷其中，不断追求更高的分数。\n- 《别踩白块儿》（2014）：这是一款音乐游戏，玩家需要跟随节奏快速点击屏幕上的方块，体验音乐与反应速度的完美结合。\n- 《纪念碑谷》（2014）：唯美画面与精妙视错觉相结合，带你进入一个充满奇幻色彩的世界。每一关都是一次视觉与智力的双重盛宴。\n- 《物理画线》：通过巧妙地画线，引导小球顺利滚入杯中。这款游戏不仅考验玩家的创造力，还锻炼了逻辑思维和物理直觉。\n- 《曲中剑》（2022）：将中国古典音乐与武侠元素完美融合，让你在优美的旋律中体验流畅的剑术对决，感受传统文化的魅力。\n- 《艾希》（2017）：独特的叙事风格和战斗体验，尤其是那个令人印象深刻的旁白，让整个游戏过程充满了趣味和惊喜。\n\n艾希（ICEY）是一款多平台的游戏。里面有几个非常有意思的地方（剧透预警）：\n\n1. 在里面有一个让你做出选择的房间。但不管最后你选择哪个选项，它必定会是错误的选择\n2. 人物的名字刚开始是艾希，后来触发事件之后变成佑希。在全部通关之后，它会变成你最开始输入的名字。\n\n联网游戏：\n\n- 《玩吧》：多样化的社交娱乐游戏，代表是你画我猜。\n- 《JJ 比赛》（2007-）：丰富的棋牌游戏选择，包括斗地主、升级、麻将、台球、中国象棋、干瞪眼等。以前甚至还有德州扑克和拼三张。\n- 《贪吃蛇大作战》：经典的 io 游戏。\n\n## 古早网络游戏回忆\n\n> 1994-2000：从四大门户到搜索<br/>\n> 2001-2009：从搜索到社交化网络<br/>\n> 2010-2018：移动互联网和自媒体\n\n- WAP 文字游戏：《3GQQ 幻想西游》（约 2006-2013）是我最早接触的网络游戏。现在网上还存在一些可以玩的[复刻版本](http://3gyx.cn/)。还有一些文字版的游戏：QQ 农场、牧场等，父亲也喜欢玩，以前的网络加载一个页面要一分钟。\n- QQ 宠物：QQ 宠物和《大乐斗 Ⅱ》（2010-2018）曾是我的虚拟伙伴。在《大乐斗 Ⅱ》中，有一个被动技能，可以让宠物有 15%的概率在死后复活。记得有一次，我的运气特别好，在一局游戏中这个技能竟然触发了三次，让我惊喜不已。\n- QQ 游戏：老版的《欢乐斗地主》（2008-）、《你画我猜》和《TNT 弹道轨迹》（2011-2018）等游戏陪伴了我无数个日夜。现在，《谁是卧底》依然是 QQ 游戏中存活的一员。\n- 网页游戏：我玩过的第一款也是唯一一款网页 FPS 游戏是《创世兵魂》（2012-2018），它在 2018 年底停服——而那时《绝地求生：刺激战场》已经风靡一时。\n\n## 《和平精英》战略与战术指南\n\n在《和平精英》这款由腾讯光子工作室群精心打造的 FPS 手游中，玩家将体验到与端游《绝地求生》（PUBG）相似的紧张刺激。为了在这场生存竞赛中脱颖而出，不仅需要精准的射击技巧，还需要高明的战略和灵活的战术。下面，让我们一起来看看如何提升你的游戏表现。\n\n战略篇：\n\n1. 声音辨位的艺术：在特训岛上，你可以专门训练听声辨位的能力。2D 环境下的声音定位通常是新手能够掌握的基本技能。室内的声音定位包括：\n   - 如果听到的声音比较沉闷，那敌人很可能位于你上方；\n   - 清脆但略带沉闷的声音提示敌人可能在下层；\n   - 清晰且带有风声或颗粒感的声音意味着敌人就在同一层；\n   - 当声音似乎直接从头顶传来时，说明有人在楼顶活动。\n2. 团队合作的重要性：在随机匹配的游戏中，队友往往不会开启语音交流。这时，你需要主动扮演团队中的黏合剂角色，跟随一位队友行动，适时提供支援，共同进退。\n3. 辅助瞄准的双刃剑：辅助瞄准功能可以快速帮助新玩家上手，但它可能会削弱玩家自行调整准星追踪目标的能力。如果你已经掌握了拉枪技巧，不妨尝试关闭辅助瞄准，以提高自己的反应速度和精确度。（我胡说的）\n4. 多指操作的巧妙运用：传统二指操作限制了视角转换与射击的同时进行。采用三指乃至四指操作可以让移动、瞄准、开火等动作更加流畅自如。\n\n- 左手大拇指：控制角色移动\n- 右手大拇指：转动视角、蹲趴跳\n- 左手食指：开火\n- 右手食指：探头和开镜\n\n战术篇：\n\n1. 利用地形优势：第三人称视角给予玩家信息上的不对称优势，利用墙壁、树木、车辆等作为掩体，卡住视角观察对手而不被发现。烟雾弹也是转移位置时的好帮手，但在未暴露的情况下使用反而会暴露行踪。\n2. 优先处理紧急情况：当遭遇近距离威胁时，应立即转而应对；如果正在救助队友而敌人逼近，则需先确保自身安全再考虑救援；面对多个方向的威胁时，要根据具体情况判断哪个威胁最为紧迫，并优先解决。\n3. 高处制胜：占据高地如山顶或屋顶，能让你拥有更广阔的视野和攻击角度，但也要小心成为显眼的目标。\n4. 精准射击的小贴士\n\n- 远距离射击时采取蹲姿或趴姿有助于减少武器后坐力的影响。\n- 对于近身作战，保持静止仅用视角转向来锁定目标可提高命中率。\n- UMP45 冲锋枪搭配直角握把和三倍镜是中近距离战斗的理想选择；而对于极近距离交战，全自动霰弹枪 AA12-G 则是不二之选。（我胡说的）\n\n5. 灵活机动，迷惑对手：打一枪换一个地方的原则虽然简单，执行起来却要求玩家具备敏锐的战场感知能力。通过不断变换位置，你能让敌人难以捉摸你的动向，从而为自己争取更多存活的机会。\n\n记住，在《和平精英》的世界里，每一次成功的背后都是无数次练习的结果。希望以上这些策略能够帮助你在游戏中取得更好的成绩！\n\n## 金手指、TAS 与 RTA：游戏中的不同通关艺术\n\n在电子游戏的世界里，玩家们追求着各种各样的成就。从简单的作弊到极限竞速，不同的玩家有着各自的目标和方法。其中，“金手指”、“TAS”以及“RTA”就是三种具有代表性的玩法。\n\n**金手指**这个名字听起来颇具神秘色彩，它实际上是指一种通过修改游戏内存来达到作弊目的的技术。想象一下，当你能够随意改变游戏内的数值时，无论是无限生命还是无敌状态，一切皆有可能。但这种做法显然破坏了游戏的平衡性和挑战性。\n\n相比之下，**TAS（Tool-Assisted Speedrun）**则显得更加精致而专业。TAS 意为工具辅助下的速度挑战。这里的“工具”并不是指直接干预游戏内部数据，而是指一系列高级技巧和工具，帮助玩家探索理论上最佳的游戏完成方式。TAS 过程包括：\n\n- **精确记录**：每一步操作都被详细记录下来，就像电影导演精心安排每一帧的画面。\n- **慢动作重播**：使用模拟器让游戏逐帧运行，允许玩家微调每一个细节，直至完美无缺。\n- **即时修正**：如果某一时刻的表现不尽如人意，可以立即回溯并重新尝试，直到满意为止。\n- **利用 BUG**：甚至会巧妙地利用游戏中存在的漏洞或特性，创造出令人惊叹的效果。比如使[《超级马里奥世界》](https://www.bilibili.com/video/BV1Ks411S7Fd)的内存溢出，提前加载出通关动画。\n\n最终成果是一个包含了所有最优操作序列的数据文件。除了追求最快通关外，还有一种叫做 Superplay 的 TAS 类型，专注于展示高超技艺而非单纯的速度，比如[超级马里奥一代[最多金币]世界记录](https://www.bilibili.com/video/BV16s41127MM)。\n\n最后提到的是**RTA（Real Time Attack）**，这是一种纯粹基于人类实时反应的真实时间挑战。没有预录的操作、没有 S/L 的机会，在这里，每一次按键都决定着成败。RTA 考验的是选手们实际操作能力的巅峰表现。\n\n总之，无论你偏好哪一种方式，这些活动都展示了人们对游戏热爱的不同侧面，并且促进了社区之间的交流与进步。\n\n## 主机游戏推荐\n\n### 《纸片马里奥：千年之门》\n\n《纸片马里奥：千年之门》（也被称为《纸片马里奥 RPG》）是一款 2004 年发布的经典游戏，是任天堂 GameCube 平台上的纸片马里奥系列的第二部作品。如果你渴望在电脑上重温这款佳作，你将需要一个 NGC 模拟器，比如 [Dolphin](https://cn.dolphin-emu.org/?cr=cn)，以及该游戏的[汉化版镜像文件](http://pan.baidu.com/s/18BIxs)。通过配置独立显卡渲染，大部分玩家可以在自己的笔记本电脑上享受到流畅的游戏体验，即便偶尔会遇到一些小卡顿。另外，玩家还可以通过按 Tab 键让模拟器内的游戏时间流速变快，减少跑路、过场动画、技能和战斗的后摇时间。\n\n这款游戏巧妙地结合了 2.5D 视觉效果，利用固定视角、透视变换和场景旋转等手法来创造一种独特的立体感。游戏中的人物被设计为真实的“纸片人”，这种创意让整个冒险过程充满了惊喜。\n\n<img src=\"/blog/images/game/pm-1.gif\">\n\n《千年之门》的世界庞大且充满细节，尤其是那座名为“巨大之树”的地图，其复杂的结构很容易让人迷失方向。此外，无赖镇和下水道这样的区域几乎每一章都会出现，并逐渐解锁新的部分。要探索这些地方，玩家有时得变身为纸片、纸飞机或纸船，这不仅增加了游戏的乐趣，还考验着玩家的解谜技巧。\n\n角色成长系统围绕着 HP（生命值）、FP（花点数，用于特殊技能）、BP（徽章点数，影响佩戴徽章的能力）和 SP（战斗中观众给予的增益）展开。每次升级都需要累积 100 个星星点数，而玩家可以自由选择强化哪一项属性。有趣的是，后期可以通过特定徽章来提升基础的 HP 和 FP，因此不少玩家倾向于专注于增加 BP。\n\n游戏社区中流传着一种被称为“五血流”的激进策略：玩家故意将角色的生命值降至最低限度，然后换取在低血量下加成攻击力的徽章，以期在战斗中造成极大伤害。尽管我本人并未尝试这种方法，但我确实提升了常规跳跃攻击的威力，在某些关卡能够迅速结束战斗。\n\n如果你在游戏中遇到困难，不妨查阅[相关攻略](https://jokerm.com/notes/gg/paper-mario-ttyd-story/)，但请小心避免剧透。值得注意的是，现存的一些攻略可能基于 Switch 重制版本，与原版存在差异。另外，游戏的故事情节并不落俗套；它超越了传统的勇者救公主模式，而且在每个章节之间，玩家甚至有机会操控反派角色及公主，增添了不少新鲜感。\n\n总之，《纸片马里奥：千年之门》以其创新的游戏机制、丰富的世界观以及非线性的叙事方式赢得了玩家们的喜爱，即使是在今天，依然值得一试。\n\n---\n\n那个 72 是小时，中途看了五次以上游戏攻略。[据说](https://www.ign.com/game/paper-mario-the-thousand-year-door)推主线只用 30 多个小时。\n\n<img src=\"/blog/images/game/pm-2.webp\">\n\n### 《超级纸片马里奥》\n\n[《超级纸片马里奥》](https://pan.baidu.com/s/1pERej)作为纸片马里奥系列的第三部作品，给玩家带来了一次令人耳目一新的游戏体验。与前作采用的传统回合制战斗不同，这部 2007 年登陆 Wii 平台的游戏让玩家重拾了经典的平台跳跃乐趣。Wii 作为第七世代的游戏主机之一，以其独特的体感遥控器著称，为游戏增添了别样的互动方式。\n\n如果你想要重温或首次探索这款经典之作，但又没有 Wii 主机的话，使用 Dolphin 模拟器是个不错的选择——尽管这意味着你需要花点心思去配置按键映射来适应 PC 操作，对于那些不愿意为此花费额外时间的人来说，购买一个兼容的手柄或许能够提供更加直接且流畅的游戏体验。\n\n这款游戏的一大特色就是其创新性的视角切换功能：只需轻按一个按钮，你就可以在 2D 和 3D 视图之间自由转换，这不仅极大地丰富了游戏的探索性和趣味性，还带来了许多令人惊喜的设计。\n\n<img src=\"/blog/images/game/spm-1.gif\">\n\n不过，正如任何新奇尝试都可能遇到的问题一样，在某些情况下这种视角切换也可能导致意想不到的结果，比如角色意外地“翻车”，这样的小插曲反而为冒险旅程增添了几分幽默感：\n\n<img src=\"/blog/images/game/spm-2.gif\">\n\n无论是成功还是小小的失误，这些元素共同构成了《超级纸片马里奥》独一无二的魅力所在。\n\n### 《超级马里奥银河》\n\n- 主题：该游戏以宇宙、银河和星星为主题，将广袤的宇宙与温暖的人文关怀结合在一起，给玩家带来了一种独特的陪伴感。\n- 玩法：重力方向不是固定的，每一个星球有它自己的引力场，一般来说是人物站立的地方与重心的连线。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-ddxyh.mp4\" type=\"video/mp4\" />\n</video>\n\n- 操作上的技巧：\n  - 滞空：在跳起来的最高点晃一下右手柄\n  - 助跑前空翻（三级跳）：在助跑连跳的第三次\n  - 原地后空翻：蹲+跳，注意跳之前的脸朝向和高台相反\n  - 侧翻：在回头的一瞬间跳\n  - 远跳：前进时蹲+跳\n  - 在跳跃高度上，助跑前空翻 > 侧翻 ≳ 原地后空翻 > 助跑二级跳 > 助跑/原地普通跳 > 远跳\n  - 水底游泳的脑袋朝向：左右是随手柄的，但是上下是反的。\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-pfysyh.mp4\" type=\"video/mp4\" />\n</video>\n\n- 人体陀螺：\n\n<video controls width=\"100%\">\n  <source src=\"/blog/video/smg-top.mp4\" type=\"video/mp4\" />\n</video>\n\n- 局限性：出于 Wii 机能和游戏制作理念和成本方面的限制，它的摄像机视角并不是完全自由的。\n\n如果不使用实体手柄，而是用海豚模拟器的按键映射玩的话，当我们想要使用手柄的“指向”功能与游戏中的部分对象交互时，比如收集星星碎片和拉牵引星的时候，可能会出现交互不了的情况。这时我们需要取消勾选这个选项：\n\n<img src=\"/blog/images/game/smg-cpu-efb.webp\">\n\n## 《和平精英》游戏操作二指转四指的心得\n\n当你在《和平精英》中从二指操作逐渐过渡到四指操作后，可能会发现一个有趣的现象：随着技术的提升，你遇到的对手似乎也都是四指高手。这种情况下，即便你的技巧有所提高，有时候还是难以战胜那些同样精通四指操作的玩家。这就像是一种奇妙的游戏平衡，当你因胜利而欢呼时，或许对面正因失败而懊恼；反之亦然。这就是所谓的“摔手机守恒定律”（零和博弈）。现在和平精英是有一个进入前三还是前五就显示胜利了，你可以选择退出游戏。但是都开一局了，一般来说都是想拿第一的。\n\n在这种充满变数的竞争环境中，有些玩家会发展出一些奇特的行为模式来增添游戏的乐趣或发泄情绪。比如，在某局游戏中，有的玩家会选择开船返回出生岛绕一圈，或者驾车沿着沙漠公路环行，甚至利用汽车喇叭和枪声创造节奏感。更有甚者，他们会尝试挑战不捡任何物资就吃鸡这样的极限任务。这些行为虽然看起来奇怪，但并不算是消极游戏。\n\n真正的消极游戏行为则更为具体且有目的性。例如：\n\n1. 在超体对抗模式下选择“战地医师”角色。\n2. 与队友分开跳伞，并在他们无法迅速到达的地方放置医疗站并收集自救器。\n3. 捡取大量药品，准备长时间待在毒圈边缘。\n4. 寻找一位非“闪电尖兵”职业的队友，共同行动。\n5. 当机会出现时，等待队友进入特定结构的房子——那种只有一人身子宽出口的房间。\n\n<img src=\"/blog/images/game/peace-1.webp\">\n\n6. 然后站在或是蹲在这个位置上，将队友卡在房间内无法动弹。\n\n<img src=\"/blog/images/game/peace-2.webp\">\n\n这种情况下的堵门行为往往比普通模式下的同类事件更加令人沮丧。\n","slug":"漫无止境的童年","published":1,"updated":"2025-09-21T15:16:25.043Z","__permalink":"game.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnq000l5ws6ahvqehqa","content":"<p><img src=\"/blog/images/game/any.webp\"></p>\n<p>精神分析理论认为，游戏是一种通过主动控制情境来调节情绪、释放焦虑、补偿愿望的过程。认知发展理论认为，游戏创造着最近发展区。按体现孩子认知发展的水平来分类，可把游戏分为三个阶段：</p>\n<ul>\n<li>婴儿期的机能游戏：通过重复的动作来探索环境，发展身体能力，适应生活。如亲子互动，爬行，拍打玩具。</li>\n<li>幼儿期的象征性游戏：以经验为基础，通过想象和角色扮演赋予物体或动作象征意义。如过家家，假装打仗。</li>\n<li>童年期及以后的规则性游戏：强调合作，竞争和逻辑思维。如桌游和球类运动。</li>\n</ul>\n<h2 id=\"非电子游戏\">非电子游戏</h2>\n<p>寒暑假回老家玩的：</p>\n<p>用麻将砌房子</p>\n<p><img src=\"/blog/images/game/belfry.webp\"></p>\n<p>模仿电视打牌节目。用 26 个英文字母加一个 <span class=\"math inline\">\\(\\pi\\)</span>\n作为选手的名字，一人分饰 27 角附带记分：</p>\n<ol type=\"1\">\n<li>先给三位玩家发牌，如 A B C，留三张底牌</li>\n<li>每局的底分为 1，起始倍数为 1</li>\n<li> 在叫地主之前，每个人都有一次明牌的机会。明牌翻 8\n倍，且最先明牌的人有优先叫地主的权利。实现的方式是，把三个人的牌都理好之后，看有没有人牌是特别好的，有就明牌，并且抢占叫地主的优先级。可能只有这一条是无法做到公平的，因为你作为一个上帝视角，如果有两手好牌，你必定是有一个先后看到的顺序的，你无法模拟在现实里抢明牌的情况，只能选一个牌更好的人。</li>\n<li>开始叫地主。叫地主的顺序在每局结束之后轮换一下</li>\n<li>如果有人抢地主，翻 2\n倍。每人最多抢一次地主，也就是说，最先叫地主的人还有一次 “我抢” 的机会。同时，不叫的人是不能抢地主的。</li>\n<li>在叫地主和抢地主的时候，你必须站在每一位玩家的立场上，只根据他们自身持有的有限信息，来判断叫不叫牌。这时候底牌和其他人的牌是不能参考的，你要假装自己不知道。在局中的时候同理，除非有人明牌了。</li>\n<li>在地主确定之后，底牌才能翻开。这时候规定，中间一张底牌的点数加一的牌为癞子。如底牌的第二张是\nK，那么 A 为癞子；如果是 2 或者王，那么 3 为癞子。从这里我们可以看到，3\n为癞子的概率是 <span class=\"math inline\">\\(\\frac{6}{54}\\)</span>，4/.../2 为癞子的概率是\n<span class=\"math inline\">\\(\\frac{4}{54}\\)</span>，王不能当癞子</li>\n<li>作地主的人，在出第一手牌之前，额外有一次明牌的机会，如果他在之前没有明牌的话。</li>\n<li>软炸翻 2 倍，硬炸翻 4 倍，纯癞子炸翻 8 倍，春天翻 8\n倍，倍数上不封顶。在以前《影视智斗星》这个节目也是没有封顶倍数的，所以出现过中场负\n10000 分的情况，几乎能确定冠军，后面根本不用打了，它在 2008\n年左右大概叫《挑战大民星》之类的名字。我们这个游戏为了刺激和好玩，还是没有封顶倍数的，这可能存在一个人为了追分，在发第一张牌之后就会强行地明牌抢地主而不管自己的牌是好还是坏。</li>\n<li>一局结束之后，计分。如本局的倍数是 8\n倍，地主赢了，那么地主 + 16，农民 - 8。</li>\n<li>一桌打十局。所有桌打完之后，按分数共同参与排序。27 进 18，18 进 9，9\n进 3</li>\n</ol>\n<p>进阶的玩法是，可以给每一位选手设定一个性格。比如把 A\n设定成豪放的，B 设定成稳重的。</p>\n<p>自制什么棋：我还曾经把月饼和粽子盒子的内侧变成了奇幻地图，绘制了各种地形，并设置了前进、后退等行动指令。四个橡皮擦化身成勇敢的探险家，在投掷骰子之后按点数移动，目标是成为第一个到达终点的人。随着游戏的发展，邻居小孩也加入了进来，他们（事实上只有一个人）增加了金币和商店系统，使得这场冒险变得更加精彩纷呈。</p>\n<p>与好友共度的高中时光：进入高中后，我和一位朋友发明了几款不独特的纸笔游戏来打发时间：</p>\n<ul>\n<li>三维五子棋：我们利用作文本连续几页的页面来创造一种立体感，或者直接采用纯坐标的方式来进行对弈，给传统的平面五子棋带来了新的维度。由于二维的五子棋都有黑棋先手必胜的说法了，所以三维的可能是黑占大优的，但是我们只是试了一下，实际上它是不好玩的。坐标对弈的胜利判定条件是：一方有五个棋子的坐标三个分量分别都成了 - 1/0/1\n的等差数列。</li>\n<li>脑黑洞：这款游戏由朋友原创，一方画出某样东西\nA，另一方则要画出能够克制 A\n的东西，并且给出合理的解释。不论多么天马行空的想法，只要逻辑自洽就能成立，这样的互动既考验着我们的创造力也锻炼了解释能力。</li>\n<li>纸上谈兵：受到在线游戏<a href=\"https://tank-trouble.co/\">《Tank\nTrouble》</a>和<a href=\"https://www.4399.com/flash/220013_1.htm\">《MUTINY》</a>启发，我在物理实验课上构思出了这款战略游戏。玩家需要在回合开始前决定是进行移动还是攻击。移动就是按照所画路线行进，而攻击则要看线路是否能触及对手。游戏还引入了不同类型的单位，增添了战术层面的选择（现在都忘了）。</li>\n</ul>\n<p><img src=\"/blog/images/game/paper-attack.gif\"></p>\n<p>这些游戏不仅充实了我的童年与青少年时期，更是在没有高科技玩具的情况下，教会了我如何利用身边的一切去创造快乐。每当回忆起那些日子，心中总是充满温暖与感激。</p>\n<p>玩具：没有弹珠，所以打瓶盖，小时候把瓶盖装了一个鞋盒子；有一段时间玩过带发射器和链条的陀螺，说明我以前也不是不愿意花钱的；还买过游戏王的卡，但是在\n21 世纪 10\n年代里的、不知道第几次的童年告别仪式里被我扔了；扑克牌的玩法有斗地主、接竹竿和\n7 鬼\n523；还玩过象棋和五子棋，水平在知道规则的程度。五子棋应该可以和小白下平，用八卦阵就行了。</p>\n<p>象棋告诉我们的：拱一个卒，或者用车看两条线，在当前的这一步是没什么效果的，它的效果在后面才有；下限时的象棋可以锻炼决策能力。</p>\n<p>拍手游戏：在我转学前的那个环境里，这是一系列适合两人或多人参与的互动游戏的统称，结合了口令与手势，带有升级机制的回合制对决。玩家通过一只嘴和两只手掌来施展预先商定好的招式以克制对手。基础技能分为三大类：吸气、防御以及攻击。吸气是给自己加\n1MP，在使用攻击技能和部分高等级的防御技能需要消耗气。为了确保动作的一致性，在每个回合开始前，参与者需先拍手同步节奏；而在执行招式时，则需配合相应的手势与口号。</p>\n<p>大自然：虽然我老家在农村，但是我基本没有上山和下河玩过，没有对应的记忆。这张照片是\n2024 年拍的，人可以一次踏入两条河流：</p>\n<p><img src=\"/blog/images/game/river.webp\"></p>\n<p>控梦：有一段时间，我关注过清明梦的贴吧，甚至还有一段时间真的做了清醒梦，它多出现在睡回笼觉的时候，就是你的一部分意识可以意识到你在做梦，进而可以在梦里活动。分自由的活动和有限制的活动，我只能做到有限制的活动，比如在天上飞，飞起来之后保持不了太长的时间，总会受到地心引力下坠。但是后来都没在乎这个事了，梦也做得很少，也可能是做了忘了。《梦控师》这本书系统地介绍了做清明梦的方法。</p>\n<h3 id=\"川牌规则\">川牌规则</h3>\n<p>戳牌，即四川长牌。仅限于笔者祖父母和外祖父母那一带地区的玩法。</p>\n<p>牌面：21 种 x 4 张 = 84\n张牌。这里为了介绍，把长得一样的牌叫同种牌。两种黑八不算是同一种，因为长得不一样。</p>\n<ul>\n<li>正门：天牌（66 宋江）&gt; 地牌（11 公孙胜）&gt; 人牌（44 秦明）&gt;\n和牌（13 柴进）&gt;</li>\n<li> 长门：长三（33 武松）&gt; 梅十（55 董平）&gt; 板凳（22 鲁智深）</li>\n<li>幺门：疙瘩（15 徐宁）&gt; 幺七（16 索超）&gt; 四六（46 杨志）&gt;\n虎头（56 张清）</li>\n<li>点门：\n<ul>\n<li>黑点：黑九（36 吴用）&gt; 平八（26 林冲）、弯八（35 关胜）&gt;\n黑七（25 花荣）&gt; 黑五（23 朱仝）</li>\n<li>红点：红九（45 卢俊义）&gt; 红七（34 呼延灼）&gt; 红五（14\n李应）&gt;</li>\n</ul></li>\n<li> 猴：公猴 / 红三（12 戴宗）、母猴 / 红六（24 刘唐）</li>\n</ul>\n<p>牌型与比较系统：</p>\n<ul>\n<li>重叠牌型。同种牌出 1 张到 4 张\n<ul>\n<li>正门 + 长门算一个系统</li>\n<li>幺门算一个系统</li>\n<li>黑点算一个系统</li>\n<li>红点 + 猴算一个系统</li>\n<li>如：两张天牌可管两张人牌或两张梅十，但不能管一张梅十、两张黑九或两张幺七；黑九不能管红七。</li>\n</ul></li>\n<li>组合牌型。组合规则为：天九、地八、人七、和五。一张及以上的（天 / 地 / 人 / 和）牌与一张及以上的对应的（九点 / 八点 / 七点 / 五点）牌组合为\n2 至 12 张的组合牌，例如：\n<ul>\n<li>天牌 + 红九 + 黑九 + 黑九 = 四天九</li>\n<li>地牌 + 黑八 = 两地八</li>\n<li>人牌 + 人牌 + 红七 = 三人七</li>\n<li>和牌 + 和牌 + 红五 + 黑五 = 四和五</li>\n<li>这四种情况算一个系统</li>\n<li>如：四地八可管四人七、四和五，但不能管三人七或五和五。</li>\n</ul></li>\n</ul>\n<p>去向：分为手牌、桌面和积分堆。</p>\n<p>接牌时手牌按门类分为不同的列。</p>\n<ol type=\"1\">\n<li>顺序接牌，接到一对公母猴牌直接放到己方的积分堆。如果一对都不成，单猴单出被红点管；如果除了一对还有别的猴，也直接放到积分堆。</li>\n<li>按圈出牌，类似升级、拱猪，但不能垫牌。每一圈里能管必管，要求在同一个比较系统里，且张数相同。管不了时\npass\n<ul>\n<li>第一个接牌的人为首引</li>\n<li>一圈结束后，牌最大的一方把他在本圈出的一手牌放到己方的积分堆，并作为下一圈的领出</li>\n</ul></li>\n<li>仅一人未出完手牌时，本局结束。积分堆里牌张数最多的一方获胜。</li>\n</ol>\n<p>其他判定规则：如果一位玩家认为自己剩余的手牌全大，可以进行摊牌。三个人\n20 张算赢。如果摊牌失误，就是丢脸了。</p>\n<h3 id=\"打燕窝\">打燕窝</h3>\n<p>在郧阳区城关镇的西北方向上有一个堰河村，是 11\n路公交车的终点站，其所在地原名叫大堰。2001\n年，大堰乡被并入了城关镇，所以它现在属城关镇管辖。在堰河村的北面，230\n省道的堰河大桥路段，有一条小河叫仙人河，它是汉江支流的一个起端。</p>\n<p><img src=\"/blog/images/打燕窝地理位置.webp\"></p>\n<p>事实上在我站立的地方附近也是仙人河。从河长牌子上可以看到，这条河长达\n31.5\nkm。并且，在离仙人河牌子不远的地方，还有狮子河的牌子。但只有腾讯地图把它们标出来了，高德和百度地图都没标。</p>\n<p>在堰河大桥下河岸顺着水源方向走二十分钟左右，就能看到打燕窝。它是崖壁上自然形成的一个洞，站在岸边的人向里面扔石头祈福，如果扔进了，就预示着好运。</p>\n<p><img src=\"/blog/images/打燕窝.webp\"></p>\n<h2 id=\"单机游戏\">单机游戏</h2>\n<h3 id=\"摩托罗拉-c117-自定义铃声语法说明\">摩托罗拉 C117\n自定义铃声语法说明</h3>\n<p>我最早接触的电子设备，大概就是奶奶手中的那部手机了。这款手机诞生于\n2005\n年，它拥有一块单色屏幕，内置了三款小游戏 —— 黑白棋、小蜜蜂以及弹球，成了我当时探索数字世界的窗口。</p>\n<p><img src=\"/blog/images/game/C117.webp\"></p>\n<p>它还可以自定义铃声。在铃音类型 -&gt;\n我的铃音里可以自定义四首曲子，每首曲子的保存方式是一串 0 至 255\n字符的文本。音域在 F3 至 E7 之间。</p>\n<p>符号表：</p>\n<table>\n<colgroup>\n<col style=\"width: 28%\">\n<col style=\"width: 71%\">\n</colgroup>\n<thead>\n<tr>\n<th>符号</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> a #a b c #c d #d e f #f g #g</td>\n<td> 音级</td>\n</tr>\n<tr>\n<td> r</td>\n<td> 休止符</td>\n</tr>\n<tr>\n<td> *3 *4 *5 *6 *7</td>\n<td> 与音级右结合，指示之后的几个音级所在的分组。缺省为 4</td>\n</tr>\n<tr>\n<td>0 1 2 3 4 5</td>\n<td> 与音级或休止符左结合，指示该音符的时长，从全音符到 32 分音符。缺省为\n2</td>\n</tr>\n</tbody>\n</table>\n<p>如：</p>\n<ul>\n<li><code>*4a0</code>，它代表 A4 的全音符。</li>\n<li><code>*5a</code>，它和 <code>*5a2</code> 的语义相同，代表 A5\n的四分音符。</li>\n<li><code>*4#a1</code>，它代表 A#4 的二分音符。</li>\n<li><code>*4#ab3</code>，它代表一个 A#4 的四分音符和一个 B4\n的八分音符。</li>\n</ul>\n<p>输入方式：</p>\n<ul>\n<li>上下键：*3f *3#f *3g 至 *7#d *7e</li>\n<li>1 键：1 . : ;\n在它的帮助里显示可以输入附点音符，但是笔者没有测试成功它的语法。</li>\n<li>2 键：a b c 2</li>\n<li>3 键：d e f 3</li>\n<li>4 键：g 4</li>\n<li>5 键：5</li>\n<li>6 键：6</li>\n<li>7 键：r 7</li>\n<li>8 键：8</li>\n<li>9 键：( ) @ 9</li>\n<li>0 键：0 * # &amp;</li>\n<li>* 键：光标左移</li>\n<li># 键：光标右移</li>\n</ul>\n<p>示例：《万象霜天》的开头部分。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bbbb#g#g#g*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bb*5#c1r1*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r#g1rb*7#c3*6b3#g1r#f1rer*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r*7#c1re#f3e3</span><br></pre></td></tr></tbody></table></figure>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/moto.mp4\" type=\"video/mp4\">\n</video>\n<p>这里为了易读，添加了空格、换行</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*5e#c*4b*5#c *4#g*5#c#c#c *4b*5#c#c#c e#c*4b*5#c</span><br><span class=\"line\">太初太易 无相无形 莫知浊重 孰辨清轻</span><br><span class=\"line\">绵绵若存 用之不勤 礼乐即作 仁义乃兴</span><br><span class=\"line\"></span><br><span class=\"line\">e#f#g#f #fee#d #d*4bbb b#g#g#g</span><br><span class=\"line\">生乎混沌 分其昏明 天得以健 地得以宁</span><br><span class=\"line\"></span><br><span class=\"line\">e#f#g#f #fee#d #d*4bb*5#c1 r1</span><br><span class=\"line\">我有此言 众妙之门 万类咸听</span><br><span class=\"line\"></span><br><span class=\"line\">*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r #g1r b*7#c3*6b3#g1r #f1r er</span><br><span class=\"line\"></span><br><span class=\"line\">*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r *7#c1r e#f3e3</span><br></pre></td></tr></tbody></table></figure>\n<p>最后一段以 *7 开始，#f7 超出音域了，所以响的是音域内的最高音 E7。</p>\n<h3 id=\"pc-windows\">PC-Windows</h3>\n<p>大约在 2008\n年，我在十堰市上小学。信息技术课是我最早接触电脑的地方，那时电脑里装有金山打字通，里面有一个警察追小偷的游戏。从那时起，我的性格就显得格外倔强。记得有一次，教室里有一台无法启动的电脑，而其他电脑都已经正常开机了。尽管如此，我却坚持在这台故障电脑前不停地按键尝试，不肯放弃。最终，在我的不懈努力下，那台电脑竟然被我成功启动了。然而，就在那一刻，下课铃声也响了起来。</p>\n<p>2010 年至 2012\n年，我住在县城的一间地下室里。那时家里唯一的信息设备除了手机就是一台收音机、一台没有接线的大头电视，偶尔还有一段短暂的时间给电视接线了。每个周末，父亲都会带我去他的单位玩电脑，那是我们最快乐的时光。在那台没有联网的\nXP\n系统电脑上，有一个游戏叫《合金弹头合集》，它收集了《合金弹头》的一至五（1996-2003）。面对这个新奇的游戏，我和父亲都感到茫然，不知该如何下手。于是，我决定采用最直接的方法 —— 遍历法，逐一尝试键盘上的每一个按键。经过一番摸索，我意外地发现\n1 键是用来开始游戏和投币的，WASD 则控制角色移动，而 JKLUIO\n分别对应开枪、跳跃和扔手雷等功能。不仅如此，通过不断的尝试与探索，我还发现按\n1+2\n键可以调出游戏的作弊面板，在那里可以开启无限手雷等强大功能。在此之前，我从未接触过如此复杂的键位设置，而且我们的电脑也没有联网，无法访问像\n4399 这样的游戏网站，英文自然也看不懂。</p>\n<p><img src=\"/blog/images/game/metal-slug.webp\"></p>\n<p>后来有一天晚上放学回家，我发现家里多了一个箱子。由于从 2010\n年开始我就有了社交恐惧症，我不敢直接询问箱子里装的是什么，但偷偷摸了一下，听到了鼠标点击的声音。不久之后，这台电脑就被组装了起来：VGA\n接口的显示器、PS/2 接口的鼠标和键盘，以及一个需要插三根线的小音响。</p>\n<p>约 2012\n年末，在我小学六年级的那段日子里，家里终于接通了有线网络。每次打开电脑都需要在宽带连接中输入账号密码才能上网。为了限制我玩游戏的时间，父亲还特意设置了开机密码。但我有一次偷看了父亲输入密码的过程，然后用遍历法试了出来。后来，我又发现了可以在\nBIOS 中清空密码的方法。某次，我在电脑上看到了一个叫做 “一键\nGHOST” 的程序，出于好奇想试一试，结果不小心将整个 C\n盘的数据 “归零” 了，幸好其他盘中的文件还在。这些经历不仅记录了我的成长轨迹，也见证了我的好奇心和不断探索的精神。</p>\n<p>我曾深深沉迷于《植物大战僵尸》（2009），每天中午上学前都会准时为禅境花园里的植物们浇水，那份小小的仪式感成为了日常的一部分。为了探索游戏的无限可能，我还下载过各种修改器。其中最难忘的一次体验，莫过于释放了一整排全屏的火爆辣椒，那一刻，所有的僵尸瞬间被清空，那种震撼至今仍然历历在目。通过修改器的帮助，我还解锁了游戏中那些未曾正式发布的隐藏关卡，让我得以一窥游戏背后更多不为人知的秘密。我还曾动手修改过游戏汉化包中的一个文本文件，试图给植物们换上新的名字。虽然由于字符限制，新名字并不总是完整呈现，但这种创造性的尝试依然给我带来了极大的乐趣。</p>\n<p>《愤怒的小鸟：星球大战\n2》（2013）至少陪伴我度过了两次冒险旅程。有一次，在干妈家再次下载了这款游戏。那段时间里，由于社交焦虑（就像近十年来的状态一样），我的世界几乎完全被电脑占据。虽然这样的生活充满了矛盾 —— 既有游戏带来的快乐，也有内心的孤独与挣扎。</p>\n<p>在电脑开始菜单的附件游戏中，《Microsoft\n网上红心大战》给我留下了深刻的印象。尽管名字中带有 “网上” 二字，但实际上无需联网也能玩。这是我首次体验按花色出牌的游戏规则。游戏设定为一人对抗三名电脑对手，每局结束时玩家得分通常为负数或零分，正分极为少见。后来玩过《拱猪》之后，我才发现这个游戏实际上是从《红心大战》演变而来的。此外，我还曾在扫雷网上上传了自己的游戏录像，尽管我的技术水平连业余都算不上。有趣的是，为了录制这些视频，还需要下载专门的竞赛用软件，而不是使用电脑自带的扫雷程序。</p>\n<h3 id=\"自制超级马里奥地图\">自制超级马里奥地图</h3>\n<p>SMX（2006）贴吧的关注人数现在和十年前（2014\n年）相比几乎没有变化，一直都是几百人左右。即使在十年前，SMX\n也已经是一个过气的项目了，因为相比之下，SMBX（2009）的地图编辑器更加成熟，其贴吧的关注人数超过了一千人。那时，我甚至还不明白什么是主机游戏，自然也就错过了《超级马里奥制造》的消息。初中时期的\n2014 年左右，我在这样一个逐渐被人遗忘的环境中投入了大量的时间来制作 SMX\n的地图，主要是为了逃避现实。那些精心设计的无趣地图至今仍保存在我的\nGitHub 仓库中。</p>\n<blockquote>\n<p>这是当今我觉得唯一有意思的一张。就像现在这个网站一样，再过几年我就会觉得它一点意思也没有了。</p>\n</blockquote>\n<p><img src=\"/blog/images/game/smx.gif\"></p>\n<p>如今，SMX 本体在其<a href=\"http://www.gsksoft.cn/smx/index.html\">作者\nGsk 的网站</a>上已经无法下载了。如果你现在想在 Windows 10\n下运行它的地图播放器，你还需要额外注册 <code>dx7vb.dll</code>\n用于播放声音。而它的地图编辑器会报依赖错误，你或许还需要去配 VB\n的环境，不知道应该怎么办。</p>\n<p>同年，我通过优酷网（或类似的视频平台）上一位名叫独翼神龙的播主分享的链接，下载了\nFC\n模拟器和《超级马里奥兄弟》（1985）。后来，我又下载了一个可以修改《超级马里奥兄弟》NES\n文件的地图编辑器。尽管没有多少美感和设计思路，我还是乐此不疲地制作了好几个改版\nROM。从那时起，我就开始间歇性地回忆起童年的美好时光。我的第一个无趣的视频是在酷\n6 网上发布的，因此数字 6 对我来说有着特殊的意义。</p>\n<h3 id=\"主机游戏\">主机游戏</h3>\n<p>大约在 2008\n年，父亲买了一个带卡带的键盘，里面配有两种卡：学习卡和游戏卡。这个键盘通过\nCVBS\n接口的三条线连接到家里的大头电视上，用于显示图像和声音。此外，还配备了两个使用\nDB9\n串口线的手柄，供我们玩游戏。学习卡可以用来练习五笔打字，而游戏卡则包含了一些经典的\nFC\n游戏，如《超级马里奥兄弟》、足球游戏以及一系列与奥运会相关的游戏。</p>\n<p>那个键盘后来被带到了老家，最终被收了起来。最后，我像拆解收音机和其他旧物一样，将它拆解了，这似乎成了我与那段永远回不去的童年的告别仪式。</p>\n<p>除了那个卡带上的 FC 游戏和网上的一些超马一代改版，其他 FC\n游戏印象深刻的只有《成龙之龙》（1991）和《超级马里奥兄弟\n3》（1988）。随后的日子里，我又下载了 NDS\n模拟器。在这个模拟器中，我主要玩了《马里奥赛车\nDS》（2005）和《新超级马里奥兄弟》（2006）。尤其是《马里奥赛车\nDS》，那条令人印象深刻的彩虹赛道至今仍让我回味无穷。这些游戏不仅丰富了我的业余时间，也成为了我童年记忆中不可或缺的一部分。</p>\n<h3 id=\"网页-flash\">网页 - Flash</h3>\n<p>之所以将 Flash 游戏归类为单机游戏，是因为除了在 4399、7k7k\n等知名网站上可以在线游玩外，这些游戏还可以下载后在本地运行。它们通常以<code>.swf</code> 文件的形式存在，只需使用\nIE 浏览器调用 Adobe Flash Player\n打开即可，尽管每次打开前都需要忽略一遍浏览器的安全警告。</p>\n<p>记得父亲曾在那台没有联网、仅配备 2G 内存的 Windows XP 电脑上，通过 U\n盘传输了一些 Flash\n游戏给我。那些简单的游戏成为了我童年的一部分，带给我无数欢乐时光。十年之后，正是在这台老旧的操作系统下，我用\nVegas 10\n剪辑出了一段播放量达到几十万的视频。这段经历不仅见证了技术的进步，也记录了我对游戏和创作的热爱。</p>\n<h3 id=\"电视与机顶盒\">电视与机顶盒</h3>\n<p>以前在奶奶家的非智能老式液晶电视上玩过奥赛罗棋。后续还有一个能玩游戏的\nIPTV 机顶盒，上面有一些可以用遥控器玩的游戏，甚至还有一款养成类的\nGalGame。我还在上面看了《纸片马里奥・千年之门》的实况，所以所有执念都是有原因的。</p>\n<h2 id=\"手机游戏回顾\">手机游戏回顾</h2>\n<p>单机游戏：</p>\n<ul>\n<li>《水果忍者》（2010）：在这款游戏中，你可以尽情挥刀切水果，享受简单而畅快的切割乐趣。</li>\n<li>《2048》：通过数字拼接挑战你的耐力极限，这款游戏看似简单却能让人沉迷其中，不断追求更高的分数。</li>\n<li>《别踩白块儿》（2014）：这是一款音乐游戏，玩家需要跟随节奏快速点击屏幕上的方块，体验音乐与反应速度的完美结合。</li>\n<li>《纪念碑谷》（2014）：唯美画面与精妙视错觉相结合，带你进入一个充满奇幻色彩的世界。每一关都是一次视觉与智力的双重盛宴。</li>\n<li>《物理画线》：通过巧妙地画线，引导小球顺利滚入杯中。这款游戏不仅考验玩家的创造力，还锻炼了逻辑思维和物理直觉。</li>\n<li>《曲中剑》（2022）：将中国古典音乐与武侠元素完美融合，让你在优美的旋律中体验流畅的剑术对决，感受传统文化的魅力。</li>\n<li>《艾希》（2017）：独特的叙事风格和战斗体验，尤其是那个令人印象深刻的旁白，让整个游戏过程充满了趣味和惊喜。</li>\n</ul>\n<p>艾希（ICEY）是一款多平台的游戏。里面有几个非常有意思的地方（剧透预警）：</p>\n<ol type=\"1\">\n<li>在里面有一个让你做出选择的房间。但不管最后你选择哪个选项，它必定会是错误的选择</li>\n<li>人物的名字刚开始是艾希，后来触发事件之后变成佑希。在全部通关之后，它会变成你最开始输入的名字。</li>\n</ol>\n<p>联网游戏：</p>\n<ul>\n<li>《玩吧》：多样化的社交娱乐游戏，代表是你画我猜。</li>\n<li>《JJ\n比赛》（2007-）：丰富的棋牌游戏选择，包括斗地主、升级、麻将、台球、中国象棋、干瞪眼等。以前甚至还有德州扑克和拼三张。</li>\n<li>《贪吃蛇大作战》：经典的 io 游戏。</li>\n</ul>\n<h2 id=\"古早网络游戏回忆\">古早网络游戏回忆</h2>\n<blockquote>\n<p>1994-2000：从四大门户到搜索<br> 2001-2009：从搜索到社交化网络<br>\n2010-2018：移动互联网和自媒体</p>\n</blockquote>\n<ul>\n<li>WAP 文字游戏：《3GQQ 幻想西游》（约\n2006-2013）是我最早接触的网络游戏。现在网上还存在一些可以玩的<a href=\"http://3gyx.cn/\">复刻版本</a>。还有一些文字版的游戏：QQ\n农场、牧场等，父亲也喜欢玩，以前的网络加载一个页面要一分钟。</li>\n<li>QQ 宠物：QQ 宠物和《大乐斗\nⅡ》（2010-2018）曾是我的虚拟伙伴。在《大乐斗\nⅡ》中，有一个被动技能，可以让宠物有\n15% 的概率在死后复活。记得有一次，我的运气特别好，在一局游戏中这个技能竟然触发了三次，让我惊喜不已。</li>\n<li>QQ 游戏：老版的《欢乐斗地主》（2008-）、《你画我猜》和《TNT\n弹道轨迹》（2011-2018）等游戏陪伴了我无数个日夜。现在，《谁是卧底》依然是\nQQ 游戏中存活的一员。</li>\n<li>网页游戏：我玩过的第一款也是唯一一款网页 FPS\n游戏是《创世兵魂》（2012-2018），它在 2018\n年底停服 —— 而那时《绝地求生：刺激战场》已经风靡一时。</li>\n</ul>\n<h2 id=\"和平精英战略与战术指南\">《和平精英》战略与战术指南</h2>\n<p>在《和平精英》这款由腾讯光子工作室群精心打造的 FPS\n手游中，玩家将体验到与端游《绝地求生》（PUBG）相似的紧张刺激。为了在这场生存竞赛中脱颖而出，不仅需要精准的射击技巧，还需要高明的战略和灵活的战术。下面，让我们一起来看看如何提升你的游戏表现。</p>\n<p>战略篇：</p>\n<ol type=\"1\">\n<li>声音辨位的艺术：在特训岛上，你可以专门训练听声辨位的能力。2D\n环境下的声音定位通常是新手能够掌握的基本技能。室内的声音定位包括：\n<ul>\n<li>如果听到的声音比较沉闷，那敌人很可能位于你上方；</li>\n<li>清脆但略带沉闷的声音提示敌人可能在下层；</li>\n<li>清晰且带有风声或颗粒感的声音意味着敌人就在同一层；</li>\n<li>当声音似乎直接从头顶传来时，说明有人在楼顶活动。</li>\n</ul></li>\n<li>团队合作的重要性：在随机匹配的游戏中，队友往往不会开启语音交流。这时，你需要主动扮演团队中的黏合剂角色，跟随一位队友行动，适时提供支援，共同进退。</li>\n<li>辅助瞄准的双刃剑：辅助瞄准功能可以快速帮助新玩家上手，但它可能会削弱玩家自行调整准星追踪目标的能力。如果你已经掌握了拉枪技巧，不妨尝试关闭辅助瞄准，以提高自己的反应速度和精确度。（我胡说的）</li>\n<li>多指操作的巧妙运用：传统二指操作限制了视角转换与射击的同时进行。采用三指乃至四指操作可以让移动、瞄准、开火等动作更加流畅自如。</li>\n</ol>\n<ul>\n<li>左手大拇指：控制角色移动</li>\n<li>右手大拇指：转动视角、蹲趴跳</li>\n<li>左手食指：开火</li>\n<li>右手食指：探头和开镜</li>\n</ul>\n<p>战术篇：</p>\n<ol type=\"1\">\n<li>利用地形优势：第三人称视角给予玩家信息上的不对称优势，利用墙壁、树木、车辆等作为掩体，卡住视角观察对手而不被发现。烟雾弹也是转移位置时的好帮手，但在未暴露的情况下使用反而会暴露行踪。</li>\n<li>优先处理紧急情况：当遭遇近距离威胁时，应立即转而应对；如果正在救助队友而敌人逼近，则需先确保自身安全再考虑救援；面对多个方向的威胁时，要根据具体情况判断哪个威胁最为紧迫，并优先解决。</li>\n<li>高处制胜：占据高地如山顶或屋顶，能让你拥有更广阔的视野和攻击角度，但也要小心成为显眼的目标。</li>\n<li>精准射击的小贴士</li>\n</ol>\n<ul>\n<li>远距离射击时采取蹲姿或趴姿有助于减少武器后坐力的影响。</li>\n<li>对于近身作战，保持静止仅用视角转向来锁定目标可提高命中率。</li>\n<li>UMP45\n冲锋枪搭配直角握把和三倍镜是中近距离战斗的理想选择；而对于极近距离交战，全自动霰弹枪\nAA12-G 则是不二之选。（我胡说的）</li>\n</ul>\n<ol start=\"5\" type=\"1\">\n<li>灵活机动，迷惑对手：打一枪换一个地方的原则虽然简单，执行起来却要求玩家具备敏锐的战场感知能力。通过不断变换位置，你能让敌人难以捉摸你的动向，从而为自己争取更多存活的机会。</li>\n</ol>\n<p>记住，在《和平精英》的世界里，每一次成功的背后都是无数次练习的结果。希望以上这些策略能够帮助你在游戏中取得更好的成绩！</p>\n<h2 id=\"金手指tas-与-rta游戏中的不同通关艺术\">金手指、TAS 与\nRTA：游戏中的不同通关艺术</h2>\n<p>在电子游戏的世界里，玩家们追求着各种各样的成就。从简单的作弊到极限竞速，不同的玩家有着各自的目标和方法。其中，“金手指”、“TAS” 以及 “RTA” 就是三种具有代表性的玩法。</p>\n<p><strong>金手指</strong>这个名字听起来颇具神秘色彩，它实际上是指一种通过修改游戏内存来达到作弊目的的技术。想象一下，当你能够随意改变游戏内的数值时，无论是无限生命还是无敌状态，一切皆有可能。但这种做法显然破坏了游戏的平衡性和挑战性。</p>\n<p>相比之下，<strong>TAS（Tool-Assisted\nSpeedrun）</strong>则显得更加精致而专业。TAS\n意为工具辅助下的速度挑战。这里的 “工具” 并不是指直接干预游戏内部数据，而是指一系列高级技巧和工具，帮助玩家探索理论上最佳的游戏完成方式。TAS\n过程包括：</p>\n<ul>\n<li><strong>精确记录</strong>：每一步操作都被详细记录下来，就像电影导演精心安排每一帧的画面。</li>\n<li><strong>慢动作重播</strong>：使用模拟器让游戏逐帧运行，允许玩家微调每一个细节，直至完美无缺。</li>\n<li><strong>即时修正</strong>：如果某一时刻的表现不尽如人意，可以立即回溯并重新尝试，直到满意为止。</li>\n<li><strong>利用\nBUG</strong>：甚至会巧妙地利用游戏中存在的漏洞或特性，创造出令人惊叹的效果。比如使<a href=\"https://www.bilibili.com/video/BV1Ks411S7Fd\">《超级马里奥世界》</a>的内存溢出，提前加载出通关动画。</li>\n</ul>\n<p>最终成果是一个包含了所有最优操作序列的数据文件。除了追求最快通关外，还有一种叫做\nSuperplay 的 TAS 类型，专注于展示高超技艺而非单纯的速度，比如<a href=\"https://www.bilibili.com/video/BV16s41127MM\">超级马里奥一代 [最多金币] 世界记录</a>。</p>\n<p>最后提到的是 <strong>RTA（Real Time\nAttack）</strong>，这是一种纯粹基于人类实时反应的真实时间挑战。没有预录的操作、没有\nS/L 的机会，在这里，每一次按键都决定着成败。RTA\n考验的是选手们实际操作能力的巅峰表现。</p>\n<p>总之，无论你偏好哪一种方式，这些活动都展示了人们对游戏热爱的不同侧面，并且促进了社区之间的交流与进步。</p>\n<h2 id=\"主机游戏推荐\">主机游戏推荐</h2>\n<h3 id=\"纸片马里奥千年之门\">《纸片马里奥：千年之门》</h3>\n<p>《纸片马里奥：千年之门》（也被称为《纸片马里奥 RPG》）是一款 2004\n年发布的经典游戏，是任天堂 GameCube\n平台上的纸片马里奥系列的第二部作品。如果你渴望在电脑上重温这款佳作，你将需要一个\nNGC 模拟器，比如 <a href=\"https://cn.dolphin-emu.org/?cr=cn\">Dolphin</a>，以及该游戏的<a href=\"http://pan.baidu.com/s/18BIxs\">汉化版镜像文件</a>。通过配置独立显卡渲染，大部分玩家可以在自己的笔记本电脑上享受到流畅的游戏体验，即便偶尔会遇到一些小卡顿。另外，玩家还可以通过按\nTab\n键让模拟器内的游戏时间流速变快，减少跑路、过场动画、技能和战斗的后摇时间。</p>\n<p>这款游戏巧妙地结合了 2.5D\n视觉效果，利用固定视角、透视变换和场景旋转等手法来创造一种独特的立体感。游戏中的人物被设计为真实的 “纸片人”，这种创意让整个冒险过程充满了惊喜。</p>\n<p><img src=\"/blog/images/game/pm-1.gif\"></p>\n<p>《千年之门》的世界庞大且充满细节，尤其是那座名为 “巨大之树” 的地图，其复杂的结构很容易让人迷失方向。此外，无赖镇和下水道这样的区域几乎每一章都会出现，并逐渐解锁新的部分。要探索这些地方，玩家有时得变身为纸片、纸飞机或纸船，这不仅增加了游戏的乐趣，还考验着玩家的解谜技巧。</p>\n<p>角色成长系统围绕着\nHP（生命值）、FP（花点数，用于特殊技能）、BP（徽章点数，影响佩戴徽章的能力）和\nSP（战斗中观众给予的增益）展开。每次升级都需要累积 100\n个星星点数，而玩家可以自由选择强化哪一项属性。有趣的是，后期可以通过特定徽章来提升基础的\nHP 和 FP，因此不少玩家倾向于专注于增加 BP。</p>\n<p>游戏社区中流传着一种被称为 “五血流” 的激进策略：玩家故意将角色的生命值降至最低限度，然后换取在低血量下加成攻击力的徽章，以期在战斗中造成极大伤害。尽管我本人并未尝试这种方法，但我确实提升了常规跳跃攻击的威力，在某些关卡能够迅速结束战斗。</p>\n<p>如果你在游戏中遇到困难，不妨查阅<a href=\"https://jokerm.com/notes/gg/paper-mario-ttyd-story/\">相关攻略</a>，但请小心避免剧透。值得注意的是，现存的一些攻略可能基于\nSwitch\n重制版本，与原版存在差异。另外，游戏的故事情节并不落俗套；它超越了传统的勇者救公主模式，而且在每个章节之间，玩家甚至有机会操控反派角色及公主，增添了不少新鲜感。</p>\n<p>总之，《纸片马里奥：千年之门》以其创新的游戏机制、丰富的世界观以及非线性的叙事方式赢得了玩家们的喜爱，即使是在今天，依然值得一试。</p>\n<hr>\n<p>那个 72 是小时，中途看了五次以上游戏攻略。<a href=\"https://www.ign.com/game/paper-mario-the-thousand-year-door\">据说</a>推主线只用\n30 多个小时。</p>\n<p><img src=\"/blog/images/game/pm-2.webp\"></p>\n<h3 id=\"超级纸片马里奥\">《超级纸片马里奥》</h3>\n<p><a href=\"https://pan.baidu.com/s/1pERej\">《超级纸片马里奥》</a>作为纸片马里奥系列的第三部作品，给玩家带来了一次令人耳目一新的游戏体验。与前作采用的传统回合制战斗不同，这部\n2007 年登陆 Wii 平台的游戏让玩家重拾了经典的平台跳跃乐趣。Wii\n作为第七世代的游戏主机之一，以其独特的体感遥控器著称，为游戏增添了别样的互动方式。</p>\n<p>如果你想要重温或首次探索这款经典之作，但又没有 Wii 主机的话，使用\nDolphin\n模拟器是个不错的选择 —— 尽管这意味着你需要花点心思去配置按键映射来适应 PC\n操作，对于那些不愿意为此花费额外时间的人来说，购买一个兼容的手柄或许能够提供更加直接且流畅的游戏体验。</p>\n<p>这款游戏的一大特色就是其创新性的视角切换功能：只需轻按一个按钮，你就可以在\n2D 和 3D\n视图之间自由转换，这不仅极大地丰富了游戏的探索性和趣味性，还带来了许多令人惊喜的设计。</p>\n<p><img src=\"/blog/images/game/spm-1.gif\"></p>\n<p>不过，正如任何新奇尝试都可能遇到的问题一样，在某些情况下这种视角切换也可能导致意想不到的结果，比如角色意外地 “翻车”，这样的小插曲反而为冒险旅程增添了几分幽默感：</p>\n<p><img src=\"/blog/images/game/spm-2.gif\"></p>\n<p>无论是成功还是小小的失误，这些元素共同构成了《超级纸片马里奥》独一无二的魅力所在。</p>\n<h3 id=\"超级马里奥银河\">《超级马里奥银河》</h3>\n<ul>\n<li>主题：该游戏以宇宙、银河和星星为主题，将广袤的宇宙与温暖的人文关怀结合在一起，给玩家带来了一种独特的陪伴感。</li>\n<li>玩法：重力方向不是固定的，每一个星球有它自己的引力场，一般来说是人物站立的地方与重心的连线。</li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-ddxyh.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>操作上的技巧：\n<ul>\n<li>滞空：在跳起来的最高点晃一下右手柄</li>\n<li>助跑前空翻（三级跳）：在助跑连跳的第三次</li>\n<li>原地后空翻：蹲 + 跳，注意跳之前的脸朝向和高台相反</li>\n<li>侧翻：在回头的一瞬间跳</li>\n<li>远跳：前进时蹲 + 跳</li>\n<li>在跳跃高度上，助跑前空翻 &gt; 侧翻 ≳ 原地后空翻 &gt; 助跑二级跳 &gt;\n助跑 / 原地普通跳 &gt; 远跳</li>\n<li>水底游泳的脑袋朝向：左右是随手柄的，但是上下是反的。</li>\n</ul></li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-pfysyh.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>人体陀螺：</li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-top.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>局限性：出于 Wii\n机能和游戏制作理念和成本方面的限制，它的摄像机视角并不是完全自由的。</li>\n</ul>\n<p>如果不使用实体手柄，而是用海豚模拟器的按键映射玩的话，当我们想要使用手柄的 “指向” 功能与游戏中的部分对象交互时，比如收集星星碎片和拉牵引星的时候，可能会出现交互不了的情况。这时我们需要取消勾选这个选项：</p>\n<p><img src=\"/blog/images/game/smg-cpu-efb.webp\"></p>\n<h2 id=\"和平精英游戏操作二指转四指的心得\">《和平精英》游戏操作二指转四指的心得</h2>\n<p>当你在《和平精英》中从二指操作逐渐过渡到四指操作后，可能会发现一个有趣的现象：随着技术的提升，你遇到的对手似乎也都是四指高手。这种情况下，即便你的技巧有所提高，有时候还是难以战胜那些同样精通四指操作的玩家。这就像是一种奇妙的游戏平衡，当你因胜利而欢呼时，或许对面正因失败而懊恼；反之亦然。这就是所谓的 “摔手机守恒定律”（零和博弈）。现在和平精英是有一个进入前三还是前五就显示胜利了，你可以选择退出游戏。但是都开一局了，一般来说都是想拿第一的。</p>\n<p>在这种充满变数的竞争环境中，有些玩家会发展出一些奇特的行为模式来增添游戏的乐趣或发泄情绪。比如，在某局游戏中，有的玩家会选择开船返回出生岛绕一圈，或者驾车沿着沙漠公路环行，甚至利用汽车喇叭和枪声创造节奏感。更有甚者，他们会尝试挑战不捡任何物资就吃鸡这样的极限任务。这些行为虽然看起来奇怪，但并不算是消极游戏。</p>\n<p>真正的消极游戏行为则更为具体且有目的性。例如：</p>\n<ol type=\"1\">\n<li>在超体对抗模式下选择 “战地医师” 角色。</li>\n<li>与队友分开跳伞，并在他们无法迅速到达的地方放置医疗站并收集自救器。</li>\n<li>捡取大量药品，准备长时间待在毒圈边缘。</li>\n<li>寻找一位非 “闪电尖兵” 职业的队友，共同行动。</li>\n<li>当机会出现时，等待队友进入特定结构的房子 —— 那种只有一人身子宽出口的房间。</li>\n</ol>\n<p><img src=\"/blog/images/game/peace-1.webp\"></p>\n<ol start=\"6\" type=\"1\">\n<li>然后站在或是蹲在这个位置上，将队友卡在房间内无法动弹。</li>\n</ol>\n<p><img src=\"/blog/images/game/peace-2.webp\"></p>\n<p>这种情况下的堵门行为往往比普通模式下的同类事件更加令人沮丧。</p>\n","excerpt":"","more":"<p><img src=\"/blog/images/game/any.webp\"></p>\n<p>精神分析理论认为，游戏是一种通过主动控制情境来调节情绪、释放焦虑、补偿愿望的过程。认知发展理论认为，游戏创造着最近发展区。按体现孩子认知发展的水平来分类，可把游戏分为三个阶段：</p>\n<ul>\n<li>婴儿期的机能游戏：通过重复的动作来探索环境，发展身体能力，适应生活。如亲子互动，爬行，拍打玩具。</li>\n<li>幼儿期的象征性游戏：以经验为基础，通过想象和角色扮演赋予物体或动作象征意义。如过家家，假装打仗。</li>\n<li>童年期及以后的规则性游戏：强调合作，竞争和逻辑思维。如桌游和球类运动。</li>\n</ul>\n<h2 id=\"非电子游戏\">非电子游戏</h2>\n<p>寒暑假回老家玩的：</p>\n<p>用麻将砌房子</p>\n<p><img src=\"/blog/images/game/belfry.webp\"></p>\n<p>模仿电视打牌节目。用 26 个英文字母加一个 <span class=\"math inline\">\\(\\pi\\)</span>\n作为选手的名字，一人分饰 27 角附带记分：</p>\n<ol type=\"1\">\n<li>先给三位玩家发牌，如 A B C，留三张底牌</li>\n<li>每局的底分为 1，起始倍数为 1</li>\n<li> 在叫地主之前，每个人都有一次明牌的机会。明牌翻 8\n倍，且最先明牌的人有优先叫地主的权利。实现的方式是，把三个人的牌都理好之后，看有没有人牌是特别好的，有就明牌，并且抢占叫地主的优先级。可能只有这一条是无法做到公平的，因为你作为一个上帝视角，如果有两手好牌，你必定是有一个先后看到的顺序的，你无法模拟在现实里抢明牌的情况，只能选一个牌更好的人。</li>\n<li>开始叫地主。叫地主的顺序在每局结束之后轮换一下</li>\n<li>如果有人抢地主，翻 2\n倍。每人最多抢一次地主，也就是说，最先叫地主的人还有一次 “我抢” 的机会。同时，不叫的人是不能抢地主的。</li>\n<li>在叫地主和抢地主的时候，你必须站在每一位玩家的立场上，只根据他们自身持有的有限信息，来判断叫不叫牌。这时候底牌和其他人的牌是不能参考的，你要假装自己不知道。在局中的时候同理，除非有人明牌了。</li>\n<li>在地主确定之后，底牌才能翻开。这时候规定，中间一张底牌的点数加一的牌为癞子。如底牌的第二张是\nK，那么 A 为癞子；如果是 2 或者王，那么 3 为癞子。从这里我们可以看到，3\n为癞子的概率是 <span class=\"math inline\">\\(\\frac{6}{54}\\)</span>，4/.../2 为癞子的概率是\n<span class=\"math inline\">\\(\\frac{4}{54}\\)</span>，王不能当癞子</li>\n<li>作地主的人，在出第一手牌之前，额外有一次明牌的机会，如果他在之前没有明牌的话。</li>\n<li>软炸翻 2 倍，硬炸翻 4 倍，纯癞子炸翻 8 倍，春天翻 8\n倍，倍数上不封顶。在以前《影视智斗星》这个节目也是没有封顶倍数的，所以出现过中场负\n10000 分的情况，几乎能确定冠军，后面根本不用打了，它在 2008\n年左右大概叫《挑战大民星》之类的名字。我们这个游戏为了刺激和好玩，还是没有封顶倍数的，这可能存在一个人为了追分，在发第一张牌之后就会强行地明牌抢地主而不管自己的牌是好还是坏。</li>\n<li>一局结束之后，计分。如本局的倍数是 8\n倍，地主赢了，那么地主 + 16，农民 - 8。</li>\n<li>一桌打十局。所有桌打完之后，按分数共同参与排序。27 进 18，18 进 9，9\n进 3</li>\n</ol>\n<p>进阶的玩法是，可以给每一位选手设定一个性格。比如把 A\n设定成豪放的，B 设定成稳重的。</p>\n<p>自制什么棋：我还曾经把月饼和粽子盒子的内侧变成了奇幻地图，绘制了各种地形，并设置了前进、后退等行动指令。四个橡皮擦化身成勇敢的探险家，在投掷骰子之后按点数移动，目标是成为第一个到达终点的人。随着游戏的发展，邻居小孩也加入了进来，他们（事实上只有一个人）增加了金币和商店系统，使得这场冒险变得更加精彩纷呈。</p>\n<p>与好友共度的高中时光：进入高中后，我和一位朋友发明了几款不独特的纸笔游戏来打发时间：</p>\n<ul>\n<li>三维五子棋：我们利用作文本连续几页的页面来创造一种立体感，或者直接采用纯坐标的方式来进行对弈，给传统的平面五子棋带来了新的维度。由于二维的五子棋都有黑棋先手必胜的说法了，所以三维的可能是黑占大优的，但是我们只是试了一下，实际上它是不好玩的。坐标对弈的胜利判定条件是：一方有五个棋子的坐标三个分量分别都成了 - 1/0/1\n的等差数列。</li>\n<li>脑黑洞：这款游戏由朋友原创，一方画出某样东西\nA，另一方则要画出能够克制 A\n的东西，并且给出合理的解释。不论多么天马行空的想法，只要逻辑自洽就能成立，这样的互动既考验着我们的创造力也锻炼了解释能力。</li>\n<li>纸上谈兵：受到在线游戏<a href=\"https://tank-trouble.co/\">《Tank\nTrouble》</a>和<a href=\"https://www.4399.com/flash/220013_1.htm\">《MUTINY》</a>启发，我在物理实验课上构思出了这款战略游戏。玩家需要在回合开始前决定是进行移动还是攻击。移动就是按照所画路线行进，而攻击则要看线路是否能触及对手。游戏还引入了不同类型的单位，增添了战术层面的选择（现在都忘了）。</li>\n</ul>\n<p><img src=\"/blog/images/game/paper-attack.gif\"></p>\n<p>这些游戏不仅充实了我的童年与青少年时期，更是在没有高科技玩具的情况下，教会了我如何利用身边的一切去创造快乐。每当回忆起那些日子，心中总是充满温暖与感激。</p>\n<p>玩具：没有弹珠，所以打瓶盖，小时候把瓶盖装了一个鞋盒子；有一段时间玩过带发射器和链条的陀螺，说明我以前也不是不愿意花钱的；还买过游戏王的卡，但是在\n21 世纪 10\n年代里的、不知道第几次的童年告别仪式里被我扔了；扑克牌的玩法有斗地主、接竹竿和\n7 鬼\n523；还玩过象棋和五子棋，水平在知道规则的程度。五子棋应该可以和小白下平，用八卦阵就行了。</p>\n<p>象棋告诉我们的：拱一个卒，或者用车看两条线，在当前的这一步是没什么效果的，它的效果在后面才有；下限时的象棋可以锻炼决策能力。</p>\n<p>拍手游戏：在我转学前的那个环境里，这是一系列适合两人或多人参与的互动游戏的统称，结合了口令与手势，带有升级机制的回合制对决。玩家通过一只嘴和两只手掌来施展预先商定好的招式以克制对手。基础技能分为三大类：吸气、防御以及攻击。吸气是给自己加\n1MP，在使用攻击技能和部分高等级的防御技能需要消耗气。为了确保动作的一致性，在每个回合开始前，参与者需先拍手同步节奏；而在执行招式时，则需配合相应的手势与口号。</p>\n<p>大自然：虽然我老家在农村，但是我基本没有上山和下河玩过，没有对应的记忆。这张照片是\n2024 年拍的，人可以一次踏入两条河流：</p>\n<p><img src=\"/blog/images/game/river.webp\"></p>\n<p>控梦：有一段时间，我关注过清明梦的贴吧，甚至还有一段时间真的做了清醒梦，它多出现在睡回笼觉的时候，就是你的一部分意识可以意识到你在做梦，进而可以在梦里活动。分自由的活动和有限制的活动，我只能做到有限制的活动，比如在天上飞，飞起来之后保持不了太长的时间，总会受到地心引力下坠。但是后来都没在乎这个事了，梦也做得很少，也可能是做了忘了。《梦控师》这本书系统地介绍了做清明梦的方法。</p>\n<h3 id=\"川牌规则\">川牌规则</h3>\n<p>戳牌，即四川长牌。仅限于笔者祖父母和外祖父母那一带地区的玩法。</p>\n<p>牌面：21 种 x 4 张 = 84\n张牌。这里为了介绍，把长得一样的牌叫同种牌。两种黑八不算是同一种，因为长得不一样。</p>\n<ul>\n<li>正门：天牌（66 宋江）&gt; 地牌（11 公孙胜）&gt; 人牌（44 秦明）&gt;\n和牌（13 柴进）&gt;</li>\n<li> 长门：长三（33 武松）&gt; 梅十（55 董平）&gt; 板凳（22 鲁智深）</li>\n<li>幺门：疙瘩（15 徐宁）&gt; 幺七（16 索超）&gt; 四六（46 杨志）&gt;\n虎头（56 张清）</li>\n<li>点门：\n<ul>\n<li>黑点：黑九（36 吴用）&gt; 平八（26 林冲）、弯八（35 关胜）&gt;\n黑七（25 花荣）&gt; 黑五（23 朱仝）</li>\n<li>红点：红九（45 卢俊义）&gt; 红七（34 呼延灼）&gt; 红五（14\n李应）&gt;</li>\n</ul></li>\n<li> 猴：公猴 / 红三（12 戴宗）、母猴 / 红六（24 刘唐）</li>\n</ul>\n<p>牌型与比较系统：</p>\n<ul>\n<li>重叠牌型。同种牌出 1 张到 4 张\n<ul>\n<li>正门 + 长门算一个系统</li>\n<li>幺门算一个系统</li>\n<li>黑点算一个系统</li>\n<li>红点 + 猴算一个系统</li>\n<li>如：两张天牌可管两张人牌或两张梅十，但不能管一张梅十、两张黑九或两张幺七；黑九不能管红七。</li>\n</ul></li>\n<li>组合牌型。组合规则为：天九、地八、人七、和五。一张及以上的（天 / 地 / 人 / 和）牌与一张及以上的对应的（九点 / 八点 / 七点 / 五点）牌组合为\n2 至 12 张的组合牌，例如：\n<ul>\n<li>天牌 + 红九 + 黑九 + 黑九 = 四天九</li>\n<li>地牌 + 黑八 = 两地八</li>\n<li>人牌 + 人牌 + 红七 = 三人七</li>\n<li>和牌 + 和牌 + 红五 + 黑五 = 四和五</li>\n<li>这四种情况算一个系统</li>\n<li>如：四地八可管四人七、四和五，但不能管三人七或五和五。</li>\n</ul></li>\n</ul>\n<p>去向：分为手牌、桌面和积分堆。</p>\n<p>接牌时手牌按门类分为不同的列。</p>\n<ol type=\"1\">\n<li>顺序接牌，接到一对公母猴牌直接放到己方的积分堆。如果一对都不成，单猴单出被红点管；如果除了一对还有别的猴，也直接放到积分堆。</li>\n<li>按圈出牌，类似升级、拱猪，但不能垫牌。每一圈里能管必管，要求在同一个比较系统里，且张数相同。管不了时\npass\n<ul>\n<li>第一个接牌的人为首引</li>\n<li>一圈结束后，牌最大的一方把他在本圈出的一手牌放到己方的积分堆，并作为下一圈的领出</li>\n</ul></li>\n<li>仅一人未出完手牌时，本局结束。积分堆里牌张数最多的一方获胜。</li>\n</ol>\n<p>其他判定规则：如果一位玩家认为自己剩余的手牌全大，可以进行摊牌。三个人\n20 张算赢。如果摊牌失误，就是丢脸了。</p>\n<h3 id=\"打燕窝\">打燕窝</h3>\n<p>在郧阳区城关镇的西北方向上有一个堰河村，是 11\n路公交车的终点站，其所在地原名叫大堰。2001\n年，大堰乡被并入了城关镇，所以它现在属城关镇管辖。在堰河村的北面，230\n省道的堰河大桥路段，有一条小河叫仙人河，它是汉江支流的一个起端。</p>\n<p><img src=\"/blog/images/打燕窝地理位置.webp\"></p>\n<p>事实上在我站立的地方附近也是仙人河。从河长牌子上可以看到，这条河长达\n31.5\nkm。并且，在离仙人河牌子不远的地方，还有狮子河的牌子。但只有腾讯地图把它们标出来了，高德和百度地图都没标。</p>\n<p>在堰河大桥下河岸顺着水源方向走二十分钟左右，就能看到打燕窝。它是崖壁上自然形成的一个洞，站在岸边的人向里面扔石头祈福，如果扔进了，就预示着好运。</p>\n<p><img src=\"/blog/images/打燕窝.webp\"></p>\n<h2 id=\"单机游戏\">单机游戏</h2>\n<h3 id=\"摩托罗拉-c117-自定义铃声语法说明\">摩托罗拉 C117\n自定义铃声语法说明</h3>\n<p>我最早接触的电子设备，大概就是奶奶手中的那部手机了。这款手机诞生于\n2005\n年，它拥有一块单色屏幕，内置了三款小游戏 —— 黑白棋、小蜜蜂以及弹球，成了我当时探索数字世界的窗口。</p>\n<p><img src=\"/blog/images/game/C117.webp\"></p>\n<p>它还可以自定义铃声。在铃音类型 -&gt;\n我的铃音里可以自定义四首曲子，每首曲子的保存方式是一串 0 至 255\n字符的文本。音域在 F3 至 E7 之间。</p>\n<p>符号表：</p>\n<table>\n<colgroup>\n<col style=\"width: 28%\">\n<col style=\"width: 71%\">\n</colgroup>\n<thead>\n<tr>\n<th>符号</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> a #a b c #c d #d e f #f g #g</td>\n<td> 音级</td>\n</tr>\n<tr>\n<td> r</td>\n<td> 休止符</td>\n</tr>\n<tr>\n<td> *3 *4 *5 *6 *7</td>\n<td> 与音级右结合，指示之后的几个音级所在的分组。缺省为 4</td>\n</tr>\n<tr>\n<td>0 1 2 3 4 5</td>\n<td> 与音级或休止符左结合，指示该音符的时长，从全音符到 32 分音符。缺省为\n2</td>\n</tr>\n</tbody>\n</table>\n<p>如：</p>\n<ul>\n<li><code>*4a0</code>，它代表 A4 的全音符。</li>\n<li><code>*5a</code>，它和 <code>*5a2</code> 的语义相同，代表 A5\n的四分音符。</li>\n<li><code>*4#a1</code>，它代表 A#4 的二分音符。</li>\n<li><code>*4#ab3</code>，它代表一个 A#4 的四分音符和一个 B4\n的八分音符。</li>\n</ul>\n<p>输入方式：</p>\n<ul>\n<li>上下键：*3f *3#f *3g 至 *7#d *7e</li>\n<li>1 键：1 . : ;\n在它的帮助里显示可以输入附点音符，但是笔者没有测试成功它的语法。</li>\n<li>2 键：a b c 2</li>\n<li>3 键：d e f 3</li>\n<li>4 键：g 4</li>\n<li>5 键：5</li>\n<li>6 键：6</li>\n<li>7 键：r 7</li>\n<li>8 键：8</li>\n<li>9 键：( ) @ 9</li>\n<li>0 键：0 * # &amp;</li>\n<li>* 键：光标左移</li>\n<li># 键：光标右移</li>\n</ul>\n<p>示例：《万象霜天》的开头部分。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bbbb#g#g#g*5e#c*4b*5#c*4#g*5#c#c#c*4b*5#c#c#ce#c*4b*5#ce#f#g#f#fee#d#d*4bb*5#c1r1*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r#g1rb*7#c3*6b3#g1r#f1rer*6b*7#c1*6b1r*7#c#c3*6b3#g1r#f1r#g1b1r*7#c1re#f3e3</span><br></pre></td></tr></tbody></table></figure>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/moto.mp4\" type=\"video/mp4\">\n</video>\n<p>这里为了易读，添加了空格、换行</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*5e#c*4b*5#c *4#g*5#c#c#c *4b*5#c#c#c e#c*4b*5#c</span><br><span class=\"line\">太初太易 无相无形 莫知浊重 孰辨清轻</span><br><span class=\"line\">绵绵若存 用之不勤 礼乐即作 仁义乃兴</span><br><span class=\"line\"></span><br><span class=\"line\">e#f#g#f #fee#d #d*4bbb b#g#g#g</span><br><span class=\"line\">生乎混沌 分其昏明 天得以健 地得以宁</span><br><span class=\"line\"></span><br><span class=\"line\">e#f#g#f #fee#d #d*4bb*5#c1 r1</span><br><span class=\"line\">我有此言 众妙之门 万类咸听</span><br><span class=\"line\"></span><br><span class=\"line\">*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r #g1r b*7#c3*6b3#g1r #f1r er</span><br><span class=\"line\"></span><br><span class=\"line\">*6b*7#c1*6b1r *7#c#c3*6b3#g1r #f1r #g1b1r *7#c1r e#f3e3</span><br></pre></td></tr></tbody></table></figure>\n<p>最后一段以 *7 开始，#f7 超出音域了，所以响的是音域内的最高音 E7。</p>\n<h3 id=\"pc-windows\">PC-Windows</h3>\n<p>大约在 2008\n年，我在十堰市上小学。信息技术课是我最早接触电脑的地方，那时电脑里装有金山打字通，里面有一个警察追小偷的游戏。从那时起，我的性格就显得格外倔强。记得有一次，教室里有一台无法启动的电脑，而其他电脑都已经正常开机了。尽管如此，我却坚持在这台故障电脑前不停地按键尝试，不肯放弃。最终，在我的不懈努力下，那台电脑竟然被我成功启动了。然而，就在那一刻，下课铃声也响了起来。</p>\n<p>2010 年至 2012\n年，我住在县城的一间地下室里。那时家里唯一的信息设备除了手机就是一台收音机、一台没有接线的大头电视，偶尔还有一段短暂的时间给电视接线了。每个周末，父亲都会带我去他的单位玩电脑，那是我们最快乐的时光。在那台没有联网的\nXP\n系统电脑上，有一个游戏叫《合金弹头合集》，它收集了《合金弹头》的一至五（1996-2003）。面对这个新奇的游戏，我和父亲都感到茫然，不知该如何下手。于是，我决定采用最直接的方法 —— 遍历法，逐一尝试键盘上的每一个按键。经过一番摸索，我意外地发现\n1 键是用来开始游戏和投币的，WASD 则控制角色移动，而 JKLUIO\n分别对应开枪、跳跃和扔手雷等功能。不仅如此，通过不断的尝试与探索，我还发现按\n1+2\n键可以调出游戏的作弊面板，在那里可以开启无限手雷等强大功能。在此之前，我从未接触过如此复杂的键位设置，而且我们的电脑也没有联网，无法访问像\n4399 这样的游戏网站，英文自然也看不懂。</p>\n<p><img src=\"/blog/images/game/metal-slug.webp\"></p>\n<p>后来有一天晚上放学回家，我发现家里多了一个箱子。由于从 2010\n年开始我就有了社交恐惧症，我不敢直接询问箱子里装的是什么，但偷偷摸了一下，听到了鼠标点击的声音。不久之后，这台电脑就被组装了起来：VGA\n接口的显示器、PS/2 接口的鼠标和键盘，以及一个需要插三根线的小音响。</p>\n<p>约 2012\n年末，在我小学六年级的那段日子里，家里终于接通了有线网络。每次打开电脑都需要在宽带连接中输入账号密码才能上网。为了限制我玩游戏的时间，父亲还特意设置了开机密码。但我有一次偷看了父亲输入密码的过程，然后用遍历法试了出来。后来，我又发现了可以在\nBIOS 中清空密码的方法。某次，我在电脑上看到了一个叫做 “一键\nGHOST” 的程序，出于好奇想试一试，结果不小心将整个 C\n盘的数据 “归零” 了，幸好其他盘中的文件还在。这些经历不仅记录了我的成长轨迹，也见证了我的好奇心和不断探索的精神。</p>\n<p>我曾深深沉迷于《植物大战僵尸》（2009），每天中午上学前都会准时为禅境花园里的植物们浇水，那份小小的仪式感成为了日常的一部分。为了探索游戏的无限可能，我还下载过各种修改器。其中最难忘的一次体验，莫过于释放了一整排全屏的火爆辣椒，那一刻，所有的僵尸瞬间被清空，那种震撼至今仍然历历在目。通过修改器的帮助，我还解锁了游戏中那些未曾正式发布的隐藏关卡，让我得以一窥游戏背后更多不为人知的秘密。我还曾动手修改过游戏汉化包中的一个文本文件，试图给植物们换上新的名字。虽然由于字符限制，新名字并不总是完整呈现，但这种创造性的尝试依然给我带来了极大的乐趣。</p>\n<p>《愤怒的小鸟：星球大战\n2》（2013）至少陪伴我度过了两次冒险旅程。有一次，在干妈家再次下载了这款游戏。那段时间里，由于社交焦虑（就像近十年来的状态一样），我的世界几乎完全被电脑占据。虽然这样的生活充满了矛盾 —— 既有游戏带来的快乐，也有内心的孤独与挣扎。</p>\n<p>在电脑开始菜单的附件游戏中，《Microsoft\n网上红心大战》给我留下了深刻的印象。尽管名字中带有 “网上” 二字，但实际上无需联网也能玩。这是我首次体验按花色出牌的游戏规则。游戏设定为一人对抗三名电脑对手，每局结束时玩家得分通常为负数或零分，正分极为少见。后来玩过《拱猪》之后，我才发现这个游戏实际上是从《红心大战》演变而来的。此外，我还曾在扫雷网上上传了自己的游戏录像，尽管我的技术水平连业余都算不上。有趣的是，为了录制这些视频，还需要下载专门的竞赛用软件，而不是使用电脑自带的扫雷程序。</p>\n<h3 id=\"自制超级马里奥地图\">自制超级马里奥地图</h3>\n<p>SMX（2006）贴吧的关注人数现在和十年前（2014\n年）相比几乎没有变化，一直都是几百人左右。即使在十年前，SMX\n也已经是一个过气的项目了，因为相比之下，SMBX（2009）的地图编辑器更加成熟，其贴吧的关注人数超过了一千人。那时，我甚至还不明白什么是主机游戏，自然也就错过了《超级马里奥制造》的消息。初中时期的\n2014 年左右，我在这样一个逐渐被人遗忘的环境中投入了大量的时间来制作 SMX\n的地图，主要是为了逃避现实。那些精心设计的无趣地图至今仍保存在我的\nGitHub 仓库中。</p>\n<blockquote>\n<p>这是当今我觉得唯一有意思的一张。就像现在这个网站一样，再过几年我就会觉得它一点意思也没有了。</p>\n</blockquote>\n<p><img src=\"/blog/images/game/smx.gif\"></p>\n<p>如今，SMX 本体在其<a href=\"http://www.gsksoft.cn/smx/index.html\">作者\nGsk 的网站</a>上已经无法下载了。如果你现在想在 Windows 10\n下运行它的地图播放器，你还需要额外注册 <code>dx7vb.dll</code>\n用于播放声音。而它的地图编辑器会报依赖错误，你或许还需要去配 VB\n的环境，不知道应该怎么办。</p>\n<p>同年，我通过优酷网（或类似的视频平台）上一位名叫独翼神龙的播主分享的链接，下载了\nFC\n模拟器和《超级马里奥兄弟》（1985）。后来，我又下载了一个可以修改《超级马里奥兄弟》NES\n文件的地图编辑器。尽管没有多少美感和设计思路，我还是乐此不疲地制作了好几个改版\nROM。从那时起，我就开始间歇性地回忆起童年的美好时光。我的第一个无趣的视频是在酷\n6 网上发布的，因此数字 6 对我来说有着特殊的意义。</p>\n<h3 id=\"主机游戏\">主机游戏</h3>\n<p>大约在 2008\n年，父亲买了一个带卡带的键盘，里面配有两种卡：学习卡和游戏卡。这个键盘通过\nCVBS\n接口的三条线连接到家里的大头电视上，用于显示图像和声音。此外，还配备了两个使用\nDB9\n串口线的手柄，供我们玩游戏。学习卡可以用来练习五笔打字，而游戏卡则包含了一些经典的\nFC\n游戏，如《超级马里奥兄弟》、足球游戏以及一系列与奥运会相关的游戏。</p>\n<p>那个键盘后来被带到了老家，最终被收了起来。最后，我像拆解收音机和其他旧物一样，将它拆解了，这似乎成了我与那段永远回不去的童年的告别仪式。</p>\n<p>除了那个卡带上的 FC 游戏和网上的一些超马一代改版，其他 FC\n游戏印象深刻的只有《成龙之龙》（1991）和《超级马里奥兄弟\n3》（1988）。随后的日子里，我又下载了 NDS\n模拟器。在这个模拟器中，我主要玩了《马里奥赛车\nDS》（2005）和《新超级马里奥兄弟》（2006）。尤其是《马里奥赛车\nDS》，那条令人印象深刻的彩虹赛道至今仍让我回味无穷。这些游戏不仅丰富了我的业余时间，也成为了我童年记忆中不可或缺的一部分。</p>\n<h3 id=\"网页-flash\">网页 - Flash</h3>\n<p>之所以将 Flash 游戏归类为单机游戏，是因为除了在 4399、7k7k\n等知名网站上可以在线游玩外，这些游戏还可以下载后在本地运行。它们通常以<code>.swf</code> 文件的形式存在，只需使用\nIE 浏览器调用 Adobe Flash Player\n打开即可，尽管每次打开前都需要忽略一遍浏览器的安全警告。</p>\n<p>记得父亲曾在那台没有联网、仅配备 2G 内存的 Windows XP 电脑上，通过 U\n盘传输了一些 Flash\n游戏给我。那些简单的游戏成为了我童年的一部分，带给我无数欢乐时光。十年之后，正是在这台老旧的操作系统下，我用\nVegas 10\n剪辑出了一段播放量达到几十万的视频。这段经历不仅见证了技术的进步，也记录了我对游戏和创作的热爱。</p>\n<h3 id=\"电视与机顶盒\">电视与机顶盒</h3>\n<p>以前在奶奶家的非智能老式液晶电视上玩过奥赛罗棋。后续还有一个能玩游戏的\nIPTV 机顶盒，上面有一些可以用遥控器玩的游戏，甚至还有一款养成类的\nGalGame。我还在上面看了《纸片马里奥・千年之门》的实况，所以所有执念都是有原因的。</p>\n<h2 id=\"手机游戏回顾\">手机游戏回顾</h2>\n<p>单机游戏：</p>\n<ul>\n<li>《水果忍者》（2010）：在这款游戏中，你可以尽情挥刀切水果，享受简单而畅快的切割乐趣。</li>\n<li>《2048》：通过数字拼接挑战你的耐力极限，这款游戏看似简单却能让人沉迷其中，不断追求更高的分数。</li>\n<li>《别踩白块儿》（2014）：这是一款音乐游戏，玩家需要跟随节奏快速点击屏幕上的方块，体验音乐与反应速度的完美结合。</li>\n<li>《纪念碑谷》（2014）：唯美画面与精妙视错觉相结合，带你进入一个充满奇幻色彩的世界。每一关都是一次视觉与智力的双重盛宴。</li>\n<li>《物理画线》：通过巧妙地画线，引导小球顺利滚入杯中。这款游戏不仅考验玩家的创造力，还锻炼了逻辑思维和物理直觉。</li>\n<li>《曲中剑》（2022）：将中国古典音乐与武侠元素完美融合，让你在优美的旋律中体验流畅的剑术对决，感受传统文化的魅力。</li>\n<li>《艾希》（2017）：独特的叙事风格和战斗体验，尤其是那个令人印象深刻的旁白，让整个游戏过程充满了趣味和惊喜。</li>\n</ul>\n<p>艾希（ICEY）是一款多平台的游戏。里面有几个非常有意思的地方（剧透预警）：</p>\n<ol type=\"1\">\n<li>在里面有一个让你做出选择的房间。但不管最后你选择哪个选项，它必定会是错误的选择</li>\n<li>人物的名字刚开始是艾希，后来触发事件之后变成佑希。在全部通关之后，它会变成你最开始输入的名字。</li>\n</ol>\n<p>联网游戏：</p>\n<ul>\n<li>《玩吧》：多样化的社交娱乐游戏，代表是你画我猜。</li>\n<li>《JJ\n比赛》（2007-）：丰富的棋牌游戏选择，包括斗地主、升级、麻将、台球、中国象棋、干瞪眼等。以前甚至还有德州扑克和拼三张。</li>\n<li>《贪吃蛇大作战》：经典的 io 游戏。</li>\n</ul>\n<h2 id=\"古早网络游戏回忆\">古早网络游戏回忆</h2>\n<blockquote>\n<p>1994-2000：从四大门户到搜索<br> 2001-2009：从搜索到社交化网络<br>\n2010-2018：移动互联网和自媒体</p>\n</blockquote>\n<ul>\n<li>WAP 文字游戏：《3GQQ 幻想西游》（约\n2006-2013）是我最早接触的网络游戏。现在网上还存在一些可以玩的<a href=\"http://3gyx.cn/\">复刻版本</a>。还有一些文字版的游戏：QQ\n农场、牧场等，父亲也喜欢玩，以前的网络加载一个页面要一分钟。</li>\n<li>QQ 宠物：QQ 宠物和《大乐斗\nⅡ》（2010-2018）曾是我的虚拟伙伴。在《大乐斗\nⅡ》中，有一个被动技能，可以让宠物有\n15% 的概率在死后复活。记得有一次，我的运气特别好，在一局游戏中这个技能竟然触发了三次，让我惊喜不已。</li>\n<li>QQ 游戏：老版的《欢乐斗地主》（2008-）、《你画我猜》和《TNT\n弹道轨迹》（2011-2018）等游戏陪伴了我无数个日夜。现在，《谁是卧底》依然是\nQQ 游戏中存活的一员。</li>\n<li>网页游戏：我玩过的第一款也是唯一一款网页 FPS\n游戏是《创世兵魂》（2012-2018），它在 2018\n年底停服 —— 而那时《绝地求生：刺激战场》已经风靡一时。</li>\n</ul>\n<h2 id=\"和平精英战略与战术指南\">《和平精英》战略与战术指南</h2>\n<p>在《和平精英》这款由腾讯光子工作室群精心打造的 FPS\n手游中，玩家将体验到与端游《绝地求生》（PUBG）相似的紧张刺激。为了在这场生存竞赛中脱颖而出，不仅需要精准的射击技巧，还需要高明的战略和灵活的战术。下面，让我们一起来看看如何提升你的游戏表现。</p>\n<p>战略篇：</p>\n<ol type=\"1\">\n<li>声音辨位的艺术：在特训岛上，你可以专门训练听声辨位的能力。2D\n环境下的声音定位通常是新手能够掌握的基本技能。室内的声音定位包括：\n<ul>\n<li>如果听到的声音比较沉闷，那敌人很可能位于你上方；</li>\n<li>清脆但略带沉闷的声音提示敌人可能在下层；</li>\n<li>清晰且带有风声或颗粒感的声音意味着敌人就在同一层；</li>\n<li>当声音似乎直接从头顶传来时，说明有人在楼顶活动。</li>\n</ul></li>\n<li>团队合作的重要性：在随机匹配的游戏中，队友往往不会开启语音交流。这时，你需要主动扮演团队中的黏合剂角色，跟随一位队友行动，适时提供支援，共同进退。</li>\n<li>辅助瞄准的双刃剑：辅助瞄准功能可以快速帮助新玩家上手，但它可能会削弱玩家自行调整准星追踪目标的能力。如果你已经掌握了拉枪技巧，不妨尝试关闭辅助瞄准，以提高自己的反应速度和精确度。（我胡说的）</li>\n<li>多指操作的巧妙运用：传统二指操作限制了视角转换与射击的同时进行。采用三指乃至四指操作可以让移动、瞄准、开火等动作更加流畅自如。</li>\n</ol>\n<ul>\n<li>左手大拇指：控制角色移动</li>\n<li>右手大拇指：转动视角、蹲趴跳</li>\n<li>左手食指：开火</li>\n<li>右手食指：探头和开镜</li>\n</ul>\n<p>战术篇：</p>\n<ol type=\"1\">\n<li>利用地形优势：第三人称视角给予玩家信息上的不对称优势，利用墙壁、树木、车辆等作为掩体，卡住视角观察对手而不被发现。烟雾弹也是转移位置时的好帮手，但在未暴露的情况下使用反而会暴露行踪。</li>\n<li>优先处理紧急情况：当遭遇近距离威胁时，应立即转而应对；如果正在救助队友而敌人逼近，则需先确保自身安全再考虑救援；面对多个方向的威胁时，要根据具体情况判断哪个威胁最为紧迫，并优先解决。</li>\n<li>高处制胜：占据高地如山顶或屋顶，能让你拥有更广阔的视野和攻击角度，但也要小心成为显眼的目标。</li>\n<li>精准射击的小贴士</li>\n</ol>\n<ul>\n<li>远距离射击时采取蹲姿或趴姿有助于减少武器后坐力的影响。</li>\n<li>对于近身作战，保持静止仅用视角转向来锁定目标可提高命中率。</li>\n<li>UMP45\n冲锋枪搭配直角握把和三倍镜是中近距离战斗的理想选择；而对于极近距离交战，全自动霰弹枪\nAA12-G 则是不二之选。（我胡说的）</li>\n</ul>\n<ol start=\"5\" type=\"1\">\n<li>灵活机动，迷惑对手：打一枪换一个地方的原则虽然简单，执行起来却要求玩家具备敏锐的战场感知能力。通过不断变换位置，你能让敌人难以捉摸你的动向，从而为自己争取更多存活的机会。</li>\n</ol>\n<p>记住，在《和平精英》的世界里，每一次成功的背后都是无数次练习的结果。希望以上这些策略能够帮助你在游戏中取得更好的成绩！</p>\n<h2 id=\"金手指tas-与-rta游戏中的不同通关艺术\">金手指、TAS 与\nRTA：游戏中的不同通关艺术</h2>\n<p>在电子游戏的世界里，玩家们追求着各种各样的成就。从简单的作弊到极限竞速，不同的玩家有着各自的目标和方法。其中，“金手指”、“TAS” 以及 “RTA” 就是三种具有代表性的玩法。</p>\n<p><strong>金手指</strong>这个名字听起来颇具神秘色彩，它实际上是指一种通过修改游戏内存来达到作弊目的的技术。想象一下，当你能够随意改变游戏内的数值时，无论是无限生命还是无敌状态，一切皆有可能。但这种做法显然破坏了游戏的平衡性和挑战性。</p>\n<p>相比之下，<strong>TAS（Tool-Assisted\nSpeedrun）</strong>则显得更加精致而专业。TAS\n意为工具辅助下的速度挑战。这里的 “工具” 并不是指直接干预游戏内部数据，而是指一系列高级技巧和工具，帮助玩家探索理论上最佳的游戏完成方式。TAS\n过程包括：</p>\n<ul>\n<li><strong>精确记录</strong>：每一步操作都被详细记录下来，就像电影导演精心安排每一帧的画面。</li>\n<li><strong>慢动作重播</strong>：使用模拟器让游戏逐帧运行，允许玩家微调每一个细节，直至完美无缺。</li>\n<li><strong>即时修正</strong>：如果某一时刻的表现不尽如人意，可以立即回溯并重新尝试，直到满意为止。</li>\n<li><strong>利用\nBUG</strong>：甚至会巧妙地利用游戏中存在的漏洞或特性，创造出令人惊叹的效果。比如使<a href=\"https://www.bilibili.com/video/BV1Ks411S7Fd\">《超级马里奥世界》</a>的内存溢出，提前加载出通关动画。</li>\n</ul>\n<p>最终成果是一个包含了所有最优操作序列的数据文件。除了追求最快通关外，还有一种叫做\nSuperplay 的 TAS 类型，专注于展示高超技艺而非单纯的速度，比如<a href=\"https://www.bilibili.com/video/BV16s41127MM\">超级马里奥一代 [最多金币] 世界记录</a>。</p>\n<p>最后提到的是 <strong>RTA（Real Time\nAttack）</strong>，这是一种纯粹基于人类实时反应的真实时间挑战。没有预录的操作、没有\nS/L 的机会，在这里，每一次按键都决定着成败。RTA\n考验的是选手们实际操作能力的巅峰表现。</p>\n<p>总之，无论你偏好哪一种方式，这些活动都展示了人们对游戏热爱的不同侧面，并且促进了社区之间的交流与进步。</p>\n<h2 id=\"主机游戏推荐\">主机游戏推荐</h2>\n<h3 id=\"纸片马里奥千年之门\">《纸片马里奥：千年之门》</h3>\n<p>《纸片马里奥：千年之门》（也被称为《纸片马里奥 RPG》）是一款 2004\n年发布的经典游戏，是任天堂 GameCube\n平台上的纸片马里奥系列的第二部作品。如果你渴望在电脑上重温这款佳作，你将需要一个\nNGC 模拟器，比如 <a href=\"https://cn.dolphin-emu.org/?cr=cn\">Dolphin</a>，以及该游戏的<a href=\"http://pan.baidu.com/s/18BIxs\">汉化版镜像文件</a>。通过配置独立显卡渲染，大部分玩家可以在自己的笔记本电脑上享受到流畅的游戏体验，即便偶尔会遇到一些小卡顿。另外，玩家还可以通过按\nTab\n键让模拟器内的游戏时间流速变快，减少跑路、过场动画、技能和战斗的后摇时间。</p>\n<p>这款游戏巧妙地结合了 2.5D\n视觉效果，利用固定视角、透视变换和场景旋转等手法来创造一种独特的立体感。游戏中的人物被设计为真实的 “纸片人”，这种创意让整个冒险过程充满了惊喜。</p>\n<p><img src=\"/blog/images/game/pm-1.gif\"></p>\n<p>《千年之门》的世界庞大且充满细节，尤其是那座名为 “巨大之树” 的地图，其复杂的结构很容易让人迷失方向。此外，无赖镇和下水道这样的区域几乎每一章都会出现，并逐渐解锁新的部分。要探索这些地方，玩家有时得变身为纸片、纸飞机或纸船，这不仅增加了游戏的乐趣，还考验着玩家的解谜技巧。</p>\n<p>角色成长系统围绕着\nHP（生命值）、FP（花点数，用于特殊技能）、BP（徽章点数，影响佩戴徽章的能力）和\nSP（战斗中观众给予的增益）展开。每次升级都需要累积 100\n个星星点数，而玩家可以自由选择强化哪一项属性。有趣的是，后期可以通过特定徽章来提升基础的\nHP 和 FP，因此不少玩家倾向于专注于增加 BP。</p>\n<p>游戏社区中流传着一种被称为 “五血流” 的激进策略：玩家故意将角色的生命值降至最低限度，然后换取在低血量下加成攻击力的徽章，以期在战斗中造成极大伤害。尽管我本人并未尝试这种方法，但我确实提升了常规跳跃攻击的威力，在某些关卡能够迅速结束战斗。</p>\n<p>如果你在游戏中遇到困难，不妨查阅<a href=\"https://jokerm.com/notes/gg/paper-mario-ttyd-story/\">相关攻略</a>，但请小心避免剧透。值得注意的是，现存的一些攻略可能基于\nSwitch\n重制版本，与原版存在差异。另外，游戏的故事情节并不落俗套；它超越了传统的勇者救公主模式，而且在每个章节之间，玩家甚至有机会操控反派角色及公主，增添了不少新鲜感。</p>\n<p>总之，《纸片马里奥：千年之门》以其创新的游戏机制、丰富的世界观以及非线性的叙事方式赢得了玩家们的喜爱，即使是在今天，依然值得一试。</p>\n<hr>\n<p>那个 72 是小时，中途看了五次以上游戏攻略。<a href=\"https://www.ign.com/game/paper-mario-the-thousand-year-door\">据说</a>推主线只用\n30 多个小时。</p>\n<p><img src=\"/blog/images/game/pm-2.webp\"></p>\n<h3 id=\"超级纸片马里奥\">《超级纸片马里奥》</h3>\n<p><a href=\"https://pan.baidu.com/s/1pERej\">《超级纸片马里奥》</a>作为纸片马里奥系列的第三部作品，给玩家带来了一次令人耳目一新的游戏体验。与前作采用的传统回合制战斗不同，这部\n2007 年登陆 Wii 平台的游戏让玩家重拾了经典的平台跳跃乐趣。Wii\n作为第七世代的游戏主机之一，以其独特的体感遥控器著称，为游戏增添了别样的互动方式。</p>\n<p>如果你想要重温或首次探索这款经典之作，但又没有 Wii 主机的话，使用\nDolphin\n模拟器是个不错的选择 —— 尽管这意味着你需要花点心思去配置按键映射来适应 PC\n操作，对于那些不愿意为此花费额外时间的人来说，购买一个兼容的手柄或许能够提供更加直接且流畅的游戏体验。</p>\n<p>这款游戏的一大特色就是其创新性的视角切换功能：只需轻按一个按钮，你就可以在\n2D 和 3D\n视图之间自由转换，这不仅极大地丰富了游戏的探索性和趣味性，还带来了许多令人惊喜的设计。</p>\n<p><img src=\"/blog/images/game/spm-1.gif\"></p>\n<p>不过，正如任何新奇尝试都可能遇到的问题一样，在某些情况下这种视角切换也可能导致意想不到的结果，比如角色意外地 “翻车”，这样的小插曲反而为冒险旅程增添了几分幽默感：</p>\n<p><img src=\"/blog/images/game/spm-2.gif\"></p>\n<p>无论是成功还是小小的失误，这些元素共同构成了《超级纸片马里奥》独一无二的魅力所在。</p>\n<h3 id=\"超级马里奥银河\">《超级马里奥银河》</h3>\n<ul>\n<li>主题：该游戏以宇宙、银河和星星为主题，将广袤的宇宙与温暖的人文关怀结合在一起，给玩家带来了一种独特的陪伴感。</li>\n<li>玩法：重力方向不是固定的，每一个星球有它自己的引力场，一般来说是人物站立的地方与重心的连线。</li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-ddxyh.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>操作上的技巧：\n<ul>\n<li>滞空：在跳起来的最高点晃一下右手柄</li>\n<li>助跑前空翻（三级跳）：在助跑连跳的第三次</li>\n<li>原地后空翻：蹲 + 跳，注意跳之前的脸朝向和高台相反</li>\n<li>侧翻：在回头的一瞬间跳</li>\n<li>远跳：前进时蹲 + 跳</li>\n<li>在跳跃高度上，助跑前空翻 &gt; 侧翻 ≳ 原地后空翻 &gt; 助跑二级跳 &gt;\n助跑 / 原地普通跳 &gt; 远跳</li>\n<li>水底游泳的脑袋朝向：左右是随手柄的，但是上下是反的。</li>\n</ul></li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-pfysyh.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>人体陀螺：</li>\n</ul>\n<video controls=\"\" width=\"100%\">\n<source src=\"/blog/video/smg-top.mp4\" type=\"video/mp4\">\n</video>\n<ul>\n<li>局限性：出于 Wii\n机能和游戏制作理念和成本方面的限制，它的摄像机视角并不是完全自由的。</li>\n</ul>\n<p>如果不使用实体手柄，而是用海豚模拟器的按键映射玩的话，当我们想要使用手柄的 “指向” 功能与游戏中的部分对象交互时，比如收集星星碎片和拉牵引星的时候，可能会出现交互不了的情况。这时我们需要取消勾选这个选项：</p>\n<p><img src=\"/blog/images/game/smg-cpu-efb.webp\"></p>\n<h2 id=\"和平精英游戏操作二指转四指的心得\">《和平精英》游戏操作二指转四指的心得</h2>\n<p>当你在《和平精英》中从二指操作逐渐过渡到四指操作后，可能会发现一个有趣的现象：随着技术的提升，你遇到的对手似乎也都是四指高手。这种情况下，即便你的技巧有所提高，有时候还是难以战胜那些同样精通四指操作的玩家。这就像是一种奇妙的游戏平衡，当你因胜利而欢呼时，或许对面正因失败而懊恼；反之亦然。这就是所谓的 “摔手机守恒定律”（零和博弈）。现在和平精英是有一个进入前三还是前五就显示胜利了，你可以选择退出游戏。但是都开一局了，一般来说都是想拿第一的。</p>\n<p>在这种充满变数的竞争环境中，有些玩家会发展出一些奇特的行为模式来增添游戏的乐趣或发泄情绪。比如，在某局游戏中，有的玩家会选择开船返回出生岛绕一圈，或者驾车沿着沙漠公路环行，甚至利用汽车喇叭和枪声创造节奏感。更有甚者，他们会尝试挑战不捡任何物资就吃鸡这样的极限任务。这些行为虽然看起来奇怪，但并不算是消极游戏。</p>\n<p>真正的消极游戏行为则更为具体且有目的性。例如：</p>\n<ol type=\"1\">\n<li>在超体对抗模式下选择 “战地医师” 角色。</li>\n<li>与队友分开跳伞，并在他们无法迅速到达的地方放置医疗站并收集自救器。</li>\n<li>捡取大量药品，准备长时间待在毒圈边缘。</li>\n<li>寻找一位非 “闪电尖兵” 职业的队友，共同行动。</li>\n<li>当机会出现时，等待队友进入特定结构的房子 —— 那种只有一人身子宽出口的房间。</li>\n</ol>\n<p><img src=\"/blog/images/game/peace-1.webp\"></p>\n<ol start=\"6\" type=\"1\">\n<li>然后站在或是蹲在这个位置上，将队友卡在房间内无法动弹。</li>\n</ol>\n<p><img src=\"/blog/images/game/peace-2.webp\"></p>\n<p>这种情况下的堵门行为往往比普通模式下的同类事件更加令人沮丧。</p>\n"},{"title":"经济常识","date":"2024-08-13T01:00:00.000Z","_content":"\n小时候基本不愿意花钱。一直到今年七月玩游戏都能把金币攒到 999 一直到往上加不动，能用技能就不买道具。\n\n参考：公考通 APP 里的题目、MBA 智库百科、百度百科、通义千问等。\n\n## 实例\n\n有三个厨子 A、B、C 在三家面馆里，假设社会上只有这三家面馆和这三个厨子，我们把这个社会记作面国。\n\n他们平均下一碗面要 5 分钟，这叫社会必要劳动时间。每分钟平均下 0.2 碗面，这叫社会劳动生产率。\n\nA 下一碗面要 4 分钟，这叫个别劳动时间。A 每分钟平均下 0.25 碗面，这叫个别劳动生产率。\n\n如果他们平均下一碗面要 50 分钟，每分钟平均下 0.02 碗面，这时候面就值钱了，因为没有别的面馆。这叫社会劳动生产率与商品价值成反比。价格是价值的尺度（数值表示），由市场供需关系决定，需大于供价格上升。\n\n面国的面火了，大家都想吃，但是面国只有三家面馆。面馆通过增加不同类型的面条满足更多顾客需求，引入自动化设备，创新菜品等方法提高供给结构对需求变化的适应性和灵活性，这叫供给侧结构改革。\n\n原来这三家面馆统一 5 块钱一碗面，后来 C 面馆改成 5 毛钱一碗了。于是厨子 A 和 B 做不下去了，辞职跑到米国了。C 这叫掠夺性定价。\n\n厨子 A 和 B 辞职之后，他们面馆的厨师岗位还在，但是面国除了 C 以外没有人会下面。对于不会下面的人来说，这叫结构性就业问题。\n\n厨子 A 和 B 跑到米国之后，发现米国没有面馆。对于 A 和 B 来说，这叫摩擦性就业问题。\n\n面国向米国出口面，从米国进口米。如果面国的出口收入大于进口支出，这叫面国有贸易顺差。\n\n## 成本\n\n沉没成本：你运货的船由于你的某一次决策沉了，且永远也捞不上来了。\n\n机会成本（鱼与熊掌）：为了干一件事，你舍弃了一个可能赚多少钱的机会。在做出多选择决策时，被舍弃选项中的最高价值。\n\n比较优势（扬长避短）：在干你有优势的事上，你的机会成本比别人低。\n\n固定成本/不变成本：短期内不随产量变化的成本。如补偿机器设备无形损耗的折旧费。\n\n可变成本：直接随产量变化的成本。如原料。\n\n边际成本：新增一单位产量，增加的成本。\n\n边际就是一阶导数。产量和一些其他的东西导致总成本变化，这时候边际成本就是总成本对产量的偏导数，总成本受产量影响的程度。\n\n价格应定在边际成本上（曲高和寡），意思是：价格不能订得过高，要不买的人少；也不能订得过低，要么自己亏了。\n\n边际效用递减（戈森第一定律）：你听歌听多了会感到没意思。听歌时间-有意思图像是上凸函数，二阶导数为负，一阶导数递减。\n\n边际效用均等（戈森第二定律）：你听歌没意思了，要么去找更新奇的歌，要么去打游戏，要么干别的。有一些想干的事，想的程度不同，先干最想干的，直到干所有事的边际效用相等。\n\nPPI（生产者价格指数，Producer Price Index）：PPI 上升，生产成本增加。\n\n## 商品\n\n供给是卖方在“各个价格”之下希望卖出的商品数量，表现为供给曲线；供给量是卖方在“特定价格”下希望卖出的商品数量，表现为供给曲线上的一点。\n\n供给曲线是供给量-价格曲线，斜率为正。商品价格变动引起供给量变动，逻辑是：点在供给曲线上的纵坐标变大导致横坐标变大，较高的价格鼓励生产者提供更多商品。\n\n供给变动指：整条供给曲线的移动。如生产成本变低，卖方在各个价格之下愿意提供的商品变多了，供给曲线向右移动。\n\n使用价值：对于一个商品，满足人们某种需要的效用。\n\n价值悖论：使用价值和交换价值存在反差。钻石与水悖论：水的使用价值大，交换价值小。钻石的使用价值小，交换价值大。\n\n凡勃伦效应：为满足奢侈心理。价格越高需求量越大。\n\n互补商品：需求互相依赖，有了一个就要有另一个。一个价格提高导致另一个需求下降。如羽毛球和羽毛球拍。\n\n替代商品：没有一个可以有另一个。一个价格提高导致另一个需求上升。如牛肉和羊肉。\n\n价格弹性系数：价格变化有多大程度上能影响供给量/需求量的变化。如食盐的需求量稳定，需求的价格弹性系数几乎为零。\n\n商品供给的价格弹性系数：供给量的变化率/价格的变化率。\n\n商品需求的价格弹性系数：需求量的变化率/价格的变化率。\n\n## 物品\n\n竞争性：竞争体验。单人使用和多人使用体验不一样。\n\n排他性：排除未付费的人使用该物品。需要付费。\n\n- 私人物品（竞争体验且花钱）：有竞争性，有排他性。如冰激凌，你和别人竞争吃的体验（不会和别人一起吃），需要花钱买。\n- 公有资源（只竞争体验，不花钱）：有竞争性，无排他性。如拥挤的不收费道路，你和别人竞争道路畅通的体验，不用花钱。\n- 自然垄断物（只花钱，不竞争体验）：无竞争性，有排他性。如你家用电多少不会影响别人的体验，要花钱。\n- 公共物品（不竞争体验且不花钱）：无竞争性，无排他性。如国防，单人和多人使用的体验一样，不用花钱。\n\n## 劳动成果\n\n社会总产值：所有物质生产部门生产出的产品和服务的总价值，包括重复计算的中间产品的价值。\n\n国民收入：生产过程中新创造的价值，也就是扣除掉原材料消耗和资本折旧之后的净价值。包括工资、租金、利息、利润等，反映了劳动力和资本的收入。国民收入的计算一般采用收入法，即通过加总所有生产单位的收入来得出。\n\n社会总产值和国民收入都只计算五大物质生产部门（农业、工业、建筑业、货运邮电业、批零餐饮业）的劳动成果，不包括非物质生产部门（如电影票房）。\n\n[国内生产总值（GDP，Gross Domestic Product）](https://www.stats.gov.cn/xxgk/sjfb/zxfb2020/202404/t20240429_1948771.html)：衡量一个国家或地区在一定时期内生产出所有最终商品和服务市场价值的总和。拉动 GDP 的三驾马车：投资、消费、出口。\n\n[国民总收入（GNI，Gross National Income）](https://www.stats.gov.cn/zs/tjws/tjzb/202301/t20230101_1903832.html) = GDP + 来自国外的要素收入净额 = GDP + (来自国外的要素收入 - 付给国外的要素收入)\n\n## 分配\n\n工资黏性：工资不能随劳动关系的变动而迅速的变动。\n\n生产要素：土地、劳动力、资本、技术、数据。\n\n按生产要素分配：土地入股、股东分红。\n\n基尼系数：收入分配不平均的程度，在 0 和 1 之间。\n\n## 消费\n\n恩格尔系数：买食物的钱/花的所有钱。恩格尔定律：随着收入增加，恩格尔系数减小。\n\n相对收入消费理论：示范效应（受周围人影响）、消费惯性（维持或提高消费水平）、棘轮效应（消费水平提高就很难再降下来，即使收入降低）。长期消费回归直线过原点，短期消费曲线有正截距。\n\n消费者买境外商品属于消费行为，不算资本跨国运作。\n\nCPI（居民消费价格指数，Consumer Price Index）：CPI 上升，消费者购买力下降，是观察通货膨胀水平的指标。\n\n一般情况：PPI 上升 -> 企业为保持利润率提高商品价格 -> CPI 上升。\n\n剪刀差：PPI 与 CPI 走势背离。\n\n## 投机\n\n货币投机需求：指人们出于投机目的而持有的货币量，是持有的，不是花出去的。\n\n利率：回报程度\n\n市场利率上升导致货币投机需求减少，逻辑是：人们在利率大时预期利率会反弹，于是在反弹之前（意思是我在第二层）把持有的货币换成别的资产，如债券。\n\n小数定律/赌徒谬误：大样本上掷硬币的规律的正反各一半，于是人们倾向于在一个小样本里往规律靠，比如前三次都是正面，人们会倾向于第四次是反面。实际上每一次都是独立的。\n\n囚徒困境：个人的最佳选择并非团体的最佳选择。单人招时为本人最大利益，但两人都招时不是团体最大利益。属于非零和博弈。\n\n权衡取舍：田忌赛马。\n\n外部性：你的决策使外人受损或受益。\n\n## 风险\n\n投资组合（狡兔三窟）：投资人或金融机构同时持有股票、债券、期货等产品，分散风险，不把鸡蛋放到同一个篮子里。\n\n黑天鹅（以前见过的天鹅是白的）：难以预测、产生重大影响、事件发生后，人们会找到各种理由解释为什么它会发生。\n\n灰犀牛（体型庞大，行动迟缓）：潜在影响大，能够被预测甚至习以为常，往往被忽视或低估，发生是一个漫长过程（气候变化、病毒传播）（千里之堤，溃于蚁穴）\n\n黑天鹅的背后都有一个灰犀牛。在预测到的人看来是灰犀牛，没预测到的人看来是黑天鹅。共同点是影响巨大。\n\n## 市场\n\n市场主体：参与交易的人或机构。市场客体：交易的对象（商品、服务）\n\n市场体系的三大支柱\n\n- 商品市场（基础地位，其他市场为商品市场服务）\n- 资本市场（货币是所有资源的一般代表形式）（股票市场和债券市场）\n- 劳动力市场（招聘平台）\n\n## 无形手\n\n看不见的手由亚当·斯密在《国富论》中提出，提倡自由竞争，反对政府干预。科斯定理：只要产权明确且交易成本足够低，市场机制本身就能解决外部性问题，无需政府干预。\n\n农产品市场最接近完全竞争市场，看不见的手（市场自带的规律）最大。最接近但不等于，因为有发改委、粮食和物资储备局制定粮食最低收购价格，有政府干预的称为看得见的手（宏观调控）。\n\n一价定律：在完全竞争市场上（贸易开放，交易费用为零）。同样的货物在各个地方销售用同一货币表示的价格相同。\n\n## 有形手\n\n宏观调控分经济手段、行政手段和法律手段。\n\n- 经济上行：需求量增多\n- 经济下行：需求量减少\n\n- 扩张性经济政策（需小于供时，经济过冷，增加需求）：让市场里流通的货币量增多。市场外 -> 市场里\n  - 扩张性财政政策：如政府增加财政支出、减税、发国债\n  - 扩张性货币政策：如中央银行在金融市场上买国债\n- 紧缩性经济政策（需大于供时，经济过热，抑制需求）与其相反。市场里 -> 市场外\n\n凯恩斯主义主张扩张性经济政策，增加需求。\n\n逆周期调节：旱则资舟，水则资车。\n\n---\n\n政府发国债、中央银行买国债：扩张型（向市场里注入新的货币）。\n\n中央银行出售国债：紧缩性（市场里 -> 银行）。\n\n政府财政支出【正比】，增加财政支出，在市场里的增多。扩张型。\n\n所得税【反比】：降税，在市场里的增多。扩张型。\n\n存款利率【反比】：降低存款利率，降低存款需求，在市场里的增多。扩张型。\n\n贷款利率【反比】：降低贷款利率，增加贷款需求，在市场里的增多。扩张型。\n\n存款准备金率【反比】：商业银行把存款的一部分上交给中央银行。如：中央银行下调存款准备金率时，商业银行可用资金增多，贷款上升，货币供应量增多，通货膨胀，属于扩张型货币政策。\n\n贴现率【反比】：票据持有者在商业银行把票据换成现金（贴现）时，需要支付利息。如：降低贴现率时，贴现意愿增多，取出来在市场上流通的钱增多，属于扩张型货币政策。\n\n---\n\n城镇化发展模式：\n\n- 美国：市场经济 > 政府干预\n- 中国：市场经济 = 政府干预\n- 欧洲、日本、韩国：市场经济 < 政府干预\n- 拉美国家：受殖民地经济制约，工业化速度比城镇化慢\n\n十五大报告指出：国有经济控制国民经济命脉，对经济起主导作用。体现在对经济发展的控制力和市场竞争力。\n\n[国家财政收入中最主要的是税收](https://gks.mof.gov.cn/tongjishuju/202407/t20240722_3939942.htm)。\n\n预算赤字：提前定好的。预算中支出超过收入的部分。\n\n赤字率：预算赤字占 GDP 的比重。政府财政赤字对整个经济的影响程度。\n\n我国财税制度的发展经历了三个阶段：中央管、地方管、中央和地方共管。\n\n## 政策\n\n3456，保补入免\n\n- 2003：耕地保护\n- 2004：粮食直补\n- 2005：农业科技入户\n- 2006：免农业税\n\n## 经济\n\n基础是农业，主导是工业。\n\n[GB/T 4754—2017](https://www.stats.gov.cn/xxgk/tjbz/gjtjbz/201710/P020200612582987902992.PDF)\n\n- 第一产业：农林牧渔。\n- 第二产业：采矿、制造、能源生产供应、建筑。\n- 第三产业：服务业，包括辅助第一二产业的服务业。\n\n第一次全国经济普查在 04 年，每 5 年一次。只调查第二、三产业。\n\n实体经济：直接参与到物质产品和服务生产、流通的活动。物质的、精神的（教育、知识、信息与通信、文体艺）产品和服务的生产、流通。\n\n虚拟经济：通过金融手段和市场机制实现价值增值的活动。金融业、房地产业、体育经济（体育赛事的组织、转播权，职业电竞比赛）、博彩业、收藏业。\n\n循环经济 3R 原则\n\n- 减量化（reduce）：减少资源消耗\n- 再使用（reuse）：使生产的产品耐用\n- 再循环（recycle）：垃圾回收\n\n经济全球化会加剧金融风险。\n\n产业空心化是指以制造业为中心的物质生产和资本大量迅速转移到国外，造成国内物质生产和非物质生产的比例严重失衡。\n\n## 电子商务\n\nB：Business 商家\n\nC：Customer 客户\n\nO：Online/Offline 线上/线下\n\nP：Production/...\n\nT：Team 团队\n\n## 贷款和存款\n\n贷款就是借钱。借 400 在一年之内要还 450，这叫贷款年利率为 0.125\n\n民法典第六百八十三条：以公益为目的的非营利法人、非法人组织不得为保证人。\n\nLPR（Loan Prime Rate）贷款基础利率，或称贷款市场报价利率，由中国人民银行授权中国外汇交易中心（全国银行间同业拆借中心）计算并公布的基础性的贷款参考利率，[每月 20 日左右公布](https://www.chinamoney.com.cn/chinese/lllpr/)。\n\n贷款分固定利率和浮动利率，固定利率不受 LPR 影响，浮动利率要等到下一个重定价日根据最近一个月的 LPR 加点定价。\n\n商业银行资金构成（通义）：\n\n- 存款：客户存入银行的款项，是银行最大的资金来源。\n- 资本金：银行股东投入的资本和留存收益。\n- 借款：银行从其他金融机构或金融市场借入的资金。\n- 储备金：包括法定存款准备金和超额准备金。\n- 其他资金来源：如发行债券、同业拆借等。\n\n利息是资本使用权转让的报酬，是资本这一生产要素的价格，由资本市场的供求双方决定。\n\n个人银行账户分一类户、二类户和三类户。手笔从大到小。\n\n## 保险\n\n居民社保：医疗、养老。\n\n职工社保：医疗、养老、生育、工伤、失业。\n\n保险人不得兼营人身保险业务和财产保险业务。财产保险业务包括：实物财产损失保险、责任保险、信用保险等。\n\n存款保险制度起源于 1933 年大萧条之后的美国。\n\n存款保险的投保方：吸收存款的商业银行、农村信用合作社等金融机构；承保方：中国存款保险基金管理有限责任公司；受益方：存款人，即储户。\n\n银行把储户存款的一部分交给存款保险基金公司，如果银行钱不够了，由存款保险基金公司提供财务救助或者直接向存款人支付全部或部分存款。\n\n## 货币\n\n外汇：别国货币，或者能兑换成别国货币的东西。\n\n汇率（外币兑换本币的汇率）：1 外币 = 多少本币\n\n人民币对美元汇率：等值美元/等值人民币 = 0.几\n\n人民币【兑】美元汇率：等值人民币/等值美元 = 7 左右\n\n人民币对美元升值：汇率下降（用人民币兑美元的汇率上升），有利于进口（用人民币换美元换得多），不利于出口（用美元换人民币换得少）。\n\n一国货币相对于另一国货币升值：它在本国用本币对应的商品会降价，在他国用他币对应的商品会涨价。\n\n本国出现国际收支顺差：国际收支上收入大于支出 -> 增加了外汇市场上的外汇供给 -> 外汇供大于求 -> 外币贬值本币升值。\n\n## 股票\n\n阳线（红/白）：收盘价高于开盘价的 K 线。阴线（绿/黑）：收盘价低于开盘价的 K 线。\n\n股息贴现模型：股票价格 = 股息/银行利率\n\n银行利率提高，更愿意存钱，不愿意买股票，股票价格下降。\n\n## 公司\n\n[各类市场主体设立登记条件](https://www.samr.gov.cn/djzcj/zcfg/qt/art/2023/art_70e46c8e986047a0aef313015586db7a.html)\n\n- 股东会：权力机关，类似人大。\n- 董事会：执行机关，类似国务院。召开股东会，任免经理。经理对董事会负责。\n- 监事会：监察机关，类似监委。监事不得由董事和高管兼任。\n\n## 国际\n\n我国作为非成员国参与的政府间国际组织有：东盟（东南亚国家联盟、ASEAN）。[东盟连续 4 年保持中国第一大贸易伙伴地位（2024.1）](http://world.people.com.cn/n1/2024/0114/c1002-40158550.html)\n\n- 1857 年第一次世界性经济危机出现在美国，原因是生产过剩。1861 年爆发南北战争\n- 1945 年联合国成立，国民党政权加入\n- 1971 年恢复联合国合法席位\n- 1991 年加入亚太经合组织 APEC\n- 1992 成为不结盟运动的观察员国\n- 2001 年加入世界贸易组织 WTO\n- 2013 年与欧洲大陆国家签署了首个自由贸易协定（瑞士）\n\n联合国常任理事国：中美俄法英\n\n联合国官方语言：中英俄法西阿\n\n欧盟成员国里使用欧元的各国不能制定独立的货币政策，必须符合欧洲中央银行的整体政策要求。不用欧元的成员国（丹麦、瑞典等）除外。\n","source":"_posts/经济常识.md","raw":"---\ntitle: 经济常识\ndate: 2024-8-13 09:00:00\npermalink: economics.html\n---\n\n小时候基本不愿意花钱。一直到今年七月玩游戏都能把金币攒到 999 一直到往上加不动，能用技能就不买道具。\n\n参考：公考通 APP 里的题目、MBA 智库百科、百度百科、通义千问等。\n\n## 实例\n\n有三个厨子 A、B、C 在三家面馆里，假设社会上只有这三家面馆和这三个厨子，我们把这个社会记作面国。\n\n他们平均下一碗面要 5 分钟，这叫社会必要劳动时间。每分钟平均下 0.2 碗面，这叫社会劳动生产率。\n\nA 下一碗面要 4 分钟，这叫个别劳动时间。A 每分钟平均下 0.25 碗面，这叫个别劳动生产率。\n\n如果他们平均下一碗面要 50 分钟，每分钟平均下 0.02 碗面，这时候面就值钱了，因为没有别的面馆。这叫社会劳动生产率与商品价值成反比。价格是价值的尺度（数值表示），由市场供需关系决定，需大于供价格上升。\n\n面国的面火了，大家都想吃，但是面国只有三家面馆。面馆通过增加不同类型的面条满足更多顾客需求，引入自动化设备，创新菜品等方法提高供给结构对需求变化的适应性和灵活性，这叫供给侧结构改革。\n\n原来这三家面馆统一 5 块钱一碗面，后来 C 面馆改成 5 毛钱一碗了。于是厨子 A 和 B 做不下去了，辞职跑到米国了。C 这叫掠夺性定价。\n\n厨子 A 和 B 辞职之后，他们面馆的厨师岗位还在，但是面国除了 C 以外没有人会下面。对于不会下面的人来说，这叫结构性就业问题。\n\n厨子 A 和 B 跑到米国之后，发现米国没有面馆。对于 A 和 B 来说，这叫摩擦性就业问题。\n\n面国向米国出口面，从米国进口米。如果面国的出口收入大于进口支出，这叫面国有贸易顺差。\n\n## 成本\n\n沉没成本：你运货的船由于你的某一次决策沉了，且永远也捞不上来了。\n\n机会成本（鱼与熊掌）：为了干一件事，你舍弃了一个可能赚多少钱的机会。在做出多选择决策时，被舍弃选项中的最高价值。\n\n比较优势（扬长避短）：在干你有优势的事上，你的机会成本比别人低。\n\n固定成本/不变成本：短期内不随产量变化的成本。如补偿机器设备无形损耗的折旧费。\n\n可变成本：直接随产量变化的成本。如原料。\n\n边际成本：新增一单位产量，增加的成本。\n\n边际就是一阶导数。产量和一些其他的东西导致总成本变化，这时候边际成本就是总成本对产量的偏导数，总成本受产量影响的程度。\n\n价格应定在边际成本上（曲高和寡），意思是：价格不能订得过高，要不买的人少；也不能订得过低，要么自己亏了。\n\n边际效用递减（戈森第一定律）：你听歌听多了会感到没意思。听歌时间-有意思图像是上凸函数，二阶导数为负，一阶导数递减。\n\n边际效用均等（戈森第二定律）：你听歌没意思了，要么去找更新奇的歌，要么去打游戏，要么干别的。有一些想干的事，想的程度不同，先干最想干的，直到干所有事的边际效用相等。\n\nPPI（生产者价格指数，Producer Price Index）：PPI 上升，生产成本增加。\n\n## 商品\n\n供给是卖方在“各个价格”之下希望卖出的商品数量，表现为供给曲线；供给量是卖方在“特定价格”下希望卖出的商品数量，表现为供给曲线上的一点。\n\n供给曲线是供给量-价格曲线，斜率为正。商品价格变动引起供给量变动，逻辑是：点在供给曲线上的纵坐标变大导致横坐标变大，较高的价格鼓励生产者提供更多商品。\n\n供给变动指：整条供给曲线的移动。如生产成本变低，卖方在各个价格之下愿意提供的商品变多了，供给曲线向右移动。\n\n使用价值：对于一个商品，满足人们某种需要的效用。\n\n价值悖论：使用价值和交换价值存在反差。钻石与水悖论：水的使用价值大，交换价值小。钻石的使用价值小，交换价值大。\n\n凡勃伦效应：为满足奢侈心理。价格越高需求量越大。\n\n互补商品：需求互相依赖，有了一个就要有另一个。一个价格提高导致另一个需求下降。如羽毛球和羽毛球拍。\n\n替代商品：没有一个可以有另一个。一个价格提高导致另一个需求上升。如牛肉和羊肉。\n\n价格弹性系数：价格变化有多大程度上能影响供给量/需求量的变化。如食盐的需求量稳定，需求的价格弹性系数几乎为零。\n\n商品供给的价格弹性系数：供给量的变化率/价格的变化率。\n\n商品需求的价格弹性系数：需求量的变化率/价格的变化率。\n\n## 物品\n\n竞争性：竞争体验。单人使用和多人使用体验不一样。\n\n排他性：排除未付费的人使用该物品。需要付费。\n\n- 私人物品（竞争体验且花钱）：有竞争性，有排他性。如冰激凌，你和别人竞争吃的体验（不会和别人一起吃），需要花钱买。\n- 公有资源（只竞争体验，不花钱）：有竞争性，无排他性。如拥挤的不收费道路，你和别人竞争道路畅通的体验，不用花钱。\n- 自然垄断物（只花钱，不竞争体验）：无竞争性，有排他性。如你家用电多少不会影响别人的体验，要花钱。\n- 公共物品（不竞争体验且不花钱）：无竞争性，无排他性。如国防，单人和多人使用的体验一样，不用花钱。\n\n## 劳动成果\n\n社会总产值：所有物质生产部门生产出的产品和服务的总价值，包括重复计算的中间产品的价值。\n\n国民收入：生产过程中新创造的价值，也就是扣除掉原材料消耗和资本折旧之后的净价值。包括工资、租金、利息、利润等，反映了劳动力和资本的收入。国民收入的计算一般采用收入法，即通过加总所有生产单位的收入来得出。\n\n社会总产值和国民收入都只计算五大物质生产部门（农业、工业、建筑业、货运邮电业、批零餐饮业）的劳动成果，不包括非物质生产部门（如电影票房）。\n\n[国内生产总值（GDP，Gross Domestic Product）](https://www.stats.gov.cn/xxgk/sjfb/zxfb2020/202404/t20240429_1948771.html)：衡量一个国家或地区在一定时期内生产出所有最终商品和服务市场价值的总和。拉动 GDP 的三驾马车：投资、消费、出口。\n\n[国民总收入（GNI，Gross National Income）](https://www.stats.gov.cn/zs/tjws/tjzb/202301/t20230101_1903832.html) = GDP + 来自国外的要素收入净额 = GDP + (来自国外的要素收入 - 付给国外的要素收入)\n\n## 分配\n\n工资黏性：工资不能随劳动关系的变动而迅速的变动。\n\n生产要素：土地、劳动力、资本、技术、数据。\n\n按生产要素分配：土地入股、股东分红。\n\n基尼系数：收入分配不平均的程度，在 0 和 1 之间。\n\n## 消费\n\n恩格尔系数：买食物的钱/花的所有钱。恩格尔定律：随着收入增加，恩格尔系数减小。\n\n相对收入消费理论：示范效应（受周围人影响）、消费惯性（维持或提高消费水平）、棘轮效应（消费水平提高就很难再降下来，即使收入降低）。长期消费回归直线过原点，短期消费曲线有正截距。\n\n消费者买境外商品属于消费行为，不算资本跨国运作。\n\nCPI（居民消费价格指数，Consumer Price Index）：CPI 上升，消费者购买力下降，是观察通货膨胀水平的指标。\n\n一般情况：PPI 上升 -> 企业为保持利润率提高商品价格 -> CPI 上升。\n\n剪刀差：PPI 与 CPI 走势背离。\n\n## 投机\n\n货币投机需求：指人们出于投机目的而持有的货币量，是持有的，不是花出去的。\n\n利率：回报程度\n\n市场利率上升导致货币投机需求减少，逻辑是：人们在利率大时预期利率会反弹，于是在反弹之前（意思是我在第二层）把持有的货币换成别的资产，如债券。\n\n小数定律/赌徒谬误：大样本上掷硬币的规律的正反各一半，于是人们倾向于在一个小样本里往规律靠，比如前三次都是正面，人们会倾向于第四次是反面。实际上每一次都是独立的。\n\n囚徒困境：个人的最佳选择并非团体的最佳选择。单人招时为本人最大利益，但两人都招时不是团体最大利益。属于非零和博弈。\n\n权衡取舍：田忌赛马。\n\n外部性：你的决策使外人受损或受益。\n\n## 风险\n\n投资组合（狡兔三窟）：投资人或金融机构同时持有股票、债券、期货等产品，分散风险，不把鸡蛋放到同一个篮子里。\n\n黑天鹅（以前见过的天鹅是白的）：难以预测、产生重大影响、事件发生后，人们会找到各种理由解释为什么它会发生。\n\n灰犀牛（体型庞大，行动迟缓）：潜在影响大，能够被预测甚至习以为常，往往被忽视或低估，发生是一个漫长过程（气候变化、病毒传播）（千里之堤，溃于蚁穴）\n\n黑天鹅的背后都有一个灰犀牛。在预测到的人看来是灰犀牛，没预测到的人看来是黑天鹅。共同点是影响巨大。\n\n## 市场\n\n市场主体：参与交易的人或机构。市场客体：交易的对象（商品、服务）\n\n市场体系的三大支柱\n\n- 商品市场（基础地位，其他市场为商品市场服务）\n- 资本市场（货币是所有资源的一般代表形式）（股票市场和债券市场）\n- 劳动力市场（招聘平台）\n\n## 无形手\n\n看不见的手由亚当·斯密在《国富论》中提出，提倡自由竞争，反对政府干预。科斯定理：只要产权明确且交易成本足够低，市场机制本身就能解决外部性问题，无需政府干预。\n\n农产品市场最接近完全竞争市场，看不见的手（市场自带的规律）最大。最接近但不等于，因为有发改委、粮食和物资储备局制定粮食最低收购价格，有政府干预的称为看得见的手（宏观调控）。\n\n一价定律：在完全竞争市场上（贸易开放，交易费用为零）。同样的货物在各个地方销售用同一货币表示的价格相同。\n\n## 有形手\n\n宏观调控分经济手段、行政手段和法律手段。\n\n- 经济上行：需求量增多\n- 经济下行：需求量减少\n\n- 扩张性经济政策（需小于供时，经济过冷，增加需求）：让市场里流通的货币量增多。市场外 -> 市场里\n  - 扩张性财政政策：如政府增加财政支出、减税、发国债\n  - 扩张性货币政策：如中央银行在金融市场上买国债\n- 紧缩性经济政策（需大于供时，经济过热，抑制需求）与其相反。市场里 -> 市场外\n\n凯恩斯主义主张扩张性经济政策，增加需求。\n\n逆周期调节：旱则资舟，水则资车。\n\n---\n\n政府发国债、中央银行买国债：扩张型（向市场里注入新的货币）。\n\n中央银行出售国债：紧缩性（市场里 -> 银行）。\n\n政府财政支出【正比】，增加财政支出，在市场里的增多。扩张型。\n\n所得税【反比】：降税，在市场里的增多。扩张型。\n\n存款利率【反比】：降低存款利率，降低存款需求，在市场里的增多。扩张型。\n\n贷款利率【反比】：降低贷款利率，增加贷款需求，在市场里的增多。扩张型。\n\n存款准备金率【反比】：商业银行把存款的一部分上交给中央银行。如：中央银行下调存款准备金率时，商业银行可用资金增多，贷款上升，货币供应量增多，通货膨胀，属于扩张型货币政策。\n\n贴现率【反比】：票据持有者在商业银行把票据换成现金（贴现）时，需要支付利息。如：降低贴现率时，贴现意愿增多，取出来在市场上流通的钱增多，属于扩张型货币政策。\n\n---\n\n城镇化发展模式：\n\n- 美国：市场经济 > 政府干预\n- 中国：市场经济 = 政府干预\n- 欧洲、日本、韩国：市场经济 < 政府干预\n- 拉美国家：受殖民地经济制约，工业化速度比城镇化慢\n\n十五大报告指出：国有经济控制国民经济命脉，对经济起主导作用。体现在对经济发展的控制力和市场竞争力。\n\n[国家财政收入中最主要的是税收](https://gks.mof.gov.cn/tongjishuju/202407/t20240722_3939942.htm)。\n\n预算赤字：提前定好的。预算中支出超过收入的部分。\n\n赤字率：预算赤字占 GDP 的比重。政府财政赤字对整个经济的影响程度。\n\n我国财税制度的发展经历了三个阶段：中央管、地方管、中央和地方共管。\n\n## 政策\n\n3456，保补入免\n\n- 2003：耕地保护\n- 2004：粮食直补\n- 2005：农业科技入户\n- 2006：免农业税\n\n## 经济\n\n基础是农业，主导是工业。\n\n[GB/T 4754—2017](https://www.stats.gov.cn/xxgk/tjbz/gjtjbz/201710/P020200612582987902992.PDF)\n\n- 第一产业：农林牧渔。\n- 第二产业：采矿、制造、能源生产供应、建筑。\n- 第三产业：服务业，包括辅助第一二产业的服务业。\n\n第一次全国经济普查在 04 年，每 5 年一次。只调查第二、三产业。\n\n实体经济：直接参与到物质产品和服务生产、流通的活动。物质的、精神的（教育、知识、信息与通信、文体艺）产品和服务的生产、流通。\n\n虚拟经济：通过金融手段和市场机制实现价值增值的活动。金融业、房地产业、体育经济（体育赛事的组织、转播权，职业电竞比赛）、博彩业、收藏业。\n\n循环经济 3R 原则\n\n- 减量化（reduce）：减少资源消耗\n- 再使用（reuse）：使生产的产品耐用\n- 再循环（recycle）：垃圾回收\n\n经济全球化会加剧金融风险。\n\n产业空心化是指以制造业为中心的物质生产和资本大量迅速转移到国外，造成国内物质生产和非物质生产的比例严重失衡。\n\n## 电子商务\n\nB：Business 商家\n\nC：Customer 客户\n\nO：Online/Offline 线上/线下\n\nP：Production/...\n\nT：Team 团队\n\n## 贷款和存款\n\n贷款就是借钱。借 400 在一年之内要还 450，这叫贷款年利率为 0.125\n\n民法典第六百八十三条：以公益为目的的非营利法人、非法人组织不得为保证人。\n\nLPR（Loan Prime Rate）贷款基础利率，或称贷款市场报价利率，由中国人民银行授权中国外汇交易中心（全国银行间同业拆借中心）计算并公布的基础性的贷款参考利率，[每月 20 日左右公布](https://www.chinamoney.com.cn/chinese/lllpr/)。\n\n贷款分固定利率和浮动利率，固定利率不受 LPR 影响，浮动利率要等到下一个重定价日根据最近一个月的 LPR 加点定价。\n\n商业银行资金构成（通义）：\n\n- 存款：客户存入银行的款项，是银行最大的资金来源。\n- 资本金：银行股东投入的资本和留存收益。\n- 借款：银行从其他金融机构或金融市场借入的资金。\n- 储备金：包括法定存款准备金和超额准备金。\n- 其他资金来源：如发行债券、同业拆借等。\n\n利息是资本使用权转让的报酬，是资本这一生产要素的价格，由资本市场的供求双方决定。\n\n个人银行账户分一类户、二类户和三类户。手笔从大到小。\n\n## 保险\n\n居民社保：医疗、养老。\n\n职工社保：医疗、养老、生育、工伤、失业。\n\n保险人不得兼营人身保险业务和财产保险业务。财产保险业务包括：实物财产损失保险、责任保险、信用保险等。\n\n存款保险制度起源于 1933 年大萧条之后的美国。\n\n存款保险的投保方：吸收存款的商业银行、农村信用合作社等金融机构；承保方：中国存款保险基金管理有限责任公司；受益方：存款人，即储户。\n\n银行把储户存款的一部分交给存款保险基金公司，如果银行钱不够了，由存款保险基金公司提供财务救助或者直接向存款人支付全部或部分存款。\n\n## 货币\n\n外汇：别国货币，或者能兑换成别国货币的东西。\n\n汇率（外币兑换本币的汇率）：1 外币 = 多少本币\n\n人民币对美元汇率：等值美元/等值人民币 = 0.几\n\n人民币【兑】美元汇率：等值人民币/等值美元 = 7 左右\n\n人民币对美元升值：汇率下降（用人民币兑美元的汇率上升），有利于进口（用人民币换美元换得多），不利于出口（用美元换人民币换得少）。\n\n一国货币相对于另一国货币升值：它在本国用本币对应的商品会降价，在他国用他币对应的商品会涨价。\n\n本国出现国际收支顺差：国际收支上收入大于支出 -> 增加了外汇市场上的外汇供给 -> 外汇供大于求 -> 外币贬值本币升值。\n\n## 股票\n\n阳线（红/白）：收盘价高于开盘价的 K 线。阴线（绿/黑）：收盘价低于开盘价的 K 线。\n\n股息贴现模型：股票价格 = 股息/银行利率\n\n银行利率提高，更愿意存钱，不愿意买股票，股票价格下降。\n\n## 公司\n\n[各类市场主体设立登记条件](https://www.samr.gov.cn/djzcj/zcfg/qt/art/2023/art_70e46c8e986047a0aef313015586db7a.html)\n\n- 股东会：权力机关，类似人大。\n- 董事会：执行机关，类似国务院。召开股东会，任免经理。经理对董事会负责。\n- 监事会：监察机关，类似监委。监事不得由董事和高管兼任。\n\n## 国际\n\n我国作为非成员国参与的政府间国际组织有：东盟（东南亚国家联盟、ASEAN）。[东盟连续 4 年保持中国第一大贸易伙伴地位（2024.1）](http://world.people.com.cn/n1/2024/0114/c1002-40158550.html)\n\n- 1857 年第一次世界性经济危机出现在美国，原因是生产过剩。1861 年爆发南北战争\n- 1945 年联合国成立，国民党政权加入\n- 1971 年恢复联合国合法席位\n- 1991 年加入亚太经合组织 APEC\n- 1992 成为不结盟运动的观察员国\n- 2001 年加入世界贸易组织 WTO\n- 2013 年与欧洲大陆国家签署了首个自由贸易协定（瑞士）\n\n联合国常任理事国：中美俄法英\n\n联合国官方语言：中英俄法西阿\n\n欧盟成员国里使用欧元的各国不能制定独立的货币政策，必须符合欧洲中央银行的整体政策要求。不用欧元的成员国（丹麦、瑞典等）除外。\n","slug":"经济常识","published":1,"updated":"2025-09-14T14:50:24.399Z","__permalink":"economics.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnr000m5ws6ah4wdc04","content":"<p>小时候基本不愿意花钱。一直到今年七月玩游戏都能把金币攒到 999\n一直到往上加不动，能用技能就不买道具。</p>\n<p>参考：公考通 APP 里的题目、MBA 智库百科、百度百科、通义千问等。</p>\n<h2 id=\"实例\">实例</h2>\n<p>有三个厨子 A、B、C\n在三家面馆里，假设社会上只有这三家面馆和这三个厨子，我们把这个社会记作面国。</p>\n<p>他们平均下一碗面要 5 分钟，这叫社会必要劳动时间。每分钟平均下 0.2\n碗面，这叫社会劳动生产率。</p>\n<p>A 下一碗面要 4 分钟，这叫个别劳动时间。A 每分钟平均下 0.25\n碗面，这叫个别劳动生产率。</p>\n<p>如果他们平均下一碗面要 50 分钟，每分钟平均下 0.02\n碗面，这时候面就值钱了，因为没有别的面馆。这叫社会劳动生产率与商品价值成反比。价格是价值的尺度（数值表示），由市场供需关系决定，需大于供价格上升。</p>\n<p>面国的面火了，大家都想吃，但是面国只有三家面馆。面馆通过增加不同类型的面条满足更多顾客需求，引入自动化设备，创新菜品等方法提高供给结构对需求变化的适应性和灵活性，这叫供给侧结构改革。</p>\n<p>原来这三家面馆统一 5 块钱一碗面，后来 C 面馆改成 5\n毛钱一碗了。于是厨子 A 和 B 做不下去了，辞职跑到米国了。C\n这叫掠夺性定价。</p>\n<p>厨子 A 和 B 辞职之后，他们面馆的厨师岗位还在，但是面国除了 C\n以外没有人会下面。对于不会下面的人来说，这叫结构性就业问题。</p>\n<p>厨子 A 和 B 跑到米国之后，发现米国没有面馆。对于 A 和 B\n来说，这叫摩擦性就业问题。</p>\n<p>面国向米国出口面，从米国进口米。如果面国的出口收入大于进口支出，这叫面国有贸易顺差。</p>\n<h2 id=\"成本\">成本</h2>\n<p>沉没成本：你运货的船由于你的某一次决策沉了，且永远也捞不上来了。</p>\n<p>机会成本（鱼与熊掌）：为了干一件事，你舍弃了一个可能赚多少钱的机会。在做出多选择决策时，被舍弃选项中的最高价值。</p>\n<p>比较优势（扬长避短）：在干你有优势的事上，你的机会成本比别人低。</p>\n<p>固定成本 / 不变成本：短期内不随产量变化的成本。如补偿机器设备无形损耗的折旧费。</p>\n<p>可变成本：直接随产量变化的成本。如原料。</p>\n<p>边际成本：新增一单位产量，增加的成本。</p>\n<p>边际就是一阶导数。产量和一些其他的东西导致总成本变化，这时候边际成本就是总成本对产量的偏导数，总成本受产量影响的程度。</p>\n<p>价格应定在边际成本上（曲高和寡），意思是：价格不能订得过高，要不买的人少；也不能订得过低，要么自己亏了。</p>\n<p>边际效用递减（戈森第一定律）：你听歌听多了会感到没意思。听歌时间 - 有意思图像是上凸函数，二阶导数为负，一阶导数递减。</p>\n<p>边际效用均等（戈森第二定律）：你听歌没意思了，要么去找更新奇的歌，要么去打游戏，要么干别的。有一些想干的事，想的程度不同，先干最想干的，直到干所有事的边际效用相等。</p>\n<p>PPI（生产者价格指数，Producer Price Index）：PPI\n上升，生产成本增加。</p>\n<h2 id=\"商品\">商品</h2>\n<p>供给是卖方在 “各个价格” 之下希望卖出的商品数量，表现为供给曲线；供给量是卖方在 “特定价格” 下希望卖出的商品数量，表现为供给曲线上的一点。</p>\n<p>供给曲线是供给量 - 价格曲线，斜率为正。商品价格变动引起供给量变动，逻辑是：点在供给曲线上的纵坐标变大导致横坐标变大，较高的价格鼓励生产者提供更多商品。</p>\n<p>供给变动指：整条供给曲线的移动。如生产成本变低，卖方在各个价格之下愿意提供的商品变多了，供给曲线向右移动。</p>\n<p>使用价值：对于一个商品，满足人们某种需要的效用。</p>\n<p>价值悖论：使用价值和交换价值存在反差。钻石与水悖论：水的使用价值大，交换价值小。钻石的使用价值小，交换价值大。</p>\n<p>凡勃伦效应：为满足奢侈心理。价格越高需求量越大。</p>\n<p>互补商品：需求互相依赖，有了一个就要有另一个。一个价格提高导致另一个需求下降。如羽毛球和羽毛球拍。</p>\n<p>替代商品：没有一个可以有另一个。一个价格提高导致另一个需求上升。如牛肉和羊肉。</p>\n<p>价格弹性系数：价格变化有多大程度上能影响供给量 / 需求量的变化。如食盐的需求量稳定，需求的价格弹性系数几乎为零。</p>\n<p>商品供给的价格弹性系数：供给量的变化率 / 价格的变化率。</p>\n<p>商品需求的价格弹性系数：需求量的变化率 / 价格的变化率。</p>\n<h2 id=\"物品\">物品</h2>\n<p>竞争性：竞争体验。单人使用和多人使用体验不一样。</p>\n<p>排他性：排除未付费的人使用该物品。需要付费。</p>\n<ul>\n<li>私人物品（竞争体验且花钱）：有竞争性，有排他性。如冰激凌，你和别人竞争吃的体验（不会和别人一起吃），需要花钱买。</li>\n<li>公有资源（只竞争体验，不花钱）：有竞争性，无排他性。如拥挤的不收费道路，你和别人竞争道路畅通的体验，不用花钱。</li>\n<li>自然垄断物（只花钱，不竞争体验）：无竞争性，有排他性。如你家用电多少不会影响别人的体验，要花钱。</li>\n<li>公共物品（不竞争体验且不花钱）：无竞争性，无排他性。如国防，单人和多人使用的体验一样，不用花钱。</li>\n</ul>\n<h2 id=\"劳动成果\">劳动成果</h2>\n<p>社会总产值：所有物质生产部门生产出的产品和服务的总价值，包括重复计算的中间产品的价值。</p>\n<p>国民收入：生产过程中新创造的价值，也就是扣除掉原材料消耗和资本折旧之后的净价值。包括工资、租金、利息、利润等，反映了劳动力和资本的收入。国民收入的计算一般采用收入法，即通过加总所有生产单位的收入来得出。</p>\n<p>社会总产值和国民收入都只计算五大物质生产部门（农业、工业、建筑业、货运邮电业、批零餐饮业）的劳动成果，不包括非物质生产部门（如电影票房）。</p>\n<p><a href=\"https://www.stats.gov.cn/xxgk/sjfb/zxfb2020/202404/t20240429_1948771.html\">国内生产总值（GDP，Gross\nDomestic\nProduct）</a>：衡量一个国家或地区在一定时期内生产出所有最终商品和服务市场价值的总和。拉动\nGDP 的三驾马车：投资、消费、出口。</p>\n<p><a href=\"https://www.stats.gov.cn/zs/tjws/tjzb/202301/t20230101_1903832.html\">国民总收入（GNI，Gross\nNational Income）</a> = GDP + 来自国外的要素收入净额 = GDP +\n(来自国外的要素收入 - 付给国外的要素收入)</p>\n<h2 id=\"分配\">分配</h2>\n<p>工资黏性：工资不能随劳动关系的变动而迅速的变动。</p>\n<p>生产要素：土地、劳动力、资本、技术、数据。</p>\n<p>按生产要素分配：土地入股、股东分红。</p>\n<p>基尼系数：收入分配不平均的程度，在 0 和 1 之间。</p>\n<h2 id=\"消费\">消费</h2>\n<p>恩格尔系数：买食物的钱 / 花的所有钱。恩格尔定律：随着收入增加，恩格尔系数减小。</p>\n<p>相对收入消费理论：示范效应（受周围人影响）、消费惯性（维持或提高消费水平）、棘轮效应（消费水平提高就很难再降下来，即使收入降低）。长期消费回归直线过原点，短期消费曲线有正截距。</p>\n<p>消费者买境外商品属于消费行为，不算资本跨国运作。</p>\n<p>CPI（居民消费价格指数，Consumer Price Index）：CPI\n上升，消费者购买力下降，是观察通货膨胀水平的指标。</p>\n<p>一般情况：PPI 上升 -&gt; 企业为保持利润率提高商品价格 -&gt; CPI\n上升。</p>\n<p>剪刀差：PPI 与 CPI 走势背离。</p>\n<h2 id=\"投机\">投机</h2>\n<p>货币投机需求：指人们出于投机目的而持有的货币量，是持有的，不是花出去的。</p>\n<p>利率：回报程度</p>\n<p>市场利率上升导致货币投机需求减少，逻辑是：人们在利率大时预期利率会反弹，于是在反弹之前（意思是我在第二层）把持有的货币换成别的资产，如债券。</p>\n<p>小数定律 / 赌徒谬误：大样本上掷硬币的规律的正反各一半，于是人们倾向于在一个小样本里往规律靠，比如前三次都是正面，人们会倾向于第四次是反面。实际上每一次都是独立的。</p>\n<p>囚徒困境：个人的最佳选择并非团体的最佳选择。单人招时为本人最大利益，但两人都招时不是团体最大利益。属于非零和博弈。</p>\n<p>权衡取舍：田忌赛马。</p>\n<p>外部性：你的决策使外人受损或受益。</p>\n<h2 id=\"风险\">风险</h2>\n<p>投资组合（狡兔三窟）：投资人或金融机构同时持有股票、债券、期货等产品，分散风险，不把鸡蛋放到同一个篮子里。</p>\n<p>黑天鹅（以前见过的天鹅是白的）：难以预测、产生重大影响、事件发生后，人们会找到各种理由解释为什么它会发生。</p>\n<p>灰犀牛（体型庞大，行动迟缓）：潜在影响大，能够被预测甚至习以为常，往往被忽视或低估，发生是一个漫长过程（气候变化、病毒传播）（千里之堤，溃于蚁穴）</p>\n<p>黑天鹅的背后都有一个灰犀牛。在预测到的人看来是灰犀牛，没预测到的人看来是黑天鹅。共同点是影响巨大。</p>\n<h2 id=\"市场\">市场</h2>\n<p>市场主体：参与交易的人或机构。市场客体：交易的对象（商品、服务）</p>\n<p>市场体系的三大支柱</p>\n<ul>\n<li>商品市场（基础地位，其他市场为商品市场服务）</li>\n<li>资本市场（货币是所有资源的一般代表形式）（股票市场和债券市场）</li>\n<li>劳动力市场（招聘平台）</li>\n</ul>\n<h2 id=\"无形手\">无形手</h2>\n<p>看不见的手由亚当・斯密在《国富论》中提出，提倡自由竞争，反对政府干预。科斯定理：只要产权明确且交易成本足够低，市场机制本身就能解决外部性问题，无需政府干预。</p>\n<p>农产品市场最接近完全竞争市场，看不见的手（市场自带的规律）最大。最接近但不等于，因为有发改委、粮食和物资储备局制定粮食最低收购价格，有政府干预的称为看得见的手（宏观调控）。</p>\n<p>一价定律：在完全竞争市场上（贸易开放，交易费用为零）。同样的货物在各个地方销售用同一货币表示的价格相同。</p>\n<h2 id=\"有形手\">有形手</h2>\n<p>宏观调控分经济手段、行政手段和法律手段。</p>\n<ul>\n<li><p>经济上行：需求量增多</p></li>\n<li><p>经济下行：需求量减少</p></li>\n<li><p>扩张性经济政策（需小于供时，经济过冷，增加需求）：让市场里流通的货币量增多。市场外\n-&gt; 市场里</p>\n<ul>\n<li>扩张性财政政策：如政府增加财政支出、减税、发国债</li>\n<li>扩张性货币政策：如中央银行在金融市场上买国债</li>\n</ul></li>\n<li><p>紧缩性经济政策（需大于供时，经济过热，抑制需求）与其相反。市场里\n-&gt; 市场外</p></li>\n</ul>\n<p>凯恩斯主义主张扩张性经济政策，增加需求。</p>\n<p>逆周期调节：旱则资舟，水则资车。</p>\n<hr>\n<p>政府发国债、中央银行买国债：扩张型（向市场里注入新的货币）。</p>\n<p>中央银行出售国债：紧缩性（市场里 -&gt; 银行）。</p>\n<p>政府财政支出【正比】，增加财政支出，在市场里的增多。扩张型。</p>\n<p>所得税【反比】：降税，在市场里的增多。扩张型。</p>\n<p>存款利率【反比】：降低存款利率，降低存款需求，在市场里的增多。扩张型。</p>\n<p>贷款利率【反比】：降低贷款利率，增加贷款需求，在市场里的增多。扩张型。</p>\n<p>存款准备金率【反比】：商业银行把存款的一部分上交给中央银行。如：中央银行下调存款准备金率时，商业银行可用资金增多，贷款上升，货币供应量增多，通货膨胀，属于扩张型货币政策。</p>\n<p>贴现率【反比】：票据持有者在商业银行把票据换成现金（贴现）时，需要支付利息。如：降低贴现率时，贴现意愿增多，取出来在市场上流通的钱增多，属于扩张型货币政策。</p>\n<hr>\n<p>城镇化发展模式：</p>\n<ul>\n<li>美国：市场经济 &gt; 政府干预</li>\n<li>中国：市场经济 = 政府干预</li>\n<li>欧洲、日本、韩国：市场经济 &lt; 政府干预</li>\n<li>拉美国家：受殖民地经济制约，工业化速度比城镇化慢</li>\n</ul>\n<p>十五大报告指出：国有经济控制国民经济命脉，对经济起主导作用。体现在对经济发展的控制力和市场竞争力。</p>\n<p><a href=\"https://gks.mof.gov.cn/tongjishuju/202407/t20240722_3939942.htm\">国家财政收入中最主要的是税收</a>。</p>\n<p>预算赤字：提前定好的。预算中支出超过收入的部分。</p>\n<p>赤字率：预算赤字占 GDP 的比重。政府财政赤字对整个经济的影响程度。</p>\n<p>我国财税制度的发展经历了三个阶段：中央管、地方管、中央和地方共管。</p>\n<h2 id=\"政策\">政策</h2>\n<p>3456，保补入免</p>\n<ul>\n<li>2003：耕地保护</li>\n<li> 2004：粮食直补</li>\n<li> 2005：农业科技入户</li>\n<li> 2006：免农业税</li>\n</ul>\n<h2 id=\"经济\">经济</h2>\n<p>基础是农业，主导是工业。</p>\n<p><a href=\"https://www.stats.gov.cn/xxgk/tjbz/gjtjbz/201710/P020200612582987902992.PDF\">GB/T\n4754—2017</a></p>\n<ul>\n<li> 第一产业：农林牧渔。</li>\n<li>第二产业：采矿、制造、能源生产供应、建筑。</li>\n<li>第三产业：服务业，包括辅助第一二产业的服务业。</li>\n</ul>\n<p>第一次全国经济普查在 04 年，每 5 年一次。只调查第二、三产业。</p>\n<p>实体经济：直接参与到物质产品和服务生产、流通的活动。物质的、精神的（教育、知识、信息与通信、文体艺）产品和服务的生产、流通。</p>\n<p>虚拟经济：通过金融手段和市场机制实现价值增值的活动。金融业、房地产业、体育经济（体育赛事的组织、转播权，职业电竞比赛）、博彩业、收藏业。</p>\n<p>循环经济 3R 原则</p>\n<ul>\n<li>减量化（reduce）：减少资源消耗</li>\n<li>再使用（reuse）：使生产的产品耐用</li>\n<li>再循环（recycle）：垃圾回收</li>\n</ul>\n<p>经济全球化会加剧金融风险。</p>\n<p>产业空心化是指以制造业为中心的物质生产和资本大量迅速转移到国外，造成国内物质生产和非物质生产的比例严重失衡。</p>\n<h2 id=\"电子商务\">电子商务</h2>\n<p>B：Business 商家</p>\n<p>C：Customer 客户</p>\n<p>O：Online/Offline 线上 / 线下</p>\n<p>P：Production/...</p>\n<p>T：Team 团队</p>\n<h2 id=\"贷款和存款\">贷款和存款</h2>\n<p>贷款就是借钱。借 400 在一年之内要还 450，这叫贷款年利率为 0.125</p>\n<p>民法典第六百八十三条：以公益为目的的非营利法人、非法人组织不得为保证人。</p>\n<p>LPR（Loan Prime\nRate）贷款基础利率，或称贷款市场报价利率，由中国人民银行授权中国外汇交易中心（全国银行间同业拆借中心）计算并公布的基础性的贷款参考利率，<a href=\"https://www.chinamoney.com.cn/chinese/lllpr/\">每月 20\n日左右公布</a>。</p>\n<p>贷款分固定利率和浮动利率，固定利率不受 LPR\n影响，浮动利率要等到下一个重定价日根据最近一个月的 LPR 加点定价。</p>\n<p>商业银行资金构成（通义）：</p>\n<ul>\n<li>存款：客户存入银行的款项，是银行最大的资金来源。</li>\n<li>资本金：银行股东投入的资本和留存收益。</li>\n<li>借款：银行从其他金融机构或金融市场借入的资金。</li>\n<li>储备金：包括法定存款准备金和超额准备金。</li>\n<li>其他资金来源：如发行债券、同业拆借等。</li>\n</ul>\n<p>利息是资本使用权转让的报酬，是资本这一生产要素的价格，由资本市场的供求双方决定。</p>\n<p>个人银行账户分一类户、二类户和三类户。手笔从大到小。</p>\n<h2 id=\"保险\">保险</h2>\n<p>居民社保：医疗、养老。</p>\n<p>职工社保：医疗、养老、生育、工伤、失业。</p>\n<p>保险人不得兼营人身保险业务和财产保险业务。财产保险业务包括：实物财产损失保险、责任保险、信用保险等。</p>\n<p>存款保险制度起源于 1933 年大萧条之后的美国。</p>\n<p>存款保险的投保方：吸收存款的商业银行、农村信用合作社等金融机构；承保方：中国存款保险基金管理有限责任公司；受益方：存款人，即储户。</p>\n<p>银行把储户存款的一部分交给存款保险基金公司，如果银行钱不够了，由存款保险基金公司提供财务救助或者直接向存款人支付全部或部分存款。</p>\n<h2 id=\"货币\">货币</h2>\n<p>外汇：别国货币，或者能兑换成别国货币的东西。</p>\n<p>汇率（外币兑换本币的汇率）：1 外币 = 多少本币</p>\n<p>人民币对美元汇率：等值美元 / 等值人民币 = 0. 几</p>\n<p>人民币【兑】美元汇率：等值人民币 / 等值美元 = 7 左右</p>\n<p>人民币对美元升值：汇率下降（用人民币兑美元的汇率上升），有利于进口（用人民币换美元换得多），不利于出口（用美元换人民币换得少）。</p>\n<p>一国货币相对于另一国货币升值：它在本国用本币对应的商品会降价，在他国用他币对应的商品会涨价。</p>\n<p>本国出现国际收支顺差：国际收支上收入大于支出 -&gt;\n增加了外汇市场上的外汇供给 -&gt; 外汇供大于求 -&gt;\n外币贬值本币升值。</p>\n<h2 id=\"股票\">股票</h2>\n<p>阳线（红 / 白）：收盘价高于开盘价的 K\n线。阴线（绿 / 黑）：收盘价低于开盘价的 K 线。</p>\n<p>股息贴现模型：股票价格 = 股息 / 银行利率</p>\n<p>银行利率提高，更愿意存钱，不愿意买股票，股票价格下降。</p>\n<h2 id=\"公司\">公司</h2>\n<p><a href=\"https://www.samr.gov.cn/djzcj/zcfg/qt/art/2023/art_70e46c8e986047a0aef313015586db7a.html\">各类市场主体设立登记条件</a></p>\n<ul>\n<li>股东会：权力机关，类似人大。</li>\n<li>董事会：执行机关，类似国务院。召开股东会，任免经理。经理对董事会负责。</li>\n<li>监事会：监察机关，类似监委。监事不得由董事和高管兼任。</li>\n</ul>\n<h2 id=\"国际\">国际</h2>\n<p>我国作为非成员国参与的政府间国际组织有：东盟（东南亚国家联盟、ASEAN）。<a href=\"http://world.people.com.cn/n1/2024/0114/c1002-40158550.html\">东盟连续\n4 年保持中国第一大贸易伙伴地位（2024.1）</a></p>\n<ul>\n<li>1857 年第一次世界性经济危机出现在美国，原因是生产过剩。1861\n年爆发南北战争</li>\n<li> 1945 年联合国成立，国民党政权加入</li>\n<li> 1971 年恢复联合国合法席位</li>\n<li> 1991 年加入亚太经合组织 APEC</li>\n<li>1992 成为不结盟运动的观察员国</li>\n<li> 2001 年加入世界贸易组织 WTO</li>\n<li>2013 年与欧洲大陆国家签署了首个自由贸易协定（瑞士）</li>\n</ul>\n<p>联合国常任理事国：中美俄法英</p>\n<p>联合国官方语言：中英俄法西阿</p>\n<p>欧盟成员国里使用欧元的各国不能制定独立的货币政策，必须符合欧洲中央银行的整体政策要求。不用欧元的成员国（丹麦、瑞典等）除外。</p>\n","excerpt":"","more":"<p>小时候基本不愿意花钱。一直到今年七月玩游戏都能把金币攒到 999\n一直到往上加不动，能用技能就不买道具。</p>\n<p>参考：公考通 APP 里的题目、MBA 智库百科、百度百科、通义千问等。</p>\n<h2 id=\"实例\">实例</h2>\n<p>有三个厨子 A、B、C\n在三家面馆里，假设社会上只有这三家面馆和这三个厨子，我们把这个社会记作面国。</p>\n<p>他们平均下一碗面要 5 分钟，这叫社会必要劳动时间。每分钟平均下 0.2\n碗面，这叫社会劳动生产率。</p>\n<p>A 下一碗面要 4 分钟，这叫个别劳动时间。A 每分钟平均下 0.25\n碗面，这叫个别劳动生产率。</p>\n<p>如果他们平均下一碗面要 50 分钟，每分钟平均下 0.02\n碗面，这时候面就值钱了，因为没有别的面馆。这叫社会劳动生产率与商品价值成反比。价格是价值的尺度（数值表示），由市场供需关系决定，需大于供价格上升。</p>\n<p>面国的面火了，大家都想吃，但是面国只有三家面馆。面馆通过增加不同类型的面条满足更多顾客需求，引入自动化设备，创新菜品等方法提高供给结构对需求变化的适应性和灵活性，这叫供给侧结构改革。</p>\n<p>原来这三家面馆统一 5 块钱一碗面，后来 C 面馆改成 5\n毛钱一碗了。于是厨子 A 和 B 做不下去了，辞职跑到米国了。C\n这叫掠夺性定价。</p>\n<p>厨子 A 和 B 辞职之后，他们面馆的厨师岗位还在，但是面国除了 C\n以外没有人会下面。对于不会下面的人来说，这叫结构性就业问题。</p>\n<p>厨子 A 和 B 跑到米国之后，发现米国没有面馆。对于 A 和 B\n来说，这叫摩擦性就业问题。</p>\n<p>面国向米国出口面，从米国进口米。如果面国的出口收入大于进口支出，这叫面国有贸易顺差。</p>\n<h2 id=\"成本\">成本</h2>\n<p>沉没成本：你运货的船由于你的某一次决策沉了，且永远也捞不上来了。</p>\n<p>机会成本（鱼与熊掌）：为了干一件事，你舍弃了一个可能赚多少钱的机会。在做出多选择决策时，被舍弃选项中的最高价值。</p>\n<p>比较优势（扬长避短）：在干你有优势的事上，你的机会成本比别人低。</p>\n<p>固定成本 / 不变成本：短期内不随产量变化的成本。如补偿机器设备无形损耗的折旧费。</p>\n<p>可变成本：直接随产量变化的成本。如原料。</p>\n<p>边际成本：新增一单位产量，增加的成本。</p>\n<p>边际就是一阶导数。产量和一些其他的东西导致总成本变化，这时候边际成本就是总成本对产量的偏导数，总成本受产量影响的程度。</p>\n<p>价格应定在边际成本上（曲高和寡），意思是：价格不能订得过高，要不买的人少；也不能订得过低，要么自己亏了。</p>\n<p>边际效用递减（戈森第一定律）：你听歌听多了会感到没意思。听歌时间 - 有意思图像是上凸函数，二阶导数为负，一阶导数递减。</p>\n<p>边际效用均等（戈森第二定律）：你听歌没意思了，要么去找更新奇的歌，要么去打游戏，要么干别的。有一些想干的事，想的程度不同，先干最想干的，直到干所有事的边际效用相等。</p>\n<p>PPI（生产者价格指数，Producer Price Index）：PPI\n上升，生产成本增加。</p>\n<h2 id=\"商品\">商品</h2>\n<p>供给是卖方在 “各个价格” 之下希望卖出的商品数量，表现为供给曲线；供给量是卖方在 “特定价格” 下希望卖出的商品数量，表现为供给曲线上的一点。</p>\n<p>供给曲线是供给量 - 价格曲线，斜率为正。商品价格变动引起供给量变动，逻辑是：点在供给曲线上的纵坐标变大导致横坐标变大，较高的价格鼓励生产者提供更多商品。</p>\n<p>供给变动指：整条供给曲线的移动。如生产成本变低，卖方在各个价格之下愿意提供的商品变多了，供给曲线向右移动。</p>\n<p>使用价值：对于一个商品，满足人们某种需要的效用。</p>\n<p>价值悖论：使用价值和交换价值存在反差。钻石与水悖论：水的使用价值大，交换价值小。钻石的使用价值小，交换价值大。</p>\n<p>凡勃伦效应：为满足奢侈心理。价格越高需求量越大。</p>\n<p>互补商品：需求互相依赖，有了一个就要有另一个。一个价格提高导致另一个需求下降。如羽毛球和羽毛球拍。</p>\n<p>替代商品：没有一个可以有另一个。一个价格提高导致另一个需求上升。如牛肉和羊肉。</p>\n<p>价格弹性系数：价格变化有多大程度上能影响供给量 / 需求量的变化。如食盐的需求量稳定，需求的价格弹性系数几乎为零。</p>\n<p>商品供给的价格弹性系数：供给量的变化率 / 价格的变化率。</p>\n<p>商品需求的价格弹性系数：需求量的变化率 / 价格的变化率。</p>\n<h2 id=\"物品\">物品</h2>\n<p>竞争性：竞争体验。单人使用和多人使用体验不一样。</p>\n<p>排他性：排除未付费的人使用该物品。需要付费。</p>\n<ul>\n<li>私人物品（竞争体验且花钱）：有竞争性，有排他性。如冰激凌，你和别人竞争吃的体验（不会和别人一起吃），需要花钱买。</li>\n<li>公有资源（只竞争体验，不花钱）：有竞争性，无排他性。如拥挤的不收费道路，你和别人竞争道路畅通的体验，不用花钱。</li>\n<li>自然垄断物（只花钱，不竞争体验）：无竞争性，有排他性。如你家用电多少不会影响别人的体验，要花钱。</li>\n<li>公共物品（不竞争体验且不花钱）：无竞争性，无排他性。如国防，单人和多人使用的体验一样，不用花钱。</li>\n</ul>\n<h2 id=\"劳动成果\">劳动成果</h2>\n<p>社会总产值：所有物质生产部门生产出的产品和服务的总价值，包括重复计算的中间产品的价值。</p>\n<p>国民收入：生产过程中新创造的价值，也就是扣除掉原材料消耗和资本折旧之后的净价值。包括工资、租金、利息、利润等，反映了劳动力和资本的收入。国民收入的计算一般采用收入法，即通过加总所有生产单位的收入来得出。</p>\n<p>社会总产值和国民收入都只计算五大物质生产部门（农业、工业、建筑业、货运邮电业、批零餐饮业）的劳动成果，不包括非物质生产部门（如电影票房）。</p>\n<p><a href=\"https://www.stats.gov.cn/xxgk/sjfb/zxfb2020/202404/t20240429_1948771.html\">国内生产总值（GDP，Gross\nDomestic\nProduct）</a>：衡量一个国家或地区在一定时期内生产出所有最终商品和服务市场价值的总和。拉动\nGDP 的三驾马车：投资、消费、出口。</p>\n<p><a href=\"https://www.stats.gov.cn/zs/tjws/tjzb/202301/t20230101_1903832.html\">国民总收入（GNI，Gross\nNational Income）</a> = GDP + 来自国外的要素收入净额 = GDP +\n(来自国外的要素收入 - 付给国外的要素收入)</p>\n<h2 id=\"分配\">分配</h2>\n<p>工资黏性：工资不能随劳动关系的变动而迅速的变动。</p>\n<p>生产要素：土地、劳动力、资本、技术、数据。</p>\n<p>按生产要素分配：土地入股、股东分红。</p>\n<p>基尼系数：收入分配不平均的程度，在 0 和 1 之间。</p>\n<h2 id=\"消费\">消费</h2>\n<p>恩格尔系数：买食物的钱 / 花的所有钱。恩格尔定律：随着收入增加，恩格尔系数减小。</p>\n<p>相对收入消费理论：示范效应（受周围人影响）、消费惯性（维持或提高消费水平）、棘轮效应（消费水平提高就很难再降下来，即使收入降低）。长期消费回归直线过原点，短期消费曲线有正截距。</p>\n<p>消费者买境外商品属于消费行为，不算资本跨国运作。</p>\n<p>CPI（居民消费价格指数，Consumer Price Index）：CPI\n上升，消费者购买力下降，是观察通货膨胀水平的指标。</p>\n<p>一般情况：PPI 上升 -&gt; 企业为保持利润率提高商品价格 -&gt; CPI\n上升。</p>\n<p>剪刀差：PPI 与 CPI 走势背离。</p>\n<h2 id=\"投机\">投机</h2>\n<p>货币投机需求：指人们出于投机目的而持有的货币量，是持有的，不是花出去的。</p>\n<p>利率：回报程度</p>\n<p>市场利率上升导致货币投机需求减少，逻辑是：人们在利率大时预期利率会反弹，于是在反弹之前（意思是我在第二层）把持有的货币换成别的资产，如债券。</p>\n<p>小数定律 / 赌徒谬误：大样本上掷硬币的规律的正反各一半，于是人们倾向于在一个小样本里往规律靠，比如前三次都是正面，人们会倾向于第四次是反面。实际上每一次都是独立的。</p>\n<p>囚徒困境：个人的最佳选择并非团体的最佳选择。单人招时为本人最大利益，但两人都招时不是团体最大利益。属于非零和博弈。</p>\n<p>权衡取舍：田忌赛马。</p>\n<p>外部性：你的决策使外人受损或受益。</p>\n<h2 id=\"风险\">风险</h2>\n<p>投资组合（狡兔三窟）：投资人或金融机构同时持有股票、债券、期货等产品，分散风险，不把鸡蛋放到同一个篮子里。</p>\n<p>黑天鹅（以前见过的天鹅是白的）：难以预测、产生重大影响、事件发生后，人们会找到各种理由解释为什么它会发生。</p>\n<p>灰犀牛（体型庞大，行动迟缓）：潜在影响大，能够被预测甚至习以为常，往往被忽视或低估，发生是一个漫长过程（气候变化、病毒传播）（千里之堤，溃于蚁穴）</p>\n<p>黑天鹅的背后都有一个灰犀牛。在预测到的人看来是灰犀牛，没预测到的人看来是黑天鹅。共同点是影响巨大。</p>\n<h2 id=\"市场\">市场</h2>\n<p>市场主体：参与交易的人或机构。市场客体：交易的对象（商品、服务）</p>\n<p>市场体系的三大支柱</p>\n<ul>\n<li>商品市场（基础地位，其他市场为商品市场服务）</li>\n<li>资本市场（货币是所有资源的一般代表形式）（股票市场和债券市场）</li>\n<li>劳动力市场（招聘平台）</li>\n</ul>\n<h2 id=\"无形手\">无形手</h2>\n<p>看不见的手由亚当・斯密在《国富论》中提出，提倡自由竞争，反对政府干预。科斯定理：只要产权明确且交易成本足够低，市场机制本身就能解决外部性问题，无需政府干预。</p>\n<p>农产品市场最接近完全竞争市场，看不见的手（市场自带的规律）最大。最接近但不等于，因为有发改委、粮食和物资储备局制定粮食最低收购价格，有政府干预的称为看得见的手（宏观调控）。</p>\n<p>一价定律：在完全竞争市场上（贸易开放，交易费用为零）。同样的货物在各个地方销售用同一货币表示的价格相同。</p>\n<h2 id=\"有形手\">有形手</h2>\n<p>宏观调控分经济手段、行政手段和法律手段。</p>\n<ul>\n<li><p>经济上行：需求量增多</p></li>\n<li><p>经济下行：需求量减少</p></li>\n<li><p>扩张性经济政策（需小于供时，经济过冷，增加需求）：让市场里流通的货币量增多。市场外\n-&gt; 市场里</p>\n<ul>\n<li>扩张性财政政策：如政府增加财政支出、减税、发国债</li>\n<li>扩张性货币政策：如中央银行在金融市场上买国债</li>\n</ul></li>\n<li><p>紧缩性经济政策（需大于供时，经济过热，抑制需求）与其相反。市场里\n-&gt; 市场外</p></li>\n</ul>\n<p>凯恩斯主义主张扩张性经济政策，增加需求。</p>\n<p>逆周期调节：旱则资舟，水则资车。</p>\n<hr>\n<p>政府发国债、中央银行买国债：扩张型（向市场里注入新的货币）。</p>\n<p>中央银行出售国债：紧缩性（市场里 -&gt; 银行）。</p>\n<p>政府财政支出【正比】，增加财政支出，在市场里的增多。扩张型。</p>\n<p>所得税【反比】：降税，在市场里的增多。扩张型。</p>\n<p>存款利率【反比】：降低存款利率，降低存款需求，在市场里的增多。扩张型。</p>\n<p>贷款利率【反比】：降低贷款利率，增加贷款需求，在市场里的增多。扩张型。</p>\n<p>存款准备金率【反比】：商业银行把存款的一部分上交给中央银行。如：中央银行下调存款准备金率时，商业银行可用资金增多，贷款上升，货币供应量增多，通货膨胀，属于扩张型货币政策。</p>\n<p>贴现率【反比】：票据持有者在商业银行把票据换成现金（贴现）时，需要支付利息。如：降低贴现率时，贴现意愿增多，取出来在市场上流通的钱增多，属于扩张型货币政策。</p>\n<hr>\n<p>城镇化发展模式：</p>\n<ul>\n<li>美国：市场经济 &gt; 政府干预</li>\n<li>中国：市场经济 = 政府干预</li>\n<li>欧洲、日本、韩国：市场经济 &lt; 政府干预</li>\n<li>拉美国家：受殖民地经济制约，工业化速度比城镇化慢</li>\n</ul>\n<p>十五大报告指出：国有经济控制国民经济命脉，对经济起主导作用。体现在对经济发展的控制力和市场竞争力。</p>\n<p><a href=\"https://gks.mof.gov.cn/tongjishuju/202407/t20240722_3939942.htm\">国家财政收入中最主要的是税收</a>。</p>\n<p>预算赤字：提前定好的。预算中支出超过收入的部分。</p>\n<p>赤字率：预算赤字占 GDP 的比重。政府财政赤字对整个经济的影响程度。</p>\n<p>我国财税制度的发展经历了三个阶段：中央管、地方管、中央和地方共管。</p>\n<h2 id=\"政策\">政策</h2>\n<p>3456，保补入免</p>\n<ul>\n<li>2003：耕地保护</li>\n<li> 2004：粮食直补</li>\n<li> 2005：农业科技入户</li>\n<li> 2006：免农业税</li>\n</ul>\n<h2 id=\"经济\">经济</h2>\n<p>基础是农业，主导是工业。</p>\n<p><a href=\"https://www.stats.gov.cn/xxgk/tjbz/gjtjbz/201710/P020200612582987902992.PDF\">GB/T\n4754—2017</a></p>\n<ul>\n<li> 第一产业：农林牧渔。</li>\n<li>第二产业：采矿、制造、能源生产供应、建筑。</li>\n<li>第三产业：服务业，包括辅助第一二产业的服务业。</li>\n</ul>\n<p>第一次全国经济普查在 04 年，每 5 年一次。只调查第二、三产业。</p>\n<p>实体经济：直接参与到物质产品和服务生产、流通的活动。物质的、精神的（教育、知识、信息与通信、文体艺）产品和服务的生产、流通。</p>\n<p>虚拟经济：通过金融手段和市场机制实现价值增值的活动。金融业、房地产业、体育经济（体育赛事的组织、转播权，职业电竞比赛）、博彩业、收藏业。</p>\n<p>循环经济 3R 原则</p>\n<ul>\n<li>减量化（reduce）：减少资源消耗</li>\n<li>再使用（reuse）：使生产的产品耐用</li>\n<li>再循环（recycle）：垃圾回收</li>\n</ul>\n<p>经济全球化会加剧金融风险。</p>\n<p>产业空心化是指以制造业为中心的物质生产和资本大量迅速转移到国外，造成国内物质生产和非物质生产的比例严重失衡。</p>\n<h2 id=\"电子商务\">电子商务</h2>\n<p>B：Business 商家</p>\n<p>C：Customer 客户</p>\n<p>O：Online/Offline 线上 / 线下</p>\n<p>P：Production/...</p>\n<p>T：Team 团队</p>\n<h2 id=\"贷款和存款\">贷款和存款</h2>\n<p>贷款就是借钱。借 400 在一年之内要还 450，这叫贷款年利率为 0.125</p>\n<p>民法典第六百八十三条：以公益为目的的非营利法人、非法人组织不得为保证人。</p>\n<p>LPR（Loan Prime\nRate）贷款基础利率，或称贷款市场报价利率，由中国人民银行授权中国外汇交易中心（全国银行间同业拆借中心）计算并公布的基础性的贷款参考利率，<a href=\"https://www.chinamoney.com.cn/chinese/lllpr/\">每月 20\n日左右公布</a>。</p>\n<p>贷款分固定利率和浮动利率，固定利率不受 LPR\n影响，浮动利率要等到下一个重定价日根据最近一个月的 LPR 加点定价。</p>\n<p>商业银行资金构成（通义）：</p>\n<ul>\n<li>存款：客户存入银行的款项，是银行最大的资金来源。</li>\n<li>资本金：银行股东投入的资本和留存收益。</li>\n<li>借款：银行从其他金融机构或金融市场借入的资金。</li>\n<li>储备金：包括法定存款准备金和超额准备金。</li>\n<li>其他资金来源：如发行债券、同业拆借等。</li>\n</ul>\n<p>利息是资本使用权转让的报酬，是资本这一生产要素的价格，由资本市场的供求双方决定。</p>\n<p>个人银行账户分一类户、二类户和三类户。手笔从大到小。</p>\n<h2 id=\"保险\">保险</h2>\n<p>居民社保：医疗、养老。</p>\n<p>职工社保：医疗、养老、生育、工伤、失业。</p>\n<p>保险人不得兼营人身保险业务和财产保险业务。财产保险业务包括：实物财产损失保险、责任保险、信用保险等。</p>\n<p>存款保险制度起源于 1933 年大萧条之后的美国。</p>\n<p>存款保险的投保方：吸收存款的商业银行、农村信用合作社等金融机构；承保方：中国存款保险基金管理有限责任公司；受益方：存款人，即储户。</p>\n<p>银行把储户存款的一部分交给存款保险基金公司，如果银行钱不够了，由存款保险基金公司提供财务救助或者直接向存款人支付全部或部分存款。</p>\n<h2 id=\"货币\">货币</h2>\n<p>外汇：别国货币，或者能兑换成别国货币的东西。</p>\n<p>汇率（外币兑换本币的汇率）：1 外币 = 多少本币</p>\n<p>人民币对美元汇率：等值美元 / 等值人民币 = 0. 几</p>\n<p>人民币【兑】美元汇率：等值人民币 / 等值美元 = 7 左右</p>\n<p>人民币对美元升值：汇率下降（用人民币兑美元的汇率上升），有利于进口（用人民币换美元换得多），不利于出口（用美元换人民币换得少）。</p>\n<p>一国货币相对于另一国货币升值：它在本国用本币对应的商品会降价，在他国用他币对应的商品会涨价。</p>\n<p>本国出现国际收支顺差：国际收支上收入大于支出 -&gt;\n增加了外汇市场上的外汇供给 -&gt; 外汇供大于求 -&gt;\n外币贬值本币升值。</p>\n<h2 id=\"股票\">股票</h2>\n<p>阳线（红 / 白）：收盘价高于开盘价的 K\n线。阴线（绿 / 黑）：收盘价低于开盘价的 K 线。</p>\n<p>股息贴现模型：股票价格 = 股息 / 银行利率</p>\n<p>银行利率提高，更愿意存钱，不愿意买股票，股票价格下降。</p>\n<h2 id=\"公司\">公司</h2>\n<p><a href=\"https://www.samr.gov.cn/djzcj/zcfg/qt/art/2023/art_70e46c8e986047a0aef313015586db7a.html\">各类市场主体设立登记条件</a></p>\n<ul>\n<li>股东会：权力机关，类似人大。</li>\n<li>董事会：执行机关，类似国务院。召开股东会，任免经理。经理对董事会负责。</li>\n<li>监事会：监察机关，类似监委。监事不得由董事和高管兼任。</li>\n</ul>\n<h2 id=\"国际\">国际</h2>\n<p>我国作为非成员国参与的政府间国际组织有：东盟（东南亚国家联盟、ASEAN）。<a href=\"http://world.people.com.cn/n1/2024/0114/c1002-40158550.html\">东盟连续\n4 年保持中国第一大贸易伙伴地位（2024.1）</a></p>\n<ul>\n<li>1857 年第一次世界性经济危机出现在美国，原因是生产过剩。1861\n年爆发南北战争</li>\n<li> 1945 年联合国成立，国民党政权加入</li>\n<li> 1971 年恢复联合国合法席位</li>\n<li> 1991 年加入亚太经合组织 APEC</li>\n<li>1992 成为不结盟运动的观察员国</li>\n<li> 2001 年加入世界贸易组织 WTO</li>\n<li>2013 年与欧洲大陆国家签署了首个自由贸易协定（瑞士）</li>\n</ul>\n<p>联合国常任理事国：中美俄法英</p>\n<p>联合国官方语言：中英俄法西阿</p>\n<p>欧盟成员国里使用欧元的各国不能制定独立的货币政策，必须符合欧洲中央银行的整体政策要求。不用欧元的成员国（丹麦、瑞典等）除外。</p>\n"},{"title":"给 VM 里的 Ubuntu 扩容","date":"2024-01-14T02:30:00.000Z","_content":"\n## 工具\n\n- `df -h`：查看文件系统使用情况、挂载到的目录\n- `lsblk`：查看块设备相关信息、挂载点\n- `parted`：分区管理\n- `vgs` `vgdisplay`：卷组信息（Volume Group）\n- `pvs` `pvdisplay`：物理卷信息（Physical volume）\n- `lvs` `lvdisplay`：逻辑卷信息（Logical Volume）\n\n## 层次（空间缝隙）\n\n- `/dev/sda`：大概是 VM 设置里分配的硬盘空间大小\n  - `/dev/sda1`：bios_grub\n  - `/dev/sda2`：`/boot`\n  - 物理卷 pv：`/dev/sda3`\n    - 逻辑卷 lv：\n      - 文件系统 `/dev/mapper/ubuntu--vg-ubuntu--lv` -> `/dev/dm-0`\n\n需求：\n\n1. 先扩 sda\n2. 从 sda 向 sda3 匀\n3. 从 sda3 向 lv 匀\n\n## 步骤\n\n1. 给 VM 的虚拟磁盘扩容\n\n   关机状态下：编辑虚拟机设置 -> 硬盘 -> 扩展\n\n2. 从 sda 向 sda3 匀\n\n   ```sh\n   sudo parted\n   ```\n\n   ```\n   GNU Parted 3.4\n   Using /dev/sda\n   Welcome to GNU Parted! Type 'help' to view a list of commands.\n   (parted) print all\n   // 输出……\n\n   (parted) print free\n   Model: VMware, VMware Virtual S (scsi)\n   Disk /dev/sda: 32.2GB\n   Sector size (logical/physical): 512B/512B\n   Partition Table: gpt\n   Disk Flags:\n\n   Number  Start   End     Size    File system  Name  Flags\n           17.4kB  1049kB  1031kB  Free Space\n    1      1049kB  2097kB  1049kB                     bios_grub\n    2      2097kB  1904MB  1902MB  ext4\n    3      1904MB  21.5GB  19.6GB\n           21.5GB  32.2GB  10.7GB  Free Space\n\n   (parted) resizepart 3\n   End?  [21.5GB]? 32.3GB //在后面输入扩到的 End，比 End 略大就是扩到底\n   ```\n\n   扩完后，`sudo pvs` 出的 /dev/sda3 会比 `lsblk` 出的 sda3 小，执行：\n\n   ```sh\n   sudo pvresize /dev/sda3\n   ```\n\n3. 从 sda3 向 lv 匀\n\n   ```sh\n   sudo lvresize -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv\n   ```\n\n   扩完后，`df -h` 出的 /dev/mapper/ubuntu--vg-ubuntu--lv 还没变，执行：\n\n   ```sh\n   sudo resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv\n   ```\n","source":"_posts/给VM里的Ubuntu扩容.md","raw":"---\ntitle: 给 VM 里的 Ubuntu 扩容\ndate: 2024-1-14 10:30:00\npermalink: Expand-the-Ubuntu-capacity-in-the-VM.html\n---\n\n## 工具\n\n- `df -h`：查看文件系统使用情况、挂载到的目录\n- `lsblk`：查看块设备相关信息、挂载点\n- `parted`：分区管理\n- `vgs` `vgdisplay`：卷组信息（Volume Group）\n- `pvs` `pvdisplay`：物理卷信息（Physical volume）\n- `lvs` `lvdisplay`：逻辑卷信息（Logical Volume）\n\n## 层次（空间缝隙）\n\n- `/dev/sda`：大概是 VM 设置里分配的硬盘空间大小\n  - `/dev/sda1`：bios_grub\n  - `/dev/sda2`：`/boot`\n  - 物理卷 pv：`/dev/sda3`\n    - 逻辑卷 lv：\n      - 文件系统 `/dev/mapper/ubuntu--vg-ubuntu--lv` -> `/dev/dm-0`\n\n需求：\n\n1. 先扩 sda\n2. 从 sda 向 sda3 匀\n3. 从 sda3 向 lv 匀\n\n## 步骤\n\n1. 给 VM 的虚拟磁盘扩容\n\n   关机状态下：编辑虚拟机设置 -> 硬盘 -> 扩展\n\n2. 从 sda 向 sda3 匀\n\n   ```sh\n   sudo parted\n   ```\n\n   ```\n   GNU Parted 3.4\n   Using /dev/sda\n   Welcome to GNU Parted! Type 'help' to view a list of commands.\n   (parted) print all\n   // 输出……\n\n   (parted) print free\n   Model: VMware, VMware Virtual S (scsi)\n   Disk /dev/sda: 32.2GB\n   Sector size (logical/physical): 512B/512B\n   Partition Table: gpt\n   Disk Flags:\n\n   Number  Start   End     Size    File system  Name  Flags\n           17.4kB  1049kB  1031kB  Free Space\n    1      1049kB  2097kB  1049kB                     bios_grub\n    2      2097kB  1904MB  1902MB  ext4\n    3      1904MB  21.5GB  19.6GB\n           21.5GB  32.2GB  10.7GB  Free Space\n\n   (parted) resizepart 3\n   End?  [21.5GB]? 32.3GB //在后面输入扩到的 End，比 End 略大就是扩到底\n   ```\n\n   扩完后，`sudo pvs` 出的 /dev/sda3 会比 `lsblk` 出的 sda3 小，执行：\n\n   ```sh\n   sudo pvresize /dev/sda3\n   ```\n\n3. 从 sda3 向 lv 匀\n\n   ```sh\n   sudo lvresize -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv\n   ```\n\n   扩完后，`df -h` 出的 /dev/mapper/ubuntu--vg-ubuntu--lv 还没变，执行：\n\n   ```sh\n   sudo resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv\n   ```\n","slug":"给VM里的Ubuntu扩容","published":1,"updated":"2025-09-14T14:50:07.591Z","__permalink":"Expand-the-Ubuntu-capacity-in-the-VM.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnr000n5ws6bw0z4acc","content":"<h2 id=\"工具\">工具</h2>\n<ul>\n<li><code>df -h</code>：查看文件系统使用情况、挂载到的目录</li>\n<li><code>lsblk</code>：查看块设备相关信息、挂载点</li>\n<li><code>parted</code>：分区管理</li>\n<li><code>vgs</code> <code>vgdisplay</code>：卷组信息（Volume\nGroup）</li>\n<li><code>pvs</code> <code>pvdisplay</code>：物理卷信息（Physical\nvolume）</li>\n<li><code>lvs</code> <code>lvdisplay</code>：逻辑卷信息（Logical\nVolume）</li>\n</ul>\n<h2 id=\"层次空间缝隙\">层次（空间缝隙）</h2>\n<ul>\n<li><code>/dev/sda</code>：大概是 VM 设置里分配的硬盘空间大小\n<ul>\n<li><code>/dev/sda1</code>：bios_grub</li>\n<li><code>/dev/sda2</code>：<code>/boot</code></li>\n<li>物理卷 pv：<code>/dev/sda3</code>\n<ul>\n<li>逻辑卷 lv：\n<ul>\n<li>文件系统 <code>/dev/mapper/ubuntu--vg-ubuntu--lv</code> -&gt;\n<code>/dev/dm-0</code></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n<p>需求：</p>\n<ol type=\"1\">\n<li>先扩 sda</li>\n<li> 从 sda 向 sda3 匀</li>\n<li>从 sda3 向 lv 匀</li>\n</ol>\n<h2 id=\"步骤\">步骤</h2>\n<ol type=\"1\">\n<li><p>给 VM 的虚拟磁盘扩容</p>\n<p>关机状态下：编辑虚拟机设置 -&gt; 硬盘 -&gt; 扩展</p></li>\n<li><p>从 sda 向 sda3 匀</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> parted</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GNU Parted 3.4</span><br><span class=\"line\">Using /dev/sda</span><br><span class=\"line\">Welcome to GNU Parted! Type 'help' to view a list of commands.</span><br><span class=\"line\">(parted) print all</span><br><span class=\"line\">// 输出……</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print free</span><br><span class=\"line\">Model: VMware, VMware Virtual S (scsi)</span><br><span class=\"line\">Disk /dev/sda: 32.2GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags:</span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name  Flags</span><br><span class=\"line\">        17.4kB  1049kB  1031kB  Free Space</span><br><span class=\"line\"> 1      1049kB  2097kB  1049kB                     bios_grub</span><br><span class=\"line\"> 2      2097kB  1904MB  1902MB  ext4</span><br><span class=\"line\"> 3      1904MB  21.5GB  19.6GB</span><br><span class=\"line\">        21.5GB  32.2GB  10.7GB  Free Space</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) resizepart 3</span><br><span class=\"line\">End?  [21.5GB]? 32.3GB //在后面输入扩到的 End，比 End 略大就是扩到底</span><br></pre></td></tr></tbody></table></figure>\n<p>扩完后，<code>sudo pvs</code> 出的 /dev/sda3 会比 <code>lsblk</code>\n出的 sda3 小，执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> pvresize /dev/sda3</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>从 sda3 向 lv 匀</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> lvresize -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv</span><br></pre></td></tr></tbody></table></figure>\n<p>扩完后，<code>df -h</code> 出的 /dev/mapper/ubuntu--vg-ubuntu--lv\n还没变，执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n","excerpt":"","more":"<h2 id=\"工具\">工具</h2>\n<ul>\n<li><code>df -h</code>：查看文件系统使用情况、挂载到的目录</li>\n<li><code>lsblk</code>：查看块设备相关信息、挂载点</li>\n<li><code>parted</code>：分区管理</li>\n<li><code>vgs</code> <code>vgdisplay</code>：卷组信息（Volume\nGroup）</li>\n<li><code>pvs</code> <code>pvdisplay</code>：物理卷信息（Physical\nvolume）</li>\n<li><code>lvs</code> <code>lvdisplay</code>：逻辑卷信息（Logical\nVolume）</li>\n</ul>\n<h2 id=\"层次空间缝隙\">层次（空间缝隙）</h2>\n<ul>\n<li><code>/dev/sda</code>：大概是 VM 设置里分配的硬盘空间大小\n<ul>\n<li><code>/dev/sda1</code>：bios_grub</li>\n<li><code>/dev/sda2</code>：<code>/boot</code></li>\n<li>物理卷 pv：<code>/dev/sda3</code>\n<ul>\n<li>逻辑卷 lv：\n<ul>\n<li>文件系统 <code>/dev/mapper/ubuntu--vg-ubuntu--lv</code> -&gt;\n<code>/dev/dm-0</code></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n<p>需求：</p>\n<ol type=\"1\">\n<li>先扩 sda</li>\n<li> 从 sda 向 sda3 匀</li>\n<li>从 sda3 向 lv 匀</li>\n</ol>\n<h2 id=\"步骤\">步骤</h2>\n<ol type=\"1\">\n<li><p>给 VM 的虚拟磁盘扩容</p>\n<p>关机状态下：编辑虚拟机设置 -&gt; 硬盘 -&gt; 扩展</p></li>\n<li><p>从 sda 向 sda3 匀</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> parted</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GNU Parted 3.4</span><br><span class=\"line\">Using /dev/sda</span><br><span class=\"line\">Welcome to GNU Parted! Type 'help' to view a list of commands.</span><br><span class=\"line\">(parted) print all</span><br><span class=\"line\">// 输出……</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print free</span><br><span class=\"line\">Model: VMware, VMware Virtual S (scsi)</span><br><span class=\"line\">Disk /dev/sda: 32.2GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags:</span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name  Flags</span><br><span class=\"line\">        17.4kB  1049kB  1031kB  Free Space</span><br><span class=\"line\"> 1      1049kB  2097kB  1049kB                     bios_grub</span><br><span class=\"line\"> 2      2097kB  1904MB  1902MB  ext4</span><br><span class=\"line\"> 3      1904MB  21.5GB  19.6GB</span><br><span class=\"line\">        21.5GB  32.2GB  10.7GB  Free Space</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) resizepart 3</span><br><span class=\"line\">End?  [21.5GB]? 32.3GB //在后面输入扩到的 End，比 End 略大就是扩到底</span><br></pre></td></tr></tbody></table></figure>\n<p>扩完后，<code>sudo pvs</code> 出的 /dev/sda3 会比 <code>lsblk</code>\n出的 sda3 小，执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> pvresize /dev/sda3</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>从 sda3 向 lv 匀</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> lvresize -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv</span><br></pre></td></tr></tbody></table></figure>\n<p>扩完后，<code>df -h</code> 出的 /dev/mapper/ubuntu--vg-ubuntu--lv\n还没变，执行：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n"},{"title":"菜谱","date":"2024-07-16T11:00:00.000Z","_content":"\n厨艺不精。\n\n<!--more-->\n\n## 食材预处理\n\n刀工：斜着切圆柱体。\n\n- 提前泡的：干的东西如干木耳、干香菇、干粉条\n  - 土豆：切完之后要洗两道把表面的淀粉洗掉，或者提前泡水里。否则炒的时候会粘锅。\n- 去芯的：苦瓜\n- 去皮的：丝瓜、蒜、火腿肠\n- 不用去皮的：西红柿、茄子\n- 去不去皮都行的：黄瓜\n\n## 常识\n\n- 煎：油倒得少，做的是表面功夫。\n- 炸：油倒得多，做的是浴。\n\n生抽和老抽：在酱油发酵的不同阶段抽出的酱油。生抽比老抽的颜色浅，后者用于上色。\n\n## 主食\n\n### 下米饭\n\n下米饭是除了泡面之外第二简单的，因为有电饭锅。泡面只有三个步骤：烧水、撕包装、倒水。\n\n1. 用碗盛生米倒到电饭锅内锅里，一碗生米够两个人吃\n2. 接水到电饭锅内锅里，用米铲一通搅和，淘米\n3. 把水倒了，接新水\n4. 把内锅放到外锅里，插电，按键\n\n### 下面条\n\n下面条和泡面的原理一样，只是容器从纸桶换成了铁锅，食材从面饼换成了工厂产的干面或者压面店产的手工面。\n\n1. 先烧水，等水冒泡\n2. 下面条，用筷子分散，防粘锅\n3. 不盖锅盖\n4. 等水第二次开，加水\n5. 等水第三次开，加水\n6. 等水第四次开，加水\n\n我们家喜欢把面条和汤菜分开做。\n\n### 下饺子\n\n提前准备蒜末酱油醋\n\n1. 把水烧冒泡，下饺子。如果饺子刚从冰箱冷冻柜里拿出来，不等水烧开就下锅\n2. 用铲子轻推饺子，防止粘锅\n3. 下饺子之后水温会下降，等它再次冒泡，再加多次水\n4. 中途适当用铲子轻推饺子，防止粘锅\n5. 结束条件是饺子浮起来，用铲子轻推饺子后可看到晃动\n\n## 肉系\n\n### 炒生瘦肉\n\n1. 把锅烧狠一点再倒油\n2. 倒一道油到锅里，晃一道之后把锅里的油倒了，再倒一次油，稍微多点\n3. 把切后的生肉下锅快炒\n4. 放盐，后略\n\n熟瘦肉通常不单炒，和其他菜一起炒。\n\n### 煎鱼\n\n鲈鱼和罗非鱼刺少。\n\n1. 先用大火把锅烧热，倒油让锅的其余部分都粘上\n2. **把火关小**，以免油温太高\n3. 下鱼煎一会，随时翻面看，在第一次翻面之前用铲子把多余的油浇到另一面上\n4. 煎的有颜色但是不深，下葱姜蒜，几秒之后立刻倒水煮，要么糊了\n5. 倒水的量把鱼淹没到一半，不可能把整条鱼都淹没了\n6. 下少许生抽、醋、料酒、白糖，等它煮成浓汁\n\n<img src=\"/blog/images/fish.webp\">\n\n失败的情况包括：没有及时把火关小，造成鱼皮粘锅，鱼肉解体。\n\n### 可乐鸡翅\n\n1. 提前准备葱姜料酒冰糖可乐生抽，切葱姜\n2. 把鸡翅洗一道，用刀在每个鸡翅的两面划一道口子\n3. 倒葱姜料酒腌制数小时\n4. 放锅里煮开三到五分钟\n5. 滤水后煎至两面变色\n6. 倒可乐，加冰糖、生抽，煮十几分钟\n\n## 蛋系\n\n### 番茄炒蛋\n\n番茄炒蛋是男人必会的菜。笔者在 18 岁之前就会了。\n\n1. 打鸡蛋到碗里，用筷子搅和\n2. 剥大蒜，用刀背把蒜瓣压碎\n3. 每个番茄先切成两半，再绕着蒂切，不一定切成规则形状\n4. 开换气扇、天然气、火炉子，等锅把里面的少量水烧干\n5. 倒油，不用等油冒烟\n6. 下鸡蛋，用铲子把一坨的鸡蛋切碎，炒\n7. 下西红柿和大蒜，用铲子炒，放盐炒\n8. 看情况可选择加水\n9. 出锅。如果有下一道菜需洗锅，否则关火、天然气、换气扇\n\n### 二泉映月\n\n1. 你需要一台电饼铛。或者平底锅小火（没试过）\n2. 切火腿、倒点油摆盘、打鸡蛋、撒上葱花香菜\n3. 注意翻面\n\n<img src=\"/blog/images/2quan.webp\">\n\n### 蒸鸡蛋糕\n\n锅里放蒸盘，蒸盘上放盘，盘里放鸡蛋，盖上锅盖蒸。\n\n除了放鸡蛋，还要放温水和盐，按两个鸡蛋加水到大半碗的比例。锅可以改成微波炉。\n\n### 番茄蛋汤\n\n1. 炒番茄\n2. 加水，等水冒泡，打鸡蛋\n3. 把鸡蛋液直接淋到锅里\n\n这种方法不适用于下面条时的蛋汤，面条用炸蛋比蛋花更好吃。\n\n### 水煮蛋\n\n加点盐和醋好剥壳。\n\n### 蛋的各种形态\n\n有水煮蛋、荷包蛋、炸蛋、煎蛋、蛋花、蛋月、蛋糕。\n","source":"_posts/菜谱.md","raw":"---\ntitle: 菜谱\ndate: 2024-07-16 19:00:00\npermalink: cook.html\n---\n\n厨艺不精。\n\n<!--more-->\n\n## 食材预处理\n\n刀工：斜着切圆柱体。\n\n- 提前泡的：干的东西如干木耳、干香菇、干粉条\n  - 土豆：切完之后要洗两道把表面的淀粉洗掉，或者提前泡水里。否则炒的时候会粘锅。\n- 去芯的：苦瓜\n- 去皮的：丝瓜、蒜、火腿肠\n- 不用去皮的：西红柿、茄子\n- 去不去皮都行的：黄瓜\n\n## 常识\n\n- 煎：油倒得少，做的是表面功夫。\n- 炸：油倒得多，做的是浴。\n\n生抽和老抽：在酱油发酵的不同阶段抽出的酱油。生抽比老抽的颜色浅，后者用于上色。\n\n## 主食\n\n### 下米饭\n\n下米饭是除了泡面之外第二简单的，因为有电饭锅。泡面只有三个步骤：烧水、撕包装、倒水。\n\n1. 用碗盛生米倒到电饭锅内锅里，一碗生米够两个人吃\n2. 接水到电饭锅内锅里，用米铲一通搅和，淘米\n3. 把水倒了，接新水\n4. 把内锅放到外锅里，插电，按键\n\n### 下面条\n\n下面条和泡面的原理一样，只是容器从纸桶换成了铁锅，食材从面饼换成了工厂产的干面或者压面店产的手工面。\n\n1. 先烧水，等水冒泡\n2. 下面条，用筷子分散，防粘锅\n3. 不盖锅盖\n4. 等水第二次开，加水\n5. 等水第三次开，加水\n6. 等水第四次开，加水\n\n我们家喜欢把面条和汤菜分开做。\n\n### 下饺子\n\n提前准备蒜末酱油醋\n\n1. 把水烧冒泡，下饺子。如果饺子刚从冰箱冷冻柜里拿出来，不等水烧开就下锅\n2. 用铲子轻推饺子，防止粘锅\n3. 下饺子之后水温会下降，等它再次冒泡，再加多次水\n4. 中途适当用铲子轻推饺子，防止粘锅\n5. 结束条件是饺子浮起来，用铲子轻推饺子后可看到晃动\n\n## 肉系\n\n### 炒生瘦肉\n\n1. 把锅烧狠一点再倒油\n2. 倒一道油到锅里，晃一道之后把锅里的油倒了，再倒一次油，稍微多点\n3. 把切后的生肉下锅快炒\n4. 放盐，后略\n\n熟瘦肉通常不单炒，和其他菜一起炒。\n\n### 煎鱼\n\n鲈鱼和罗非鱼刺少。\n\n1. 先用大火把锅烧热，倒油让锅的其余部分都粘上\n2. **把火关小**，以免油温太高\n3. 下鱼煎一会，随时翻面看，在第一次翻面之前用铲子把多余的油浇到另一面上\n4. 煎的有颜色但是不深，下葱姜蒜，几秒之后立刻倒水煮，要么糊了\n5. 倒水的量把鱼淹没到一半，不可能把整条鱼都淹没了\n6. 下少许生抽、醋、料酒、白糖，等它煮成浓汁\n\n<img src=\"/blog/images/fish.webp\">\n\n失败的情况包括：没有及时把火关小，造成鱼皮粘锅，鱼肉解体。\n\n### 可乐鸡翅\n\n1. 提前准备葱姜料酒冰糖可乐生抽，切葱姜\n2. 把鸡翅洗一道，用刀在每个鸡翅的两面划一道口子\n3. 倒葱姜料酒腌制数小时\n4. 放锅里煮开三到五分钟\n5. 滤水后煎至两面变色\n6. 倒可乐，加冰糖、生抽，煮十几分钟\n\n## 蛋系\n\n### 番茄炒蛋\n\n番茄炒蛋是男人必会的菜。笔者在 18 岁之前就会了。\n\n1. 打鸡蛋到碗里，用筷子搅和\n2. 剥大蒜，用刀背把蒜瓣压碎\n3. 每个番茄先切成两半，再绕着蒂切，不一定切成规则形状\n4. 开换气扇、天然气、火炉子，等锅把里面的少量水烧干\n5. 倒油，不用等油冒烟\n6. 下鸡蛋，用铲子把一坨的鸡蛋切碎，炒\n7. 下西红柿和大蒜，用铲子炒，放盐炒\n8. 看情况可选择加水\n9. 出锅。如果有下一道菜需洗锅，否则关火、天然气、换气扇\n\n### 二泉映月\n\n1. 你需要一台电饼铛。或者平底锅小火（没试过）\n2. 切火腿、倒点油摆盘、打鸡蛋、撒上葱花香菜\n3. 注意翻面\n\n<img src=\"/blog/images/2quan.webp\">\n\n### 蒸鸡蛋糕\n\n锅里放蒸盘，蒸盘上放盘，盘里放鸡蛋，盖上锅盖蒸。\n\n除了放鸡蛋，还要放温水和盐，按两个鸡蛋加水到大半碗的比例。锅可以改成微波炉。\n\n### 番茄蛋汤\n\n1. 炒番茄\n2. 加水，等水冒泡，打鸡蛋\n3. 把鸡蛋液直接淋到锅里\n\n这种方法不适用于下面条时的蛋汤，面条用炸蛋比蛋花更好吃。\n\n### 水煮蛋\n\n加点盐和醋好剥壳。\n\n### 蛋的各种形态\n\n有水煮蛋、荷包蛋、炸蛋、煎蛋、蛋花、蛋月、蛋糕。\n","slug":"菜谱","published":1,"updated":"2025-09-14T14:49:48.687Z","__permalink":"cook.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lns000o5ws6bq6af3pf","content":"<p>厨艺不精。</p>\n<span id=\"more\"></span>\n<h2 id=\"食材预处理\">食材预处理</h2>\n<p>刀工：斜着切圆柱体。</p>\n<ul>\n<li>提前泡的：干的东西如干木耳、干香菇、干粉条\n<ul>\n<li>土豆：切完之后要洗两道把表面的淀粉洗掉，或者提前泡水里。否则炒的时候会粘锅。</li>\n</ul></li>\n<li>去芯的：苦瓜</li>\n<li>去皮的：丝瓜、蒜、火腿肠</li>\n<li>不用去皮的：西红柿、茄子</li>\n<li>去不去皮都行的：黄瓜</li>\n</ul>\n<h2 id=\"常识\">常识</h2>\n<ul>\n<li>煎：油倒得少，做的是表面功夫。</li>\n<li>炸：油倒得多，做的是浴。</li>\n</ul>\n<p>生抽和老抽：在酱油发酵的不同阶段抽出的酱油。生抽比老抽的颜色浅，后者用于上色。</p>\n<h2 id=\"主食\">主食</h2>\n<h3 id=\"下米饭\">下米饭</h3>\n<p>下米饭是除了泡面之外第二简单的，因为有电饭锅。泡面只有三个步骤：烧水、撕包装、倒水。</p>\n<ol type=\"1\">\n<li>用碗盛生米倒到电饭锅内锅里，一碗生米够两个人吃</li>\n<li>接水到电饭锅内锅里，用米铲一通搅和，淘米</li>\n<li>把水倒了，接新水</li>\n<li>把内锅放到外锅里，插电，按键</li>\n</ol>\n<h3 id=\"下面条\">下面条</h3>\n<p>下面条和泡面的原理一样，只是容器从纸桶换成了铁锅，食材从面饼换成了工厂产的干面或者压面店产的手工面。</p>\n<ol type=\"1\">\n<li>先烧水，等水冒泡</li>\n<li>下面条，用筷子分散，防粘锅</li>\n<li>不盖锅盖</li>\n<li>等水第二次开，加水</li>\n<li>等水第三次开，加水</li>\n<li>等水第四次开，加水</li>\n</ol>\n<p>我们家喜欢把面条和汤菜分开做。</p>\n<h3 id=\"下饺子\">下饺子</h3>\n<p>提前准备蒜末酱油醋</p>\n<ol type=\"1\">\n<li>把水烧冒泡，下饺子。如果饺子刚从冰箱冷冻柜里拿出来，不等水烧开就下锅</li>\n<li>用铲子轻推饺子，防止粘锅</li>\n<li>下饺子之后水温会下降，等它再次冒泡，再加多次水</li>\n<li>中途适当用铲子轻推饺子，防止粘锅</li>\n<li>结束条件是饺子浮起来，用铲子轻推饺子后可看到晃动</li>\n</ol>\n<h2 id=\"肉系\">肉系</h2>\n<h3 id=\"炒生瘦肉\">炒生瘦肉</h3>\n<ol type=\"1\">\n<li>把锅烧狠一点再倒油</li>\n<li>倒一道油到锅里，晃一道之后把锅里的油倒了，再倒一次油，稍微多点</li>\n<li>把切后的生肉下锅快炒</li>\n<li>放盐，后略</li>\n</ol>\n<p>熟瘦肉通常不单炒，和其他菜一起炒。</p>\n<h3 id=\"煎鱼\">煎鱼</h3>\n<p>鲈鱼和罗非鱼刺少。</p>\n<ol type=\"1\">\n<li>先用大火把锅烧热，倒油让锅的其余部分都粘上</li>\n<li><strong>把火关小</strong>，以免油温太高</li>\n<li>下鱼煎一会，随时翻面看，在第一次翻面之前用铲子把多余的油浇到另一面上</li>\n<li>煎的有颜色但是不深，下葱姜蒜，几秒之后立刻倒水煮，要么糊了</li>\n<li>倒水的量把鱼淹没到一半，不可能把整条鱼都淹没了</li>\n<li>下少许生抽、醋、料酒、白糖，等它煮成浓汁</li>\n</ol>\n<p><img src=\"/blog/images/fish.webp\"></p>\n<p>失败的情况包括：没有及时把火关小，造成鱼皮粘锅，鱼肉解体。</p>\n<h3 id=\"可乐鸡翅\">可乐鸡翅</h3>\n<ol type=\"1\">\n<li>提前准备葱姜料酒冰糖可乐生抽，切葱姜</li>\n<li>把鸡翅洗一道，用刀在每个鸡翅的两面划一道口子</li>\n<li>倒葱姜料酒腌制数小时</li>\n<li>放锅里煮开三到五分钟</li>\n<li>滤水后煎至两面变色</li>\n<li>倒可乐，加冰糖、生抽，煮十几分钟</li>\n</ol>\n<h2 id=\"蛋系\">蛋系</h2>\n<h3 id=\"番茄炒蛋\">番茄炒蛋</h3>\n<p>番茄炒蛋是男人必会的菜。笔者在 18 岁之前就会了。</p>\n<ol type=\"1\">\n<li>打鸡蛋到碗里，用筷子搅和</li>\n<li>剥大蒜，用刀背把蒜瓣压碎</li>\n<li>每个番茄先切成两半，再绕着蒂切，不一定切成规则形状</li>\n<li>开换气扇、天然气、火炉子，等锅把里面的少量水烧干</li>\n<li>倒油，不用等油冒烟</li>\n<li>下鸡蛋，用铲子把一坨的鸡蛋切碎，炒</li>\n<li>下西红柿和大蒜，用铲子炒，放盐炒</li>\n<li>看情况可选择加水</li>\n<li>出锅。如果有下一道菜需洗锅，否则关火、天然气、换气扇</li>\n</ol>\n<h3 id=\"二泉映月\">二泉映月</h3>\n<ol type=\"1\">\n<li>你需要一台电饼铛。或者平底锅小火（没试过）</li>\n<li>切火腿、倒点油摆盘、打鸡蛋、撒上葱花香菜</li>\n<li>注意翻面</li>\n</ol>\n<p><img src=\"/blog/images/2quan.webp\"></p>\n<h3 id=\"蒸鸡蛋糕\">蒸鸡蛋糕</h3>\n<p>锅里放蒸盘，蒸盘上放盘，盘里放鸡蛋，盖上锅盖蒸。</p>\n<p>除了放鸡蛋，还要放温水和盐，按两个鸡蛋加水到大半碗的比例。锅可以改成微波炉。</p>\n<h3 id=\"番茄蛋汤\">番茄蛋汤</h3>\n<ol type=\"1\">\n<li>炒番茄</li>\n<li>加水，等水冒泡，打鸡蛋</li>\n<li>把鸡蛋液直接淋到锅里</li>\n</ol>\n<p>这种方法不适用于下面条时的蛋汤，面条用炸蛋比蛋花更好吃。</p>\n<h3 id=\"水煮蛋\">水煮蛋</h3>\n<p>加点盐和醋好剥壳。</p>\n<h3 id=\"蛋的各种形态\">蛋的各种形态</h3>\n<p>有水煮蛋、荷包蛋、炸蛋、煎蛋、蛋花、蛋月、蛋糕。</p>\n","excerpt":"<p>厨艺不精。</p>","more":"<h2 id=\"食材预处理\">食材预处理</h2>\n<p>刀工：斜着切圆柱体。</p>\n<ul>\n<li>提前泡的：干的东西如干木耳、干香菇、干粉条\n<ul>\n<li>土豆：切完之后要洗两道把表面的淀粉洗掉，或者提前泡水里。否则炒的时候会粘锅。</li>\n</ul></li>\n<li>去芯的：苦瓜</li>\n<li>去皮的：丝瓜、蒜、火腿肠</li>\n<li>不用去皮的：西红柿、茄子</li>\n<li>去不去皮都行的：黄瓜</li>\n</ul>\n<h2 id=\"常识\">常识</h2>\n<ul>\n<li>煎：油倒得少，做的是表面功夫。</li>\n<li>炸：油倒得多，做的是浴。</li>\n</ul>\n<p>生抽和老抽：在酱油发酵的不同阶段抽出的酱油。生抽比老抽的颜色浅，后者用于上色。</p>\n<h2 id=\"主食\">主食</h2>\n<h3 id=\"下米饭\">下米饭</h3>\n<p>下米饭是除了泡面之外第二简单的，因为有电饭锅。泡面只有三个步骤：烧水、撕包装、倒水。</p>\n<ol type=\"1\">\n<li>用碗盛生米倒到电饭锅内锅里，一碗生米够两个人吃</li>\n<li>接水到电饭锅内锅里，用米铲一通搅和，淘米</li>\n<li>把水倒了，接新水</li>\n<li>把内锅放到外锅里，插电，按键</li>\n</ol>\n<h3 id=\"下面条\">下面条</h3>\n<p>下面条和泡面的原理一样，只是容器从纸桶换成了铁锅，食材从面饼换成了工厂产的干面或者压面店产的手工面。</p>\n<ol type=\"1\">\n<li>先烧水，等水冒泡</li>\n<li>下面条，用筷子分散，防粘锅</li>\n<li>不盖锅盖</li>\n<li>等水第二次开，加水</li>\n<li>等水第三次开，加水</li>\n<li>等水第四次开，加水</li>\n</ol>\n<p>我们家喜欢把面条和汤菜分开做。</p>\n<h3 id=\"下饺子\">下饺子</h3>\n<p>提前准备蒜末酱油醋</p>\n<ol type=\"1\">\n<li>把水烧冒泡，下饺子。如果饺子刚从冰箱冷冻柜里拿出来，不等水烧开就下锅</li>\n<li>用铲子轻推饺子，防止粘锅</li>\n<li>下饺子之后水温会下降，等它再次冒泡，再加多次水</li>\n<li>中途适当用铲子轻推饺子，防止粘锅</li>\n<li>结束条件是饺子浮起来，用铲子轻推饺子后可看到晃动</li>\n</ol>\n<h2 id=\"肉系\">肉系</h2>\n<h3 id=\"炒生瘦肉\">炒生瘦肉</h3>\n<ol type=\"1\">\n<li>把锅烧狠一点再倒油</li>\n<li>倒一道油到锅里，晃一道之后把锅里的油倒了，再倒一次油，稍微多点</li>\n<li>把切后的生肉下锅快炒</li>\n<li>放盐，后略</li>\n</ol>\n<p>熟瘦肉通常不单炒，和其他菜一起炒。</p>\n<h3 id=\"煎鱼\">煎鱼</h3>\n<p>鲈鱼和罗非鱼刺少。</p>\n<ol type=\"1\">\n<li>先用大火把锅烧热，倒油让锅的其余部分都粘上</li>\n<li><strong>把火关小</strong>，以免油温太高</li>\n<li>下鱼煎一会，随时翻面看，在第一次翻面之前用铲子把多余的油浇到另一面上</li>\n<li>煎的有颜色但是不深，下葱姜蒜，几秒之后立刻倒水煮，要么糊了</li>\n<li>倒水的量把鱼淹没到一半，不可能把整条鱼都淹没了</li>\n<li>下少许生抽、醋、料酒、白糖，等它煮成浓汁</li>\n</ol>\n<p><img src=\"/blog/images/fish.webp\"></p>\n<p>失败的情况包括：没有及时把火关小，造成鱼皮粘锅，鱼肉解体。</p>\n<h3 id=\"可乐鸡翅\">可乐鸡翅</h3>\n<ol type=\"1\">\n<li>提前准备葱姜料酒冰糖可乐生抽，切葱姜</li>\n<li>把鸡翅洗一道，用刀在每个鸡翅的两面划一道口子</li>\n<li>倒葱姜料酒腌制数小时</li>\n<li>放锅里煮开三到五分钟</li>\n<li>滤水后煎至两面变色</li>\n<li>倒可乐，加冰糖、生抽，煮十几分钟</li>\n</ol>\n<h2 id=\"蛋系\">蛋系</h2>\n<h3 id=\"番茄炒蛋\">番茄炒蛋</h3>\n<p>番茄炒蛋是男人必会的菜。笔者在 18 岁之前就会了。</p>\n<ol type=\"1\">\n<li>打鸡蛋到碗里，用筷子搅和</li>\n<li>剥大蒜，用刀背把蒜瓣压碎</li>\n<li>每个番茄先切成两半，再绕着蒂切，不一定切成规则形状</li>\n<li>开换气扇、天然气、火炉子，等锅把里面的少量水烧干</li>\n<li>倒油，不用等油冒烟</li>\n<li>下鸡蛋，用铲子把一坨的鸡蛋切碎，炒</li>\n<li>下西红柿和大蒜，用铲子炒，放盐炒</li>\n<li>看情况可选择加水</li>\n<li>出锅。如果有下一道菜需洗锅，否则关火、天然气、换气扇</li>\n</ol>\n<h3 id=\"二泉映月\">二泉映月</h3>\n<ol type=\"1\">\n<li>你需要一台电饼铛。或者平底锅小火（没试过）</li>\n<li>切火腿、倒点油摆盘、打鸡蛋、撒上葱花香菜</li>\n<li>注意翻面</li>\n</ol>\n<p><img src=\"/blog/images/2quan.webp\"></p>\n<h3 id=\"蒸鸡蛋糕\">蒸鸡蛋糕</h3>\n<p>锅里放蒸盘，蒸盘上放盘，盘里放鸡蛋，盖上锅盖蒸。</p>\n<p>除了放鸡蛋，还要放温水和盐，按两个鸡蛋加水到大半碗的比例。锅可以改成微波炉。</p>\n<h3 id=\"番茄蛋汤\">番茄蛋汤</h3>\n<ol type=\"1\">\n<li>炒番茄</li>\n<li>加水，等水冒泡，打鸡蛋</li>\n<li>把鸡蛋液直接淋到锅里</li>\n</ol>\n<p>这种方法不适用于下面条时的蛋汤，面条用炸蛋比蛋花更好吃。</p>\n<h3 id=\"水煮蛋\">水煮蛋</h3>\n<p>加点盐和醋好剥壳。</p>\n<h3 id=\"蛋的各种形态\">蛋的各种形态</h3>\n<p>有水煮蛋、荷包蛋、炸蛋、煎蛋、蛋花、蛋月、蛋糕。</p>"},{"title":"诺爱儿空摘火咬","date":"2025-09-21T09:45:00.000Z","_content":"\n这里主要介绍了游戏《苍翼：混沌效应》中一种有趣的玩法，随之介绍了一些游戏机制。\n\n## 游戏简介\n\n《苍翼：混沌效应》（Blazblue Entropy Effect，简称BBEE）为日本格斗游戏《苍翼默示录》系列正版授权游戏，由中国游戏公司91Act开发。游戏世界观和原作无关，开发团队把该系列里的一些游戏角色及其招式沿用了过来，打造了一款2D横版，带肉鸽性质的动作游戏。\n\nBBEE的输出分“潜能”和“策略”两大块。潜能是需要玩家手动去按的，即对人物的搓招，游戏的动作部分。如玩家依次按普攻·技能键所打出的招式会和只按一个键打出的招式不同。策略是一种随人物动作触发，不耗蓝的身外技能。如【冲刺燃烧】策略为，在人物的冲刺动作经过敌人后，对敌人施加一段时间的燃烧效果。\n\n如果我们想解放双手，甚至一招秒掉BOOS，就主选策略；如果想搓招，就主选潜能。前者被称为“轮椅”打法，意思是，让霍金来打，都能打过。同时，游戏的难度梯度是有一个逐级的跨越的，在后续还可以选择自己调整难度加点，即“混沌值”。所以，该游戏对动作游戏新手和老手都很友好。就像其制作人厂长说的一样，是一款乱按也能玩得很炫酷的游戏。\n\n## 诺爱儿\n\n诺爱儿·梵米利昂（Noel Vermillion）是该游戏里玩家可以操控的角色之一，即自机。“自机”一词是源自弹幕射击游戏里，玩家自己的飞机，与敌机相区分。事实上，诺爱儿本身也像战斗机一样，是带有热武器的。\n\n在BBEE里，诺爱儿普攻的武器是双枪，重击是霰弹枪，技能有机关枪、手雷、榴弹炮、火箭弹、激光炮等，被誉为“行走的武器库”。她出招时的语音，即喊出来招式的名字，在所有自机里是最烫嘴的一个。但她的性格按原作属于是比较内敛的，在击败BOOS之后，还有一种不相信自己打过了的感觉。这也是一个比较有意思的地方。\n\n她的上手难度，或者说前期纯靠手法打不好的程度目前在“新人最不推荐的角色”中排在正数第二。因为她是一个远程攻击占大头的角色，其被动技能为对离自身约1.6个冲刺距离之外的敌人有1.6倍的乘算伤害。这意味着我们不能把她完全当做一个近战输出的角色来打，她是游戏里为数不多的远程输出角色之一。而在前期还没有拿到潜能的情况下，她的近战输出是比其他自机弱的，所以相对于其他自机更不好上手。\n\n尽管不同自机的上手难度不一，但得益于游戏的策略机制，每一个自机都有与之相适用的轮椅打法。诺爱儿的轮椅打法是技能冰爆，即使用【技能寒冷-寒气爆发-冰霜爆破-冰霜脉冲】这一策略组，配合三撕裂【普攻撕裂-撕裂冲击-致命撕裂】、三脉冲【传承技感电-】，在满潜的情况下，一管大招可以直接把BOOS打掉17w血。\n\n## 火咬\n\nNAN-FIRE BITE，俗称火咬，是BBEE第四大关的关底BOOS之一。\n\n她的战斗房间是所有BOOS战里y轴最高的，因为她在战斗中途会飞到老高的天上去放激光。对于这个动作，我们要么先在地上躲，等她开完大之后落地再打，要么和她一起飞上天，追着打。之所以有玩家会去选后者，除了想去贯彻动作游戏要有动作的玩法之外，最主要还是因为能获得这个成就：\n\n\n\n火咬触发上天动作需要其血量低于一个阈值，这意味着我们在空摘之前和之后还需要应对她的其他招式。在游戏的普通难度和进阶难度里，BOOS的血量和招式是不完全一样的。这里针对的是“意识挑战”倒数第二关里的进阶火咬，其招式和进阶0混“意识训练”里的一样，初始血量是36w，18w血以下可以飞天，破防血量是5w。TapTap用户“黑化的德鲁伊”在其帖子［《苍翼超限全BOSS全技能、破防机制演示及无伤躲法》](https://www.taptap.cn/moment/678693452162008426)中总结出了火咬的9种招式。笔者将其合并为了以下几种：\n\n1. 红光小砍/大砍，判定范围为其身前的矩形。前摇动作为抬手，或一个闪现。\n2. 全x轴冲刺，有提示线。\n2. 蓄力陀螺\n4. 开局落地\n\n\n## 空摘的难点及游戏机制\n\n击落她的难点在于：\n\n第一，她的身位是很高的，而我们在地面上。如果我们想打到她，有两条路可选，打地对空技能，或者拉近距离后打空对空技能。\n\n对前者来说，绝大多数自机在地面上根本打不到它，只有两台自机是例外的，一个叫九重，另一个叫雷琪儿，她们都可以站在地上把火咬摘下来。九重的大激光柱子顶天立地，再加上自动追踪，对单来说就近似于全屏攻击了；雷琪儿更是有一个真正意义上全屏攻击的技能，她们都远比诺爱儿轮椅。那我们为什么还要用诺爱儿摘呢，为了好看和好玩。理论上来说，像白面的【虚空阵 迅雷】、琴恩的冰箭也有地对空的效果，像这些技能都是好看的，但相对于诺给玩家的操作难度更高，输出效率更低。相比之下，诺不用手法就可以借助自己打出的子弹，动量守恒原地上天，给人一种看起来很有操作的感觉。话说回来，诺唯一一个地对空技能是【掩护天降】，在没有起爆栓的情况下需要自己瞄准。但火咬的高度已经是远在我们地面镜头的视野之外了，瞄不准不说，瞄准本身也要耗费时间，和前面的例子一样都是输出效率不够的，所以我们只能选第二条路，飞上去打空对空技能。\n\n但火咬的高度用正常的三段跳根本跳不上去，我们还需要借助一些带向上位移的动作。这也是有两条路可选的，使用自机动作，或借助传承动作。BBEE的自机之所以被称为“原型体”，是因为其带有一个传承的机制，在游戏开局之前可以选择两个非本原型体的传承体，分别传承他们的两个策略、一个天赋以及一个传承技。比如九重的传承技【快速装填·改】在开局之前可以传给本局的自机，自机在游戏过程中可以使用这个技能，来进行一次位移。\n\n诺爱儿除了跳之外，带向上位移的动作还有制地爆射、左轮、火箭弹、机枪。制地爆射是一个起跳后原地上天的动作，有五段。它的段数可以用跳跃重置，\n\n制地爆射和左轮都是不耗蓝的泛普攻技能\n\n左轮的段数可以用冲刺和跳跃重置，且不消耗跳跃段数。\n\n诺爱儿最多三冲三跳，所以最多空连15段制地，或者7段左轮，打完后就只能用耗蓝的火箭弹或者机枪了。理论上只要你蓝足够多，比如拿了无限火力，只靠打机枪和火箭弹上天也行。但现实情况是，由于以下的第三点，我们要省一点蓝。\n\n第二，在她放激光时，如果自机碰到了，会直接被击飞。击飞是指，当自机处于敌人招式的判定范围内，被判定为一次受击掉血后，自机的动作中断，且在之后的一小段时间里无法被玩家控制。如果我们在上天的过程中被判定为击飞了，不仅浪费了一次动作，还会使自己的身位下降。它的对策是，要么我们不受击，要么在受击后进行一次补偿。\n\n对于后者，绝大多数自机都有受击后被击飞的机制。对此，我们在游戏过程中会发现，不同自机有着一些相似的潜能词条，如【被击飞时可按跳跃受身，恢复到可控制状态并无敌一秒】。但这个词条仍然会使我们的动作中断。\n\n另一种补偿对策是，霸体状态。霸体状态是指，当人物被判定为受击后，自身的动作不会被打断。白面的天赋就是这样的，他在受击或格挡成功后会获得霸体。所以如果我们想硬扛几次激光，非无伤空摘火咬，可以使用白面的传承天赋【】，或者传承技【金刚】来获得霸体状态。白面是一个靠弹反来输出的角色，与之平衡的是，他的所有潜能都没有闪避状态。\n\n闪避状态是指，在人物做出一个特定动作后，该动作的部分帧里不会被判定为受击，可用于闪避敌人的部分招式。比如大部分自机的冲刺动作，在闪避帧的时间窗内可用于躲避敌人的招式。对诺爱儿来说，可看到其处于闪避状态时整个人物是一个虚影，我们可以利用她动作的闪避帧来闪避火咬的激光。诺的闪避帧详解可参照此视频。\n\n不是所有招式都可被闪避的。敌人的紫色感叹号招式无法被闪避，在闪避状态下仍会被判定为受击。为应对这种招式，我们只能把身位移动到招式判定范围之外，或者用无敌状态躲过去。比如奥莉朵的紫色蝴蝶，诺爱儿用冲刺会撞上，但可以用换弹躲过去，因为诺的冲刺伴随一个闪避状态，而换弹伴随一个无敌闪避状态。\n\n无敌状态和《马里奥》系列里的无敌不一样，该状态本身并不附带对敌的额外伤害，只是使敌人招式的判定范围无效。所以从功能上来说，无敌状态是自带闪避状态的，通常称之为无敌闪避状态。我们可以通过九重的传承技【（名字老长的传送门）】或琴恩的传承天赋【时间冻结】来获得无敌闪避状态。\n\n第三，火咬在空中放激光时，是一个霸体状态。只有把她打破防后，她才会落地，此时判定为空摘成功。BOOS破防的机制是，在其做出特定的动作，或掉到一个足够低的血量之后，此时攻击BOOS，其会在原地眩晕一段时间并不做出任何动作，此时我们称为破防。火咬的破防点有两个：落地动作后摇和低血破防。当她在天上的时候，我们只能选择第二个。这意味着我们在位移上去之后，还要打一段足够的输出。\n\n## 如何空摘\n\n上面的分析都是带有事后诸葛亮性质的。因为B站UP在其视频中已经总结出了空摘的公式打法。所以我们需要做的只是背下这套连招，然后在合适的时间里，一键不错的按出来。\n\n起跳时机：火咬飞到背景雕像的角上\n\n1. 跳-制地爆射5次-左轮（动作结束后火咬的第一根激光出来）\n2. 跳-制地爆射5次-左轮\n3. 跳（三跳用完）-制地爆射2次-左轮\n4. 右冲扔雷-一发火箭弹\n5. 左轮-左冲a-左轮-右冲挂起爆栓（三冲用完）\n6. 点喝药-立刻接掩护-连发火箭弹把火咬打到5万血破防。\n\n容易失误的地方有：\n\n1. 打左轮时忘记把方向键往上\n2. 打第三组制地后忘记打左轮\n3. 跳时、放掩护天降时忘记松开左手。","source":"_posts/诺爱儿空摘火咬.md","raw":"---\ntitle: 诺爱儿空摘火咬\ndate: 2025-09-21 17:45:00\npermalink: bbee.html\n---\n\n这里主要介绍了游戏《苍翼：混沌效应》中一种有趣的玩法，随之介绍了一些游戏机制。\n\n## 游戏简介\n\n《苍翼：混沌效应》（Blazblue Entropy Effect，简称BBEE）为日本格斗游戏《苍翼默示录》系列正版授权游戏，由中国游戏公司91Act开发。游戏世界观和原作无关，开发团队把该系列里的一些游戏角色及其招式沿用了过来，打造了一款2D横版，带肉鸽性质的动作游戏。\n\nBBEE的输出分“潜能”和“策略”两大块。潜能是需要玩家手动去按的，即对人物的搓招，游戏的动作部分。如玩家依次按普攻·技能键所打出的招式会和只按一个键打出的招式不同。策略是一种随人物动作触发，不耗蓝的身外技能。如【冲刺燃烧】策略为，在人物的冲刺动作经过敌人后，对敌人施加一段时间的燃烧效果。\n\n如果我们想解放双手，甚至一招秒掉BOOS，就主选策略；如果想搓招，就主选潜能。前者被称为“轮椅”打法，意思是，让霍金来打，都能打过。同时，游戏的难度梯度是有一个逐级的跨越的，在后续还可以选择自己调整难度加点，即“混沌值”。所以，该游戏对动作游戏新手和老手都很友好。就像其制作人厂长说的一样，是一款乱按也能玩得很炫酷的游戏。\n\n## 诺爱儿\n\n诺爱儿·梵米利昂（Noel Vermillion）是该游戏里玩家可以操控的角色之一，即自机。“自机”一词是源自弹幕射击游戏里，玩家自己的飞机，与敌机相区分。事实上，诺爱儿本身也像战斗机一样，是带有热武器的。\n\n在BBEE里，诺爱儿普攻的武器是双枪，重击是霰弹枪，技能有机关枪、手雷、榴弹炮、火箭弹、激光炮等，被誉为“行走的武器库”。她出招时的语音，即喊出来招式的名字，在所有自机里是最烫嘴的一个。但她的性格按原作属于是比较内敛的，在击败BOOS之后，还有一种不相信自己打过了的感觉。这也是一个比较有意思的地方。\n\n她的上手难度，或者说前期纯靠手法打不好的程度目前在“新人最不推荐的角色”中排在正数第二。因为她是一个远程攻击占大头的角色，其被动技能为对离自身约1.6个冲刺距离之外的敌人有1.6倍的乘算伤害。这意味着我们不能把她完全当做一个近战输出的角色来打，她是游戏里为数不多的远程输出角色之一。而在前期还没有拿到潜能的情况下，她的近战输出是比其他自机弱的，所以相对于其他自机更不好上手。\n\n尽管不同自机的上手难度不一，但得益于游戏的策略机制，每一个自机都有与之相适用的轮椅打法。诺爱儿的轮椅打法是技能冰爆，即使用【技能寒冷-寒气爆发-冰霜爆破-冰霜脉冲】这一策略组，配合三撕裂【普攻撕裂-撕裂冲击-致命撕裂】、三脉冲【传承技感电-】，在满潜的情况下，一管大招可以直接把BOOS打掉17w血。\n\n## 火咬\n\nNAN-FIRE BITE，俗称火咬，是BBEE第四大关的关底BOOS之一。\n\n她的战斗房间是所有BOOS战里y轴最高的，因为她在战斗中途会飞到老高的天上去放激光。对于这个动作，我们要么先在地上躲，等她开完大之后落地再打，要么和她一起飞上天，追着打。之所以有玩家会去选后者，除了想去贯彻动作游戏要有动作的玩法之外，最主要还是因为能获得这个成就：\n\n\n\n火咬触发上天动作需要其血量低于一个阈值，这意味着我们在空摘之前和之后还需要应对她的其他招式。在游戏的普通难度和进阶难度里，BOOS的血量和招式是不完全一样的。这里针对的是“意识挑战”倒数第二关里的进阶火咬，其招式和进阶0混“意识训练”里的一样，初始血量是36w，18w血以下可以飞天，破防血量是5w。TapTap用户“黑化的德鲁伊”在其帖子［《苍翼超限全BOSS全技能、破防机制演示及无伤躲法》](https://www.taptap.cn/moment/678693452162008426)中总结出了火咬的9种招式。笔者将其合并为了以下几种：\n\n1. 红光小砍/大砍，判定范围为其身前的矩形。前摇动作为抬手，或一个闪现。\n2. 全x轴冲刺，有提示线。\n2. 蓄力陀螺\n4. 开局落地\n\n\n## 空摘的难点及游戏机制\n\n击落她的难点在于：\n\n第一，她的身位是很高的，而我们在地面上。如果我们想打到她，有两条路可选，打地对空技能，或者拉近距离后打空对空技能。\n\n对前者来说，绝大多数自机在地面上根本打不到它，只有两台自机是例外的，一个叫九重，另一个叫雷琪儿，她们都可以站在地上把火咬摘下来。九重的大激光柱子顶天立地，再加上自动追踪，对单来说就近似于全屏攻击了；雷琪儿更是有一个真正意义上全屏攻击的技能，她们都远比诺爱儿轮椅。那我们为什么还要用诺爱儿摘呢，为了好看和好玩。理论上来说，像白面的【虚空阵 迅雷】、琴恩的冰箭也有地对空的效果，像这些技能都是好看的，但相对于诺给玩家的操作难度更高，输出效率更低。相比之下，诺不用手法就可以借助自己打出的子弹，动量守恒原地上天，给人一种看起来很有操作的感觉。话说回来，诺唯一一个地对空技能是【掩护天降】，在没有起爆栓的情况下需要自己瞄准。但火咬的高度已经是远在我们地面镜头的视野之外了，瞄不准不说，瞄准本身也要耗费时间，和前面的例子一样都是输出效率不够的，所以我们只能选第二条路，飞上去打空对空技能。\n\n但火咬的高度用正常的三段跳根本跳不上去，我们还需要借助一些带向上位移的动作。这也是有两条路可选的，使用自机动作，或借助传承动作。BBEE的自机之所以被称为“原型体”，是因为其带有一个传承的机制，在游戏开局之前可以选择两个非本原型体的传承体，分别传承他们的两个策略、一个天赋以及一个传承技。比如九重的传承技【快速装填·改】在开局之前可以传给本局的自机，自机在游戏过程中可以使用这个技能，来进行一次位移。\n\n诺爱儿除了跳之外，带向上位移的动作还有制地爆射、左轮、火箭弹、机枪。制地爆射是一个起跳后原地上天的动作，有五段。它的段数可以用跳跃重置，\n\n制地爆射和左轮都是不耗蓝的泛普攻技能\n\n左轮的段数可以用冲刺和跳跃重置，且不消耗跳跃段数。\n\n诺爱儿最多三冲三跳，所以最多空连15段制地，或者7段左轮，打完后就只能用耗蓝的火箭弹或者机枪了。理论上只要你蓝足够多，比如拿了无限火力，只靠打机枪和火箭弹上天也行。但现实情况是，由于以下的第三点，我们要省一点蓝。\n\n第二，在她放激光时，如果自机碰到了，会直接被击飞。击飞是指，当自机处于敌人招式的判定范围内，被判定为一次受击掉血后，自机的动作中断，且在之后的一小段时间里无法被玩家控制。如果我们在上天的过程中被判定为击飞了，不仅浪费了一次动作，还会使自己的身位下降。它的对策是，要么我们不受击，要么在受击后进行一次补偿。\n\n对于后者，绝大多数自机都有受击后被击飞的机制。对此，我们在游戏过程中会发现，不同自机有着一些相似的潜能词条，如【被击飞时可按跳跃受身，恢复到可控制状态并无敌一秒】。但这个词条仍然会使我们的动作中断。\n\n另一种补偿对策是，霸体状态。霸体状态是指，当人物被判定为受击后，自身的动作不会被打断。白面的天赋就是这样的，他在受击或格挡成功后会获得霸体。所以如果我们想硬扛几次激光，非无伤空摘火咬，可以使用白面的传承天赋【】，或者传承技【金刚】来获得霸体状态。白面是一个靠弹反来输出的角色，与之平衡的是，他的所有潜能都没有闪避状态。\n\n闪避状态是指，在人物做出一个特定动作后，该动作的部分帧里不会被判定为受击，可用于闪避敌人的部分招式。比如大部分自机的冲刺动作，在闪避帧的时间窗内可用于躲避敌人的招式。对诺爱儿来说，可看到其处于闪避状态时整个人物是一个虚影，我们可以利用她动作的闪避帧来闪避火咬的激光。诺的闪避帧详解可参照此视频。\n\n不是所有招式都可被闪避的。敌人的紫色感叹号招式无法被闪避，在闪避状态下仍会被判定为受击。为应对这种招式，我们只能把身位移动到招式判定范围之外，或者用无敌状态躲过去。比如奥莉朵的紫色蝴蝶，诺爱儿用冲刺会撞上，但可以用换弹躲过去，因为诺的冲刺伴随一个闪避状态，而换弹伴随一个无敌闪避状态。\n\n无敌状态和《马里奥》系列里的无敌不一样，该状态本身并不附带对敌的额外伤害，只是使敌人招式的判定范围无效。所以从功能上来说，无敌状态是自带闪避状态的，通常称之为无敌闪避状态。我们可以通过九重的传承技【（名字老长的传送门）】或琴恩的传承天赋【时间冻结】来获得无敌闪避状态。\n\n第三，火咬在空中放激光时，是一个霸体状态。只有把她打破防后，她才会落地，此时判定为空摘成功。BOOS破防的机制是，在其做出特定的动作，或掉到一个足够低的血量之后，此时攻击BOOS，其会在原地眩晕一段时间并不做出任何动作，此时我们称为破防。火咬的破防点有两个：落地动作后摇和低血破防。当她在天上的时候，我们只能选择第二个。这意味着我们在位移上去之后，还要打一段足够的输出。\n\n## 如何空摘\n\n上面的分析都是带有事后诸葛亮性质的。因为B站UP在其视频中已经总结出了空摘的公式打法。所以我们需要做的只是背下这套连招，然后在合适的时间里，一键不错的按出来。\n\n起跳时机：火咬飞到背景雕像的角上\n\n1. 跳-制地爆射5次-左轮（动作结束后火咬的第一根激光出来）\n2. 跳-制地爆射5次-左轮\n3. 跳（三跳用完）-制地爆射2次-左轮\n4. 右冲扔雷-一发火箭弹\n5. 左轮-左冲a-左轮-右冲挂起爆栓（三冲用完）\n6. 点喝药-立刻接掩护-连发火箭弹把火咬打到5万血破防。\n\n容易失误的地方有：\n\n1. 打左轮时忘记把方向键往上\n2. 打第三组制地后忘记打左轮\n3. 跳时、放掩护天降时忘记松开左手。","slug":"诺爱儿空摘火咬","published":1,"updated":"2025-09-27T14:13:39.000Z","__permalink":"bbee.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnt000p5ws6eh2pg6p0","content":"<p>这里主要介绍了游戏《苍翼：混沌效应》中一种有趣的玩法，随之介绍了一些游戏机制。</p>\n<h2 id=\"游戏简介\">游戏简介</h2>\n<p>《苍翼：混沌效应》（Blazblue Entropy\nEffect，简称 BBEE）为日本格斗游戏《苍翼默示录》系列正版授权游戏，由中国游戏公司 91Act 开发。游戏世界观和原作无关，开发团队把该系列里的一些游戏角色及其招式沿用了过来，打造了一款 2D 横版，带肉鸽性质的动作游戏。</p>\n<p>BBEE 的输出分 “潜能” 和 “策略” 两大块。潜能是需要玩家手动去按的，即对人物的搓招，游戏的动作部分。如玩家依次按普攻・技能键所打出的招式会和只按一个键打出的招式不同。策略是一种随人物动作触发，不耗蓝的身外技能。如【冲刺燃烧】策略为，在人物的冲刺动作经过敌人后，对敌人施加一段时间的燃烧效果。</p>\n<p>如果我们想解放双手，甚至一招秒掉 BOOS，就主选策略；如果想搓招，就主选潜能。前者被称为 “轮椅” 打法，意思是，让霍金来打，都能打过。同时，游戏的难度梯度是有一个逐级的跨越的，在后续还可以选择自己调整难度加点，即 “混沌值”。所以，该游戏对动作游戏新手和老手都很友好。就像其制作人厂长说的一样，是一款乱按也能玩得很炫酷的游戏。</p>\n<h2 id=\"诺爱儿\">诺爱儿</h2>\n<p>诺爱儿・梵米利昂（Noel\nVermillion）是该游戏里玩家可以操控的角色之一，即自机。“自机” 一词是源自弹幕射击游戏里，玩家自己的飞机，与敌机相区分。事实上，诺爱儿本身也像战斗机一样，是带有热武器的。</p>\n<p>在 BBEE 里，诺爱儿普攻的武器是双枪，重击是霰弹枪，技能有机关枪、手雷、榴弹炮、火箭弹、激光炮等，被誉为 “行走的武器库”。她出招时的语音，即喊出来招式的名字，在所有自机里是最烫嘴的一个。但她的性格按原作属于是比较内敛的，在击败 BOOS 之后，还有一种不相信自己打过了的感觉。这也是一个比较有意思的地方。</p>\n<p>她的上手难度，或者说前期纯靠手法打不好的程度目前在 “新人最不推荐的角色” 中排在正数第二。因为她是一个远程攻击占大头的角色，其被动技能为对离自身约 1.6 个冲刺距离之外的敌人有 1.6 倍的乘算伤害。这意味着我们不能把她完全当做一个近战输出的角色来打，她是游戏里为数不多的远程输出角色之一。而在前期还没有拿到潜能的情况下，她的近战输出是比其他自机弱的，所以相对于其他自机更不好上手。</p>\n<p>尽管不同自机的上手难度不一，但得益于游戏的策略机制，每一个自机都有与之相适用的轮椅打法。诺爱儿的轮椅打法是技能冰爆，即使用【技能寒冷 - 寒气爆发 - 冰霜爆破 - 冰霜脉冲】这一策略组，配合三撕裂【普攻撕裂 - 撕裂冲击 - 致命撕裂】、三脉冲【传承技感电 -】，在满潜的情况下，一管大招可以直接把 BOOS 打掉 17w 血。</p>\n<h2 id=\"火咬\">火咬</h2>\n<p>NAN-FIRE BITE，俗称火咬，是 BBEE 第四大关的关底 BOOS 之一。</p>\n<p>她的战斗房间是所有 BOOS 战里 y 轴最高的，因为她在战斗中途会飞到老高的天上去放激光。对于这个动作，我们要么先在地上躲，等她开完大之后落地再打，要么和她一起飞上天，追着打。之所以有玩家会去选后者，除了想去贯彻动作游戏要有动作的玩法之外，最主要还是因为能获得这个成就：</p>\n<p>火咬触发上天动作需要其血量低于一个阈值，这意味着我们在空摘之前和之后还需要应对她的其他招式。在游戏的普通难度和进阶难度里，BOOS 的血量和招式是不完全一样的。这里针对的是 “意识挑战” 倒数第二关里的进阶火咬，其招式和进阶 0 混 “意识训练” 里的一样，初始血量是 36w，18w 血以下可以飞天，破防血量是 5w。TapTap 用户 “黑化的德鲁伊” 在其帖子［《苍翼超限全 BOSS 全技能、破防机制演示及无伤躲法》](https://www.taptap.cn/moment/678693452162008426) 中总结出了火咬的 9 种招式。笔者将其合并为了以下几种：</p>\n<ol type=\"1\">\n<li>红光小砍 / 大砍，判定范围为其身前的矩形。前摇动作为抬手，或一个闪现。</li>\n<li>全 x 轴冲刺，有提示线。</li>\n<li>蓄力陀螺</li>\n<li>开局落地</li>\n</ol>\n<h2 id=\"空摘的难点及游戏机制\">空摘的难点及游戏机制</h2>\n<p>击落她的难点在于：</p>\n<p>第一，她的身位是很高的，而我们在地面上。如果我们想打到她，有两条路可选，打地对空技能，或者拉近距离后打空对空技能。</p>\n<p>对前者来说，绝大多数自机在地面上根本打不到它，只有两台自机是例外的，一个叫九重，另一个叫雷琪儿，她们都可以站在地上把火咬摘下来。九重的大激光柱子顶天立地，再加上自动追踪，对单来说就近似于全屏攻击了；雷琪儿更是有一个真正意义上全屏攻击的技能，她们都远比诺爱儿轮椅。那我们为什么还要用诺爱儿摘呢，为了好看和好玩。理论上来说，像白面的【虚空阵\n迅雷】、琴恩的冰箭也有地对空的效果，像这些技能都是好看的，但相对于诺给玩家的操作难度更高，输出效率更低。相比之下，诺不用手法就可以借助自己打出的子弹，动量守恒原地上天，给人一种看起来很有操作的感觉。话说回来，诺唯一一个地对空技能是【掩护天降】，在没有起爆栓的情况下需要自己瞄准。但火咬的高度已经是远在我们地面镜头的视野之外了，瞄不准不说，瞄准本身也要耗费时间，和前面的例子一样都是输出效率不够的，所以我们只能选第二条路，飞上去打空对空技能。</p>\n<p>但火咬的高度用正常的三段跳根本跳不上去，我们还需要借助一些带向上位移的动作。这也是有两条路可选的，使用自机动作，或借助传承动作。BBEE 的自机之所以被称为 “原型体”，是因为其带有一个传承的机制，在游戏开局之前可以选择两个非本原型体的传承体，分别传承他们的两个策略、一个天赋以及一个传承技。比如九重的传承技【快速装填・改】在开局之前可以传给本局的自机，自机在游戏过程中可以使用这个技能，来进行一次位移。</p>\n<p>诺爱儿除了跳之外，带向上位移的动作还有制地爆射、左轮、火箭弹、机枪。制地爆射是一个起跳后原地上天的动作，有五段。它的段数可以用跳跃重置，</p>\n<p>制地爆射和左轮都是不耗蓝的泛普攻技能</p>\n<p>左轮的段数可以用冲刺和跳跃重置，且不消耗跳跃段数。</p>\n<p>诺爱儿最多三冲三跳，所以最多空连 15 段制地，或者 7 段左轮，打完后就只能用耗蓝的火箭弹或者机枪了。理论上只要你蓝足够多，比如拿了无限火力，只靠打机枪和火箭弹上天也行。但现实情况是，由于以下的第三点，我们要省一点蓝。</p>\n<p>第二，在她放激光时，如果自机碰到了，会直接被击飞。击飞是指，当自机处于敌人招式的判定范围内，被判定为一次受击掉血后，自机的动作中断，且在之后的一小段时间里无法被玩家控制。如果我们在上天的过程中被判定为击飞了，不仅浪费了一次动作，还会使自己的身位下降。它的对策是，要么我们不受击，要么在受击后进行一次补偿。</p>\n<p>对于后者，绝大多数自机都有受击后被击飞的机制。对此，我们在游戏过程中会发现，不同自机有着一些相似的潜能词条，如【被击飞时可按跳跃受身，恢复到可控制状态并无敌一秒】。但这个词条仍然会使我们的动作中断。</p>\n<p>另一种补偿对策是，霸体状态。霸体状态是指，当人物被判定为受击后，自身的动作不会被打断。白面的天赋就是这样的，他在受击或格挡成功后会获得霸体。所以如果我们想硬扛几次激光，非无伤空摘火咬，可以使用白面的传承天赋【】，或者传承技【金刚】来获得霸体状态。白面是一个靠弹反来输出的角色，与之平衡的是，他的所有潜能都没有闪避状态。</p>\n<p>闪避状态是指，在人物做出一个特定动作后，该动作的部分帧里不会被判定为受击，可用于闪避敌人的部分招式。比如大部分自机的冲刺动作，在闪避帧的时间窗内可用于躲避敌人的招式。对诺爱儿来说，可看到其处于闪避状态时整个人物是一个虚影，我们可以利用她动作的闪避帧来闪避火咬的激光。诺的闪避帧详解可参照此视频。</p>\n<p>不是所有招式都可被闪避的。敌人的紫色感叹号招式无法被闪避，在闪避状态下仍会被判定为受击。为应对这种招式，我们只能把身位移动到招式判定范围之外，或者用无敌状态躲过去。比如奥莉朵的紫色蝴蝶，诺爱儿用冲刺会撞上，但可以用换弹躲过去，因为诺的冲刺伴随一个闪避状态，而换弹伴随一个无敌闪避状态。</p>\n<p>无敌状态和《马里奥》系列里的无敌不一样，该状态本身并不附带对敌的额外伤害，只是使敌人招式的判定范围无效。所以从功能上来说，无敌状态是自带闪避状态的，通常称之为无敌闪避状态。我们可以通过九重的传承技【（名字老长的传送门）】或琴恩的传承天赋【时间冻结】来获得无敌闪避状态。</p>\n<p>第三，火咬在空中放激光时，是一个霸体状态。只有把她打破防后，她才会落地，此时判定为空摘成功。BOOS 破防的机制是，在其做出特定的动作，或掉到一个足够低的血量之后，此时攻击 BOOS，其会在原地眩晕一段时间并不做出任何动作，此时我们称为破防。火咬的破防点有两个：落地动作后摇和低血破防。当她在天上的时候，我们只能选择第二个。这意味着我们在位移上去之后，还要打一段足够的输出。</p>\n<h2 id=\"如何空摘\">如何空摘</h2>\n<p>上面的分析都是带有事后诸葛亮性质的。因为 B 站 UP 在其视频中已经总结出了空摘的公式打法。所以我们需要做的只是背下这套连招，然后在合适的时间里，一键不错的按出来。</p>\n<p>起跳时机：火咬飞到背景雕像的角上</p>\n<ol type=\"1\">\n<li>跳 - 制地爆射 5 次 - 左轮（动作结束后火咬的第一根激光出来）</li>\n<li>跳 - 制地爆射 5 次 - 左轮</li>\n<li>跳（三跳用完）- 制地爆射 2 次 - 左轮</li>\n<li>右冲扔雷 - 一发火箭弹</li>\n<li>左轮 - 左冲 a - 左轮 - 右冲挂起爆栓（三冲用完）</li>\n<li>点喝药 - 立刻接掩护 - 连发火箭弹把火咬打到 5 万血破防。</li>\n</ol>\n<p>容易失误的地方有：</p>\n<ol type=\"1\">\n<li>打左轮时忘记把方向键往上</li>\n<li>打第三组制地后忘记打左轮</li>\n<li>跳时、放掩护天降时忘记松开左手。</li>\n</ol>\n","excerpt":"","more":"<p>这里主要介绍了游戏《苍翼：混沌效应》中一种有趣的玩法，随之介绍了一些游戏机制。</p>\n<h2 id=\"游戏简介\">游戏简介</h2>\n<p>《苍翼：混沌效应》（Blazblue Entropy\nEffect，简称 BBEE）为日本格斗游戏《苍翼默示录》系列正版授权游戏，由中国游戏公司 91Act 开发。游戏世界观和原作无关，开发团队把该系列里的一些游戏角色及其招式沿用了过来，打造了一款 2D 横版，带肉鸽性质的动作游戏。</p>\n<p>BBEE 的输出分 “潜能” 和 “策略” 两大块。潜能是需要玩家手动去按的，即对人物的搓招，游戏的动作部分。如玩家依次按普攻・技能键所打出的招式会和只按一个键打出的招式不同。策略是一种随人物动作触发，不耗蓝的身外技能。如【冲刺燃烧】策略为，在人物的冲刺动作经过敌人后，对敌人施加一段时间的燃烧效果。</p>\n<p>如果我们想解放双手，甚至一招秒掉 BOOS，就主选策略；如果想搓招，就主选潜能。前者被称为 “轮椅” 打法，意思是，让霍金来打，都能打过。同时，游戏的难度梯度是有一个逐级的跨越的，在后续还可以选择自己调整难度加点，即 “混沌值”。所以，该游戏对动作游戏新手和老手都很友好。就像其制作人厂长说的一样，是一款乱按也能玩得很炫酷的游戏。</p>\n<h2 id=\"诺爱儿\">诺爱儿</h2>\n<p>诺爱儿・梵米利昂（Noel\nVermillion）是该游戏里玩家可以操控的角色之一，即自机。“自机” 一词是源自弹幕射击游戏里，玩家自己的飞机，与敌机相区分。事实上，诺爱儿本身也像战斗机一样，是带有热武器的。</p>\n<p>在 BBEE 里，诺爱儿普攻的武器是双枪，重击是霰弹枪，技能有机关枪、手雷、榴弹炮、火箭弹、激光炮等，被誉为 “行走的武器库”。她出招时的语音，即喊出来招式的名字，在所有自机里是最烫嘴的一个。但她的性格按原作属于是比较内敛的，在击败 BOOS 之后，还有一种不相信自己打过了的感觉。这也是一个比较有意思的地方。</p>\n<p>她的上手难度，或者说前期纯靠手法打不好的程度目前在 “新人最不推荐的角色” 中排在正数第二。因为她是一个远程攻击占大头的角色，其被动技能为对离自身约 1.6 个冲刺距离之外的敌人有 1.6 倍的乘算伤害。这意味着我们不能把她完全当做一个近战输出的角色来打，她是游戏里为数不多的远程输出角色之一。而在前期还没有拿到潜能的情况下，她的近战输出是比其他自机弱的，所以相对于其他自机更不好上手。</p>\n<p>尽管不同自机的上手难度不一，但得益于游戏的策略机制，每一个自机都有与之相适用的轮椅打法。诺爱儿的轮椅打法是技能冰爆，即使用【技能寒冷 - 寒气爆发 - 冰霜爆破 - 冰霜脉冲】这一策略组，配合三撕裂【普攻撕裂 - 撕裂冲击 - 致命撕裂】、三脉冲【传承技感电 -】，在满潜的情况下，一管大招可以直接把 BOOS 打掉 17w 血。</p>\n<h2 id=\"火咬\">火咬</h2>\n<p>NAN-FIRE BITE，俗称火咬，是 BBEE 第四大关的关底 BOOS 之一。</p>\n<p>她的战斗房间是所有 BOOS 战里 y 轴最高的，因为她在战斗中途会飞到老高的天上去放激光。对于这个动作，我们要么先在地上躲，等她开完大之后落地再打，要么和她一起飞上天，追着打。之所以有玩家会去选后者，除了想去贯彻动作游戏要有动作的玩法之外，最主要还是因为能获得这个成就：</p>\n<p>火咬触发上天动作需要其血量低于一个阈值，这意味着我们在空摘之前和之后还需要应对她的其他招式。在游戏的普通难度和进阶难度里，BOOS 的血量和招式是不完全一样的。这里针对的是 “意识挑战” 倒数第二关里的进阶火咬，其招式和进阶 0 混 “意识训练” 里的一样，初始血量是 36w，18w 血以下可以飞天，破防血量是 5w。TapTap 用户 “黑化的德鲁伊” 在其帖子［《苍翼超限全 BOSS 全技能、破防机制演示及无伤躲法》](https://www.taptap.cn/moment/678693452162008426) 中总结出了火咬的 9 种招式。笔者将其合并为了以下几种：</p>\n<ol type=\"1\">\n<li>红光小砍 / 大砍，判定范围为其身前的矩形。前摇动作为抬手，或一个闪现。</li>\n<li>全 x 轴冲刺，有提示线。</li>\n<li>蓄力陀螺</li>\n<li>开局落地</li>\n</ol>\n<h2 id=\"空摘的难点及游戏机制\">空摘的难点及游戏机制</h2>\n<p>击落她的难点在于：</p>\n<p>第一，她的身位是很高的，而我们在地面上。如果我们想打到她，有两条路可选，打地对空技能，或者拉近距离后打空对空技能。</p>\n<p>对前者来说，绝大多数自机在地面上根本打不到它，只有两台自机是例外的，一个叫九重，另一个叫雷琪儿，她们都可以站在地上把火咬摘下来。九重的大激光柱子顶天立地，再加上自动追踪，对单来说就近似于全屏攻击了；雷琪儿更是有一个真正意义上全屏攻击的技能，她们都远比诺爱儿轮椅。那我们为什么还要用诺爱儿摘呢，为了好看和好玩。理论上来说，像白面的【虚空阵\n迅雷】、琴恩的冰箭也有地对空的效果，像这些技能都是好看的，但相对于诺给玩家的操作难度更高，输出效率更低。相比之下，诺不用手法就可以借助自己打出的子弹，动量守恒原地上天，给人一种看起来很有操作的感觉。话说回来，诺唯一一个地对空技能是【掩护天降】，在没有起爆栓的情况下需要自己瞄准。但火咬的高度已经是远在我们地面镜头的视野之外了，瞄不准不说，瞄准本身也要耗费时间，和前面的例子一样都是输出效率不够的，所以我们只能选第二条路，飞上去打空对空技能。</p>\n<p>但火咬的高度用正常的三段跳根本跳不上去，我们还需要借助一些带向上位移的动作。这也是有两条路可选的，使用自机动作，或借助传承动作。BBEE 的自机之所以被称为 “原型体”，是因为其带有一个传承的机制，在游戏开局之前可以选择两个非本原型体的传承体，分别传承他们的两个策略、一个天赋以及一个传承技。比如九重的传承技【快速装填・改】在开局之前可以传给本局的自机，自机在游戏过程中可以使用这个技能，来进行一次位移。</p>\n<p>诺爱儿除了跳之外，带向上位移的动作还有制地爆射、左轮、火箭弹、机枪。制地爆射是一个起跳后原地上天的动作，有五段。它的段数可以用跳跃重置，</p>\n<p>制地爆射和左轮都是不耗蓝的泛普攻技能</p>\n<p>左轮的段数可以用冲刺和跳跃重置，且不消耗跳跃段数。</p>\n<p>诺爱儿最多三冲三跳，所以最多空连 15 段制地，或者 7 段左轮，打完后就只能用耗蓝的火箭弹或者机枪了。理论上只要你蓝足够多，比如拿了无限火力，只靠打机枪和火箭弹上天也行。但现实情况是，由于以下的第三点，我们要省一点蓝。</p>\n<p>第二，在她放激光时，如果自机碰到了，会直接被击飞。击飞是指，当自机处于敌人招式的判定范围内，被判定为一次受击掉血后，自机的动作中断，且在之后的一小段时间里无法被玩家控制。如果我们在上天的过程中被判定为击飞了，不仅浪费了一次动作，还会使自己的身位下降。它的对策是，要么我们不受击，要么在受击后进行一次补偿。</p>\n<p>对于后者，绝大多数自机都有受击后被击飞的机制。对此，我们在游戏过程中会发现，不同自机有着一些相似的潜能词条，如【被击飞时可按跳跃受身，恢复到可控制状态并无敌一秒】。但这个词条仍然会使我们的动作中断。</p>\n<p>另一种补偿对策是，霸体状态。霸体状态是指，当人物被判定为受击后，自身的动作不会被打断。白面的天赋就是这样的，他在受击或格挡成功后会获得霸体。所以如果我们想硬扛几次激光，非无伤空摘火咬，可以使用白面的传承天赋【】，或者传承技【金刚】来获得霸体状态。白面是一个靠弹反来输出的角色，与之平衡的是，他的所有潜能都没有闪避状态。</p>\n<p>闪避状态是指，在人物做出一个特定动作后，该动作的部分帧里不会被判定为受击，可用于闪避敌人的部分招式。比如大部分自机的冲刺动作，在闪避帧的时间窗内可用于躲避敌人的招式。对诺爱儿来说，可看到其处于闪避状态时整个人物是一个虚影，我们可以利用她动作的闪避帧来闪避火咬的激光。诺的闪避帧详解可参照此视频。</p>\n<p>不是所有招式都可被闪避的。敌人的紫色感叹号招式无法被闪避，在闪避状态下仍会被判定为受击。为应对这种招式，我们只能把身位移动到招式判定范围之外，或者用无敌状态躲过去。比如奥莉朵的紫色蝴蝶，诺爱儿用冲刺会撞上，但可以用换弹躲过去，因为诺的冲刺伴随一个闪避状态，而换弹伴随一个无敌闪避状态。</p>\n<p>无敌状态和《马里奥》系列里的无敌不一样，该状态本身并不附带对敌的额外伤害，只是使敌人招式的判定范围无效。所以从功能上来说，无敌状态是自带闪避状态的，通常称之为无敌闪避状态。我们可以通过九重的传承技【（名字老长的传送门）】或琴恩的传承天赋【时间冻结】来获得无敌闪避状态。</p>\n<p>第三，火咬在空中放激光时，是一个霸体状态。只有把她打破防后，她才会落地，此时判定为空摘成功。BOOS 破防的机制是，在其做出特定的动作，或掉到一个足够低的血量之后，此时攻击 BOOS，其会在原地眩晕一段时间并不做出任何动作，此时我们称为破防。火咬的破防点有两个：落地动作后摇和低血破防。当她在天上的时候，我们只能选择第二个。这意味着我们在位移上去之后，还要打一段足够的输出。</p>\n<h2 id=\"如何空摘\">如何空摘</h2>\n<p>上面的分析都是带有事后诸葛亮性质的。因为 B 站 UP 在其视频中已经总结出了空摘的公式打法。所以我们需要做的只是背下这套连招，然后在合适的时间里，一键不错的按出来。</p>\n<p>起跳时机：火咬飞到背景雕像的角上</p>\n<ol type=\"1\">\n<li>跳 - 制地爆射 5 次 - 左轮（动作结束后火咬的第一根激光出来）</li>\n<li>跳 - 制地爆射 5 次 - 左轮</li>\n<li>跳（三跳用完）- 制地爆射 2 次 - 左轮</li>\n<li>右冲扔雷 - 一发火箭弹</li>\n<li>左轮 - 左冲 a - 左轮 - 右冲挂起爆栓（三冲用完）</li>\n<li>点喝药 - 立刻接掩护 - 连发火箭弹把火咬打到 5 万血破防。</li>\n</ol>\n<p>容易失误的地方有：</p>\n<ol type=\"1\">\n<li>打左轮时忘记把方向键往上</li>\n<li>打第三组制地后忘记打左轮</li>\n<li>跳时、放掩护天降时忘记松开左手。</li>\n</ol>\n"},{"title":"音乐分享","date":"2024-04-03T16:00:00.000Z","_content":"\n## 什么样的音乐才算好听的\n\n可能分真性的好听和假性的好听。\n\n1. 药物的作用：能让你出现情绪反应的。\n2. 代言的作用：可以帮你说话的，歌词里所描述的经历有一部分与你类似，能让你感同身受，帮你说出了你说不出来的话。\n3. 分心的作用：可以让大部分的注意卷入进去的，用于催眠或者隔离负面的情绪。\n4. 满足崇高心理的作用：精巧的、出人意料的、神秘的、伪装的、集邮的、报菜名的。\n\n笔者认为，如果第三点的作用强烈，加上伴随正面的情绪（包括开心、放松和深情），算是真性好听的。如果第四点占主要作用，且在多数情况下听不会出现正面情绪，只有在以毒攻毒的状态下，或者突然想听的状态下，出现一些情绪，那么它算是假性好听的。\n\n过去在这里分享出来的，多数都是属于假性好听的，因为它主要是为了起第四个作用。\n\n<!--more-->\n\n<script>\nfunction toggleIframe(songType, songId, contianerId, aId) {\n  let container = document.getElementById(contianerId);\n  let a = document.getElementById(aId);\n  if (container === null) {\n    console.log(\"未获取到contianer\");\n  } else if (container.childNodes.length !== 1) {\n    container.removeChild(container.lastChild);\n    a.innerText = \"点此收听\";\n  } else {\n    let iframe = document.createElement(\"iframe\");\n    iframe.frameBorder = \"no\";\n    iframe.width = \"100%\";\n    iframe.height = 86;\n    iframe.src = `//music.163.com/outchain/player?type=${songType}&id=${songId}&auto=0&height=66`;\n    container.appendChild(iframe);\n    a.innerText = \"点此收起\";\n  }\n}\n</script>\n\n## 概念专辑\n\n先从概念专辑说起。概念专辑是一个比较有意思的概念：这种专辑里的所有歌是围绕着同一概念创作的。\n\n据说概念专辑的起源是英国摇滚乐队披头士的《Sgt. Pepper's Lonely Hearts Club Band》（1967）。大概是他们模拟了一个虚假的乐队，这个虚假的乐队是作为一个演出者给观众表演，这个表演的过程以一种故事的形式记录在了专辑里。可以这样理解：你在听这张专辑的同时，身临其境地感受了一场乐队的演出，但是这个乐队的名字不叫披头士，叫佩珀军士的孤独之心俱乐部乐队。\n\n> ↓ 浮生一日，佩珀军士里的大轴子。特点是在歌曲的最后一段会提醒你所有歌都放完了，该把碟子取下来了。但是这个没充 VIP 的版本里没有。<a id=\"a1\" onclick=toggleIframe(2,\"1476062\",\"s1\",\"a1\")>点此收听</a>\n\n<div id=\"s1\"></div>\n\n另一个英国摇滚乐队叫平克弗洛伊德。笔者没去过英国，不知道摇滚什么意思，也不知道乐队什么意思，也没吸过大麻，但是他们的歌就像大麻一样。乐队名字 Pink Floyd 取自乐队已故成员 Syd 所钟爱的两位蓝调音乐家的名字，和精神分析创始人 Sigmund Freud 无关，但是他们的歌与精神分析是同一个内核。《The Dark Side of The Moon》（1973）和《The Wall》（1979）都是整轨的专辑，都是前一首歌和后一首歌无缝衔接，加上最后一首歌的结束部分接着第一首的开头部分，所以听着比较瘆人。前者被称为“流行音乐史上最伟大的专辑之一”，后者被称为“史上最伟大的概念专辑”，至于他们说得对不对，你得自己听一遍才能判断。\n\n> ↓ 又爽又麻，迷墙里的第十九首。讲的乐队主唱 Pink 在上台演出之前接受医生治疗之后所感受到的画面。<a id=\"a2\" onclick=toggleIframe(3,\"2524058510\",\"s2\",\"a2\")>点此收听</a>\n\n<div id=\"s2\"></div>\n\n中国摇滚乐队有苍狼乐队，1997 年出了一张专辑叫《出走》，打头的歌是腾格尔著名的草原歌曲《天堂》。另外几首叫《出走》《有人说》《他乡》《上帝说》《我的心》《思念（一）》《思念（二）》《家》，从歌名就可以理出整个故事脉络。\n\n> ↓ 他乡没有我的那个天堂。<a id=\"a3\" onclick=toggleIframe(2,\"151484\",\"s3\",\"a3\")>点此收听</a>\n\n<div id=\"s3\"></div>\n\n中国的一部分摇滚歌曲喜欢和政治对话，政治就是人性，摇滚乐起到一个释放情绪的作用。中国第一张摇滚专辑是崔健的《新长征路上的摇滚》（1989），用“新长征”来比喻改革开放后的社会变革。更含蓄的表达方式是 Chinese Footbool 乐队的同名专辑（2015），是用普通少年的视角来写的。\n\n金属是从摇滚里分化而来的，它的特点是比摇滚乐有更重的吉他失真音色。金属受到了古典的影响，有很多长篇的，一些金属乐专辑被称为摇滚歌剧。那么长篇的歌剧和交响曲算概念专辑吗？\n\n> ↓ 四季。<a id=\"a4\" onclick=toggleIframe(2,\"5085871\",\"s4\",\"a4\")>点此收听</a>\n\n<div id=\"s4\"></div>\n\n> ↓ 如果你是形式中立派，不一定分成好几首歌，那么葫芦娃的十七种弹法也是概念专辑。<a id=\"a18\" onclick=toggleIframe(2,\"1864862748\",\"s18\",\"a18\")>点此收听</a>\n\n<div id=\"s18\"></div>\n\n> \\- 如果你是形式自由派，不一定以音频作为载体，《聊斋志异》也是概念专辑。[点此阅读](https://liaozhai.5000yan.com/)\n\n> ↓ 如果你是内容中立派，有曲子就行，那么录制一遍过的京剧也是概念专辑。<a id=\"a5\" onclick=toggleIframe(2,\"442314084\",\"s5\",\"a5\")>点此收听</a>\n\n<div id=\"s5\"></div>\n\n> ↓ 内容自由派：说事两部曲、卖拐三部曲、白云黑土系列也是概念专辑。<a id=\"a6\" onclick=toggleIframe(2,\"27630154\",\"s6\",\"a6\")>点此收听</a>\n\n<div id=\"s6\"></div>\n\n把《2:3》顺时针转九十度是一个人脸，这是二次元音乐人 ilem 在 2019 年发行的专辑封面。表面上看，是一碟二次元和一碟三次元在比翼同行，实际上还可以按时间顺序来解读：《勾指起誓》，但《夜间出租车》。因为《夜间出租车》，所以《大氿歌》。《大氿歌》之后变成了《得过且过的勇者》，《写给我家狗的歌》。最后回到《威海》遇见《售楼小姐》。它从情绪色彩上也是从“2”过渡到“3”的。\n\n> ↓ 大疯一趟两相忘，不知东方天既白。<a id=\"a7\" onclick=toggleIframe(2,\"1349959772\",\"s7\",\"a7\")>点此收听</a>\n\n<div id=\"s7\"></div>\n\n《无事发生》（2021）讲了一个关于海和夏天、忘与不忘的故事。专辑分两面，每面的感情起伏都是升-降-升。专辑名字于全文中出现两次：《瓦特城事件簿》和《阿比拿铁》，这两首歌都是以非人类视角来写的，α 面从前者开始降，β 面从后者开始升，且这两首歌在专辑歌曲的整体顺序上处于对称的位置。《瓦特城事件簿》歌词比较抽象，是以人工智能视角记录下的一桩凶杀案。据说“拿铁”是歌手宠物猫的名字，那么“阿比”就是指阿比西尼亚猫，古埃及猫的后裔。而《歌乐天》中的巴利语来自古印度。\n\n> ↓ 脚步踩得不深，浪花叠叠层层。被冲刷后一点不剩，就像无事发生。<a id=\"a8\" onclick=toggleIframe(2,\"1950552164\",\"s8\",\"a8\")>点此收听</a>\n\n<div id=\"s8\"></div>\n\n## 泛中文 V 家\n\n人声主体是由以 VOCALOID 为代表的一系列歌声合成引擎所合成出来的歌曲，是笔者听得最多的歌曲，无论是数目上还是时间上。其中《百万花王》是唯一一张抱着真正好听的心态购买的，因为它同时包含新歌和旧歌。其他专辑是先听了、后才好听，要么是出于一种情怀购买，要么听的是网络盗版，没有付费的。\n\n《百万花王》（2020）每首歌写了一种花，但是第一张专辑只收录了十首，这说明以后还要出九万九千九百九十九张专辑。有借花抒情的，如《梨花泽泽远山远》写故乡的梨花开呼唤着我归来。有把花拟人化的，如《生死一舞的爱语》写沙漠中的狐尾龙舌兰在枯萎之前借着狂风为爱生死一舞；《优雅的罪恶之源》写罂粟花从呼吸走到锁骨、一步一步让你臣服；《百里芭蕉百里花》写芭蕉幻化成女子与少年郎邂逅；《沉溺在神的砂海》写海妖女狸藻用管风琴让你的心沉船。更多是营造出一种氛围的，如《西西里的自由诗》为凯尔特风格；《时一现耳三千岁》饱含佛教色彩；《夜半闻声有归人》写悬铃花为逝去的人引路；《为新生振翅而上》写生态系统毁灭后的初生演替。牡丹被称为花中之王，为了折损她的部分光芒，让其他花也能好过，所以《我偏独坐第一香》的人声被掐了，只保留伴奏放在第一首。\n\n> ↓ 梦化身成帕耳忒诺珀，立于砂崖。遵循神的指引，和它融为一体。<a id=\"a9\" onclick=toggleIframe(3,\"2510102870\",\"s9\",\"a9\")>点此收听</a>\n\n<div id=\"s9\"></div>\n\n《南北寻光》（2015）的初版有 12 首歌，都是比较阳光慵懒的。2017 年的最终版里新加入了 6 首歌，可谓是画龙点睛了：专辑分为 AB 两面，B 面从《Adventure》开始转折，再从《眼泪》爬升到《卧室幻想》，从《AM10:00》过渡到《夏末》，之后是三首不同风味走马灯式的回顾，直到《Back To You》。这种转折使得专辑的故事性比初版强，在写南北组（乐正绫、洛天依）的旅行基础上加入了作者自身的心路历程。\n\n> ↓ 我只想知道属于我的是不是真的我的，还是由我替谁在保管着。<a id=\"a10\" onclick=toggleIframe(3,\"2494423396\",\"s10\",\"a10\")>点此收听</a>\n\n<div id=\"s10\"></div>\n\n《吉光片羽 Queendom》（2020）是一张来自 9 组不同创作者的作品集，但如果你有足够的想象力（或者说过度解读的能力），可以把它想象成一个完整的故事——包括一些其他作品集，即使是无关的作品集合，他们安排歌曲顺序也是有讲究的，一般是前两首歌奠定专辑的基调，重量级的放在最后两个。由于歌曲之间互相没有关系，就把专辑取名为“天马行空”“天方夜谭”“森罗万象”“海纳百川”之类的。特别地，该专辑的第七首歌叫《第七颗恒星自毁》。反例是：《平行四界 Quadimension X-3》（2022）的封面为一张蓝色的海底，但有一半以上的歌在歌名上就能让你联想到红色。\n\n> ↓ 五维介质的一些歌处于同一世界观，所以他们喜欢把一套旋律用到两首及以上的歌上。<a id=\"a11\" onclick=toggleIframe(3,\"2509712255\",\"s11\",\"a11\")>点此收听</a>\n\n<div id=\"s11\"></div>\n\n《从众效应》（2019）是一张金属乐专辑，倡导人们不要盲目从众。有讽刺炒股的炒得倾家荡产的《如意算盘》；讽刺擦边直播吸引流量的《聊播》；《天朝从众效应》写阶级和从众效应的客观存在；《一样一样》写社会阶层上升的通道是有限的，不在上层不代表你不优秀；《笨鸟先飞》讨论的是在网络上到底应不应该发声，作为《键盘侠的斗争哲学》的一个补充；《加特林》写生活节奏越来越快，想把手里的破事全给扫了，轶事是作者本人在编这首歌的曲子的时候，由于太忙了，所以直接照着他喜欢乐队的某一首歌扒了一段，被人指出之后道歉重写了。《大风歌 20xx》写互联网上的一些盲目粉丝将会在之后一次一次地捧杀他们的偶像，按曲绘来看，已经被捧杀的有冯小刚、六小龄童等。《君宝》致敬武侠小说泰斗金庸以及其笔下的人物张三丰，鼓励人们活得洒脱一点，为整张专辑的批判性做了一个缓和。\n\n> ↓ 我想无非是你入戏太深了，青红皂白不是什么象征是非的颜色。<a id=\"a12\" onclick=toggleIframe(2,\"531757237\",\"s12\",\"a12\")>点此收听</a>\n\n<div id=\"s12\"></div>\n\n《空中楼阁》是一张没有发布实体碟子的数字专辑，有魔幻现实主义的味道。特点是作者在每一年都会把专辑的发行时间修改到次年的 8 月 20 号，后来网易云音乐不允许改了，所以发行时间定格到了 2021 年 8 月 20 号。\n\n> ↓ 睁开眼就像大型梦游。<a id=\"a13\" onclick=toggleIframe(2,\"1463449959\",\"s13\",\"a13\")>点此收听</a>\n\n<div id=\"s13\"></div>\n\n《心术》（2023）是由心华独唱的专辑。如果你知道 VOCALOID 的日语是ボカロ的话，结合专辑封面以及最后一首歌的名字，你可以从专辑名里解读出至少四层含义。\n\n> 饿了么。<a id=\"a14\" onclick=toggleIframe(2,\"1398928356\",\"s14\",\"a14\")>点此收听</a>\n\n<div id=\"s14\"></div>\n\n## 《韶音赋》\n\n韶是一种乐曲，后引申为“美好的”；赋是一种文体，用于描写和抒情。词作者是[战场原妖精](https://space.bilibili.com/109564)。\n\n曲子有三个发布版本：初版由洛天依演唱，战场原妖精词曲调，2012 年发布于[哔哩哔哩](https://www.bilibili.com/video/BV1ax411F7z2/)；2014 年由作者重调重混，由洛天依演唱，收录于专辑[《平行四界 Quadimension》](https://www.bilibili.com/video/av1042693/)；2016 年由作者重调重混，由星尘演唱，发布于[哔哩哔哩](https://www.bilibili.com/video/BV1us41167ww/)。\n\n曲子结构并没有什么大变化，这是第二个版本。曲风属于：旋律金属/民谣金属（根据专辑宣传视频里的介绍）。<a id=\"a15\" onclick=toggleIframe(2,\"429460265\",\"s15\",\"a15\")>点此收听</a>\n\n<div id=\"s15\"></div>\n\n> <i>浮黎元始开天地&nbsp;诸神创世天各一</i><br/> <i>三清六御轮回助&nbsp;神界人间满紫气</i><br/>\n\n- 浮黎元始：浮黎元始天尊，指盘古。——也有说指玉皇大帝的，而盘古是祂的长子玉清元始天尊。这不重要，只需要知道祂是神仙，是创世者，是对自然的想象，是一种信仰。三清六御同理，也有三清四御的说法。可能是出于字形和音韵美，选择浮黎比玉清好，三清六御比三清四御好。（应该没有道长能找到这）\n- 紫气：祥瑞之气。\n\n> <i>天边远山泛青光&nbsp;忽而花落花满殇</i><br/> <i>我从雾中乘风来&nbsp;只为伴君不思量</i><br/>\n\n- 青光：绿色的光。也指光阴、时光。\n- 殇：非“正常”死亡：未成年而死、战死、为国捐躯。\n\n我是一名来自世界之外的旁观者：什么东西都不想，主打一个陪伴君。\n\n> <i>伏羲女娲神农氏&nbsp;江河淮济育生灵</i><br/> <i>南宫北斗映贤尚&nbsp;天涯海角随君行</i><br/>\n\n- 伏羲女娲神农氏：用三位代指多位。伏羲是“龙的传人”的龙，神农是“炎黄子孙”的炎帝。\n- 江河淮济：长江、黄河、淮河、济水。四条流入大海的河。\n- 南宫北斗：星辰。\n- 贤尚：尚：尊崇。可以把贤尚空想成人的意思。\n\n> <i>生来无欲享富贵&nbsp;但求为君咏思绪</i><br/> <i>若夫德行无领会&nbsp;自退远方乘浪归</i><br/>\n\n- 若夫：句首语气词，“至于……的话”。要是我没有领会到君的德行，那我就要回去了。\n\n> <i>我带着梦想&nbsp;带着希望&nbsp;带着力量</i><br/> <i>探寻人间的感伤</i><br/>\n\n> <i>请赋予我理想&nbsp;请赋予我希望</i><br/> <i>请赋予我一颗炽热的心房</i><br/> <i>让这情感释放</i><br/>\n\n赋予和赋是紧密相关的。一颗心房并不是量词使用不当，即使在生物学上也有心房、心室的概念，比如：<span class=\"r\">动脉血</span>从左心室流入<span class=\"r\">主动脉</span>，途经心肺之外的全身毛细血管消耗氧，变成<span class=\"b\">静脉血</span>，经<span class=\"b\">上腔、下腔静脉</span>流回右心房，这被称为体循环；<span class=\"b\">静脉血</span>从右心室流入<span class=\"r\">肺动脉</span>，途径肺里的毛细血管吸收氧，变成<span class=\"r\">动脉血</span>，经<span class=\"b\">肺静脉</span>流回左心房，这被称为肺循环。\n\n<style>\n   .r{\n      color: red;\n   }\n   .b{\n      color: blue;\n   }\n</style>\n\n> <i>泪水模糊了眼眶&nbsp;为何这般闪亮</i><br/> <i>就算我终会消亡&nbsp;终会迷茫</i><br/> <i>请让我带走这份熵</i><br/>\n\n熵是物理学的一个概念，用于描述系统的混乱程度。对于一个孤立的（不与外界交换能量和质量的）系统，其熵会一直增加。这被称为热力学第二定律。浅显不恰当的例子就是：如果不整理耳机线，它总是会缠起来。\n\n## 《Lost In Tianyi》\n\n[《Lost In Tianyi》](https://music.douban.com/subject/34778807/)，谁 Lost In Tianyi？创作者或者听众，写歌的人或者听歌的人。洛天依是歌声数据库，同时作为一个[纸片人](https://www.bilibili.com/video/BV1Hj411B7vc/)歌手。为什么写歌/听歌？要表达一些什么东西/缺失一些什么东西，或许是理想。所以《Lost In Tianyi》=《迷失在理想里》。\n\n**《8102》**：是 2018 倒过来——专辑 2019 年发行。\n\n> _倒流历史的始终 颠覆盖棺的对错 回到尚且一片空白的宇宙_\n\n注意最后一句：\n\n> _目力所及处的某一天 你在身边_\n\n“你”是谁？为什么是在“目力所及处的某一天”出现在身边？如果指的不是具体的人，而是洛天依（理想）的话，整张专辑就能说通了，还能接着下一首歌。\n\n**《啦哒哒》**：一人一猫。“你”这只猫是“我”的理想。迷茫的我看到了你、开始追求理想、与理想分离、发回忆刀、回到现实的一个人。怎么看出来是理想的？\n\n> _编织着我在现实中的梦_\n\n改名成《Lost In Tianyi》也没问题：\n\n> _我们正 不断 向交叉的路口走 迷了路 顺其自然不回头_\n\n**《最大化+》**：把窗口最大化\n\n> _穿梭在复制粘贴 再粘贴复制的无数窗口_\n\n**《风兮风兮》**：生物之以息相吹也\n\n> _冬扯云若柳絮飞 春采白雪作樱吹_\n\n**《斯芬克斯的谜底》**：歌名来自希腊神话里斯芬克斯的谜题：一种动物早晨四条腿，中午两条腿，晚上三条腿走路，腿最多的时候，也正是速度和力量最小的时候。歌词前两句里有“被风吹散”，接着上一首歌。所以可以把整张专辑当成概念专辑。<a id=\"a16\" onclick=toggleIframe(3,\"2492184593\",\"s16\",\"a16\")>点此收听</a>\n\n<div id=\"s16\"></div>\n\n> _不期然的一文不名 原来平凡不是演习 洞若观火 却看不清自己_\n\n这两句歌词非常好，因为笔者的名字就叫若凡。凡了吗？若凡。到底凡没凡？\n\n当我们说一些东西是平凡的时候，实际上注重的是它们之间的相似之处；当我们说一些东西是不平凡的时候，实际上注重的是它们与其他东西的不同之处。普通人体细胞核里都有 23 对染色体，数量是相同的，DNA 各有异同。所以每个人分别都有平凡和不平凡的地方。\n\n**《笔记本上的幻想世界》**\n\n与此对应的是“现实的真实世界”。笔者感受到曲子和词有种令人难以言说的悲伤感和诡异感，类似“梦核”。理由：全曲共 61 句歌词（不算和声），我们只用关注每句歌词的最后两个音：后比前高为升，前比后高为降，音高相同为平：\n\n| 升  | 降  | 平  |\n| --- | --- | --- |\n| 6   | 25  | 29  |\n\n特别地，对于最后一句：\n\n> _继续踏上实现梦想的路线_\n\n它是刚升起来，又降下去了。\n\n**《斯人》**\n\nThis person。讲两种文化/思想/世界观的碰撞。这是往大说的，往小说是写一位中国武者和一位日本武者的交锋，包括语言上的交锋，那段激烈的间奏是物理上的交锋。歌词中日混杂，一个歌手演绎两位武者：洛天依的[汉语]声库和(日语)声库。<a id=\"a17\" onclick=toggleIframe(3,\"2492223560\",\"s17\",\"a17\")>点此收听</a>\n\n<div id=\"s17\"></div>\n\n**《嘘つきは恋のはじまり》**：谎言是恋爱的开始。看歌名是日本武者打赢了。\n\n**《Monologue》**：独白，屏幕外边的人以屏幕里面的人的视角写给屏幕外面的人的。\n\n> _而你和我之间 相隔 不同 银河 时空 仿佛始终没有相遇过_\n\n## 《草蛇惊一》歌词解读\n\n《草蛇惊一》收录于初音未来 V4C 专辑《初梦》，作词是[麦当叔劳劳](https://space.bilibili.com/396967)。[去 B 站观看](https://www.bilibili.com/video/BV1Px41177ht/) | <a id=\"a18\" onclick=toggleIframe(2,\"515455714\",\"s18\",\"a18\")>点此收听</a>\n\n<div id=\"s18\"></div>\n\n很容易从歌名联想到“打草惊蛇”，笔者认为草蛇惊一的一是指打草的人。在这里，草、蛇和打草的人都是主人公自己——主人公自己惊动了自己。非得拆开的话，草是身，蛇是心，惊是内，一是外。还可以参考歌词的[英文翻译](https://coolmikehatsune22.wordpress.com/2020/11/13/snake-in-the-grass/)，译者是 coolmikehatsune22。里面有一些和笔者想的不一样，或者没想到的东西，会在下文说明。\n\n**主歌一**\n\n> _羡慕风车 不必去四海漂泊 只要能在原地旋转便能体会风的快乐_\n\n第一句最重要，是起因，主人公的内心独白。我们把主人公此时的视角记作“视角 A”。风车有三层意思：\n\n1. 指被风驱动的人或物。\n2. 指《堂吉诃德》里的风车所指，即假想敌。\n3. 指主人公自己。\n\n如果你对风这个字的想法和笔者一样，那你就能明白笔者在说什么。在网页底部列举了一些关于风的其他歌曲。原地旋转就是不作出改变，变成石头，最后变成流浪的风。\n\n> _及时行乐 外婆的故事里说因果报应乃白日见鬼_\n\n视角 A 想要把自己的人生观向风车靠拢。英文翻译是：“毕竟，奶奶在她的故事里总是在说，你不应该指望报应会降临到坏人身上”。\n\n> _转折 没曾想单木不林一丝不线如我 孤单的说书者也能偷乐_\n\n主人公突然转换为上帝视角，把自己代入说书者。这样就像[看电影](https://movie.douban.com/subject/1292064/)一样，不用再担心各种现实问题了。\n\n> _相濡以沫不如相忘于江湖 外公总说这是他孤单的借口_\n\n进一步妄想自己是相忘于江湖的鱼，逃避现实。\n\n> 《庄子·内篇·大宗师》：\n>\n> - 泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不如相忘于江湖。与其誉尧而非桀也，不如两忘而化其道。\n>\n> 泉水干了，鱼聚集在陆地。与其用唾沫互相润湿对方，不如各自去往大江大湖，互相忘记。说尧好，说桀不好，和我有什么关系？\n>\n> 《庄子·外篇·天运》：\n>\n> - 孔子见老聃而语仁义。老聃曰：“夫………………夫鹄不日浴而白，乌不日黔而黑。黑白之朴，不足以为辩，名誉之观，不足以为广。泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不若相忘于江湖。”\n\n英文翻译则非常直白：“与其帮助挽救我们能挽救的东西，不如完全忘记它，这是爷爷总是说的（他孤身一人的）借口”。\n\n**主歌二**\n\n> _放轻松 压力别弄得太大 飘飘欲仙欲死不知是不是自己的风格_\n\n主人公认为自己逃避现实是不对的，此时视角转换回了视角 A。前半部分是视角 A 对自己说的：没事，放轻松一点；后半部分是视角 A 对说书者说的：这已经成为你的风格了吗？\n\n> _一语道破 下手斩草除根哭吧哭吧 无聊卑微笑话_\n\n视角 A 一语道破了说书者的伪装，并否定掉了风车的人生观。认为有这种想法的自己是无聊卑微笑话，要把这种想法斩草除根。风车你就尽情去哭吧。\n\n> _音色也在不知不觉中变得低沉 就像患了名为暴躁的病一样_\n\n主人公在否定自己之后，风车的一面并没有消失，而是在反噬视角 A。主人公的音色逐渐低沉，内心逐渐暴躁。\n\n> _快停止吧 那张顽固蠢蛋的终身证明我不想再去想念_\n\n风车和视角 A 在脑海里互相争斗。主人公希望自己不要再胡思乱想了，给自己开了顽固蠢蛋的终身证明。\n\n**导歌**\n\n> _一不做二不休自在风流 乐不思蜀子龙我就不走_\n\n对于一件事，我要么不做，要么就做到最好，我觉得这样太酷啦；赵子龙救了刘禅最终导致乐不思蜀，这让我怎么做接下来每一步的决定呢？干脆不做了。\n\n不管怎么断句都可以：\n\n- 乐不思蜀/子龙我/就不走\n- 乐不思蜀子龙/我就不走\n\n都是讲主人公不想去走赵云的乐不思蜀这一条路，然而这两件事隔了好几十年。英文注释子龙：‘child dragon’, the eponymous snake。正好呼应歌名，不管是赵子龙还是蛇都能代指主人公。\n\n> _过五关杀六将公子献头 金蝉脱壳孙老头八十二变我有_\n\n主人公一会儿代入关羽，一会儿代入荆轲/太子丹。并预想了像他们一样做事之后的结果。（但是在荆轲刺秦的故事中，是荆轲带着樊於期的头，公子不是带的，也不是被带的。也可能不是这个典故，百度搜公子献头出自漫画《火凤燎原》。也可能压根没有典故，只是一种代指）金蝉脱壳指主人公抽离自己为说书者。孙老头就是孙猴子，八十二变指思想转换的复杂性。不管怎么断句都可以：\n\n- 金蝉脱壳/孙老头八十二变我有\n- 金蝉脱壳孙老头/八十二变我有\n- 金蝉脱壳孙老头八十二变/我有\n\n笔者认为是第一种，金蝉脱壳和前半句过五关杀六将公子献头是连在一起的，用孙老头八十二变来修饰主人公想法的混乱程度。歌手断句是第二种——当然不是初音未来现场发挥的，是作者设计的，可能会听起来更舒服。另外，选择八十二变的原因还可能有，头——八两个字的连接处确实比头——七不管是唱起来还是听起来都更舒服。以及我比孙老头还多十变。英文翻译则是第三种，用孙老头八十二变来修饰我有很多种金蝉脱壳的行动。\n\n> _百闻不如一见来翻筋斗&nbsp;福星高照五湖四海都随我漫步遨游&nbsp;山雨欲来风满楼_\n\n终于要作决定了！但是在做出决定之前的继续妄想，构成了主人公脑海里的狂风。百闻不如一见翻筋斗指孙老头想要做出决定。至于是决定行动，还是决定继续妄想，不得而知。\n\n**副歌**\n\n> _再见吧 提线的傀儡师 耻笑咚咚跳的心脏和那不实际的憧憬_\n\n傀儡是身体，傀儡师是幻想。主人公向对自己造成心惊肉跳的幻想作别。英文翻译不实际的憧憬为 lofty ideals（远大的理想）。\n\n> _玩笑吧 我不想听假话 暴露皆大欢喜不攻自破不成熟的笑话_\n\n英文翻译：“你想开什么玩笑就开什么玩笑，但我不会再屈服于你的谎言，我会把你一直在快乐地兜售的所有那些毫无实质意义、脆弱的垃圾都吹出来。”笔者对前半句的翻译有点不认同，但认为后半句翻译得非常好。笔者认为这写的是主人公不想听假话的想法和暴露笑话的行为，是指主人公给自己的 EQ 开了低通滤波。\n\n> _怠慢吗 或许只是懈怠吧 嘁嘁咔咔咚咚咭咭再也不想它_\n\n主人公认为，这都是由自己的怠慢或者懈怠造成的。在又一番思想斗争之后停止了思考——然后进入第二段主歌。","source":"_posts/音乐分享.md","raw":"---\ntitle: 音乐分享\ndate: 2024-4-4 00:00:00\npermalink: albums.html\n---\n\n## 什么样的音乐才算好听的\n\n可能分真性的好听和假性的好听。\n\n1. 药物的作用：能让你出现情绪反应的。\n2. 代言的作用：可以帮你说话的，歌词里所描述的经历有一部分与你类似，能让你感同身受，帮你说出了你说不出来的话。\n3. 分心的作用：可以让大部分的注意卷入进去的，用于催眠或者隔离负面的情绪。\n4. 满足崇高心理的作用：精巧的、出人意料的、神秘的、伪装的、集邮的、报菜名的。\n\n笔者认为，如果第三点的作用强烈，加上伴随正面的情绪（包括开心、放松和深情），算是真性好听的。如果第四点占主要作用，且在多数情况下听不会出现正面情绪，只有在以毒攻毒的状态下，或者突然想听的状态下，出现一些情绪，那么它算是假性好听的。\n\n过去在这里分享出来的，多数都是属于假性好听的，因为它主要是为了起第四个作用。\n\n<!--more-->\n\n<script>\nfunction toggleIframe(songType, songId, contianerId, aId) {\n  let container = document.getElementById(contianerId);\n  let a = document.getElementById(aId);\n  if (container === null) {\n    console.log(\"未获取到contianer\");\n  } else if (container.childNodes.length !== 1) {\n    container.removeChild(container.lastChild);\n    a.innerText = \"点此收听\";\n  } else {\n    let iframe = document.createElement(\"iframe\");\n    iframe.frameBorder = \"no\";\n    iframe.width = \"100%\";\n    iframe.height = 86;\n    iframe.src = `//music.163.com/outchain/player?type=${songType}&id=${songId}&auto=0&height=66`;\n    container.appendChild(iframe);\n    a.innerText = \"点此收起\";\n  }\n}\n</script>\n\n## 概念专辑\n\n先从概念专辑说起。概念专辑是一个比较有意思的概念：这种专辑里的所有歌是围绕着同一概念创作的。\n\n据说概念专辑的起源是英国摇滚乐队披头士的《Sgt. Pepper's Lonely Hearts Club Band》（1967）。大概是他们模拟了一个虚假的乐队，这个虚假的乐队是作为一个演出者给观众表演，这个表演的过程以一种故事的形式记录在了专辑里。可以这样理解：你在听这张专辑的同时，身临其境地感受了一场乐队的演出，但是这个乐队的名字不叫披头士，叫佩珀军士的孤独之心俱乐部乐队。\n\n> ↓ 浮生一日，佩珀军士里的大轴子。特点是在歌曲的最后一段会提醒你所有歌都放完了，该把碟子取下来了。但是这个没充 VIP 的版本里没有。<a id=\"a1\" onclick=toggleIframe(2,\"1476062\",\"s1\",\"a1\")>点此收听</a>\n\n<div id=\"s1\"></div>\n\n另一个英国摇滚乐队叫平克弗洛伊德。笔者没去过英国，不知道摇滚什么意思，也不知道乐队什么意思，也没吸过大麻，但是他们的歌就像大麻一样。乐队名字 Pink Floyd 取自乐队已故成员 Syd 所钟爱的两位蓝调音乐家的名字，和精神分析创始人 Sigmund Freud 无关，但是他们的歌与精神分析是同一个内核。《The Dark Side of The Moon》（1973）和《The Wall》（1979）都是整轨的专辑，都是前一首歌和后一首歌无缝衔接，加上最后一首歌的结束部分接着第一首的开头部分，所以听着比较瘆人。前者被称为“流行音乐史上最伟大的专辑之一”，后者被称为“史上最伟大的概念专辑”，至于他们说得对不对，你得自己听一遍才能判断。\n\n> ↓ 又爽又麻，迷墙里的第十九首。讲的乐队主唱 Pink 在上台演出之前接受医生治疗之后所感受到的画面。<a id=\"a2\" onclick=toggleIframe(3,\"2524058510\",\"s2\",\"a2\")>点此收听</a>\n\n<div id=\"s2\"></div>\n\n中国摇滚乐队有苍狼乐队，1997 年出了一张专辑叫《出走》，打头的歌是腾格尔著名的草原歌曲《天堂》。另外几首叫《出走》《有人说》《他乡》《上帝说》《我的心》《思念（一）》《思念（二）》《家》，从歌名就可以理出整个故事脉络。\n\n> ↓ 他乡没有我的那个天堂。<a id=\"a3\" onclick=toggleIframe(2,\"151484\",\"s3\",\"a3\")>点此收听</a>\n\n<div id=\"s3\"></div>\n\n中国的一部分摇滚歌曲喜欢和政治对话，政治就是人性，摇滚乐起到一个释放情绪的作用。中国第一张摇滚专辑是崔健的《新长征路上的摇滚》（1989），用“新长征”来比喻改革开放后的社会变革。更含蓄的表达方式是 Chinese Footbool 乐队的同名专辑（2015），是用普通少年的视角来写的。\n\n金属是从摇滚里分化而来的，它的特点是比摇滚乐有更重的吉他失真音色。金属受到了古典的影响，有很多长篇的，一些金属乐专辑被称为摇滚歌剧。那么长篇的歌剧和交响曲算概念专辑吗？\n\n> ↓ 四季。<a id=\"a4\" onclick=toggleIframe(2,\"5085871\",\"s4\",\"a4\")>点此收听</a>\n\n<div id=\"s4\"></div>\n\n> ↓ 如果你是形式中立派，不一定分成好几首歌，那么葫芦娃的十七种弹法也是概念专辑。<a id=\"a18\" onclick=toggleIframe(2,\"1864862748\",\"s18\",\"a18\")>点此收听</a>\n\n<div id=\"s18\"></div>\n\n> \\- 如果你是形式自由派，不一定以音频作为载体，《聊斋志异》也是概念专辑。[点此阅读](https://liaozhai.5000yan.com/)\n\n> ↓ 如果你是内容中立派，有曲子就行，那么录制一遍过的京剧也是概念专辑。<a id=\"a5\" onclick=toggleIframe(2,\"442314084\",\"s5\",\"a5\")>点此收听</a>\n\n<div id=\"s5\"></div>\n\n> ↓ 内容自由派：说事两部曲、卖拐三部曲、白云黑土系列也是概念专辑。<a id=\"a6\" onclick=toggleIframe(2,\"27630154\",\"s6\",\"a6\")>点此收听</a>\n\n<div id=\"s6\"></div>\n\n把《2:3》顺时针转九十度是一个人脸，这是二次元音乐人 ilem 在 2019 年发行的专辑封面。表面上看，是一碟二次元和一碟三次元在比翼同行，实际上还可以按时间顺序来解读：《勾指起誓》，但《夜间出租车》。因为《夜间出租车》，所以《大氿歌》。《大氿歌》之后变成了《得过且过的勇者》，《写给我家狗的歌》。最后回到《威海》遇见《售楼小姐》。它从情绪色彩上也是从“2”过渡到“3”的。\n\n> ↓ 大疯一趟两相忘，不知东方天既白。<a id=\"a7\" onclick=toggleIframe(2,\"1349959772\",\"s7\",\"a7\")>点此收听</a>\n\n<div id=\"s7\"></div>\n\n《无事发生》（2021）讲了一个关于海和夏天、忘与不忘的故事。专辑分两面，每面的感情起伏都是升-降-升。专辑名字于全文中出现两次：《瓦特城事件簿》和《阿比拿铁》，这两首歌都是以非人类视角来写的，α 面从前者开始降，β 面从后者开始升，且这两首歌在专辑歌曲的整体顺序上处于对称的位置。《瓦特城事件簿》歌词比较抽象，是以人工智能视角记录下的一桩凶杀案。据说“拿铁”是歌手宠物猫的名字，那么“阿比”就是指阿比西尼亚猫，古埃及猫的后裔。而《歌乐天》中的巴利语来自古印度。\n\n> ↓ 脚步踩得不深，浪花叠叠层层。被冲刷后一点不剩，就像无事发生。<a id=\"a8\" onclick=toggleIframe(2,\"1950552164\",\"s8\",\"a8\")>点此收听</a>\n\n<div id=\"s8\"></div>\n\n## 泛中文 V 家\n\n人声主体是由以 VOCALOID 为代表的一系列歌声合成引擎所合成出来的歌曲，是笔者听得最多的歌曲，无论是数目上还是时间上。其中《百万花王》是唯一一张抱着真正好听的心态购买的，因为它同时包含新歌和旧歌。其他专辑是先听了、后才好听，要么是出于一种情怀购买，要么听的是网络盗版，没有付费的。\n\n《百万花王》（2020）每首歌写了一种花，但是第一张专辑只收录了十首，这说明以后还要出九万九千九百九十九张专辑。有借花抒情的，如《梨花泽泽远山远》写故乡的梨花开呼唤着我归来。有把花拟人化的，如《生死一舞的爱语》写沙漠中的狐尾龙舌兰在枯萎之前借着狂风为爱生死一舞；《优雅的罪恶之源》写罂粟花从呼吸走到锁骨、一步一步让你臣服；《百里芭蕉百里花》写芭蕉幻化成女子与少年郎邂逅；《沉溺在神的砂海》写海妖女狸藻用管风琴让你的心沉船。更多是营造出一种氛围的，如《西西里的自由诗》为凯尔特风格；《时一现耳三千岁》饱含佛教色彩；《夜半闻声有归人》写悬铃花为逝去的人引路；《为新生振翅而上》写生态系统毁灭后的初生演替。牡丹被称为花中之王，为了折损她的部分光芒，让其他花也能好过，所以《我偏独坐第一香》的人声被掐了，只保留伴奏放在第一首。\n\n> ↓ 梦化身成帕耳忒诺珀，立于砂崖。遵循神的指引，和它融为一体。<a id=\"a9\" onclick=toggleIframe(3,\"2510102870\",\"s9\",\"a9\")>点此收听</a>\n\n<div id=\"s9\"></div>\n\n《南北寻光》（2015）的初版有 12 首歌，都是比较阳光慵懒的。2017 年的最终版里新加入了 6 首歌，可谓是画龙点睛了：专辑分为 AB 两面，B 面从《Adventure》开始转折，再从《眼泪》爬升到《卧室幻想》，从《AM10:00》过渡到《夏末》，之后是三首不同风味走马灯式的回顾，直到《Back To You》。这种转折使得专辑的故事性比初版强，在写南北组（乐正绫、洛天依）的旅行基础上加入了作者自身的心路历程。\n\n> ↓ 我只想知道属于我的是不是真的我的，还是由我替谁在保管着。<a id=\"a10\" onclick=toggleIframe(3,\"2494423396\",\"s10\",\"a10\")>点此收听</a>\n\n<div id=\"s10\"></div>\n\n《吉光片羽 Queendom》（2020）是一张来自 9 组不同创作者的作品集，但如果你有足够的想象力（或者说过度解读的能力），可以把它想象成一个完整的故事——包括一些其他作品集，即使是无关的作品集合，他们安排歌曲顺序也是有讲究的，一般是前两首歌奠定专辑的基调，重量级的放在最后两个。由于歌曲之间互相没有关系，就把专辑取名为“天马行空”“天方夜谭”“森罗万象”“海纳百川”之类的。特别地，该专辑的第七首歌叫《第七颗恒星自毁》。反例是：《平行四界 Quadimension X-3》（2022）的封面为一张蓝色的海底，但有一半以上的歌在歌名上就能让你联想到红色。\n\n> ↓ 五维介质的一些歌处于同一世界观，所以他们喜欢把一套旋律用到两首及以上的歌上。<a id=\"a11\" onclick=toggleIframe(3,\"2509712255\",\"s11\",\"a11\")>点此收听</a>\n\n<div id=\"s11\"></div>\n\n《从众效应》（2019）是一张金属乐专辑，倡导人们不要盲目从众。有讽刺炒股的炒得倾家荡产的《如意算盘》；讽刺擦边直播吸引流量的《聊播》；《天朝从众效应》写阶级和从众效应的客观存在；《一样一样》写社会阶层上升的通道是有限的，不在上层不代表你不优秀；《笨鸟先飞》讨论的是在网络上到底应不应该发声，作为《键盘侠的斗争哲学》的一个补充；《加特林》写生活节奏越来越快，想把手里的破事全给扫了，轶事是作者本人在编这首歌的曲子的时候，由于太忙了，所以直接照着他喜欢乐队的某一首歌扒了一段，被人指出之后道歉重写了。《大风歌 20xx》写互联网上的一些盲目粉丝将会在之后一次一次地捧杀他们的偶像，按曲绘来看，已经被捧杀的有冯小刚、六小龄童等。《君宝》致敬武侠小说泰斗金庸以及其笔下的人物张三丰，鼓励人们活得洒脱一点，为整张专辑的批判性做了一个缓和。\n\n> ↓ 我想无非是你入戏太深了，青红皂白不是什么象征是非的颜色。<a id=\"a12\" onclick=toggleIframe(2,\"531757237\",\"s12\",\"a12\")>点此收听</a>\n\n<div id=\"s12\"></div>\n\n《空中楼阁》是一张没有发布实体碟子的数字专辑，有魔幻现实主义的味道。特点是作者在每一年都会把专辑的发行时间修改到次年的 8 月 20 号，后来网易云音乐不允许改了，所以发行时间定格到了 2021 年 8 月 20 号。\n\n> ↓ 睁开眼就像大型梦游。<a id=\"a13\" onclick=toggleIframe(2,\"1463449959\",\"s13\",\"a13\")>点此收听</a>\n\n<div id=\"s13\"></div>\n\n《心术》（2023）是由心华独唱的专辑。如果你知道 VOCALOID 的日语是ボカロ的话，结合专辑封面以及最后一首歌的名字，你可以从专辑名里解读出至少四层含义。\n\n> 饿了么。<a id=\"a14\" onclick=toggleIframe(2,\"1398928356\",\"s14\",\"a14\")>点此收听</a>\n\n<div id=\"s14\"></div>\n\n## 《韶音赋》\n\n韶是一种乐曲，后引申为“美好的”；赋是一种文体，用于描写和抒情。词作者是[战场原妖精](https://space.bilibili.com/109564)。\n\n曲子有三个发布版本：初版由洛天依演唱，战场原妖精词曲调，2012 年发布于[哔哩哔哩](https://www.bilibili.com/video/BV1ax411F7z2/)；2014 年由作者重调重混，由洛天依演唱，收录于专辑[《平行四界 Quadimension》](https://www.bilibili.com/video/av1042693/)；2016 年由作者重调重混，由星尘演唱，发布于[哔哩哔哩](https://www.bilibili.com/video/BV1us41167ww/)。\n\n曲子结构并没有什么大变化，这是第二个版本。曲风属于：旋律金属/民谣金属（根据专辑宣传视频里的介绍）。<a id=\"a15\" onclick=toggleIframe(2,\"429460265\",\"s15\",\"a15\")>点此收听</a>\n\n<div id=\"s15\"></div>\n\n> <i>浮黎元始开天地&nbsp;诸神创世天各一</i><br/> <i>三清六御轮回助&nbsp;神界人间满紫气</i><br/>\n\n- 浮黎元始：浮黎元始天尊，指盘古。——也有说指玉皇大帝的，而盘古是祂的长子玉清元始天尊。这不重要，只需要知道祂是神仙，是创世者，是对自然的想象，是一种信仰。三清六御同理，也有三清四御的说法。可能是出于字形和音韵美，选择浮黎比玉清好，三清六御比三清四御好。（应该没有道长能找到这）\n- 紫气：祥瑞之气。\n\n> <i>天边远山泛青光&nbsp;忽而花落花满殇</i><br/> <i>我从雾中乘风来&nbsp;只为伴君不思量</i><br/>\n\n- 青光：绿色的光。也指光阴、时光。\n- 殇：非“正常”死亡：未成年而死、战死、为国捐躯。\n\n我是一名来自世界之外的旁观者：什么东西都不想，主打一个陪伴君。\n\n> <i>伏羲女娲神农氏&nbsp;江河淮济育生灵</i><br/> <i>南宫北斗映贤尚&nbsp;天涯海角随君行</i><br/>\n\n- 伏羲女娲神农氏：用三位代指多位。伏羲是“龙的传人”的龙，神农是“炎黄子孙”的炎帝。\n- 江河淮济：长江、黄河、淮河、济水。四条流入大海的河。\n- 南宫北斗：星辰。\n- 贤尚：尚：尊崇。可以把贤尚空想成人的意思。\n\n> <i>生来无欲享富贵&nbsp;但求为君咏思绪</i><br/> <i>若夫德行无领会&nbsp;自退远方乘浪归</i><br/>\n\n- 若夫：句首语气词，“至于……的话”。要是我没有领会到君的德行，那我就要回去了。\n\n> <i>我带着梦想&nbsp;带着希望&nbsp;带着力量</i><br/> <i>探寻人间的感伤</i><br/>\n\n> <i>请赋予我理想&nbsp;请赋予我希望</i><br/> <i>请赋予我一颗炽热的心房</i><br/> <i>让这情感释放</i><br/>\n\n赋予和赋是紧密相关的。一颗心房并不是量词使用不当，即使在生物学上也有心房、心室的概念，比如：<span class=\"r\">动脉血</span>从左心室流入<span class=\"r\">主动脉</span>，途经心肺之外的全身毛细血管消耗氧，变成<span class=\"b\">静脉血</span>，经<span class=\"b\">上腔、下腔静脉</span>流回右心房，这被称为体循环；<span class=\"b\">静脉血</span>从右心室流入<span class=\"r\">肺动脉</span>，途径肺里的毛细血管吸收氧，变成<span class=\"r\">动脉血</span>，经<span class=\"b\">肺静脉</span>流回左心房，这被称为肺循环。\n\n<style>\n   .r{\n      color: red;\n   }\n   .b{\n      color: blue;\n   }\n</style>\n\n> <i>泪水模糊了眼眶&nbsp;为何这般闪亮</i><br/> <i>就算我终会消亡&nbsp;终会迷茫</i><br/> <i>请让我带走这份熵</i><br/>\n\n熵是物理学的一个概念，用于描述系统的混乱程度。对于一个孤立的（不与外界交换能量和质量的）系统，其熵会一直增加。这被称为热力学第二定律。浅显不恰当的例子就是：如果不整理耳机线，它总是会缠起来。\n\n## 《Lost In Tianyi》\n\n[《Lost In Tianyi》](https://music.douban.com/subject/34778807/)，谁 Lost In Tianyi？创作者或者听众，写歌的人或者听歌的人。洛天依是歌声数据库，同时作为一个[纸片人](https://www.bilibili.com/video/BV1Hj411B7vc/)歌手。为什么写歌/听歌？要表达一些什么东西/缺失一些什么东西，或许是理想。所以《Lost In Tianyi》=《迷失在理想里》。\n\n**《8102》**：是 2018 倒过来——专辑 2019 年发行。\n\n> _倒流历史的始终 颠覆盖棺的对错 回到尚且一片空白的宇宙_\n\n注意最后一句：\n\n> _目力所及处的某一天 你在身边_\n\n“你”是谁？为什么是在“目力所及处的某一天”出现在身边？如果指的不是具体的人，而是洛天依（理想）的话，整张专辑就能说通了，还能接着下一首歌。\n\n**《啦哒哒》**：一人一猫。“你”这只猫是“我”的理想。迷茫的我看到了你、开始追求理想、与理想分离、发回忆刀、回到现实的一个人。怎么看出来是理想的？\n\n> _编织着我在现实中的梦_\n\n改名成《Lost In Tianyi》也没问题：\n\n> _我们正 不断 向交叉的路口走 迷了路 顺其自然不回头_\n\n**《最大化+》**：把窗口最大化\n\n> _穿梭在复制粘贴 再粘贴复制的无数窗口_\n\n**《风兮风兮》**：生物之以息相吹也\n\n> _冬扯云若柳絮飞 春采白雪作樱吹_\n\n**《斯芬克斯的谜底》**：歌名来自希腊神话里斯芬克斯的谜题：一种动物早晨四条腿，中午两条腿，晚上三条腿走路，腿最多的时候，也正是速度和力量最小的时候。歌词前两句里有“被风吹散”，接着上一首歌。所以可以把整张专辑当成概念专辑。<a id=\"a16\" onclick=toggleIframe(3,\"2492184593\",\"s16\",\"a16\")>点此收听</a>\n\n<div id=\"s16\"></div>\n\n> _不期然的一文不名 原来平凡不是演习 洞若观火 却看不清自己_\n\n这两句歌词非常好，因为笔者的名字就叫若凡。凡了吗？若凡。到底凡没凡？\n\n当我们说一些东西是平凡的时候，实际上注重的是它们之间的相似之处；当我们说一些东西是不平凡的时候，实际上注重的是它们与其他东西的不同之处。普通人体细胞核里都有 23 对染色体，数量是相同的，DNA 各有异同。所以每个人分别都有平凡和不平凡的地方。\n\n**《笔记本上的幻想世界》**\n\n与此对应的是“现实的真实世界”。笔者感受到曲子和词有种令人难以言说的悲伤感和诡异感，类似“梦核”。理由：全曲共 61 句歌词（不算和声），我们只用关注每句歌词的最后两个音：后比前高为升，前比后高为降，音高相同为平：\n\n| 升  | 降  | 平  |\n| --- | --- | --- |\n| 6   | 25  | 29  |\n\n特别地，对于最后一句：\n\n> _继续踏上实现梦想的路线_\n\n它是刚升起来，又降下去了。\n\n**《斯人》**\n\nThis person。讲两种文化/思想/世界观的碰撞。这是往大说的，往小说是写一位中国武者和一位日本武者的交锋，包括语言上的交锋，那段激烈的间奏是物理上的交锋。歌词中日混杂，一个歌手演绎两位武者：洛天依的[汉语]声库和(日语)声库。<a id=\"a17\" onclick=toggleIframe(3,\"2492223560\",\"s17\",\"a17\")>点此收听</a>\n\n<div id=\"s17\"></div>\n\n**《嘘つきは恋のはじまり》**：谎言是恋爱的开始。看歌名是日本武者打赢了。\n\n**《Monologue》**：独白，屏幕外边的人以屏幕里面的人的视角写给屏幕外面的人的。\n\n> _而你和我之间 相隔 不同 银河 时空 仿佛始终没有相遇过_\n\n## 《草蛇惊一》歌词解读\n\n《草蛇惊一》收录于初音未来 V4C 专辑《初梦》，作词是[麦当叔劳劳](https://space.bilibili.com/396967)。[去 B 站观看](https://www.bilibili.com/video/BV1Px41177ht/) | <a id=\"a18\" onclick=toggleIframe(2,\"515455714\",\"s18\",\"a18\")>点此收听</a>\n\n<div id=\"s18\"></div>\n\n很容易从歌名联想到“打草惊蛇”，笔者认为草蛇惊一的一是指打草的人。在这里，草、蛇和打草的人都是主人公自己——主人公自己惊动了自己。非得拆开的话，草是身，蛇是心，惊是内，一是外。还可以参考歌词的[英文翻译](https://coolmikehatsune22.wordpress.com/2020/11/13/snake-in-the-grass/)，译者是 coolmikehatsune22。里面有一些和笔者想的不一样，或者没想到的东西，会在下文说明。\n\n**主歌一**\n\n> _羡慕风车 不必去四海漂泊 只要能在原地旋转便能体会风的快乐_\n\n第一句最重要，是起因，主人公的内心独白。我们把主人公此时的视角记作“视角 A”。风车有三层意思：\n\n1. 指被风驱动的人或物。\n2. 指《堂吉诃德》里的风车所指，即假想敌。\n3. 指主人公自己。\n\n如果你对风这个字的想法和笔者一样，那你就能明白笔者在说什么。在网页底部列举了一些关于风的其他歌曲。原地旋转就是不作出改变，变成石头，最后变成流浪的风。\n\n> _及时行乐 外婆的故事里说因果报应乃白日见鬼_\n\n视角 A 想要把自己的人生观向风车靠拢。英文翻译是：“毕竟，奶奶在她的故事里总是在说，你不应该指望报应会降临到坏人身上”。\n\n> _转折 没曾想单木不林一丝不线如我 孤单的说书者也能偷乐_\n\n主人公突然转换为上帝视角，把自己代入说书者。这样就像[看电影](https://movie.douban.com/subject/1292064/)一样，不用再担心各种现实问题了。\n\n> _相濡以沫不如相忘于江湖 外公总说这是他孤单的借口_\n\n进一步妄想自己是相忘于江湖的鱼，逃避现实。\n\n> 《庄子·内篇·大宗师》：\n>\n> - 泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不如相忘于江湖。与其誉尧而非桀也，不如两忘而化其道。\n>\n> 泉水干了，鱼聚集在陆地。与其用唾沫互相润湿对方，不如各自去往大江大湖，互相忘记。说尧好，说桀不好，和我有什么关系？\n>\n> 《庄子·外篇·天运》：\n>\n> - 孔子见老聃而语仁义。老聃曰：“夫………………夫鹄不日浴而白，乌不日黔而黑。黑白之朴，不足以为辩，名誉之观，不足以为广。泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不若相忘于江湖。”\n\n英文翻译则非常直白：“与其帮助挽救我们能挽救的东西，不如完全忘记它，这是爷爷总是说的（他孤身一人的）借口”。\n\n**主歌二**\n\n> _放轻松 压力别弄得太大 飘飘欲仙欲死不知是不是自己的风格_\n\n主人公认为自己逃避现实是不对的，此时视角转换回了视角 A。前半部分是视角 A 对自己说的：没事，放轻松一点；后半部分是视角 A 对说书者说的：这已经成为你的风格了吗？\n\n> _一语道破 下手斩草除根哭吧哭吧 无聊卑微笑话_\n\n视角 A 一语道破了说书者的伪装，并否定掉了风车的人生观。认为有这种想法的自己是无聊卑微笑话，要把这种想法斩草除根。风车你就尽情去哭吧。\n\n> _音色也在不知不觉中变得低沉 就像患了名为暴躁的病一样_\n\n主人公在否定自己之后，风车的一面并没有消失，而是在反噬视角 A。主人公的音色逐渐低沉，内心逐渐暴躁。\n\n> _快停止吧 那张顽固蠢蛋的终身证明我不想再去想念_\n\n风车和视角 A 在脑海里互相争斗。主人公希望自己不要再胡思乱想了，给自己开了顽固蠢蛋的终身证明。\n\n**导歌**\n\n> _一不做二不休自在风流 乐不思蜀子龙我就不走_\n\n对于一件事，我要么不做，要么就做到最好，我觉得这样太酷啦；赵子龙救了刘禅最终导致乐不思蜀，这让我怎么做接下来每一步的决定呢？干脆不做了。\n\n不管怎么断句都可以：\n\n- 乐不思蜀/子龙我/就不走\n- 乐不思蜀子龙/我就不走\n\n都是讲主人公不想去走赵云的乐不思蜀这一条路，然而这两件事隔了好几十年。英文注释子龙：‘child dragon’, the eponymous snake。正好呼应歌名，不管是赵子龙还是蛇都能代指主人公。\n\n> _过五关杀六将公子献头 金蝉脱壳孙老头八十二变我有_\n\n主人公一会儿代入关羽，一会儿代入荆轲/太子丹。并预想了像他们一样做事之后的结果。（但是在荆轲刺秦的故事中，是荆轲带着樊於期的头，公子不是带的，也不是被带的。也可能不是这个典故，百度搜公子献头出自漫画《火凤燎原》。也可能压根没有典故，只是一种代指）金蝉脱壳指主人公抽离自己为说书者。孙老头就是孙猴子，八十二变指思想转换的复杂性。不管怎么断句都可以：\n\n- 金蝉脱壳/孙老头八十二变我有\n- 金蝉脱壳孙老头/八十二变我有\n- 金蝉脱壳孙老头八十二变/我有\n\n笔者认为是第一种，金蝉脱壳和前半句过五关杀六将公子献头是连在一起的，用孙老头八十二变来修饰主人公想法的混乱程度。歌手断句是第二种——当然不是初音未来现场发挥的，是作者设计的，可能会听起来更舒服。另外，选择八十二变的原因还可能有，头——八两个字的连接处确实比头——七不管是唱起来还是听起来都更舒服。以及我比孙老头还多十变。英文翻译则是第三种，用孙老头八十二变来修饰我有很多种金蝉脱壳的行动。\n\n> _百闻不如一见来翻筋斗&nbsp;福星高照五湖四海都随我漫步遨游&nbsp;山雨欲来风满楼_\n\n终于要作决定了！但是在做出决定之前的继续妄想，构成了主人公脑海里的狂风。百闻不如一见翻筋斗指孙老头想要做出决定。至于是决定行动，还是决定继续妄想，不得而知。\n\n**副歌**\n\n> _再见吧 提线的傀儡师 耻笑咚咚跳的心脏和那不实际的憧憬_\n\n傀儡是身体，傀儡师是幻想。主人公向对自己造成心惊肉跳的幻想作别。英文翻译不实际的憧憬为 lofty ideals（远大的理想）。\n\n> _玩笑吧 我不想听假话 暴露皆大欢喜不攻自破不成熟的笑话_\n\n英文翻译：“你想开什么玩笑就开什么玩笑，但我不会再屈服于你的谎言，我会把你一直在快乐地兜售的所有那些毫无实质意义、脆弱的垃圾都吹出来。”笔者对前半句的翻译有点不认同，但认为后半句翻译得非常好。笔者认为这写的是主人公不想听假话的想法和暴露笑话的行为，是指主人公给自己的 EQ 开了低通滤波。\n\n> _怠慢吗 或许只是懈怠吧 嘁嘁咔咔咚咚咭咭再也不想它_\n\n主人公认为，这都是由自己的怠慢或者懈怠造成的。在又一番思想斗争之后停止了思考——然后进入第二段主歌。","slug":"音乐分享","published":1,"updated":"2025-09-14T14:52:02.359Z","__permalink":"albums.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnt000q5ws6f2b3ev1t","content":"<h2 id=\"什么样的音乐才算好听的\">什么样的音乐才算好听的</h2>\n<p>可能分真性的好听和假性的好听。</p>\n<ol type=\"1\">\n<li>药物的作用：能让你出现情绪反应的。</li>\n<li>代言的作用：可以帮你说话的，歌词里所描述的经历有一部分与你类似，能让你感同身受，帮你说出了你说不出来的话。</li>\n<li>分心的作用：可以让大部分的注意卷入进去的，用于催眠或者隔离负面的情绪。</li>\n<li>满足崇高心理的作用：精巧的、出人意料的、神秘的、伪装的、集邮的、报菜名的。</li>\n</ol>\n<p>笔者认为，如果第三点的作用强烈，加上伴随正面的情绪（包括开心、放松和深情），算是真性好听的。如果第四点占主要作用，且在多数情况下听不会出现正面情绪，只有在以毒攻毒的状态下，或者突然想听的状态下，出现一些情绪，那么它算是假性好听的。</p>\n<p>过去在这里分享出来的，多数都是属于假性好听的，因为它主要是为了起第四个作用。</p>\n<span id=\"more\"></span>\n<script>\nfunction toggleIframe(songType, songId, contianerId, aId) {\n  let container = document.getElementById(contianerId);\n  let a = document.getElementById(aId);\n  if (container === null) {\n    console.log(\"未获取到contianer\");\n  } else if (container.childNodes.length !== 1) {\n    container.removeChild(container.lastChild);\n    a.innerText = \"点此收听\";\n  } else {\n    let iframe = document.createElement(\"iframe\");\n    iframe.frameBorder = \"no\";\n    iframe.width = \"100%\";\n    iframe.height = 86;\n    iframe.src = `//music.163.com/outchain/player?type=${songType}&id=${songId}&auto=0&height=66`;\n    container.appendChild(iframe);\n    a.innerText = \"点此收起\";\n  }\n}\n</script>\n<h2 id=\"概念专辑\">概念专辑</h2>\n<p>先从概念专辑说起。概念专辑是一个比较有意思的概念：这种专辑里的所有歌是围绕着同一概念创作的。</p>\n<p>据说概念专辑的起源是英国摇滚乐队披头士的《Sgt. Pepper's Lonely Hearts\nClub\nBand》（1967）。大概是他们模拟了一个虚假的乐队，这个虚假的乐队是作为一个演出者给观众表演，这个表演的过程以一种故事的形式记录在了专辑里。可以这样理解：你在听这张专辑的同时，身临其境地感受了一场乐队的演出，但是这个乐队的名字不叫披头士，叫佩珀军士的孤独之心俱乐部乐队。</p>\n<blockquote>\n<p>↓\n浮生一日，佩珀军士里的大轴子。特点是在歌曲的最后一段会提醒你所有歌都放完了，该把碟子取下来了。但是这个没充\nVIP\n的版本里没有。<a id=\"a1\" onclick=\"toggleIframe(2,&quot;1476062&quot;,&quot;s1&quot;,&quot;a1&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s1\">\n\n</div>\n<p>另一个英国摇滚乐队叫平克弗洛伊德。笔者没去过英国，不知道摇滚什么意思，也不知道乐队什么意思，也没吸过大麻，但是他们的歌就像大麻一样。乐队名字\nPink Floyd 取自乐队已故成员 Syd\n所钟爱的两位蓝调音乐家的名字，和精神分析创始人 Sigmund Freud\n无关，但是他们的歌与精神分析是同一个内核。《The Dark Side of The\nMoon》（1973）和《The\nWall》（1979）都是整轨的专辑，都是前一首歌和后一首歌无缝衔接，加上最后一首歌的结束部分接着第一首的开头部分，所以听着比较瘆人。前者被称为 “流行音乐史上最伟大的专辑之一”，后者被称为 “史上最伟大的概念专辑”，至于他们说得对不对，你得自己听一遍才能判断。</p>\n<blockquote>\n<p>↓ 又爽又麻，迷墙里的第十九首。讲的乐队主唱 Pink\n在上台演出之前接受医生治疗之后所感受到的画面。<a id=\"a2\" onclick=\"toggleIframe(3,&quot;2524058510&quot;,&quot;s2&quot;,&quot;a2&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s2\">\n\n</div>\n<p>中国摇滚乐队有苍狼乐队，1997\n年出了一张专辑叫《出走》，打头的歌是腾格尔著名的草原歌曲《天堂》。另外几首叫《出走》《有人说》《他乡》《上帝说》《我的心》《思念（一）》《思念（二）》《家》，从歌名就可以理出整个故事脉络。</p>\n<blockquote>\n<p>↓\n他乡没有我的那个天堂。<a id=\"a3\" onclick=\"toggleIframe(2,&quot;151484&quot;,&quot;s3&quot;,&quot;a3&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s3\">\n\n</div>\n<p>中国的一部分摇滚歌曲喜欢和政治对话，政治就是人性，摇滚乐起到一个释放情绪的作用。中国第一张摇滚专辑是崔健的《新长征路上的摇滚》（1989），用 “新长征” 来比喻改革开放后的社会变革。更含蓄的表达方式是\nChinese Footbool 乐队的同名专辑（2015），是用普通少年的视角来写的。</p>\n<p>金属是从摇滚里分化而来的，它的特点是比摇滚乐有更重的吉他失真音色。金属受到了古典的影响，有很多长篇的，一些金属乐专辑被称为摇滚歌剧。那么长篇的歌剧和交响曲算概念专辑吗？</p>\n<blockquote>\n<p>↓\n四季。<a id=\"a4\" onclick=\"toggleIframe(2,&quot;5085871&quot;,&quot;s4&quot;,&quot;a4&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s4\">\n\n</div>\n<blockquote>\n<p>↓\n如果你是形式中立派，不一定分成好几首歌，那么葫芦娃的十七种弹法也是概念专辑。<a id=\"a18\" onclick=\"toggleIframe(2,&quot;1864862748&quot;,&quot;s18&quot;,&quot;a18&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s18\">\n\n</div>\n<blockquote>\n<p>-\n如果你是形式自由派，不一定以音频作为载体，《聊斋志异》也是概念专辑。<a href=\"https://liaozhai.5000yan.com/\">点此阅读</a></p>\n</blockquote>\n<blockquote>\n<p>↓\n如果你是内容中立派，有曲子就行，那么录制一遍过的京剧也是概念专辑。<a id=\"a5\" onclick=\"toggleIframe(2,&quot;442314084&quot;,&quot;s5&quot;,&quot;a5&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s5\">\n\n</div>\n<blockquote>\n<p>↓\n内容自由派：说事两部曲、卖拐三部曲、白云黑土系列也是概念专辑。<a id=\"a6\" onclick=\"toggleIframe(2,&quot;27630154&quot;,&quot;s6&quot;,&quot;a6&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s6\">\n\n</div>\n<p>把《2:3》顺时针转九十度是一个人脸，这是二次元音乐人 ilem 在 2019\n年发行的专辑封面。表面上看，是一碟二次元和一碟三次元在比翼同行，实际上还可以按时间顺序来解读：《勾指起誓》，但《夜间出租车》。因为《夜间出租车》，所以《大氿歌》。《大氿歌》之后变成了《得过且过的勇者》，《写给我家狗的歌》。最后回到《威海》遇见《售楼小姐》。它从情绪色彩上也是从 “2” 过渡到 “3” 的。</p>\n<blockquote>\n<p>↓\n大疯一趟两相忘，不知东方天既白。<a id=\"a7\" onclick=\"toggleIframe(2,&quot;1349959772&quot;,&quot;s7&quot;,&quot;a7&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s7\">\n\n</div>\n<p>《无事发生》（2021）讲了一个关于海和夏天、忘与不忘的故事。专辑分两面，每面的感情起伏都是升 - 降 - 升。专辑名字于全文中出现两次：《瓦特城事件簿》和《阿比拿铁》，这两首歌都是以非人类视角来写的，α\n面从前者开始降，β\n面从后者开始升，且这两首歌在专辑歌曲的整体顺序上处于对称的位置。《瓦特城事件簿》歌词比较抽象，是以人工智能视角记录下的一桩凶杀案。据说 “拿铁” 是歌手宠物猫的名字，那么 “阿比” 就是指阿比西尼亚猫，古埃及猫的后裔。而《歌乐天》中的巴利语来自古印度。</p>\n<blockquote>\n<p>↓\n脚步踩得不深，浪花叠叠层层。被冲刷后一点不剩，就像无事发生。<a id=\"a8\" onclick=\"toggleIframe(2,&quot;1950552164&quot;,&quot;s8&quot;,&quot;a8&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s8\">\n\n</div>\n<h2 id=\"泛中文-v-家\">泛中文 V 家</h2>\n<p>人声主体是由以 VOCALOID\n为代表的一系列歌声合成引擎所合成出来的歌曲，是笔者听得最多的歌曲，无论是数目上还是时间上。其中《百万花王》是唯一一张抱着真正好听的心态购买的，因为它同时包含新歌和旧歌。其他专辑是先听了、后才好听，要么是出于一种情怀购买，要么听的是网络盗版，没有付费的。</p>\n<p>《百万花王》（2020）每首歌写了一种花，但是第一张专辑只收录了十首，这说明以后还要出九万九千九百九十九张专辑。有借花抒情的，如《梨花泽泽远山远》写故乡的梨花开呼唤着我归来。有把花拟人化的，如《生死一舞的爱语》写沙漠中的狐尾龙舌兰在枯萎之前借着狂风为爱生死一舞；《优雅的罪恶之源》写罂粟花从呼吸走到锁骨、一步一步让你臣服；《百里芭蕉百里花》写芭蕉幻化成女子与少年郎邂逅；《沉溺在神的砂海》写海妖女狸藻用管风琴让你的心沉船。更多是营造出一种氛围的，如《西西里的自由诗》为凯尔特风格；《时一现耳三千岁》饱含佛教色彩；《夜半闻声有归人》写悬铃花为逝去的人引路；《为新生振翅而上》写生态系统毁灭后的初生演替。牡丹被称为花中之王，为了折损她的部分光芒，让其他花也能好过，所以《我偏独坐第一香》的人声被掐了，只保留伴奏放在第一首。</p>\n<blockquote>\n<p>↓\n梦化身成帕耳忒诺珀，立于砂崖。遵循神的指引，和它融为一体。<a id=\"a9\" onclick=\"toggleIframe(3,&quot;2510102870&quot;,&quot;s9&quot;,&quot;a9&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s9\">\n\n</div>\n<p>《南北寻光》（2015）的初版有 12 首歌，都是比较阳光慵懒的。2017\n年的最终版里新加入了 6 首歌，可谓是画龙点睛了：专辑分为 AB 两面，B\n面从《Adventure》开始转折，再从《眼泪》爬升到《卧室幻想》，从《AM10:00》过渡到《夏末》，之后是三首不同风味走马灯式的回顾，直到《Back\nTo\nYou》。这种转折使得专辑的故事性比初版强，在写南北组（乐正绫、洛天依）的旅行基础上加入了作者自身的心路历程。</p>\n<blockquote>\n<p>↓\n我只想知道属于我的是不是真的我的，还是由我替谁在保管着。<a id=\"a10\" onclick=\"toggleIframe(3,&quot;2494423396&quot;,&quot;s10&quot;,&quot;a10&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s10\">\n\n</div>\n<p>《吉光片羽 Queendom》（2020）是一张来自 9\n组不同创作者的作品集，但如果你有足够的想象力（或者说过度解读的能力），可以把它想象成一个完整的故事 —— 包括一些其他作品集，即使是无关的作品集合，他们安排歌曲顺序也是有讲究的，一般是前两首歌奠定专辑的基调，重量级的放在最后两个。由于歌曲之间互相没有关系，就把专辑取名为 “天马行空”“天方夜谭”“森罗万象”“海纳百川” 之类的。特别地，该专辑的第七首歌叫《第七颗恒星自毁》。反例是：《平行四界\nQuadimension\nX-3》（2022）的封面为一张蓝色的海底，但有一半以上的歌在歌名上就能让你联想到红色。</p>\n<blockquote>\n<p>↓\n五维介质的一些歌处于同一世界观，所以他们喜欢把一套旋律用到两首及以上的歌上。<a id=\"a11\" onclick=\"toggleIframe(3,&quot;2509712255&quot;,&quot;s11&quot;,&quot;a11&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s11\">\n\n</div>\n<p>《从众效应》（2019）是一张金属乐专辑，倡导人们不要盲目从众。有讽刺炒股的炒得倾家荡产的《如意算盘》；讽刺擦边直播吸引流量的《聊播》；《天朝从众效应》写阶级和从众效应的客观存在；《一样一样》写社会阶层上升的通道是有限的，不在上层不代表你不优秀；《笨鸟先飞》讨论的是在网络上到底应不应该发声，作为《键盘侠的斗争哲学》的一个补充；《加特林》写生活节奏越来越快，想把手里的破事全给扫了，轶事是作者本人在编这首歌的曲子的时候，由于太忙了，所以直接照着他喜欢乐队的某一首歌扒了一段，被人指出之后道歉重写了。《大风歌\n20xx》写互联网上的一些盲目粉丝将会在之后一次一次地捧杀他们的偶像，按曲绘来看，已经被捧杀的有冯小刚、六小龄童等。《君宝》致敬武侠小说泰斗金庸以及其笔下的人物张三丰，鼓励人们活得洒脱一点，为整张专辑的批判性做了一个缓和。</p>\n<blockquote>\n<p>↓\n我想无非是你入戏太深了，青红皂白不是什么象征是非的颜色。<a id=\"a12\" onclick=\"toggleIframe(2,&quot;531757237&quot;,&quot;s12&quot;,&quot;a12&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s12\">\n\n</div>\n<p>《空中楼阁》是一张没有发布实体碟子的数字专辑，有魔幻现实主义的味道。特点是作者在每一年都会把专辑的发行时间修改到次年的\n8 月 20 号，后来网易云音乐不允许改了，所以发行时间定格到了 2021 年 8 月\n20 号。</p>\n<blockquote>\n<p>↓\n睁开眼就像大型梦游。<a id=\"a13\" onclick=\"toggleIframe(2,&quot;1463449959&quot;,&quot;s13&quot;,&quot;a13&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s13\">\n\n</div>\n<p>《心术》（2023）是由心华独唱的专辑。如果你知道 VOCALOID\n的日语是ボカロ的话，结合专辑封面以及最后一首歌的名字，你可以从专辑名里解读出至少四层含义。</p>\n<blockquote>\n<p>饿了么。<a id=\"a14\" onclick=\"toggleIframe(2,&quot;1398928356&quot;,&quot;s14&quot;,&quot;a14&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s14\">\n\n</div>\n<h2 id=\"韶音赋\">《韶音赋》</h2>\n<p>韶是一种乐曲，后引申为 “美好的”；赋是一种文体，用于描写和抒情。词作者是<a href=\"https://space.bilibili.com/109564\">战场原妖精</a>。</p>\n<p>曲子有三个发布版本：初版由洛天依演唱，战场原妖精词曲调，2012\n年发布于<a href=\"https://www.bilibili.com/video/BV1ax411F7z2/\">哔哩哔哩</a>；2014\n年由作者重调重混，由洛天依演唱，收录于专辑<a href=\"https://www.bilibili.com/video/av1042693/\">《平行四界\nQuadimension》</a>；2016 年由作者重调重混，由星尘演唱，发布于<a href=\"https://www.bilibili.com/video/BV1us41167ww/\">哔哩哔哩</a>。</p>\n<p>曲子结构并没有什么大变化，这是第二个版本。曲风属于：旋律金属 / 民谣金属（根据专辑宣传视频里的介绍）。<a id=\"a15\" onclick=\"toggleIframe(2,&quot;429460265&quot;,&quot;s15&quot;,&quot;a15&quot;)\">点此收听</a></p>\n<div id=\"s15\">\n\n</div>\n<blockquote>\n<p><i>浮黎元始开天地&nbsp;诸神创世天各一</i><br>\n<i>三清六御轮回助&nbsp;神界人间满紫气</i><br></p>\n</blockquote>\n<ul>\n<li>浮黎元始：浮黎元始天尊，指盘古。—— 也有说指玉皇大帝的，而盘古是祂的长子玉清元始天尊。这不重要，只需要知道祂是神仙，是创世者，是对自然的想象，是一种信仰。三清六御同理，也有三清四御的说法。可能是出于字形和音韵美，选择浮黎比玉清好，三清六御比三清四御好。（应该没有道长能找到这）</li>\n<li>紫气：祥瑞之气。</li>\n</ul>\n<blockquote>\n<p><i>天边远山泛青光&nbsp;忽而花落花满殇</i><br>\n<i>我从雾中乘风来&nbsp;只为伴君不思量</i><br></p>\n</blockquote>\n<ul>\n<li>青光：绿色的光。也指光阴、时光。</li>\n<li>殇：非 “正常” 死亡：未成年而死、战死、为国捐躯。</li>\n</ul>\n<p>我是一名来自世界之外的旁观者：什么东西都不想，主打一个陪伴君。</p>\n<blockquote>\n<p><i>伏羲女娲神农氏&nbsp;江河淮济育生灵</i><br>\n<i>南宫北斗映贤尚&nbsp;天涯海角随君行</i><br></p>\n</blockquote>\n<ul>\n<li>伏羲女娲神农氏：用三位代指多位。伏羲是 “龙的传人” 的龙，神农是 “炎黄子孙” 的炎帝。</li>\n<li>江河淮济：长江、黄河、淮河、济水。四条流入大海的河。</li>\n<li>南宫北斗：星辰。</li>\n<li>贤尚：尚：尊崇。可以把贤尚空想成人的意思。</li>\n</ul>\n<blockquote>\n<p><i>生来无欲享富贵&nbsp;但求为君咏思绪</i><br>\n<i>若夫德行无领会&nbsp;自退远方乘浪归</i><br></p>\n</blockquote>\n<ul>\n<li>若夫：句首语气词，“至于…… 的话”。要是我没有领会到君的德行，那我就要回去了。</li>\n</ul>\n<blockquote>\n<p><i>我带着梦想&nbsp;带着希望&nbsp;带着力量</i><br>\n<i>探寻人间的感伤</i><br></p>\n</blockquote>\n<blockquote>\n<p><i>请赋予我理想&nbsp;请赋予我希望</i><br>\n<i>请赋予我一颗炽热的心房</i><br> <i>让这情感释放</i><br></p>\n</blockquote>\n<p>赋予和赋是紧密相关的。一颗心房并不是量词使用不当，即使在生物学上也有心房、心室的概念，比如：<span class=\"r\">动脉血</span>从左心室流入<span class=\"r\">主动脉</span>，途经心肺之外的全身毛细血管消耗氧，变成<span class=\"b\">静脉血</span>，经<span class=\"b\">上腔、下腔静脉</span>流回右心房，这被称为体循环；<span class=\"b\">静脉血</span>从右心室流入<span class=\"r\">肺动脉</span>，途径肺里的毛细血管吸收氧，变成<span class=\"r\">动脉血</span>，经<span class=\"b\">肺静脉</span>流回左心房，这被称为肺循环。</p>\n<style>\n   .r{\n      color: red;\n   }\n   .b{\n      color: blue;\n   }\n</style>\n<blockquote>\n<p><i>泪水模糊了眼眶&nbsp;为何这般闪亮</i><br>\n<i>就算我终会消亡&nbsp;终会迷茫</i><br> <i>请让我带走这份熵</i><br></p>\n</blockquote>\n<p>熵是物理学的一个概念，用于描述系统的混乱程度。对于一个孤立的（不与外界交换能量和质量的）系统，其熵会一直增加。这被称为热力学第二定律。浅显不恰当的例子就是：如果不整理耳机线，它总是会缠起来。</p>\n<h2 id=\"lost-in-tianyi\">《Lost In Tianyi》</h2>\n<p><a href=\"https://music.douban.com/subject/34778807/\">《Lost In\nTianyi》</a>，谁 Lost In\nTianyi？创作者或者听众，写歌的人或者听歌的人。洛天依是歌声数据库，同时作为一个<a href=\"https://www.bilibili.com/video/BV1Hj411B7vc/\">纸片人</a>歌手。为什么写歌 / 听歌？要表达一些什么东西 / 缺失一些什么东西，或许是理想。所以《Lost\nIn Tianyi》=《迷失在理想里》。</p>\n<p><strong>《8102》</strong>：是 2018 倒过来 —— 专辑 2019 年发行。</p>\n<blockquote>\n<p><em>倒流历史的始终 颠覆盖棺的对错 回到尚且一片空白的宇宙</em></p>\n</blockquote>\n<p>注意最后一句：</p>\n<blockquote>\n<p><em>目力所及处的某一天 你在身边</em></p>\n</blockquote>\n<p>“你” 是谁？为什么是在 “目力所及处的某一天” 出现在身边？如果指的不是具体的人，而是洛天依（理想）的话，整张专辑就能说通了，还能接着下一首歌。</p>\n<p><strong>《啦哒哒》</strong>：一人一猫。“你” 这只猫是 “我” 的理想。迷茫的我看到了你、开始追求理想、与理想分离、发回忆刀、回到现实的一个人。怎么看出来是理想的？</p>\n<blockquote>\n<p><em>编织着我在现实中的梦</em></p>\n</blockquote>\n<p>改名成《Lost In Tianyi》也没问题：</p>\n<blockquote>\n<p><em>我们正 不断 向交叉的路口走 迷了路 顺其自然不回头</em></p>\n</blockquote>\n<p><strong>《最大化 +》</strong>：把窗口最大化</p>\n<blockquote>\n<p><em>穿梭在复制粘贴 再粘贴复制的无数窗口</em></p>\n</blockquote>\n<p><strong>《风兮风兮》</strong>：生物之以息相吹也</p>\n<blockquote>\n<p><em>冬扯云若柳絮飞 春采白雪作樱吹</em></p>\n</blockquote>\n<p><strong>《斯芬克斯的谜底》</strong>：歌名来自希腊神话里斯芬克斯的谜题：一种动物早晨四条腿，中午两条腿，晚上三条腿走路，腿最多的时候，也正是速度和力量最小的时候。歌词前两句里有 “被风吹散”，接着上一首歌。所以可以把整张专辑当成概念专辑。<a id=\"a16\" onclick=\"toggleIframe(3,&quot;2492184593&quot;,&quot;s16&quot;,&quot;a16&quot;)\">点此收听</a></p>\n<div id=\"s16\">\n\n</div>\n<blockquote>\n<p><em>不期然的一文不名 原来平凡不是演习 洞若观火 却看不清自己</em></p>\n</blockquote>\n<p>这两句歌词非常好，因为笔者的名字就叫若凡。凡了吗？若凡。到底凡没凡？</p>\n<p>当我们说一些东西是平凡的时候，实际上注重的是它们之间的相似之处；当我们说一些东西是不平凡的时候，实际上注重的是它们与其他东西的不同之处。普通人体细胞核里都有\n23 对染色体，数量是相同的，DNA\n各有异同。所以每个人分别都有平凡和不平凡的地方。</p>\n<p><strong>《笔记本上的幻想世界》</strong></p>\n<p>与此对应的是 “现实的真实世界”。笔者感受到曲子和词有种令人难以言说的悲伤感和诡异感，类似 “梦核”。理由：全曲共\n61\n句歌词（不算和声），我们只用关注每句歌词的最后两个音：后比前高为升，前比后高为降，音高相同为平：</p>\n<table>\n<thead>\n<tr>\n<th>升</th>\n<th>降</th>\n<th>平</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 6</td>\n<td>25</td>\n<td>29</td>\n</tr>\n</tbody>\n</table>\n<p>特别地，对于最后一句：</p>\n<blockquote>\n<p><em>继续踏上实现梦想的路线</em></p>\n</blockquote>\n<p>它是刚升起来，又降下去了。</p>\n<p><strong>《斯人》</strong></p>\n<p>This\nperson。讲两种文化 / 思想 / 世界观的碰撞。这是往大说的，往小说是写一位中国武者和一位日本武者的交锋，包括语言上的交锋，那段激烈的间奏是物理上的交锋。歌词中日混杂，一个歌手演绎两位武者：洛天依的 [汉语] 声库和 (日语) 声库。<a id=\"a17\" onclick=\"toggleIframe(3,&quot;2492223560&quot;,&quot;s17&quot;,&quot;a17&quot;)\">点此收听</a></p>\n<div id=\"s17\">\n\n</div>\n<p><strong>《嘘つきは恋のはじまり》</strong>：谎言是恋爱的开始。看歌名是日本武者打赢了。</p>\n<p><strong>《Monologue》</strong>：独白，屏幕外边的人以屏幕里面的人的视角写给屏幕外面的人的。</p>\n<blockquote>\n<p><em>而你和我之间 相隔 不同 银河 时空 仿佛始终没有相遇过</em></p>\n</blockquote>\n<h2 id=\"草蛇惊一歌词解读\">《草蛇惊一》歌词解读</h2>\n<p>《草蛇惊一》收录于初音未来 V4C 专辑《初梦》，作词是<a href=\"https://space.bilibili.com/396967\">麦当叔劳劳</a>。<a href=\"https://www.bilibili.com/video/BV1Px41177ht/\">去 B 站观看</a> |\n<a id=\"a18\" onclick=\"toggleIframe(2,&quot;515455714&quot;,&quot;s18&quot;,&quot;a18&quot;)\">点此收听</a></p>\n<div id=\"s18\">\n\n</div>\n<p>很容易从歌名联想到 “打草惊蛇”，笔者认为草蛇惊一的一是指打草的人。在这里，草、蛇和打草的人都是主人公自己 —— 主人公自己惊动了自己。非得拆开的话，草是身，蛇是心，惊是内，一是外。还可以参考歌词的<a href=\"https://coolmikehatsune22.wordpress.com/2020/11/13/snake-in-the-grass/\">英文翻译</a>，译者是\ncoolmikehatsune22。里面有一些和笔者想的不一样，或者没想到的东西，会在下文说明。</p>\n<p><strong>主歌一</strong></p>\n<blockquote>\n<p><em>羡慕风车 不必去四海漂泊 只要能在原地旋转便能体会风的快乐</em></p>\n</blockquote>\n<p>第一句最重要，是起因，主人公的内心独白。我们把主人公此时的视角记作 “视角\nA”。风车有三层意思：</p>\n<ol type=\"1\">\n<li>指被风驱动的人或物。</li>\n<li>指《堂吉诃德》里的风车所指，即假想敌。</li>\n<li>指主人公自己。</li>\n</ol>\n<p>如果你对风这个字的想法和笔者一样，那你就能明白笔者在说什么。在网页底部列举了一些关于风的其他歌曲。原地旋转就是不作出改变，变成石头，最后变成流浪的风。</p>\n<blockquote>\n<p><em>及时行乐 外婆的故事里说因果报应乃白日见鬼</em></p>\n</blockquote>\n<p>视角 A\n想要把自己的人生观向风车靠拢。英文翻译是：“毕竟，奶奶在她的故事里总是在说，你不应该指望报应会降临到坏人身上”。</p>\n<blockquote>\n<p><em>转折 没曾想单木不林一丝不线如我 孤单的说书者也能偷乐</em></p>\n</blockquote>\n<p>主人公突然转换为上帝视角，把自己代入说书者。这样就像<a href=\"https://movie.douban.com/subject/1292064/\">看电影</a>一样，不用再担心各种现实问题了。</p>\n<blockquote>\n<p><em>相濡以沫不如相忘于江湖 外公总说这是他孤单的借口</em></p>\n</blockquote>\n<p>进一步妄想自己是相忘于江湖的鱼，逃避现实。</p>\n<blockquote>\n<p>《庄子・内篇・大宗师》：</p>\n<ul>\n<li>泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不如相忘于江湖。与其誉尧而非桀也，不如两忘而化其道。</li>\n</ul>\n<p>泉水干了，鱼聚集在陆地。与其用唾沫互相润湿对方，不如各自去往大江大湖，互相忘记。说尧好，说桀不好，和我有什么关系？</p>\n<p>《庄子・外篇・天运》：</p>\n<ul>\n<li>孔子见老聃而语仁义。老聃曰：“夫……………… 夫鹄不日浴而白，乌不日黔而黑。黑白之朴，不足以为辩，名誉之观，不足以为广。泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不若相忘于江湖。”</li>\n</ul>\n</blockquote>\n<p>英文翻译则非常直白：“与其帮助挽救我们能挽救的东西，不如完全忘记它，这是爷爷总是说的（他孤身一人的）借口”。</p>\n<p><strong>主歌二</strong></p>\n<blockquote>\n<p><em>放轻松 压力别弄得太大 飘飘欲仙欲死不知是不是自己的风格</em></p>\n</blockquote>\n<p>主人公认为自己逃避现实是不对的，此时视角转换回了视角\nA。前半部分是视角 A 对自己说的：没事，放轻松一点；后半部分是视角 A\n对说书者说的：这已经成为你的风格了吗？</p>\n<blockquote>\n<p><em>一语道破 下手斩草除根哭吧哭吧 无聊卑微笑话</em></p>\n</blockquote>\n<p>视角 A\n一语道破了说书者的伪装，并否定掉了风车的人生观。认为有这种想法的自己是无聊卑微笑话，要把这种想法斩草除根。风车你就尽情去哭吧。</p>\n<blockquote>\n<p><em>音色也在不知不觉中变得低沉 就像患了名为暴躁的病一样</em></p>\n</blockquote>\n<p>主人公在否定自己之后，风车的一面并没有消失，而是在反噬视角\nA。主人公的音色逐渐低沉，内心逐渐暴躁。</p>\n<blockquote>\n<p><em>快停止吧 那张顽固蠢蛋的终身证明我不想再去想念</em></p>\n</blockquote>\n<p>风车和视角 A\n在脑海里互相争斗。主人公希望自己不要再胡思乱想了，给自己开了顽固蠢蛋的终身证明。</p>\n<p><strong>导歌</strong></p>\n<blockquote>\n<p><em>一不做二不休自在风流 乐不思蜀子龙我就不走</em></p>\n</blockquote>\n<p>对于一件事，我要么不做，要么就做到最好，我觉得这样太酷啦；赵子龙救了刘禅最终导致乐不思蜀，这让我怎么做接下来每一步的决定呢？干脆不做了。</p>\n<p>不管怎么断句都可以：</p>\n<ul>\n<li>乐不思蜀 / 子龙我 / 就不走</li>\n<li>乐不思蜀子龙 / 我就不走</li>\n</ul>\n<p>都是讲主人公不想去走赵云的乐不思蜀这一条路，然而这两件事隔了好几十年。英文注释子龙：‘child\ndragon’, the eponymous\nsnake。正好呼应歌名，不管是赵子龙还是蛇都能代指主人公。</p>\n<blockquote>\n<p><em>过五关杀六将公子献头 金蝉脱壳孙老头八十二变我有</em></p>\n</blockquote>\n<p>主人公一会儿代入关羽，一会儿代入荆轲 / 太子丹。并预想了像他们一样做事之后的结果。（但是在荆轲刺秦的故事中，是荆轲带着樊於期的头，公子不是带的，也不是被带的。也可能不是这个典故，百度搜公子献头出自漫画《火凤燎原》。也可能压根没有典故，只是一种代指）金蝉脱壳指主人公抽离自己为说书者。孙老头就是孙猴子，八十二变指思想转换的复杂性。不管怎么断句都可以：</p>\n<ul>\n<li>金蝉脱壳 / 孙老头八十二变我有</li>\n<li>金蝉脱壳孙老头 / 八十二变我有</li>\n<li>金蝉脱壳孙老头八十二变 / 我有</li>\n</ul>\n<p>笔者认为是第一种，金蝉脱壳和前半句过五关杀六将公子献头是连在一起的，用孙老头八十二变来修饰主人公想法的混乱程度。歌手断句是第二种 —— 当然不是初音未来现场发挥的，是作者设计的，可能会听起来更舒服。另外，选择八十二变的原因还可能有，头 —— 八两个字的连接处确实比头 —— 七不管是唱起来还是听起来都更舒服。以及我比孙老头还多十变。英文翻译则是第三种，用孙老头八十二变来修饰我有很多种金蝉脱壳的行动。</p>\n<blockquote>\n<p><em>百闻不如一见来翻筋斗&nbsp;福星高照五湖四海都随我漫步遨游&nbsp;山雨欲来风满楼</em></p>\n</blockquote>\n<p>终于要作决定了！但是在做出决定之前的继续妄想，构成了主人公脑海里的狂风。百闻不如一见翻筋斗指孙老头想要做出决定。至于是决定行动，还是决定继续妄想，不得而知。</p>\n<p><strong>副歌</strong></p>\n<blockquote>\n<p><em>再见吧 提线的傀儡师 耻笑咚咚跳的心脏和那不实际的憧憬</em></p>\n</blockquote>\n<p>傀儡是身体，傀儡师是幻想。主人公向对自己造成心惊肉跳的幻想作别。英文翻译不实际的憧憬为\nlofty ideals（远大的理想）。</p>\n<blockquote>\n<p><em>玩笑吧 我不想听假话 暴露皆大欢喜不攻自破不成熟的笑话</em></p>\n</blockquote>\n<p>英文翻译：“你想开什么玩笑就开什么玩笑，但我不会再屈服于你的谎言，我会把你一直在快乐地兜售的所有那些毫无实质意义、脆弱的垃圾都吹出来。” 笔者对前半句的翻译有点不认同，但认为后半句翻译得非常好。笔者认为这写的是主人公不想听假话的想法和暴露笑话的行为，是指主人公给自己的\nEQ 开了低通滤波。</p>\n<blockquote>\n<p><em>怠慢吗 或许只是懈怠吧 嘁嘁咔咔咚咚咭咭再也不想它</em></p>\n</blockquote>\n<p>主人公认为，这都是由自己的怠慢或者懈怠造成的。在又一番思想斗争之后停止了思考 —— 然后进入第二段主歌。</p>\n","excerpt":"<h2 id=\"什么样的音乐才算好听的\">什么样的音乐才算好听的</h2>\n<p>可能分真性的好听和假性的好听。</p>\n<ol type=\"1\">\n<li>药物的作用：能让你出现情绪反应的。</li>\n<li>代言的作用：可以帮你说话的，歌词里所描述的经历有一部分与你类似，能让你感同身受，帮你说出了你说不出来的话。</li>\n<li>分心的作用：可以让大部分的注意卷入进去的，用于催眠或者隔离负面的情绪。</li>\n<li>满足崇高心理的作用：精巧的、出人意料的、神秘的、伪装的、集邮的、报菜名的。</li>\n</ol>\n<p>笔者认为，如果第三点的作用强烈，加上伴随正面的情绪（包括开心、放松和深情），算是真性好听的。如果第四点占主要作用，且在多数情况下听不会出现正面情绪，只有在以毒攻毒的状态下，或者突然想听的状态下，出现一些情绪，那么它算是假性好听的。</p>\n<p>过去在这里分享出来的，多数都是属于假性好听的，因为它主要是为了起第四个作用。</p>","more":"<script>\nfunction toggleIframe(songType, songId, contianerId, aId) {\n  let container = document.getElementById(contianerId);\n  let a = document.getElementById(aId);\n  if (container === null) {\n    console.log(\"未获取到contianer\");\n  } else if (container.childNodes.length !== 1) {\n    container.removeChild(container.lastChild);\n    a.innerText = \"点此收听\";\n  } else {\n    let iframe = document.createElement(\"iframe\");\n    iframe.frameBorder = \"no\";\n    iframe.width = \"100%\";\n    iframe.height = 86;\n    iframe.src = `//music.163.com/outchain/player?type=${songType}&id=${songId}&auto=0&height=66`;\n    container.appendChild(iframe);\n    a.innerText = \"点此收起\";\n  }\n}\n</script>\n<h2 id=\"概念专辑\">概念专辑</h2>\n<p>先从概念专辑说起。概念专辑是一个比较有意思的概念：这种专辑里的所有歌是围绕着同一概念创作的。</p>\n<p>据说概念专辑的起源是英国摇滚乐队披头士的《Sgt. Pepper's Lonely Hearts\nClub\nBand》（1967）。大概是他们模拟了一个虚假的乐队，这个虚假的乐队是作为一个演出者给观众表演，这个表演的过程以一种故事的形式记录在了专辑里。可以这样理解：你在听这张专辑的同时，身临其境地感受了一场乐队的演出，但是这个乐队的名字不叫披头士，叫佩珀军士的孤独之心俱乐部乐队。</p>\n<blockquote>\n<p>↓\n浮生一日，佩珀军士里的大轴子。特点是在歌曲的最后一段会提醒你所有歌都放完了，该把碟子取下来了。但是这个没充\nVIP\n的版本里没有。<a id=\"a1\" onclick=\"toggleIframe(2,&quot;1476062&quot;,&quot;s1&quot;,&quot;a1&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s1\">\n\n</div>\n<p>另一个英国摇滚乐队叫平克弗洛伊德。笔者没去过英国，不知道摇滚什么意思，也不知道乐队什么意思，也没吸过大麻，但是他们的歌就像大麻一样。乐队名字\nPink Floyd 取自乐队已故成员 Syd\n所钟爱的两位蓝调音乐家的名字，和精神分析创始人 Sigmund Freud\n无关，但是他们的歌与精神分析是同一个内核。《The Dark Side of The\nMoon》（1973）和《The\nWall》（1979）都是整轨的专辑，都是前一首歌和后一首歌无缝衔接，加上最后一首歌的结束部分接着第一首的开头部分，所以听着比较瘆人。前者被称为 “流行音乐史上最伟大的专辑之一”，后者被称为 “史上最伟大的概念专辑”，至于他们说得对不对，你得自己听一遍才能判断。</p>\n<blockquote>\n<p>↓ 又爽又麻，迷墙里的第十九首。讲的乐队主唱 Pink\n在上台演出之前接受医生治疗之后所感受到的画面。<a id=\"a2\" onclick=\"toggleIframe(3,&quot;2524058510&quot;,&quot;s2&quot;,&quot;a2&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s2\">\n\n</div>\n<p>中国摇滚乐队有苍狼乐队，1997\n年出了一张专辑叫《出走》，打头的歌是腾格尔著名的草原歌曲《天堂》。另外几首叫《出走》《有人说》《他乡》《上帝说》《我的心》《思念（一）》《思念（二）》《家》，从歌名就可以理出整个故事脉络。</p>\n<blockquote>\n<p>↓\n他乡没有我的那个天堂。<a id=\"a3\" onclick=\"toggleIframe(2,&quot;151484&quot;,&quot;s3&quot;,&quot;a3&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s3\">\n\n</div>\n<p>中国的一部分摇滚歌曲喜欢和政治对话，政治就是人性，摇滚乐起到一个释放情绪的作用。中国第一张摇滚专辑是崔健的《新长征路上的摇滚》（1989），用 “新长征” 来比喻改革开放后的社会变革。更含蓄的表达方式是\nChinese Footbool 乐队的同名专辑（2015），是用普通少年的视角来写的。</p>\n<p>金属是从摇滚里分化而来的，它的特点是比摇滚乐有更重的吉他失真音色。金属受到了古典的影响，有很多长篇的，一些金属乐专辑被称为摇滚歌剧。那么长篇的歌剧和交响曲算概念专辑吗？</p>\n<blockquote>\n<p>↓\n四季。<a id=\"a4\" onclick=\"toggleIframe(2,&quot;5085871&quot;,&quot;s4&quot;,&quot;a4&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s4\">\n\n</div>\n<blockquote>\n<p>↓\n如果你是形式中立派，不一定分成好几首歌，那么葫芦娃的十七种弹法也是概念专辑。<a id=\"a18\" onclick=\"toggleIframe(2,&quot;1864862748&quot;,&quot;s18&quot;,&quot;a18&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s18\">\n\n</div>\n<blockquote>\n<p>-\n如果你是形式自由派，不一定以音频作为载体，《聊斋志异》也是概念专辑。<a href=\"https://liaozhai.5000yan.com/\">点此阅读</a></p>\n</blockquote>\n<blockquote>\n<p>↓\n如果你是内容中立派，有曲子就行，那么录制一遍过的京剧也是概念专辑。<a id=\"a5\" onclick=\"toggleIframe(2,&quot;442314084&quot;,&quot;s5&quot;,&quot;a5&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s5\">\n\n</div>\n<blockquote>\n<p>↓\n内容自由派：说事两部曲、卖拐三部曲、白云黑土系列也是概念专辑。<a id=\"a6\" onclick=\"toggleIframe(2,&quot;27630154&quot;,&quot;s6&quot;,&quot;a6&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s6\">\n\n</div>\n<p>把《2:3》顺时针转九十度是一个人脸，这是二次元音乐人 ilem 在 2019\n年发行的专辑封面。表面上看，是一碟二次元和一碟三次元在比翼同行，实际上还可以按时间顺序来解读：《勾指起誓》，但《夜间出租车》。因为《夜间出租车》，所以《大氿歌》。《大氿歌》之后变成了《得过且过的勇者》，《写给我家狗的歌》。最后回到《威海》遇见《售楼小姐》。它从情绪色彩上也是从 “2” 过渡到 “3” 的。</p>\n<blockquote>\n<p>↓\n大疯一趟两相忘，不知东方天既白。<a id=\"a7\" onclick=\"toggleIframe(2,&quot;1349959772&quot;,&quot;s7&quot;,&quot;a7&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s7\">\n\n</div>\n<p>《无事发生》（2021）讲了一个关于海和夏天、忘与不忘的故事。专辑分两面，每面的感情起伏都是升 - 降 - 升。专辑名字于全文中出现两次：《瓦特城事件簿》和《阿比拿铁》，这两首歌都是以非人类视角来写的，α\n面从前者开始降，β\n面从后者开始升，且这两首歌在专辑歌曲的整体顺序上处于对称的位置。《瓦特城事件簿》歌词比较抽象，是以人工智能视角记录下的一桩凶杀案。据说 “拿铁” 是歌手宠物猫的名字，那么 “阿比” 就是指阿比西尼亚猫，古埃及猫的后裔。而《歌乐天》中的巴利语来自古印度。</p>\n<blockquote>\n<p>↓\n脚步踩得不深，浪花叠叠层层。被冲刷后一点不剩，就像无事发生。<a id=\"a8\" onclick=\"toggleIframe(2,&quot;1950552164&quot;,&quot;s8&quot;,&quot;a8&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s8\">\n\n</div>\n<h2 id=\"泛中文-v-家\">泛中文 V 家</h2>\n<p>人声主体是由以 VOCALOID\n为代表的一系列歌声合成引擎所合成出来的歌曲，是笔者听得最多的歌曲，无论是数目上还是时间上。其中《百万花王》是唯一一张抱着真正好听的心态购买的，因为它同时包含新歌和旧歌。其他专辑是先听了、后才好听，要么是出于一种情怀购买，要么听的是网络盗版，没有付费的。</p>\n<p>《百万花王》（2020）每首歌写了一种花，但是第一张专辑只收录了十首，这说明以后还要出九万九千九百九十九张专辑。有借花抒情的，如《梨花泽泽远山远》写故乡的梨花开呼唤着我归来。有把花拟人化的，如《生死一舞的爱语》写沙漠中的狐尾龙舌兰在枯萎之前借着狂风为爱生死一舞；《优雅的罪恶之源》写罂粟花从呼吸走到锁骨、一步一步让你臣服；《百里芭蕉百里花》写芭蕉幻化成女子与少年郎邂逅；《沉溺在神的砂海》写海妖女狸藻用管风琴让你的心沉船。更多是营造出一种氛围的，如《西西里的自由诗》为凯尔特风格；《时一现耳三千岁》饱含佛教色彩；《夜半闻声有归人》写悬铃花为逝去的人引路；《为新生振翅而上》写生态系统毁灭后的初生演替。牡丹被称为花中之王，为了折损她的部分光芒，让其他花也能好过，所以《我偏独坐第一香》的人声被掐了，只保留伴奏放在第一首。</p>\n<blockquote>\n<p>↓\n梦化身成帕耳忒诺珀，立于砂崖。遵循神的指引，和它融为一体。<a id=\"a9\" onclick=\"toggleIframe(3,&quot;2510102870&quot;,&quot;s9&quot;,&quot;a9&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s9\">\n\n</div>\n<p>《南北寻光》（2015）的初版有 12 首歌，都是比较阳光慵懒的。2017\n年的最终版里新加入了 6 首歌，可谓是画龙点睛了：专辑分为 AB 两面，B\n面从《Adventure》开始转折，再从《眼泪》爬升到《卧室幻想》，从《AM10:00》过渡到《夏末》，之后是三首不同风味走马灯式的回顾，直到《Back\nTo\nYou》。这种转折使得专辑的故事性比初版强，在写南北组（乐正绫、洛天依）的旅行基础上加入了作者自身的心路历程。</p>\n<blockquote>\n<p>↓\n我只想知道属于我的是不是真的我的，还是由我替谁在保管着。<a id=\"a10\" onclick=\"toggleIframe(3,&quot;2494423396&quot;,&quot;s10&quot;,&quot;a10&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s10\">\n\n</div>\n<p>《吉光片羽 Queendom》（2020）是一张来自 9\n组不同创作者的作品集，但如果你有足够的想象力（或者说过度解读的能力），可以把它想象成一个完整的故事 —— 包括一些其他作品集，即使是无关的作品集合，他们安排歌曲顺序也是有讲究的，一般是前两首歌奠定专辑的基调，重量级的放在最后两个。由于歌曲之间互相没有关系，就把专辑取名为 “天马行空”“天方夜谭”“森罗万象”“海纳百川” 之类的。特别地，该专辑的第七首歌叫《第七颗恒星自毁》。反例是：《平行四界\nQuadimension\nX-3》（2022）的封面为一张蓝色的海底，但有一半以上的歌在歌名上就能让你联想到红色。</p>\n<blockquote>\n<p>↓\n五维介质的一些歌处于同一世界观，所以他们喜欢把一套旋律用到两首及以上的歌上。<a id=\"a11\" onclick=\"toggleIframe(3,&quot;2509712255&quot;,&quot;s11&quot;,&quot;a11&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s11\">\n\n</div>\n<p>《从众效应》（2019）是一张金属乐专辑，倡导人们不要盲目从众。有讽刺炒股的炒得倾家荡产的《如意算盘》；讽刺擦边直播吸引流量的《聊播》；《天朝从众效应》写阶级和从众效应的客观存在；《一样一样》写社会阶层上升的通道是有限的，不在上层不代表你不优秀；《笨鸟先飞》讨论的是在网络上到底应不应该发声，作为《键盘侠的斗争哲学》的一个补充；《加特林》写生活节奏越来越快，想把手里的破事全给扫了，轶事是作者本人在编这首歌的曲子的时候，由于太忙了，所以直接照着他喜欢乐队的某一首歌扒了一段，被人指出之后道歉重写了。《大风歌\n20xx》写互联网上的一些盲目粉丝将会在之后一次一次地捧杀他们的偶像，按曲绘来看，已经被捧杀的有冯小刚、六小龄童等。《君宝》致敬武侠小说泰斗金庸以及其笔下的人物张三丰，鼓励人们活得洒脱一点，为整张专辑的批判性做了一个缓和。</p>\n<blockquote>\n<p>↓\n我想无非是你入戏太深了，青红皂白不是什么象征是非的颜色。<a id=\"a12\" onclick=\"toggleIframe(2,&quot;531757237&quot;,&quot;s12&quot;,&quot;a12&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s12\">\n\n</div>\n<p>《空中楼阁》是一张没有发布实体碟子的数字专辑，有魔幻现实主义的味道。特点是作者在每一年都会把专辑的发行时间修改到次年的\n8 月 20 号，后来网易云音乐不允许改了，所以发行时间定格到了 2021 年 8 月\n20 号。</p>\n<blockquote>\n<p>↓\n睁开眼就像大型梦游。<a id=\"a13\" onclick=\"toggleIframe(2,&quot;1463449959&quot;,&quot;s13&quot;,&quot;a13&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s13\">\n\n</div>\n<p>《心术》（2023）是由心华独唱的专辑。如果你知道 VOCALOID\n的日语是ボカロ的话，结合专辑封面以及最后一首歌的名字，你可以从专辑名里解读出至少四层含义。</p>\n<blockquote>\n<p>饿了么。<a id=\"a14\" onclick=\"toggleIframe(2,&quot;1398928356&quot;,&quot;s14&quot;,&quot;a14&quot;)\">点此收听</a></p>\n</blockquote>\n<div id=\"s14\">\n\n</div>\n<h2 id=\"韶音赋\">《韶音赋》</h2>\n<p>韶是一种乐曲，后引申为 “美好的”；赋是一种文体，用于描写和抒情。词作者是<a href=\"https://space.bilibili.com/109564\">战场原妖精</a>。</p>\n<p>曲子有三个发布版本：初版由洛天依演唱，战场原妖精词曲调，2012\n年发布于<a href=\"https://www.bilibili.com/video/BV1ax411F7z2/\">哔哩哔哩</a>；2014\n年由作者重调重混，由洛天依演唱，收录于专辑<a href=\"https://www.bilibili.com/video/av1042693/\">《平行四界\nQuadimension》</a>；2016 年由作者重调重混，由星尘演唱，发布于<a href=\"https://www.bilibili.com/video/BV1us41167ww/\">哔哩哔哩</a>。</p>\n<p>曲子结构并没有什么大变化，这是第二个版本。曲风属于：旋律金属 / 民谣金属（根据专辑宣传视频里的介绍）。<a id=\"a15\" onclick=\"toggleIframe(2,&quot;429460265&quot;,&quot;s15&quot;,&quot;a15&quot;)\">点此收听</a></p>\n<div id=\"s15\">\n\n</div>\n<blockquote>\n<p><i>浮黎元始开天地&nbsp;诸神创世天各一</i><br>\n<i>三清六御轮回助&nbsp;神界人间满紫气</i><br></p>\n</blockquote>\n<ul>\n<li>浮黎元始：浮黎元始天尊，指盘古。—— 也有说指玉皇大帝的，而盘古是祂的长子玉清元始天尊。这不重要，只需要知道祂是神仙，是创世者，是对自然的想象，是一种信仰。三清六御同理，也有三清四御的说法。可能是出于字形和音韵美，选择浮黎比玉清好，三清六御比三清四御好。（应该没有道长能找到这）</li>\n<li>紫气：祥瑞之气。</li>\n</ul>\n<blockquote>\n<p><i>天边远山泛青光&nbsp;忽而花落花满殇</i><br>\n<i>我从雾中乘风来&nbsp;只为伴君不思量</i><br></p>\n</blockquote>\n<ul>\n<li>青光：绿色的光。也指光阴、时光。</li>\n<li>殇：非 “正常” 死亡：未成年而死、战死、为国捐躯。</li>\n</ul>\n<p>我是一名来自世界之外的旁观者：什么东西都不想，主打一个陪伴君。</p>\n<blockquote>\n<p><i>伏羲女娲神农氏&nbsp;江河淮济育生灵</i><br>\n<i>南宫北斗映贤尚&nbsp;天涯海角随君行</i><br></p>\n</blockquote>\n<ul>\n<li>伏羲女娲神农氏：用三位代指多位。伏羲是 “龙的传人” 的龙，神农是 “炎黄子孙” 的炎帝。</li>\n<li>江河淮济：长江、黄河、淮河、济水。四条流入大海的河。</li>\n<li>南宫北斗：星辰。</li>\n<li>贤尚：尚：尊崇。可以把贤尚空想成人的意思。</li>\n</ul>\n<blockquote>\n<p><i>生来无欲享富贵&nbsp;但求为君咏思绪</i><br>\n<i>若夫德行无领会&nbsp;自退远方乘浪归</i><br></p>\n</blockquote>\n<ul>\n<li>若夫：句首语气词，“至于…… 的话”。要是我没有领会到君的德行，那我就要回去了。</li>\n</ul>\n<blockquote>\n<p><i>我带着梦想&nbsp;带着希望&nbsp;带着力量</i><br>\n<i>探寻人间的感伤</i><br></p>\n</blockquote>\n<blockquote>\n<p><i>请赋予我理想&nbsp;请赋予我希望</i><br>\n<i>请赋予我一颗炽热的心房</i><br> <i>让这情感释放</i><br></p>\n</blockquote>\n<p>赋予和赋是紧密相关的。一颗心房并不是量词使用不当，即使在生物学上也有心房、心室的概念，比如：<span class=\"r\">动脉血</span>从左心室流入<span class=\"r\">主动脉</span>，途经心肺之外的全身毛细血管消耗氧，变成<span class=\"b\">静脉血</span>，经<span class=\"b\">上腔、下腔静脉</span>流回右心房，这被称为体循环；<span class=\"b\">静脉血</span>从右心室流入<span class=\"r\">肺动脉</span>，途径肺里的毛细血管吸收氧，变成<span class=\"r\">动脉血</span>，经<span class=\"b\">肺静脉</span>流回左心房，这被称为肺循环。</p>\n<style>\n   .r{\n      color: red;\n   }\n   .b{\n      color: blue;\n   }\n</style>\n<blockquote>\n<p><i>泪水模糊了眼眶&nbsp;为何这般闪亮</i><br>\n<i>就算我终会消亡&nbsp;终会迷茫</i><br> <i>请让我带走这份熵</i><br></p>\n</blockquote>\n<p>熵是物理学的一个概念，用于描述系统的混乱程度。对于一个孤立的（不与外界交换能量和质量的）系统，其熵会一直增加。这被称为热力学第二定律。浅显不恰当的例子就是：如果不整理耳机线，它总是会缠起来。</p>\n<h2 id=\"lost-in-tianyi\">《Lost In Tianyi》</h2>\n<p><a href=\"https://music.douban.com/subject/34778807/\">《Lost In\nTianyi》</a>，谁 Lost In\nTianyi？创作者或者听众，写歌的人或者听歌的人。洛天依是歌声数据库，同时作为一个<a href=\"https://www.bilibili.com/video/BV1Hj411B7vc/\">纸片人</a>歌手。为什么写歌 / 听歌？要表达一些什么东西 / 缺失一些什么东西，或许是理想。所以《Lost\nIn Tianyi》=《迷失在理想里》。</p>\n<p><strong>《8102》</strong>：是 2018 倒过来 —— 专辑 2019 年发行。</p>\n<blockquote>\n<p><em>倒流历史的始终 颠覆盖棺的对错 回到尚且一片空白的宇宙</em></p>\n</blockquote>\n<p>注意最后一句：</p>\n<blockquote>\n<p><em>目力所及处的某一天 你在身边</em></p>\n</blockquote>\n<p>“你” 是谁？为什么是在 “目力所及处的某一天” 出现在身边？如果指的不是具体的人，而是洛天依（理想）的话，整张专辑就能说通了，还能接着下一首歌。</p>\n<p><strong>《啦哒哒》</strong>：一人一猫。“你” 这只猫是 “我” 的理想。迷茫的我看到了你、开始追求理想、与理想分离、发回忆刀、回到现实的一个人。怎么看出来是理想的？</p>\n<blockquote>\n<p><em>编织着我在现实中的梦</em></p>\n</blockquote>\n<p>改名成《Lost In Tianyi》也没问题：</p>\n<blockquote>\n<p><em>我们正 不断 向交叉的路口走 迷了路 顺其自然不回头</em></p>\n</blockquote>\n<p><strong>《最大化 +》</strong>：把窗口最大化</p>\n<blockquote>\n<p><em>穿梭在复制粘贴 再粘贴复制的无数窗口</em></p>\n</blockquote>\n<p><strong>《风兮风兮》</strong>：生物之以息相吹也</p>\n<blockquote>\n<p><em>冬扯云若柳絮飞 春采白雪作樱吹</em></p>\n</blockquote>\n<p><strong>《斯芬克斯的谜底》</strong>：歌名来自希腊神话里斯芬克斯的谜题：一种动物早晨四条腿，中午两条腿，晚上三条腿走路，腿最多的时候，也正是速度和力量最小的时候。歌词前两句里有 “被风吹散”，接着上一首歌。所以可以把整张专辑当成概念专辑。<a id=\"a16\" onclick=\"toggleIframe(3,&quot;2492184593&quot;,&quot;s16&quot;,&quot;a16&quot;)\">点此收听</a></p>\n<div id=\"s16\">\n\n</div>\n<blockquote>\n<p><em>不期然的一文不名 原来平凡不是演习 洞若观火 却看不清自己</em></p>\n</blockquote>\n<p>这两句歌词非常好，因为笔者的名字就叫若凡。凡了吗？若凡。到底凡没凡？</p>\n<p>当我们说一些东西是平凡的时候，实际上注重的是它们之间的相似之处；当我们说一些东西是不平凡的时候，实际上注重的是它们与其他东西的不同之处。普通人体细胞核里都有\n23 对染色体，数量是相同的，DNA\n各有异同。所以每个人分别都有平凡和不平凡的地方。</p>\n<p><strong>《笔记本上的幻想世界》</strong></p>\n<p>与此对应的是 “现实的真实世界”。笔者感受到曲子和词有种令人难以言说的悲伤感和诡异感，类似 “梦核”。理由：全曲共\n61\n句歌词（不算和声），我们只用关注每句歌词的最后两个音：后比前高为升，前比后高为降，音高相同为平：</p>\n<table>\n<thead>\n<tr>\n<th>升</th>\n<th>降</th>\n<th>平</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> 6</td>\n<td>25</td>\n<td>29</td>\n</tr>\n</tbody>\n</table>\n<p>特别地，对于最后一句：</p>\n<blockquote>\n<p><em>继续踏上实现梦想的路线</em></p>\n</blockquote>\n<p>它是刚升起来，又降下去了。</p>\n<p><strong>《斯人》</strong></p>\n<p>This\nperson。讲两种文化 / 思想 / 世界观的碰撞。这是往大说的，往小说是写一位中国武者和一位日本武者的交锋，包括语言上的交锋，那段激烈的间奏是物理上的交锋。歌词中日混杂，一个歌手演绎两位武者：洛天依的 [汉语] 声库和 (日语) 声库。<a id=\"a17\" onclick=\"toggleIframe(3,&quot;2492223560&quot;,&quot;s17&quot;,&quot;a17&quot;)\">点此收听</a></p>\n<div id=\"s17\">\n\n</div>\n<p><strong>《嘘つきは恋のはじまり》</strong>：谎言是恋爱的开始。看歌名是日本武者打赢了。</p>\n<p><strong>《Monologue》</strong>：独白，屏幕外边的人以屏幕里面的人的视角写给屏幕外面的人的。</p>\n<blockquote>\n<p><em>而你和我之间 相隔 不同 银河 时空 仿佛始终没有相遇过</em></p>\n</blockquote>\n<h2 id=\"草蛇惊一歌词解读\">《草蛇惊一》歌词解读</h2>\n<p>《草蛇惊一》收录于初音未来 V4C 专辑《初梦》，作词是<a href=\"https://space.bilibili.com/396967\">麦当叔劳劳</a>。<a href=\"https://www.bilibili.com/video/BV1Px41177ht/\">去 B 站观看</a> |\n<a id=\"a18\" onclick=\"toggleIframe(2,&quot;515455714&quot;,&quot;s18&quot;,&quot;a18&quot;)\">点此收听</a></p>\n<div id=\"s18\">\n\n</div>\n<p>很容易从歌名联想到 “打草惊蛇”，笔者认为草蛇惊一的一是指打草的人。在这里，草、蛇和打草的人都是主人公自己 —— 主人公自己惊动了自己。非得拆开的话，草是身，蛇是心，惊是内，一是外。还可以参考歌词的<a href=\"https://coolmikehatsune22.wordpress.com/2020/11/13/snake-in-the-grass/\">英文翻译</a>，译者是\ncoolmikehatsune22。里面有一些和笔者想的不一样，或者没想到的东西，会在下文说明。</p>\n<p><strong>主歌一</strong></p>\n<blockquote>\n<p><em>羡慕风车 不必去四海漂泊 只要能在原地旋转便能体会风的快乐</em></p>\n</blockquote>\n<p>第一句最重要，是起因，主人公的内心独白。我们把主人公此时的视角记作 “视角\nA”。风车有三层意思：</p>\n<ol type=\"1\">\n<li>指被风驱动的人或物。</li>\n<li>指《堂吉诃德》里的风车所指，即假想敌。</li>\n<li>指主人公自己。</li>\n</ol>\n<p>如果你对风这个字的想法和笔者一样，那你就能明白笔者在说什么。在网页底部列举了一些关于风的其他歌曲。原地旋转就是不作出改变，变成石头，最后变成流浪的风。</p>\n<blockquote>\n<p><em>及时行乐 外婆的故事里说因果报应乃白日见鬼</em></p>\n</blockquote>\n<p>视角 A\n想要把自己的人生观向风车靠拢。英文翻译是：“毕竟，奶奶在她的故事里总是在说，你不应该指望报应会降临到坏人身上”。</p>\n<blockquote>\n<p><em>转折 没曾想单木不林一丝不线如我 孤单的说书者也能偷乐</em></p>\n</blockquote>\n<p>主人公突然转换为上帝视角，把自己代入说书者。这样就像<a href=\"https://movie.douban.com/subject/1292064/\">看电影</a>一样，不用再担心各种现实问题了。</p>\n<blockquote>\n<p><em>相濡以沫不如相忘于江湖 外公总说这是他孤单的借口</em></p>\n</blockquote>\n<p>进一步妄想自己是相忘于江湖的鱼，逃避现实。</p>\n<blockquote>\n<p>《庄子・内篇・大宗师》：</p>\n<ul>\n<li>泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不如相忘于江湖。与其誉尧而非桀也，不如两忘而化其道。</li>\n</ul>\n<p>泉水干了，鱼聚集在陆地。与其用唾沫互相润湿对方，不如各自去往大江大湖，互相忘记。说尧好，说桀不好，和我有什么关系？</p>\n<p>《庄子・外篇・天运》：</p>\n<ul>\n<li>孔子见老聃而语仁义。老聃曰：“夫……………… 夫鹄不日浴而白，乌不日黔而黑。黑白之朴，不足以为辩，名誉之观，不足以为广。泉涸，鱼相与处于陆，相呴以湿，相濡以沫，不若相忘于江湖。”</li>\n</ul>\n</blockquote>\n<p>英文翻译则非常直白：“与其帮助挽救我们能挽救的东西，不如完全忘记它，这是爷爷总是说的（他孤身一人的）借口”。</p>\n<p><strong>主歌二</strong></p>\n<blockquote>\n<p><em>放轻松 压力别弄得太大 飘飘欲仙欲死不知是不是自己的风格</em></p>\n</blockquote>\n<p>主人公认为自己逃避现实是不对的，此时视角转换回了视角\nA。前半部分是视角 A 对自己说的：没事，放轻松一点；后半部分是视角 A\n对说书者说的：这已经成为你的风格了吗？</p>\n<blockquote>\n<p><em>一语道破 下手斩草除根哭吧哭吧 无聊卑微笑话</em></p>\n</blockquote>\n<p>视角 A\n一语道破了说书者的伪装，并否定掉了风车的人生观。认为有这种想法的自己是无聊卑微笑话，要把这种想法斩草除根。风车你就尽情去哭吧。</p>\n<blockquote>\n<p><em>音色也在不知不觉中变得低沉 就像患了名为暴躁的病一样</em></p>\n</blockquote>\n<p>主人公在否定自己之后，风车的一面并没有消失，而是在反噬视角\nA。主人公的音色逐渐低沉，内心逐渐暴躁。</p>\n<blockquote>\n<p><em>快停止吧 那张顽固蠢蛋的终身证明我不想再去想念</em></p>\n</blockquote>\n<p>风车和视角 A\n在脑海里互相争斗。主人公希望自己不要再胡思乱想了，给自己开了顽固蠢蛋的终身证明。</p>\n<p><strong>导歌</strong></p>\n<blockquote>\n<p><em>一不做二不休自在风流 乐不思蜀子龙我就不走</em></p>\n</blockquote>\n<p>对于一件事，我要么不做，要么就做到最好，我觉得这样太酷啦；赵子龙救了刘禅最终导致乐不思蜀，这让我怎么做接下来每一步的决定呢？干脆不做了。</p>\n<p>不管怎么断句都可以：</p>\n<ul>\n<li>乐不思蜀 / 子龙我 / 就不走</li>\n<li>乐不思蜀子龙 / 我就不走</li>\n</ul>\n<p>都是讲主人公不想去走赵云的乐不思蜀这一条路，然而这两件事隔了好几十年。英文注释子龙：‘child\ndragon’, the eponymous\nsnake。正好呼应歌名，不管是赵子龙还是蛇都能代指主人公。</p>\n<blockquote>\n<p><em>过五关杀六将公子献头 金蝉脱壳孙老头八十二变我有</em></p>\n</blockquote>\n<p>主人公一会儿代入关羽，一会儿代入荆轲 / 太子丹。并预想了像他们一样做事之后的结果。（但是在荆轲刺秦的故事中，是荆轲带着樊於期的头，公子不是带的，也不是被带的。也可能不是这个典故，百度搜公子献头出自漫画《火凤燎原》。也可能压根没有典故，只是一种代指）金蝉脱壳指主人公抽离自己为说书者。孙老头就是孙猴子，八十二变指思想转换的复杂性。不管怎么断句都可以：</p>\n<ul>\n<li>金蝉脱壳 / 孙老头八十二变我有</li>\n<li>金蝉脱壳孙老头 / 八十二变我有</li>\n<li>金蝉脱壳孙老头八十二变 / 我有</li>\n</ul>\n<p>笔者认为是第一种，金蝉脱壳和前半句过五关杀六将公子献头是连在一起的，用孙老头八十二变来修饰主人公想法的混乱程度。歌手断句是第二种 —— 当然不是初音未来现场发挥的，是作者设计的，可能会听起来更舒服。另外，选择八十二变的原因还可能有，头 —— 八两个字的连接处确实比头 —— 七不管是唱起来还是听起来都更舒服。以及我比孙老头还多十变。英文翻译则是第三种，用孙老头八十二变来修饰我有很多种金蝉脱壳的行动。</p>\n<blockquote>\n<p><em>百闻不如一见来翻筋斗&nbsp;福星高照五湖四海都随我漫步遨游&nbsp;山雨欲来风满楼</em></p>\n</blockquote>\n<p>终于要作决定了！但是在做出决定之前的继续妄想，构成了主人公脑海里的狂风。百闻不如一见翻筋斗指孙老头想要做出决定。至于是决定行动，还是决定继续妄想，不得而知。</p>\n<p><strong>副歌</strong></p>\n<blockquote>\n<p><em>再见吧 提线的傀儡师 耻笑咚咚跳的心脏和那不实际的憧憬</em></p>\n</blockquote>\n<p>傀儡是身体，傀儡师是幻想。主人公向对自己造成心惊肉跳的幻想作别。英文翻译不实际的憧憬为\nlofty ideals（远大的理想）。</p>\n<blockquote>\n<p><em>玩笑吧 我不想听假话 暴露皆大欢喜不攻自破不成熟的笑话</em></p>\n</blockquote>\n<p>英文翻译：“你想开什么玩笑就开什么玩笑，但我不会再屈服于你的谎言，我会把你一直在快乐地兜售的所有那些毫无实质意义、脆弱的垃圾都吹出来。” 笔者对前半句的翻译有点不认同，但认为后半句翻译得非常好。笔者认为这写的是主人公不想听假话的想法和暴露笑话的行为，是指主人公给自己的\nEQ 开了低通滤波。</p>\n<blockquote>\n<p><em>怠慢吗 或许只是懈怠吧 嘁嘁咔咔咚咚咭咭再也不想它</em></p>\n</blockquote>\n<p>主人公认为，这都是由自己的怠慢或者懈怠造成的。在又一番思想斗争之后停止了思考 —— 然后进入第二段主歌。</p>"},{"title":"高德地图多边形区域搜索 POI 的划分方法","date":"2024-11-30T11:00:00.000Z","_content":"\n我们想要使用高德开放平台的 POI 搜索 2.0 中的多边形区域搜索来获取 POI 数据。它的传参需求类似于 `114.10,30.53|114.11,30.54` 的字符串，为一个矩形范围。对于个人认证的开发者，每天每个账号限制调用 100 次（实际情况可能比 100 次略多几十次），3 次每秒。且该 API 每次请求只能返回 1 页，1 页最多 25 条，到第九页必定不出数据。\n\n- 对于某种类型的 POI，它在地图上分布的密度不是固定的。\n- 还有一个 Web 基础服务 API-行政区域查询，它可以返回一个行政区的边界字符串。\n- 纬线是横着的，而纬度是竖直方向上的，在竖直方向上，1 纬度约为 111 公里；经线是竖着的，而经度是水平方向上的，在水平方向上，1 经度约为 111 公里乘上纬度的余弦。\n- `shapely` 包的 `Polygon` 对象可以表示一个多边形，其 `intersects` 方法可以判断两个多边形是否有交。一个 `list[Polygon]` 可以写进 `geojson` 文件里。\n- `geopandas` 包可以读写 `geojson` 文件，并可以配合 `plt` 画出 `gdf`。使用 `pd.concat` 连接两个 `gdf`。\n\n## 解决方法\n\n用多轮筛查，先用大网，后用小网，每轮用数天数次完成。每轮搜索之前，把待搜索的范围划分成一系列与搜索区域有交的小矩形，如在一个 0.05 范围内的经纬度网内进行第一轮筛查。专门建一个文档，用于保存在本轮搜索里每个小搜索区域的状态，是否爬完，爬到第几页了（先将其设置为空字符串）。\n\n每个小搜索区域有这么几种状态：\n\n- A：已经爬完了\n- B：没有爬完，且爬到的页号 = 9（看你具体的循环逻辑）\n- C：没有爬完，且爬到的页号 < 9 或为空字符串\n\n爬到 1 至 8 页，且本页的 poi 个数小于 25 条时，说明在这个范围内爬完了；爬到第 8 页，且本页的 poi 个数等于 25 条时，虽然是有很小的概率是爬完了的，但是我们认为它是没有爬完的。\n\n在每次搜索的时候，遍历状态为 C 的区域，对其发请求，并更新对应的搜索区域的状态。\n\n每轮搜索的结束条件：没有状态为 C 的区域了。这时候需要把状态为 B 的区域导出，进行下一步的划分，如划分成 0.01 的经纬度网。\n\n## 示例代码\n\n### amap_poi_spider.py\n\n```py\nimport logging\nimport datetime\nimport time\n\nimport requests\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"a+\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\n\ndef search_poi(poi_typecode: str, search_range: str,api_key:str) -> dict:\n    \"\"\"\n    在单个矩形范围内搜索POI，仅适用于中国境内，东经，北纬\n    对于一个多边形区域，每次最多搜索出200条，所以需要划分成多个多边形区域\n    “多边形区域搜索”接口每天限制调用100次，3次/秒\n    https://lbs.amap.com/api/webservice/guide/api-advanced/newpoisearch\n    返回\n    page：终止的页数\n    pois：list[dict] 可能为空\n    is_end：是否该区域已经搜索完\n    api_is_full：是否调用量超限\n    \"\"\"\n    logging.info(f\"黄若凡地理数据爬取矩形范围搜索模块\")\n    ret = {\"page\": 1, \"pois\": [], \"is_end\": False,\"api_is_full\":False}\n    \n    while not ret[\"api_is_full\"]:  # 每一页\n        time.sleep(4)\n        response = requests.get(\n            url=\"https://restapi.amap.com/v5/place/polygon\",\n            params={\n                \"key\": api_key,\n                \"polygon\": search_range,  # 多个坐标对集合，坐标对用 | 分割。多边形为矩形时，可传入左上右下两顶点坐标对；其他情况下首尾坐标对需相同。\n                \"types\": poi_typecode,  # 可以传入多个poi typecode，相互之间用 | 分隔\n                \"page_size\": 25,  # 当前分页展示的数据条数，取值1到25\n                \"page_num\": ret[\n                    \"page\"\n                ],  # 请求第几分页，取值1到100，如果上面指定25条，这里实际只有前8页\n                \"show_fields\": \"business\",  # 返回结果控制\n            },\n        )\n        logging.info(f\"GET {search_range}\")\n        response = response.json()\n        if response[\"status\"] == \"1\":\n            count = int(response[\"count\"])\n            pois: list[dict] = response[\"pois\"]\n            logging.info(f\"爬取到第{ret[\"page\"]}页，有{count}条\")\n            if ret[\"page\"] <= 8 and count < 25:  # 说明是最后一页\n                ret[\"pois\"].extend(pois)\n                ret[\"is_end\"] = True\n                break\n            elif ret[\"page\"] == 8 and count == 25:  # 说明需要进一步划分搜索范围\n                ret[\"page\"] += 1\n                ret[\"pois\"].extend(pois)\n                break\n            else:# 搜索下一页\n                ret[\"page\"] += 1\n                ret[\"pois\"].extend(pois)\n        else:\n            logging.error(\"搜索失败\" + str(response))\n            ret[\"api_is_full\"] = True # 一天的量用完了\n    return ret\n```\n\n### utils.py\n\n```py\nimport math\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom shapely.geometry import Polygon, box\n\n\ndef rectangle_str_to_polygon(r: str) -> list[Polygon]:\n    \"\"\"把类似 114.30,30.60|114.35,30.65 的矩形字符串转换为 Polygon 对象\"\"\"\n    left_top, right_bottom = r.split(\"|\")\n    left, top = map(float, left_top.split(\",\"))\n    right, bottom = map(float, right_bottom.split(\",\"))\n    return Polygon([(left, top), (right, top), (right, bottom), (left, bottom)])\n\n\ndef plot_rectangles_on_geo(geojson_file_path: str, rectangles: list[Polygon]):\n    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file_path)\n    sub_gdf = gpd.GeoDataFrame({\"geometry\": rectangles})\n    new_gdf: gpd.GeoDataFrame = pd.concat([gdf, sub_gdf], ignore_index=True)\n    new_gdf.plot(facecolor=\"none\", edgecolor=\"black\", linewidth=1)\n    plt.show()\n\n\ndef split_rectangle(rectangle: Polygon, num_parts: int) -> list[Polygon]:\n    \"\"\"把一个Polygon的矩形切分成指定数量、长宽固定的小矩形，确保与原矩形有交\"\"\"\n    minx, miny, maxx, maxy = rectangle.bounds\n    # 计算每边应分割成的部分数量\n    side_parts = int(math.sqrt(num_parts))\n    # 计算每个小矩形的宽度和高度\n    width = (maxx - minx) / side_parts\n    height = (maxy - miny) / side_parts\n    sub_rectangles = []\n    for i in range(side_parts):\n        for j in range(side_parts):\n            left = minx + i * width\n            bottom = miny + j * height\n            right = left + width\n            top = bottom + height\n            small_rectangle = box(left, bottom, right, top)\n            if rectangle.intersects(small_rectangle):\n                sub_rectangles.append(small_rectangle)\n\n    return sub_rectangles\n\n\nif __name__ == \"__main__\":\n    r: Polygon = rectangle_str_to_polygon(\"114.35,30.85|114.40,30.90\")\n\n    def print_b(p: Polygon):\n        print(f\"左上：{p.bounds[0],p.bounds[1]}，右下：{p.bounds[2],p.bounds[3]}\")\n\n    new_rs = split_rectangle(r, 25)\n    assert len(new_rs) == 25\n\n    print_b(r)\n    print_b(new_rs[0])\n    print_b(new_rs[-1])\n```\n\n### search_by_round.py\n\n```py\nimport datetime\nimport logging\nimport time\nfrom enum import Enum\n\nimport geopandas as gpd\nimport pandas as pd\nfrom pymongo import MongoClient\nfrom shapely.geometry import Polygon\n\nfrom amap_poi_spider import search_poi\nfrom utils import plot_rectangles_on_geo, rectangle_str_to_polygon, split_rectangle\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"a+\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\n\n\nclient = MongoClient(\"mongodb://localhost:27017/\")\ndb = client[\"武汉市餐饮店POI数据\"]\npois_db = db[\"POI数据\"]\nFOOD = \"050000\"\n\n\nclass SearchAreaStatus(Enum):\n    B = {\"是否搜索完\": False, \"到第几页没有数据\": 9}\n    C = {\n        \"是否搜索完\": False,\n        \"$or\": [{\"到第几页没有数据\": {\"$lt\": 9}}, {\"到第几页没有数据\": \"\"}],\n    }\n\n\nAPI_KEYS = []\n\n\ndef a_search_in_a_round(round: str):\n    \"\"\"某轮的某次搜索\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    key_index = 0\n    for doc in search_ranges.find(SearchAreaStatus.C.value):\n        while key_index < len(API_KEYS):\n            range_str = doc[\"_id\"]\n            time.sleep(1)\n            result = search_poi(FOOD, range_str, API_KEYS[key_index])\n            search_ranges.update_one(\n                {\"_id\": range_str},\n                {\n                    \"$set\": {\n                        \"是否搜索完\": result[\"is_end\"],\n                        \"到第几页没有数据\": result[\"page\"],\n                    }\n                },\n                upsert=True,\n            )\n            for poi in result[\"pois\"]:\n                _id = poi.pop(\"id\")\n                pois_db.update_one({\"_id\": _id}, {\"$set\": poi}, upsert=True)\n            if result[\"api_is_full\"]:\n                key_index += 1\n            else:\n                break\n\n\ndef search_areas_remaining_in_a_round(round: str, status: SearchAreaStatus):\n    \"\"\"某轮某次搜索后剩余某个状态的搜索区域的数量\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    i = 0\n    for _ in search_ranges.find(status.value):\n        i += 1\n    print(i)\n\n\ndef after_a_search_round(round: str):\n    \"\"\"把本轮未搜索完，需要进一步划分的区域的写到文件里\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    f = search_ranges.find(SearchAreaStatus.B.value)\n    unfinished_range = [doc[\"_id\"] for doc in f]\n    df = pd.DataFrame({\"s_range\": unfinished_range})\n    df.to_csv(f\"第{round}轮筛之后未搜索完的.csv\", index=False)\n\n\ndef show_unfinished(old_round_csv_file: str, geojson_file: str):\n    \"\"\"展示上一轮里未搜索完的区域\"\"\"\n    df = pd.read_csv(old_round_csv_file)\n    old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]\n    print(f\"上一轮里未搜索完的区域有{len(old_rectangles)}个\")\n    plot_rectangles_on_geo(geojson_file, old_rectangles)\n\n\ndef divide_search_area(\n    old_rectangles: list[Polygon], geojson_file: str, num_parts: int\n) -> list[Polygon]:\n    \"\"\"划分一系列矩形为整数的平方份，并确保与行政区有交\"\"\"\n    new_rectangles: list[Polygon] = []\n    for r in old_rectangles:\n        new_rs = split_rectangle(r, num_parts=num_parts)\n        assert len(new_rs) == num_parts\n        new_rectangles.extend(new_rs)\n    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file)\n    polygons = [geom for geom in gdf.geometry if isinstance(geom, Polygon)]\n    new_search_ranges: list[Polygon] = []\n    for r in new_rectangles:\n        for p in polygons:\n            if r.intersects(p):\n                new_search_ranges.append(r)\n    plot_rectangles_on_geo(geojson_file, new_search_ranges)\n    return new_search_ranges\n\n\ndef before_a_search_round(new_round: str, new_search_ranges: list[Polygon]):\n    \"\"\"写新的搜索区域到数据库里，注意保留小数的位数\"\"\"\n    collection = db[f\"第{new_round}轮筛的搜索范围\"]\n    for r in new_search_ranges:\n        minx, miny, maxx, maxy = r.bounds\n        s = f\"{minx:.3f},{miny:.3f}|{maxx:.3f},{maxy:.3f}\"\n        collection.update_one(\n            {\"_id\": s},\n            {\n                \"$set\": {\n                    \"到第几页没有数据\": \"\",\n                    \"是否搜索完\": False,\n                }\n            },\n            upsert=True,\n        )\n\n\n# show_unfinished(\"第二轮筛之后未搜索完的.csv\", \"武汉市13个区.geojson\")\n# df = pd.read_csv(\"第二轮筛之后未搜索完的.csv\")\n# old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]\n# new_search_ranges = divide_search_area(old_rectangles, \"武汉市13个区.geojson\", 25)\n# before_a_search_round(\"三\", new_search_ranges)\n# search_areas_remaining_in_a_round(\"三\", SearchAreaStatus.C)\n\na_search_in_a_round(\"三\")\n\n# after_a_search_round(\"二\")\n```","source":"_posts/高德地图多边形区域搜索POI的划分方法.md","raw":"---\ntitle: 高德地图多边形区域搜索POI的划分方法\ndate: 2024-11-30 19:00:00\npermalink: amap-poi-search.html\n---\n\n我们想要使用高德开放平台的 POI 搜索 2.0 中的多边形区域搜索来获取 POI 数据。它的传参需求类似于 `114.10,30.53|114.11,30.54` 的字符串，为一个矩形范围。对于个人认证的开发者，每天每个账号限制调用 100 次（实际情况可能比 100 次略多几十次），3 次每秒。且该 API 每次请求只能返回 1 页，1 页最多 25 条，到第九页必定不出数据。\n\n- 对于某种类型的 POI，它在地图上分布的密度不是固定的。\n- 还有一个 Web 基础服务 API-行政区域查询，它可以返回一个行政区的边界字符串。\n- 纬线是横着的，而纬度是竖直方向上的，在竖直方向上，1 纬度约为 111 公里；经线是竖着的，而经度是水平方向上的，在水平方向上，1 经度约为 111 公里乘上纬度的余弦。\n- `shapely` 包的 `Polygon` 对象可以表示一个多边形，其 `intersects` 方法可以判断两个多边形是否有交。一个 `list[Polygon]` 可以写进 `geojson` 文件里。\n- `geopandas` 包可以读写 `geojson` 文件，并可以配合 `plt` 画出 `gdf`。使用 `pd.concat` 连接两个 `gdf`。\n\n## 解决方法\n\n用多轮筛查，先用大网，后用小网，每轮用数天数次完成。每轮搜索之前，把待搜索的范围划分成一系列与搜索区域有交的小矩形，如在一个 0.05 范围内的经纬度网内进行第一轮筛查。专门建一个文档，用于保存在本轮搜索里每个小搜索区域的状态，是否爬完，爬到第几页了（先将其设置为空字符串）。\n\n每个小搜索区域有这么几种状态：\n\n- A：已经爬完了\n- B：没有爬完，且爬到的页号 = 9（看你具体的循环逻辑）\n- C：没有爬完，且爬到的页号 < 9 或为空字符串\n\n爬到 1 至 8 页，且本页的 poi 个数小于 25 条时，说明在这个范围内爬完了；爬到第 8 页，且本页的 poi 个数等于 25 条时，虽然是有很小的概率是爬完了的，但是我们认为它是没有爬完的。\n\n在每次搜索的时候，遍历状态为 C 的区域，对其发请求，并更新对应的搜索区域的状态。\n\n每轮搜索的结束条件：没有状态为 C 的区域了。这时候需要把状态为 B 的区域导出，进行下一步的划分，如划分成 0.01 的经纬度网。\n\n## 示例代码\n\n### amap_poi_spider.py\n\n```py\nimport logging\nimport datetime\nimport time\n\nimport requests\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"a+\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\n\ndef search_poi(poi_typecode: str, search_range: str,api_key:str) -> dict:\n    \"\"\"\n    在单个矩形范围内搜索POI，仅适用于中国境内，东经，北纬\n    对于一个多边形区域，每次最多搜索出200条，所以需要划分成多个多边形区域\n    “多边形区域搜索”接口每天限制调用100次，3次/秒\n    https://lbs.amap.com/api/webservice/guide/api-advanced/newpoisearch\n    返回\n    page：终止的页数\n    pois：list[dict] 可能为空\n    is_end：是否该区域已经搜索完\n    api_is_full：是否调用量超限\n    \"\"\"\n    logging.info(f\"黄若凡地理数据爬取矩形范围搜索模块\")\n    ret = {\"page\": 1, \"pois\": [], \"is_end\": False,\"api_is_full\":False}\n    \n    while not ret[\"api_is_full\"]:  # 每一页\n        time.sleep(4)\n        response = requests.get(\n            url=\"https://restapi.amap.com/v5/place/polygon\",\n            params={\n                \"key\": api_key,\n                \"polygon\": search_range,  # 多个坐标对集合，坐标对用 | 分割。多边形为矩形时，可传入左上右下两顶点坐标对；其他情况下首尾坐标对需相同。\n                \"types\": poi_typecode,  # 可以传入多个poi typecode，相互之间用 | 分隔\n                \"page_size\": 25,  # 当前分页展示的数据条数，取值1到25\n                \"page_num\": ret[\n                    \"page\"\n                ],  # 请求第几分页，取值1到100，如果上面指定25条，这里实际只有前8页\n                \"show_fields\": \"business\",  # 返回结果控制\n            },\n        )\n        logging.info(f\"GET {search_range}\")\n        response = response.json()\n        if response[\"status\"] == \"1\":\n            count = int(response[\"count\"])\n            pois: list[dict] = response[\"pois\"]\n            logging.info(f\"爬取到第{ret[\"page\"]}页，有{count}条\")\n            if ret[\"page\"] <= 8 and count < 25:  # 说明是最后一页\n                ret[\"pois\"].extend(pois)\n                ret[\"is_end\"] = True\n                break\n            elif ret[\"page\"] == 8 and count == 25:  # 说明需要进一步划分搜索范围\n                ret[\"page\"] += 1\n                ret[\"pois\"].extend(pois)\n                break\n            else:# 搜索下一页\n                ret[\"page\"] += 1\n                ret[\"pois\"].extend(pois)\n        else:\n            logging.error(\"搜索失败\" + str(response))\n            ret[\"api_is_full\"] = True # 一天的量用完了\n    return ret\n```\n\n### utils.py\n\n```py\nimport math\n\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom shapely.geometry import Polygon, box\n\n\ndef rectangle_str_to_polygon(r: str) -> list[Polygon]:\n    \"\"\"把类似 114.30,30.60|114.35,30.65 的矩形字符串转换为 Polygon 对象\"\"\"\n    left_top, right_bottom = r.split(\"|\")\n    left, top = map(float, left_top.split(\",\"))\n    right, bottom = map(float, right_bottom.split(\",\"))\n    return Polygon([(left, top), (right, top), (right, bottom), (left, bottom)])\n\n\ndef plot_rectangles_on_geo(geojson_file_path: str, rectangles: list[Polygon]):\n    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file_path)\n    sub_gdf = gpd.GeoDataFrame({\"geometry\": rectangles})\n    new_gdf: gpd.GeoDataFrame = pd.concat([gdf, sub_gdf], ignore_index=True)\n    new_gdf.plot(facecolor=\"none\", edgecolor=\"black\", linewidth=1)\n    plt.show()\n\n\ndef split_rectangle(rectangle: Polygon, num_parts: int) -> list[Polygon]:\n    \"\"\"把一个Polygon的矩形切分成指定数量、长宽固定的小矩形，确保与原矩形有交\"\"\"\n    minx, miny, maxx, maxy = rectangle.bounds\n    # 计算每边应分割成的部分数量\n    side_parts = int(math.sqrt(num_parts))\n    # 计算每个小矩形的宽度和高度\n    width = (maxx - minx) / side_parts\n    height = (maxy - miny) / side_parts\n    sub_rectangles = []\n    for i in range(side_parts):\n        for j in range(side_parts):\n            left = minx + i * width\n            bottom = miny + j * height\n            right = left + width\n            top = bottom + height\n            small_rectangle = box(left, bottom, right, top)\n            if rectangle.intersects(small_rectangle):\n                sub_rectangles.append(small_rectangle)\n\n    return sub_rectangles\n\n\nif __name__ == \"__main__\":\n    r: Polygon = rectangle_str_to_polygon(\"114.35,30.85|114.40,30.90\")\n\n    def print_b(p: Polygon):\n        print(f\"左上：{p.bounds[0],p.bounds[1]}，右下：{p.bounds[2],p.bounds[3]}\")\n\n    new_rs = split_rectangle(r, 25)\n    assert len(new_rs) == 25\n\n    print_b(r)\n    print_b(new_rs[0])\n    print_b(new_rs[-1])\n```\n\n### search_by_round.py\n\n```py\nimport datetime\nimport logging\nimport time\nfrom enum import Enum\n\nimport geopandas as gpd\nimport pandas as pd\nfrom pymongo import MongoClient\nfrom shapely.geometry import Polygon\n\nfrom amap_poi_spider import search_poi\nfrom utils import plot_rectangles_on_geo, rectangle_str_to_polygon, split_rectangle\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"a+\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\n\n\nclient = MongoClient(\"mongodb://localhost:27017/\")\ndb = client[\"武汉市餐饮店POI数据\"]\npois_db = db[\"POI数据\"]\nFOOD = \"050000\"\n\n\nclass SearchAreaStatus(Enum):\n    B = {\"是否搜索完\": False, \"到第几页没有数据\": 9}\n    C = {\n        \"是否搜索完\": False,\n        \"$or\": [{\"到第几页没有数据\": {\"$lt\": 9}}, {\"到第几页没有数据\": \"\"}],\n    }\n\n\nAPI_KEYS = []\n\n\ndef a_search_in_a_round(round: str):\n    \"\"\"某轮的某次搜索\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    key_index = 0\n    for doc in search_ranges.find(SearchAreaStatus.C.value):\n        while key_index < len(API_KEYS):\n            range_str = doc[\"_id\"]\n            time.sleep(1)\n            result = search_poi(FOOD, range_str, API_KEYS[key_index])\n            search_ranges.update_one(\n                {\"_id\": range_str},\n                {\n                    \"$set\": {\n                        \"是否搜索完\": result[\"is_end\"],\n                        \"到第几页没有数据\": result[\"page\"],\n                    }\n                },\n                upsert=True,\n            )\n            for poi in result[\"pois\"]:\n                _id = poi.pop(\"id\")\n                pois_db.update_one({\"_id\": _id}, {\"$set\": poi}, upsert=True)\n            if result[\"api_is_full\"]:\n                key_index += 1\n            else:\n                break\n\n\ndef search_areas_remaining_in_a_round(round: str, status: SearchAreaStatus):\n    \"\"\"某轮某次搜索后剩余某个状态的搜索区域的数量\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    i = 0\n    for _ in search_ranges.find(status.value):\n        i += 1\n    print(i)\n\n\ndef after_a_search_round(round: str):\n    \"\"\"把本轮未搜索完，需要进一步划分的区域的写到文件里\"\"\"\n    search_ranges = db[f\"第{round}轮筛的搜索范围\"]\n    f = search_ranges.find(SearchAreaStatus.B.value)\n    unfinished_range = [doc[\"_id\"] for doc in f]\n    df = pd.DataFrame({\"s_range\": unfinished_range})\n    df.to_csv(f\"第{round}轮筛之后未搜索完的.csv\", index=False)\n\n\ndef show_unfinished(old_round_csv_file: str, geojson_file: str):\n    \"\"\"展示上一轮里未搜索完的区域\"\"\"\n    df = pd.read_csv(old_round_csv_file)\n    old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]\n    print(f\"上一轮里未搜索完的区域有{len(old_rectangles)}个\")\n    plot_rectangles_on_geo(geojson_file, old_rectangles)\n\n\ndef divide_search_area(\n    old_rectangles: list[Polygon], geojson_file: str, num_parts: int\n) -> list[Polygon]:\n    \"\"\"划分一系列矩形为整数的平方份，并确保与行政区有交\"\"\"\n    new_rectangles: list[Polygon] = []\n    for r in old_rectangles:\n        new_rs = split_rectangle(r, num_parts=num_parts)\n        assert len(new_rs) == num_parts\n        new_rectangles.extend(new_rs)\n    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file)\n    polygons = [geom for geom in gdf.geometry if isinstance(geom, Polygon)]\n    new_search_ranges: list[Polygon] = []\n    for r in new_rectangles:\n        for p in polygons:\n            if r.intersects(p):\n                new_search_ranges.append(r)\n    plot_rectangles_on_geo(geojson_file, new_search_ranges)\n    return new_search_ranges\n\n\ndef before_a_search_round(new_round: str, new_search_ranges: list[Polygon]):\n    \"\"\"写新的搜索区域到数据库里，注意保留小数的位数\"\"\"\n    collection = db[f\"第{new_round}轮筛的搜索范围\"]\n    for r in new_search_ranges:\n        minx, miny, maxx, maxy = r.bounds\n        s = f\"{minx:.3f},{miny:.3f}|{maxx:.3f},{maxy:.3f}\"\n        collection.update_one(\n            {\"_id\": s},\n            {\n                \"$set\": {\n                    \"到第几页没有数据\": \"\",\n                    \"是否搜索完\": False,\n                }\n            },\n            upsert=True,\n        )\n\n\n# show_unfinished(\"第二轮筛之后未搜索完的.csv\", \"武汉市13个区.geojson\")\n# df = pd.read_csv(\"第二轮筛之后未搜索完的.csv\")\n# old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]\n# new_search_ranges = divide_search_area(old_rectangles, \"武汉市13个区.geojson\", 25)\n# before_a_search_round(\"三\", new_search_ranges)\n# search_areas_remaining_in_a_round(\"三\", SearchAreaStatus.C)\n\na_search_in_a_round(\"三\")\n\n# after_a_search_round(\"二\")\n```","slug":"高德地图多边形区域搜索POI的划分方法","published":1,"updated":"2025-09-14T14:50:01.287Z","__permalink":"amap-poi-search.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnu000r5ws6f8wu4106","content":"<p>我们想要使用高德开放平台的 POI 搜索 2.0 中的多边形区域搜索来获取 POI\n数据。它的传参需求类似于 <code>114.10,30.53|114.11,30.54</code>\n的字符串，为一个矩形范围。对于个人认证的开发者，每天每个账号限制调用 100\n次（实际情况可能比 100 次略多几十次），3 次每秒。且该 API\n每次请求只能返回 1 页，1 页最多 25 条，到第九页必定不出数据。</p>\n<ul>\n<li>对于某种类型的 POI，它在地图上分布的密度不是固定的。</li>\n<li>还有一个 Web 基础服务\nAPI - 行政区域查询，它可以返回一个行政区的边界字符串。</li>\n<li>纬线是横着的，而纬度是竖直方向上的，在竖直方向上，1 纬度约为 111\n公里；经线是竖着的，而经度是水平方向上的，在水平方向上，1 经度约为 111\n公里乘上纬度的余弦。</li>\n<li><code>shapely</code> 包的 <code>Polygon</code>\n对象可以表示一个多边形，其 <code>intersects</code>\n方法可以判断两个多边形是否有交。一个 <code>list[Polygon]</code> 可以写进\n<code>geojson</code> 文件里。</li>\n<li><code>geopandas</code> 包可以读写 <code>geojson</code>\n文件，并可以配合 <code>plt</code> 画出 <code>gdf</code>。使用\n<code>pd.concat</code> 连接两个 <code>gdf</code>。</li>\n</ul>\n<h2 id=\"解决方法\">解决方法</h2>\n<p>用多轮筛查，先用大网，后用小网，每轮用数天数次完成。每轮搜索之前，把待搜索的范围划分成一系列与搜索区域有交的小矩形，如在一个\n0.05\n范围内的经纬度网内进行第一轮筛查。专门建一个文档，用于保存在本轮搜索里每个小搜索区域的状态，是否爬完，爬到第几页了（先将其设置为空字符串）。</p>\n<p>每个小搜索区域有这么几种状态：</p>\n<ul>\n<li>A：已经爬完了</li>\n<li> B：没有爬完，且爬到的页号 = 9（看你具体的循环逻辑）</li>\n<li>C：没有爬完，且爬到的页号 &lt; 9 或为空字符串</li>\n</ul>\n<p>爬到 1 至 8 页，且本页的 poi 个数小于 25\n条时，说明在这个范围内爬完了；爬到第 8 页，且本页的 poi 个数等于 25\n条时，虽然是有很小的概率是爬完了的，但是我们认为它是没有爬完的。</p>\n<p>在每次搜索的时候，遍历状态为 C\n的区域，对其发请求，并更新对应的搜索区域的状态。</p>\n<p>每轮搜索的结束条件：没有状态为 C 的区域了。这时候需要把状态为 B\n的区域导出，进行下一步的划分，如划分成 0.01 的经纬度网。</p>\n<h2 id=\"示例代码\">示例代码</h2>\n<h3 id=\"amap_poi_spider.py\">amap_poi_spider.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"a+\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">search_poi</span>(<span class=\"params\">poi_typecode: <span class=\"built_in\">str</span>, search_range: <span class=\"built_in\">str</span>,api_key:<span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">dict</span>:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    在单个矩形范围内搜索POI，仅适用于中国境内，东经，北纬</span></span><br><span class=\"line\"><span class=\"string\">    对于一个多边形区域，每次最多搜索出200条，所以需要划分成多个多边形区域</span></span><br><span class=\"line\"><span class=\"string\">    “多边形区域搜索”接口每天限制调用100次，3次/秒</span></span><br><span class=\"line\"><span class=\"string\">    https://lbs.amap.com/api/webservice/guide/api-advanced/newpoisearch</span></span><br><span class=\"line\"><span class=\"string\">    返回</span></span><br><span class=\"line\"><span class=\"string\">    page：终止的页数</span></span><br><span class=\"line\"><span class=\"string\">    pois：list[dict] 可能为空</span></span><br><span class=\"line\"><span class=\"string\">    is_end：是否该区域已经搜索完</span></span><br><span class=\"line\"><span class=\"string\">    api_is_full：是否调用量超限</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    logging.info(<span class=\"string\">f\"黄若凡地理数据爬取矩形范围搜索模块\"</span>)</span><br><span class=\"line\">    ret = {<span class=\"string\">\"page\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"pois\"</span>: [], <span class=\"string\">\"is_end\"</span>: <span class=\"literal\">False</span>,<span class=\"string\">\"api_is_full\"</span>:<span class=\"literal\">False</span>}</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> ret[<span class=\"string\">\"api_is_full\"</span>]:  <span class=\"comment\"># 每一页</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">4</span>)</span><br><span class=\"line\">        response = requests.get(</span><br><span class=\"line\">            url=<span class=\"string\">\"https://restapi.amap.com/v5/place/polygon\"</span>,</span><br><span class=\"line\">            params={</span><br><span class=\"line\">                <span class=\"string\">\"key\"</span>: api_key,</span><br><span class=\"line\">                <span class=\"string\">\"polygon\"</span>: search_range,  <span class=\"comment\"># 多个坐标对集合，坐标对用 | 分割。多边形为矩形时，可传入左上右下两顶点坐标对；其他情况下首尾坐标对需相同。</span></span><br><span class=\"line\">                <span class=\"string\">\"types\"</span>: poi_typecode,  <span class=\"comment\"># 可以传入多个poi typecode，相互之间用 | 分隔</span></span><br><span class=\"line\">                <span class=\"string\">\"page_size\"</span>: <span class=\"number\">25</span>,  <span class=\"comment\"># 当前分页展示的数据条数，取值1到25</span></span><br><span class=\"line\">                <span class=\"string\">\"page_num\"</span>: ret[</span><br><span class=\"line\">                    <span class=\"string\">\"page\"</span></span><br><span class=\"line\">                ],  <span class=\"comment\"># 请求第几分页，取值1到100，如果上面指定25条，这里实际只有前8页</span></span><br><span class=\"line\">                <span class=\"string\">\"show_fields\"</span>: <span class=\"string\">\"business\"</span>,  <span class=\"comment\"># 返回结果控制</span></span><br><span class=\"line\">            },</span><br><span class=\"line\">        )</span><br><span class=\"line\">        logging.info(<span class=\"string\">f\"GET <span class=\"subst\">{search_range}</span>\"</span>)</span><br><span class=\"line\">        response = response.json()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> response[<span class=\"string\">\"status\"</span>] == <span class=\"string\">\"1\"</span>:</span><br><span class=\"line\">            count = <span class=\"built_in\">int</span>(response[<span class=\"string\">\"count\"</span>])</span><br><span class=\"line\">            pois: <span class=\"built_in\">list</span>[<span class=\"built_in\">dict</span>] = response[<span class=\"string\">\"pois\"</span>]</span><br><span class=\"line\">            logging.info(<span class=\"string\">f\"爬取到第<span class=\"subst\">{ret[<span class=\"string\">\"page\"</span>]}</span>页，有<span class=\"subst\">{count}</span>条\"</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ret[<span class=\"string\">\"page\"</span>] &lt;= <span class=\"number\">8</span> <span class=\"keyword\">and</span> count &lt; <span class=\"number\">25</span>:  <span class=\"comment\"># 说明是最后一页</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">                ret[<span class=\"string\">\"is_end\"</span>] = <span class=\"literal\">True</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> ret[<span class=\"string\">\"page\"</span>] == <span class=\"number\">8</span> <span class=\"keyword\">and</span> count == <span class=\"number\">25</span>:  <span class=\"comment\"># 说明需要进一步划分搜索范围</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"page\"</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:<span class=\"comment\"># 搜索下一页</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"page\"</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            logging.error(<span class=\"string\">\"搜索失败\"</span> + <span class=\"built_in\">str</span>(response))</span><br><span class=\"line\">            ret[<span class=\"string\">\"api_is_full\"</span>] = <span class=\"literal\">True</span> <span class=\"comment\"># 一天的量用完了</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"utils.py\">utils.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> geopandas <span class=\"keyword\">as</span> gpd</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> shapely.geometry <span class=\"keyword\">import</span> Polygon, box</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">rectangle_str_to_polygon</span>(<span class=\"params\">r: <span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把类似 114.30,30.60|114.35,30.65 的矩形字符串转换为 Polygon 对象\"\"\"</span></span><br><span class=\"line\">    left_top, right_bottom = r.split(<span class=\"string\">\"|\"</span>)</span><br><span class=\"line\">    left, top = <span class=\"built_in\">map</span>(<span class=\"built_in\">float</span>, left_top.split(<span class=\"string\">\",\"</span>))</span><br><span class=\"line\">    right, bottom = <span class=\"built_in\">map</span>(<span class=\"built_in\">float</span>, right_bottom.split(<span class=\"string\">\",\"</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Polygon([(left, top), (right, top), (right, bottom), (left, bottom)])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot_rectangles_on_geo</span>(<span class=\"params\">geojson_file_path: <span class=\"built_in\">str</span>, rectangles: <span class=\"built_in\">list</span>[Polygon]</span>):</span><br><span class=\"line\">    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file_path)</span><br><span class=\"line\">    sub_gdf = gpd.GeoDataFrame({<span class=\"string\">\"geometry\"</span>: rectangles})</span><br><span class=\"line\">    new_gdf: gpd.GeoDataFrame = pd.concat([gdf, sub_gdf], ignore_index=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    new_gdf.plot(facecolor=<span class=\"string\">\"none\"</span>, edgecolor=<span class=\"string\">\"black\"</span>, linewidth=<span class=\"number\">1</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">split_rectangle</span>(<span class=\"params\">rectangle: Polygon, num_parts: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把一个Polygon的矩形切分成指定数量、长宽固定的小矩形，确保与原矩形有交\"\"\"</span></span><br><span class=\"line\">    minx, miny, maxx, maxy = rectangle.bounds</span><br><span class=\"line\">    <span class=\"comment\"># 计算每边应分割成的部分数量</span></span><br><span class=\"line\">    side_parts = <span class=\"built_in\">int</span>(math.sqrt(num_parts))</span><br><span class=\"line\">    <span class=\"comment\"># 计算每个小矩形的宽度和高度</span></span><br><span class=\"line\">    width = (maxx - minx) / side_parts</span><br><span class=\"line\">    height = (maxy - miny) / side_parts</span><br><span class=\"line\">    sub_rectangles = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(side_parts):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(side_parts):</span><br><span class=\"line\">            left = minx + i * width</span><br><span class=\"line\">            bottom = miny + j * height</span><br><span class=\"line\">            right = left + width</span><br><span class=\"line\">            top = bottom + height</span><br><span class=\"line\">            small_rectangle = box(left, bottom, right, top)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> rectangle.intersects(small_rectangle):</span><br><span class=\"line\">                sub_rectangles.append(small_rectangle)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> sub_rectangles</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    r: Polygon = rectangle_str_to_polygon(<span class=\"string\">\"114.35,30.85|114.40,30.90\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">print_b</span>(<span class=\"params\">p: Polygon</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"左上：<span class=\"subst\">{p.bounds[<span class=\"number\">0</span>],p.bounds[<span class=\"number\">1</span>]}</span>，右下：<span class=\"subst\">{p.bounds[<span class=\"number\">2</span>],p.bounds[<span class=\"number\">3</span>]}</span>\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    new_rs = split_rectangle(r, <span class=\"number\">25</span>)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> <span class=\"built_in\">len</span>(new_rs) == <span class=\"number\">25</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print_b(r)</span><br><span class=\"line\">    print_b(new_rs[<span class=\"number\">0</span>])</span><br><span class=\"line\">    print_b(new_rs[-<span class=\"number\">1</span>])</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"search_by_round.py\">search_by_round.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> enum <span class=\"keyword\">import</span> Enum</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> geopandas <span class=\"keyword\">as</span> gpd</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"><span class=\"keyword\">from</span> shapely.geometry <span class=\"keyword\">import</span> Polygon</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> amap_poi_spider <span class=\"keyword\">import</span> search_poi</span><br><span class=\"line\"><span class=\"keyword\">from</span> utils <span class=\"keyword\">import</span> plot_rectangles_on_geo, rectangle_str_to_polygon, split_rectangle</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"a+\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">client = MongoClient(<span class=\"string\">\"mongodb://localhost:27017/\"</span>)</span><br><span class=\"line\">db = client[<span class=\"string\">\"武汉市餐饮店POI数据\"</span>]</span><br><span class=\"line\">pois_db = db[<span class=\"string\">\"POI数据\"</span>]</span><br><span class=\"line\">FOOD = <span class=\"string\">\"050000\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SearchAreaStatus</span>(<span class=\"title class_ inherited__\">Enum</span>):</span><br><span class=\"line\">    B = {<span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>, <span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"number\">9</span>}</span><br><span class=\"line\">    C = {</span><br><span class=\"line\">        <span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>,</span><br><span class=\"line\">        <span class=\"string\">\"$or\"</span>: [{<span class=\"string\">\"到第几页没有数据\"</span>: {<span class=\"string\">\"$lt\"</span>: <span class=\"number\">9</span>}}, {<span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"string\">\"\"</span>}],</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">API_KEYS = []</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">a_search_in_a_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"某轮的某次搜索\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    key_index = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> doc <span class=\"keyword\">in</span> search_ranges.find(SearchAreaStatus.C.value):</span><br><span class=\"line\">        <span class=\"keyword\">while</span> key_index &lt; <span class=\"built_in\">len</span>(API_KEYS):</span><br><span class=\"line\">            range_str = doc[<span class=\"string\">\"_id\"</span>]</span><br><span class=\"line\">            time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">            result = search_poi(FOOD, range_str, API_KEYS[key_index])</span><br><span class=\"line\">            search_ranges.update_one(</span><br><span class=\"line\">                {<span class=\"string\">\"_id\"</span>: range_str},</span><br><span class=\"line\">                {</span><br><span class=\"line\">                    <span class=\"string\">\"$set\"</span>: {</span><br><span class=\"line\">                        <span class=\"string\">\"是否搜索完\"</span>: result[<span class=\"string\">\"is_end\"</span>],</span><br><span class=\"line\">                        <span class=\"string\">\"到第几页没有数据\"</span>: result[<span class=\"string\">\"page\"</span>],</span><br><span class=\"line\">                    }</span><br><span class=\"line\">                },</span><br><span class=\"line\">                upsert=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            )</span><br><span class=\"line\">            <span class=\"keyword\">for</span> poi <span class=\"keyword\">in</span> result[<span class=\"string\">\"pois\"</span>]:</span><br><span class=\"line\">                _<span class=\"built_in\">id</span> = poi.pop(<span class=\"string\">\"id\"</span>)</span><br><span class=\"line\">                pois_db.update_one({<span class=\"string\">\"_id\"</span>: _<span class=\"built_in\">id</span>}, {<span class=\"string\">\"$set\"</span>: poi}, upsert=<span class=\"literal\">True</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> result[<span class=\"string\">\"api_is_full\"</span>]:</span><br><span class=\"line\">                key_index += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">search_areas_remaining_in_a_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span>, status: SearchAreaStatus</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"某轮某次搜索后剩余某个状态的搜索区域的数量\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> search_ranges.find(status.value):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(i)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">after_a_search_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把本轮未搜索完，需要进一步划分的区域的写到文件里\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    f = search_ranges.find(SearchAreaStatus.B.value)</span><br><span class=\"line\">    unfinished_range = [doc[<span class=\"string\">\"_id\"</span>] <span class=\"keyword\">for</span> doc <span class=\"keyword\">in</span> f]</span><br><span class=\"line\">    df = pd.DataFrame({<span class=\"string\">\"s_range\"</span>: unfinished_range})</span><br><span class=\"line\">    df.to_csv(<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛之后未搜索完的.csv\"</span>, index=<span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">show_unfinished</span>(<span class=\"params\">old_round_csv_file: <span class=\"built_in\">str</span>, geojson_file: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"展示上一轮里未搜索完的区域\"\"\"</span></span><br><span class=\"line\">    df = pd.read_csv(old_round_csv_file)</span><br><span class=\"line\">    old_rectangles = [rectangle_str_to_polygon(s) <span class=\"keyword\">for</span> s <span class=\"keyword\">in</span> df[<span class=\"string\">\"s_range\"</span>]]</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f\"上一轮里未搜索完的区域有<span class=\"subst\">{<span class=\"built_in\">len</span>(old_rectangles)}</span>个\"</span>)</span><br><span class=\"line\">    plot_rectangles_on_geo(geojson_file, old_rectangles)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">divide_search_area</span>(<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">    old_rectangles: <span class=\"built_in\">list</span>[Polygon], geojson_file: <span class=\"built_in\">str</span>, num_parts: <span class=\"built_in\">int</span></span></span><br><span class=\"line\"><span class=\"params\"></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"划分一系列矩形为整数的平方份，并确保与行政区有交\"\"\"</span></span><br><span class=\"line\">    new_rectangles: <span class=\"built_in\">list</span>[Polygon] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> old_rectangles:</span><br><span class=\"line\">        new_rs = split_rectangle(r, num_parts=num_parts)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> <span class=\"built_in\">len</span>(new_rs) == num_parts</span><br><span class=\"line\">        new_rectangles.extend(new_rs)</span><br><span class=\"line\">    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file)</span><br><span class=\"line\">    polygons = [geom <span class=\"keyword\">for</span> geom <span class=\"keyword\">in</span> gdf.geometry <span class=\"keyword\">if</span> <span class=\"built_in\">isinstance</span>(geom, Polygon)]</span><br><span class=\"line\">    new_search_ranges: <span class=\"built_in\">list</span>[Polygon] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> new_rectangles:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> polygons:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r.intersects(p):</span><br><span class=\"line\">                new_search_ranges.append(r)</span><br><span class=\"line\">    plot_rectangles_on_geo(geojson_file, new_search_ranges)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> new_search_ranges</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">before_a_search_round</span>(<span class=\"params\">new_round: <span class=\"built_in\">str</span>, new_search_ranges: <span class=\"built_in\">list</span>[Polygon]</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"写新的搜索区域到数据库里，注意保留小数的位数\"\"\"</span></span><br><span class=\"line\">    collection = db[<span class=\"string\">f\"第<span class=\"subst\">{new_round}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> new_search_ranges:</span><br><span class=\"line\">        minx, miny, maxx, maxy = r.bounds</span><br><span class=\"line\">        s = <span class=\"string\">f\"<span class=\"subst\">{minx:<span class=\"number\">.3</span>f}</span>,<span class=\"subst\">{miny:<span class=\"number\">.3</span>f}</span>|<span class=\"subst\">{maxx:<span class=\"number\">.3</span>f}</span>,<span class=\"subst\">{maxy:<span class=\"number\">.3</span>f}</span>\"</span></span><br><span class=\"line\">        collection.update_one(</span><br><span class=\"line\">            {<span class=\"string\">\"_id\"</span>: s},</span><br><span class=\"line\">            {</span><br><span class=\"line\">                <span class=\"string\">\"$set\"</span>: {</span><br><span class=\"line\">                    <span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                    <span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>,</span><br><span class=\"line\">                }</span><br><span class=\"line\">            },</span><br><span class=\"line\">            upsert=<span class=\"literal\">True</span>,</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># show_unfinished(\"第二轮筛之后未搜索完的.csv\", \"武汉市13个区.geojson\")</span></span><br><span class=\"line\"><span class=\"comment\"># df = pd.read_csv(\"第二轮筛之后未搜索完的.csv\")</span></span><br><span class=\"line\"><span class=\"comment\"># old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]</span></span><br><span class=\"line\"><span class=\"comment\"># new_search_ranges = divide_search_area(old_rectangles, \"武汉市13个区.geojson\", 25)</span></span><br><span class=\"line\"><span class=\"comment\"># before_a_search_round(\"三\", new_search_ranges)</span></span><br><span class=\"line\"><span class=\"comment\"># search_areas_remaining_in_a_round(\"三\", SearchAreaStatus.C)</span></span><br><span class=\"line\"></span><br><span class=\"line\">a_search_in_a_round(<span class=\"string\">\"三\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># after_a_search_round(\"二\")</span></span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<p>我们想要使用高德开放平台的 POI 搜索 2.0 中的多边形区域搜索来获取 POI\n数据。它的传参需求类似于 <code>114.10,30.53|114.11,30.54</code>\n的字符串，为一个矩形范围。对于个人认证的开发者，每天每个账号限制调用 100\n次（实际情况可能比 100 次略多几十次），3 次每秒。且该 API\n每次请求只能返回 1 页，1 页最多 25 条，到第九页必定不出数据。</p>\n<ul>\n<li>对于某种类型的 POI，它在地图上分布的密度不是固定的。</li>\n<li>还有一个 Web 基础服务\nAPI - 行政区域查询，它可以返回一个行政区的边界字符串。</li>\n<li>纬线是横着的，而纬度是竖直方向上的，在竖直方向上，1 纬度约为 111\n公里；经线是竖着的，而经度是水平方向上的，在水平方向上，1 经度约为 111\n公里乘上纬度的余弦。</li>\n<li><code>shapely</code> 包的 <code>Polygon</code>\n对象可以表示一个多边形，其 <code>intersects</code>\n方法可以判断两个多边形是否有交。一个 <code>list[Polygon]</code> 可以写进\n<code>geojson</code> 文件里。</li>\n<li><code>geopandas</code> 包可以读写 <code>geojson</code>\n文件，并可以配合 <code>plt</code> 画出 <code>gdf</code>。使用\n<code>pd.concat</code> 连接两个 <code>gdf</code>。</li>\n</ul>\n<h2 id=\"解决方法\">解决方法</h2>\n<p>用多轮筛查，先用大网，后用小网，每轮用数天数次完成。每轮搜索之前，把待搜索的范围划分成一系列与搜索区域有交的小矩形，如在一个\n0.05\n范围内的经纬度网内进行第一轮筛查。专门建一个文档，用于保存在本轮搜索里每个小搜索区域的状态，是否爬完，爬到第几页了（先将其设置为空字符串）。</p>\n<p>每个小搜索区域有这么几种状态：</p>\n<ul>\n<li>A：已经爬完了</li>\n<li> B：没有爬完，且爬到的页号 = 9（看你具体的循环逻辑）</li>\n<li>C：没有爬完，且爬到的页号 &lt; 9 或为空字符串</li>\n</ul>\n<p>爬到 1 至 8 页，且本页的 poi 个数小于 25\n条时，说明在这个范围内爬完了；爬到第 8 页，且本页的 poi 个数等于 25\n条时，虽然是有很小的概率是爬完了的，但是我们认为它是没有爬完的。</p>\n<p>在每次搜索的时候，遍历状态为 C\n的区域，对其发请求，并更新对应的搜索区域的状态。</p>\n<p>每轮搜索的结束条件：没有状态为 C 的区域了。这时候需要把状态为 B\n的区域导出，进行下一步的划分，如划分成 0.01 的经纬度网。</p>\n<h2 id=\"示例代码\">示例代码</h2>\n<h3 id=\"amap_poi_spider.py\">amap_poi_spider.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"a+\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">search_poi</span>(<span class=\"params\">poi_typecode: <span class=\"built_in\">str</span>, search_range: <span class=\"built_in\">str</span>,api_key:<span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">dict</span>:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    在单个矩形范围内搜索POI，仅适用于中国境内，东经，北纬</span></span><br><span class=\"line\"><span class=\"string\">    对于一个多边形区域，每次最多搜索出200条，所以需要划分成多个多边形区域</span></span><br><span class=\"line\"><span class=\"string\">    “多边形区域搜索”接口每天限制调用100次，3次/秒</span></span><br><span class=\"line\"><span class=\"string\">    https://lbs.amap.com/api/webservice/guide/api-advanced/newpoisearch</span></span><br><span class=\"line\"><span class=\"string\">    返回</span></span><br><span class=\"line\"><span class=\"string\">    page：终止的页数</span></span><br><span class=\"line\"><span class=\"string\">    pois：list[dict] 可能为空</span></span><br><span class=\"line\"><span class=\"string\">    is_end：是否该区域已经搜索完</span></span><br><span class=\"line\"><span class=\"string\">    api_is_full：是否调用量超限</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    logging.info(<span class=\"string\">f\"黄若凡地理数据爬取矩形范围搜索模块\"</span>)</span><br><span class=\"line\">    ret = {<span class=\"string\">\"page\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"pois\"</span>: [], <span class=\"string\">\"is_end\"</span>: <span class=\"literal\">False</span>,<span class=\"string\">\"api_is_full\"</span>:<span class=\"literal\">False</span>}</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> ret[<span class=\"string\">\"api_is_full\"</span>]:  <span class=\"comment\"># 每一页</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">4</span>)</span><br><span class=\"line\">        response = requests.get(</span><br><span class=\"line\">            url=<span class=\"string\">\"https://restapi.amap.com/v5/place/polygon\"</span>,</span><br><span class=\"line\">            params={</span><br><span class=\"line\">                <span class=\"string\">\"key\"</span>: api_key,</span><br><span class=\"line\">                <span class=\"string\">\"polygon\"</span>: search_range,  <span class=\"comment\"># 多个坐标对集合，坐标对用 | 分割。多边形为矩形时，可传入左上右下两顶点坐标对；其他情况下首尾坐标对需相同。</span></span><br><span class=\"line\">                <span class=\"string\">\"types\"</span>: poi_typecode,  <span class=\"comment\"># 可以传入多个poi typecode，相互之间用 | 分隔</span></span><br><span class=\"line\">                <span class=\"string\">\"page_size\"</span>: <span class=\"number\">25</span>,  <span class=\"comment\"># 当前分页展示的数据条数，取值1到25</span></span><br><span class=\"line\">                <span class=\"string\">\"page_num\"</span>: ret[</span><br><span class=\"line\">                    <span class=\"string\">\"page\"</span></span><br><span class=\"line\">                ],  <span class=\"comment\"># 请求第几分页，取值1到100，如果上面指定25条，这里实际只有前8页</span></span><br><span class=\"line\">                <span class=\"string\">\"show_fields\"</span>: <span class=\"string\">\"business\"</span>,  <span class=\"comment\"># 返回结果控制</span></span><br><span class=\"line\">            },</span><br><span class=\"line\">        )</span><br><span class=\"line\">        logging.info(<span class=\"string\">f\"GET <span class=\"subst\">{search_range}</span>\"</span>)</span><br><span class=\"line\">        response = response.json()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> response[<span class=\"string\">\"status\"</span>] == <span class=\"string\">\"1\"</span>:</span><br><span class=\"line\">            count = <span class=\"built_in\">int</span>(response[<span class=\"string\">\"count\"</span>])</span><br><span class=\"line\">            pois: <span class=\"built_in\">list</span>[<span class=\"built_in\">dict</span>] = response[<span class=\"string\">\"pois\"</span>]</span><br><span class=\"line\">            logging.info(<span class=\"string\">f\"爬取到第<span class=\"subst\">{ret[<span class=\"string\">\"page\"</span>]}</span>页，有<span class=\"subst\">{count}</span>条\"</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ret[<span class=\"string\">\"page\"</span>] &lt;= <span class=\"number\">8</span> <span class=\"keyword\">and</span> count &lt; <span class=\"number\">25</span>:  <span class=\"comment\"># 说明是最后一页</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">                ret[<span class=\"string\">\"is_end\"</span>] = <span class=\"literal\">True</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> ret[<span class=\"string\">\"page\"</span>] == <span class=\"number\">8</span> <span class=\"keyword\">and</span> count == <span class=\"number\">25</span>:  <span class=\"comment\"># 说明需要进一步划分搜索范围</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"page\"</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:<span class=\"comment\"># 搜索下一页</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"page\"</span>] += <span class=\"number\">1</span></span><br><span class=\"line\">                ret[<span class=\"string\">\"pois\"</span>].extend(pois)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            logging.error(<span class=\"string\">\"搜索失败\"</span> + <span class=\"built_in\">str</span>(response))</span><br><span class=\"line\">            ret[<span class=\"string\">\"api_is_full\"</span>] = <span class=\"literal\">True</span> <span class=\"comment\"># 一天的量用完了</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ret</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"utils.py\">utils.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> geopandas <span class=\"keyword\">as</span> gpd</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> shapely.geometry <span class=\"keyword\">import</span> Polygon, box</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">rectangle_str_to_polygon</span>(<span class=\"params\">r: <span class=\"built_in\">str</span></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把类似 114.30,30.60|114.35,30.65 的矩形字符串转换为 Polygon 对象\"\"\"</span></span><br><span class=\"line\">    left_top, right_bottom = r.split(<span class=\"string\">\"|\"</span>)</span><br><span class=\"line\">    left, top = <span class=\"built_in\">map</span>(<span class=\"built_in\">float</span>, left_top.split(<span class=\"string\">\",\"</span>))</span><br><span class=\"line\">    right, bottom = <span class=\"built_in\">map</span>(<span class=\"built_in\">float</span>, right_bottom.split(<span class=\"string\">\",\"</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Polygon([(left, top), (right, top), (right, bottom), (left, bottom)])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">plot_rectangles_on_geo</span>(<span class=\"params\">geojson_file_path: <span class=\"built_in\">str</span>, rectangles: <span class=\"built_in\">list</span>[Polygon]</span>):</span><br><span class=\"line\">    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file_path)</span><br><span class=\"line\">    sub_gdf = gpd.GeoDataFrame({<span class=\"string\">\"geometry\"</span>: rectangles})</span><br><span class=\"line\">    new_gdf: gpd.GeoDataFrame = pd.concat([gdf, sub_gdf], ignore_index=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    new_gdf.plot(facecolor=<span class=\"string\">\"none\"</span>, edgecolor=<span class=\"string\">\"black\"</span>, linewidth=<span class=\"number\">1</span>)</span><br><span class=\"line\">    plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">split_rectangle</span>(<span class=\"params\">rectangle: Polygon, num_parts: <span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把一个Polygon的矩形切分成指定数量、长宽固定的小矩形，确保与原矩形有交\"\"\"</span></span><br><span class=\"line\">    minx, miny, maxx, maxy = rectangle.bounds</span><br><span class=\"line\">    <span class=\"comment\"># 计算每边应分割成的部分数量</span></span><br><span class=\"line\">    side_parts = <span class=\"built_in\">int</span>(math.sqrt(num_parts))</span><br><span class=\"line\">    <span class=\"comment\"># 计算每个小矩形的宽度和高度</span></span><br><span class=\"line\">    width = (maxx - minx) / side_parts</span><br><span class=\"line\">    height = (maxy - miny) / side_parts</span><br><span class=\"line\">    sub_rectangles = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(side_parts):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(side_parts):</span><br><span class=\"line\">            left = minx + i * width</span><br><span class=\"line\">            bottom = miny + j * height</span><br><span class=\"line\">            right = left + width</span><br><span class=\"line\">            top = bottom + height</span><br><span class=\"line\">            small_rectangle = box(left, bottom, right, top)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> rectangle.intersects(small_rectangle):</span><br><span class=\"line\">                sub_rectangles.append(small_rectangle)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> sub_rectangles</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    r: Polygon = rectangle_str_to_polygon(<span class=\"string\">\"114.35,30.85|114.40,30.90\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">print_b</span>(<span class=\"params\">p: Polygon</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"左上：<span class=\"subst\">{p.bounds[<span class=\"number\">0</span>],p.bounds[<span class=\"number\">1</span>]}</span>，右下：<span class=\"subst\">{p.bounds[<span class=\"number\">2</span>],p.bounds[<span class=\"number\">3</span>]}</span>\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    new_rs = split_rectangle(r, <span class=\"number\">25</span>)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> <span class=\"built_in\">len</span>(new_rs) == <span class=\"number\">25</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print_b(r)</span><br><span class=\"line\">    print_b(new_rs[<span class=\"number\">0</span>])</span><br><span class=\"line\">    print_b(new_rs[-<span class=\"number\">1</span>])</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"search_by_round.py\">search_by_round.py</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> enum <span class=\"keyword\">import</span> Enum</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> geopandas <span class=\"keyword\">as</span> gpd</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"><span class=\"keyword\">from</span> shapely.geometry <span class=\"keyword\">import</span> Polygon</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> amap_poi_spider <span class=\"keyword\">import</span> search_poi</span><br><span class=\"line\"><span class=\"keyword\">from</span> utils <span class=\"keyword\">import</span> plot_rectangles_on_geo, rectangle_str_to_polygon, split_rectangle</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"a+\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">client = MongoClient(<span class=\"string\">\"mongodb://localhost:27017/\"</span>)</span><br><span class=\"line\">db = client[<span class=\"string\">\"武汉市餐饮店POI数据\"</span>]</span><br><span class=\"line\">pois_db = db[<span class=\"string\">\"POI数据\"</span>]</span><br><span class=\"line\">FOOD = <span class=\"string\">\"050000\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SearchAreaStatus</span>(<span class=\"title class_ inherited__\">Enum</span>):</span><br><span class=\"line\">    B = {<span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>, <span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"number\">9</span>}</span><br><span class=\"line\">    C = {</span><br><span class=\"line\">        <span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>,</span><br><span class=\"line\">        <span class=\"string\">\"$or\"</span>: [{<span class=\"string\">\"到第几页没有数据\"</span>: {<span class=\"string\">\"$lt\"</span>: <span class=\"number\">9</span>}}, {<span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"string\">\"\"</span>}],</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">API_KEYS = []</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">a_search_in_a_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"某轮的某次搜索\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    key_index = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> doc <span class=\"keyword\">in</span> search_ranges.find(SearchAreaStatus.C.value):</span><br><span class=\"line\">        <span class=\"keyword\">while</span> key_index &lt; <span class=\"built_in\">len</span>(API_KEYS):</span><br><span class=\"line\">            range_str = doc[<span class=\"string\">\"_id\"</span>]</span><br><span class=\"line\">            time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">            result = search_poi(FOOD, range_str, API_KEYS[key_index])</span><br><span class=\"line\">            search_ranges.update_one(</span><br><span class=\"line\">                {<span class=\"string\">\"_id\"</span>: range_str},</span><br><span class=\"line\">                {</span><br><span class=\"line\">                    <span class=\"string\">\"$set\"</span>: {</span><br><span class=\"line\">                        <span class=\"string\">\"是否搜索完\"</span>: result[<span class=\"string\">\"is_end\"</span>],</span><br><span class=\"line\">                        <span class=\"string\">\"到第几页没有数据\"</span>: result[<span class=\"string\">\"page\"</span>],</span><br><span class=\"line\">                    }</span><br><span class=\"line\">                },</span><br><span class=\"line\">                upsert=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            )</span><br><span class=\"line\">            <span class=\"keyword\">for</span> poi <span class=\"keyword\">in</span> result[<span class=\"string\">\"pois\"</span>]:</span><br><span class=\"line\">                _<span class=\"built_in\">id</span> = poi.pop(<span class=\"string\">\"id\"</span>)</span><br><span class=\"line\">                pois_db.update_one({<span class=\"string\">\"_id\"</span>: _<span class=\"built_in\">id</span>}, {<span class=\"string\">\"$set\"</span>: poi}, upsert=<span class=\"literal\">True</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> result[<span class=\"string\">\"api_is_full\"</span>]:</span><br><span class=\"line\">                key_index += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">search_areas_remaining_in_a_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span>, status: SearchAreaStatus</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"某轮某次搜索后剩余某个状态的搜索区域的数量\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> search_ranges.find(status.value):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(i)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">after_a_search_round</span>(<span class=\"params\"><span class=\"built_in\">round</span>: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"把本轮未搜索完，需要进一步划分的区域的写到文件里\"\"\"</span></span><br><span class=\"line\">    search_ranges = db[<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    f = search_ranges.find(SearchAreaStatus.B.value)</span><br><span class=\"line\">    unfinished_range = [doc[<span class=\"string\">\"_id\"</span>] <span class=\"keyword\">for</span> doc <span class=\"keyword\">in</span> f]</span><br><span class=\"line\">    df = pd.DataFrame({<span class=\"string\">\"s_range\"</span>: unfinished_range})</span><br><span class=\"line\">    df.to_csv(<span class=\"string\">f\"第<span class=\"subst\">{<span class=\"built_in\">round</span>}</span>轮筛之后未搜索完的.csv\"</span>, index=<span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">show_unfinished</span>(<span class=\"params\">old_round_csv_file: <span class=\"built_in\">str</span>, geojson_file: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"展示上一轮里未搜索完的区域\"\"\"</span></span><br><span class=\"line\">    df = pd.read_csv(old_round_csv_file)</span><br><span class=\"line\">    old_rectangles = [rectangle_str_to_polygon(s) <span class=\"keyword\">for</span> s <span class=\"keyword\">in</span> df[<span class=\"string\">\"s_range\"</span>]]</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f\"上一轮里未搜索完的区域有<span class=\"subst\">{<span class=\"built_in\">len</span>(old_rectangles)}</span>个\"</span>)</span><br><span class=\"line\">    plot_rectangles_on_geo(geojson_file, old_rectangles)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">divide_search_area</span>(<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">    old_rectangles: <span class=\"built_in\">list</span>[Polygon], geojson_file: <span class=\"built_in\">str</span>, num_parts: <span class=\"built_in\">int</span></span></span><br><span class=\"line\"><span class=\"params\"></span>) -&gt; <span class=\"built_in\">list</span>[Polygon]:</span><br><span class=\"line\">    <span class=\"string\">\"\"\"划分一系列矩形为整数的平方份，并确保与行政区有交\"\"\"</span></span><br><span class=\"line\">    new_rectangles: <span class=\"built_in\">list</span>[Polygon] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> old_rectangles:</span><br><span class=\"line\">        new_rs = split_rectangle(r, num_parts=num_parts)</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> <span class=\"built_in\">len</span>(new_rs) == num_parts</span><br><span class=\"line\">        new_rectangles.extend(new_rs)</span><br><span class=\"line\">    gdf: gpd.GeoDataFrame = gpd.read_file(geojson_file)</span><br><span class=\"line\">    polygons = [geom <span class=\"keyword\">for</span> geom <span class=\"keyword\">in</span> gdf.geometry <span class=\"keyword\">if</span> <span class=\"built_in\">isinstance</span>(geom, Polygon)]</span><br><span class=\"line\">    new_search_ranges: <span class=\"built_in\">list</span>[Polygon] = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> new_rectangles:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> polygons:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r.intersects(p):</span><br><span class=\"line\">                new_search_ranges.append(r)</span><br><span class=\"line\">    plot_rectangles_on_geo(geojson_file, new_search_ranges)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> new_search_ranges</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">before_a_search_round</span>(<span class=\"params\">new_round: <span class=\"built_in\">str</span>, new_search_ranges: <span class=\"built_in\">list</span>[Polygon]</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"写新的搜索区域到数据库里，注意保留小数的位数\"\"\"</span></span><br><span class=\"line\">    collection = db[<span class=\"string\">f\"第<span class=\"subst\">{new_round}</span>轮筛的搜索范围\"</span>]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> r <span class=\"keyword\">in</span> new_search_ranges:</span><br><span class=\"line\">        minx, miny, maxx, maxy = r.bounds</span><br><span class=\"line\">        s = <span class=\"string\">f\"<span class=\"subst\">{minx:<span class=\"number\">.3</span>f}</span>,<span class=\"subst\">{miny:<span class=\"number\">.3</span>f}</span>|<span class=\"subst\">{maxx:<span class=\"number\">.3</span>f}</span>,<span class=\"subst\">{maxy:<span class=\"number\">.3</span>f}</span>\"</span></span><br><span class=\"line\">        collection.update_one(</span><br><span class=\"line\">            {<span class=\"string\">\"_id\"</span>: s},</span><br><span class=\"line\">            {</span><br><span class=\"line\">                <span class=\"string\">\"$set\"</span>: {</span><br><span class=\"line\">                    <span class=\"string\">\"到第几页没有数据\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">                    <span class=\"string\">\"是否搜索完\"</span>: <span class=\"literal\">False</span>,</span><br><span class=\"line\">                }</span><br><span class=\"line\">            },</span><br><span class=\"line\">            upsert=<span class=\"literal\">True</span>,</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># show_unfinished(\"第二轮筛之后未搜索完的.csv\", \"武汉市13个区.geojson\")</span></span><br><span class=\"line\"><span class=\"comment\"># df = pd.read_csv(\"第二轮筛之后未搜索完的.csv\")</span></span><br><span class=\"line\"><span class=\"comment\"># old_rectangles = [rectangle_str_to_polygon(s) for s in df[\"s_range\"]]</span></span><br><span class=\"line\"><span class=\"comment\"># new_search_ranges = divide_search_area(old_rectangles, \"武汉市13个区.geojson\", 25)</span></span><br><span class=\"line\"><span class=\"comment\"># before_a_search_round(\"三\", new_search_ranges)</span></span><br><span class=\"line\"><span class=\"comment\"># search_areas_remaining_in_a_round(\"三\", SearchAreaStatus.C)</span></span><br><span class=\"line\"></span><br><span class=\"line\">a_search_in_a_round(<span class=\"string\">\"三\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># after_a_search_round(\"二\")</span></span><br></pre></td></tr></tbody></table></figure>\n"},{"title":"过去的笔记","date":"2023-09-26T09:45:00.000Z","mermaid":true,"mathjax":true,"_content":"\n## JSON\n\nJSON（JavaScript Object Notation，JavaScript 对象表示法）是一种轻量级的数据交换格式，可以看成是字符串。和 JavaScript 没什么关系，就像 JavaScript 和 Java 没什么关系一样。从 Python 的角度来看，一个 JSON 文件是一系列列表和字典的嵌套。\n\nJS：\n\n```js\njsonStr = JSON.stringify(jsObj);\njsObj = JSON.parse(jsonStr);\n```\n\nPython：\n\n```python\nimport json\njson_str = json.dumps(py_obj)\npy_obj = json.loads(json_str)\n```\n\n<!--more-->\n\n## 计算机网络\n\n### 接网线头的流程和注意事项\n\nRJ45 水晶头的接线方式有两种，多使用 T568B：橙白|橙、绿白|蓝、蓝白|绿、棕白|棕。\n\n1. 用网线钳的圆孔把网线的表皮剥开，转一下不要使太大力\n   - 露出来里面的线的长度长一点，比两倍水晶头的长度长\n2. 你会看到有四对缠在一起的线，把它们分开成一根一根的\n   - 这时候先不用管它们的顺序\n3. 用力把它们捋直，多捋几次\n4. 它们缠在一起的时候是：橙白|橙、绿白|绿、蓝白|蓝、棕白|棕，接线的时候要把中间两根交换一下位置\n5. 用网线钳的刀把它们从中间剪断，保证这几根线的末端是平齐的。注意两点：\n   - 哪里排列地最整齐紧密，就从哪里剪\n   - 留下的长度不要比一倍水晶头的长度过长，否则露出来的部分容易损坏。这是一个**反面的例子**：这几根线的下面留得太长了，没还有完全地分开\n\n<img src=\"/blog/images/rj45.webp\">\n\n6. 把这几根线插入到水晶头里。注意：水晶头的卡扣是朝下的\n   - 如果顺利，这八根线会待在它们的八个凹槽里，它们的头上有八个片片\n7. 把水晶头插入网线钳的槽里，用网线钳用力把这八个片片刺入线的内部，在刺的时候能感受到阻力\n8. 两头都接好之后，用工具测试是否联通\n\n### 概述\n\n世界上第一个网页：[http://info.cern.ch](http://info.cern.ch)\n\nRFC 文档：“请求评论”（Request For Comments）的文档，公开发布的互联网建议标准，请求公众评论。最后制定互联网标准 STD。\n\n互联网服务提供者（Internet Service Provider），可以是移动联通电信公司，也可以是非营利组织。主干 ISP：国 | 地区 ISP：省 | 本地 ISP：省以下。两个同级 ISP 交换信息时，可以通过互联网交换点（Internet eXchange Point）IXP，而不必通过上级 ISP。\n\n计算机网络分边缘部分和核心部分。边缘部分是我们所有人直接使用的主机，如手机和电脑。核心部分是除了边缘主机之外的所有硬件设施，如交换机、路由器、网线。接入网是边缘部分向核心部分过渡的部分。\n\n边缘部分的通信分 C/S 模式和 P2P 模式。两者的区别是学生向老师请教题目和学生之间互相讲题，在下载文件之后做不做种。\n\n核心部分的通信：电路交换是提前联系用一辆专车运货；分组交换是把货物拆分成小的快递，再经过各种站点发送出去；报文交换是将货物作为一个整体，通过多个中转站运送。前两者的区别是一手和多手，后两者的区别是切不切片。\n\n分组交换：\n\n1. TCP 协议把报文分组，每组写上头部信息。（包裹大包分成小包，写上序号、寄出地和目的地等）\n2. 通过路由器一级一级地转发到目的地。\n\n{% mermaid gantt %}\ntitle 分组交换（甘特图）\ndateFormat s\naxisFormat %S\n\nsection 1 号包\n从 A 到 B :0, 5s\n从 B 到 C :5, 5s\n从 C 到 D :10, 5s\n\nsection 2 号包\n从 A 到 B :5, 5s\n从 B 到 C :10, 5s\n从 C 到 D :15, 5s\n\nsection 3 号包\n从 A 到 B :10, 5s\n从 B 到 C :15, 5s\n从 C 到 D :20, 5s\n{% endmermaid %}\n\n- 0-5 时间 1 号包裹从 A 站到 B 站\n- 5-10 时间 1 号包裹从 B 站到 C 站、2 号包裹从 A 站到 B 站\n- 10-15 时间 1 号包裹从 C 站到 D 站、2 号包裹从 B 站到 C 站、3 号包裹从 A 站到 B 站\n\n3. 把各个包裹合并。\n\n### 物理层\n\nRJ45 水晶头的接线方式有两种，多使用 T568B：橙白|橙、绿白|蓝、蓝白|绿、棕白|棕。传的是数字信号。\n\n- 物理层之下的传输媒体\n  - 导引性传输媒体：双绞线、光缆、同轴电缆、架空明线\n  - 非导引性传输媒体：空气或真空\n\n集线器工作在物理层。\n\n- 通信双方的交互方式\n  - 单向通信（单工）：一段单行道。电视、广播。\n  - 双向交替通信（半双工）：一段有两个车道的马路，但是规定在一边的车道有车正在走时，另一边（相反方向）的车道不能有车走。对讲机。\n  - 双向同时通信（全双工）：一段正常的两个车道的马路。\n\n编码方式：编码的终点是码，即数字信号。\n\n如何把比特和电压互相转换。\n\n```\n 1  1  0  0  1\n\n‾‾‾‾‾‾______‾‾‾    # 极性不归零电平 Polar NRZL，Non-Return-to-Zero level\n\n‾‾‾_________‾‾‾    # 极性不归零反转 Polar NRZI，Non-return-to-zero inverted，边界遇 1 跳变\n\n-‾--‾--_--_--‾-    # 极性归零 Polar RZ，Return-to-Zero，正脉冲凸，负脉冲凹\n\n‾_|‾_|_‾|_‾|‾_|    # 曼彻斯特编码（G.E. Thomas Convention）\n\n‾_|_‾|_‾|_‾|‾_|    # 差分曼彻斯特编码（G.E. Thomas Convention）\n```\n\n曼彻斯特编码：中心始终跳变\n\n- G.E. Thomas Convention：\n  - 中心向下跳变，`‾_`，`1`\n  - 中心向上跳变，`_‾`，`0`\n  - 简记：**下为 1**\n- IEEE 802.3 Convention 和上面的定义相反\n\n差分曼彻斯特编码：中心始终跳变\n\n- G.E. Thomas Convention：\n  - 左边界无跳变，`1`\n    - `_|_‾`\n    - `‾|‾_`\n  - 左边界有跳变，`0`\n    - `_|‾_`\n    - `‾|_‾`\n  - 简记：**左连为 1**\n- IEEE 802.3 Convention 和上面的定义相反\n\n### 数据链路层\n\n解决三个问题：发出去之后，哪一方接收；传输何时开始，何时结束；判断是否有传输错误\n\n网卡：\n\n- 负责把有线或无线电信号与比特流互转。工作在物理层和数据链路层。\n- 与 CPU 和存储器并行通信，与局域网串行通信\n- 接收并缓存 MAC 帧，帧的目标地址不是它自己时，或者不符合格式、校验失败时就丢弃\n- 安装驱动到操作系统，实现以太网协议\n\n> MAC\n\nMAC 地址有 6 个字节。全 1 的地址是广播地址\n\nWindows 查看网络适配器的 MAC 地址：ipconfig /all\n\n- 前三个字节是 IEEE 的注册管理机构分配的，后三个字节是厂家自行分配的\n- 第一个字节最低位：0 为单播，1 为多播\n\n> 透明传输\n\n帧定界符 SOH 0x01、EOT 0x10，转义字符 ESC 0x1B\n\n如果数据长度超过了 MTU，会被分割成多个帧。\n\n下到物理层：在 MAC 帧前面插入 7 字节的前同步码和 1 字节的帧定界符：就是 `10101010 10101010 ... 10101010 10101011`。交替的 10 用于时钟同步，最后一个字节的最后一个比特变了，告诉接收端，后面的就是 MAC 帧。不用标记帧结束，因为是曼彻斯特编码，一直在跳变，脱离原本的规律了就是帧结束了。\n\n> 差错检测\n\n比特差错：01 错了。误码率（BER）：平均每传送 $\\mathrm{(BER)^{-1}}$ 个比特，会有一个比特出错。\n\n传输差错：接收方没有收到某一个帧，或者收到了重复的帧，或者收到帧的顺序错了\n\n**FCS**\n\n帧检验序列 Frame Check Sequence，确保无比特差错\n\n1. 提前规定冗余码有 3 位\n2. 提前规定一个除数 $P$ ，比冗余码的长度多一位，如 `1100`\n3. 把待传的数据 `1001 0001` 后边补上冗余码长度个 0，用除数除它\n4. 不管大小，`1` 开头就商 `1`，`0` 开头就商 `0`：\n\n```txt\n        1\n    --------------\n1100|1001 0001 000\n     1100\n     ------\n      101 0\n```\n\n5. 相减，相当于异或\n6. 继续除，最后的余数 `100` 就是冗余码\n7. 把冗余码添加到原数据的末尾\n\n**CRC**\n\n循环冗余检验 Cyclic Redundancy Check\n\n接收方把收到的、经发送方添加了冗余码后的数据再用 $P$ 去除。传输没出错 -> 余数为零，反之为极大概率。\n\n除数 $P$ 还有一种记法，叫生成多项式 $P(X)$：如 `1100` 记作：$X^3+X^2$\n\n> 交换机\n\n交换机工作在数据链路层，全双工。并且不使用 CSMA/CD 协议，但仍然使用以太网的帧结构。\n\n交换表的结构：MAC 地址、端口号、有效时间、状态标志\n\n源机器发送数据帧 → 交换机记录源 MAC 地址 → 交换机查找目标 MAC 地址 → 如果目标未知，广播数据帧 → STP 确保广播不会形成环路。\n\n交换机分为直通交换和存储转发。直通交换不校验 FCS，直接读 6 字节的目标地址（有时包含前导码）。\n\n> 以太网\n\n以太网是局域网的一种实现方式，与 Wifi 的区别是后者不用网线。\n\n- DIX Ethernet V2 和 IEEE 802.3 是以太网的协议，使用 CSMA/CD（冲突检测）\n- IEEE 802.11 是 Wifi 的协议，使用 CSMA/CA（冲突避免）\n\n局域网共享信道，为避免冲突，可采用静态划分信道（复用）或动态媒体接入控制\n\n以太网 V2 的 MAC 头部：目标 MAC + 源 MAC + 类型 0800【IPv4】/80DD【IPv6】\n\n- MAC 帧的格式\n  - （带宽为 $\\mathrm{10Mbit/s}$ 的）以太网 V2：\n    $$\n    6 + 6 + 2 + (46 \\sim 1500) + 4 = (64 \\sim 1518) 字节\n    $$\n    其中 $\\mathrm{64Byte = \\dfrac{51.2 \\mu s \\times 10Mbit/s}{8bit/Byte}}$，减去 18 字节的首部和尾部后，得到数据部分的最小长度 46 字节。\n\n100BASE-T 以太网：\n\n- 使用双绞线（T），带宽为 100Mbit/s。\n- 标准是 IEEE 802.3u，半双工时使用 CSMA/CD 协议，全双工时不使用。\n- 争用期为 5.12 μs，帧最小间隔 0.96 μs，是 10 Mbit/s 以太网的十分之一。\n\n### 网络层\n\n> IPv4 分类编址\n\n4 个字节。\n\n- A 类地址：0 + 7 位网络号 + 3 字节主机号，首字节 0 到 127\n- B 类地址：10 + 14 位网络号 + 2 字节主机号，首字节 128 到 191\n- C 类地址：110 + 21 位网络号 + 1 字节主机号，首字节 192 到 223\n\n主机号全 1 是广播地址，全 0 是该子网。\n\n私有地址：用于局域网（LAN）内部，不可直接在互联网上路由。\n\n- A 类：10.0.0.0 到 10.255.255.255\n- B 类：172.16.0.0 到 172.31.255.255\n- C 类：192.168.0.0 到 192.168.255.255\n\n> 无分类编址 CIDR\n\n子网掩码：用于标记用 IP 地址前面的几位来表示网络地址。\n\n子网掩码类似 `255.248.0.0` （`11111111 11111000 00000000 00000000`），即用前面 13 位表示网络地址，后面的位表示主机地址。记作 `IP地址/13`。\n\n### 计算\n\n信道长度、带宽和信噪比会影响数据在信道中传输的速率，而信号传播速度（电磁波在介质中的传播速度）不会。\n\n信噪比越大，接收方接收到的信息失真越少。两种表示方式：\n\n- $\\dfrac{S}{N} = \\dfrac{信号平均功率}{噪声平均功率} = 10^{\\mathrm{dB}/10}$\n- $\\mathrm{dB} = 10 \\lg\\dfrac{S}{N}$\n\n计算传输速率时，取奈氏准则和香农公式的结果小的。\n\nKibi：内存、存储容量，KiB = KB = 1024B\n\nKilo：网络带宽，K = 1000，国际单位制的词头\n\n$\\mathrm{bit/s}$\n\n- 速率\n- 吞吐量：指实际速率，进量 + 出量。有多条链路时，吞吐量由瓶颈链路决定。\n- 某信道的最高速率：时域上的带宽\n- 有效数据（速）率：$\\mathrm{\\dfrac{数据长度}{发送时间+RTT}}$\n\n$\\mathrm{Hz}$\n\n频域上的带宽 W：信号频率范围的宽度\n\n秒\n\n- 发送时延：网卡发送数据的时间，与信道长度无关。$\\mathrm{\\dfrac{bit}{bit/s}} = \\dfrac{数据长度}{发送速率}$\n- 传播时延：电磁波在网线或空气中传播的时间。与信道长度有关。$\\mathrm{\\dfrac{m}{m/s} = \\dfrac{信道长度}{信号传播速率}}$\n- 处理时延：主机或路由器收到分组后，对分组进行处理的时间。\n- 排队时延：分组在路由器输入队列和输出队列里排队的时间。\n- ……->输出排队->发送->传播->输入排队->处理->输出排队……\n- RTT：往返时间（Round-Trip Time）\n\n这里忽略了在接收和发送之间的排队时间和处理时间。\n\n{% mermaid gantt %}\ntitle RTT（甘特图）\ndateFormat s\naxisFormat %S\n\n    section RTT\n    RTT :3,17s\n\n    section A\n    发送           :0,3s\n    接收    :17,3s\n    ……    :20,4s\n\n    section 传播\n    从A到B传播    :1,8s\n    从B到A传播    :11,8s\n\n    section B\n    接收      :7,3s\n    发送    :10,3s\n\n{% endmermaid %}\n\nbit\n\n时延带宽积：$\\mathrm{s \\times bit/s = 传播时延 \\times 带宽}$\n\n已经从发送端发出，但尚未到达接收端的比特数。又叫以比特为单位的链路长度。\n\nm/bit\n\n每比特宽度：每个比特在信道中占据的长度。\n\n$$\n\\begin{aligned}\n&\\mathrm{m/bit = \\dfrac{m}{bit} = \\dfrac{信道长}{比特数}} \\\\\n&\\mathrm{m/bit = \\dfrac{m/s}{bit/s} = \\dfrac{信道传播速率}{信道当前带宽}}\n\\end{aligned}\n$$\n\n其他\n\n利用率：$网络利用率 = 1 - \\dfrac{空闲时延}{当前时延}$\n\n利用率越高，当前时延越大（堵车）。\n\n> 码元\n\n用来表示码的单个元。类比信号，码就是波形，码元就是在发送和解读波形时，可以分辨的最小单位波形。码元种类数是信号的状态数 $n = 2^x$\n\n- 码元对应的比特数 $x = \\log_2(n)$\n- 当 $0 < x < 1$时，一个比特由多个码元表示\n\n> 比特率和波特\n\n$\\mathrm{bit/s} = 2Wx = 2W\\log_2(n)$\n\n符号速率（码元每秒）也叫波特 Baud\n\n> 奈奎斯特准则\n\n无噪声低通信道中，保证接收方接收符号不出错时的速率上限为 2W x 码元数，W 为频域带宽 Hz，单位为波特。\n\n> 香农公式\n\n速率是有极限的，但要信息传输速率低于极限速率，就一定能找到某种方法实现无差错的传输。\n\n香农—哈特莱容量定理，考虑到了信道有噪声：\n\n$$\n\\begin{aligned}\n信道极限速率 & = \\mathrm{bit/s = Hz \\times bit} \\\\\n& = W \\log_2(1 + \\dfrac{S}{N}) \\\\\n\\end{aligned}\n$$\n\n> 正交振幅调制（QAM）\n\n$$\n\\begin{aligned}\n调制后的信号 & = 振幅 \\times 载波(相位) \\\\\ny & = A\\sin(\\omega x + \\phi) \\\\\n\\end{aligned}\n$$\n\n用不同的**振幅**和**相位**排列组合，来表示（承载）不同的基带信号，比只调幅/只调频/只调相的信息密度高。\n\n使用 $x$ 个振幅和 $y$ 个相位的 QAM 时，一个码元对应的比特数是 $\\log _2(xy)$ 向上取整。\n\n> 信道复用\n\n频分复用（FDM）：Frequency Division Multiplexing，把一个大频带划分成若干个小频带，把不同的信号分别调制到这些小频带里。\n\n```\n^频率\n|\n|-----------------\n|C信号\n|-----------------\n|B信号\n|-----------------\n|A信号\n|-----------------\n|\n|----------------------->时间\n```\n\n时分复用（TDM）：把时间分割成一个个 TDM 帧，每帧内分为若干个时隙，每个时隙内分别传送不同的信号。相当于 CPU 单核进程并发。每个 TDM 帧内保证每组信号都传了，就是没传也要保留留给它的空时隙。这造成信道利用率不高。\n\n```\n^频率\n|\n|--------------------------\n|A|B|C|A|B|C| |B|C|A| |C|\n|--------------------------\n|     |     |     |     |\n|TDM帧|TDM帧|TDM帧|TDM帧|\n|------------------------------>时间\n```\n\n统计时分复用（STDM）：在每个 STDM 帧内，时隙数量小于信号种类数量。为每组信号动态分配时隙，比如 B 信号断了可以先不传它。\n\n**有四组信号 ABCD：**\n\n```\n ^信号\n |\n |--------------------------\nD| d | d | d | d |\n |--------------------------\nC|   | c | c | c |\n |--------------------------\nB| b | b |   |   |\n |--------------------------\nA| a |   | a | a |\n |------------------------------>时间\n```\n\n**STDM：**\n\n```\n^频率\n|\n|--------------------------\n|a|b|d|b|c|d|a|d|c|c|d|a|\n|--------------------------\n|     |     |     |     |\n|STDMf|STDMf|STDMf|STDMf|\n|------------------------------>时间\n```\n\n波分复用（WDM）：就是光的频分复用，但是用波长表示。\n\n码分复用（CDM）：CDMA 通过为每个用户分配一个独特的扩频码来实现信号的分离，这些扩频码之间是正交的。\n\n- 编码：某用户的码元内积扩频码，与其他用户的叠加成混合信号。\n- 解码：混合信号内积用户的扩频码，得到一个码元。\n\n## 计算机组成原理\n\n注意：这里的知识是未经验证的，不一定正确。\n\n### 计算机体系概论\n\n> “存储程序”特点？\n\n早期计算机通过硬件开关或打孔纸带输入程序，程序和数据是分离的。老冯提出了把毒和鸡汤存储在一起的思想：把程序和数据存在一起，存在存储器里。\n\n> 计算机的五个子系统？\n\n我们为什么要造计算机，要算个什么东西。所以输入、输出、算术逻辑运算肯定是有的。怎么算，你在草稿纸上算题，得有你这个人控制，得有中间结果。所以控制和存储是有的。\n\n> 主机？\n\n主机就是你引脚直接装在主板上的东西，粗略地理解为 CPU + 内存。显示器和鼠标键盘属于输入输出系统，用线连在机箱外面。剩下三个系统就是主机：控制单元和算术逻辑单元 ALU 合称中央处理单元 CPU；存储系统包括硬盘、内存、cache、寄存器，这四个是体积越小、容量越小、价格越贵。但是：硬盘不属于主存，不算在主机里面，它和输入输出系统合称外部设备，即“用户与计算机通信的界面”。\n\n> ALU？\n\n即算术逻辑单元 Arithmetic and Logic Unit\n\n> 指令和数据？\n\n指令和数据都是二进制的，在形式上无法区分，由控制器判断谁是指令，谁是数据。判断的依据是：当前处于哪个访问阶段，是处于取指周期还是执行周期。当程序被启动执行后，其指令和数据从外存被装进内存。\n\n> 取指执行过程？\n\n你上司给你发了一张纸，这张纸就是内存。纸上写了一些暗号：午时三刻，当街问斩。这个暗号就是指令，问斩是操作码，当街是地址码。你收到这张纸后，把指令从纸上取到你脑子缓冲区里，你脑子缓冲区就是指令寄存器，你至少得反应一会，这个反应的过程就是译码，\n\n> K？\n\n按具体上下文，单独一个 K 可指 KB，即 2 的 10 次方个字节（Byte）\n\n> 汇编语言？\n\n汇编语言与具体的机器结构（指令集架构）有关，其源程序不能直接在机器上执行，还得过一道汇编器。\n\n> 机器语言？\n\n计算机硬件可以直接执行的是机器语言程序，一系列 0 和 1。不是硬件描述语言，硬件描述语言是写电路的，用这种语言描述电路结构。汇编语言还要过一遍汇编器。\n\n> 机器字长？\n\n机器字长是二进制的位数，是 ALU 和通用寄存器的宽度。指令寄存器和浮点寄存器的宽度可能与其不等。\n\n> 面向量纲/单位计算？\n\nCPI 的单位是：个(时钟周期)每个(指令)\n\n时钟周期的量纲是：时间。这一个时钟周期有它的具体时间长度。\n\n主频的量纲是：频率，时间的倒数。一秒钟被分割成了有多少个时钟周期。\n\nMIPS 的单位是：(百万)个(指令)每个(秒)\n\n这里的 M 是 10 的 6 次方，主频里的 G 是 10 的 9 次方，往上指数+3 为 T P E B\n\n做计算题，先搞明白指令总数、时钟周期总数。指令总数乘上 CPI 等于时钟周期总数。时间就是时钟周期总数乘上每个时钟周期所占的时间长度。\n\n在纸上画图：一个秒被切割成了一系列时钟周期，每个时钟周期执行一条指令。直接设未知数，列方程。\n\n### 运算方法和运算器\n\n幺二八六四 三二幺六 八四二幺 五二五幺二五 零六二五\n\n在发草稿纸之后，直接把 0 到 F 全写下来（想当年笔者可以把元素周期表画下来（除了镧系和锕系），包括一直到气奥的各个元素名、绝大部分元素符号以及常见的相对原子质量，还有 38324 14122 横批 4546 之类的。但是现在不行了。还有 2^31 - 1 = 2147483647，这是四字节 int 类型的最大值，这个数字最早在《植物大战僵尸》的修改器里见到，如果你无尽模式或者自选关过了这一波，它的程序会崩掉）\n\n> 原码反码补码移码？\n\n正整数的原码反码补码都是它的二进制按照某一个特定的位数表示，前面补零。\n\n负整数的原码，最高位为符号位 1，后面为它的二进制形式按照某一个特定的位数表示，前面补零。\n\n负整数的反码，为原码除符号位的所有位按位取反后的结果。\n\n负整数的补码，为其反码 + 1，按位截断。\n\n移码 = 【真值 + （最高位所代表的 2 的次方值 - 1）】的无符号整数表示\n\n如八位下 5 的移码是 `5 + 2^(8-1)` = `5 + 127` = `4 + 128` = `1000 0100`\n\n> 八位下，零的表示形式？\n\n正零的原码：00000000\n\n负零的原码：10000000\n\n正零的反码：00000000\n\n负零的反码：11111111\n\n正零/负零的补码：00000000\n\n> -26？\n\n26 = 16 + 8 + 2\n\n= 10000 + 1000 + 10\n\n= 00011010\n\n-26 = 10011010（原）= 11100101（反）= 11100110（补）= E6H\n\n> BCD 码？\n\n用二进制编码的十进制数(Binary-Coded Decimal)。对于 8421 码，是把十进制数的每一个位转换成一个四位的二进制数。\n\n如(1145)\\_10 = (0001 0001 0100 0101)\\_BCD\n\n> 进制转换？\n\n分向十进制转、从十进制向外转、二八十六互转。\n\n向十进制转：各个位的十进制值乘上以原进制为底、该位与小数点的相对位置为指数的幂，再相加。其中小数点左边一位的相对位置为零，小数点右边一位的相对位置为负一，以此类推。\n\n从十进制向外转：除 k 取余法+乘 k 取整法。整数部分用短除法列竖式，用新进制的基数去除，除到商为零为止，之前的所有余数从下向上排列为新数的整数部分；小数部分乘上新进制的基数，取积的整数部分为新数的小数部分，积的小数部分继续与基数乘，直到积的小数部分为零或者出现循环节为止。\n\n对于一个 1000 以内的十进制数转成二进制，除 k 取余法还是太教科书了，你可以直接把它拆分成 2 的幂相加，因为加减法不容易出错。\n\n二八十六互转：四位二进制位与一位十六进制位在[0,16)这个整数范围内一一对应。小数点前后的部分直接按片段替换。三位二进制位与一位八进制位在[0,8)这个整数范围内一一对应。小数点前后的部分直接按片段替换。八与十六互转时，以二作为桥梁。\n\n> 浮点数的编码方式？\n\n对于 32 位浮点数 float，即单精度浮点数，最高位为符号位，后 8 位为阶码，再后 23 位为尾数。\n\n阶码决定范围，尾数决定精度。\n\n浮点数转真值：把 1.与 23 位尾数缝合起来，转成十进制；把阶码作为移码求真值，作为 2 的指数；两者相乘，带上符号位。\n\n普通数转浮点数：把**绝对值**先转成二进制，小数点挪到第一个 1 的后面，为符号(1.xxx)乘 2^指数；符号放最高位；指数转为移码放后 8 位；小数点后的部分取“0 舍 1 入”的 23 位。\n\n（意思就是：1.7 和 -1.7 只差一个符号位）\n\n对于 64 位双精度浮点数 double：阶码变成了 11 位\n\n> float 的五种形式？\n\n32 位二进制浮点数，她的位数是有限的，不可能双射无限多（阿列夫一）的（实）数。\n\n- 阶码全零，尾数全零：正/负机器零\n- 阶码全零，尾数不全零：非规格化数\n- 阶码全 1，尾数全零：正/负无穷大\n- 阶码全 1，尾数不全零：不是数（NaN）\n\n她的阶码有 8 位，当不是全零或全一时，我们称她为规格化的。把阶码移码的身份转回正经数后，指数范围为[-126,+127]，不考虑尾数，对应真值约 2^(-126) 到 2^127，又约 10^(-38) 到 10^38。\n\n浮点数原码运算时，判定结果为规格化数的条件是：尾数的最高位为 1\n\n> 奇偶校验？\n\n看 1 的个数\n\n> 串行运算器？\n\n从低位到高位逐位运算\n\n> 加法器采用先行进位的目的？\n\n加速传递进位信号（没明白）\n\n> 采用双符号位的定点补码运算器，何时结果溢出？\n\n双符号位不同（没明白）\n\n### 存储系统\n\n> 存取周期？\n\n存储器进行连续读和写操作所允许的最短时间间隔（没明白）\n\n> 存储器采用分级存储的目的？\n\n钱、容量、速度三者不能兼得。\n\n> 寻址范围？\n\n1. 内存能存储多少位二进制数\n2. 多少位二进制数作为一个地址\n3. 两者相除，结果无单位\n\n> 已被淘汰的存储器？\n\n磁芯存储器\n\n> 主存？\n\n主存由 RAM(Random Access Memory，随机存取存储器)和 ROM(只读存储器，Read-Only Memory)组成。同一个存储器里，每个存储单元宽度相同\n\n> PROM? EPROM?\n\n前者是可编程(P)的 ROM，后者是可擦除的 PROM。\n\nPROM 不一定可被改写。EPROM 可被改写多次，但不能作 RAM\n\nU 盘、TF 卡属于闪存，闪存属于 EPROM\n\n> SRAM? DRAM?\n\n一静一动，一快一慢。\n\n前者用于 CPU 缓存。后者用于主存、需要定时刷新、行列地址引脚复用(RAS 行地址选通信号引脚、CAS 列地址选通信号引脚)\n\n> 磁盘和磁带？\n\n存取时间与存取单元的物理位置有关。磁带串行存取，磁盘部分串行存取。\n\n> 存储芯片的地址线数据线？\n\n存储容量=地址数\\*位宽\n\n数据线或引脚数目=位宽\n\nSRAM 地址线或引脚数目=log_2(地址数)，与位宽无关\n\nDRAM 地址线或引脚数目=0.5log_2(地址数)，与位宽无关\n\n> MAR? MDR?\n\n存储器地址寄存器、存储器数据寄存器\n\nMAR 宽度=log_2(地址数)\n\nMDR 宽度至少为每次读写操作最多存取的位数\n\n> 某一 RAM 芯片其容量是 512\\*8 位，除电源和接地端外该芯片引线的最少数目是多少？\n\n数据线 8+地址线 log2(512)+片选线 1+读写线 1=19\n\n> 双端口存储器？\n\n左右端口地址码相同时，发生读写冲突\n\n> 多体交叉存储器解决的问题？\n\n提高主存的数据传输率\n\n> cache 的功能全部由谁实现？\n\n硬件\n\n> 与 cache 命中率无关的是？\n\n主存的存取时间\n\n> cache 的地址映射？\n\n主存 到 cache\n\n多对一：直接映射\n\n多对多：全相联映射\n\n组相联映射：\n\n1. 把主存和 cache 都分为若干组\n2. 对于主存的某一组，其块数=cache 组数。其所有块分配给 cache 的各个组，对于每一块，其被分到的 cache 组固定、不一定分配到 cache 组的哪一行\n\n> 某计算机的 Cache 共有 16 行，采用 2 路-组相联映射方式(即每组包括 2 行)。存储器按字节编址，每个主存块大小为 32 字节。主存 135 号单元所在主存块应装入的 cache 组号？\n\n简记： cache 组号 = 主存单元号 // 主存块字节数 % cache 组数\n\ncache 分 8 组，每组两行。则主存分若干组，每组 8 块。\n\ncache 组号 = 主存块号 % 主存每组块数\n\n= 单元号 // 字节数 % 主存每组块数\n\n= 135 // 32 % 8\n\n= 4\n\n简记是什么意思？因为笔者写出来的东西都是笔者不会的，至少是在写出来之前的那一段时间是不会的，如果笔者在写出来之后会了，那么就不会使用“简记”这两个字了。简记的意思是：我对这个知识点没搞明白，也不想搞明白，所以按感性提了一个公式出来，这个公式根本记不住，没有内化到自身。“简记”在笔者的潜意识里有两层麻痹自我的意思：简的意思是：我没搞懂；记的意思是：我记不住。\n\n> cache？\n\ncache 是易失型存储器。当程序具有较好的访问局部性时，能更好地发挥 cache 的作用。\n\n> 闪速存储器？\n\n闪速存储器是一种高密度，非易失的读/写半导体存储器\n\n> 下列 cache 替换算法中，速度最快的是？命中率最高的是？LFU LRU 随机替换\n\n随机替换 LRU\n\n### 指令系统\n\n> 程序控制类指令的功能？\n\n改变程序执行的顺序\n\n> RISC？\n\n指令长度固定，减少指令数，增加寄存器数\n\n> 一地址格式的指令？\n\n一地址格式的算术运算指令，另一个操作数隐含在累加器里\n\n一地址格式的指令，可能有一个操作数，也可能有两个操作数\n\n> 怎么区分寄存器中的值是地址还是数据？\n\n指令操作码或寻址方式位\n\n> 一条指令中，操作数的寻址方式？\n\n看指令地址码是什么：\n\n- 操作数所在的存储单元：寄存器间接寻址\n- 操作数所在的存储单元地址：直接寻址\n- 操作数所在的寄存器编号：寄存器直接寻址\n- 操作数本身：立即寻址\n\n### CPU 性能指标\n\n$T$ 时钟周期：计算机中最短的时间。类比：一面有秒针的钟，最短时间为 1 秒。类比：普朗克时间。类比：“一周”的“最短时间”为“天”\n\n$f$ 主频/时钟频率：一秒钟之内，包含多少个时钟周期。对于一个可以精确到 0.01 秒的秒表，其“主频”为 100Hz\n\n$N_\\mathrm{C}$ 时钟周期数：天数、Num of Cycle\n\n$I_\\mathrm{N}$ 指令数：任务数、Instruction Num\n\n$\\mathrm{CPI}$ (Cycle Per Instruction)：每条指令平均时钟周期数。完成每个任务的平均天数。你的时钟周期为“天”，有 100 个任务(指令)要完成，完成它们共花了 200 天。你的 CPI 为 2 天/任务\n\n$\\mathrm{CPI} \\times I_\\mathrm{N} = N_\\mathrm{C}$\n\n$\\mathrm{MIPS}$：百万条指令数/秒\n\n$\\mathrm{FLOPS}$：浮点操作数/秒\n\n$t_\\mathrm{CPU}$ 执行时间：执行一段程序(若干条指令)所花费时间。\n\n$$\n\\begin{aligned}\n= & 指令数 \\times \\mathrm{CPI} \\times  时钟周期\\\\\n= & 任务数 \\times 每个任务所花天数 \\times 一天有多少秒\\\\\n= & 执行该程序所经过时钟周期数 \\times 时钟周期\\\\\n= & 花了多少天 \\times 一天有多少秒\\\\\n\\end{aligned}\n$$\n\n### 使用一个字节记录整数\n\n计算机存储的数据由一系列 `0` 和 `1` 表示，每个 `0` 或 `1` 称为一个二进制位，八个二进制位组成一个字节。一个字节的范围：\n\n`0000 0000 - 1111 1111`\n\n使用一个字节，可以表示多少种状态？对每一位来说，只有两种可能的状态：`0` 或 `1`。一共有八个不同的位，所以可以表示 $2^8=256$ 种状态。\n\n把 `0000 0000 - 1111 1111` 转换为十进制数是 $0$ 到 $255$，有 $256$ 个数。它当然可以通过进制转换，表示 $0$ 到 $255$ 的整数（也可以叫“无符号整数”）。\n\n我们想表示负数，可以这样规定：只把后面七个二进制位转换成十进制，而用第一个二进制位表示符号（其中 `0` 表示正号，`1` 表示负号），即：\n\n- `0 0000000 - 0 1111111` 表示 $+0$ 到 $+127$\n- `1 0000000 - 1 1111111` 表示 $-0$ 到 $-127$\n\n这被称为**原码**表示法。\n\n我们想用原码计算 $4 - 7$，即 $4 + (-7)$：\n\n- `0000 0100` $-$ `0000 0111` $=$ `1111 1101`，可以看到，结果不是 $-3$\n- `0000 0100` $+$ `1000 0111` $=$ `1000 1011`，可以看到，结果不是 $-3$\n\n因为有符号位干扰，但我们想**让符号位也参与计算**的同时，加和减的结果相同且满足定义。还是用符号位表示正负，后七个位表示绝对值。\n\n有一台钟（12 个数字的）慢了 3 小时，此时 `+3` 和 `-9` 是等价的。它的“循环周期”是 `12`\n\n用后七个位表示绝对值，“循环周期”就是 `128`。此时，`-7` 和 `+121` 等价\n\n采用**补码**表示法：\n\n- `0 0000000 - 0 1111111` 表示 $0$ 到 $127$\n- `1 0000000 - 1 1111111` 表示 $-128$ 到 $-1$\n\n此时计算 $4 - 7$：\n\n- `0000 0100` $-$ `0000 0111` $=$ `1111 1101`\n- `0000 0100` $+$ `1111 1001` $=$ `1111 1101`\n\n可以看到：\n\n- 正数的补码与原码相同\n- 负数的补码：\n  - 总是以“全 $1$”来表示 $-1$，然后依次往前推\n  - 原码按位取反（除了符号位）后再加一\n  - 原码从右往左第一个 $1$ 之前的位（除了符号位）按位取反\n\n### 逐位进位加法器的实现\n\n1. 用两个非门、两个与门、一个或门实现异或门\n\n```py\ndef xor_gate(a: bool, b: bool):\n    return (a and not b) or (not a and b)\n\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        print(f\"{int(a)} xor {int(b)} = {int(xor_gate(a,b))}\")\n```\n\n2. 用一个异或门、一个与门实现半加器\n\n两个一位的二进制数相加，和一位，进一位：\n\n- 0 + 0 和 0 进 0\n- 0 + 1 和 1 进 0\n- 1 + 0 和 1 进 0\n- 1 + 1 和 0 进 1\n\n和的位由异或得来，进的位由与得来：\n\n```py\ndef half_adder(a: bool, b: bool):\n    sum_ = xor_gate(a, b)\n    carry = a and b\n    return sum_, carry\n\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        s, c = half_adder(a, b)\n        print(f\"{int(a)} + {int(b)} 进 {int(c)} 和 {int(s)}\")\n```\n\n3. 用两个半加器、一个或门实现全加器\n\n两个本位的数相加后，再加上低位进的位。和一位，进一位：\n\n```py\ndef full_adder(a: bool, b: bool, carry_in: bool):\n    s1, c1 = half_adder(a, b)\n    s2, c2 = half_adder(s1, carry_in)\n    carry_out = c1 or c2\n    return s2, carry_out\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        for c in truth:\n            s, c_out = full_adder(a, b, c)\n            print(f\"{int(a)} + {int(b)} + {int(c)} 进 {int(c_out)} 和 {int(s)}\")\n```\n\n4. 四个全加器串联实现四位加法器\n\n```py\nfrom itertools import product\n\ntruth = (True, False)\nnumbers = tuple(product(truth, repeat=4))\n\n\ndef adder(a: tuple[bool, bool, bool, bool], b: tuple[bool, bool, bool, bool]):\n    s1, c1 = full_adder(a[-1], b[-1], False)\n    s2, c2 = full_adder(a[-2], b[-2], c1)\n    s3, c3 = full_adder(a[-3], b[-3], c2)\n    s4, c4 = full_adder(a[-4], b[-4], c3)\n    return c4, s4, s3, s2, s1\n\n\ndef to_number(a: tuple[bool, ...]):\n    binary_string = \"\".join(str(int(elem)) for elem in a)\n    decimal_number = int(binary_string, 2)\n    return decimal_number\n\n\nfor a in numbers:\n    for b in numbers:\n        result = adder(a, b)\n        print(f\"{to_number(a)} + {to_number(b)} = {to_number(result)}\")\n```\n\n### 普通十进制数转单精度浮点数\n\n交叉引用[运算方法和运算器](#运算方法和运算器)\n\n- 在 IEEE 754 标准下\n\n单精度浮点数，即 32 位二进制浮点数，包含：\n\n一位符号位 + 八位指数位 + 二十三位尾数位\n\n下面的例子中，没有带尾缀的都是十进制，带尾缀 $\\mathrm{B}$ 的是二进制\n\n> 例一：以 $0.1$ 为例\n\n1. 把十进制转换为二进制\n   $0.1 = 0.0\\dot{0}01\\dot{1}... \\mathrm{B}$\n2. 用以 $2$ 为基数的科学计数法表示，并保证【尾数的小数点前是 $1 \\mathrm{B}$】\n   $= 1.\\dot{1}00\\dot{1}...\\mathrm{B} \\times (2^{-4})$\n   可以看到指数是 $-4$\n3. 计算指数位（又叫阶码），用指数加上偏移量 $(2^{e-1}-1)$\n\n   这里 $e$ 等于【用于表示指数位的位数】 $8$，所以偏移量为 $127$\n\n   则阶码为 $-4 + 127 = 123$\n\n   阶码的二进制为 `0111 1011`，注意 _阶码为无符号整数_\n\n4. 取科学计数法的【小数点后二十三位】作为【尾数位】，因为是无限的，所以要舍去一部分\n\n   它的前二十位是：`1001 1001 1001 1001 1001`\n\n   二十一至二十八位是：`1001 1001`\n\n   所以二十一至二十三位，要么取 `100`，要么取 `101`。\n\n   第二十四位是 `1`，0 舍 1 入，所以取 `101`\n\n5. 把符号位连同阶码、尾数位缝合起来\n\n   `0 | 0111 1011 | 1001 1001 1001 1001 1001 101`\n\n> 例二：以 $-12 = 1.5 \\times (2^{3})$ 为例：\n\n1. 把十进制转换为二进制\n\n   $12  = 1100 \\mathrm{B}$\n\n2. 用以 $2$ 为基数的科学计数法表示，并保证【尾数的小数点前是 $1$】\n\n   $= 1.1\\mathrm{B} \\times (2^3)$\n\n   可以看到指数是 $3$\n\n3. 计算指数位（又叫阶码），用指数加上偏移量 $(2^{e-1}-1)$\n\n   这里 $e$ 等于【用于表示指数位的位数】 $8$，所以偏移量为 $127$\n\n   则阶码为 $3 + 127 = 130$\n\n   阶码的二进制为 `1000 0010`，注意 _阶码为无符号整数_\n\n4. 取科学计数法的【小数点后二十三位】作为【尾数位】，因为是有限的，所以后面直接补零\n\n   小数点后二十三位是：`1000 0000 0000 0000 000`\n\n5. 把符号位连同阶码、尾数位缝合起来\n\n   `1 | 1000 0010 | 1000 0000 0000 0000 000`\n\n如何验证：\n\n- [在线转换](https://baseconvert.com/ieee-754-floating-point)\n- [Wikipedia](https://en.wikipedia.org/wiki/IEEE_754) | [维基百科](https://zh.wikipedia.org/wiki/IEEE_754)\n- 获取国际标准文件。IEEE 754 标准是电气与电子工程师协会（Institute of Electrical and Electronics Engineers）制定的关于浮点数表示和运算的标准。最新标准是 [IEEE 754-2019](https://standards.ieee.org/ieee/754/6210/)，对应国际标准 [ISO/IEC 60559:2020](https://www.iso.org/cms/%20render/live/en/sites/isoorg/contents/data/standard/08/09/80985.html)，预计下一次在 2028 年修订。http://snti.ru/ 这个网站分享了各种国际标准文件的磁力链接，但是可以免费下载的不全，IEC 的只有 61xxx。据说可以给站长发邮件要 `popov_al@perm.ru`，每个文件一刀乐。在 ISO 官网上下载需要 187 瑞士法郎，合 1000 多人民币。\n\n用 GDB：\n\n```c\n#include <stdio.h>\n\nint main()\n{\n    float num = 1.7;\n    printf(\"\");\n}\n```\n\n在第六行打上断点，VSCode 开调试，在调试控制台里：\n\n```sh\n-exec x/4tb &num\n```\n\n- `-exec` 执行命令\n- `x` 查看内存\n- `4` 输出 4 个单元\n  - 不写默认为 `1`\n- `t` 以二进制形式输出\n  - `x` 十六进制\n- `b` 以【一个字节】为一个单元\n  - `h` 两个字节\n  - `w` 四个字节\n  - `g` 八个字节\n- `&`取变量地址\n\n输出结果：\n\n`0x61fe1c: 10011010 10011001 11011001 00111111`\n\n从右往左排列后：\n\n`00111111 11011001 10011001 10011010`\n\n`0 01111111 10110011001100110011010`\n\n才是`float 1.7`的二进制表示。\n\n还可以直接用\n\n```sh\n-exec x/tw &num\n```\n\n输出四个字节，结果：\n\n`0x61fe1c: 00111111110110011001100110011010`\n\n## Vue 实现点击 Echarts 图表的一部分后更新另一个图表\n\n环境：\n\n```json\n{\n  \"echarts\": \"^5.5.1\",\n  \"vue\": \"^3.5.12\",\n  \"vue-echarts\": \"^7.0.3\"\n}\n```\n\n[import code generator](https://vue-echarts.dev/#codegen)\n\n组合式 API。一个 View 的父组件里面有两个 Echarts 图表的子组件 A 和 B。\n\n问题：图表的数据从何而来：\n\n1. 在清洗和导出数据的时候直接导出为 Echarts 所需要的 JSON 格式的文件\n2. 准备图表的 option 的 JSON 格式为一个计算属性，把 data 字段设置为 Ref 对象的 value\n3. 给 v-chart 标签的 :option 绑定这个计算属性\n4. 写一个更新图表的函数，fetch 一个文件，转换成图表需要的格式，赋值给那个 Ref.value\n\n点击子组件图表后的事件和参数如何传递给父组件：\n\n1. 在子组件里定义一个发射源 const emit = defineEmits([\"eventName\"]);\n2. 给子组件 v-chart 标签的 @click 绑定一个方法\n3. 该方法带一个参数 param 为图表点击后的参数，在该方法里发射事件 emit(\"eventName\", param);\n4. 在父组件里引用子组件标签处的 @event-name 绑定一个带参数 param 的方法，用于接收子组件发射的事件和参数\n\n父组件如何向子组件传消息：\n\n1. 在子组件里定义它的属性\n\n```js\nconst props = defineProps({\n  propName: {\n    type: String,\n    default: \"\",\n  },\n});\n```\n\n2. 在父组件里引用子组件标签处的 :prop-name 绑定一个 Ref 对象，更新 Ref 对象\n\n如何实现点击图表 A 的一部分后，更新图表 B：\n\n1. 把点击图表 A 后的事件和参数 emit 给父组件\n2. 父组件在 A 组件标签 @ 处绑定的方法处接收，并更新图表 B 标签的 :prop-name 的 Ref\n3. 在 B 组件里监视它 props 的变化，调用更新图表的方法\n\n```js\nwatch(\n  () => props.propName,\n  async (newVal) => {\n    console.log(\"propName updated:\", newVal);\n    await updateChartData(newVal);\n  },\n  { immediate: true } //确保在组件初始化时也执行一次回调函数\n);\n```\n\n5. 在更新图表的方法里，根据接收到的参数，fetch 不同的文件，赋给 data 的 Ref.value\n\n## Word 文档模板留存\n\n1. 对称页边距，留出一点装订距离。上下 2.5 cm，内 3 cm，外 2.5 cm\n2. 第一面是封面，第二面是目录。页码从第三面开始编 1，奇数页在右下角，偶数页在左下角\n3. 所有中英文标题都是黑体加粗，格式都是 `1.1.标题`。一级标题三号，二级标题四号，三级标题小四。不缩进\n4. 所有正文中文都是宋体，西文都是 Times New Roman。字号都是小四。首行缩进两字符，左对齐\n5. 所有标题和正文段落都是段前段后 0，行距 1.5 倍\n6. 大部分代码用截图，把 VSCode 的背景调到纯白\n7. 把 VSCode 编辑器的字体调为中文宋体，西文 Consolas\n8. 单独定义一个图片样式，应用于段落的阴影边框，宽度 0.75 磅\n9. 小部分短的代码（Shell 命令之类的）单独定义一个代码样式继承自正文，使用与图片同款的边框，首行缩进 2 字符\n10. 参考文献样式继承自“列表段落”，悬挂缩进 2 字符，左对齐，允许西文在单词中间换行\n\n## 解决 VSCode 集成终端按键与快捷键冲突\n\n`Ctrl + Shift + P` 打开命令面板，搜键盘快捷方式，搜冲突的按键，右键更改 When 表达式，加上 `&& !terminalFocus`\n\n## 用 browser-sync 实现在文件内容改变后立即刷新页面\n\n起因是：不管是直接打开 html 文件，还是用`python -m http.server 8000 --bind 127.0.0.1`，在修改保存 html 文件后浏览器都不能立马刷新。\n\n```sh\nnpm install browser-sync\n```\n\n```sh\nnpx browser-sync start --server --files \".\"\n```\n\n`--files` 后指定要监视的文件。\n\n`.` 表示监视当前目录以及子目录下的所有文件。\n\n可以改成 `*.html`，`public/*.*` 等。\n\nhtml 文件里至少得有一对`<body>`标签，要么没法自动刷新。\n\n## Python\n\n[本体](https://docs.python.org/zh-cn/3/tutorial/whatnow.html)\n| [Anaconda](https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/)\n| [PyPI](https://pypi.org/)\n\n### Anaconda\n\n不要把包都安到 base 环境里。\n\n```sh\nconda env export > environment.yml # 导出当前环境依赖\nconda env create -f environment.yml # 重建环境\nconda create -n xxx\nconda env remove -n xxx\nconda activate xxx\nconda deactivate\nconda list\nconda list numpy\npip list\npip show numpy\n```\n\n### 报菜名\n\nPython 的标准库有上百个。用 `import` 还是 `from ... import ...`，后面加不加 `as` ，以易读为主。因为代码是给人看的。\n\n使用 `from xxx import *` 类似于：你在搭积木的时候，闭着眼睛把一整个塑料袋的积木全倒出来，然后闭着眼睛摸一个、闭着眼睛摸一个。\n\n`import` 语句的顺序是：标准库、第三方库、自定义库。可通过 VSCode 插件 isort 解决，按 Ctrl + Shift + O 排序。\n\n在你的工程目录下面，使用 https://github.com/bndr/pipreqs 可以把你用到的所有第三方库写到依赖文件 `requirements.txt` 里。\n\n虽然 Python 的一个变量名可以赋多个类型，但在有必要的情况下，还是加上类型注解。这对 VSCode 的代码补全也有帮助：把鼠标移到一个变量名上边，如果你想要它是某一个类的对象，但是它显示为 `Any`，这时候你在它后面加 `.`，VSCode 没法给你列出它的方法。这时候你需要显式标注它的类型，比如 `foo: Bar`。或者 `assert isinstance(foo, Bar)`\n\n### 输出函数名和本地时间\n\n使用装饰器：\n\n```py\nimport datetime\n\n\ndef log(func):\n    def wrapper(*args, **kwargs):\n        print(f\"{func.__name__}，系统时间：{datetime.datetime.now()}\")\n        return func(*args, **kwargs)\n\n    return wrapper\n\n\n@log\ndef test(): ...\n\ntest()\n```\n\n上面是一种很笨的方法，我们可以用其自带的 logging 模块记录日志到文件：\n\n```py\nimport datetime\nimport logging\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"w\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\nlogging.info(...)\nlogging.warning(...)\nlogging.error(...)\n```\n\n日志有五个等级：DEBUG 调试诊断用的；INFO 确认正常运行；WARNING 是不影响正常运行的错误，如向数据库里插入一条已经存在的记录，然后忽略它；ERROR 是影响正常运行的错误，如数据库连接失败（但是你系统的其他功能可用）；CRITICAL 是你的系统的关键功能不可用（如果你的系统必须要用数据库）。\n\n### plt\n\n条形图和柱形图的区别是：前者是横着的，后者是竖着的。前者用 `plt.barh`，后者用 `plt.bar`\n\n中文字体：\n\n```py\nplt.rcParams[\"font.family\"] = \"SimHei\"\n```\n\n### 最小二乘法多项式拟合\n\n```py\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.array([48, 47, 54, 50, 73, 72, 62, 52, 47, 83, 70, 65, 48])\ny = np.array([0.42, 0.38, 0.66, 0.5, 0.99, 0.98, 0.89,\n             0.58, 0.38, 0.99, 0.98, 0.93, 0.42])\n\n# polynomial 多项式 fit 拟合\n# 第三个参数是多项式的次数，为大于等于零的整数\nz = np.polyfit(x, y, 2)\n\n# 这样一转换，可以以人可读的方式打印，可以在下面 call 它，把传参给 p 的数组转换为另一个数组\np = np.poly1d(z)\n\nprint(p)\n\n# 左闭右开的等差数列\nx2 = np.linspace(40, 100, 100)\n\n# 画散点图\nplt.scatter(x, y, color='red', label='Data Points')\n# 画曲线\nplt.plot(x2, p(x2), color='blue', label='Quadratic Curve')\n\n# xy轴标签、图题\nplt.xlabel('x')\nplt.ylabel('y')\nplt.title('Scatter plot with Quadratic Curve')\n# 图例\nplt.legend()\nplt.show()\n```\n\n### scipy.stats.某种分布.\n\n$$\n\\begin{aligned}\n\\mathrm{rvs(分布参数,size = 实验次数)} & = X\\\\\n离散型 \\mathrm{pmf}(分布参数,k = [x_1,x_2, ...]) &  = \\mathrm{P}(X = x) \\\\\n连续型 \\mathrm{pdf}(分布参数,x = [x_1,x_2, ...]) & = f_{X}(x) \\\\\n离散型 \\mathrm{cdf}(分布参数,k = [x_1,x_2, ...]) & = F_{X}(x) = \\mathrm{P}(X \\le x) \\\\\n连续型 \\mathrm{cdf}(分布参数,x = [x_1,x_2, ...]) & = F_{X}(x) = \\mathrm{P}(X \\le x) \\\\\n返回 \\mathrm{numpy.ndarray}\n\\end{aligned}\n$$\n\n### selenium\n\n```py\nimport json\n\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait\n\n\nclass SeleniumSpider:\n\n    def __init__(self):\n        # 使用本地的火狐浏览器\n        options = webdriver.FirefoxOptions()\n        options.binary_location = (\n            r\"D:\\Program Files\\Firefox Developer Edition\\firefox.exe\"\n        )\n        self.driver = webdriver.Firefox(options)\n        self.data: list[dict] = []  # 暂存爬取的数据\n\n    def wait_and_click(self, xpath: str):\n        \"\"\"\n        保证元素可以被点击，并点击\n        \"\"\"\n        WebDriverWait(self.driver, 20).until(\n            EC.all_of(\n                EC.element_to_be_clickable((By.XPATH, xpath)),\n                EC.visibility_of_element_located((By.XPATH, xpath)),\n            )\n        )\n        el = self.driver.find_element(By.XPATH, xpath)\n        print(xpath, el)\n        try:\n            el.click()\n        except:\n            webdriver.ActionChains(self.driver).move_to_element(el).click(el).perform()\n        return el\n\n    def save_to(self, file_name: str):\n        \"\"\"\n        写一个json文件\n        \"\"\"\n        try:\n            with open(file_name, mode=\"w+\", encoding=\"utf-8\") as f:\n                f.write(json.dumps(self.data, ensure_ascii=False, indent=2))\n        except Exception as e:\n            print(e)\n```\n\n## Java\n\n[Maven 仓库](https://mvnrepository.com/)\n| [阿里云 Maven 仓库](https://developer.aliyun.com/mvn/guide)\n| [Spring Boot 文档](https://docs.spring.io/spring-boot/docs/)\n| [Spring Boot 支持的 Java 版本](https://endoflife.date/spring-boot)\n\n关键字：没有 `unsigned` 关键字\n\n运算符：无符号右移 `>>>`，前面直接补零。\n\n- C/C++/Java 在对整型变量右移 `>>` 时：\n  - 正整数前面全补 `0`\n  - 负整数前面全补 `1`\n  - 无符号整数前面全补 `0`\n  - 作用相当于除以 2\n\n数据类型：布尔 `boolean`，值为 `true` 或者 `false`。可以直接用，占一个字节。\n\n- 写 `if(3 == true)` 时会报错，数据类型不同，不能直接比较。\n- 在 C 的 `<stdbool.h>` 中被 `#define` 了为 `1` 和 `0`。\n  - 写 `if(3 == true)` 时会跳过分支。\n- C++ 同 C，但是不用引头文件，可以直接用。\n- 在 Python 中是首字母大写的，也相当于 `0` 和 `1`，但是数据类型不同。\n  - 写 `if(3 == True)` 时会按 `1` 比较。\n  - 写 `if(3 is True)` 时会报错。\n- 在 JS 中也相当于 `0` 和 `1`，但是数据类型不同。\n  - 写 `if(1 == true)` 时会执行分支。\n  - 写 `if(1 === true)` 时会跳过分支。\n\n字符 `char`：无符号的两个字节。在 C/C++ 里是一个字节。\n\n有符号整型\n\n- `byte`：一个字节\n- `short`：两个字节\n- `int`：四个字节\n- `long`：八个字节\n\n语法：\n\n```java\nType[] arr = ...\nfor (Type element : arr) {\n    System.out.print(element + \",\");\n}\nArrays.toString(arr);\nSystem.arraycopy(...);\nString.equals(string);\n// == 运算符比较的是两对象的内存地址\n// 该方法先用 == 判断，后一个一个字符地比较\n// 可用 System.identityHashCode() 获取对象的标识哈希码，这是基于对象的内存地址计算的\nint Arrays.binarySearch(arr, elm);\n// 二分查找，返回的不一定是第一个。\n```\n\n接口：接口是一种特殊的类。写出来就是用来被继承的——不用 `extends`（扩展），用 `implements`（实现）。\n\n```java\npublic interface USB {\n    void start();\n    void stop();\n}\n```\n\n一个类只能 `extends` 自一个父类，但可以 `implements` 多个接口。实现接口的子类必须得实现接口里声明的方法。\n\nJavaBean 规则：\n\n- 必须有一个无参构造方法\n- 所有属性私有，且对其提供 public 的 `getXxx()` 与 `setXxx()` 方法\n\n## JSP\n\n> Web 是一种分布式的应用框架。基于 Web 的应用是典型的浏览器/服务器（B/S）架构。——ISBN 9787302438090\n\n> JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于 HTTP 的应用程序。——菜鸟教程\n\n笔者测试，用 VSCode 和 IDEA 社区版（2024.1）都没办法格式化 JSP 代码，或者是暂时没找到解决方法。或者你可以用 CSDN 网友分享的 IDEA 破解版（不是用蓝绿修改器破解的） https://blog.csdn.net/hlizoo/article/details/137562771\n\n**用 VSCode 或 IDEA 社区版**\n\n```bat\nmvn archetype:generate \"-DgroupId=com.example\" \"-DartifactId=demo\" \"-DarchetypeArtifactId=maven-archetype-webapp\" \"-DinteractiveMode=true\"\n```\n\nVSCode 使用 Community Server Connectors 插件、IDEA 使用 Smart Tomcat 插件\n\n**用 Eclipse 2020-03 (4.15.0)**\n\n在首选项里设置 JDK 和 Tomcat 的路径。\n\nNew -> Dynamic Web Project\n\n按 Ctrl + Shift + F 格式化代码——這個快捷鍵會和 Win10 的微軟拼音輸入法簡繁體切換功能衝突。解决方法除了再按一次，还可以右击你任务栏上的[中]，进输入法设置，把热键关了。\n\n> 一个 JSP 文件的示例\n\n```jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\" import=\"java.util.Date\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title></title>\n</head>\n<body>\n\t<%\n\t\tDate now = new Date();\n\t%>\n\t<%=now%>\n</body>\n</html>\n```\n\n它在 html 的基础上扩展了一些标签。可以使用 Java 库。\n\n> JSP 运行的原理\n\n1. 客户向 Tomcat 服务器发送 HTTP 请求\n\n你可以使用 Fiddler 来抓包（或者直接用浏览器控制台抓，这是最方便的）。在 Eclipse 里按“播放键”之后，Eclipse 向 `localhost:8080` 发送了一个 GET 请求。\n\n使用\n\n```bat\nnetstat -ano | grep 8080\n```\n\n查与 8080 端口有关的进程号。再打开任务管理器的详细信息，查到进程为 `javaw.exe`。右击打开文件所在位置，在你 Eclipse 首选项里设置的 JDK 目录的 bin 目录里面。\n\n使用\n\n```bat\njcmd\n```\n\n查看 java 进程，为 `org.apache.catalina.startup.Bootstrap start`\n\n2. Tomcat 启动一个线程，把 jsp 文件转换成 java 文件\n\n（一个继承自 `javax.servlet.http.HttpServlet` 的类，头上带一个注解 `@WebServlet(\"/path\")`，相当于 Python 的 Flask 框架里的 `@app.route(\"/path\")`）\n\n3. 把 java 文件编译成 class 文件（字节码）\n\n> jsp 指令与 jsp 动作？\n\n前者是静态的，后者是动态的（感性认识）\n\n前者类似\n\n```jsp\n<%@ include file = \"sub.jsp\" %>\n```\n\n后者类似\n\n```jsp\n<jsp:include page = \"sub.jsp\"/>\n```\n\n> 在一个 jsp 页里，如何把表单传递给另一个 jsp 页？另一个 jsp 页如何接收？\n\n三种方式：（使用 get 方法会在 url 里看到请求参数，post 不会）\n\n1.  【包含对面的】 `jsp:include` 配合 `jsp:param`。这是把另一个 jsp 页包含进来。\n\n```jsp\n<form method=\"get\">\n    请输入圆的半径：\n    <input type=\"text\" name=\"radius\" />\n    <input type=\"submit\" value=\"提交\" />\n</form>\n<jsp:include page=\"computeAreaOfCircle.jsp\">\n    <jsp:param value=\"${param.radius}\" name=\"radius\" />\n</jsp:include>\n```\n\n2. 【请求转发】先使用本页面的 Java 代码处理表单，再使用 `jsp:forward` 配合 `jsp:param`，把 request 对象转发给另一个 jsp 页面。\n\n这种把 JSP 标签和 Java 代码混在一起的写法很新鲜：\n\n接收方用 `request.getParameter(\"name\")` 接收\n\n```jsp\n<form method=\"post\" action=\"\">\n    请选择一个图形：<br />\n    <input type=\"radio\" name=\"shape\" id=\"circle\" value=\"circle\" />圆形<br />\n    <input type=\"radio\" name=\"shape\" id=\"rectangle\" value=\"rectangle\" />矩形<br />\n    <input type=\"submit\" value=\"提交\" />\n</form>\n<%\n\tRandom random = new Random();\nString shape = request.getParameter(\"shape\");\nif (shape != null) {\n    if (shape.equals(\"circle\")) {\n        double radius = 100 * random.nextDouble();\n%>\n<jsp:forward page=\"process.jsp\">\n    <jsp:param value=\"<%=shape%>\" name=\"shape\" />\n    <jsp:param value=\"<%=radius%>\" name=\"radius\" />\n</jsp:forward>\n<%\n    } else if (shape.equals(\"rectangle\")) {\n    double width = 100 * random.nextDouble();\n    double height = 100 * random.nextDouble();\n%>\n<jsp:forward page=\"process.jsp\">\n    <jsp:param value=\"<%=shape%>\" name=\"shape\" />\n    <jsp:param value=\"<%=width%>\" name=\"width\" />\n    <jsp:param value=\"<%=height%>\" name=\"height\" />\n</jsp:forward>\n<%\n\t}\n}\n%>\n```\n\n3. 【重定向】`response.sendRedirect(\"result.jsp\")` 不会把 request 对象传递过去\n\n应 `session.setAttribute(\"name\", value)`\n\n对方使用 `session.getAttribute(\"name\")` 接收。\n\n访问使用 response.sendRedirect 的一方 jsp 时，会跳转到对面的一方\n\n> 重定向和请求转发\n\n重定向会丢失 request 对象，请求转发不会。\n\n在 JSP 或者 Servert 里请求转发：\n\n```java\nrequest.setAttribute(\"studentList\", studentList);\nRequestDispatcher dispatcher = request.getRequestDispatcher(\"result.jsp\");\ndispatcher.forward(request, response);\n```\n\n> 如何实现点一个按钮出现一个新表单？\n\n在第一个表单里加一个隐藏的 `<input>` 标签，第一个表单提交给本页面，然后在本页面里写 Java 代码：\n\n笔者觉得这比 JS 操作 DOM 看起来新鲜，很好玩。\n\n```jsp\n<form action=\"\">\n    <input type=\"hidden\" name=\"showInput\" value=\"true\">\n    <input type=\"submit\" value=\"查找\">\n</form>\n<%\n    String showInput = request.getParameter(\"showInput\");\nif (showInput != null && showInput.equals(\"true\")) {\n%>\n<form action=\"Query\" method=\"get\">\n    <input type=\"text\" name=\"id\" placeholder=\"输入学号\">\n    <input type=\"submit\" value=\"提交\">\n</form>\n<%\n}\n%>\n```\n\n> Filter 是什么？\n\n一个实现了 `javax.servlet.Filter` 接口的类。可在 `doFilter` 方法里对请求预处理，响应后处理：\n\n```java\n@WebFilter(\"/*\")\npublic class ProZhInput implements Filter {\n    //...\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        request.setCharacterEncoding(\"UTF-8\");\n        response.setCharacterEncoding(\"UTF-8\");\n        response.setContentType(\"text/html;charset=UTF-8\");\n        chain.doFilter(request, response);\n    }\n    //...\n}\n```\n\n> 如何使用 JDBC 连接 MySQL\n\n1. 下载驱动 Jar 包 https://dev.mysql.com/downloads/connector/j/\n2. 把 Jar 包 复制到 `yourprojectname\\WebContent\\WEB-INF\\lib`\n\n> 插入的问题\n\n> MySQL 里有两张表，一张表的外键是另一张表的主键（如 id），级联更新和删除。如何插入“一条”id 的记录“分散给”这两张表？即对这两张表分别插了一个 id 相同的记录。\n\n先插 id 为主键所在的表，后插 id 为外键所在的表。\n\n这是关系型数据库原理的知识。本表里的“外键”就是引用外部表里的“主键”，那得先有外部表。\n\n> 乱码的问题\n\n保证这些地方的编码是 UTF-8：\n\n1. Eclipse 首选项里的文件编码\n2. 搞一个 Filter\n3. MySQL 数据库表的编码\n4.\n\n```jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\"%>\n```\n\n## 排序算法\n\n二分查找就是翻书。有一本 200 页的书，你想翻到 124 页，一下就翻到的概率是很小的。翻到中间，发现是 100 页；翻到 100~200 页的中间，发现是 150 页；翻到 100~150 页的中间，发现是 125 页，以此类推。\n\n二分查找就是从列表里查找一个值，前提列表是有序的，这样可以比较大小，在二分之后仍然是有序的。如果要查找的值比列表的中间值小，就在列表的左半部分找，这就是二分。这时需要变换查找范围的右边界，到中间值的左边一个位置。然后对查找范围继续二分，与中间值作比较，如果要查找的值比中间值大，就在查找范围的右半部分找，这时需要变换查找范围的左边界到中间值的右一个位置。以此类推，如果找到了，就返回目标元素的索引。找不到就返回-1。\n\n插入排序：一张一张地接扑克牌，接到第一张扑克牌时什么也不做，接到第二张扑克牌时要与第一张作比较，看插入到第一张的前面还是后面，……，接到第 n 张扑克牌时要与前 n - 1 张比较，看插入到手牌的哪个位置。\n\n选择排序：拿到一手混乱的牌，从中选取最小的，与第 0 张交换位置；之后忽略第 0 张，从剩余的牌里选取最小的，与第 1 张交换位置；之后忽略第 0、1 张，从剩余的牌里选取最小的，与第 2 张交换位置。以此类推。\n\n归并排序：把一沓牌分成一张一张的，摆在桌子上。相邻的两张合并成一个组；相邻的两组分别排序，合并成一个新组；以此类推。\n\n快速排序：选一个基准，所有比基准小的放在基准左边，比基准大的放在基准右边。然后就分成了两个区，对每一个区里的元素再选一个基准，重复上面的操作。\n\n## 数据挖掘\n\n### 属性与度量\n\n- 测量：将对象的属性映射为数值/符号值\n- 测量标度：函数、秤\n\n例如：秤将人的体重映射为一个数值\n\n属性的类型（也叫测量标度的类型）：\n\n- 分类的（定性的）\n  - 标称：有意义的只有等于/不等于操作。例如你的性别，不能与其他性别进行比较大小、加减、乘除操作\n  - 序数：有意义的有：等于/不等于和比较大小。例如你的成绩在这五个档次里面{A,B,C,D,E}\n- 数值的（定量的）\n\n  - 区间：除了能等于/不等于/比较大小，还要能加减。比如某年某月某日、华氏/摄氏温度\n  - 比率：在上面的基础上，还要能乘除\n\n- 离散的属性：可取有限个值，或无限可数个值\n- 连续的属性：取实数值\n- 非对称的属性：出现非零值比零值重要\n\n### 关联分析\n\n```py\nclass AssociationRule(namedtuple(\"AssociationRule\", [\"X\", \"Y\"])):\n    \"\"\"\n    关联规则，是两个不相交集合的蕴含表达式\n    {牛奶，尿布} -> {啤酒}\n    \"\"\"\n\n    def __new__(cls, X: set, Y: set):\n        assert X.isdisjoint(Y)\n        return super().__new__(cls, X, Y)\n```\n\n支持度计数 sigma，即事务列表里，项集的超集个数\n\n支持度，即项集的超集个数与集合总个数（事务个数）的比值\n\n大于等于最小支持度（计数）的项集，称为频繁项集\n\n置信度，由 X 引起 Y 的可能性。X 的支持度计数做分母，XY 并集的支持度计数做分子\n\n先验原理：如果一个项集是频繁的，它的所有子集都是频繁的\n\n反过来：如果一个项集是非频繁的，它的所有超集都是非频繁的\n\n即：一个项集的子集的支持度，大于等于它本身的支持度\n\n### 决策树示例\n\n对于一组数据集，其每一个数据有它的几个属性的值，和一个分类标签。\n\n如：我们可以给一系列人的数据集：（方便理解，学习用，无歧视）\n\n```py\n# 特征列表\nfeatures = [\"性别\", \"使用手机的牌子\", \"年龄\", \"是否赌博\", \"喜欢玩的游戏\", \"喜欢音乐的曲风\"]\ndataset = [\n    # 最后一个是分类标签\n    [\"男\", \"小米\", \"中\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"小米\", \"中\", \"是\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"小米\", \"中\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"华为\", \"小\", \"否\", \"明日方舟\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"华为\", \"小\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"小\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"大\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"大\", \"否\", \"王者荣耀\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"大\", \"否\", \"和平精英\", \"前卫摇滚\", \"没病\"],\n    [\"女\", \"华为\", \"小\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"没病\"],\n    [\"女\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"前卫摇滚\", \"没病\"],\n    [\"男\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"中\", \"否\", \"和平精英\", \"华语流行\", \"没病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"明日方舟\", \"日语流行\", \"没病\"],\n]\n```\n\n生成类似这样的决策树：\n\n<img src=\"/blog/images/decision-tree.webp\">\n\n### 针对购物篮数据集的关联分析\n\n关联分析到底是**什么意思**？是发现隐藏在大型**数据集**中的有意义的**联系**。\n\n购物篮数据集**怎么表示**？是一张**表**，表里有一系列**行**，每一个行是一个**事务**，每一个事务表现为一个**集合**，这个集合里有一系列商品的**名字**，比如{\"面包\",\"牛奶\",\"尿布\"}\n\n联系**怎么表示**？有两种形式：**关联规则**、和**频繁项集**\n\n关联规则是**什么意思**？是**两个不相交集合的蕴含表达式**，如{尿布}->{啤酒}这个表达式的意思是：购买尿布，**引起了**购买啤酒，前面是**因**、后面是**果**。\n\n项集是**什么意思**？是一些**项**的**集合**。是 `list[str]`\n\n什么叫**频繁项集**？是**支持度**或者**支持度计数大于等于最小阈值**的项集。\n\n什么叫**支持度计数**？是该项集在事务列表里的**超集数量**，是事务列表里的所有**包含该项集**的**事务数量**。\n\n什么叫**支持度**？是事务列表里，**包含该项集的事务的数量**占**所有事务数量**里的比值。\n\n{面包，牛奶}支持度 0.3 是**什么意思**？是在所有的购物记录里，同时包含购买了面包、牛奶的购物记录的比值。是**在每 10 次购物里，就有三次同时购买了面包和啤酒**。\n\n**怎么挖掘关联规则**？分两步：\n\n1. **产生频繁项集**:发现满足最小支持度阈值的所有项集\n   - 什么意思？项集里有几个元素？**最少**有一个，**最多**有 `len(unique(flatten(basket)))` 个，是所有独立的商品组成的集合。\n2. **产生规则**\n   - 提取所有高置信度的规则。\n\n格结构是什么意思？格结构里的所有节点构成一个集合的幂集。格结构的第一层是 null，第二层是所有 1-项集，第三层是所有 2-项集……最底层是 `len(unique(flatten(basket)))`项集\n\n**先验原理**是什么意思？如果一个**项集**是**频繁**的，它的**所有子集**都一定是**频繁的**。\n\n什么叫一个项集是频繁的？它的支持度计数大于等于最小阈值\n\n什么叫一个项集的子集是频繁的？它的子集的支持度计数大于等于最小阈值\n\n为什么项集支持度计数大于等于最小阈值后，它的所有子集的支持度计数都会大于等于最小阈值？\n\n**支持度计数 +1 的操作是在什么时候**？把这个项集和事务列表里的所有项集做比较，如果该项集是事务列表里项集的子集，把该项集的支持度计数 +1。所以：支持度计数，就是**找超集数量**\n\n**一个集合的子集的超集数量**，必定**大于等于该集合的超集数量**，为什么？**因为这个集合本身就是它子集的超集**。\n\n什么叫**基于支持度的剪枝**？把先验原理**反过来说**：如果一个项集是非频繁的，它的所有超集都是非频繁的。\n\n非频繁是什么意思？支持度计数小于最小阈值，超集数量小于最小阈值，**包含它的事务数量**小于最小阈值\n\n如果一个集合的超集数量小于最小阈值，它的（所有超集）的超集数量都会小于最小阈值。为什么？**你确定这句话对吗**？\n\n正确的描述方法是：如果**包含 A 的事务数**小于最小阈值， 那么**包含（A 的超集）的事务数**会小于最小阈值。为什么？\n\n因为在一个购物篮里，事务数量是有限的。\n\n**支持度计数 +1 的操作是在什么时候**？是针对一个项集，**判断各个事务**是不是它的超集的时候。\n\n```py\nbasket = [\n    [1,2,3],\n    [1,3,4],\n    [1,3,5],\n    [2,3,5]\n]\n```\n\n问：[2,3] 的支持度计数是几？是 2，是第一行和第四行\n\n现在规定：最小支持度计数是 3。问，[2,3]超集的支持度计数？既然是超集，考虑它自己是它自己的超集这种情况，它的支持度计数还是小于 3。现在再往里加一个，能达到要求吗？加一个之后，**超集的判定变严了**。\n\n理性的说法是：原来是 A 超集的集合 B，在 A 加一个元素之后变成 C 后，B 不一定还是 C 的超集，因为新加的那个元素可能不在 B 里。如果新加的那个元素在 B 里，C 超集的数量（相对于购物篮）至少减零。如果不在 B 里，C 超集的数量（相对于购物篮）至少减一。\n\n**基于支持度的剪枝**什么意思？如果**一个项集是非频繁的**，把它格结构里**所有的超集剪了**。\n\n**反单调性**什么意思？一个项集的支持度小于等于它的自己的支持度。\n\n### numpy 库的多维数组切片语法\n\n```py\nimport numpy as np\n# 假装这是事务列表\nX = np.array(\n    [\n        [1, 2, 3, 4, 5, 6, 7],\n        [8, 9, 10, 11, 12, 13, 14],\n        [15, 16, 17, 18, 19, 20, 21],\n        [22, 23, 24, 25, 26, 27, 28],\n    ]\n)\n# 假装这是一系列3-项集\ncombin = np.array([[0, 1, 2], [1, 4, 6]])\nprint(X[:, combin])\n\n\"\"\"\n这是什么玩意？？？\n[[[ 1  2  3]\n  [ 2  5  7]] 把第一个事务的对应的各个3-项集摘出来（可能有True有False），便于后续判断它是不是某个3-项集的子集\n              如果第二行全True，说明该事务是[1,4,6]的超集\n\n [[ 8  9 10]\n  [ 9 12 14]]\n\n [[15 16 17]\n  [16 19 21]]]\n\"\"\"\n```\n\n```py\nimport numpy as np\n\nX = np.array(\n    [\n        [1, 0, 0, 0, 0, 0, 0],\n        [1, 1, 1, 0, 0, 0, 0],\n        [1, 0, 1, 1, 0, 0, 0],\n        [0, 0, 0, 0, 1, 0, 0],\n    ]\n)\ncombin = np.array([[0, 1, 2], [1, 4, 6]])\nprint(X[:, combin])\n\n\"\"\"\n[[[1 0 0]\n  [0 0 0]] 把对应的3-项集摘出来\n\n [[1 1 1]\n  [1 0 0]] 全1为True，说明第二行事务它是对应[0,1,2]的超集\n\n [[1 0 1]\n  [0 0 0]]\n\n [[0 0 0]\n  [0 1 0]]]\n\"\"\"\n\n_bools = np.all(X[:, combin], axis=2)\nprint(_bools)\n\n\"\"\"\n[[False False]\n [ True False] 四个事务里，只有这一个事务是[0,1,2]的超集\n [False False]\n [False False]]\n\"\"\"\n```\n\n### Apriori 算法\n\n```mermaid\n%%{\n    init: {\n\t    \"theme\": \"neutral\",\n\t    \"fontFamily\": \"Times New Roman\"\n    }\n}%%\nflowchart TD\n    A[产生频繁1-项集] --> B[k=1] --> C[k+=1] --> G[由频繁k-1-项集生成候选k-项集,并剪枝] --> D{候选k-项集为空?}\n    D -- 是 --> E[返回频繁项集]\n    D -- 否 --> F[对候选k-项集支持度计数,产生频繁k-项集] --> GG{频繁k-项集为空?} -- 是 --> E\n    GG -- 否 --> C\n```\n\n直接看 mlxtend 库的源码（删除了一些相对于算法本身无关紧要的，比如低内存下的算法和 pandas 兼容性的问题）：\n\n```py\nfrom itertools import combinations\n\nimport numpy as np\nimport pandas as pd\n\n\ndef association_rules(df, min_threshold=0.9):\n    \"\"\"\n    找出置信度大于等于min_threshold的关联规则\n    \"\"\"\n\n    confidence = lambda sAC, sA, _: sAC / sA\n\n    # 获取 {频繁项集} -> 支持度 字典\n    keys = df[\"itemsets\"].values\n    values = df[\"support\"].values\n    frozenset_vect = np.vectorize(lambda x: frozenset(x))\n    frequent_items_dict = dict(zip(frozenset_vect(keys), values))\n\n    # 规则的前件、后件、支持度\n    rule_antecedents = []\n    rule_consequents = []\n    rule_supports = []\n\n    # 遍历所有频繁项集\n    for k in frequent_items_dict.keys():\n        sAC = frequent_items_dict[k]\n        # 找到所有可能的组合\n        for idx in range(len(k) - 1, 0, -1):\n            # 前件和后件的组合\n            for c in combinations(k, r=idx):\n                antecedent = frozenset(c)\n                consequent = k.difference(antecedent)\n                sA = frequent_items_dict[antecedent]\n                sC = frequent_items_dict[consequent]\n                # 计算置信度\n                score = confidence(sAC, sA, sC)\n                if score >= min_threshold:\n                    rule_antecedents.append(antecedent)\n                    rule_consequents.append(consequent)\n                    rule_supports.append([sAC, sA, sC])\n\n    # 返回结果\n    if not rule_supports:\n        return pd.DataFrame(columns=[\"antecedents\", \"consequents\", \"confidence\"])\n    else:\n        rule_supports = np.array(rule_supports).T.astype(float)\n        df_res = pd.DataFrame(\n            data=list(zip(rule_antecedents, rule_consequents)),\n            columns=[\"antecedents\", \"consequents\"],\n        )\n        sAC = rule_supports[0]\n        sA = rule_supports[1]\n        sC = rule_supports[2]\n        df_res[\"confidence\"] = confidence(sAC, sA, sC)\n        return df_res\n\n\ndef generate_new_combinations(old_combinations):\n    \"\"\"\n    由上一步的频繁k-1项集生成候选项k集，并剪枝\n    使用F_{k-1} x F_{k-1} 算法\n    \"\"\"\n    items_types_in_previous_step = np.unique(old_combinations.flatten())\n    for old_combination in old_combinations:\n        max_combination = old_combination[-1]\n        mask = items_types_in_previous_step > max_combination\n        valid_items = items_types_in_previous_step[mask]\n        old_tuple = tuple(old_combination)\n        for item in valid_items:\n            yield from old_tuple\n            yield item\n\n\ndef apriori(df, min_support=0.3):\n    \"\"\"\n    产生频繁项集\n    \"\"\"\n\n    def _support(_x, _n_rows):\n        \"\"\"\n        计算支持度。它按每一列求和，输出一个一维数组，是每一列里True的数量占总行数的比值\n        \"\"\"\n        out = np.sum(_x, axis=0) / _n_rows\n        return np.array(out).reshape(-1)\n\n    X = df.values  # 二维数组\n    support = _support(X, X.shape[0])  # 所有1-项集的支持度\n    ary_col_idx = np.arange(X.shape[1])  # 列索引，即不同商品的编号\n\n    support_dict = {1: support[support >= min_support]}\n    itemset_dict = {1: ary_col_idx[support >= min_support].reshape(-1, 1)}\n\n    max_itemset = 1  # 最大k项集里的k\n    rows_count = float(X.shape[0])  # 行数，即事务数\n\n    while max_itemset:\n        next_max_itemset = max_itemset + 1  # 开始计算k-项集\n        # 把频繁(k-1)-项集传进去，返回一个包含所有候选k-项集的生成器\n        combin = generate_new_combinations(itemset_dict[max_itemset])\n        # 把生成器转成数组\n        combin = np.fromiter(combin, dtype=int)\n        combin = combin.reshape(-1, next_max_itemset)\n        # 结束条件：候选k-项集为空\n        if combin.size == 0:\n            break\n        # 对事务列表里的每行（事务）切片，选出，作为三维数组的第二维，便于后续判断超集关系\n        _bools = np.all(X[:, combin], axis=2)\n        support = _support(np.array(_bools), rows_count)\n        # 遮罩，每个候选项集的支持度是否大于最小支持度\n        _mask = (support >= min_support).reshape(-1)\n        if any(_mask):\n            # 对候选项集combin作用，过滤出频繁项集\n            itemset_dict[next_max_itemset] = np.array(combin[_mask])\n            support_dict[next_max_itemset] = np.array(support[_mask])\n            max_itemset = next_max_itemset\n        else:  # 结束条件：候选k-项集为空\n            break\n\n    # 返回结果\n    all_res = []\n    for k in sorted(itemset_dict):\n        support = pd.Series(support_dict[k])\n        itemsets = pd.Series([frozenset(i) for i in itemset_dict[k]], dtype=\"object\")\n        res = pd.concat((support, itemsets), axis=1)\n        all_res.append(res)\n\n    res_df = pd.concat(all_res)\n    res_df.columns = [\"support\", \"itemsets\"]\n    res_df = res_df.reset_index(drop=True)\n\n    return res_df\n```\n\n### 鸢尾花数据集关联分析示例\n\n```py\nimport os\n\n# Python 3.10.9\nos.chdir(r\"C:\\Users\\rcooh\\Desktop\\数据挖掘\\大作业\\算法设计\")\n\nimport numpy as np\nimport pandas as pd\nfrom algo import apriori, association_rules\nfrom mlxtend.preprocessing import TransactionEncoder\nfrom sklearn import datasets\n\niris = datasets.load_iris()\ndata: np.ndarray = iris[\"data\"]\ntarget: np.ndarray = iris[\"target\"]\nmodify_value = lambda v: f\"{int(v):.1f}~{int(v)+1:.1f}\"  # 把数据划分到1cm范围内\nFLOWER = {0: \"山鸢尾\", 1: \"变色鸢尾\", 2: \"维吉尼亚鸢尾\"}\ndataset = np.array(\n    [\n        [\n            \"花萼长度\" + modify_value(data[i][0]),\n            \"花萼宽度\" + modify_value(data[i][1]),\n            \"花瓣长度\" + modify_value(data[i][2]),\n            \"花瓣宽度\" + modify_value(data[i][3]),\n            FLOWER[target[i]],\n        ]\n        for i in range(data.shape[0])\n    ]\n)\nnp.savetxt(\"dataset.csv\", dataset, delimiter=\",\", fmt=\"%s\", encoding=\"utf-8\")\n\n\nte = TransactionEncoder()\nitem_array = te.fit(dataset).transform(dataset)\ndf = pd.DataFrame(item_array)\n\n\nfrequent_itemsets = apriori(df, min_support=0.3)\n# 把编码后的转成原来的\nfrequent_itemsets[\"itemsets\"] = frequent_itemsets[\"itemsets\"].apply(\n    lambda cell: frozenset([te.columns_[i] for i in cell])\n)\nfrequent_itemsets.to_csv(\"frequent_itemsets.csv\")\n\n\nrules = association_rules(frequent_itemsets, min_threshold=0.8)\nrules.to_csv(\"result.csv\")\n```\n\n## 动态规划\n\n### 滚动数组怎么滚\n\n以三个数为例：\n\n1. 先处理前两个，直接返回\n2. 声明三个变量，只给前两个赋值\n3. 循环[下标看具体情况]在每次循环里：\n   1. 先作用\n   2. 把第二个数赋值给第一个\n   3. 把第三个数赋值给第二个\n4. 返回第三个\n\n笔者认为这种写法符合人的直觉，且不容易出错。\n\n### 70.爬楼梯\n\n> 假设你正在爬楼梯。需要 n 阶你才能到达楼顶。每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？\n\n换一种问题描述方式：把一个正整数 n 拆分成一系列 1 和 2 有顺序地相加，共有几种拆分方式 f(n)？\n\n从它的尾巴向前看，有这两种：\n\n- n = (n-1) + 1\n- n = (n-2) + 2\n\n其中(n-1)和(n-2)有它们各自被拆分的种类数，于是 f(n)=f(n-1)+f(n-2)\n\n边界：f(1)=1,f(2)=2（2=1+1=2+0）\n\n```c\nint climbStairs(int n) {\n    if (n <= 2) {\n        return n;\n    }\n    int a = 1, b = 2, c;\n    for (int i = 3; i <= n; i++) {\n        c = a + b;\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n### 746.使用最小花费爬楼梯\n\n我们把问题描述改写一下：\n\n给你一个非负整数数组，长度大于等于 2，让你在数组里选一些数求和，要求选的这些数：\n\n- 0 号和 1 号元素必须二选其一\n- 最后两个元素必须二选其一\n- 选的相邻两数之间至多间隔一个数\n- 要求和最小，输出和\n\n状态转移就是从过去转移到现在。现在虚空设一个数叫 dp[i]表示爬到下标为 i 的台阶时的花费\n\n（注意：此时的 dp[i]是不包含本级台阶的花费的，往后跨了之后才加）\n\n有两种转移的情况：从 i-1 爬一层、从 i-2 爬两层\n\n从 i-1 爬一层之后、转移到现在，现在的花费等于跨上一步之前的花费+跨上一步之后的花费\n\n即 dp[i] = dp[i-1] + cost[i-1]\n\n总的状态转移方程为 dp[i] = min(dp[i-1] + cost[i-1], dp[i-2] + cost[i-2])\n\n边界为 dp[0]=dp[1]=0，返回值为 dp[n]，下标 n 在楼梯的顶层，cost 数组右边一个位置，等于 cost 数组长。用滚动数组，循环 [2, cost 长]\n\n```c\nint minCostClimbingStairs(int* cost, int costSize) {\n    int a = 0, b = 0, c;\n    for (int i = 2; i <= costSize; i++) {\n        c = fmin(a + cost[i - 2], b + cost[i - 1]);\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n### 198.打家劫舍\n\n我们把问题描述改写一下：\n\n给你一个长度[1,100]的非负整数数组，让你选一些数求和，要求选的这些数间隔至少为 1，返回最大和\n\n虚空设一个数 dp[i]表示你对 i 号下标纠结之后的和，你正在纠结打还是不打\n\n- 如果打 i，就不能打 i-1，dp[i] = dp[i-2] + value[i]\n- 如果不打 i，就可以打 i-1，dp[i] = dp[i-1]\n\n这两种情况求大的\n\n```c\nint rob(int* nums, int numsSize) {\n    if (numsSize == 1) {\n        return nums[0];\n    } else if (numsSize == 2) {\n        return fmax(nums[0], nums[1]);\n    }\n    int a = nums[0];\n    int b = fmax(nums[0], nums[1]);\n    int c;\n    for (int i = 2; i < numsSize; i++) {\n        c = fmax(a + nums[i], b);\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n## 驾驶\n\n关键点：\n\n- 车钥匙：点火，使发动机工作\n- 离合器踏板（左）：使发动机和变速箱连接到一起。踩下去是离，抬起来是合。挂挡前必踩离合\n- 变速杆（档）：改变从变速箱向车轮的转速比例\n- 刹车踏板（中）：用于减慢车轮转速\n- 手刹：抬起来是刹，把后轮锁死\n- 油门踏板（右）：改变流向发动机的汽油流量\n- 速度计，右边的是发动机，左边的是车轮\n\n点火前手刹应处于抬起状态，档位为空\n\n平地起步：\n\n1. 点火、踩住离合挂一挡、松手刹\n2. 慢松离合\n\n斜坡起步：\n\n1. 点火、踩住离合和刹车挂一挡、松手刹\n2. 慢松刹车和离合\n\n停车：\n\n1. 踩住离合和刹车、挂空挡、拉手刹\n2. 松脚熄火\n\n## 用 C 语言模拟一个像素时钟\n\n### myclock.h\n\n```c\n#define YIN ' '\n#define YANG 'O'\n#define SCREEN_WIDTH 34\n#define SCREEN_HEIGHT 7\n#define PROBE_NUM 4\n\nextern char screen[SCREEN_HEIGHT][SCREEN_WIDTH]; // 模拟屏幕，34 * 7 像素\nextern const int hOffset[6];                     // 水平方向上的偏移量，每位数字的左上角\nextern char *probe[PROBE_NUM];                   // 一排四个探针，存放四个像素的地址\nextern const int model[10][SCREEN_HEIGHT];       // 每行是一个数字模型的像素情况，每行里的一个记录代表数字模型的一行\nextern int timeDidits[6];                        // 18:44:02\n\nvoid probeReset();                 // 探针回到原点，屏幕左上角\nvoid probeMoveDown1Px();           // 探针向下移动一个像素\nvoid probeMoveRightPx(int offset); // 探针向右移动多个像素\n\nvoid getTimeDidits();                    // 获取本地时间的六个数字\nvoid writeTimeToScreen();                // 写六个数字\nvoid writeDigit(int digit, int hOffset); // 按偏移量写一个数字\n```\n\n### myclock.c\n\n```c\n#include <stdio.h>\n#include <stdlib.h> //system(\"cls\")\n#include <conio.h>  //_kbhit()\n#include <time.h>\n#include \"myclock.h\"\n\nchar screen[SCREEN_HEIGHT][SCREEN_WIDTH] = {\n    /*0                        5                                  12                       17                                 24                       29                  33*/\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\0'}};\n\nconst int hOffset[6] = {0, 5, 12, 17, 24, 29};\n\nchar *probe[PROBE_NUM] = {&screen[0][0], &screen[0][1], &screen[0][2], &screen[0][3]};\n\nconst int model[10][SCREEN_HEIGHT] =\n    {\n        {0b1111, 0b1001, 0b1001, 0b1001, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O     O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0|       O\n        1|       O\n        2|       O\n        3|       O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b1111, 0b1000, 0b1000, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3| O O O O\n        4| O\n        5| O\n        6| O O O O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b1111, 0b0001, 0b0001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n        {0b1001, 0b1001, 0b1001, 0b1111, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0| O     O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b1000, 0b1000, 0b1111, 0b0001, 0b0001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O\n        2| O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n        {0b1111, 0b1000, 0b1000, 0b1111, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O\n        2| O\n        3| O O O O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3|       O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b1001, 0b1001, 0b1111, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b1111, 0b1001, 0b1001, 0b1111, 0b0001, 0b0001, 0b1111}\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n};\n\nint timeDidits[6];\n\nint main()\n{\n    system(\"cls\");\n    printf(\"\\033[?25l\"); // 隐藏光标\n    while (!_kbhit())\n    {\n        getTimeDidits();\n        writeTimeToScreen();\n        printf(\"%s\\n\\n\\nPress any key to exit...\\n\", (const char *)screen);\n        printf(\"\\033[0;0H\"); // 光标移动到 (0,0)\n    }\n    system(\"cls\");\n    printf(\"\\033[?25h\"); // 显示光标\n}\n\nvoid probeReset()\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] = &screen[0][i];\n    }\n}\n\nvoid probeMoveDown1Px()\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] += SCREEN_WIDTH;\n    }\n}\n\nvoid probeMoveRightPx(int offset)\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] += offset;\n    }\n}\n\nvoid getTimeDidits()\n{\n    time_t utc = time(NULL);\n    struct tm local_time;\n    localtime_s(&local_time, &utc);\n    timeDidits[0] = local_time.tm_hour / 10;\n    timeDidits[1] = local_time.tm_hour % 10;\n    timeDidits[2] = local_time.tm_min / 10;\n    timeDidits[3] = local_time.tm_min % 10;\n    timeDidits[4] = local_time.tm_sec / 10;\n    timeDidits[5] = local_time.tm_sec % 10;\n}\n\nvoid writeTimeToScreen()\n{\n    for (int i = 0; i < 6; i++)\n    {\n        writeDigit(timeDidits[i], hOffset[i]);\n    }\n}\n\nvoid writeDigit(int digit, int hOffset)\n{\n    probeMoveRightPx(hOffset); // 探针移动到数字的起始位置\n    for (int digitRowIndex = 0; digitRowIndex < SCREEN_HEIGHT; digitRowIndex++)\n    {\n        // 写一个数字的每一行.对于所有数字的每一行，总共有四种状态\n        int digitRowStatus = model[digit][digitRowIndex];\n        switch (digitRowStatus)\n        {\n        // 探针写一行，四个像素点\n        case 0b1111:\n            *probe[0] = YANG;\n            *probe[1] = YANG;\n            *probe[2] = YANG;\n            *probe[3] = YANG;\n            break;\n        case 0b1000:\n            *probe[0] = YANG;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YIN;\n            break;\n        case 0b0001:\n            *probe[0] = YIN;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YANG;\n            break;\n        case 0b1001:\n            *probe[0] = YANG;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YANG;\n            break;\n        default:\n            break;\n        }\n\n        probeMoveDown1Px(); // 向下按行扫描\n    }\n    probeReset(); // 回归原位\n}\n```\n\n## 读书感想与原文摘抄\n\n### 平凡生活中的不凡之旅：《凉宫春日系列》读书心得\n\n[《凉宫春日系列》](https://haruhifanclub.com/library)是日本作家谷川流创作的校园幻想题材轻小说，2003 年首作《凉宫春日的忧郁》出版后大受欢迎，并逐渐发展为涵盖多部小说、动画及漫画的作品。故事以第一人称视角叙述，通过主角阿虚的眼睛带领读者走进一个既平凡又充满奇幻色彩的世界。\n\n从小学起，阿虚就意识到现实世界与他所期待的神奇世界是存在着巨大差异的，圣诞老人只不过是一个节日象征，动画里的角色也仅仅存在于屏幕之上。进入高中后，阿虚已经习惯了平淡无奇的生活，但他内心深处仍然保留着对不凡事物的向往。直到遇见了凉宫春日，他的生活发生了翻天覆地的变化。\n\n凉宫春日自幼便认为自己与众不同，经历的事情也是全世界最有趣的。然而，在小学六年级的一次棒球赛中，当她在巨大的体育馆里看到五万名观众时，她突然意识到自己独特的生活其实是每个人都会经历的一部分。那次经历让她开始思考：在如此庞大的人口基数下，一定有人过着不平凡且充满趣味的生活，那么为什么那个人不能是她呢？于是，凉宫决定开始主动寻找并创造那些不同寻常的故事。\n\n在开学第一天，她大胆地向全班同学宣告：“我对普通的人类没有兴趣。如果你们当中有外星人、未来人、异世界的人或者超能力者，请尽管来找我！”这番话并未引起太大的反响，因为对于那些熟悉她的同学们来说，这只是她一系列奇特行为的冰山一角而已。为了追求与众不同的生活，凉宫曾尝试过许多非传统的方式：比如在学校操场上用石灰画出巨大图案、在楼顶上用油漆绘制星星、甚至还在校园里到处贴纸符。此外，她还曾经加入过学校里的所有社团，但在发现这些活动都太过平常之后又一一退出。\n\n或许是受到凉宫这种积极态度的影响，阿虚也开始回忆起自己曾经对于冒险生活的渴望。当凉宫抱怨说学校里没有任何有趣的社团时，阿虚曾试图劝解道：“人类都会满足于现状，无法安于现状的人会通过发明或发现来推动文明的发展……只有那些天才才能将那些想法变为现实，身为凡人的我们，平庸地度过一生才是最好的选择。”然而，这段话却意外激发了凉宫成立“让世界变得更加热闹的凉宫春日团”（简称 SOS 团）的决心。\n\n随着 SOS 团的成立，除了阿虚和凉宫两名成员之外，又有三名新成员陆续加入——长门有希、朝比奈实玖瑠以及古泉一树。令人惊讶的是，这三人实际上分别是真正的外星人、未来人以及超能力者。起初，阿虚并不相信他们的身份，但在亲身经历了几次不可思议的事件后，他不得不承认凉宫春日的确有着能够吸引奇异事物的力量。从此，故事从现实风格开始逐渐转向科幻风格。有趣的是，在 SOS 团里只有凉宫春日一人不知道她自己有着神一般的能力，和《名侦探柯南》里只有少数人知道柯南的真实身份有异曲同工之妙，这种东西被称为“麦高芬”，起的是推动故事情节发展的作用。\n\n《凉宫春日系列》不仅仅是一部简单的娱乐作品，它更深层次地探讨了个人如何在日常生活中寻找意义，并勇敢地追求梦想。凉宫春日作为一个充满想象力的角色，始终保持着对未知世界的好奇心和探索欲望。她鼓励人们不要轻易接受现状，而是要勇于尝试新事物，即使结果可能并不如预期般完美。通过创建 SOS 团，她把自己期待的外星人、未来人以及超能力者齐聚一堂（虽然她自己是不知道的），拍摄自制电影在校庆上播放（虽然 SOS 团是一个地下组织，不可能获奖）等，她确实从平凡的生活里自己创造了一些不平凡的事情，实现了自己渴望不凡的梦想。\n\n该作品也提醒我们要勇于面对挑战，在成长的过程中找到属于自己的位置。在故事的中后期，随着 SOS 团活动的进行，以及团员们共同经历了一些巨大危机后，凉宫春日的性格稍微收敛了一点，其他三个团员也在逐渐发生着变化：原本沉默寡言的长门有希开始学会表达情感；害羞内向的朝比奈实玖瑠变得越来越自信；而看似冷静理智的古泉一树也在不断调整自己对待生活的态度。\n\n该作品还强调了珍惜当下每一刻的重要性。随着故事情节的发展，阿虚等人逐渐认识到即使是看似平淡无奇的日子也充满了特别之处，每个瞬间都是独一无二且宝贵的，我们应该学会欣赏并感激现在所拥有的一切，用未来人的话来说就是“既定事项”。无论身处何种环境之中，只要愿意用心去感受、去体验，就能够发现生活中的美好与奇迹。\n\n总之，《凉宫春日系列》以其独特视角展示了如何在平凡中发现非凡的可能性。通过一系列精彩纷呈的故事，该书鼓励读者保持好奇心与创造力，勇于探索未知领域，享受旅程中的每一步。这不仅是一次心灵上的启迪之旅，更是一份关于勇气与坚持的美好寄语。\n\n### 动态的历史：《现代心理学史》第一章读书笔记\n\n《现代心理学史》这本书向我们展示了心理学在历史上的演变过程。早在公元前 5 世纪，古希腊哲学家就开始基于个人经验和直觉探索人类的本性和行为，他们探讨了记忆、学习、动机、思维、知觉和变态行为等主题，这些主题成为了后来心理学研究的基础框架。然而，直到 19 世纪晚期，随着生理科学领域工具与技术的成功应用，心理学才逐渐从哲学中独立出来，成为了一个以科学实验为基础的学科。\n\n研究心理学的发展历史结合了心理学与历史编撰学两个领域的知识。在重建心理学的历史时，历史编撰学家采用的方法类似于考古学家，因为他们无法通过重现历史的情境来做实验。相反，他们必须依赖于过去遗留下来的各种资料记录，比如事件参与者或目击者的文字描述、信件、日记、照片、实验设备以及官方文件等，这些资料是重建历史事件的关键。然而，这些资料也可能因为遗失或被故意销毁而变得不完整。例如，行为主义创始人约翰·B.华生在去世前烧毁了自己所有的信件、手稿和研究笔记，使得这部分重要的历史资料永远消失。\n\n有时，重要文献还可能因为存放不当而长期未能被发现。如艾宾浩斯关于人类学习和记忆的研究论文在他去世 75 年后才被找到，而费希纳的十箱日记在他去世近一个世纪后才被发掘出来。这些文档对于理解早期心理学的发展至关重要，但在它们被发现之前，许多有关艾宾浩斯和费希纳的作品都是在缺乏这些关键资料的情况下完成的。\n\n历史数据还可能会受到歪曲，这种歪曲可能来源于翻译过程中产生的误解，也可能是由于事件的参与者或观察者有意无意地对相关事件进行了扭曲。如弗洛伊德提出的“Einfall”（入侵）一词在英语中被译为“free association”（自由联想），但实际上这个词的意思更接近于无意识内容对意识思想的侵入，而并非简单的观念联结。\n\n历史叙述还可能受到当事人主观意图的影响。如行为心理学家 B.F.斯金纳在其自传中描绘了一个严格自律的学生形象，但在自传出版后的多年，他却否认了自己的研究生生涯如此艰辛，并承认自己的回忆是一种理想化的生活状态。斯金纳以前的一个同学说：斯金纳总是比其他同学都迅速地完成实验室工作，然后打整个下午的乒乓球。这样的例子揭示了历史学家所面临的困境：究竟哪个版本的故事更为准确？\n\n以上种种问题提示我们，对于历史的理解是一个动态的过程。每当新的数据被发现或是旧的数据被得到重新解释，历史故事就会发生变化。历史在不断地发展、浓缩并被纠正，因此它总是未完成的且不够完善的。历史学家的工作就是在这个过程中不断追求真理，尽管他们的叙述可能只是逐步地接近真相。随着新的发现和对历史数据的新分析，我们的理解将变得更加完善。\n\n### 乡音无改：《郧县志（1979-2008）》读书笔记\n\n郧县是我的故乡，它位于鄂西北的十堰市，中国的鸡心位置。2014 年 12 月，郧县撤县设区，改为郧阳区。2024 年 8 月，“郧县人”被写进人教版七年级上册的《中国历史》教科书中，与“元谋人”“蓝田人”“北京人”“山顶洞人”并列，所以也可以看作是你我的共同故乡。\n\n[《郧县志（1979-2008）》](http://www.sydaxxw.com/dfzgz/dfzk/202302/t20230208_4179784.shtml)全书有三十二卷，囊括了从行政区划、地理环境到经济社会生活等的各个方面，记述了改革开放 30 年来郧县的历史和发展状况。附录还收集了一些古代的敕谕、疏奏、文化作品，以及康熙、同治和清末到 20 世纪末的前版《郧县志》序，前志勘误表和补遗等。如此庞大的一部的著作，通读下来是要花费大量时间的。如果给老乡推荐这本书的话，我首先推荐最后一卷《人物》，你可以与你的父辈交流讨论，在里面寻找有没有你们认识的人。其次就是第三十卷《社会生活》里关于我们家乡的方言了。\n\n声调方面，普通话的四个声调为阴平（一声）、阳平（二声）、上声（三声）、去声（四声）。如“鸡鸣狗盗”。郧县话则是把普通话的一声读作二声、二声读作四声、三声读作一声、四声读作三声的前半部分。如“极命钩岛”。与河南话有相似之处。\n\n发音方面，郧县方言存在把两字合成一字的读的情况，如女娃（nüā）子。有少数字可拼写出发音，却无法使用对应的字书写，如“这篇文章写得 diàng 得很！”（diàng 是好的意思），“那个人很 niào 劲”（niào 劲是厉害的意思）。还有无法使用汉语拼音方案标注的发音，如“去”、“给”、“黑”等。\n\n人物称谓方面，郧县方言对一般人或亲属的称谓中存有大量集体称谓。诸如，所有的男孩儿都称儿娃子，所有的女孩儿都称女娃（合音 nüā）子；所有成人已婚男性统称男将，所有成人已婚女性统称女将；所有的上辈统称长辈或老辈子；所有的下辈统称晚辈；同辈男性女性统称姊妹。年龄大小不同有固定称谓，所有与祖父年龄相当的称爷爷奶奶或某姓爷爷、某姓奶奶。如李爷爷、王爷爷、王奶奶等；所有的小偷统称贼（zèi）娃（wā）子或三只手，所有的莽汉、痴呆、傻子都可称二球，所有的懒人都可称懒汉或黄鳝或懒婆娘等。\n\n动植物称谓方面，比较有特色的有：豌豆八哥（布谷鸟）、长虫（蛇）、蛐蜷（蚯蚓）、狼巴子（狼）、苞谷（玉米）、莲菜（藕）、牛吭气（半夏）、牛抵钻（半夏果）等。\n\n时空间称谓方面，有特色的有：年逝（去年）、门儿（明天）、晌午（中午）、连猛儿（立即）、高头（上面）、底下（下面）、河趴（河滩）等。\n\n人的身体、疾病、品行称谓方面，有特色的有：胳奓窝（腋窝）、手脖子（手腕）、日噘（批评）、干气（含羞）、日弄人（捉弄人）、扳跤（摔跤）、恶骚（厉害）、稀打会儿（险些）、兑差（凑合）、秧秧的儿（萎靡不振）、腻得很（高傲自大）等。\n\n俏皮话方面，有特色的有：“人是铁饭是钢，一顿不吃心发慌”，“捡个棒槌当根针”，“喝一辈子酒，丢一辈子丑；抽一辈子烟，烧一辈子手”等。\n\n在读书的过程中仿佛回到了儿时的语言环境里，那些熟悉的乡音，夹杂着童年的欢笑与纯真，随着文字缓缓流淌进我的心中，我似乎能够闻到故乡泥土的气息，听到老街坊间的亲切问候，感受到那份独特的归属感。这种语言不仅是沟通的工具，更是一种情感的纽带，它连接着过去与现在，让我即使身处他乡，也能通过书页上的字句重温那段无忧无虑的日子。这份体验不仅仅是一次简单的阅读经历，而是一场心灵之旅，让我更加珍惜自己的文化根源，并渴望将这份珍贵的文化遗产传承下去。\n\n---\n\n- 第一篇的前半部分是自己写的加上 AI 修改，后半部分的感想是 AI 写的，后续人工修改。\n- 第二篇的第一段是从书里总结的，后面全是 AI 缩写原书内容，后续人工修改。\n- 第三篇的前半部分是自己写的，后边全是摘抄报菜名，最后是引导句加 AI 扩写的。\n","source":"_posts/过去的笔记.md","raw":"---\ntitle: 过去的笔记\ndate: 2023-09-26 17:45:00\npermalink: wait.html\nmermaid: true\nmathjax: true\n---\n\n## JSON\n\nJSON（JavaScript Object Notation，JavaScript 对象表示法）是一种轻量级的数据交换格式，可以看成是字符串。和 JavaScript 没什么关系，就像 JavaScript 和 Java 没什么关系一样。从 Python 的角度来看，一个 JSON 文件是一系列列表和字典的嵌套。\n\nJS：\n\n```js\njsonStr = JSON.stringify(jsObj);\njsObj = JSON.parse(jsonStr);\n```\n\nPython：\n\n```python\nimport json\njson_str = json.dumps(py_obj)\npy_obj = json.loads(json_str)\n```\n\n<!--more-->\n\n## 计算机网络\n\n### 接网线头的流程和注意事项\n\nRJ45 水晶头的接线方式有两种，多使用 T568B：橙白|橙、绿白|蓝、蓝白|绿、棕白|棕。\n\n1. 用网线钳的圆孔把网线的表皮剥开，转一下不要使太大力\n   - 露出来里面的线的长度长一点，比两倍水晶头的长度长\n2. 你会看到有四对缠在一起的线，把它们分开成一根一根的\n   - 这时候先不用管它们的顺序\n3. 用力把它们捋直，多捋几次\n4. 它们缠在一起的时候是：橙白|橙、绿白|绿、蓝白|蓝、棕白|棕，接线的时候要把中间两根交换一下位置\n5. 用网线钳的刀把它们从中间剪断，保证这几根线的末端是平齐的。注意两点：\n   - 哪里排列地最整齐紧密，就从哪里剪\n   - 留下的长度不要比一倍水晶头的长度过长，否则露出来的部分容易损坏。这是一个**反面的例子**：这几根线的下面留得太长了，没还有完全地分开\n\n<img src=\"/blog/images/rj45.webp\">\n\n6. 把这几根线插入到水晶头里。注意：水晶头的卡扣是朝下的\n   - 如果顺利，这八根线会待在它们的八个凹槽里，它们的头上有八个片片\n7. 把水晶头插入网线钳的槽里，用网线钳用力把这八个片片刺入线的内部，在刺的时候能感受到阻力\n8. 两头都接好之后，用工具测试是否联通\n\n### 概述\n\n世界上第一个网页：[http://info.cern.ch](http://info.cern.ch)\n\nRFC 文档：“请求评论”（Request For Comments）的文档，公开发布的互联网建议标准，请求公众评论。最后制定互联网标准 STD。\n\n互联网服务提供者（Internet Service Provider），可以是移动联通电信公司，也可以是非营利组织。主干 ISP：国 | 地区 ISP：省 | 本地 ISP：省以下。两个同级 ISP 交换信息时，可以通过互联网交换点（Internet eXchange Point）IXP，而不必通过上级 ISP。\n\n计算机网络分边缘部分和核心部分。边缘部分是我们所有人直接使用的主机，如手机和电脑。核心部分是除了边缘主机之外的所有硬件设施，如交换机、路由器、网线。接入网是边缘部分向核心部分过渡的部分。\n\n边缘部分的通信分 C/S 模式和 P2P 模式。两者的区别是学生向老师请教题目和学生之间互相讲题，在下载文件之后做不做种。\n\n核心部分的通信：电路交换是提前联系用一辆专车运货；分组交换是把货物拆分成小的快递，再经过各种站点发送出去；报文交换是将货物作为一个整体，通过多个中转站运送。前两者的区别是一手和多手，后两者的区别是切不切片。\n\n分组交换：\n\n1. TCP 协议把报文分组，每组写上头部信息。（包裹大包分成小包，写上序号、寄出地和目的地等）\n2. 通过路由器一级一级地转发到目的地。\n\n{% mermaid gantt %}\ntitle 分组交换（甘特图）\ndateFormat s\naxisFormat %S\n\nsection 1 号包\n从 A 到 B :0, 5s\n从 B 到 C :5, 5s\n从 C 到 D :10, 5s\n\nsection 2 号包\n从 A 到 B :5, 5s\n从 B 到 C :10, 5s\n从 C 到 D :15, 5s\n\nsection 3 号包\n从 A 到 B :10, 5s\n从 B 到 C :15, 5s\n从 C 到 D :20, 5s\n{% endmermaid %}\n\n- 0-5 时间 1 号包裹从 A 站到 B 站\n- 5-10 时间 1 号包裹从 B 站到 C 站、2 号包裹从 A 站到 B 站\n- 10-15 时间 1 号包裹从 C 站到 D 站、2 号包裹从 B 站到 C 站、3 号包裹从 A 站到 B 站\n\n3. 把各个包裹合并。\n\n### 物理层\n\nRJ45 水晶头的接线方式有两种，多使用 T568B：橙白|橙、绿白|蓝、蓝白|绿、棕白|棕。传的是数字信号。\n\n- 物理层之下的传输媒体\n  - 导引性传输媒体：双绞线、光缆、同轴电缆、架空明线\n  - 非导引性传输媒体：空气或真空\n\n集线器工作在物理层。\n\n- 通信双方的交互方式\n  - 单向通信（单工）：一段单行道。电视、广播。\n  - 双向交替通信（半双工）：一段有两个车道的马路，但是规定在一边的车道有车正在走时，另一边（相反方向）的车道不能有车走。对讲机。\n  - 双向同时通信（全双工）：一段正常的两个车道的马路。\n\n编码方式：编码的终点是码，即数字信号。\n\n如何把比特和电压互相转换。\n\n```\n 1  1  0  0  1\n\n‾‾‾‾‾‾______‾‾‾    # 极性不归零电平 Polar NRZL，Non-Return-to-Zero level\n\n‾‾‾_________‾‾‾    # 极性不归零反转 Polar NRZI，Non-return-to-zero inverted，边界遇 1 跳变\n\n-‾--‾--_--_--‾-    # 极性归零 Polar RZ，Return-to-Zero，正脉冲凸，负脉冲凹\n\n‾_|‾_|_‾|_‾|‾_|    # 曼彻斯特编码（G.E. Thomas Convention）\n\n‾_|_‾|_‾|_‾|‾_|    # 差分曼彻斯特编码（G.E. Thomas Convention）\n```\n\n曼彻斯特编码：中心始终跳变\n\n- G.E. Thomas Convention：\n  - 中心向下跳变，`‾_`，`1`\n  - 中心向上跳变，`_‾`，`0`\n  - 简记：**下为 1**\n- IEEE 802.3 Convention 和上面的定义相反\n\n差分曼彻斯特编码：中心始终跳变\n\n- G.E. Thomas Convention：\n  - 左边界无跳变，`1`\n    - `_|_‾`\n    - `‾|‾_`\n  - 左边界有跳变，`0`\n    - `_|‾_`\n    - `‾|_‾`\n  - 简记：**左连为 1**\n- IEEE 802.3 Convention 和上面的定义相反\n\n### 数据链路层\n\n解决三个问题：发出去之后，哪一方接收；传输何时开始，何时结束；判断是否有传输错误\n\n网卡：\n\n- 负责把有线或无线电信号与比特流互转。工作在物理层和数据链路层。\n- 与 CPU 和存储器并行通信，与局域网串行通信\n- 接收并缓存 MAC 帧，帧的目标地址不是它自己时，或者不符合格式、校验失败时就丢弃\n- 安装驱动到操作系统，实现以太网协议\n\n> MAC\n\nMAC 地址有 6 个字节。全 1 的地址是广播地址\n\nWindows 查看网络适配器的 MAC 地址：ipconfig /all\n\n- 前三个字节是 IEEE 的注册管理机构分配的，后三个字节是厂家自行分配的\n- 第一个字节最低位：0 为单播，1 为多播\n\n> 透明传输\n\n帧定界符 SOH 0x01、EOT 0x10，转义字符 ESC 0x1B\n\n如果数据长度超过了 MTU，会被分割成多个帧。\n\n下到物理层：在 MAC 帧前面插入 7 字节的前同步码和 1 字节的帧定界符：就是 `10101010 10101010 ... 10101010 10101011`。交替的 10 用于时钟同步，最后一个字节的最后一个比特变了，告诉接收端，后面的就是 MAC 帧。不用标记帧结束，因为是曼彻斯特编码，一直在跳变，脱离原本的规律了就是帧结束了。\n\n> 差错检测\n\n比特差错：01 错了。误码率（BER）：平均每传送 $\\mathrm{(BER)^{-1}}$ 个比特，会有一个比特出错。\n\n传输差错：接收方没有收到某一个帧，或者收到了重复的帧，或者收到帧的顺序错了\n\n**FCS**\n\n帧检验序列 Frame Check Sequence，确保无比特差错\n\n1. 提前规定冗余码有 3 位\n2. 提前规定一个除数 $P$ ，比冗余码的长度多一位，如 `1100`\n3. 把待传的数据 `1001 0001` 后边补上冗余码长度个 0，用除数除它\n4. 不管大小，`1` 开头就商 `1`，`0` 开头就商 `0`：\n\n```txt\n        1\n    --------------\n1100|1001 0001 000\n     1100\n     ------\n      101 0\n```\n\n5. 相减，相当于异或\n6. 继续除，最后的余数 `100` 就是冗余码\n7. 把冗余码添加到原数据的末尾\n\n**CRC**\n\n循环冗余检验 Cyclic Redundancy Check\n\n接收方把收到的、经发送方添加了冗余码后的数据再用 $P$ 去除。传输没出错 -> 余数为零，反之为极大概率。\n\n除数 $P$ 还有一种记法，叫生成多项式 $P(X)$：如 `1100` 记作：$X^3+X^2$\n\n> 交换机\n\n交换机工作在数据链路层，全双工。并且不使用 CSMA/CD 协议，但仍然使用以太网的帧结构。\n\n交换表的结构：MAC 地址、端口号、有效时间、状态标志\n\n源机器发送数据帧 → 交换机记录源 MAC 地址 → 交换机查找目标 MAC 地址 → 如果目标未知，广播数据帧 → STP 确保广播不会形成环路。\n\n交换机分为直通交换和存储转发。直通交换不校验 FCS，直接读 6 字节的目标地址（有时包含前导码）。\n\n> 以太网\n\n以太网是局域网的一种实现方式，与 Wifi 的区别是后者不用网线。\n\n- DIX Ethernet V2 和 IEEE 802.3 是以太网的协议，使用 CSMA/CD（冲突检测）\n- IEEE 802.11 是 Wifi 的协议，使用 CSMA/CA（冲突避免）\n\n局域网共享信道，为避免冲突，可采用静态划分信道（复用）或动态媒体接入控制\n\n以太网 V2 的 MAC 头部：目标 MAC + 源 MAC + 类型 0800【IPv4】/80DD【IPv6】\n\n- MAC 帧的格式\n  - （带宽为 $\\mathrm{10Mbit/s}$ 的）以太网 V2：\n    $$\n    6 + 6 + 2 + (46 \\sim 1500) + 4 = (64 \\sim 1518) 字节\n    $$\n    其中 $\\mathrm{64Byte = \\dfrac{51.2 \\mu s \\times 10Mbit/s}{8bit/Byte}}$，减去 18 字节的首部和尾部后，得到数据部分的最小长度 46 字节。\n\n100BASE-T 以太网：\n\n- 使用双绞线（T），带宽为 100Mbit/s。\n- 标准是 IEEE 802.3u，半双工时使用 CSMA/CD 协议，全双工时不使用。\n- 争用期为 5.12 μs，帧最小间隔 0.96 μs，是 10 Mbit/s 以太网的十分之一。\n\n### 网络层\n\n> IPv4 分类编址\n\n4 个字节。\n\n- A 类地址：0 + 7 位网络号 + 3 字节主机号，首字节 0 到 127\n- B 类地址：10 + 14 位网络号 + 2 字节主机号，首字节 128 到 191\n- C 类地址：110 + 21 位网络号 + 1 字节主机号，首字节 192 到 223\n\n主机号全 1 是广播地址，全 0 是该子网。\n\n私有地址：用于局域网（LAN）内部，不可直接在互联网上路由。\n\n- A 类：10.0.0.0 到 10.255.255.255\n- B 类：172.16.0.0 到 172.31.255.255\n- C 类：192.168.0.0 到 192.168.255.255\n\n> 无分类编址 CIDR\n\n子网掩码：用于标记用 IP 地址前面的几位来表示网络地址。\n\n子网掩码类似 `255.248.0.0` （`11111111 11111000 00000000 00000000`），即用前面 13 位表示网络地址，后面的位表示主机地址。记作 `IP地址/13`。\n\n### 计算\n\n信道长度、带宽和信噪比会影响数据在信道中传输的速率，而信号传播速度（电磁波在介质中的传播速度）不会。\n\n信噪比越大，接收方接收到的信息失真越少。两种表示方式：\n\n- $\\dfrac{S}{N} = \\dfrac{信号平均功率}{噪声平均功率} = 10^{\\mathrm{dB}/10}$\n- $\\mathrm{dB} = 10 \\lg\\dfrac{S}{N}$\n\n计算传输速率时，取奈氏准则和香农公式的结果小的。\n\nKibi：内存、存储容量，KiB = KB = 1024B\n\nKilo：网络带宽，K = 1000，国际单位制的词头\n\n$\\mathrm{bit/s}$\n\n- 速率\n- 吞吐量：指实际速率，进量 + 出量。有多条链路时，吞吐量由瓶颈链路决定。\n- 某信道的最高速率：时域上的带宽\n- 有效数据（速）率：$\\mathrm{\\dfrac{数据长度}{发送时间+RTT}}$\n\n$\\mathrm{Hz}$\n\n频域上的带宽 W：信号频率范围的宽度\n\n秒\n\n- 发送时延：网卡发送数据的时间，与信道长度无关。$\\mathrm{\\dfrac{bit}{bit/s}} = \\dfrac{数据长度}{发送速率}$\n- 传播时延：电磁波在网线或空气中传播的时间。与信道长度有关。$\\mathrm{\\dfrac{m}{m/s} = \\dfrac{信道长度}{信号传播速率}}$\n- 处理时延：主机或路由器收到分组后，对分组进行处理的时间。\n- 排队时延：分组在路由器输入队列和输出队列里排队的时间。\n- ……->输出排队->发送->传播->输入排队->处理->输出排队……\n- RTT：往返时间（Round-Trip Time）\n\n这里忽略了在接收和发送之间的排队时间和处理时间。\n\n{% mermaid gantt %}\ntitle RTT（甘特图）\ndateFormat s\naxisFormat %S\n\n    section RTT\n    RTT :3,17s\n\n    section A\n    发送           :0,3s\n    接收    :17,3s\n    ……    :20,4s\n\n    section 传播\n    从A到B传播    :1,8s\n    从B到A传播    :11,8s\n\n    section B\n    接收      :7,3s\n    发送    :10,3s\n\n{% endmermaid %}\n\nbit\n\n时延带宽积：$\\mathrm{s \\times bit/s = 传播时延 \\times 带宽}$\n\n已经从发送端发出，但尚未到达接收端的比特数。又叫以比特为单位的链路长度。\n\nm/bit\n\n每比特宽度：每个比特在信道中占据的长度。\n\n$$\n\\begin{aligned}\n&\\mathrm{m/bit = \\dfrac{m}{bit} = \\dfrac{信道长}{比特数}} \\\\\n&\\mathrm{m/bit = \\dfrac{m/s}{bit/s} = \\dfrac{信道传播速率}{信道当前带宽}}\n\\end{aligned}\n$$\n\n其他\n\n利用率：$网络利用率 = 1 - \\dfrac{空闲时延}{当前时延}$\n\n利用率越高，当前时延越大（堵车）。\n\n> 码元\n\n用来表示码的单个元。类比信号，码就是波形，码元就是在发送和解读波形时，可以分辨的最小单位波形。码元种类数是信号的状态数 $n = 2^x$\n\n- 码元对应的比特数 $x = \\log_2(n)$\n- 当 $0 < x < 1$时，一个比特由多个码元表示\n\n> 比特率和波特\n\n$\\mathrm{bit/s} = 2Wx = 2W\\log_2(n)$\n\n符号速率（码元每秒）也叫波特 Baud\n\n> 奈奎斯特准则\n\n无噪声低通信道中，保证接收方接收符号不出错时的速率上限为 2W x 码元数，W 为频域带宽 Hz，单位为波特。\n\n> 香农公式\n\n速率是有极限的，但要信息传输速率低于极限速率，就一定能找到某种方法实现无差错的传输。\n\n香农—哈特莱容量定理，考虑到了信道有噪声：\n\n$$\n\\begin{aligned}\n信道极限速率 & = \\mathrm{bit/s = Hz \\times bit} \\\\\n& = W \\log_2(1 + \\dfrac{S}{N}) \\\\\n\\end{aligned}\n$$\n\n> 正交振幅调制（QAM）\n\n$$\n\\begin{aligned}\n调制后的信号 & = 振幅 \\times 载波(相位) \\\\\ny & = A\\sin(\\omega x + \\phi) \\\\\n\\end{aligned}\n$$\n\n用不同的**振幅**和**相位**排列组合，来表示（承载）不同的基带信号，比只调幅/只调频/只调相的信息密度高。\n\n使用 $x$ 个振幅和 $y$ 个相位的 QAM 时，一个码元对应的比特数是 $\\log _2(xy)$ 向上取整。\n\n> 信道复用\n\n频分复用（FDM）：Frequency Division Multiplexing，把一个大频带划分成若干个小频带，把不同的信号分别调制到这些小频带里。\n\n```\n^频率\n|\n|-----------------\n|C信号\n|-----------------\n|B信号\n|-----------------\n|A信号\n|-----------------\n|\n|----------------------->时间\n```\n\n时分复用（TDM）：把时间分割成一个个 TDM 帧，每帧内分为若干个时隙，每个时隙内分别传送不同的信号。相当于 CPU 单核进程并发。每个 TDM 帧内保证每组信号都传了，就是没传也要保留留给它的空时隙。这造成信道利用率不高。\n\n```\n^频率\n|\n|--------------------------\n|A|B|C|A|B|C| |B|C|A| |C|\n|--------------------------\n|     |     |     |     |\n|TDM帧|TDM帧|TDM帧|TDM帧|\n|------------------------------>时间\n```\n\n统计时分复用（STDM）：在每个 STDM 帧内，时隙数量小于信号种类数量。为每组信号动态分配时隙，比如 B 信号断了可以先不传它。\n\n**有四组信号 ABCD：**\n\n```\n ^信号\n |\n |--------------------------\nD| d | d | d | d |\n |--------------------------\nC|   | c | c | c |\n |--------------------------\nB| b | b |   |   |\n |--------------------------\nA| a |   | a | a |\n |------------------------------>时间\n```\n\n**STDM：**\n\n```\n^频率\n|\n|--------------------------\n|a|b|d|b|c|d|a|d|c|c|d|a|\n|--------------------------\n|     |     |     |     |\n|STDMf|STDMf|STDMf|STDMf|\n|------------------------------>时间\n```\n\n波分复用（WDM）：就是光的频分复用，但是用波长表示。\n\n码分复用（CDM）：CDMA 通过为每个用户分配一个独特的扩频码来实现信号的分离，这些扩频码之间是正交的。\n\n- 编码：某用户的码元内积扩频码，与其他用户的叠加成混合信号。\n- 解码：混合信号内积用户的扩频码，得到一个码元。\n\n## 计算机组成原理\n\n注意：这里的知识是未经验证的，不一定正确。\n\n### 计算机体系概论\n\n> “存储程序”特点？\n\n早期计算机通过硬件开关或打孔纸带输入程序，程序和数据是分离的。老冯提出了把毒和鸡汤存储在一起的思想：把程序和数据存在一起，存在存储器里。\n\n> 计算机的五个子系统？\n\n我们为什么要造计算机，要算个什么东西。所以输入、输出、算术逻辑运算肯定是有的。怎么算，你在草稿纸上算题，得有你这个人控制，得有中间结果。所以控制和存储是有的。\n\n> 主机？\n\n主机就是你引脚直接装在主板上的东西，粗略地理解为 CPU + 内存。显示器和鼠标键盘属于输入输出系统，用线连在机箱外面。剩下三个系统就是主机：控制单元和算术逻辑单元 ALU 合称中央处理单元 CPU；存储系统包括硬盘、内存、cache、寄存器，这四个是体积越小、容量越小、价格越贵。但是：硬盘不属于主存，不算在主机里面，它和输入输出系统合称外部设备，即“用户与计算机通信的界面”。\n\n> ALU？\n\n即算术逻辑单元 Arithmetic and Logic Unit\n\n> 指令和数据？\n\n指令和数据都是二进制的，在形式上无法区分，由控制器判断谁是指令，谁是数据。判断的依据是：当前处于哪个访问阶段，是处于取指周期还是执行周期。当程序被启动执行后，其指令和数据从外存被装进内存。\n\n> 取指执行过程？\n\n你上司给你发了一张纸，这张纸就是内存。纸上写了一些暗号：午时三刻，当街问斩。这个暗号就是指令，问斩是操作码，当街是地址码。你收到这张纸后，把指令从纸上取到你脑子缓冲区里，你脑子缓冲区就是指令寄存器，你至少得反应一会，这个反应的过程就是译码，\n\n> K？\n\n按具体上下文，单独一个 K 可指 KB，即 2 的 10 次方个字节（Byte）\n\n> 汇编语言？\n\n汇编语言与具体的机器结构（指令集架构）有关，其源程序不能直接在机器上执行，还得过一道汇编器。\n\n> 机器语言？\n\n计算机硬件可以直接执行的是机器语言程序，一系列 0 和 1。不是硬件描述语言，硬件描述语言是写电路的，用这种语言描述电路结构。汇编语言还要过一遍汇编器。\n\n> 机器字长？\n\n机器字长是二进制的位数，是 ALU 和通用寄存器的宽度。指令寄存器和浮点寄存器的宽度可能与其不等。\n\n> 面向量纲/单位计算？\n\nCPI 的单位是：个(时钟周期)每个(指令)\n\n时钟周期的量纲是：时间。这一个时钟周期有它的具体时间长度。\n\n主频的量纲是：频率，时间的倒数。一秒钟被分割成了有多少个时钟周期。\n\nMIPS 的单位是：(百万)个(指令)每个(秒)\n\n这里的 M 是 10 的 6 次方，主频里的 G 是 10 的 9 次方，往上指数+3 为 T P E B\n\n做计算题，先搞明白指令总数、时钟周期总数。指令总数乘上 CPI 等于时钟周期总数。时间就是时钟周期总数乘上每个时钟周期所占的时间长度。\n\n在纸上画图：一个秒被切割成了一系列时钟周期，每个时钟周期执行一条指令。直接设未知数，列方程。\n\n### 运算方法和运算器\n\n幺二八六四 三二幺六 八四二幺 五二五幺二五 零六二五\n\n在发草稿纸之后，直接把 0 到 F 全写下来（想当年笔者可以把元素周期表画下来（除了镧系和锕系），包括一直到气奥的各个元素名、绝大部分元素符号以及常见的相对原子质量，还有 38324 14122 横批 4546 之类的。但是现在不行了。还有 2^31 - 1 = 2147483647，这是四字节 int 类型的最大值，这个数字最早在《植物大战僵尸》的修改器里见到，如果你无尽模式或者自选关过了这一波，它的程序会崩掉）\n\n> 原码反码补码移码？\n\n正整数的原码反码补码都是它的二进制按照某一个特定的位数表示，前面补零。\n\n负整数的原码，最高位为符号位 1，后面为它的二进制形式按照某一个特定的位数表示，前面补零。\n\n负整数的反码，为原码除符号位的所有位按位取反后的结果。\n\n负整数的补码，为其反码 + 1，按位截断。\n\n移码 = 【真值 + （最高位所代表的 2 的次方值 - 1）】的无符号整数表示\n\n如八位下 5 的移码是 `5 + 2^(8-1)` = `5 + 127` = `4 + 128` = `1000 0100`\n\n> 八位下，零的表示形式？\n\n正零的原码：00000000\n\n负零的原码：10000000\n\n正零的反码：00000000\n\n负零的反码：11111111\n\n正零/负零的补码：00000000\n\n> -26？\n\n26 = 16 + 8 + 2\n\n= 10000 + 1000 + 10\n\n= 00011010\n\n-26 = 10011010（原）= 11100101（反）= 11100110（补）= E6H\n\n> BCD 码？\n\n用二进制编码的十进制数(Binary-Coded Decimal)。对于 8421 码，是把十进制数的每一个位转换成一个四位的二进制数。\n\n如(1145)\\_10 = (0001 0001 0100 0101)\\_BCD\n\n> 进制转换？\n\n分向十进制转、从十进制向外转、二八十六互转。\n\n向十进制转：各个位的十进制值乘上以原进制为底、该位与小数点的相对位置为指数的幂，再相加。其中小数点左边一位的相对位置为零，小数点右边一位的相对位置为负一，以此类推。\n\n从十进制向外转：除 k 取余法+乘 k 取整法。整数部分用短除法列竖式，用新进制的基数去除，除到商为零为止，之前的所有余数从下向上排列为新数的整数部分；小数部分乘上新进制的基数，取积的整数部分为新数的小数部分，积的小数部分继续与基数乘，直到积的小数部分为零或者出现循环节为止。\n\n对于一个 1000 以内的十进制数转成二进制，除 k 取余法还是太教科书了，你可以直接把它拆分成 2 的幂相加，因为加减法不容易出错。\n\n二八十六互转：四位二进制位与一位十六进制位在[0,16)这个整数范围内一一对应。小数点前后的部分直接按片段替换。三位二进制位与一位八进制位在[0,8)这个整数范围内一一对应。小数点前后的部分直接按片段替换。八与十六互转时，以二作为桥梁。\n\n> 浮点数的编码方式？\n\n对于 32 位浮点数 float，即单精度浮点数，最高位为符号位，后 8 位为阶码，再后 23 位为尾数。\n\n阶码决定范围，尾数决定精度。\n\n浮点数转真值：把 1.与 23 位尾数缝合起来，转成十进制；把阶码作为移码求真值，作为 2 的指数；两者相乘，带上符号位。\n\n普通数转浮点数：把**绝对值**先转成二进制，小数点挪到第一个 1 的后面，为符号(1.xxx)乘 2^指数；符号放最高位；指数转为移码放后 8 位；小数点后的部分取“0 舍 1 入”的 23 位。\n\n（意思就是：1.7 和 -1.7 只差一个符号位）\n\n对于 64 位双精度浮点数 double：阶码变成了 11 位\n\n> float 的五种形式？\n\n32 位二进制浮点数，她的位数是有限的，不可能双射无限多（阿列夫一）的（实）数。\n\n- 阶码全零，尾数全零：正/负机器零\n- 阶码全零，尾数不全零：非规格化数\n- 阶码全 1，尾数全零：正/负无穷大\n- 阶码全 1，尾数不全零：不是数（NaN）\n\n她的阶码有 8 位，当不是全零或全一时，我们称她为规格化的。把阶码移码的身份转回正经数后，指数范围为[-126,+127]，不考虑尾数，对应真值约 2^(-126) 到 2^127，又约 10^(-38) 到 10^38。\n\n浮点数原码运算时，判定结果为规格化数的条件是：尾数的最高位为 1\n\n> 奇偶校验？\n\n看 1 的个数\n\n> 串行运算器？\n\n从低位到高位逐位运算\n\n> 加法器采用先行进位的目的？\n\n加速传递进位信号（没明白）\n\n> 采用双符号位的定点补码运算器，何时结果溢出？\n\n双符号位不同（没明白）\n\n### 存储系统\n\n> 存取周期？\n\n存储器进行连续读和写操作所允许的最短时间间隔（没明白）\n\n> 存储器采用分级存储的目的？\n\n钱、容量、速度三者不能兼得。\n\n> 寻址范围？\n\n1. 内存能存储多少位二进制数\n2. 多少位二进制数作为一个地址\n3. 两者相除，结果无单位\n\n> 已被淘汰的存储器？\n\n磁芯存储器\n\n> 主存？\n\n主存由 RAM(Random Access Memory，随机存取存储器)和 ROM(只读存储器，Read-Only Memory)组成。同一个存储器里，每个存储单元宽度相同\n\n> PROM? EPROM?\n\n前者是可编程(P)的 ROM，后者是可擦除的 PROM。\n\nPROM 不一定可被改写。EPROM 可被改写多次，但不能作 RAM\n\nU 盘、TF 卡属于闪存，闪存属于 EPROM\n\n> SRAM? DRAM?\n\n一静一动，一快一慢。\n\n前者用于 CPU 缓存。后者用于主存、需要定时刷新、行列地址引脚复用(RAS 行地址选通信号引脚、CAS 列地址选通信号引脚)\n\n> 磁盘和磁带？\n\n存取时间与存取单元的物理位置有关。磁带串行存取，磁盘部分串行存取。\n\n> 存储芯片的地址线数据线？\n\n存储容量=地址数\\*位宽\n\n数据线或引脚数目=位宽\n\nSRAM 地址线或引脚数目=log_2(地址数)，与位宽无关\n\nDRAM 地址线或引脚数目=0.5log_2(地址数)，与位宽无关\n\n> MAR? MDR?\n\n存储器地址寄存器、存储器数据寄存器\n\nMAR 宽度=log_2(地址数)\n\nMDR 宽度至少为每次读写操作最多存取的位数\n\n> 某一 RAM 芯片其容量是 512\\*8 位，除电源和接地端外该芯片引线的最少数目是多少？\n\n数据线 8+地址线 log2(512)+片选线 1+读写线 1=19\n\n> 双端口存储器？\n\n左右端口地址码相同时，发生读写冲突\n\n> 多体交叉存储器解决的问题？\n\n提高主存的数据传输率\n\n> cache 的功能全部由谁实现？\n\n硬件\n\n> 与 cache 命中率无关的是？\n\n主存的存取时间\n\n> cache 的地址映射？\n\n主存 到 cache\n\n多对一：直接映射\n\n多对多：全相联映射\n\n组相联映射：\n\n1. 把主存和 cache 都分为若干组\n2. 对于主存的某一组，其块数=cache 组数。其所有块分配给 cache 的各个组，对于每一块，其被分到的 cache 组固定、不一定分配到 cache 组的哪一行\n\n> 某计算机的 Cache 共有 16 行，采用 2 路-组相联映射方式(即每组包括 2 行)。存储器按字节编址，每个主存块大小为 32 字节。主存 135 号单元所在主存块应装入的 cache 组号？\n\n简记： cache 组号 = 主存单元号 // 主存块字节数 % cache 组数\n\ncache 分 8 组，每组两行。则主存分若干组，每组 8 块。\n\ncache 组号 = 主存块号 % 主存每组块数\n\n= 单元号 // 字节数 % 主存每组块数\n\n= 135 // 32 % 8\n\n= 4\n\n简记是什么意思？因为笔者写出来的东西都是笔者不会的，至少是在写出来之前的那一段时间是不会的，如果笔者在写出来之后会了，那么就不会使用“简记”这两个字了。简记的意思是：我对这个知识点没搞明白，也不想搞明白，所以按感性提了一个公式出来，这个公式根本记不住，没有内化到自身。“简记”在笔者的潜意识里有两层麻痹自我的意思：简的意思是：我没搞懂；记的意思是：我记不住。\n\n> cache？\n\ncache 是易失型存储器。当程序具有较好的访问局部性时，能更好地发挥 cache 的作用。\n\n> 闪速存储器？\n\n闪速存储器是一种高密度，非易失的读/写半导体存储器\n\n> 下列 cache 替换算法中，速度最快的是？命中率最高的是？LFU LRU 随机替换\n\n随机替换 LRU\n\n### 指令系统\n\n> 程序控制类指令的功能？\n\n改变程序执行的顺序\n\n> RISC？\n\n指令长度固定，减少指令数，增加寄存器数\n\n> 一地址格式的指令？\n\n一地址格式的算术运算指令，另一个操作数隐含在累加器里\n\n一地址格式的指令，可能有一个操作数，也可能有两个操作数\n\n> 怎么区分寄存器中的值是地址还是数据？\n\n指令操作码或寻址方式位\n\n> 一条指令中，操作数的寻址方式？\n\n看指令地址码是什么：\n\n- 操作数所在的存储单元：寄存器间接寻址\n- 操作数所在的存储单元地址：直接寻址\n- 操作数所在的寄存器编号：寄存器直接寻址\n- 操作数本身：立即寻址\n\n### CPU 性能指标\n\n$T$ 时钟周期：计算机中最短的时间。类比：一面有秒针的钟，最短时间为 1 秒。类比：普朗克时间。类比：“一周”的“最短时间”为“天”\n\n$f$ 主频/时钟频率：一秒钟之内，包含多少个时钟周期。对于一个可以精确到 0.01 秒的秒表，其“主频”为 100Hz\n\n$N_\\mathrm{C}$ 时钟周期数：天数、Num of Cycle\n\n$I_\\mathrm{N}$ 指令数：任务数、Instruction Num\n\n$\\mathrm{CPI}$ (Cycle Per Instruction)：每条指令平均时钟周期数。完成每个任务的平均天数。你的时钟周期为“天”，有 100 个任务(指令)要完成，完成它们共花了 200 天。你的 CPI 为 2 天/任务\n\n$\\mathrm{CPI} \\times I_\\mathrm{N} = N_\\mathrm{C}$\n\n$\\mathrm{MIPS}$：百万条指令数/秒\n\n$\\mathrm{FLOPS}$：浮点操作数/秒\n\n$t_\\mathrm{CPU}$ 执行时间：执行一段程序(若干条指令)所花费时间。\n\n$$\n\\begin{aligned}\n= & 指令数 \\times \\mathrm{CPI} \\times  时钟周期\\\\\n= & 任务数 \\times 每个任务所花天数 \\times 一天有多少秒\\\\\n= & 执行该程序所经过时钟周期数 \\times 时钟周期\\\\\n= & 花了多少天 \\times 一天有多少秒\\\\\n\\end{aligned}\n$$\n\n### 使用一个字节记录整数\n\n计算机存储的数据由一系列 `0` 和 `1` 表示，每个 `0` 或 `1` 称为一个二进制位，八个二进制位组成一个字节。一个字节的范围：\n\n`0000 0000 - 1111 1111`\n\n使用一个字节，可以表示多少种状态？对每一位来说，只有两种可能的状态：`0` 或 `1`。一共有八个不同的位，所以可以表示 $2^8=256$ 种状态。\n\n把 `0000 0000 - 1111 1111` 转换为十进制数是 $0$ 到 $255$，有 $256$ 个数。它当然可以通过进制转换，表示 $0$ 到 $255$ 的整数（也可以叫“无符号整数”）。\n\n我们想表示负数，可以这样规定：只把后面七个二进制位转换成十进制，而用第一个二进制位表示符号（其中 `0` 表示正号，`1` 表示负号），即：\n\n- `0 0000000 - 0 1111111` 表示 $+0$ 到 $+127$\n- `1 0000000 - 1 1111111` 表示 $-0$ 到 $-127$\n\n这被称为**原码**表示法。\n\n我们想用原码计算 $4 - 7$，即 $4 + (-7)$：\n\n- `0000 0100` $-$ `0000 0111` $=$ `1111 1101`，可以看到，结果不是 $-3$\n- `0000 0100` $+$ `1000 0111` $=$ `1000 1011`，可以看到，结果不是 $-3$\n\n因为有符号位干扰，但我们想**让符号位也参与计算**的同时，加和减的结果相同且满足定义。还是用符号位表示正负，后七个位表示绝对值。\n\n有一台钟（12 个数字的）慢了 3 小时，此时 `+3` 和 `-9` 是等价的。它的“循环周期”是 `12`\n\n用后七个位表示绝对值，“循环周期”就是 `128`。此时，`-7` 和 `+121` 等价\n\n采用**补码**表示法：\n\n- `0 0000000 - 0 1111111` 表示 $0$ 到 $127$\n- `1 0000000 - 1 1111111` 表示 $-128$ 到 $-1$\n\n此时计算 $4 - 7$：\n\n- `0000 0100` $-$ `0000 0111` $=$ `1111 1101`\n- `0000 0100` $+$ `1111 1001` $=$ `1111 1101`\n\n可以看到：\n\n- 正数的补码与原码相同\n- 负数的补码：\n  - 总是以“全 $1$”来表示 $-1$，然后依次往前推\n  - 原码按位取反（除了符号位）后再加一\n  - 原码从右往左第一个 $1$ 之前的位（除了符号位）按位取反\n\n### 逐位进位加法器的实现\n\n1. 用两个非门、两个与门、一个或门实现异或门\n\n```py\ndef xor_gate(a: bool, b: bool):\n    return (a and not b) or (not a and b)\n\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        print(f\"{int(a)} xor {int(b)} = {int(xor_gate(a,b))}\")\n```\n\n2. 用一个异或门、一个与门实现半加器\n\n两个一位的二进制数相加，和一位，进一位：\n\n- 0 + 0 和 0 进 0\n- 0 + 1 和 1 进 0\n- 1 + 0 和 1 进 0\n- 1 + 1 和 0 进 1\n\n和的位由异或得来，进的位由与得来：\n\n```py\ndef half_adder(a: bool, b: bool):\n    sum_ = xor_gate(a, b)\n    carry = a and b\n    return sum_, carry\n\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        s, c = half_adder(a, b)\n        print(f\"{int(a)} + {int(b)} 进 {int(c)} 和 {int(s)}\")\n```\n\n3. 用两个半加器、一个或门实现全加器\n\n两个本位的数相加后，再加上低位进的位。和一位，进一位：\n\n```py\ndef full_adder(a: bool, b: bool, carry_in: bool):\n    s1, c1 = half_adder(a, b)\n    s2, c2 = half_adder(s1, carry_in)\n    carry_out = c1 or c2\n    return s2, carry_out\n\ntruth = (True, False)\n\nfor a in truth:\n    for b in truth:\n        for c in truth:\n            s, c_out = full_adder(a, b, c)\n            print(f\"{int(a)} + {int(b)} + {int(c)} 进 {int(c_out)} 和 {int(s)}\")\n```\n\n4. 四个全加器串联实现四位加法器\n\n```py\nfrom itertools import product\n\ntruth = (True, False)\nnumbers = tuple(product(truth, repeat=4))\n\n\ndef adder(a: tuple[bool, bool, bool, bool], b: tuple[bool, bool, bool, bool]):\n    s1, c1 = full_adder(a[-1], b[-1], False)\n    s2, c2 = full_adder(a[-2], b[-2], c1)\n    s3, c3 = full_adder(a[-3], b[-3], c2)\n    s4, c4 = full_adder(a[-4], b[-4], c3)\n    return c4, s4, s3, s2, s1\n\n\ndef to_number(a: tuple[bool, ...]):\n    binary_string = \"\".join(str(int(elem)) for elem in a)\n    decimal_number = int(binary_string, 2)\n    return decimal_number\n\n\nfor a in numbers:\n    for b in numbers:\n        result = adder(a, b)\n        print(f\"{to_number(a)} + {to_number(b)} = {to_number(result)}\")\n```\n\n### 普通十进制数转单精度浮点数\n\n交叉引用[运算方法和运算器](#运算方法和运算器)\n\n- 在 IEEE 754 标准下\n\n单精度浮点数，即 32 位二进制浮点数，包含：\n\n一位符号位 + 八位指数位 + 二十三位尾数位\n\n下面的例子中，没有带尾缀的都是十进制，带尾缀 $\\mathrm{B}$ 的是二进制\n\n> 例一：以 $0.1$ 为例\n\n1. 把十进制转换为二进制\n   $0.1 = 0.0\\dot{0}01\\dot{1}... \\mathrm{B}$\n2. 用以 $2$ 为基数的科学计数法表示，并保证【尾数的小数点前是 $1 \\mathrm{B}$】\n   $= 1.\\dot{1}00\\dot{1}...\\mathrm{B} \\times (2^{-4})$\n   可以看到指数是 $-4$\n3. 计算指数位（又叫阶码），用指数加上偏移量 $(2^{e-1}-1)$\n\n   这里 $e$ 等于【用于表示指数位的位数】 $8$，所以偏移量为 $127$\n\n   则阶码为 $-4 + 127 = 123$\n\n   阶码的二进制为 `0111 1011`，注意 _阶码为无符号整数_\n\n4. 取科学计数法的【小数点后二十三位】作为【尾数位】，因为是无限的，所以要舍去一部分\n\n   它的前二十位是：`1001 1001 1001 1001 1001`\n\n   二十一至二十八位是：`1001 1001`\n\n   所以二十一至二十三位，要么取 `100`，要么取 `101`。\n\n   第二十四位是 `1`，0 舍 1 入，所以取 `101`\n\n5. 把符号位连同阶码、尾数位缝合起来\n\n   `0 | 0111 1011 | 1001 1001 1001 1001 1001 101`\n\n> 例二：以 $-12 = 1.5 \\times (2^{3})$ 为例：\n\n1. 把十进制转换为二进制\n\n   $12  = 1100 \\mathrm{B}$\n\n2. 用以 $2$ 为基数的科学计数法表示，并保证【尾数的小数点前是 $1$】\n\n   $= 1.1\\mathrm{B} \\times (2^3)$\n\n   可以看到指数是 $3$\n\n3. 计算指数位（又叫阶码），用指数加上偏移量 $(2^{e-1}-1)$\n\n   这里 $e$ 等于【用于表示指数位的位数】 $8$，所以偏移量为 $127$\n\n   则阶码为 $3 + 127 = 130$\n\n   阶码的二进制为 `1000 0010`，注意 _阶码为无符号整数_\n\n4. 取科学计数法的【小数点后二十三位】作为【尾数位】，因为是有限的，所以后面直接补零\n\n   小数点后二十三位是：`1000 0000 0000 0000 000`\n\n5. 把符号位连同阶码、尾数位缝合起来\n\n   `1 | 1000 0010 | 1000 0000 0000 0000 000`\n\n如何验证：\n\n- [在线转换](https://baseconvert.com/ieee-754-floating-point)\n- [Wikipedia](https://en.wikipedia.org/wiki/IEEE_754) | [维基百科](https://zh.wikipedia.org/wiki/IEEE_754)\n- 获取国际标准文件。IEEE 754 标准是电气与电子工程师协会（Institute of Electrical and Electronics Engineers）制定的关于浮点数表示和运算的标准。最新标准是 [IEEE 754-2019](https://standards.ieee.org/ieee/754/6210/)，对应国际标准 [ISO/IEC 60559:2020](https://www.iso.org/cms/%20render/live/en/sites/isoorg/contents/data/standard/08/09/80985.html)，预计下一次在 2028 年修订。http://snti.ru/ 这个网站分享了各种国际标准文件的磁力链接，但是可以免费下载的不全，IEC 的只有 61xxx。据说可以给站长发邮件要 `popov_al@perm.ru`，每个文件一刀乐。在 ISO 官网上下载需要 187 瑞士法郎，合 1000 多人民币。\n\n用 GDB：\n\n```c\n#include <stdio.h>\n\nint main()\n{\n    float num = 1.7;\n    printf(\"\");\n}\n```\n\n在第六行打上断点，VSCode 开调试，在调试控制台里：\n\n```sh\n-exec x/4tb &num\n```\n\n- `-exec` 执行命令\n- `x` 查看内存\n- `4` 输出 4 个单元\n  - 不写默认为 `1`\n- `t` 以二进制形式输出\n  - `x` 十六进制\n- `b` 以【一个字节】为一个单元\n  - `h` 两个字节\n  - `w` 四个字节\n  - `g` 八个字节\n- `&`取变量地址\n\n输出结果：\n\n`0x61fe1c: 10011010 10011001 11011001 00111111`\n\n从右往左排列后：\n\n`00111111 11011001 10011001 10011010`\n\n`0 01111111 10110011001100110011010`\n\n才是`float 1.7`的二进制表示。\n\n还可以直接用\n\n```sh\n-exec x/tw &num\n```\n\n输出四个字节，结果：\n\n`0x61fe1c: 00111111110110011001100110011010`\n\n## Vue 实现点击 Echarts 图表的一部分后更新另一个图表\n\n环境：\n\n```json\n{\n  \"echarts\": \"^5.5.1\",\n  \"vue\": \"^3.5.12\",\n  \"vue-echarts\": \"^7.0.3\"\n}\n```\n\n[import code generator](https://vue-echarts.dev/#codegen)\n\n组合式 API。一个 View 的父组件里面有两个 Echarts 图表的子组件 A 和 B。\n\n问题：图表的数据从何而来：\n\n1. 在清洗和导出数据的时候直接导出为 Echarts 所需要的 JSON 格式的文件\n2. 准备图表的 option 的 JSON 格式为一个计算属性，把 data 字段设置为 Ref 对象的 value\n3. 给 v-chart 标签的 :option 绑定这个计算属性\n4. 写一个更新图表的函数，fetch 一个文件，转换成图表需要的格式，赋值给那个 Ref.value\n\n点击子组件图表后的事件和参数如何传递给父组件：\n\n1. 在子组件里定义一个发射源 const emit = defineEmits([\"eventName\"]);\n2. 给子组件 v-chart 标签的 @click 绑定一个方法\n3. 该方法带一个参数 param 为图表点击后的参数，在该方法里发射事件 emit(\"eventName\", param);\n4. 在父组件里引用子组件标签处的 @event-name 绑定一个带参数 param 的方法，用于接收子组件发射的事件和参数\n\n父组件如何向子组件传消息：\n\n1. 在子组件里定义它的属性\n\n```js\nconst props = defineProps({\n  propName: {\n    type: String,\n    default: \"\",\n  },\n});\n```\n\n2. 在父组件里引用子组件标签处的 :prop-name 绑定一个 Ref 对象，更新 Ref 对象\n\n如何实现点击图表 A 的一部分后，更新图表 B：\n\n1. 把点击图表 A 后的事件和参数 emit 给父组件\n2. 父组件在 A 组件标签 @ 处绑定的方法处接收，并更新图表 B 标签的 :prop-name 的 Ref\n3. 在 B 组件里监视它 props 的变化，调用更新图表的方法\n\n```js\nwatch(\n  () => props.propName,\n  async (newVal) => {\n    console.log(\"propName updated:\", newVal);\n    await updateChartData(newVal);\n  },\n  { immediate: true } //确保在组件初始化时也执行一次回调函数\n);\n```\n\n5. 在更新图表的方法里，根据接收到的参数，fetch 不同的文件，赋给 data 的 Ref.value\n\n## Word 文档模板留存\n\n1. 对称页边距，留出一点装订距离。上下 2.5 cm，内 3 cm，外 2.5 cm\n2. 第一面是封面，第二面是目录。页码从第三面开始编 1，奇数页在右下角，偶数页在左下角\n3. 所有中英文标题都是黑体加粗，格式都是 `1.1.标题`。一级标题三号，二级标题四号，三级标题小四。不缩进\n4. 所有正文中文都是宋体，西文都是 Times New Roman。字号都是小四。首行缩进两字符，左对齐\n5. 所有标题和正文段落都是段前段后 0，行距 1.5 倍\n6. 大部分代码用截图，把 VSCode 的背景调到纯白\n7. 把 VSCode 编辑器的字体调为中文宋体，西文 Consolas\n8. 单独定义一个图片样式，应用于段落的阴影边框，宽度 0.75 磅\n9. 小部分短的代码（Shell 命令之类的）单独定义一个代码样式继承自正文，使用与图片同款的边框，首行缩进 2 字符\n10. 参考文献样式继承自“列表段落”，悬挂缩进 2 字符，左对齐，允许西文在单词中间换行\n\n## 解决 VSCode 集成终端按键与快捷键冲突\n\n`Ctrl + Shift + P` 打开命令面板，搜键盘快捷方式，搜冲突的按键，右键更改 When 表达式，加上 `&& !terminalFocus`\n\n## 用 browser-sync 实现在文件内容改变后立即刷新页面\n\n起因是：不管是直接打开 html 文件，还是用`python -m http.server 8000 --bind 127.0.0.1`，在修改保存 html 文件后浏览器都不能立马刷新。\n\n```sh\nnpm install browser-sync\n```\n\n```sh\nnpx browser-sync start --server --files \".\"\n```\n\n`--files` 后指定要监视的文件。\n\n`.` 表示监视当前目录以及子目录下的所有文件。\n\n可以改成 `*.html`，`public/*.*` 等。\n\nhtml 文件里至少得有一对`<body>`标签，要么没法自动刷新。\n\n## Python\n\n[本体](https://docs.python.org/zh-cn/3/tutorial/whatnow.html)\n| [Anaconda](https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/)\n| [PyPI](https://pypi.org/)\n\n### Anaconda\n\n不要把包都安到 base 环境里。\n\n```sh\nconda env export > environment.yml # 导出当前环境依赖\nconda env create -f environment.yml # 重建环境\nconda create -n xxx\nconda env remove -n xxx\nconda activate xxx\nconda deactivate\nconda list\nconda list numpy\npip list\npip show numpy\n```\n\n### 报菜名\n\nPython 的标准库有上百个。用 `import` 还是 `from ... import ...`，后面加不加 `as` ，以易读为主。因为代码是给人看的。\n\n使用 `from xxx import *` 类似于：你在搭积木的时候，闭着眼睛把一整个塑料袋的积木全倒出来，然后闭着眼睛摸一个、闭着眼睛摸一个。\n\n`import` 语句的顺序是：标准库、第三方库、自定义库。可通过 VSCode 插件 isort 解决，按 Ctrl + Shift + O 排序。\n\n在你的工程目录下面，使用 https://github.com/bndr/pipreqs 可以把你用到的所有第三方库写到依赖文件 `requirements.txt` 里。\n\n虽然 Python 的一个变量名可以赋多个类型，但在有必要的情况下，还是加上类型注解。这对 VSCode 的代码补全也有帮助：把鼠标移到一个变量名上边，如果你想要它是某一个类的对象，但是它显示为 `Any`，这时候你在它后面加 `.`，VSCode 没法给你列出它的方法。这时候你需要显式标注它的类型，比如 `foo: Bar`。或者 `assert isinstance(foo, Bar)`\n\n### 输出函数名和本地时间\n\n使用装饰器：\n\n```py\nimport datetime\n\n\ndef log(func):\n    def wrapper(*args, **kwargs):\n        print(f\"{func.__name__}，系统时间：{datetime.datetime.now()}\")\n        return func(*args, **kwargs)\n\n    return wrapper\n\n\n@log\ndef test(): ...\n\ntest()\n```\n\n上面是一种很笨的方法，我们可以用其自带的 logging 模块记录日志到文件：\n\n```py\nimport datetime\nimport logging\n\nlogging.basicConfig(\n    filename=f\"{datetime.date.today()}.log\",\n    filemode=\"w\",\n    encoding=\"utf-8\",\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\nlogging.info(...)\nlogging.warning(...)\nlogging.error(...)\n```\n\n日志有五个等级：DEBUG 调试诊断用的；INFO 确认正常运行；WARNING 是不影响正常运行的错误，如向数据库里插入一条已经存在的记录，然后忽略它；ERROR 是影响正常运行的错误，如数据库连接失败（但是你系统的其他功能可用）；CRITICAL 是你的系统的关键功能不可用（如果你的系统必须要用数据库）。\n\n### plt\n\n条形图和柱形图的区别是：前者是横着的，后者是竖着的。前者用 `plt.barh`，后者用 `plt.bar`\n\n中文字体：\n\n```py\nplt.rcParams[\"font.family\"] = \"SimHei\"\n```\n\n### 最小二乘法多项式拟合\n\n```py\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.array([48, 47, 54, 50, 73, 72, 62, 52, 47, 83, 70, 65, 48])\ny = np.array([0.42, 0.38, 0.66, 0.5, 0.99, 0.98, 0.89,\n             0.58, 0.38, 0.99, 0.98, 0.93, 0.42])\n\n# polynomial 多项式 fit 拟合\n# 第三个参数是多项式的次数，为大于等于零的整数\nz = np.polyfit(x, y, 2)\n\n# 这样一转换，可以以人可读的方式打印，可以在下面 call 它，把传参给 p 的数组转换为另一个数组\np = np.poly1d(z)\n\nprint(p)\n\n# 左闭右开的等差数列\nx2 = np.linspace(40, 100, 100)\n\n# 画散点图\nplt.scatter(x, y, color='red', label='Data Points')\n# 画曲线\nplt.plot(x2, p(x2), color='blue', label='Quadratic Curve')\n\n# xy轴标签、图题\nplt.xlabel('x')\nplt.ylabel('y')\nplt.title('Scatter plot with Quadratic Curve')\n# 图例\nplt.legend()\nplt.show()\n```\n\n### scipy.stats.某种分布.\n\n$$\n\\begin{aligned}\n\\mathrm{rvs(分布参数,size = 实验次数)} & = X\\\\\n离散型 \\mathrm{pmf}(分布参数,k = [x_1,x_2, ...]) &  = \\mathrm{P}(X = x) \\\\\n连续型 \\mathrm{pdf}(分布参数,x = [x_1,x_2, ...]) & = f_{X}(x) \\\\\n离散型 \\mathrm{cdf}(分布参数,k = [x_1,x_2, ...]) & = F_{X}(x) = \\mathrm{P}(X \\le x) \\\\\n连续型 \\mathrm{cdf}(分布参数,x = [x_1,x_2, ...]) & = F_{X}(x) = \\mathrm{P}(X \\le x) \\\\\n返回 \\mathrm{numpy.ndarray}\n\\end{aligned}\n$$\n\n### selenium\n\n```py\nimport json\n\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait\n\n\nclass SeleniumSpider:\n\n    def __init__(self):\n        # 使用本地的火狐浏览器\n        options = webdriver.FirefoxOptions()\n        options.binary_location = (\n            r\"D:\\Program Files\\Firefox Developer Edition\\firefox.exe\"\n        )\n        self.driver = webdriver.Firefox(options)\n        self.data: list[dict] = []  # 暂存爬取的数据\n\n    def wait_and_click(self, xpath: str):\n        \"\"\"\n        保证元素可以被点击，并点击\n        \"\"\"\n        WebDriverWait(self.driver, 20).until(\n            EC.all_of(\n                EC.element_to_be_clickable((By.XPATH, xpath)),\n                EC.visibility_of_element_located((By.XPATH, xpath)),\n            )\n        )\n        el = self.driver.find_element(By.XPATH, xpath)\n        print(xpath, el)\n        try:\n            el.click()\n        except:\n            webdriver.ActionChains(self.driver).move_to_element(el).click(el).perform()\n        return el\n\n    def save_to(self, file_name: str):\n        \"\"\"\n        写一个json文件\n        \"\"\"\n        try:\n            with open(file_name, mode=\"w+\", encoding=\"utf-8\") as f:\n                f.write(json.dumps(self.data, ensure_ascii=False, indent=2))\n        except Exception as e:\n            print(e)\n```\n\n## Java\n\n[Maven 仓库](https://mvnrepository.com/)\n| [阿里云 Maven 仓库](https://developer.aliyun.com/mvn/guide)\n| [Spring Boot 文档](https://docs.spring.io/spring-boot/docs/)\n| [Spring Boot 支持的 Java 版本](https://endoflife.date/spring-boot)\n\n关键字：没有 `unsigned` 关键字\n\n运算符：无符号右移 `>>>`，前面直接补零。\n\n- C/C++/Java 在对整型变量右移 `>>` 时：\n  - 正整数前面全补 `0`\n  - 负整数前面全补 `1`\n  - 无符号整数前面全补 `0`\n  - 作用相当于除以 2\n\n数据类型：布尔 `boolean`，值为 `true` 或者 `false`。可以直接用，占一个字节。\n\n- 写 `if(3 == true)` 时会报错，数据类型不同，不能直接比较。\n- 在 C 的 `<stdbool.h>` 中被 `#define` 了为 `1` 和 `0`。\n  - 写 `if(3 == true)` 时会跳过分支。\n- C++ 同 C，但是不用引头文件，可以直接用。\n- 在 Python 中是首字母大写的，也相当于 `0` 和 `1`，但是数据类型不同。\n  - 写 `if(3 == True)` 时会按 `1` 比较。\n  - 写 `if(3 is True)` 时会报错。\n- 在 JS 中也相当于 `0` 和 `1`，但是数据类型不同。\n  - 写 `if(1 == true)` 时会执行分支。\n  - 写 `if(1 === true)` 时会跳过分支。\n\n字符 `char`：无符号的两个字节。在 C/C++ 里是一个字节。\n\n有符号整型\n\n- `byte`：一个字节\n- `short`：两个字节\n- `int`：四个字节\n- `long`：八个字节\n\n语法：\n\n```java\nType[] arr = ...\nfor (Type element : arr) {\n    System.out.print(element + \",\");\n}\nArrays.toString(arr);\nSystem.arraycopy(...);\nString.equals(string);\n// == 运算符比较的是两对象的内存地址\n// 该方法先用 == 判断，后一个一个字符地比较\n// 可用 System.identityHashCode() 获取对象的标识哈希码，这是基于对象的内存地址计算的\nint Arrays.binarySearch(arr, elm);\n// 二分查找，返回的不一定是第一个。\n```\n\n接口：接口是一种特殊的类。写出来就是用来被继承的——不用 `extends`（扩展），用 `implements`（实现）。\n\n```java\npublic interface USB {\n    void start();\n    void stop();\n}\n```\n\n一个类只能 `extends` 自一个父类，但可以 `implements` 多个接口。实现接口的子类必须得实现接口里声明的方法。\n\nJavaBean 规则：\n\n- 必须有一个无参构造方法\n- 所有属性私有，且对其提供 public 的 `getXxx()` 与 `setXxx()` 方法\n\n## JSP\n\n> Web 是一种分布式的应用框架。基于 Web 的应用是典型的浏览器/服务器（B/S）架构。——ISBN 9787302438090\n\n> JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于 HTTP 的应用程序。——菜鸟教程\n\n笔者测试，用 VSCode 和 IDEA 社区版（2024.1）都没办法格式化 JSP 代码，或者是暂时没找到解决方法。或者你可以用 CSDN 网友分享的 IDEA 破解版（不是用蓝绿修改器破解的） https://blog.csdn.net/hlizoo/article/details/137562771\n\n**用 VSCode 或 IDEA 社区版**\n\n```bat\nmvn archetype:generate \"-DgroupId=com.example\" \"-DartifactId=demo\" \"-DarchetypeArtifactId=maven-archetype-webapp\" \"-DinteractiveMode=true\"\n```\n\nVSCode 使用 Community Server Connectors 插件、IDEA 使用 Smart Tomcat 插件\n\n**用 Eclipse 2020-03 (4.15.0)**\n\n在首选项里设置 JDK 和 Tomcat 的路径。\n\nNew -> Dynamic Web Project\n\n按 Ctrl + Shift + F 格式化代码——這個快捷鍵會和 Win10 的微軟拼音輸入法簡繁體切換功能衝突。解决方法除了再按一次，还可以右击你任务栏上的[中]，进输入法设置，把热键关了。\n\n> 一个 JSP 文件的示例\n\n```jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\" import=\"java.util.Date\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title></title>\n</head>\n<body>\n\t<%\n\t\tDate now = new Date();\n\t%>\n\t<%=now%>\n</body>\n</html>\n```\n\n它在 html 的基础上扩展了一些标签。可以使用 Java 库。\n\n> JSP 运行的原理\n\n1. 客户向 Tomcat 服务器发送 HTTP 请求\n\n你可以使用 Fiddler 来抓包（或者直接用浏览器控制台抓，这是最方便的）。在 Eclipse 里按“播放键”之后，Eclipse 向 `localhost:8080` 发送了一个 GET 请求。\n\n使用\n\n```bat\nnetstat -ano | grep 8080\n```\n\n查与 8080 端口有关的进程号。再打开任务管理器的详细信息，查到进程为 `javaw.exe`。右击打开文件所在位置，在你 Eclipse 首选项里设置的 JDK 目录的 bin 目录里面。\n\n使用\n\n```bat\njcmd\n```\n\n查看 java 进程，为 `org.apache.catalina.startup.Bootstrap start`\n\n2. Tomcat 启动一个线程，把 jsp 文件转换成 java 文件\n\n（一个继承自 `javax.servlet.http.HttpServlet` 的类，头上带一个注解 `@WebServlet(\"/path\")`，相当于 Python 的 Flask 框架里的 `@app.route(\"/path\")`）\n\n3. 把 java 文件编译成 class 文件（字节码）\n\n> jsp 指令与 jsp 动作？\n\n前者是静态的，后者是动态的（感性认识）\n\n前者类似\n\n```jsp\n<%@ include file = \"sub.jsp\" %>\n```\n\n后者类似\n\n```jsp\n<jsp:include page = \"sub.jsp\"/>\n```\n\n> 在一个 jsp 页里，如何把表单传递给另一个 jsp 页？另一个 jsp 页如何接收？\n\n三种方式：（使用 get 方法会在 url 里看到请求参数，post 不会）\n\n1.  【包含对面的】 `jsp:include` 配合 `jsp:param`。这是把另一个 jsp 页包含进来。\n\n```jsp\n<form method=\"get\">\n    请输入圆的半径：\n    <input type=\"text\" name=\"radius\" />\n    <input type=\"submit\" value=\"提交\" />\n</form>\n<jsp:include page=\"computeAreaOfCircle.jsp\">\n    <jsp:param value=\"${param.radius}\" name=\"radius\" />\n</jsp:include>\n```\n\n2. 【请求转发】先使用本页面的 Java 代码处理表单，再使用 `jsp:forward` 配合 `jsp:param`，把 request 对象转发给另一个 jsp 页面。\n\n这种把 JSP 标签和 Java 代码混在一起的写法很新鲜：\n\n接收方用 `request.getParameter(\"name\")` 接收\n\n```jsp\n<form method=\"post\" action=\"\">\n    请选择一个图形：<br />\n    <input type=\"radio\" name=\"shape\" id=\"circle\" value=\"circle\" />圆形<br />\n    <input type=\"radio\" name=\"shape\" id=\"rectangle\" value=\"rectangle\" />矩形<br />\n    <input type=\"submit\" value=\"提交\" />\n</form>\n<%\n\tRandom random = new Random();\nString shape = request.getParameter(\"shape\");\nif (shape != null) {\n    if (shape.equals(\"circle\")) {\n        double radius = 100 * random.nextDouble();\n%>\n<jsp:forward page=\"process.jsp\">\n    <jsp:param value=\"<%=shape%>\" name=\"shape\" />\n    <jsp:param value=\"<%=radius%>\" name=\"radius\" />\n</jsp:forward>\n<%\n    } else if (shape.equals(\"rectangle\")) {\n    double width = 100 * random.nextDouble();\n    double height = 100 * random.nextDouble();\n%>\n<jsp:forward page=\"process.jsp\">\n    <jsp:param value=\"<%=shape%>\" name=\"shape\" />\n    <jsp:param value=\"<%=width%>\" name=\"width\" />\n    <jsp:param value=\"<%=height%>\" name=\"height\" />\n</jsp:forward>\n<%\n\t}\n}\n%>\n```\n\n3. 【重定向】`response.sendRedirect(\"result.jsp\")` 不会把 request 对象传递过去\n\n应 `session.setAttribute(\"name\", value)`\n\n对方使用 `session.getAttribute(\"name\")` 接收。\n\n访问使用 response.sendRedirect 的一方 jsp 时，会跳转到对面的一方\n\n> 重定向和请求转发\n\n重定向会丢失 request 对象，请求转发不会。\n\n在 JSP 或者 Servert 里请求转发：\n\n```java\nrequest.setAttribute(\"studentList\", studentList);\nRequestDispatcher dispatcher = request.getRequestDispatcher(\"result.jsp\");\ndispatcher.forward(request, response);\n```\n\n> 如何实现点一个按钮出现一个新表单？\n\n在第一个表单里加一个隐藏的 `<input>` 标签，第一个表单提交给本页面，然后在本页面里写 Java 代码：\n\n笔者觉得这比 JS 操作 DOM 看起来新鲜，很好玩。\n\n```jsp\n<form action=\"\">\n    <input type=\"hidden\" name=\"showInput\" value=\"true\">\n    <input type=\"submit\" value=\"查找\">\n</form>\n<%\n    String showInput = request.getParameter(\"showInput\");\nif (showInput != null && showInput.equals(\"true\")) {\n%>\n<form action=\"Query\" method=\"get\">\n    <input type=\"text\" name=\"id\" placeholder=\"输入学号\">\n    <input type=\"submit\" value=\"提交\">\n</form>\n<%\n}\n%>\n```\n\n> Filter 是什么？\n\n一个实现了 `javax.servlet.Filter` 接口的类。可在 `doFilter` 方法里对请求预处理，响应后处理：\n\n```java\n@WebFilter(\"/*\")\npublic class ProZhInput implements Filter {\n    //...\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        request.setCharacterEncoding(\"UTF-8\");\n        response.setCharacterEncoding(\"UTF-8\");\n        response.setContentType(\"text/html;charset=UTF-8\");\n        chain.doFilter(request, response);\n    }\n    //...\n}\n```\n\n> 如何使用 JDBC 连接 MySQL\n\n1. 下载驱动 Jar 包 https://dev.mysql.com/downloads/connector/j/\n2. 把 Jar 包 复制到 `yourprojectname\\WebContent\\WEB-INF\\lib`\n\n> 插入的问题\n\n> MySQL 里有两张表，一张表的外键是另一张表的主键（如 id），级联更新和删除。如何插入“一条”id 的记录“分散给”这两张表？即对这两张表分别插了一个 id 相同的记录。\n\n先插 id 为主键所在的表，后插 id 为外键所在的表。\n\n这是关系型数据库原理的知识。本表里的“外键”就是引用外部表里的“主键”，那得先有外部表。\n\n> 乱码的问题\n\n保证这些地方的编码是 UTF-8：\n\n1. Eclipse 首选项里的文件编码\n2. 搞一个 Filter\n3. MySQL 数据库表的编码\n4.\n\n```jsp\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\"%>\n```\n\n## 排序算法\n\n二分查找就是翻书。有一本 200 页的书，你想翻到 124 页，一下就翻到的概率是很小的。翻到中间，发现是 100 页；翻到 100~200 页的中间，发现是 150 页；翻到 100~150 页的中间，发现是 125 页，以此类推。\n\n二分查找就是从列表里查找一个值，前提列表是有序的，这样可以比较大小，在二分之后仍然是有序的。如果要查找的值比列表的中间值小，就在列表的左半部分找，这就是二分。这时需要变换查找范围的右边界，到中间值的左边一个位置。然后对查找范围继续二分，与中间值作比较，如果要查找的值比中间值大，就在查找范围的右半部分找，这时需要变换查找范围的左边界到中间值的右一个位置。以此类推，如果找到了，就返回目标元素的索引。找不到就返回-1。\n\n插入排序：一张一张地接扑克牌，接到第一张扑克牌时什么也不做，接到第二张扑克牌时要与第一张作比较，看插入到第一张的前面还是后面，……，接到第 n 张扑克牌时要与前 n - 1 张比较，看插入到手牌的哪个位置。\n\n选择排序：拿到一手混乱的牌，从中选取最小的，与第 0 张交换位置；之后忽略第 0 张，从剩余的牌里选取最小的，与第 1 张交换位置；之后忽略第 0、1 张，从剩余的牌里选取最小的，与第 2 张交换位置。以此类推。\n\n归并排序：把一沓牌分成一张一张的，摆在桌子上。相邻的两张合并成一个组；相邻的两组分别排序，合并成一个新组；以此类推。\n\n快速排序：选一个基准，所有比基准小的放在基准左边，比基准大的放在基准右边。然后就分成了两个区，对每一个区里的元素再选一个基准，重复上面的操作。\n\n## 数据挖掘\n\n### 属性与度量\n\n- 测量：将对象的属性映射为数值/符号值\n- 测量标度：函数、秤\n\n例如：秤将人的体重映射为一个数值\n\n属性的类型（也叫测量标度的类型）：\n\n- 分类的（定性的）\n  - 标称：有意义的只有等于/不等于操作。例如你的性别，不能与其他性别进行比较大小、加减、乘除操作\n  - 序数：有意义的有：等于/不等于和比较大小。例如你的成绩在这五个档次里面{A,B,C,D,E}\n- 数值的（定量的）\n\n  - 区间：除了能等于/不等于/比较大小，还要能加减。比如某年某月某日、华氏/摄氏温度\n  - 比率：在上面的基础上，还要能乘除\n\n- 离散的属性：可取有限个值，或无限可数个值\n- 连续的属性：取实数值\n- 非对称的属性：出现非零值比零值重要\n\n### 关联分析\n\n```py\nclass AssociationRule(namedtuple(\"AssociationRule\", [\"X\", \"Y\"])):\n    \"\"\"\n    关联规则，是两个不相交集合的蕴含表达式\n    {牛奶，尿布} -> {啤酒}\n    \"\"\"\n\n    def __new__(cls, X: set, Y: set):\n        assert X.isdisjoint(Y)\n        return super().__new__(cls, X, Y)\n```\n\n支持度计数 sigma，即事务列表里，项集的超集个数\n\n支持度，即项集的超集个数与集合总个数（事务个数）的比值\n\n大于等于最小支持度（计数）的项集，称为频繁项集\n\n置信度，由 X 引起 Y 的可能性。X 的支持度计数做分母，XY 并集的支持度计数做分子\n\n先验原理：如果一个项集是频繁的，它的所有子集都是频繁的\n\n反过来：如果一个项集是非频繁的，它的所有超集都是非频繁的\n\n即：一个项集的子集的支持度，大于等于它本身的支持度\n\n### 决策树示例\n\n对于一组数据集，其每一个数据有它的几个属性的值，和一个分类标签。\n\n如：我们可以给一系列人的数据集：（方便理解，学习用，无歧视）\n\n```py\n# 特征列表\nfeatures = [\"性别\", \"使用手机的牌子\", \"年龄\", \"是否赌博\", \"喜欢玩的游戏\", \"喜欢音乐的曲风\"]\ndataset = [\n    # 最后一个是分类标签\n    [\"男\", \"小米\", \"中\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"小米\", \"中\", \"是\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"小米\", \"中\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"女\", \"华为\", \"小\", \"否\", \"明日方舟\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"华为\", \"小\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"小\", \"否\", \"和平精英\", \"前卫摇滚\", \"有病\"],\n    [\"男\", \"苹果\", \"大\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"大\", \"否\", \"王者荣耀\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"大\", \"否\", \"和平精英\", \"前卫摇滚\", \"没病\"],\n    [\"女\", \"华为\", \"小\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"王者荣耀\", \"前卫摇滚\", \"没病\"],\n    [\"女\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"前卫摇滚\", \"没病\"],\n    [\"男\", \"苹果\", \"中\", \"否\", \"明日方舟\", \"华语流行\", \"没病\"],\n    [\"女\", \"小米\", \"中\", \"否\", \"和平精英\", \"华语流行\", \"没病\"],\n    [\"男\", \"华为\", \"中\", \"否\", \"明日方舟\", \"日语流行\", \"没病\"],\n]\n```\n\n生成类似这样的决策树：\n\n<img src=\"/blog/images/decision-tree.webp\">\n\n### 针对购物篮数据集的关联分析\n\n关联分析到底是**什么意思**？是发现隐藏在大型**数据集**中的有意义的**联系**。\n\n购物篮数据集**怎么表示**？是一张**表**，表里有一系列**行**，每一个行是一个**事务**，每一个事务表现为一个**集合**，这个集合里有一系列商品的**名字**，比如{\"面包\",\"牛奶\",\"尿布\"}\n\n联系**怎么表示**？有两种形式：**关联规则**、和**频繁项集**\n\n关联规则是**什么意思**？是**两个不相交集合的蕴含表达式**，如{尿布}->{啤酒}这个表达式的意思是：购买尿布，**引起了**购买啤酒，前面是**因**、后面是**果**。\n\n项集是**什么意思**？是一些**项**的**集合**。是 `list[str]`\n\n什么叫**频繁项集**？是**支持度**或者**支持度计数大于等于最小阈值**的项集。\n\n什么叫**支持度计数**？是该项集在事务列表里的**超集数量**，是事务列表里的所有**包含该项集**的**事务数量**。\n\n什么叫**支持度**？是事务列表里，**包含该项集的事务的数量**占**所有事务数量**里的比值。\n\n{面包，牛奶}支持度 0.3 是**什么意思**？是在所有的购物记录里，同时包含购买了面包、牛奶的购物记录的比值。是**在每 10 次购物里，就有三次同时购买了面包和啤酒**。\n\n**怎么挖掘关联规则**？分两步：\n\n1. **产生频繁项集**:发现满足最小支持度阈值的所有项集\n   - 什么意思？项集里有几个元素？**最少**有一个，**最多**有 `len(unique(flatten(basket)))` 个，是所有独立的商品组成的集合。\n2. **产生规则**\n   - 提取所有高置信度的规则。\n\n格结构是什么意思？格结构里的所有节点构成一个集合的幂集。格结构的第一层是 null，第二层是所有 1-项集，第三层是所有 2-项集……最底层是 `len(unique(flatten(basket)))`项集\n\n**先验原理**是什么意思？如果一个**项集**是**频繁**的，它的**所有子集**都一定是**频繁的**。\n\n什么叫一个项集是频繁的？它的支持度计数大于等于最小阈值\n\n什么叫一个项集的子集是频繁的？它的子集的支持度计数大于等于最小阈值\n\n为什么项集支持度计数大于等于最小阈值后，它的所有子集的支持度计数都会大于等于最小阈值？\n\n**支持度计数 +1 的操作是在什么时候**？把这个项集和事务列表里的所有项集做比较，如果该项集是事务列表里项集的子集，把该项集的支持度计数 +1。所以：支持度计数，就是**找超集数量**\n\n**一个集合的子集的超集数量**，必定**大于等于该集合的超集数量**，为什么？**因为这个集合本身就是它子集的超集**。\n\n什么叫**基于支持度的剪枝**？把先验原理**反过来说**：如果一个项集是非频繁的，它的所有超集都是非频繁的。\n\n非频繁是什么意思？支持度计数小于最小阈值，超集数量小于最小阈值，**包含它的事务数量**小于最小阈值\n\n如果一个集合的超集数量小于最小阈值，它的（所有超集）的超集数量都会小于最小阈值。为什么？**你确定这句话对吗**？\n\n正确的描述方法是：如果**包含 A 的事务数**小于最小阈值， 那么**包含（A 的超集）的事务数**会小于最小阈值。为什么？\n\n因为在一个购物篮里，事务数量是有限的。\n\n**支持度计数 +1 的操作是在什么时候**？是针对一个项集，**判断各个事务**是不是它的超集的时候。\n\n```py\nbasket = [\n    [1,2,3],\n    [1,3,4],\n    [1,3,5],\n    [2,3,5]\n]\n```\n\n问：[2,3] 的支持度计数是几？是 2，是第一行和第四行\n\n现在规定：最小支持度计数是 3。问，[2,3]超集的支持度计数？既然是超集，考虑它自己是它自己的超集这种情况，它的支持度计数还是小于 3。现在再往里加一个，能达到要求吗？加一个之后，**超集的判定变严了**。\n\n理性的说法是：原来是 A 超集的集合 B，在 A 加一个元素之后变成 C 后，B 不一定还是 C 的超集，因为新加的那个元素可能不在 B 里。如果新加的那个元素在 B 里，C 超集的数量（相对于购物篮）至少减零。如果不在 B 里，C 超集的数量（相对于购物篮）至少减一。\n\n**基于支持度的剪枝**什么意思？如果**一个项集是非频繁的**，把它格结构里**所有的超集剪了**。\n\n**反单调性**什么意思？一个项集的支持度小于等于它的自己的支持度。\n\n### numpy 库的多维数组切片语法\n\n```py\nimport numpy as np\n# 假装这是事务列表\nX = np.array(\n    [\n        [1, 2, 3, 4, 5, 6, 7],\n        [8, 9, 10, 11, 12, 13, 14],\n        [15, 16, 17, 18, 19, 20, 21],\n        [22, 23, 24, 25, 26, 27, 28],\n    ]\n)\n# 假装这是一系列3-项集\ncombin = np.array([[0, 1, 2], [1, 4, 6]])\nprint(X[:, combin])\n\n\"\"\"\n这是什么玩意？？？\n[[[ 1  2  3]\n  [ 2  5  7]] 把第一个事务的对应的各个3-项集摘出来（可能有True有False），便于后续判断它是不是某个3-项集的子集\n              如果第二行全True，说明该事务是[1,4,6]的超集\n\n [[ 8  9 10]\n  [ 9 12 14]]\n\n [[15 16 17]\n  [16 19 21]]]\n\"\"\"\n```\n\n```py\nimport numpy as np\n\nX = np.array(\n    [\n        [1, 0, 0, 0, 0, 0, 0],\n        [1, 1, 1, 0, 0, 0, 0],\n        [1, 0, 1, 1, 0, 0, 0],\n        [0, 0, 0, 0, 1, 0, 0],\n    ]\n)\ncombin = np.array([[0, 1, 2], [1, 4, 6]])\nprint(X[:, combin])\n\n\"\"\"\n[[[1 0 0]\n  [0 0 0]] 把对应的3-项集摘出来\n\n [[1 1 1]\n  [1 0 0]] 全1为True，说明第二行事务它是对应[0,1,2]的超集\n\n [[1 0 1]\n  [0 0 0]]\n\n [[0 0 0]\n  [0 1 0]]]\n\"\"\"\n\n_bools = np.all(X[:, combin], axis=2)\nprint(_bools)\n\n\"\"\"\n[[False False]\n [ True False] 四个事务里，只有这一个事务是[0,1,2]的超集\n [False False]\n [False False]]\n\"\"\"\n```\n\n### Apriori 算法\n\n```mermaid\n%%{\n    init: {\n\t    \"theme\": \"neutral\",\n\t    \"fontFamily\": \"Times New Roman\"\n    }\n}%%\nflowchart TD\n    A[产生频繁1-项集] --> B[k=1] --> C[k+=1] --> G[由频繁k-1-项集生成候选k-项集,并剪枝] --> D{候选k-项集为空?}\n    D -- 是 --> E[返回频繁项集]\n    D -- 否 --> F[对候选k-项集支持度计数,产生频繁k-项集] --> GG{频繁k-项集为空?} -- 是 --> E\n    GG -- 否 --> C\n```\n\n直接看 mlxtend 库的源码（删除了一些相对于算法本身无关紧要的，比如低内存下的算法和 pandas 兼容性的问题）：\n\n```py\nfrom itertools import combinations\n\nimport numpy as np\nimport pandas as pd\n\n\ndef association_rules(df, min_threshold=0.9):\n    \"\"\"\n    找出置信度大于等于min_threshold的关联规则\n    \"\"\"\n\n    confidence = lambda sAC, sA, _: sAC / sA\n\n    # 获取 {频繁项集} -> 支持度 字典\n    keys = df[\"itemsets\"].values\n    values = df[\"support\"].values\n    frozenset_vect = np.vectorize(lambda x: frozenset(x))\n    frequent_items_dict = dict(zip(frozenset_vect(keys), values))\n\n    # 规则的前件、后件、支持度\n    rule_antecedents = []\n    rule_consequents = []\n    rule_supports = []\n\n    # 遍历所有频繁项集\n    for k in frequent_items_dict.keys():\n        sAC = frequent_items_dict[k]\n        # 找到所有可能的组合\n        for idx in range(len(k) - 1, 0, -1):\n            # 前件和后件的组合\n            for c in combinations(k, r=idx):\n                antecedent = frozenset(c)\n                consequent = k.difference(antecedent)\n                sA = frequent_items_dict[antecedent]\n                sC = frequent_items_dict[consequent]\n                # 计算置信度\n                score = confidence(sAC, sA, sC)\n                if score >= min_threshold:\n                    rule_antecedents.append(antecedent)\n                    rule_consequents.append(consequent)\n                    rule_supports.append([sAC, sA, sC])\n\n    # 返回结果\n    if not rule_supports:\n        return pd.DataFrame(columns=[\"antecedents\", \"consequents\", \"confidence\"])\n    else:\n        rule_supports = np.array(rule_supports).T.astype(float)\n        df_res = pd.DataFrame(\n            data=list(zip(rule_antecedents, rule_consequents)),\n            columns=[\"antecedents\", \"consequents\"],\n        )\n        sAC = rule_supports[0]\n        sA = rule_supports[1]\n        sC = rule_supports[2]\n        df_res[\"confidence\"] = confidence(sAC, sA, sC)\n        return df_res\n\n\ndef generate_new_combinations(old_combinations):\n    \"\"\"\n    由上一步的频繁k-1项集生成候选项k集，并剪枝\n    使用F_{k-1} x F_{k-1} 算法\n    \"\"\"\n    items_types_in_previous_step = np.unique(old_combinations.flatten())\n    for old_combination in old_combinations:\n        max_combination = old_combination[-1]\n        mask = items_types_in_previous_step > max_combination\n        valid_items = items_types_in_previous_step[mask]\n        old_tuple = tuple(old_combination)\n        for item in valid_items:\n            yield from old_tuple\n            yield item\n\n\ndef apriori(df, min_support=0.3):\n    \"\"\"\n    产生频繁项集\n    \"\"\"\n\n    def _support(_x, _n_rows):\n        \"\"\"\n        计算支持度。它按每一列求和，输出一个一维数组，是每一列里True的数量占总行数的比值\n        \"\"\"\n        out = np.sum(_x, axis=0) / _n_rows\n        return np.array(out).reshape(-1)\n\n    X = df.values  # 二维数组\n    support = _support(X, X.shape[0])  # 所有1-项集的支持度\n    ary_col_idx = np.arange(X.shape[1])  # 列索引，即不同商品的编号\n\n    support_dict = {1: support[support >= min_support]}\n    itemset_dict = {1: ary_col_idx[support >= min_support].reshape(-1, 1)}\n\n    max_itemset = 1  # 最大k项集里的k\n    rows_count = float(X.shape[0])  # 行数，即事务数\n\n    while max_itemset:\n        next_max_itemset = max_itemset + 1  # 开始计算k-项集\n        # 把频繁(k-1)-项集传进去，返回一个包含所有候选k-项集的生成器\n        combin = generate_new_combinations(itemset_dict[max_itemset])\n        # 把生成器转成数组\n        combin = np.fromiter(combin, dtype=int)\n        combin = combin.reshape(-1, next_max_itemset)\n        # 结束条件：候选k-项集为空\n        if combin.size == 0:\n            break\n        # 对事务列表里的每行（事务）切片，选出，作为三维数组的第二维，便于后续判断超集关系\n        _bools = np.all(X[:, combin], axis=2)\n        support = _support(np.array(_bools), rows_count)\n        # 遮罩，每个候选项集的支持度是否大于最小支持度\n        _mask = (support >= min_support).reshape(-1)\n        if any(_mask):\n            # 对候选项集combin作用，过滤出频繁项集\n            itemset_dict[next_max_itemset] = np.array(combin[_mask])\n            support_dict[next_max_itemset] = np.array(support[_mask])\n            max_itemset = next_max_itemset\n        else:  # 结束条件：候选k-项集为空\n            break\n\n    # 返回结果\n    all_res = []\n    for k in sorted(itemset_dict):\n        support = pd.Series(support_dict[k])\n        itemsets = pd.Series([frozenset(i) for i in itemset_dict[k]], dtype=\"object\")\n        res = pd.concat((support, itemsets), axis=1)\n        all_res.append(res)\n\n    res_df = pd.concat(all_res)\n    res_df.columns = [\"support\", \"itemsets\"]\n    res_df = res_df.reset_index(drop=True)\n\n    return res_df\n```\n\n### 鸢尾花数据集关联分析示例\n\n```py\nimport os\n\n# Python 3.10.9\nos.chdir(r\"C:\\Users\\rcooh\\Desktop\\数据挖掘\\大作业\\算法设计\")\n\nimport numpy as np\nimport pandas as pd\nfrom algo import apriori, association_rules\nfrom mlxtend.preprocessing import TransactionEncoder\nfrom sklearn import datasets\n\niris = datasets.load_iris()\ndata: np.ndarray = iris[\"data\"]\ntarget: np.ndarray = iris[\"target\"]\nmodify_value = lambda v: f\"{int(v):.1f}~{int(v)+1:.1f}\"  # 把数据划分到1cm范围内\nFLOWER = {0: \"山鸢尾\", 1: \"变色鸢尾\", 2: \"维吉尼亚鸢尾\"}\ndataset = np.array(\n    [\n        [\n            \"花萼长度\" + modify_value(data[i][0]),\n            \"花萼宽度\" + modify_value(data[i][1]),\n            \"花瓣长度\" + modify_value(data[i][2]),\n            \"花瓣宽度\" + modify_value(data[i][3]),\n            FLOWER[target[i]],\n        ]\n        for i in range(data.shape[0])\n    ]\n)\nnp.savetxt(\"dataset.csv\", dataset, delimiter=\",\", fmt=\"%s\", encoding=\"utf-8\")\n\n\nte = TransactionEncoder()\nitem_array = te.fit(dataset).transform(dataset)\ndf = pd.DataFrame(item_array)\n\n\nfrequent_itemsets = apriori(df, min_support=0.3)\n# 把编码后的转成原来的\nfrequent_itemsets[\"itemsets\"] = frequent_itemsets[\"itemsets\"].apply(\n    lambda cell: frozenset([te.columns_[i] for i in cell])\n)\nfrequent_itemsets.to_csv(\"frequent_itemsets.csv\")\n\n\nrules = association_rules(frequent_itemsets, min_threshold=0.8)\nrules.to_csv(\"result.csv\")\n```\n\n## 动态规划\n\n### 滚动数组怎么滚\n\n以三个数为例：\n\n1. 先处理前两个，直接返回\n2. 声明三个变量，只给前两个赋值\n3. 循环[下标看具体情况]在每次循环里：\n   1. 先作用\n   2. 把第二个数赋值给第一个\n   3. 把第三个数赋值给第二个\n4. 返回第三个\n\n笔者认为这种写法符合人的直觉，且不容易出错。\n\n### 70.爬楼梯\n\n> 假设你正在爬楼梯。需要 n 阶你才能到达楼顶。每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？\n\n换一种问题描述方式：把一个正整数 n 拆分成一系列 1 和 2 有顺序地相加，共有几种拆分方式 f(n)？\n\n从它的尾巴向前看，有这两种：\n\n- n = (n-1) + 1\n- n = (n-2) + 2\n\n其中(n-1)和(n-2)有它们各自被拆分的种类数，于是 f(n)=f(n-1)+f(n-2)\n\n边界：f(1)=1,f(2)=2（2=1+1=2+0）\n\n```c\nint climbStairs(int n) {\n    if (n <= 2) {\n        return n;\n    }\n    int a = 1, b = 2, c;\n    for (int i = 3; i <= n; i++) {\n        c = a + b;\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n### 746.使用最小花费爬楼梯\n\n我们把问题描述改写一下：\n\n给你一个非负整数数组，长度大于等于 2，让你在数组里选一些数求和，要求选的这些数：\n\n- 0 号和 1 号元素必须二选其一\n- 最后两个元素必须二选其一\n- 选的相邻两数之间至多间隔一个数\n- 要求和最小，输出和\n\n状态转移就是从过去转移到现在。现在虚空设一个数叫 dp[i]表示爬到下标为 i 的台阶时的花费\n\n（注意：此时的 dp[i]是不包含本级台阶的花费的，往后跨了之后才加）\n\n有两种转移的情况：从 i-1 爬一层、从 i-2 爬两层\n\n从 i-1 爬一层之后、转移到现在，现在的花费等于跨上一步之前的花费+跨上一步之后的花费\n\n即 dp[i] = dp[i-1] + cost[i-1]\n\n总的状态转移方程为 dp[i] = min(dp[i-1] + cost[i-1], dp[i-2] + cost[i-2])\n\n边界为 dp[0]=dp[1]=0，返回值为 dp[n]，下标 n 在楼梯的顶层，cost 数组右边一个位置，等于 cost 数组长。用滚动数组，循环 [2, cost 长]\n\n```c\nint minCostClimbingStairs(int* cost, int costSize) {\n    int a = 0, b = 0, c;\n    for (int i = 2; i <= costSize; i++) {\n        c = fmin(a + cost[i - 2], b + cost[i - 1]);\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n### 198.打家劫舍\n\n我们把问题描述改写一下：\n\n给你一个长度[1,100]的非负整数数组，让你选一些数求和，要求选的这些数间隔至少为 1，返回最大和\n\n虚空设一个数 dp[i]表示你对 i 号下标纠结之后的和，你正在纠结打还是不打\n\n- 如果打 i，就不能打 i-1，dp[i] = dp[i-2] + value[i]\n- 如果不打 i，就可以打 i-1，dp[i] = dp[i-1]\n\n这两种情况求大的\n\n```c\nint rob(int* nums, int numsSize) {\n    if (numsSize == 1) {\n        return nums[0];\n    } else if (numsSize == 2) {\n        return fmax(nums[0], nums[1]);\n    }\n    int a = nums[0];\n    int b = fmax(nums[0], nums[1]);\n    int c;\n    for (int i = 2; i < numsSize; i++) {\n        c = fmax(a + nums[i], b);\n        a = b;\n        b = c;\n    }\n    return c;\n}\n```\n\n## 驾驶\n\n关键点：\n\n- 车钥匙：点火，使发动机工作\n- 离合器踏板（左）：使发动机和变速箱连接到一起。踩下去是离，抬起来是合。挂挡前必踩离合\n- 变速杆（档）：改变从变速箱向车轮的转速比例\n- 刹车踏板（中）：用于减慢车轮转速\n- 手刹：抬起来是刹，把后轮锁死\n- 油门踏板（右）：改变流向发动机的汽油流量\n- 速度计，右边的是发动机，左边的是车轮\n\n点火前手刹应处于抬起状态，档位为空\n\n平地起步：\n\n1. 点火、踩住离合挂一挡、松手刹\n2. 慢松离合\n\n斜坡起步：\n\n1. 点火、踩住离合和刹车挂一挡、松手刹\n2. 慢松刹车和离合\n\n停车：\n\n1. 踩住离合和刹车、挂空挡、拉手刹\n2. 松脚熄火\n\n## 用 C 语言模拟一个像素时钟\n\n### myclock.h\n\n```c\n#define YIN ' '\n#define YANG 'O'\n#define SCREEN_WIDTH 34\n#define SCREEN_HEIGHT 7\n#define PROBE_NUM 4\n\nextern char screen[SCREEN_HEIGHT][SCREEN_WIDTH]; // 模拟屏幕，34 * 7 像素\nextern const int hOffset[6];                     // 水平方向上的偏移量，每位数字的左上角\nextern char *probe[PROBE_NUM];                   // 一排四个探针，存放四个像素的地址\nextern const int model[10][SCREEN_HEIGHT];       // 每行是一个数字模型的像素情况，每行里的一个记录代表数字模型的一行\nextern int timeDidits[6];                        // 18:44:02\n\nvoid probeReset();                 // 探针回到原点，屏幕左上角\nvoid probeMoveDown1Px();           // 探针向下移动一个像素\nvoid probeMoveRightPx(int offset); // 探针向右移动多个像素\n\nvoid getTimeDidits();                    // 获取本地时间的六个数字\nvoid writeTimeToScreen();                // 写六个数字\nvoid writeDigit(int digit, int hOffset); // 按偏移量写一个数字\n```\n\n### myclock.c\n\n```c\n#include <stdio.h>\n#include <stdlib.h> //system(\"cls\")\n#include <conio.h>  //_kbhit()\n#include <time.h>\n#include \"myclock.h\"\n\nchar screen[SCREEN_HEIGHT][SCREEN_WIDTH] = {\n    /*0                        5                                  12                       17                                 24                       29                  33*/\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', ' ', ' ', ' ', 'O', ' ', ' ', 'O', ' ', 'O', ' ', ' ', 'O', '\\n'},\n    {'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', ' ', ' ', ' ', 'O', 'O', 'O', 'O', ' ', 'O', 'O', 'O', 'O', '\\0'}};\n\nconst int hOffset[6] = {0, 5, 12, 17, 24, 29};\n\nchar *probe[PROBE_NUM] = {&screen[0][0], &screen[0][1], &screen[0][2], &screen[0][3]};\n\nconst int model[10][SCREEN_HEIGHT] =\n    {\n        {0b1111, 0b1001, 0b1001, 0b1001, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O     O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0|       O\n        1|       O\n        2|       O\n        3|       O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b1111, 0b1000, 0b1000, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3| O O O O\n        4| O\n        5| O\n        6| O O O O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b1111, 0b0001, 0b0001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n        {0b1001, 0b1001, 0b1001, 0b1111, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0| O     O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b1000, 0b1000, 0b1111, 0b0001, 0b0001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O\n        2| O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n        {0b1111, 0b1000, 0b1000, 0b1111, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O\n        2| O\n        3| O O O O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b1111, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001, 0b0001},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1|       O\n        2|       O\n        3|       O\n        4|       O\n        5|       O\n        6|       O\n        **********/\n        {0b1111, 0b1001, 0b1001, 0b1111, 0b1001, 0b1001, 0b1111},\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4| O     O\n        5| O     O\n        6| O O O O\n        **********/\n        {0b1111, 0b1001, 0b1001, 0b1111, 0b0001, 0b0001, 0b1111}\n        /* 0 1 2 3\n        **********\n        0| O O O O\n        1| O     O\n        2| O     O\n        3| O O O O\n        4|       O\n        5|       O\n        6| O O O O\n        **********/\n};\n\nint timeDidits[6];\n\nint main()\n{\n    system(\"cls\");\n    printf(\"\\033[?25l\"); // 隐藏光标\n    while (!_kbhit())\n    {\n        getTimeDidits();\n        writeTimeToScreen();\n        printf(\"%s\\n\\n\\nPress any key to exit...\\n\", (const char *)screen);\n        printf(\"\\033[0;0H\"); // 光标移动到 (0,0)\n    }\n    system(\"cls\");\n    printf(\"\\033[?25h\"); // 显示光标\n}\n\nvoid probeReset()\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] = &screen[0][i];\n    }\n}\n\nvoid probeMoveDown1Px()\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] += SCREEN_WIDTH;\n    }\n}\n\nvoid probeMoveRightPx(int offset)\n{\n    for (int i = 0; i < PROBE_NUM; i++)\n    {\n        probe[i] += offset;\n    }\n}\n\nvoid getTimeDidits()\n{\n    time_t utc = time(NULL);\n    struct tm local_time;\n    localtime_s(&local_time, &utc);\n    timeDidits[0] = local_time.tm_hour / 10;\n    timeDidits[1] = local_time.tm_hour % 10;\n    timeDidits[2] = local_time.tm_min / 10;\n    timeDidits[3] = local_time.tm_min % 10;\n    timeDidits[4] = local_time.tm_sec / 10;\n    timeDidits[5] = local_time.tm_sec % 10;\n}\n\nvoid writeTimeToScreen()\n{\n    for (int i = 0; i < 6; i++)\n    {\n        writeDigit(timeDidits[i], hOffset[i]);\n    }\n}\n\nvoid writeDigit(int digit, int hOffset)\n{\n    probeMoveRightPx(hOffset); // 探针移动到数字的起始位置\n    for (int digitRowIndex = 0; digitRowIndex < SCREEN_HEIGHT; digitRowIndex++)\n    {\n        // 写一个数字的每一行.对于所有数字的每一行，总共有四种状态\n        int digitRowStatus = model[digit][digitRowIndex];\n        switch (digitRowStatus)\n        {\n        // 探针写一行，四个像素点\n        case 0b1111:\n            *probe[0] = YANG;\n            *probe[1] = YANG;\n            *probe[2] = YANG;\n            *probe[3] = YANG;\n            break;\n        case 0b1000:\n            *probe[0] = YANG;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YIN;\n            break;\n        case 0b0001:\n            *probe[0] = YIN;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YANG;\n            break;\n        case 0b1001:\n            *probe[0] = YANG;\n            *probe[1] = YIN;\n            *probe[2] = YIN;\n            *probe[3] = YANG;\n            break;\n        default:\n            break;\n        }\n\n        probeMoveDown1Px(); // 向下按行扫描\n    }\n    probeReset(); // 回归原位\n}\n```\n\n## 读书感想与原文摘抄\n\n### 平凡生活中的不凡之旅：《凉宫春日系列》读书心得\n\n[《凉宫春日系列》](https://haruhifanclub.com/library)是日本作家谷川流创作的校园幻想题材轻小说，2003 年首作《凉宫春日的忧郁》出版后大受欢迎，并逐渐发展为涵盖多部小说、动画及漫画的作品。故事以第一人称视角叙述，通过主角阿虚的眼睛带领读者走进一个既平凡又充满奇幻色彩的世界。\n\n从小学起，阿虚就意识到现实世界与他所期待的神奇世界是存在着巨大差异的，圣诞老人只不过是一个节日象征，动画里的角色也仅仅存在于屏幕之上。进入高中后，阿虚已经习惯了平淡无奇的生活，但他内心深处仍然保留着对不凡事物的向往。直到遇见了凉宫春日，他的生活发生了翻天覆地的变化。\n\n凉宫春日自幼便认为自己与众不同，经历的事情也是全世界最有趣的。然而，在小学六年级的一次棒球赛中，当她在巨大的体育馆里看到五万名观众时，她突然意识到自己独特的生活其实是每个人都会经历的一部分。那次经历让她开始思考：在如此庞大的人口基数下，一定有人过着不平凡且充满趣味的生活，那么为什么那个人不能是她呢？于是，凉宫决定开始主动寻找并创造那些不同寻常的故事。\n\n在开学第一天，她大胆地向全班同学宣告：“我对普通的人类没有兴趣。如果你们当中有外星人、未来人、异世界的人或者超能力者，请尽管来找我！”这番话并未引起太大的反响，因为对于那些熟悉她的同学们来说，这只是她一系列奇特行为的冰山一角而已。为了追求与众不同的生活，凉宫曾尝试过许多非传统的方式：比如在学校操场上用石灰画出巨大图案、在楼顶上用油漆绘制星星、甚至还在校园里到处贴纸符。此外，她还曾经加入过学校里的所有社团，但在发现这些活动都太过平常之后又一一退出。\n\n或许是受到凉宫这种积极态度的影响，阿虚也开始回忆起自己曾经对于冒险生活的渴望。当凉宫抱怨说学校里没有任何有趣的社团时，阿虚曾试图劝解道：“人类都会满足于现状，无法安于现状的人会通过发明或发现来推动文明的发展……只有那些天才才能将那些想法变为现实，身为凡人的我们，平庸地度过一生才是最好的选择。”然而，这段话却意外激发了凉宫成立“让世界变得更加热闹的凉宫春日团”（简称 SOS 团）的决心。\n\n随着 SOS 团的成立，除了阿虚和凉宫两名成员之外，又有三名新成员陆续加入——长门有希、朝比奈实玖瑠以及古泉一树。令人惊讶的是，这三人实际上分别是真正的外星人、未来人以及超能力者。起初，阿虚并不相信他们的身份，但在亲身经历了几次不可思议的事件后，他不得不承认凉宫春日的确有着能够吸引奇异事物的力量。从此，故事从现实风格开始逐渐转向科幻风格。有趣的是，在 SOS 团里只有凉宫春日一人不知道她自己有着神一般的能力，和《名侦探柯南》里只有少数人知道柯南的真实身份有异曲同工之妙，这种东西被称为“麦高芬”，起的是推动故事情节发展的作用。\n\n《凉宫春日系列》不仅仅是一部简单的娱乐作品，它更深层次地探讨了个人如何在日常生活中寻找意义，并勇敢地追求梦想。凉宫春日作为一个充满想象力的角色，始终保持着对未知世界的好奇心和探索欲望。她鼓励人们不要轻易接受现状，而是要勇于尝试新事物，即使结果可能并不如预期般完美。通过创建 SOS 团，她把自己期待的外星人、未来人以及超能力者齐聚一堂（虽然她自己是不知道的），拍摄自制电影在校庆上播放（虽然 SOS 团是一个地下组织，不可能获奖）等，她确实从平凡的生活里自己创造了一些不平凡的事情，实现了自己渴望不凡的梦想。\n\n该作品也提醒我们要勇于面对挑战，在成长的过程中找到属于自己的位置。在故事的中后期，随着 SOS 团活动的进行，以及团员们共同经历了一些巨大危机后，凉宫春日的性格稍微收敛了一点，其他三个团员也在逐渐发生着变化：原本沉默寡言的长门有希开始学会表达情感；害羞内向的朝比奈实玖瑠变得越来越自信；而看似冷静理智的古泉一树也在不断调整自己对待生活的态度。\n\n该作品还强调了珍惜当下每一刻的重要性。随着故事情节的发展，阿虚等人逐渐认识到即使是看似平淡无奇的日子也充满了特别之处，每个瞬间都是独一无二且宝贵的，我们应该学会欣赏并感激现在所拥有的一切，用未来人的话来说就是“既定事项”。无论身处何种环境之中，只要愿意用心去感受、去体验，就能够发现生活中的美好与奇迹。\n\n总之，《凉宫春日系列》以其独特视角展示了如何在平凡中发现非凡的可能性。通过一系列精彩纷呈的故事，该书鼓励读者保持好奇心与创造力，勇于探索未知领域，享受旅程中的每一步。这不仅是一次心灵上的启迪之旅，更是一份关于勇气与坚持的美好寄语。\n\n### 动态的历史：《现代心理学史》第一章读书笔记\n\n《现代心理学史》这本书向我们展示了心理学在历史上的演变过程。早在公元前 5 世纪，古希腊哲学家就开始基于个人经验和直觉探索人类的本性和行为，他们探讨了记忆、学习、动机、思维、知觉和变态行为等主题，这些主题成为了后来心理学研究的基础框架。然而，直到 19 世纪晚期，随着生理科学领域工具与技术的成功应用，心理学才逐渐从哲学中独立出来，成为了一个以科学实验为基础的学科。\n\n研究心理学的发展历史结合了心理学与历史编撰学两个领域的知识。在重建心理学的历史时，历史编撰学家采用的方法类似于考古学家，因为他们无法通过重现历史的情境来做实验。相反，他们必须依赖于过去遗留下来的各种资料记录，比如事件参与者或目击者的文字描述、信件、日记、照片、实验设备以及官方文件等，这些资料是重建历史事件的关键。然而，这些资料也可能因为遗失或被故意销毁而变得不完整。例如，行为主义创始人约翰·B.华生在去世前烧毁了自己所有的信件、手稿和研究笔记，使得这部分重要的历史资料永远消失。\n\n有时，重要文献还可能因为存放不当而长期未能被发现。如艾宾浩斯关于人类学习和记忆的研究论文在他去世 75 年后才被找到，而费希纳的十箱日记在他去世近一个世纪后才被发掘出来。这些文档对于理解早期心理学的发展至关重要，但在它们被发现之前，许多有关艾宾浩斯和费希纳的作品都是在缺乏这些关键资料的情况下完成的。\n\n历史数据还可能会受到歪曲，这种歪曲可能来源于翻译过程中产生的误解，也可能是由于事件的参与者或观察者有意无意地对相关事件进行了扭曲。如弗洛伊德提出的“Einfall”（入侵）一词在英语中被译为“free association”（自由联想），但实际上这个词的意思更接近于无意识内容对意识思想的侵入，而并非简单的观念联结。\n\n历史叙述还可能受到当事人主观意图的影响。如行为心理学家 B.F.斯金纳在其自传中描绘了一个严格自律的学生形象，但在自传出版后的多年，他却否认了自己的研究生生涯如此艰辛，并承认自己的回忆是一种理想化的生活状态。斯金纳以前的一个同学说：斯金纳总是比其他同学都迅速地完成实验室工作，然后打整个下午的乒乓球。这样的例子揭示了历史学家所面临的困境：究竟哪个版本的故事更为准确？\n\n以上种种问题提示我们，对于历史的理解是一个动态的过程。每当新的数据被发现或是旧的数据被得到重新解释，历史故事就会发生变化。历史在不断地发展、浓缩并被纠正，因此它总是未完成的且不够完善的。历史学家的工作就是在这个过程中不断追求真理，尽管他们的叙述可能只是逐步地接近真相。随着新的发现和对历史数据的新分析，我们的理解将变得更加完善。\n\n### 乡音无改：《郧县志（1979-2008）》读书笔记\n\n郧县是我的故乡，它位于鄂西北的十堰市，中国的鸡心位置。2014 年 12 月，郧县撤县设区，改为郧阳区。2024 年 8 月，“郧县人”被写进人教版七年级上册的《中国历史》教科书中，与“元谋人”“蓝田人”“北京人”“山顶洞人”并列，所以也可以看作是你我的共同故乡。\n\n[《郧县志（1979-2008）》](http://www.sydaxxw.com/dfzgz/dfzk/202302/t20230208_4179784.shtml)全书有三十二卷，囊括了从行政区划、地理环境到经济社会生活等的各个方面，记述了改革开放 30 年来郧县的历史和发展状况。附录还收集了一些古代的敕谕、疏奏、文化作品，以及康熙、同治和清末到 20 世纪末的前版《郧县志》序，前志勘误表和补遗等。如此庞大的一部的著作，通读下来是要花费大量时间的。如果给老乡推荐这本书的话，我首先推荐最后一卷《人物》，你可以与你的父辈交流讨论，在里面寻找有没有你们认识的人。其次就是第三十卷《社会生活》里关于我们家乡的方言了。\n\n声调方面，普通话的四个声调为阴平（一声）、阳平（二声）、上声（三声）、去声（四声）。如“鸡鸣狗盗”。郧县话则是把普通话的一声读作二声、二声读作四声、三声读作一声、四声读作三声的前半部分。如“极命钩岛”。与河南话有相似之处。\n\n发音方面，郧县方言存在把两字合成一字的读的情况，如女娃（nüā）子。有少数字可拼写出发音，却无法使用对应的字书写，如“这篇文章写得 diàng 得很！”（diàng 是好的意思），“那个人很 niào 劲”（niào 劲是厉害的意思）。还有无法使用汉语拼音方案标注的发音，如“去”、“给”、“黑”等。\n\n人物称谓方面，郧县方言对一般人或亲属的称谓中存有大量集体称谓。诸如，所有的男孩儿都称儿娃子，所有的女孩儿都称女娃（合音 nüā）子；所有成人已婚男性统称男将，所有成人已婚女性统称女将；所有的上辈统称长辈或老辈子；所有的下辈统称晚辈；同辈男性女性统称姊妹。年龄大小不同有固定称谓，所有与祖父年龄相当的称爷爷奶奶或某姓爷爷、某姓奶奶。如李爷爷、王爷爷、王奶奶等；所有的小偷统称贼（zèi）娃（wā）子或三只手，所有的莽汉、痴呆、傻子都可称二球，所有的懒人都可称懒汉或黄鳝或懒婆娘等。\n\n动植物称谓方面，比较有特色的有：豌豆八哥（布谷鸟）、长虫（蛇）、蛐蜷（蚯蚓）、狼巴子（狼）、苞谷（玉米）、莲菜（藕）、牛吭气（半夏）、牛抵钻（半夏果）等。\n\n时空间称谓方面，有特色的有：年逝（去年）、门儿（明天）、晌午（中午）、连猛儿（立即）、高头（上面）、底下（下面）、河趴（河滩）等。\n\n人的身体、疾病、品行称谓方面，有特色的有：胳奓窝（腋窝）、手脖子（手腕）、日噘（批评）、干气（含羞）、日弄人（捉弄人）、扳跤（摔跤）、恶骚（厉害）、稀打会儿（险些）、兑差（凑合）、秧秧的儿（萎靡不振）、腻得很（高傲自大）等。\n\n俏皮话方面，有特色的有：“人是铁饭是钢，一顿不吃心发慌”，“捡个棒槌当根针”，“喝一辈子酒，丢一辈子丑；抽一辈子烟，烧一辈子手”等。\n\n在读书的过程中仿佛回到了儿时的语言环境里，那些熟悉的乡音，夹杂着童年的欢笑与纯真，随着文字缓缓流淌进我的心中，我似乎能够闻到故乡泥土的气息，听到老街坊间的亲切问候，感受到那份独特的归属感。这种语言不仅是沟通的工具，更是一种情感的纽带，它连接着过去与现在，让我即使身处他乡，也能通过书页上的字句重温那段无忧无虑的日子。这份体验不仅仅是一次简单的阅读经历，而是一场心灵之旅，让我更加珍惜自己的文化根源，并渴望将这份珍贵的文化遗产传承下去。\n\n---\n\n- 第一篇的前半部分是自己写的加上 AI 修改，后半部分的感想是 AI 写的，后续人工修改。\n- 第二篇的第一段是从书里总结的，后面全是 AI 缩写原书内容，后续人工修改。\n- 第三篇的前半部分是自己写的，后边全是摘抄报菜名，最后是引导句加 AI 扩写的。\n","slug":"过去的笔记","published":1,"updated":"2025-09-14T14:50:17.671Z","__permalink":"wait.html","comments":1,"layout":"post","photos":[],"_id":"cmg2e3lnu000s5ws6guuq702a","content":"<h2 id=\"json\">JSON</h2>\n<p>JSON（JavaScript Object Notation，JavaScript\n对象表示法）是一种轻量级的数据交换格式，可以看成是字符串。和 JavaScript\n没什么关系，就像 JavaScript 和 Java 没什么关系一样。从 Python\n的角度来看，一个 JSON 文件是一系列列表和字典的嵌套。</p>\n<p>JS：</p>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jsonStr = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(jsObj);</span><br><span class=\"line\">jsObj = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(jsonStr);</span><br></pre></td></tr></tbody></table></figure>\n<p>Python：</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\">json_str = json.dumps(py_obj)</span><br><span class=\"line\">py_obj = json.loads(json_str)</span><br></pre></td></tr></tbody></table></figure>\n<span id=\"more\"></span>\n<h2 id=\"计算机网络\">计算机网络</h2>\n<h3 id=\"接网线头的流程和注意事项\">接网线头的流程和注意事项</h3>\n<p>RJ45 水晶头的接线方式有两种，多使用\nT568B：橙白 | 橙、绿白 | 蓝、蓝白 | 绿、棕白 | 棕。</p>\n<ol type=\"1\">\n<li>用网线钳的圆孔把网线的表皮剥开，转一下不要使太大力\n<ul>\n<li>露出来里面的线的长度长一点，比两倍水晶头的长度长</li>\n</ul></li>\n<li>你会看到有四对缠在一起的线，把它们分开成一根一根的\n<ul>\n<li>这时候先不用管它们的顺序</li>\n</ul></li>\n<li>用力把它们捋直，多捋几次</li>\n<li>它们缠在一起的时候是：橙白 | 橙、绿白 | 绿、蓝白 | 蓝、棕白 | 棕，接线的时候要把中间两根交换一下位置</li>\n<li>用网线钳的刀把它们从中间剪断，保证这几根线的末端是平齐的。注意两点：\n<ul>\n<li>哪里排列地最整齐紧密，就从哪里剪</li>\n<li>留下的长度不要比一倍水晶头的长度过长，否则露出来的部分容易损坏。这是一个<strong>反面的例子</strong>：这几根线的下面留得太长了，没还有完全地分开</li>\n</ul></li>\n</ol>\n<p><img src=\"/blog/images/rj45.webp\"></p>\n<ol start=\"6\" type=\"1\">\n<li>把这几根线插入到水晶头里。注意：水晶头的卡扣是朝下的\n<ul>\n<li>如果顺利，这八根线会待在它们的八个凹槽里，它们的头上有八个片片</li>\n</ul></li>\n<li>把水晶头插入网线钳的槽里，用网线钳用力把这八个片片刺入线的内部，在刺的时候能感受到阻力</li>\n<li>两头都接好之后，用工具测试是否联通</li>\n</ol>\n<h3 id=\"概述\">概述</h3>\n<p>世界上第一个网页：<a href=\"http://info.cern.ch\">http://info.cern.ch</a></p>\n<p>RFC 文档：“请求评论”（Request For\nComments）的文档，公开发布的互联网建议标准，请求公众评论。最后制定互联网标准\nSTD。</p>\n<p>互联网服务提供者（Internet Service\nProvider），可以是移动联通电信公司，也可以是非营利组织。主干 ISP：国 |\n地区 ISP：省 | 本地 ISP：省以下。两个同级 ISP\n交换信息时，可以通过互联网交换点（Internet eXchange\nPoint）IXP，而不必通过上级 ISP。</p>\n<p>计算机网络分边缘部分和核心部分。边缘部分是我们所有人直接使用的主机，如手机和电脑。核心部分是除了边缘主机之外的所有硬件设施，如交换机、路由器、网线。接入网是边缘部分向核心部分过渡的部分。</p>\n<p>边缘部分的通信分 C/S 模式和 P2P\n模式。两者的区别是学生向老师请教题目和学生之间互相讲题，在下载文件之后做不做种。</p>\n<p>核心部分的通信：电路交换是提前联系用一辆专车运货；分组交换是把货物拆分成小的快递，再经过各种站点发送出去；报文交换是将货物作为一个整体，通过多个中转站运送。前两者的区别是一手和多手，后两者的区别是切不切片。</p>\n<p>分组交换：</p>\n<ol type=\"1\">\n<li>TCP\n协议把报文分组，每组写上头部信息。（包裹大包分成小包，写上序号、寄出地和目的地等）</li>\n<li>通过路由器一级一级地转发到目的地。</li>\n</ol>\n<pre><code class=\"mermaid\">\ngantt\ntitle 分组交换（甘特图）\ndateFormat s\naxisFormat %S\n\nsection 1 号包\n从 A 到 B :0, 5s\n从 B 到 C :5, 5s\n从 C 到 D :10, 5s\n\nsection 2 号包\n从 A 到 B :5, 5s\n从 B 到 C :10, 5s\n从 C 到 D :15, 5s\n\nsection 3 号包\n从 A 到 B :10, 5s\n从 B 到 C :15, 5s\n从 C 到 D :20, 5s\n</code>\n</pre>\n<ul>\n<li>0-5 时间 1 号包裹从 A 站到 B 站</li>\n<li> 5-10 时间 1 号包裹从 B 站到 C 站、2 号包裹从 A 站到 B 站</li>\n<li> 10-15 时间 1 号包裹从 C 站到 D 站、2 号包裹从 B 站到 C 站、3\n号包裹从 A 站到 B 站</li>\n</ul>\n<ol start=\"3\" type=\"1\">\n<li>把各个包裹合并。</li>\n</ol>\n<h3 id=\"物理层\">物理层</h3>\n<p>RJ45 水晶头的接线方式有两种，多使用\nT568B：橙白 | 橙、绿白 | 蓝、蓝白 | 绿、棕白 | 棕。传的是数字信号。</p>\n<ul>\n<li>物理层之下的传输媒体\n<ul>\n<li>导引性传输媒体：双绞线、光缆、同轴电缆、架空明线</li>\n<li>非导引性传输媒体：空气或真空</li>\n</ul></li>\n</ul>\n<p>集线器工作在物理层。</p>\n<ul>\n<li>通信双方的交互方式\n<ul>\n<li>单向通信（单工）：一段单行道。电视、广播。</li>\n<li>双向交替通信（半双工）：一段有两个车道的马路，但是规定在一边的车道有车正在走时，另一边（相反方向）的车道不能有车走。对讲机。</li>\n<li>双向同时通信（全双工）：一段正常的两个车道的马路。</li>\n</ul></li>\n</ul>\n<p>编码方式：编码的终点是码，即数字信号。</p>\n<p>如何把比特和电压互相转换。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> 1  1  0  0  1</span><br><span class=\"line\"></span><br><span class=\"line\">‾‾‾‾‾‾______‾‾‾    # 极性不归零电平 Polar NRZL，Non-Return-to-Zero level</span><br><span class=\"line\"></span><br><span class=\"line\">‾‾‾_________‾‾‾    # 极性不归零反转 Polar NRZI，Non-return-to-zero inverted，边界遇 1 跳变</span><br><span class=\"line\"></span><br><span class=\"line\">-‾--‾--_--_--‾-    # 极性归零 Polar RZ，Return-to-Zero，正脉冲凸，负脉冲凹</span><br><span class=\"line\"></span><br><span class=\"line\">‾_|‾_|_‾|_‾|‾_|    # 曼彻斯特编码（G.E. Thomas Convention）</span><br><span class=\"line\"></span><br><span class=\"line\">‾_|_‾|_‾|_‾|‾_|    # 差分曼彻斯特编码（G.E. Thomas Convention）</span><br></pre></td></tr></tbody></table></figure>\n<p>曼彻斯特编码：中心始终跳变</p>\n<ul>\n<li>G.E. Thomas Convention：\n<ul>\n<li>中心向下跳变，<code>‾_</code>，<code>1</code></li>\n<li>中心向上跳变，<code>_‾</code>，<code>0</code></li>\n<li>简记：<strong>下为 1</strong></li>\n</ul></li>\n<li>IEEE 802.3 Convention 和上面的定义相反</li>\n</ul>\n<p>差分曼彻斯特编码：中心始终跳变</p>\n<ul>\n<li>G.E. Thomas Convention：\n<ul>\n<li>左边界无跳变，<code>1</code>\n<ul>\n<li><code>_|_‾</code></li>\n<li><code>‾|‾_</code></li>\n</ul></li>\n<li>左边界有跳变，<code>0</code>\n<ul>\n<li><code>_|‾_</code></li>\n<li><code>‾|_‾</code></li>\n</ul></li>\n<li>简记：<strong>左连为 1</strong></li>\n</ul></li>\n<li>IEEE 802.3 Convention 和上面的定义相反</li>\n</ul>\n<h3 id=\"数据链路层\">数据链路层</h3>\n<p>解决三个问题：发出去之后，哪一方接收；传输何时开始，何时结束；判断是否有传输错误</p>\n<p>网卡：</p>\n<ul>\n<li>负责把有线或无线电信号与比特流互转。工作在物理层和数据链路层。</li>\n<li>与 CPU 和存储器并行通信，与局域网串行通信</li>\n<li>接收并缓存 MAC\n帧，帧的目标地址不是它自己时，或者不符合格式、校验失败时就丢弃</li>\n<li>安装驱动到操作系统，实现以太网协议</li>\n</ul>\n<blockquote>\n<p>MAC</p>\n</blockquote>\n<p>MAC 地址有 6 个字节。全 1 的地址是广播地址</p>\n<p>Windows 查看网络适配器的 MAC 地址：ipconfig /all</p>\n<ul>\n<li>前三个字节是 IEEE\n的注册管理机构分配的，后三个字节是厂家自行分配的</li>\n<li>第一个字节最低位：0 为单播，1 为多播</li>\n</ul>\n<blockquote>\n<p>透明传输</p>\n</blockquote>\n<p>帧定界符 SOH 0x01、EOT 0x10，转义字符 ESC 0x1B</p>\n<p>如果数据长度超过了 MTU，会被分割成多个帧。</p>\n<p>下到物理层：在 MAC 帧前面插入 7 字节的前同步码和 1\n字节的帧定界符：就是\n<code>10101010 10101010 ... 10101010 10101011</code>。交替的 10\n用于时钟同步，最后一个字节的最后一个比特变了，告诉接收端，后面的就是 MAC\n帧。不用标记帧结束，因为是曼彻斯特编码，一直在跳变，脱离原本的规律了就是帧结束了。</p>\n<blockquote>\n<p>差错检测</p>\n</blockquote>\n<p>比特差错：01 错了。误码率（BER）：平均每传送 <span class=\"math inline\">\\(\\mathrm{(BER)^{-1}}\\)</span>\n个比特，会有一个比特出错。</p>\n<p>传输差错：接收方没有收到某一个帧，或者收到了重复的帧，或者收到帧的顺序错了</p>\n<p><strong>FCS</strong></p>\n<p>帧检验序列 Frame Check Sequence，确保无比特差错</p>\n<ol type=\"1\">\n<li>提前规定冗余码有 3 位</li>\n<li>提前规定一个除数 <span class=\"math inline\">\\(P\\)</span>\n，比冗余码的长度多一位，如 <code>1100</code></li>\n<li>把待传的数据 <code>1001 0001</code> 后边补上冗余码长度个\n0，用除数除它</li>\n<li>不管大小，<code>1</code> 开头就商 <code>1</code>，<code>0</code>\n开头就商 <code>0</code>：</li>\n</ol>\n<figure class=\"highlight txt\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        1</span><br><span class=\"line\">    --------------</span><br><span class=\"line\">1100|1001 0001 000</span><br><span class=\"line\">     1100</span><br><span class=\"line\">     ------</span><br><span class=\"line\">      101 0</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"5\" type=\"1\">\n<li>相减，相当于异或</li>\n<li>继续除，最后的余数 <code>100</code> 就是冗余码</li>\n<li>把冗余码添加到原数据的末尾</li>\n</ol>\n<p><strong>CRC</strong></p>\n<p>循环冗余检验 Cyclic Redundancy Check</p>\n<p>接收方把收到的、经发送方添加了冗余码后的数据再用 <span class=\"math inline\">\\(P\\)</span> 去除。传输没出错 -&gt;\n余数为零，反之为极大概率。</p>\n<p>除数 <span class=\"math inline\">\\(P\\)</span>\n还有一种记法，叫生成多项式 <span class=\"math inline\">\\(P(X)\\)</span>：如\n<code>1100</code> 记作：<span class=\"math inline\">\\(X^3+X^2\\)</span></p>\n<blockquote>\n<p>交换机</p>\n</blockquote>\n<p>交换机工作在数据链路层，全双工。并且不使用 CSMA/CD\n协议，但仍然使用以太网的帧结构。</p>\n<p>交换表的结构：MAC 地址、端口号、有效时间、状态标志</p>\n<p>源机器发送数据帧 → 交换机记录源 MAC 地址 → 交换机查找目标 MAC 地址 →\n如果目标未知，广播数据帧 → STP 确保广播不会形成环路。</p>\n<p>交换机分为直通交换和存储转发。直通交换不校验 FCS，直接读 6\n字节的目标地址（有时包含前导码）。</p>\n<blockquote>\n<p>以太网</p>\n</blockquote>\n<p>以太网是局域网的一种实现方式，与 Wifi 的区别是后者不用网线。</p>\n<ul>\n<li>DIX Ethernet V2 和 IEEE 802.3 是以太网的协议，使用\nCSMA/CD（冲突检测）</li>\n<li>IEEE 802.11 是 Wifi 的协议，使用 CSMA/CA（冲突避免）</li>\n</ul>\n<p>局域网共享信道，为避免冲突，可采用静态划分信道（复用）或动态媒体接入控制</p>\n<p>以太网 V2 的 MAC 头部：目标 MAC + 源 MAC + 类型\n0800【IPv4】/80DD【IPv6】</p>\n<ul>\n<li>MAC 帧的格式\n<ul>\n<li>（带宽为 <span class=\"math inline\">\\(\\mathrm{10Mbit/s}\\)</span>\n的）以太网 V2： <span class=\"math display\">\\[\n6 + 6 + 2 + (46 \\sim 1500) + 4 = (64 \\sim 1518) 字节\n\\]</span> 其中 <span class=\"math inline\">\\(\\mathrm{64Byte = \\dfrac{51.2\n\\mu s \\times 10Mbit/s}{8bit/Byte}}\\)</span>，减去 18\n字节的首部和尾部后，得到数据部分的最小长度 46 字节。</li>\n</ul></li>\n</ul>\n<p>100BASE-T 以太网：</p>\n<ul>\n<li>使用双绞线（T），带宽为 100Mbit/s。</li>\n<li>标准是 IEEE 802.3u，半双工时使用 CSMA/CD 协议，全双工时不使用。</li>\n<li>争用期为 5.12 μs，帧最小间隔 0.96 μs，是 10 Mbit/s\n以太网的十分之一。</li>\n</ul>\n<h3 id=\"网络层\">网络层</h3>\n<blockquote>\n<p>IPv4 分类编址</p>\n</blockquote>\n<p>4 个字节。</p>\n<ul>\n<li>A 类地址：0 + 7 位网络号 + 3 字节主机号，首字节 0 到 127</li>\n<li>B 类地址：10 + 14 位网络号 + 2 字节主机号，首字节 128 到 191</li>\n<li>C 类地址：110 + 21 位网络号 + 1 字节主机号，首字节 192 到 223</li>\n</ul>\n<p>主机号全 1 是广播地址，全 0 是该子网。</p>\n<p>私有地址：用于局域网（LAN）内部，不可直接在互联网上路由。</p>\n<ul>\n<li>A 类：10.0.0.0 到 10.255.255.255</li>\n<li>B 类：172.16.0.0 到 172.31.255.255</li>\n<li>C 类：192.168.0.0 到 192.168.255.255</li>\n</ul>\n<blockquote>\n<p>无分类编址 CIDR</p>\n</blockquote>\n<p>子网掩码：用于标记用 IP 地址前面的几位来表示网络地址。</p>\n<p>子网掩码类似 <code>255.248.0.0</code>\n（<code>11111111 11111000 00000000 00000000</code>），即用前面 13\n位表示网络地址，后面的位表示主机地址。记作 <code>IP地址/13</code>。</p>\n<h3 id=\"计算\">计算</h3>\n<p>信道长度、带宽和信噪比会影响数据在信道中传输的速率，而信号传播速度（电磁波在介质中的传播速度）不会。</p>\n<p>信噪比越大，接收方接收到的信息失真越少。两种表示方式：</p>\n<ul>\n<li><span class=\"math inline\">\\(\\dfrac {S}{N} =\n\\dfrac {信号平均功率}{噪声平均功率} = 10^{\\mathrm {dB}/10}\\)</span></li>\n<li><span class=\"math inline\">\\(\\mathrm{dB} = 10\n\\lg\\dfrac{S}{N}\\)</span></li>\n</ul>\n<p>计算传输速率时，取奈氏准则和香农公式的结果小的。</p>\n<p>Kibi：内存、存储容量，KiB = KB = 1024B</p>\n<p>Kilo：网络带宽，K = 1000，国际单位制的词头</p>\n<p><span class=\"math inline\">\\(\\mathrm{bit/s}\\)</span></p>\n<ul>\n<li>速率</li>\n<li>吞吐量：指实际速率，进量 +\n出量。有多条链路时，吞吐量由瓶颈链路决定。</li>\n<li>某信道的最高速率：时域上的带宽</li>\n<li>有效数据（速）率：<span class=\"math inline\">\\(\\mathrm {\\dfrac {数据长度}{发送时间 + RTT}}\\)</span></li>\n</ul>\n<p><span class=\"math inline\">\\(\\mathrm{Hz}\\)</span></p>\n<p>频域上的带宽 W：信号频率范围的宽度</p>\n<p>秒</p>\n<ul>\n<li>发送时延：网卡发送数据的时间，与信道长度无关。<span class=\"math inline\">\\(\\mathrm {\\dfrac {bit}{bit/s}} =\n\\dfrac {数据长度}{发送速率}\\)</span></li>\n<li> 传播时延：电磁波在网线或空气中传播的时间。与信道长度有关。<span class=\"math inline\">\\(\\mathrm {\\dfrac {m}{m/s} =\n\\dfrac {信道长度}{信号传播速率}}\\)</span></li>\n<li> 处理时延：主机或路由器收到分组后，对分组进行处理的时间。</li>\n<li>排队时延：分组在路由器输入队列和输出队列里排队的时间。</li>\n<li>……-&gt; 输出排队 -&gt; 发送 -&gt; 传播 -&gt; 输入排队 -&gt; 处理 -&gt; 输出排队……</li>\n<li>RTT：往返时间（Round-Trip Time）</li>\n</ul>\n<p>这里忽略了在接收和发送之间的排队时间和处理时间。</p>\n<pre><code class=\"mermaid\">\ngantt\ntitle RTT（甘特图）\ndateFormat s\naxisFormat %S\n\n    section RTT\n    RTT :3,17s\n\n    section A\n    发送           :0,3s\n    接收    :17,3s\n    ……    :20,4s\n\n    section 传播\n    从A到B传播    :1,8s\n    从B到A传播    :11,8s\n\n    section B\n    接收      :7,3s\n    发送    :10,3s\n\n</code>\n</pre>\n<p>bit</p>\n<p>时延带宽积：<span class=\"math inline\">\\(\\mathrm {s \\times bit/s =\n传播时延 \\times 带宽}\\)</span></p>\n<p>已经从发送端发出，但尚未到达接收端的比特数。又叫以比特为单位的链路长度。</p>\n<p>m/bit</p>\n<p>每比特宽度：每个比特在信道中占据的长度。</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n&amp;\\mathrm {m/bit = \\dfrac {m}{bit} = \\dfrac {信道长}{比特数}} \\\\\n&amp;\\mathrm {m/bit = \\dfrac {m/s}{bit/s} =\n\\dfrac {信道传播速率}{信道当前带宽}}\n\\end {aligned}\n\\]</span></p>\n<p>其他</p>\n<p>利用率：<span class=\"math inline\">\\(网络利用率 = 1 -\n\\dfrac {空闲时延}{当前时延}\\)</span></p>\n<p>利用率越高，当前时延越大（堵车）。</p>\n<blockquote>\n<p>码元</p>\n</blockquote>\n<p>用来表示码的单个元。类比信号，码就是波形，码元就是在发送和解读波形时，可以分辨的最小单位波形。码元种类数是信号的状态数\n<span class=\"math inline\">\\(n = 2^x\\)</span></p>\n<ul>\n<li>码元对应的比特数 <span class=\"math inline\">\\(x =\n\\log_2(n)\\)</span></li>\n<li> 当 <span class=\"math inline\">\\(0 &lt; x &lt;\n1\\)</span> 时，一个比特由多个码元表示</li>\n</ul>\n<blockquote>\n<p>比特率和波特</p>\n</blockquote>\n<p><span class=\"math inline\">\\(\\mathrm{bit/s} = 2Wx =\n2W\\log_2(n)\\)</span></p>\n<p>符号速率（码元每秒）也叫波特 Baud</p>\n<blockquote>\n<p>奈奎斯特准则</p>\n</blockquote>\n<p>无噪声低通信道中，保证接收方接收符号不出错时的速率上限为 2W x\n码元数，W 为频域带宽 Hz，单位为波特。</p>\n<blockquote>\n<p>香农公式</p>\n</blockquote>\n<p>速率是有极限的，但要信息传输速率低于极限速率，就一定能找到某种方法实现无差错的传输。</p>\n<p>香农 — 哈特莱容量定理，考虑到了信道有噪声：</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n信道极限速率 &amp; = \\mathrm {bit/s = Hz \\times bit} \\\\\n&amp; = W \\log_2 (1 + \\dfrac {S}{N}) \\\\\n\\end {aligned}\n\\]</span></p>\n<blockquote>\n<p>正交振幅调制（QAM）</p>\n</blockquote>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n调制后的信号 &amp; = 振幅 \\times 载波 (相位) \\\\\ny &amp; = A\\sin (\\omega x + \\phi) \\\\\n\\end {aligned}\n\\]</span></p>\n<p>用不同的<strong>振幅</strong>和<strong>相位</strong>排列组合，来表示（承载）不同的基带信号，比只调幅 / 只调频 / 只调相的信息密度高。</p>\n<p>使用 <span class=\"math inline\">\\(x\\)</span> 个振幅和 <span class=\"math inline\">\\(y\\)</span> 个相位的 QAM 时，一个码元对应的比特数是\n<span class=\"math inline\">\\(\\log _2(xy)\\)</span> 向上取整。</p>\n<blockquote>\n<p>信道复用</p>\n</blockquote>\n<p>频分复用（FDM）：Frequency Division\nMultiplexing，把一个大频带划分成若干个小频带，把不同的信号分别调制到这些小频带里。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|C信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|B信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|A信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|</span><br><span class=\"line\">|-----------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>时分复用（TDM）：把时间分割成一个个 TDM\n帧，每帧内分为若干个时隙，每个时隙内分别传送不同的信号。相当于 CPU\n单核进程并发。每个 TDM\n帧内保证每组信号都传了，就是没传也要保留留给它的空时隙。这造成信道利用率不高。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|A|B|C|A|B|C| |B|C|A| |C|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|     |     |     |     |</span><br><span class=\"line\">|TDM帧|TDM帧|TDM帧|TDM帧|</span><br><span class=\"line\">|------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>统计时分复用（STDM）：在每个 STDM\n帧内，时隙数量小于信号种类数量。为每组信号动态分配时隙，比如 B\n信号断了可以先不传它。</p>\n<p><strong>有四组信号 ABCD：</strong></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ^信号</span><br><span class=\"line\"> |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">D| d | d | d | d |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">C|   | c | c | c |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">B| b | b |   |   |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">A| a |   | a | a |</span><br><span class=\"line\"> |------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p><strong>STDM：</strong></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|a|b|d|b|c|d|a|d|c|c|d|a|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|     |     |     |     |</span><br><span class=\"line\">|STDMf|STDMf|STDMf|STDMf|</span><br><span class=\"line\">|------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>波分复用（WDM）：就是光的频分复用，但是用波长表示。</p>\n<p>码分复用（CDM）：CDMA\n通过为每个用户分配一个独特的扩频码来实现信号的分离，这些扩频码之间是正交的。</p>\n<ul>\n<li>编码：某用户的码元内积扩频码，与其他用户的叠加成混合信号。</li>\n<li>解码：混合信号内积用户的扩频码，得到一个码元。</li>\n</ul>\n<h2 id=\"计算机组成原理\">计算机组成原理</h2>\n<p>注意：这里的知识是未经验证的，不一定正确。</p>\n<h3 id=\"计算机体系概论\">计算机体系概论</h3>\n<blockquote>\n<p>“存储程序” 特点？</p>\n</blockquote>\n<p>早期计算机通过硬件开关或打孔纸带输入程序，程序和数据是分离的。老冯提出了把毒和鸡汤存储在一起的思想：把程序和数据存在一起，存在存储器里。</p>\n<blockquote>\n<p>计算机的五个子系统？</p>\n</blockquote>\n<p>我们为什么要造计算机，要算个什么东西。所以输入、输出、算术逻辑运算肯定是有的。怎么算，你在草稿纸上算题，得有你这个人控制，得有中间结果。所以控制和存储是有的。</p>\n<blockquote>\n<p>主机？</p>\n</blockquote>\n<p>主机就是你引脚直接装在主板上的东西，粗略地理解为 CPU +\n内存。显示器和鼠标键盘属于输入输出系统，用线连在机箱外面。剩下三个系统就是主机：控制单元和算术逻辑单元\nALU 合称中央处理单元\nCPU；存储系统包括硬盘、内存、cache、寄存器，这四个是体积越小、容量越小、价格越贵。但是：硬盘不属于主存，不算在主机里面，它和输入输出系统合称外部设备，即 “用户与计算机通信的界面”。</p>\n<blockquote>\n<p>ALU？</p>\n</blockquote>\n<p>即算术逻辑单元 Arithmetic and Logic Unit</p>\n<blockquote>\n<p>指令和数据？</p>\n</blockquote>\n<p>指令和数据都是二进制的，在形式上无法区分，由控制器判断谁是指令，谁是数据。判断的依据是：当前处于哪个访问阶段，是处于取指周期还是执行周期。当程序被启动执行后，其指令和数据从外存被装进内存。</p>\n<blockquote>\n<p>取指执行过程？</p>\n</blockquote>\n<p>你上司给你发了一张纸，这张纸就是内存。纸上写了一些暗号：午时三刻，当街问斩。这个暗号就是指令，问斩是操作码，当街是地址码。你收到这张纸后，把指令从纸上取到你脑子缓冲区里，你脑子缓冲区就是指令寄存器，你至少得反应一会，这个反应的过程就是译码，</p>\n<blockquote>\n<p>K？</p>\n</blockquote>\n<p>按具体上下文，单独一个 K 可指 KB，即 2 的 10 次方个字节（Byte）</p>\n<blockquote>\n<p>汇编语言？</p>\n</blockquote>\n<p>汇编语言与具体的机器结构（指令集架构）有关，其源程序不能直接在机器上执行，还得过一道汇编器。</p>\n<blockquote>\n<p>机器语言？</p>\n</blockquote>\n<p>计算机硬件可以直接执行的是机器语言程序，一系列 0 和\n1。不是硬件描述语言，硬件描述语言是写电路的，用这种语言描述电路结构。汇编语言还要过一遍汇编器。</p>\n<blockquote>\n<p>机器字长？</p>\n</blockquote>\n<p>机器字长是二进制的位数，是 ALU\n和通用寄存器的宽度。指令寄存器和浮点寄存器的宽度可能与其不等。</p>\n<blockquote>\n<p>面向量纲 / 单位计算？</p>\n</blockquote>\n<p>CPI 的单位是：个 (时钟周期) 每个 (指令)</p>\n<p>时钟周期的量纲是：时间。这一个时钟周期有它的具体时间长度。</p>\n<p>主频的量纲是：频率，时间的倒数。一秒钟被分割成了有多少个时钟周期。</p>\n<p>MIPS 的单位是：(百万) 个 (指令) 每个 (秒)</p>\n<p>这里的 M 是 10 的 6 次方，主频里的 G 是 10 的 9 次方，往上指数 + 3 为 T\nP E B</p>\n<p>做计算题，先搞明白指令总数、时钟周期总数。指令总数乘上 CPI\n等于时钟周期总数。时间就是时钟周期总数乘上每个时钟周期所占的时间长度。</p>\n<p>在纸上画图：一个秒被切割成了一系列时钟周期，每个时钟周期执行一条指令。直接设未知数，列方程。</p>\n<h3 id=\"运算方法和运算器\">运算方法和运算器</h3>\n<p>幺二八六四 三二幺六 八四二幺 五二五幺二五 零六二五</p>\n<p>在发草稿纸之后，直接把 0 到 F\n全写下来（想当年笔者可以把元素周期表画下来（除了镧系和锕系），包括一直到气奥的各个元素名、绝大部分元素符号以及常见的相对原子质量，还有\n38324 14122 横批 4546 之类的。但是现在不行了。还有 2^31 - 1 =\n2147483647，这是四字节 int\n类型的最大值，这个数字最早在《植物大战僵尸》的修改器里见到，如果你无尽模式或者自选关过了这一波，它的程序会崩掉）</p>\n<blockquote>\n<p>原码反码补码移码？</p>\n</blockquote>\n<p>正整数的原码反码补码都是它的二进制按照某一个特定的位数表示，前面补零。</p>\n<p>负整数的原码，最高位为符号位\n1，后面为它的二进制形式按照某一个特定的位数表示，前面补零。</p>\n<p>负整数的反码，为原码除符号位的所有位按位取反后的结果。</p>\n<p>负整数的补码，为其反码 + 1，按位截断。</p>\n<p>移码 = 【真值 + （最高位所代表的 2 的次方值 -\n1）】的无符号整数表示</p>\n<p>如八位下 5 的移码是 <code>5 + 2^(8-1)</code> = <code>5 + 127</code> =\n<code>4 + 128</code> = <code>1000 0100</code></p>\n<blockquote>\n<p>八位下，零的表示形式？</p>\n</blockquote>\n<p>正零的原码：00000000</p>\n<p>负零的原码：10000000</p>\n<p>正零的反码：00000000</p>\n<p>负零的反码：11111111</p>\n<p>正零 / 负零的补码：00000000</p>\n<blockquote>\n<p>-26？</p>\n</blockquote>\n<p>26 = 16 + 8 + 2</p>\n<p>= 10000 + 1000 + 10</p>\n<p>= 00011010</p>\n<p>-26 = 10011010（原）= 11100101（反）= 11100110（补）= E6H</p>\n<blockquote>\n<p>BCD 码？</p>\n</blockquote>\n<p>用二进制编码的十进制数 (Binary-Coded Decimal)。对于 8421\n码，是把十进制数的每一个位转换成一个四位的二进制数。</p>\n<p>如 (1145)_10 = (0001 0001 0100 0101)_BCD</p>\n<blockquote>\n<p>进制转换？</p>\n</blockquote>\n<p>分向十进制转、从十进制向外转、二八十六互转。</p>\n<p>向十进制转：各个位的十进制值乘上以原进制为底、该位与小数点的相对位置为指数的幂，再相加。其中小数点左边一位的相对位置为零，小数点右边一位的相对位置为负一，以此类推。</p>\n<p>从十进制向外转：除 k 取余法 + 乘 k\n取整法。整数部分用短除法列竖式，用新进制的基数去除，除到商为零为止，之前的所有余数从下向上排列为新数的整数部分；小数部分乘上新进制的基数，取积的整数部分为新数的小数部分，积的小数部分继续与基数乘，直到积的小数部分为零或者出现循环节为止。</p>\n<p>对于一个 1000 以内的十进制数转成二进制，除 k\n取余法还是太教科书了，你可以直接把它拆分成 2\n的幂相加，因为加减法不容易出错。</p>\n<p>二八十六互转：四位二进制位与一位十六进制位在 [0,16) 这个整数范围内一一对应。小数点前后的部分直接按片段替换。三位二进制位与一位八进制位在 [0,8) 这个整数范围内一一对应。小数点前后的部分直接按片段替换。八与十六互转时，以二作为桥梁。</p>\n<blockquote>\n<p>浮点数的编码方式？</p>\n</blockquote>\n<p>对于 32 位浮点数 float，即单精度浮点数，最高位为符号位，后 8\n位为阶码，再后 23 位为尾数。</p>\n<p>阶码决定范围，尾数决定精度。</p>\n<p>浮点数转真值：把 1. 与 23\n位尾数缝合起来，转成十进制；把阶码作为移码求真值，作为 2\n的指数；两者相乘，带上符号位。</p>\n<p>普通数转浮点数：把<strong>绝对值</strong>先转成二进制，小数点挪到第一个\n1 的后面，为符号 (1.xxx) 乘 2^ 指数；符号放最高位；指数转为移码放后 8\n位；小数点后的部分取 “0 舍 1 入” 的 23 位。</p>\n<p>（意思就是：1.7 和 -1.7 只差一个符号位）</p>\n<p>对于 64 位双精度浮点数 double：阶码变成了 11 位</p>\n<blockquote>\n<p>float 的五种形式？</p>\n</blockquote>\n<p>32\n位二进制浮点数，她的位数是有限的，不可能双射无限多（阿列夫一）的（实）数。</p>\n<ul>\n<li>阶码全零，尾数全零：正 / 负机器零</li>\n<li>阶码全零，尾数不全零：非规格化数</li>\n<li>阶码全 1，尾数全零：正 / 负无穷大</li>\n<li>阶码全 1，尾数不全零：不是数（NaN）</li>\n</ul>\n<p>她的阶码有 8\n位，当不是全零或全一时，我们称她为规格化的。把阶码移码的身份转回正经数后，指数范围为 [-126,+127]，不考虑尾数，对应真值约\n2^(-126) 到 2^127，又约 10^(-38) 到 10^38。</p>\n<p>浮点数原码运算时，判定结果为规格化数的条件是：尾数的最高位为 1</p>\n<blockquote>\n<p>奇偶校验？</p>\n</blockquote>\n<p>看 1 的个数</p>\n<blockquote>\n<p>串行运算器？</p>\n</blockquote>\n<p>从低位到高位逐位运算</p>\n<blockquote>\n<p>加法器采用先行进位的目的？</p>\n</blockquote>\n<p>加速传递进位信号（没明白）</p>\n<blockquote>\n<p>采用双符号位的定点补码运算器，何时结果溢出？</p>\n</blockquote>\n<p>双符号位不同（没明白）</p>\n<h3 id=\"存储系统\">存储系统</h3>\n<blockquote>\n<p>存取周期？</p>\n</blockquote>\n<p>存储器进行连续读和写操作所允许的最短时间间隔（没明白）</p>\n<blockquote>\n<p>存储器采用分级存储的目的？</p>\n</blockquote>\n<p>钱、容量、速度三者不能兼得。</p>\n<blockquote>\n<p>寻址范围？</p>\n</blockquote>\n<ol type=\"1\">\n<li>内存能存储多少位二进制数</li>\n<li>多少位二进制数作为一个地址</li>\n<li>两者相除，结果无单位</li>\n</ol>\n<blockquote>\n<p>已被淘汰的存储器？</p>\n</blockquote>\n<p>磁芯存储器</p>\n<blockquote>\n<p>主存？</p>\n</blockquote>\n<p>主存由 RAM (Random Access Memory，随机存取存储器) 和\nROM (只读存储器，Read-Only\nMemory) 组成。同一个存储器里，每个存储单元宽度相同</p>\n<blockquote>\n<p>PROM? EPROM?</p>\n</blockquote>\n<p>前者是可编程 (P) 的 ROM，后者是可擦除的 PROM。</p>\n<p>PROM 不一定可被改写。EPROM 可被改写多次，但不能作 RAM</p>\n<p>U 盘、TF 卡属于闪存，闪存属于 EPROM</p>\n<blockquote>\n<p>SRAM? DRAM?</p>\n</blockquote>\n<p>一静一动，一快一慢。</p>\n<p>前者用于 CPU 缓存。后者用于主存、需要定时刷新、行列地址引脚复用 (RAS\n行地址选通信号引脚、CAS 列地址选通信号引脚)</p>\n<blockquote>\n<p>磁盘和磁带？</p>\n</blockquote>\n<p>存取时间与存取单元的物理位置有关。磁带串行存取，磁盘部分串行存取。</p>\n<blockquote>\n<p>存储芯片的地址线数据线？</p>\n</blockquote>\n<p>存储容量 = 地址数 * 位宽</p>\n<p>数据线或引脚数目 = 位宽</p>\n<p>SRAM 地址线或引脚数目 = log_2 (地址数)，与位宽无关</p>\n<p>DRAM 地址线或引脚数目 = 0.5log_2 (地址数)，与位宽无关</p>\n<blockquote>\n<p>MAR? MDR?</p>\n</blockquote>\n<p>存储器地址寄存器、存储器数据寄存器</p>\n<p>MAR 宽度 = log_2 (地址数)</p>\n<p>MDR 宽度至少为每次读写操作最多存取的位数</p>\n<blockquote>\n<p>某一 RAM 芯片其容量是 512*8\n位，除电源和接地端外该芯片引线的最少数目是多少？</p>\n</blockquote>\n<p>数据线 8 + 地址线 log2 (512)+ 片选线 1 + 读写线 1=19</p>\n<blockquote>\n<p>双端口存储器？</p>\n</blockquote>\n<p>左右端口地址码相同时，发生读写冲突</p>\n<blockquote>\n<p>多体交叉存储器解决的问题？</p>\n</blockquote>\n<p>提高主存的数据传输率</p>\n<blockquote>\n<p>cache 的功能全部由谁实现？</p>\n</blockquote>\n<p>硬件</p>\n<blockquote>\n<p>与 cache 命中率无关的是？</p>\n</blockquote>\n<p>主存的存取时间</p>\n<blockquote>\n<p>cache 的地址映射？</p>\n</blockquote>\n<p>主存 到 cache</p>\n<p>多对一：直接映射</p>\n<p>多对多：全相联映射</p>\n<p>组相联映射：</p>\n<ol type=\"1\">\n<li>把主存和 cache 都分为若干组</li>\n<li>对于主存的某一组，其块数 = cache 组数。其所有块分配给 cache\n的各个组，对于每一块，其被分到的 cache 组固定、不一定分配到 cache\n组的哪一行</li>\n</ol>\n<blockquote>\n<p>某计算机的 Cache 共有 16 行，采用 2 路 - 组相联映射方式 (即每组包括 2\n行)。存储器按字节编址，每个主存块大小为 32 字节。主存 135\n号单元所在主存块应装入的 cache 组号？</p>\n</blockquote>\n<p>简记： cache 组号 = 主存单元号 // 主存块字节数 % cache 组数</p>\n<p>cache 分 8 组，每组两行。则主存分若干组，每组 8 块。</p>\n<p>cache 组号 = 主存块号 % 主存每组块数</p>\n<p>= 单元号 // 字节数 % 主存每组块数</p>\n<p>= 135 // 32 % 8</p>\n<p>= 4</p>\n<p>简记是什么意思？因为笔者写出来的东西都是笔者不会的，至少是在写出来之前的那一段时间是不会的，如果笔者在写出来之后会了，那么就不会使用 “简记” 这两个字了。简记的意思是：我对这个知识点没搞明白，也不想搞明白，所以按感性提了一个公式出来，这个公式根本记不住，没有内化到自身。“简记” 在笔者的潜意识里有两层麻痹自我的意思：简的意思是：我没搞懂；记的意思是：我记不住。</p>\n<blockquote>\n<p>cache？</p>\n</blockquote>\n<p>cache 是易失型存储器。当程序具有较好的访问局部性时，能更好地发挥\ncache 的作用。</p>\n<blockquote>\n<p>闪速存储器？</p>\n</blockquote>\n<p>闪速存储器是一种高密度，非易失的读 / 写半导体存储器</p>\n<blockquote>\n<p>下列 cache 替换算法中，速度最快的是？命中率最高的是？LFU LRU\n随机替换</p>\n</blockquote>\n<p>随机替换 LRU</p>\n<h3 id=\"指令系统\">指令系统</h3>\n<blockquote>\n<p>程序控制类指令的功能？</p>\n</blockquote>\n<p>改变程序执行的顺序</p>\n<blockquote>\n<p>RISC？</p>\n</blockquote>\n<p>指令长度固定，减少指令数，增加寄存器数</p>\n<blockquote>\n<p>一地址格式的指令？</p>\n</blockquote>\n<p>一地址格式的算术运算指令，另一个操作数隐含在累加器里</p>\n<p>一地址格式的指令，可能有一个操作数，也可能有两个操作数</p>\n<blockquote>\n<p>怎么区分寄存器中的值是地址还是数据？</p>\n</blockquote>\n<p>指令操作码或寻址方式位</p>\n<blockquote>\n<p>一条指令中，操作数的寻址方式？</p>\n</blockquote>\n<p>看指令地址码是什么：</p>\n<ul>\n<li>操作数所在的存储单元：寄存器间接寻址</li>\n<li>操作数所在的存储单元地址：直接寻址</li>\n<li>操作数所在的寄存器编号：寄存器直接寻址</li>\n<li>操作数本身：立即寻址</li>\n</ul>\n<h3 id=\"cpu-性能指标\">CPU 性能指标</h3>\n<p><span class=\"math inline\">\\(T\\)</span>\n时钟周期：计算机中最短的时间。类比：一面有秒针的钟，最短时间为 1\n秒。类比：普朗克时间。类比：“一周” 的 “最短时间” 为 “天”</p>\n<p><span class=\"math inline\">\\(f\\)</span>\n主频 / 时钟频率：一秒钟之内，包含多少个时钟周期。对于一个可以精确到 0.01\n秒的秒表，其 “主频” 为 100Hz</p>\n<p><span class=\"math inline\">\\(N_\\mathrm{C}\\)</span>\n时钟周期数：天数、Num of Cycle</p>\n<p><span class=\"math inline\">\\(I_\\mathrm{N}\\)</span>\n指令数：任务数、Instruction Num</p>\n<p><span class=\"math inline\">\\(\\mathrm{CPI}\\)</span> (Cycle Per\nInstruction)：每条指令平均时钟周期数。完成每个任务的平均天数。你的时钟周期为 “天”，有\n100 个任务 (指令) 要完成，完成它们共花了 200 天。你的 CPI 为 2 天 / 任务</p>\n<p><span class=\"math inline\">\\(\\mathrm{CPI} \\times I_\\mathrm{N} =\nN_\\mathrm{C}\\)</span></p>\n<p><span class=\"math inline\">\\(\\mathrm{MIPS}\\)</span>：百万条指令数 / 秒</p>\n<p><span class=\"math inline\">\\(\\mathrm{FLOPS}\\)</span>：浮点操作数 / 秒</p>\n<p><span class=\"math inline\">\\(t_\\mathrm{CPU}\\)</span>\n执行时间：执行一段程序 (若干条指令) 所花费时间。</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n= &amp; 指令数 \\times \\mathrm {CPI} \\times  时钟周期 \\\\\n= &amp; 任务数 \\times 每个任务所花天数 \\times 一天有多少秒 \\\\\n= &amp; 执行该程序所经过时钟周期数 \\times 时钟周期 \\\\\n= &amp; 花了多少天 \\times 一天有多少秒 \\\\\n\\end {aligned}\n\\]</span></p>\n<h3 id=\"使用一个字节记录整数\">使用一个字节记录整数</h3>\n<p>计算机存储的数据由一系列 <code>0</code> 和 <code>1</code> 表示，每个\n<code>0</code> 或 <code>1</code>\n称为一个二进制位，八个二进制位组成一个字节。一个字节的范围：</p>\n<p><code>0000 0000 - 1111 1111</code></p>\n<p>使用一个字节，可以表示多少种状态？对每一位来说，只有两种可能的状态：<code>0</code>\n或 <code>1</code>。一共有八个不同的位，所以可以表示 <span class=\"math inline\">\\(2^8=256\\)</span> 种状态。</p>\n<p>把 <code>0000 0000 - 1111 1111</code> 转换为十进制数是 <span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(255\\)</span>，有 <span class=\"math inline\">\\(256\\)</span> 个数。它当然可以通过进制转换，表示\n<span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(255\\)</span> 的整数（也可以叫 “无符号整数”）。</p>\n<p>我们想表示负数，可以这样规定：只把后面七个二进制位转换成十进制，而用第一个二进制位表示符号（其中\n<code>0</code> 表示正号，<code>1</code> 表示负号），即：</p>\n<ul>\n<li><code>0 0000000 - 0 1111111</code> 表示 <span class=\"math inline\">\\(+0\\)</span> 到 <span class=\"math inline\">\\(+127\\)</span></li>\n<li><code>1 0000000 - 1 1111111</code> 表示 <span class=\"math inline\">\\(-0\\)</span> 到 <span class=\"math inline\">\\(-127\\)</span></li>\n</ul>\n<p>这被称为<strong>原码</strong>表示法。</p>\n<p>我们想用原码计算 <span class=\"math inline\">\\(4 - 7\\)</span>，即 <span class=\"math inline\">\\(4 + (-7)\\)</span>：</p>\n<ul>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(-\\)</span>\n<code>0000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code>，可以看到，结果不是 <span class=\"math inline\">\\(-3\\)</span></li>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(+\\)</span>\n<code>1000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1000 1011</code>，可以看到，结果不是 <span class=\"math inline\">\\(-3\\)</span></li>\n</ul>\n<p>因为有符号位干扰，但我们想<strong>让符号位也参与计算</strong>的同时，加和减的结果相同且满足定义。还是用符号位表示正负，后七个位表示绝对值。</p>\n<p>有一台钟（12 个数字的）慢了 3 小时，此时 <code>+3</code> 和\n<code>-9</code> 是等价的。它的 “循环周期” 是 <code>12</code></p>\n<p>用后七个位表示绝对值，“循环周期” 就是\n<code>128</code>。此时，<code>-7</code> 和 <code>+121</code> 等价</p>\n<p>采用<strong>补码</strong>表示法：</p>\n<ul>\n<li><code>0 0000000 - 0 1111111</code> 表示 <span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(127\\)</span></li>\n<li><code>1 0000000 - 1 1111111</code> 表示 <span class=\"math inline\">\\(-128\\)</span> 到 <span class=\"math inline\">\\(-1\\)</span></li>\n</ul>\n<p>此时计算 <span class=\"math inline\">\\(4 - 7\\)</span>：</p>\n<ul>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(-\\)</span>\n<code>0000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code></li>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(+\\)</span>\n<code>1111 1001</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code></li>\n</ul>\n<p>可以看到：</p>\n<ul>\n<li>正数的补码与原码相同</li>\n<li>负数的补码：\n<ul>\n<li>总是以 “全 <span class=\"math inline\">\\(1\\)</span>” 来表示 <span class=\"math inline\">\\(-1\\)</span>，然后依次往前推</li>\n<li>原码按位取反（除了符号位）后再加一</li>\n<li>原码从右往左第一个 <span class=\"math inline\">\\(1\\)</span>\n之前的位（除了符号位）按位取反</li>\n</ul></li>\n</ul>\n<h3 id=\"逐位进位加法器的实现\">逐位进位加法器的实现</h3>\n<ol type=\"1\">\n<li>用两个非门、两个与门、一个或门实现异或门 </li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">xor_gate</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (a <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> b) <span class=\"keyword\">or</span> (<span class=\"keyword\">not</span> a <span class=\"keyword\">and</span> b)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> xor <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> = <span class=\"subst\">{<span class=\"built_in\">int</span>(xor_gate(a,b))}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>用一个异或门、一个与门实现半加器</li>\n</ol>\n<p>两个一位的二进制数相加，和一位，进一位：</p>\n<ul>\n<li>0 + 0 和 0 进 0</li>\n<li>0 + 1 和 1 进 0</li>\n<li>1 + 0 和 1 进 0</li>\n<li>1 + 1 和 0 进 1</li>\n</ul>\n<p>和的位由异或得来，进的位由与得来：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">half_adder</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    sum_ = xor_gate(a, b)</span><br><span class=\"line\">    carry = a <span class=\"keyword\">and</span> b</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum_, carry</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        s, c = half_adder(a, b)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> 进 <span class=\"subst\">{<span class=\"built_in\">int</span>(c)}</span> 和 <span class=\"subst\">{<span class=\"built_in\">int</span>(s)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"3\" type=\"1\">\n<li>用两个半加器、一个或门实现全加器</li>\n</ol>\n<p>两个本位的数相加后，再加上低位进的位。和一位，进一位：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">full_adder</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span>, carry_in: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    s1, c1 = half_adder(a, b)</span><br><span class=\"line\">    s2, c2 = half_adder(s1, carry_in)</span><br><span class=\"line\">    carry_out = c1 <span class=\"keyword\">or</span> c2</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s2, carry_out</span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">            s, c_out = full_adder(a, b, c)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(c)}</span> 进 <span class=\"subst\">{<span class=\"built_in\">int</span>(c_out)}</span> 和 <span class=\"subst\">{<span class=\"built_in\">int</span>(s)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"4\" type=\"1\">\n<li>四个全加器串联实现四位加法器 </li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> product</span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\">numbers = <span class=\"built_in\">tuple</span>(product(truth, repeat=<span class=\"number\">4</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">adder</span>(<span class=\"params\">a: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>], b: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>]</span>):</span><br><span class=\"line\">    s1, c1 = full_adder(a[-<span class=\"number\">1</span>], b[-<span class=\"number\">1</span>], <span class=\"literal\">False</span>)</span><br><span class=\"line\">    s2, c2 = full_adder(a[-<span class=\"number\">2</span>], b[-<span class=\"number\">2</span>], c1)</span><br><span class=\"line\">    s3, c3 = full_adder(a[-<span class=\"number\">3</span>], b[-<span class=\"number\">3</span>], c2)</span><br><span class=\"line\">    s4, c4 = full_adder(a[-<span class=\"number\">4</span>], b[-<span class=\"number\">4</span>], c3)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c4, s4, s3, s2, s1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">to_number</span>(<span class=\"params\">a: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, ...]</span>):</span><br><span class=\"line\">    binary_string = <span class=\"string\">\"\"</span>.join(<span class=\"built_in\">str</span>(<span class=\"built_in\">int</span>(elem)) <span class=\"keyword\">for</span> elem <span class=\"keyword\">in</span> a)</span><br><span class=\"line\">    decimal_number = <span class=\"built_in\">int</span>(binary_string, <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decimal_number</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> numbers:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> numbers:</span><br><span class=\"line\">        result = adder(a, b)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{to_number(a)}</span> + <span class=\"subst\">{to_number(b)}</span> = <span class=\"subst\">{to_number(result)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"普通十进制数转单精度浮点数\">普通十进制数转单精度浮点数</h3>\n<p>交叉引用<a href=\"#运算方法和运算器\">运算方法和运算器</a></p>\n<ul>\n<li>在 IEEE 754 标准下</li>\n</ul>\n<p>单精度浮点数，即 32 位二进制浮点数，包含：</p>\n<p>一位符号位 + 八位指数位 + 二十三位尾数位</p>\n<p>下面的例子中，没有带尾缀的都是十进制，带尾缀 <span class=\"math inline\">\\(\\mathrm{B}\\)</span> 的是二进制</p>\n<blockquote>\n<p>例一：以 <span class=\"math inline\">\\(0.1\\)</span> 为例</p>\n</blockquote>\n<ol type=\"1\">\n<li><p>把十进制转换为二进制 <span class=\"math inline\">\\(0.1 =\n0.0\\dot{0}01\\dot{1}... \\mathrm{B}\\)</span></p></li>\n<li><p> 用以 <span class=\"math inline\">\\(2\\)</span>\n为基数的科学计数法表示，并保证【尾数的小数点前是 <span class=\"math inline\">\\(1 \\mathrm{B}\\)</span>】 <span class=\"math inline\">\\(= 1.\\dot{1}00\\dot{1}...\\mathrm{B} \\times\n(2^{-4})\\)</span> 可以看到指数是 <span class=\"math inline\">\\(-4\\)</span></p></li>\n<li><p> 计算指数位（又叫阶码），用指数加上偏移量 <span class=\"math inline\">\\((2^{e-1}-1)\\)</span></p>\n<p>这里 <span class=\"math inline\">\\(e\\)</span>\n等于【用于表示指数位的位数】 <span class=\"math inline\">\\(8\\)</span>，所以偏移量为 <span class=\"math inline\">\\(127\\)</span></p>\n<p>则阶码为 <span class=\"math inline\">\\(-4 + 127 = 123\\)</span></p>\n<p>阶码的二进制为 <code>0111 1011</code>，注意\n<em>阶码为无符号整数</em></p></li>\n<li><p>取科学计数法的【小数点后二十三位】作为【尾数位】，因为是无限的，所以要舍去一部分</p>\n<p>它的前二十位是：<code>1001 1001 1001 1001 1001</code></p>\n<p>二十一至二十八位是：<code>1001 1001</code></p>\n<p>所以二十一至二十三位，要么取 <code>100</code>，要么取\n<code>101</code>。</p>\n<p>第二十四位是 <code>1</code>，0 舍 1 入，所以取\n<code>101</code></p></li>\n<li><p>把符号位连同阶码、尾数位缝合起来</p>\n<p><code>0 | 0111 1011 | 1001 1001 1001 1001 1001 101</code></p></li>\n</ol>\n<blockquote>\n<p>例二：以 <span class=\"math inline\">\\(-12 = 1.5 \\times\n(2^{3})\\)</span> 为例：</p>\n</blockquote>\n<ol type=\"1\">\n<li><p>把十进制转换为二进制</p>\n<p><span class=\"math inline\">\\(12  = 1100 \\mathrm{B}\\)</span></p></li>\n<li><p> 用以 <span class=\"math inline\">\\(2\\)</span>\n为基数的科学计数法表示，并保证【尾数的小数点前是 <span class=\"math inline\">\\(1\\)</span>】</p>\n<p><span class=\"math inline\">\\(= 1.1\\mathrm{B} \\times (2^3)\\)</span></p>\n<p>可以看到指数是 <span class=\"math inline\">\\(3\\)</span></p></li>\n<li><p> 计算指数位（又叫阶码），用指数加上偏移量 <span class=\"math inline\">\\((2^{e-1}-1)\\)</span></p>\n<p>这里 <span class=\"math inline\">\\(e\\)</span>\n等于【用于表示指数位的位数】 <span class=\"math inline\">\\(8\\)</span>，所以偏移量为 <span class=\"math inline\">\\(127\\)</span></p>\n<p>则阶码为 <span class=\"math inline\">\\(3 + 127 = 130\\)</span></p>\n<p>阶码的二进制为 <code>1000 0010</code>，注意\n<em>阶码为无符号整数</em></p></li>\n<li><p>取科学计数法的【小数点后二十三位】作为【尾数位】，因为是有限的，所以后面直接补零</p>\n<p>小数点后二十三位是：<code>1000 0000 0000 0000 000</code></p></li>\n<li><p>把符号位连同阶码、尾数位缝合起来</p>\n<p><code>1 | 1000 0010 | 1000 0000 0000 0000 000</code></p></li>\n</ol>\n<p>如何验证：</p>\n<ul>\n<li><a href=\"https://baseconvert.com/ieee-754-floating-point\">在线转换</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/IEEE_754\">Wikipedia</a> | <a href=\"https://zh.wikipedia.org/wiki/IEEE_754\">维基百科</a></li>\n<li>获取国际标准文件。IEEE 754 标准是电气与电子工程师协会（Institute of\nElectrical and Electronics\nEngineers）制定的关于浮点数表示和运算的标准。最新标准是 <a href=\"https://standards.ieee.org/ieee/754/6210/\">IEEE\n754-2019</a>，对应国际标准 <a href=\"https://www.iso.org/cms/%20render/live/en/sites/isoorg/contents/data/standard/08/09/80985.html\">ISO/IEC\n60559:2020</a>，预计下一次在 2028 年修订。http://snti.ru/\n这个网站分享了各种国际标准文件的磁力链接，但是可以免费下载的不全，IEC\n的只有 61xxx。据说可以给站长发邮件要\n<code>popov_al@perm.ru</code>，每个文件一刀乐。在 ISO 官网上下载需要 187\n瑞士法郎，合 1000 多人民币。</li>\n</ul>\n<p>用 GDB：</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"type\">float</span> num = <span class=\"number\">1.7</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>在第六行打上断点，VSCode 开调试，在调试控制台里：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"built_in\">exec</span> x/4tb &amp;num</span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li><code>-exec</code> 执行命令</li>\n<li><code>x</code> 查看内存</li>\n<li><code>4</code> 输出 4 个单元\n<ul>\n<li>不写默认为 <code>1</code></li>\n</ul></li>\n<li><code>t</code> 以二进制形式输出\n<ul>\n<li><code>x</code> 十六进制</li>\n</ul></li>\n<li><code>b</code> 以【一个字节】为一个单元\n<ul>\n<li><code>h</code> 两个字节</li>\n<li><code>w</code> 四个字节</li>\n<li><code>g</code> 八个字节</li>\n</ul></li>\n<li><code>&amp;</code> 取变量地址</li>\n</ul>\n<p>输出结果：</p>\n<p><code>0x61fe1c: 10011010 10011001 11011001 00111111</code></p>\n<p>从右往左排列后：</p>\n<p><code>00111111 11011001 10011001 10011010</code></p>\n<p><code>0 01111111 10110011001100110011010</code></p>\n<p>才是 <code>float 1.7</code> 的二进制表示。</p>\n<p>还可以直接用</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"built_in\">exec</span> x/tw &amp;num</span><br></pre></td></tr></tbody></table></figure>\n<p>输出四个字节，结果：</p>\n<p><code>0x61fe1c: 00111111110110011001100110011010</code></p>\n<h2 id=\"vue-实现点击-echarts-图表的一部分后更新另一个图表\">Vue 实现点击\nEcharts 图表的一部分后更新另一个图表</h2>\n<p>环境：</p>\n<figure class=\"highlight json\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">  <span class=\"attr\">\"echarts\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^5.5.1\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"vue\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^3.5.12\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"vue-echarts\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^7.0.3\"</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></tbody></table></figure>\n<p><a href=\"https://vue-echarts.dev/#codegen\">import code\ngenerator</a></p>\n<p>组合式 API。一个 View 的父组件里面有两个 Echarts 图表的子组件 A 和\nB。</p>\n<p>问题：图表的数据从何而来：</p>\n<ol type=\"1\">\n<li>在清洗和导出数据的时候直接导出为 Echarts 所需要的 JSON\n格式的文件</li>\n<li>准备图表的 option 的 JSON 格式为一个计算属性，把 data 字段设置为 Ref\n对象的 value</li>\n<li> 给 v-chart 标签的 :option 绑定这个计算属性</li>\n<li>写一个更新图表的函数，fetch\n一个文件，转换成图表需要的格式，赋值给那个 Ref.value</li>\n</ol>\n<p>点击子组件图表后的事件和参数如何传递给父组件：</p>\n<ol type=\"1\">\n<li>在子组件里定义一个发射源 const emit =\ndefineEmits ([\"eventName\"]);</li>\n<li> 给子组件 v-chart 标签的 <span class=\"citation\" data-cites=\"click\">@click</span> 绑定一个方法</li>\n<li>该方法带一个参数 param 为图表点击后的参数，在该方法里发射事件\nemit (\"eventName\", param);</li>\n<li> 在父组件里引用子组件标签处的 <span class=\"citation\" data-cites=\"event-name\">@event-name</span> 绑定一个带参数 param\n的方法，用于接收子组件发射的事件和参数</li>\n</ol>\n<p>父组件如何向子组件传消息：</p>\n<ol type=\"1\">\n<li>在子组件里定义它的属性 </li>\n</ol>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> props = <span class=\"title function_\">defineProps</span>({</span><br><span class=\"line\">  <span class=\"attr\">propName</span>: {</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">    <span class=\"attr\">default</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  },</span><br><span class=\"line\">});</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>在父组件里引用子组件标签处的 :prop-name 绑定一个 Ref 对象，更新 Ref\n对象</li>\n</ol>\n<p>如何实现点击图表 A 的一部分后，更新图表 B：</p>\n<ol type=\"1\">\n<li>把点击图表 A 后的事件和参数 emit 给父组件</li>\n<li>父组件在 A 组件标签 @ 处绑定的方法处接收，并更新图表 B 标签的\n:prop-name 的 Ref</li>\n<li> 在 B 组件里监视它 props 的变化，调用更新图表的方法 </li>\n</ol>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">watch</span>(</span><br><span class=\"line\">  <span class=\"function\">() =&gt;</span> props.<span class=\"property\">propName</span>,</span><br><span class=\"line\">  <span class=\"title function_\">async</span> (newVal) =&gt; {</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">\"propName updated:\"</span>, newVal);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"title function_\">updateChartData</span>(newVal);</span><br><span class=\"line\">  },</span><br><span class=\"line\">  { <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span> } <span class=\"comment\">//确保在组件初始化时也执行一次回调函数</span></span><br><span class=\"line\">);</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"5\" type=\"1\">\n<li>在更新图表的方法里，根据接收到的参数，fetch 不同的文件，赋给 data 的\nRef.value</li>\n</ol>\n<h2 id=\"word-文档模板留存\">Word 文档模板留存</h2>\n<ol type=\"1\">\n<li>对称页边距，留出一点装订距离。上下 2.5 cm，内 3 cm，外 2.5 cm</li>\n<li> 第一面是封面，第二面是目录。页码从第三面开始编\n1，奇数页在右下角，偶数页在左下角</li>\n<li>所有中英文标题都是黑体加粗，格式都是\n<code>1.1.标题</code>。一级标题三号，二级标题四号，三级标题小四。不缩进</li>\n<li>所有正文中文都是宋体，西文都是 Times New\nRoman。字号都是小四。首行缩进两字符，左对齐</li>\n<li>所有标题和正文段落都是段前段后 0，行距 1.5 倍</li>\n<li>大部分代码用截图，把 VSCode 的背景调到纯白</li>\n<li>把 VSCode 编辑器的字体调为中文宋体，西文 Consolas</li>\n<li> 单独定义一个图片样式，应用于段落的阴影边框，宽度 0.75 磅</li>\n<li>小部分短的代码（Shell\n命令之类的）单独定义一个代码样式继承自正文，使用与图片同款的边框，首行缩进\n2 字符</li>\n<li>参考文献样式继承自 “列表段落”，悬挂缩进 2\n字符，左对齐，允许西文在单词中间换行</li>\n</ol>\n<h2 id=\"解决-vscode-集成终端按键与快捷键冲突\">解决 VSCode\n集成终端按键与快捷键冲突</h2>\n<p><code>Ctrl + Shift + P</code>\n打开命令面板，搜键盘快捷方式，搜冲突的按键，右键更改 When 表达式，加上\n<code>&amp;&amp; !terminalFocus</code></p>\n<h2 id=\"用-browser-sync-实现在文件内容改变后立即刷新页面\">用\nbrowser-sync 实现在文件内容改变后立即刷新页面</h2>\n<p>起因是：不管是直接打开 html\n文件，还是用 <code>python -m http.server 8000 --bind 127.0.0.1</code>，在修改保存\nhtml 文件后浏览器都不能立马刷新。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install browser-sync</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx browser-sync start --server --files <span class=\"string\">\".\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p><code>--files</code> 后指定要监视的文件。</p>\n<p><code>.</code> 表示监视当前目录以及子目录下的所有文件。</p>\n<p>可以改成 <code>*.html</code>，<code>public/*.*</code> 等。</p>\n<p>html\n文件里至少得有一对 <code>&lt;body&gt;</code> 标签，要么没法自动刷新。</p>\n<h2 id=\"python\">Python</h2>\n<p><a href=\"https://docs.python.org/zh-cn/3/tutorial/whatnow.html\">本体</a> |\n<a href=\"https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/\">Anaconda</a>\n| <a href=\"https://pypi.org/\">PyPI</a></p>\n<h3 id=\"anaconda\">Anaconda</h3>\n<p>不要把包都安到 base 环境里。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"built_in\">env</span> <span class=\"built_in\">export</span> &gt; environment.yml <span class=\"comment\"># 导出当前环境依赖</span></span><br><span class=\"line\">conda <span class=\"built_in\">env</span> create -f environment.yml <span class=\"comment\"># 重建环境</span></span><br><span class=\"line\">conda create -n xxx</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> remove -n xxx</span><br><span class=\"line\">conda activate xxx</span><br><span class=\"line\">conda deactivate</span><br><span class=\"line\">conda list</span><br><span class=\"line\">conda list numpy</span><br><span class=\"line\">pip list</span><br><span class=\"line\">pip show numpy</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"报菜名\">报菜名</h3>\n<p>Python 的标准库有上百个。用 <code>import</code> 还是\n<code>from ... import ...</code>，后面加不加 <code>as</code>\n，以易读为主。因为代码是给人看的。</p>\n<p>使用 <code>from xxx import *</code>\n类似于：你在搭积木的时候，闭着眼睛把一整个塑料袋的积木全倒出来，然后闭着眼睛摸一个、闭着眼睛摸一个。</p>\n<p><code>import</code> 语句的顺序是：标准库、第三方库、自定义库。可通过\nVSCode 插件 isort 解决，按 Ctrl + Shift + O 排序。</p>\n<p>在你的工程目录下面，使用 https://github.com/bndr/pipreqs\n可以把你用到的所有第三方库写到依赖文件 <code>requirements.txt</code>\n里。</p>\n<p>虽然 Python\n的一个变量名可以赋多个类型，但在有必要的情况下，还是加上类型注解。这对\nVSCode\n的代码补全也有帮助：把鼠标移到一个变量名上边，如果你想要它是某一个类的对象，但是它显示为\n<code>Any</code>，这时候你在它后面加 <code>.</code>，VSCode\n没法给你列出它的方法。这时候你需要显式标注它的类型，比如\n<code>foo: Bar</code>。或者 <code>assert isinstance(foo, Bar)</code></p>\n<h3 id=\"输出函数名和本地时间\">输出函数名和本地时间</h3>\n<p>使用装饰器：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">log</span>(<span class=\"params\">func</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wrapper</span>(<span class=\"params\">*args, **kwargs</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{func.__name__}</span>，系统时间：<span class=\"subst\">{datetime.datetime.now()}</span>\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func(*args, **kwargs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@log</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">test</span>(): ...</span><br><span class=\"line\"></span><br><span class=\"line\">test()</span><br></pre></td></tr></tbody></table></figure>\n<p>上面是一种很笨的方法，我们可以用其自带的 logging\n模块记录日志到文件：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"w\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\">logging.info(...)</span><br><span class=\"line\">logging.warning(...)</span><br><span class=\"line\">logging.error(...)</span><br></pre></td></tr></tbody></table></figure>\n<p>日志有五个等级：DEBUG 调试诊断用的；INFO 确认正常运行；WARNING\n是不影响正常运行的错误，如向数据库里插入一条已经存在的记录，然后忽略它；ERROR\n是影响正常运行的错误，如数据库连接失败（但是你系统的其他功能可用）；CRITICAL\n是你的系统的关键功能不可用（如果你的系统必须要用数据库）。</p>\n<h3 id=\"plt\">plt</h3>\n<p>条形图和柱形图的区别是：前者是横着的，后者是竖着的。前者用\n<code>plt.barh</code>，后者用 <code>plt.bar</code></p>\n<p>中文字体：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plt.rcParams[<span class=\"string\">\"font.family\"</span>] = <span class=\"string\">\"SimHei\"</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"最小二乘法多项式拟合\">最小二乘法多项式拟合</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">x = np.array([<span class=\"number\">48</span>, <span class=\"number\">47</span>, <span class=\"number\">54</span>, <span class=\"number\">50</span>, <span class=\"number\">73</span>, <span class=\"number\">72</span>, <span class=\"number\">62</span>, <span class=\"number\">52</span>, <span class=\"number\">47</span>, <span class=\"number\">83</span>, <span class=\"number\">70</span>, <span class=\"number\">65</span>, <span class=\"number\">48</span>])</span><br><span class=\"line\">y = np.array([<span class=\"number\">0.42</span>, <span class=\"number\">0.38</span>, <span class=\"number\">0.66</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.99</span>, <span class=\"number\">0.98</span>, <span class=\"number\">0.89</span>,</span><br><span class=\"line\">             <span class=\"number\">0.58</span>, <span class=\"number\">0.38</span>, <span class=\"number\">0.99</span>, <span class=\"number\">0.98</span>, <span class=\"number\">0.93</span>, <span class=\"number\">0.42</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># polynomial 多项式 fit 拟合</span></span><br><span class=\"line\"><span class=\"comment\"># 第三个参数是多项式的次数，为大于等于零的整数</span></span><br><span class=\"line\">z = np.polyfit(x, y, <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这样一转换，可以以人可读的方式打印，可以在下面 call 它，把传参给 p 的数组转换为另一个数组</span></span><br><span class=\"line\">p = np.poly1d(z)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(p)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 左闭右开的等差数列</span></span><br><span class=\"line\">x2 = np.linspace(<span class=\"number\">40</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 画散点图</span></span><br><span class=\"line\">plt.scatter(x, y, color=<span class=\"string\">'red'</span>, label=<span class=\"string\">'Data Points'</span>)</span><br><span class=\"line\"><span class=\"comment\"># 画曲线</span></span><br><span class=\"line\">plt.plot(x2, p(x2), color=<span class=\"string\">'blue'</span>, label=<span class=\"string\">'Quadratic Curve'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># xy轴标签、图题</span></span><br><span class=\"line\">plt.xlabel(<span class=\"string\">'x'</span>)</span><br><span class=\"line\">plt.ylabel(<span class=\"string\">'y'</span>)</span><br><span class=\"line\">plt.title(<span class=\"string\">'Scatter plot with Quadratic Curve'</span>)</span><br><span class=\"line\"><span class=\"comment\"># 图例</span></span><br><span class=\"line\">plt.legend()</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"scipy.stats.某种分布.\">scipy.stats. 某种分布.</h3>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n\\mathrm {rvs (分布参数，size = 实验次数)} &amp; = X\\\\\n离散型 \\mathrm {pmf}(分布参数，k = [x_1,x_2, ...]) &amp;  = \\mathrm {P}(X =\nx) \\\\\n连续型 \\mathrm {pdf}(分布参数，x = [x_1,x_2, ...]) &amp; = f_{X}(x) \\\\\n离散型 \\mathrm {cdf}(分布参数，k = [x_1,x_2, ...]) &amp; = F_{X}(x) =\n\\mathrm {P}(X \\le x) \\\\\n连续型 \\mathrm {cdf}(分布参数，x = [x_1,x_2, ...]) &amp; = F_{X}(x) =\n\\mathrm {P}(X \\le x) \\\\\n返回 \\mathrm {numpy.ndarray}\n\\end {aligned}\n\\]</span></p>\n<h3 id=\"selenium\">selenium</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.common.by <span class=\"keyword\">import</span> By</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.support <span class=\"keyword\">import</span> expected_conditions <span class=\"keyword\">as</span> EC</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.support.ui <span class=\"keyword\">import</span> WebDriverWait</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SeleniumSpider</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 使用本地的火狐浏览器</span></span><br><span class=\"line\">        options = webdriver.FirefoxOptions()</span><br><span class=\"line\">        options.binary_location = (</span><br><span class=\"line\">            <span class=\"string\">r\"D:\\Program Files\\Firefox Developer Edition\\firefox.exe\"</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.driver = webdriver.Firefox(options)</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data: <span class=\"built_in\">list</span>[<span class=\"built_in\">dict</span>] = []  <span class=\"comment\"># 暂存爬取的数据</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wait_and_click</span>(<span class=\"params\">self, xpath: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        保证元素可以被点击，并点击</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        WebDriverWait(<span class=\"variable language_\">self</span>.driver, <span class=\"number\">20</span>).until(</span><br><span class=\"line\">            EC.all_of(</span><br><span class=\"line\">                EC.element_to_be_clickable((By.XPATH, xpath)),</span><br><span class=\"line\">                EC.visibility_of_element_located((By.XPATH, xpath)),</span><br><span class=\"line\">            )</span><br><span class=\"line\">        )</span><br><span class=\"line\">        el = <span class=\"variable language_\">self</span>.driver.find_element(By.XPATH, xpath)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(xpath, el)</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            el.click()</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            webdriver.ActionChains(<span class=\"variable language_\">self</span>.driver).move_to_element(el).click(el).perform()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> el</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">save_to</span>(<span class=\"params\">self, file_name: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        写一个json文件</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(file_name, mode=<span class=\"string\">\"w+\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">                f.write(json.dumps(<span class=\"variable language_\">self</span>.data, ensure_ascii=<span class=\"literal\">False</span>, indent=<span class=\"number\">2</span>))</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"java\">Java</h2>\n<p><a href=\"https://mvnrepository.com/\">Maven 仓库</a> | <a href=\"https://developer.aliyun.com/mvn/guide\">阿里云 Maven 仓库</a> | <a href=\"https://docs.spring.io/spring-boot/docs/\">Spring Boot 文档</a> |\n<a href=\"https://endoflife.date/spring-boot\">Spring Boot 支持的 Java\n版本</a></p>\n<p>关键字：没有 <code>unsigned</code> 关键字</p>\n<p>运算符：无符号右移 <code>&gt;&gt;&gt;</code>，前面直接补零。</p>\n<ul>\n<li>C/C++/Java 在对整型变量右移 <code>&gt;&gt;</code> 时：\n<ul>\n<li>正整数前面全补 <code>0</code></li>\n<li>负整数前面全补 <code>1</code></li>\n<li>无符号整数前面全补 <code>0</code></li>\n<li>作用相当于除以 2</li>\n</ul></li>\n</ul>\n<p>数据类型：布尔 <code>boolean</code>，值为 <code>true</code> 或者\n<code>false</code>。可以直接用，占一个字节。</p>\n<ul>\n<li>写 <code>if(3 == true)</code>\n时会报错，数据类型不同，不能直接比较。</li>\n<li>在 C 的 <code>&lt;stdbool.h&gt;</code> 中被 <code>#define</code>\n了为 <code>1</code> 和 <code>0</code>。\n<ul>\n<li>写 <code>if(3 == true)</code> 时会跳过分支。</li>\n</ul></li>\n<li>C++ 同 C，但是不用引头文件，可以直接用。</li>\n<li>在 Python 中是首字母大写的，也相当于 <code>0</code> 和\n<code>1</code>，但是数据类型不同。\n<ul>\n<li>写 <code>if(3 == True)</code> 时会按 <code>1</code> 比较。</li>\n<li>写 <code>if(3 is True)</code> 时会报错。</li>\n</ul></li>\n<li>在 JS 中也相当于 <code>0</code> 和\n<code>1</code>，但是数据类型不同。\n<ul>\n<li>写 <code>if(1 == true)</code> 时会执行分支。</li>\n<li>写 <code>if(1 === true)</code> 时会跳过分支。</li>\n</ul></li>\n</ul>\n<p>字符 <code>char</code>：无符号的两个字节。在 C/C++ 里是一个字节。</p>\n<p>有符号整型</p>\n<ul>\n<li><code>byte</code>：一个字节</li>\n<li><code>short</code>：两个字节</li>\n<li><code>int</code>：四个字节</li>\n<li><code>long</code>：八个字节</li>\n</ul>\n<p>语法：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Type[] arr = ...</span><br><span class=\"line\"><span class=\"keyword\">for</span> (Type element : arr) {</span><br><span class=\"line\">    System.out.print(element + <span class=\"string\">\",\"</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\">Arrays.toString(arr);</span><br><span class=\"line\">System.arraycopy(...);</span><br><span class=\"line\">String.equals(string);</span><br><span class=\"line\"><span class=\"comment\">// == 运算符比较的是两对象的内存地址</span></span><br><span class=\"line\"><span class=\"comment\">// 该方法先用 == 判断，后一个一个字符地比较</span></span><br><span class=\"line\"><span class=\"comment\">// 可用 System.identityHashCode() 获取对象的标识哈希码，这是基于对象的内存地址计算的</span></span><br><span class=\"line\"><span class=\"type\">int</span> Arrays.binarySearch(arr, elm);</span><br><span class=\"line\"><span class=\"comment\">// 二分查找，返回的不一定是第一个。</span></span><br></pre></td></tr></tbody></table></figure>\n<p>接口：接口是一种特殊的类。写出来就是用来被继承的 —— 不用\n<code>extends</code>（扩展），用 <code>implements</code>（实现）。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">USB</span> {</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>一个类只能 <code>extends</code> 自一个父类，但可以\n<code>implements</code>\n多个接口。实现接口的子类必须得实现接口里声明的方法。</p>\n<p>JavaBean 规则：</p>\n<ul>\n<li>必须有一个无参构造方法</li>\n<li>所有属性私有，且对其提供 public 的 <code>getXxx()</code> 与\n<code>setXxx()</code> 方法</li>\n</ul>\n<h2 id=\"jsp\">JSP</h2>\n<blockquote>\n<p>Web 是一种分布式的应用框架。基于 Web\n的应用是典型的浏览器 / 服务器（B/S）架构。——ISBN 9787302438090</p>\n</blockquote>\n<blockquote>\n<p>JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java\n库单元提供了一个接口来服务于 HTTP 的应用程序。—— 菜鸟教程</p>\n</blockquote>\n<p>笔者测试，用 VSCode 和 IDEA 社区版（2024.1）都没办法格式化 JSP\n代码，或者是暂时没找到解决方法。或者你可以用 CSDN 网友分享的 IDEA\n破解版（不是用蓝绿修改器破解的）\nhttps://blog.csdn.net/hlizoo/article/details/137562771</p>\n<p><strong>用 VSCode 或 IDEA 社区版</strong></p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate \"-DgroupId=com.example\" \"-DartifactId=demo\" \"-DarchetypeArtifactId=maven-archetype-webapp\" \"-DinteractiveMode=true\"</span><br></pre></td></tr></tbody></table></figure>\n<p>VSCode 使用 Community Server Connectors 插件、IDEA 使用 Smart Tomcat\n插件</p>\n<p><strong>用 Eclipse 2020-03 (4.15.0)</strong></p>\n<p>在首选项里设置 JDK 和 Tomcat 的路径。</p>\n<p>New -&gt; Dynamic Web Project</p>\n<p>按 Ctrl + Shift + F 格式化代码 —— 這個快捷鍵會和 Win10\n的微軟拼音輸入法簡繁體切換功能衝突。解决方法除了再按一次，还可以右击你任务栏上的 [中]，进输入法设置，把热键关了。</p>\n<blockquote>\n<p>一个 JSP 文件的示例</p>\n</blockquote>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">\"java\"</span> contentType=<span class=\"string\">\"text/html; charset=UTF-8\"</span></span><br><span class=\"line\">\tpageEncoding=<span class=\"string\">\"UTF-8\"</span> <span class=\"keyword\">import</span>=<span class=\"string\">\"java.util.Date\"</span>%&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">&lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;%</span><br><span class=\"line\">\t\t<span class=\"type\">Date</span> <span class=\"variable\">now</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">\t&lt;%=now%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>它在 html 的基础上扩展了一些标签。可以使用 Java 库。</p>\n<blockquote>\n<p>JSP 运行的原理</p>\n</blockquote>\n<ol type=\"1\">\n<li>客户向 Tomcat 服务器发送 HTTP 请求</li>\n</ol>\n<p>你可以使用 Fiddler\n来抓包（或者直接用浏览器控制台抓，这是最方便的）。在 Eclipse\n里按 “播放键” 之后，Eclipse 向 <code>localhost:8080</code> 发送了一个 GET\n请求。</p>\n<p>使用</p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -ano | grep <span class=\"number\">8080</span></span><br></pre></td></tr></tbody></table></figure>\n<p>查与 8080 端口有关的进程号。再打开任务管理器的详细信息，查到进程为\n<code>javaw.exe</code>。右击打开文件所在位置，在你 Eclipse\n首选项里设置的 JDK 目录的 bin 目录里面。</p>\n<p>使用</p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jcmd</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 java 进程，为\n<code>org.apache.catalina.startup.Bootstrap start</code></p>\n<ol start=\"2\" type=\"1\">\n<li>Tomcat 启动一个线程，把 jsp 文件转换成 java 文件</li>\n</ol>\n<p>（一个继承自 <code>javax.servlet.http.HttpServlet</code>\n的类，头上带一个注解 <code>@WebServlet(\"/path\")</code>，相当于 Python 的\nFlask 框架里的 <code>@app.route(\"/path\")</code>）</p>\n<ol start=\"3\" type=\"1\">\n<li>把 java 文件编译成 class 文件（字节码）</li>\n</ol>\n<blockquote>\n<p>jsp 指令与 jsp 动作？</p>\n</blockquote>\n<p>前者是静态的，后者是动态的（感性认识）</p>\n<p>前者类似</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ <span class=\"type\">include</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"string\">\"sub.jsp\"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>后者类似</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;jsp:<span class=\"type\">include</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"string\">\"sub.jsp\"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>在一个 jsp 页里，如何把表单传递给另一个 jsp 页？另一个 jsp\n页如何接收？</p>\n</blockquote>\n<p>三种方式：（使用 get 方法会在 url 里看到请求参数，post 不会）</p>\n<ol type=\"1\">\n<li>【包含对面的】 <code>jsp:include</code> 配合\n<code>jsp:param</code>。这是把另一个 jsp 页包含进来。</li>\n</ol>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">\"get\"</span>&gt;</span><br><span class=\"line\">    请输入圆的半径：</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"text\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span> /&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;jsp:include page=<span class=\"string\">\"computeAreaOfCircle.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"${param.radius}\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:include&gt;</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>【请求转发】先使用本页面的 Java 代码处理表单，再使用\n<code>jsp:forward</code> 配合 <code>jsp:param</code>，把 request\n对象转发给另一个 jsp 页面。</li>\n</ol>\n<p>这种把 JSP 标签和 Java 代码混在一起的写法很新鲜：</p>\n<p>接收方用 <code>request.getParameter(\"name\")</code> 接收</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">\"post\"</span> action=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\">    请选择一个图形：&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"radio\"</span> name=<span class=\"string\">\"shape\"</span> id=<span class=\"string\">\"circle\"</span> value=<span class=\"string\">\"circle\"</span> /&gt;圆形&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"radio\"</span> name=<span class=\"string\">\"shape\"</span> id=<span class=\"string\">\"rectangle\"</span> value=<span class=\"string\">\"rectangle\"</span> /&gt;矩形&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span> /&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">\t<span class=\"type\">Random</span> <span class=\"variable\">random</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Random</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">shape</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">\"shape\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (shape != <span class=\"literal\">null</span>) {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (shape.equals(<span class=\"string\">\"circle\"</span>)) {</span><br><span class=\"line\">        <span class=\"type\">double</span> <span class=\"variable\">radius</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">\"process.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=shape%&gt;\"</span> name=<span class=\"string\">\"shape\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=radius%&gt;\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (shape.equals(<span class=\"string\">\"rectangle\"</span>)) {</span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"variable\">width</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"variable\">height</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">\"process.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=shape%&gt;\"</span> name=<span class=\"string\">\"shape\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=width%&gt;\"</span> name=<span class=\"string\">\"width\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=height%&gt;\"</span> name=<span class=\"string\">\"height\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br><span class=\"line\">%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"3\" type=\"1\">\n<li>【重定向】<code>response.sendRedirect(\"result.jsp\")</code> 不会把\nrequest 对象传递过去</li>\n</ol>\n<p>应 <code>session.setAttribute(\"name\", value)</code></p>\n<p>对方使用 <code>session.getAttribute(\"name\")</code> 接收。</p>\n<p>访问使用 response.sendRedirect 的一方 jsp 时，会跳转到对面的一方</p>\n<blockquote>\n<p>重定向和请求转发</p>\n</blockquote>\n<p>重定向会丢失 request 对象，请求转发不会。</p>\n<p>在 JSP 或者 Servert 里请求转发：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.setAttribute(<span class=\"string\">\"studentList\"</span>, studentList);</span><br><span class=\"line\"><span class=\"type\">RequestDispatcher</span> <span class=\"variable\">dispatcher</span> <span class=\"operator\">=</span> request.getRequestDispatcher(<span class=\"string\">\"result.jsp\"</span>);</span><br><span class=\"line\">dispatcher.forward(request, response);</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>如何实现点一个按钮出现一个新表单？</p>\n</blockquote>\n<p>在第一个表单里加一个隐藏的 <code>&lt;input&gt;</code>\n标签，第一个表单提交给本页面，然后在本页面里写 Java 代码：</p>\n<p>笔者觉得这比 JS 操作 DOM 看起来新鲜，很好玩。</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"hidden\"</span> name=<span class=\"string\">\"showInput\"</span> value=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"查找\"</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">showInput</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">\"showInput\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (showInput != <span class=\"literal\">null</span> &amp;&amp; showInput.equals(<span class=\"string\">\"true\"</span>)) {</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">\"Query\"</span> method=<span class=\"string\">\"get\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"text\"</span> name=<span class=\"string\">\"id\"</span> placeholder=<span class=\"string\">\"输入学号\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">}</span><br><span class=\"line\">%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>Filter 是什么？</p>\n</blockquote>\n<p>一个实现了 <code>javax.servlet.Filter</code> 接口的类。可在\n<code>doFilter</code> 方法里对请求预处理，响应后处理：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebFilter(\"/*\")</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ProZhInput</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> {</span><br><span class=\"line\">    <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException {</span><br><span class=\"line\">        request.setCharacterEncoding(<span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">        response.setCharacterEncoding(<span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">\"text/html;charset=UTF-8\"</span>);</span><br><span class=\"line\">        chain.doFilter(request, response);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"comment\">//...</span></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>如何使用 JDBC 连接 MySQL</p>\n</blockquote>\n<ol type=\"1\">\n<li>下载驱动 Jar 包 https://dev.mysql.com/downloads/connector/j/</li>\n<li> 把 Jar 包 复制到\n<code>yourprojectname\\WebContent\\WEB-INF\\lib</code></li>\n</ol>\n<blockquote>\n<p>插入的问题</p>\n</blockquote>\n<blockquote>\n<p>MySQL 里有两张表，一张表的外键是另一张表的主键（如\nid），级联更新和删除。如何插入 “一条” id\n的记录 “分散给” 这两张表？即对这两张表分别插了一个 id 相同的记录。</p>\n</blockquote>\n<p>先插 id 为主键所在的表，后插 id 为外键所在的表。</p>\n<p>这是关系型数据库原理的知识。本表里的 “外键” 就是引用外部表里的 “主键”，那得先有外部表。</p>\n<blockquote>\n<p>乱码的问题</p>\n</blockquote>\n<p>保证这些地方的编码是 UTF-8：</p>\n<ol type=\"1\">\n<li>Eclipse 首选项里的文件编码</li>\n<li>搞一个 Filter</li>\n<li>MySQL 数据库表的编码 </li>\n<li></li>\n</ol>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">\"java\"</span> contentType=<span class=\"string\">\"text/html; charset=UTF-8\"</span></span><br><span class=\"line\">\tpageEncoding=<span class=\"string\">\"UTF-8\"</span>%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"排序算法\">排序算法</h2>\n<p>二分查找就是翻书。有一本 200 页的书，你想翻到 124\n页，一下就翻到的概率是很小的。翻到中间，发现是 100 页；翻到 100~200\n页的中间，发现是 150 页；翻到 100~150 页的中间，发现是 125\n页，以此类推。</p>\n<p>二分查找就是从列表里查找一个值，前提列表是有序的，这样可以比较大小，在二分之后仍然是有序的。如果要查找的值比列表的中间值小，就在列表的左半部分找，这就是二分。这时需要变换查找范围的右边界，到中间值的左边一个位置。然后对查找范围继续二分，与中间值作比较，如果要查找的值比中间值大，就在查找范围的右半部分找，这时需要变换查找范围的左边界到中间值的右一个位置。以此类推，如果找到了，就返回目标元素的索引。找不到就返回 - 1。</p>\n<p>插入排序：一张一张地接扑克牌，接到第一张扑克牌时什么也不做，接到第二张扑克牌时要与第一张作比较，看插入到第一张的前面还是后面，……，接到第\nn 张扑克牌时要与前 n - 1 张比较，看插入到手牌的哪个位置。</p>\n<p>选择排序：拿到一手混乱的牌，从中选取最小的，与第 0\n张交换位置；之后忽略第 0 张，从剩余的牌里选取最小的，与第 1\n张交换位置；之后忽略第 0、1 张，从剩余的牌里选取最小的，与第 2\n张交换位置。以此类推。</p>\n<p>归并排序：把一沓牌分成一张一张的，摆在桌子上。相邻的两张合并成一个组；相邻的两组分别排序，合并成一个新组；以此类推。</p>\n<p>快速排序：选一个基准，所有比基准小的放在基准左边，比基准大的放在基准右边。然后就分成了两个区，对每一个区里的元素再选一个基准，重复上面的操作。</p>\n<h2 id=\"数据挖掘\">数据挖掘</h2>\n<h3 id=\"属性与度量\">属性与度量</h3>\n<ul>\n<li>测量：将对象的属性映射为数值 / 符号值</li>\n<li>测量标度：函数、秤</li>\n</ul>\n<p>例如：秤将人的体重映射为一个数值</p>\n<p>属性的类型（也叫测量标度的类型）：</p>\n<ul>\n<li><p>分类的（定性的）</p>\n<ul>\n<li>标称：有意义的只有等于 / 不等于操作。例如你的性别，不能与其他性别进行比较大小、加减、乘除操作</li>\n<li>序数：有意义的有：等于 / 不等于和比较大小。例如你的成绩在这五个档次里面 {A,B,C,D,E}</li>\n</ul></li>\n<li><p> 数值的（定量的）</p>\n<ul>\n<li>区间：除了能等于 / 不等于 / 比较大小，还要能加减。比如某年某月某日、华氏 / 摄氏温度</li>\n<li>比率：在上面的基础上，还要能乘除</li>\n</ul></li>\n<li><p>离散的属性：可取有限个值，或无限可数个值</p></li>\n<li><p>连续的属性：取实数值</p></li>\n<li><p>非对称的属性：出现非零值比零值重要</p></li>\n</ul>\n<h3 id=\"关联分析\">关联分析</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">AssociationRule</span>(namedtuple(<span class=\"string\">\"AssociationRule\"</span>, [<span class=\"string\">\"X\"</span>, <span class=\"string\">\"Y\"</span>])):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    关联规则，是两个不相交集合的蕴含表达式</span></span><br><span class=\"line\"><span class=\"string\">    {牛奶，尿布} -&gt; {啤酒}</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__new__</span>(<span class=\"params\">cls, X: <span class=\"built_in\">set</span>, Y: <span class=\"built_in\">set</span></span>):</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> X.isdisjoint(Y)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>().__new__(cls, X, Y)</span><br></pre></td></tr></tbody></table></figure>\n<p>支持度计数 sigma，即事务列表里，项集的超集个数</p>\n<p>支持度，即项集的超集个数与集合总个数（事务个数）的比值</p>\n<p>大于等于最小支持度（计数）的项集，称为频繁项集</p>\n<p>置信度，由 X 引起 Y 的可能性。X 的支持度计数做分母，XY\n并集的支持度计数做分子</p>\n<p>先验原理：如果一个项集是频繁的，它的所有子集都是频繁的</p>\n<p>反过来：如果一个项集是非频繁的，它的所有超集都是非频繁的</p>\n<p>即：一个项集的子集的支持度，大于等于它本身的支持度</p>\n<h3 id=\"决策树示例\">决策树示例</h3>\n<p>对于一组数据集，其每一个数据有它的几个属性的值，和一个分类标签。</p>\n<p>如：我们可以给一系列人的数据集：（方便理解，学习用，无歧视）</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 特征列表</span></span><br><span class=\"line\">features = [<span class=\"string\">\"性别\"</span>, <span class=\"string\">\"使用手机的牌子\"</span>, <span class=\"string\">\"年龄\"</span>, <span class=\"string\">\"是否赌博\"</span>, <span class=\"string\">\"喜欢玩的游戏\"</span>, <span class=\"string\">\"喜欢音乐的曲风\"</span>]</span><br><span class=\"line\">dataset = [</span><br><span class=\"line\">    <span class=\"comment\"># 最后一个是分类标签</span></span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"是\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"日语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">]</span><br></pre></td></tr></tbody></table></figure>\n<p>生成类似这样的决策树：</p>\n<p><img src=\"/blog/images/decision-tree.webp\"></p>\n<h3 id=\"针对购物篮数据集的关联分析\">针对购物篮数据集的关联分析</h3>\n<p>关联分析到底是<strong>什么意思</strong>？是发现隐藏在大型<strong>数据集</strong>中的有意义的<strong>联系</strong>。</p>\n<p>购物篮数据集<strong>怎么表示</strong>？是一张<strong>表</strong>，表里有一系列<strong>行</strong>，每一个行是一个<strong>事务</strong>，每一个事务表现为一个<strong>集合</strong>，这个集合里有一系列商品的<strong>名字</strong>，比如 {\"面包\",\"牛奶\",\"尿布\"}</p>\n<p>联系<strong>怎么表示</strong>？有两种形式：<strong>关联规则</strong>、和<strong>频繁项集</strong></p>\n<p>关联规则是<strong>什么意思</strong>？是<strong>两个不相交集合的蕴含表达式</strong>，如 {尿布}-&gt;{啤酒} 这个表达式的意思是：购买尿布，<strong>引起了</strong>购买啤酒，前面是<strong>因</strong>、后面是<strong>果</strong>。</p>\n<p>项集是<strong>什么意思</strong>？是一些<strong>项</strong>的<strong>集合</strong>。是\n<code>list[str]</code></p>\n<p>什么叫<strong>频繁项集</strong>？是<strong>支持度</strong>或者<strong>支持度计数大于等于最小阈值</strong>的项集。</p>\n<p>什么叫<strong>支持度计数</strong>？是该项集在事务列表里的<strong>超集数量</strong>，是事务列表里的所有<strong>包含该项集</strong>的<strong>事务数量</strong>。</p>\n<p>什么叫<strong>支持度</strong>？是事务列表里，<strong>包含该项集的事务的数量</strong>占<strong>所有事务数量</strong>里的比值。</p>\n<p>{面包，牛奶} 支持度 0.3\n是<strong>什么意思</strong>？是在所有的购物记录里，同时包含购买了面包、牛奶的购物记录的比值。是<strong>在每\n10 次购物里，就有三次同时购买了面包和啤酒</strong>。</p>\n<p><strong>怎么挖掘关联规则</strong>？分两步：</p>\n<ol type=\"1\">\n<li><strong>产生频繁项集</strong>: 发现满足最小支持度阈值的所有项集\n<ul>\n<li>什么意思？项集里有几个元素？<strong>最少</strong>有一个，<strong>最多</strong>有\n<code>len(unique(flatten(basket)))</code>\n个，是所有独立的商品组成的集合。</li>\n</ul></li>\n<li><strong>产生规则</strong>\n<ul>\n<li>提取所有高置信度的规则。</li>\n</ul></li>\n</ol>\n<p>格结构是什么意思？格结构里的所有节点构成一个集合的幂集。格结构的第一层是\nnull，第二层是所有 1 - 项集，第三层是所有 2 - 项集…… 最底层是\n<code>len(unique(flatten(basket)))</code> 项集</p>\n<p><strong>先验原理</strong>是什么意思？如果一个<strong>项集</strong>是<strong>频繁</strong>的，它的<strong>所有子集</strong>都一定是<strong>频繁的</strong>。</p>\n<p>什么叫一个项集是频繁的？它的支持度计数大于等于最小阈值</p>\n<p>什么叫一个项集的子集是频繁的？它的子集的支持度计数大于等于最小阈值</p>\n<p>为什么项集支持度计数大于等于最小阈值后，它的所有子集的支持度计数都会大于等于最小阈值？</p>\n<p><strong>支持度计数 +1\n的操作是在什么时候</strong>？把这个项集和事务列表里的所有项集做比较，如果该项集是事务列表里项集的子集，把该项集的支持度计数\n+1。所以：支持度计数，就是<strong>找超集数量</strong></p>\n<p><strong>一个集合的子集的超集数量</strong>，必定<strong>大于等于该集合的超集数量</strong>，为什么？<strong>因为这个集合本身就是它子集的超集</strong>。</p>\n<p>什么叫<strong>基于支持度的剪枝</strong>？把先验原理<strong>反过来说</strong>：如果一个项集是非频繁的，它的所有超集都是非频繁的。</p>\n<p>非频繁是什么意思？支持度计数小于最小阈值，超集数量小于最小阈值，<strong>包含它的事务数量</strong>小于最小阈值</p>\n<p>如果一个集合的超集数量小于最小阈值，它的（所有超集）的超集数量都会小于最小阈值。为什么？<strong>你确定这句话对吗</strong>？</p>\n<p>正确的描述方法是：如果<strong>包含 A 的事务数</strong>小于最小阈值，\n那么<strong>包含（A\n的超集）的事务数</strong>会小于最小阈值。为什么？</p>\n<p>因为在一个购物篮里，事务数量是有限的。</p>\n<p><strong>支持度计数 +1\n的操作是在什么时候</strong>？是针对一个项集，<strong>判断各个事务</strong>是不是它的超集的时候。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">basket = [</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>],</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>],</span><br><span class=\"line\">    [<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>]</span><br><span class=\"line\">]</span><br></pre></td></tr></tbody></table></figure>\n<p>问：[2,3] 的支持度计数是几？是 2，是第一行和第四行</p>\n<p>现在规定：最小支持度计数是\n3。问，[2,3] 超集的支持度计数？既然是超集，考虑它自己是它自己的超集这种情况，它的支持度计数还是小于\n3。现在再往里加一个，能达到要求吗？加一个之后，<strong>超集的判定变严了</strong>。</p>\n<p>理性的说法是：原来是 A 超集的集合 B，在 A 加一个元素之后变成 C 后，B\n不一定还是 C 的超集，因为新加的那个元素可能不在 B\n里。如果新加的那个元素在 B 里，C\n超集的数量（相对于购物篮）至少减零。如果不在 B 里，C\n超集的数量（相对于购物篮）至少减一。</p>\n<p><strong>基于支持度的剪枝</strong>什么意思？如果<strong>一个项集是非频繁的</strong>，把它格结构里<strong>所有的超集剪了</strong>。</p>\n<p><strong>反单调性</strong>什么意思？一个项集的支持度小于等于它的自己的支持度。</p>\n<h3 id=\"numpy-库的多维数组切片语法\">numpy 库的多维数组切片语法</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"comment\"># 假装这是事务列表</span></span><br><span class=\"line\">X = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>],</span><br><span class=\"line\">        [<span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">12</span>, <span class=\"number\">13</span>, <span class=\"number\">14</span>],</span><br><span class=\"line\">        [<span class=\"number\">15</span>, <span class=\"number\">16</span>, <span class=\"number\">17</span>, <span class=\"number\">18</span>, <span class=\"number\">19</span>, <span class=\"number\">20</span>, <span class=\"number\">21</span>],</span><br><span class=\"line\">        [<span class=\"number\">22</span>, <span class=\"number\">23</span>, <span class=\"number\">24</span>, <span class=\"number\">25</span>, <span class=\"number\">26</span>, <span class=\"number\">27</span>, <span class=\"number\">28</span>],</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\"># 假装这是一系列3-项集</span></span><br><span class=\"line\">combin = np.array([[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>]])</span><br><span class=\"line\"><span class=\"built_in\">print</span>(X[:, combin])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">这是什么玩意？？？</span></span><br><span class=\"line\"><span class=\"string\">[[[ 1  2  3]</span></span><br><span class=\"line\"><span class=\"string\">  [ 2  5  7]] 把第一个事务的对应的各个3-项集摘出来（可能有True有False），便于后续判断它是不是某个3-项集的子集</span></span><br><span class=\"line\"><span class=\"string\">              如果第二行全True，说明该事务是[1,4,6]的超集</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[ 8  9 10]</span></span><br><span class=\"line\"><span class=\"string\">  [ 9 12 14]]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[15 16 17]</span></span><br><span class=\"line\"><span class=\"string\">  [16 19 21]]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\">X = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\">combin = np.array([[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>]])</span><br><span class=\"line\"><span class=\"built_in\">print</span>(X[:, combin])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">[[[1 0 0]</span></span><br><span class=\"line\"><span class=\"string\">  [0 0 0]] 把对应的3-项集摘出来</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[1 1 1]</span></span><br><span class=\"line\"><span class=\"string\">  [1 0 0]] 全1为True，说明第二行事务它是对应[0,1,2]的超集</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[1 0 1]</span></span><br><span class=\"line\"><span class=\"string\">  [0 0 0]]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[0 0 0]</span></span><br><span class=\"line\"><span class=\"string\">  [0 1 0]]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">_bools = np.<span class=\"built_in\">all</span>(X[:, combin], axis=<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(_bools)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">[[False False]</span></span><br><span class=\"line\"><span class=\"string\"> [ True False] 四个事务里，只有这一个事务是[0,1,2]的超集</span></span><br><span class=\"line\"><span class=\"string\"> [False False]</span></span><br><span class=\"line\"><span class=\"string\"> [False False]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"apriori-算法\">Apriori 算法</h3>\n<pre class=\"mermaid\">%%{\n    init: {\n        \"theme\": \"neutral\",\n        \"fontFamily\": \"Times New Roman\"\n    }\n}%%\nflowchart TD\n    A[产生频繁1-项集] --&gt; B[k=1] --&gt; C[k+=1] --&gt; G[由频繁k-1-项集生成候选k-项集,并剪枝] --&gt; D{候选k-项集为空?}\n    D -- 是 --&gt; E[返回频繁项集]\n    D -- 否 --&gt; F[对候选k-项集支持度计数,产生频繁k-项集] --&gt; GG{频繁k-项集为空?} -- 是 --&gt; E\n    GG -- 否 --&gt; C</pre>\n<p>直接看 mlxtend\n库的源码（删除了一些相对于算法本身无关紧要的，比如低内存下的算法和\npandas 兼容性的问题）：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> combinations</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">association_rules</span>(<span class=\"params\">df, min_threshold=<span class=\"number\">0.9</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    找出置信度大于等于min_threshold的关联规则</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    confidence = <span class=\"keyword\">lambda</span> sAC, sA, _: sAC / sA</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 获取 {频繁项集} -&gt; 支持度 字典</span></span><br><span class=\"line\">    keys = df[<span class=\"string\">\"itemsets\"</span>].values</span><br><span class=\"line\">    values = df[<span class=\"string\">\"support\"</span>].values</span><br><span class=\"line\">    frozenset_vect = np.vectorize(<span class=\"keyword\">lambda</span> x: <span class=\"built_in\">frozenset</span>(x))</span><br><span class=\"line\">    frequent_items_dict = <span class=\"built_in\">dict</span>(<span class=\"built_in\">zip</span>(frozenset_vect(keys), values))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 规则的前件、后件、支持度</span></span><br><span class=\"line\">    rule_antecedents = []</span><br><span class=\"line\">    rule_consequents = []</span><br><span class=\"line\">    rule_supports = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 遍历所有频繁项集</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> frequent_items_dict.keys():</span><br><span class=\"line\">        sAC = frequent_items_dict[k]</span><br><span class=\"line\">        <span class=\"comment\"># 找到所有可能的组合</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> idx <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(k) - <span class=\"number\">1</span>, <span class=\"number\">0</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">            <span class=\"comment\"># 前件和后件的组合</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> combinations(k, r=idx):</span><br><span class=\"line\">                antecedent = <span class=\"built_in\">frozenset</span>(c)</span><br><span class=\"line\">                consequent = k.difference(antecedent)</span><br><span class=\"line\">                sA = frequent_items_dict[antecedent]</span><br><span class=\"line\">                sC = frequent_items_dict[consequent]</span><br><span class=\"line\">                <span class=\"comment\"># 计算置信度</span></span><br><span class=\"line\">                score = confidence(sAC, sA, sC)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> score &gt;= min_threshold:</span><br><span class=\"line\">                    rule_antecedents.append(antecedent)</span><br><span class=\"line\">                    rule_consequents.append(consequent)</span><br><span class=\"line\">                    rule_supports.append([sAC, sA, sC])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 返回结果</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> rule_supports:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pd.DataFrame(columns=[<span class=\"string\">\"antecedents\"</span>, <span class=\"string\">\"consequents\"</span>, <span class=\"string\">\"confidence\"</span>])</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        rule_supports = np.array(rule_supports).T.astype(<span class=\"built_in\">float</span>)</span><br><span class=\"line\">        df_res = pd.DataFrame(</span><br><span class=\"line\">            data=<span class=\"built_in\">list</span>(<span class=\"built_in\">zip</span>(rule_antecedents, rule_consequents)),</span><br><span class=\"line\">            columns=[<span class=\"string\">\"antecedents\"</span>, <span class=\"string\">\"consequents\"</span>],</span><br><span class=\"line\">        )</span><br><span class=\"line\">        sAC = rule_supports[<span class=\"number\">0</span>]</span><br><span class=\"line\">        sA = rule_supports[<span class=\"number\">1</span>]</span><br><span class=\"line\">        sC = rule_supports[<span class=\"number\">2</span>]</span><br><span class=\"line\">        df_res[<span class=\"string\">\"confidence\"</span>] = confidence(sAC, sA, sC)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> df_res</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">generate_new_combinations</span>(<span class=\"params\">old_combinations</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    由上一步的频繁k-1项集生成候选项k集，并剪枝</span></span><br><span class=\"line\"><span class=\"string\">    使用F_{k-1} x F_{k-1} 算法</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    items_types_in_previous_step = np.unique(old_combinations.flatten())</span><br><span class=\"line\">    <span class=\"keyword\">for</span> old_combination <span class=\"keyword\">in</span> old_combinations:</span><br><span class=\"line\">        max_combination = old_combination[-<span class=\"number\">1</span>]</span><br><span class=\"line\">        mask = items_types_in_previous_step &gt; max_combination</span><br><span class=\"line\">        valid_items = items_types_in_previous_step[mask]</span><br><span class=\"line\">        old_tuple = <span class=\"built_in\">tuple</span>(old_combination)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> valid_items:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> <span class=\"keyword\">from</span> old_tuple</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> item</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">apriori</span>(<span class=\"params\">df, min_support=<span class=\"number\">0.3</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    产生频繁项集</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_support</span>(<span class=\"params\">_x, _n_rows</span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        计算支持度。它按每一列求和，输出一个一维数组，是每一列里True的数量占总行数的比值</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        out = np.<span class=\"built_in\">sum</span>(_x, axis=<span class=\"number\">0</span>) / _n_rows</span><br><span class=\"line\">        <span class=\"keyword\">return</span> np.array(out).reshape(-<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    X = df.values  <span class=\"comment\"># 二维数组</span></span><br><span class=\"line\">    support = _support(X, X.shape[<span class=\"number\">0</span>])  <span class=\"comment\"># 所有1-项集的支持度</span></span><br><span class=\"line\">    ary_col_idx = np.arange(X.shape[<span class=\"number\">1</span>])  <span class=\"comment\"># 列索引，即不同商品的编号</span></span><br><span class=\"line\"></span><br><span class=\"line\">    support_dict = {<span class=\"number\">1</span>: support[support &gt;= min_support]}</span><br><span class=\"line\">    itemset_dict = {<span class=\"number\">1</span>: ary_col_idx[support &gt;= min_support].reshape(-<span class=\"number\">1</span>, <span class=\"number\">1</span>)}</span><br><span class=\"line\"></span><br><span class=\"line\">    max_itemset = <span class=\"number\">1</span>  <span class=\"comment\"># 最大k项集里的k</span></span><br><span class=\"line\">    rows_count = <span class=\"built_in\">float</span>(X.shape[<span class=\"number\">0</span>])  <span class=\"comment\"># 行数，即事务数</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> max_itemset:</span><br><span class=\"line\">        next_max_itemset = max_itemset + <span class=\"number\">1</span>  <span class=\"comment\"># 开始计算k-项集</span></span><br><span class=\"line\">        <span class=\"comment\"># 把频繁(k-1)-项集传进去，返回一个包含所有候选k-项集的生成器</span></span><br><span class=\"line\">        combin = generate_new_combinations(itemset_dict[max_itemset])</span><br><span class=\"line\">        <span class=\"comment\"># 把生成器转成数组</span></span><br><span class=\"line\">        combin = np.fromiter(combin, dtype=<span class=\"built_in\">int</span>)</span><br><span class=\"line\">        combin = combin.reshape(-<span class=\"number\">1</span>, next_max_itemset)</span><br><span class=\"line\">        <span class=\"comment\"># 结束条件：候选k-项集为空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> combin.size == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"comment\"># 对事务列表里的每行（事务）切片，选出，作为三维数组的第二维，便于后续判断超集关系</span></span><br><span class=\"line\">        _bools = np.<span class=\"built_in\">all</span>(X[:, combin], axis=<span class=\"number\">2</span>)</span><br><span class=\"line\">        support = _support(np.array(_bools), rows_count)</span><br><span class=\"line\">        <span class=\"comment\"># 遮罩，每个候选项集的支持度是否大于最小支持度</span></span><br><span class=\"line\">        _mask = (support &gt;= min_support).reshape(-<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">any</span>(_mask):</span><br><span class=\"line\">            <span class=\"comment\"># 对候选项集combin作用，过滤出频繁项集</span></span><br><span class=\"line\">            itemset_dict[next_max_itemset] = np.array(combin[_mask])</span><br><span class=\"line\">            support_dict[next_max_itemset] = np.array(support[_mask])</span><br><span class=\"line\">            max_itemset = next_max_itemset</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:  <span class=\"comment\"># 结束条件：候选k-项集为空</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 返回结果</span></span><br><span class=\"line\">    all_res = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> <span class=\"built_in\">sorted</span>(itemset_dict):</span><br><span class=\"line\">        support = pd.Series(support_dict[k])</span><br><span class=\"line\">        itemsets = pd.Series([<span class=\"built_in\">frozenset</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> itemset_dict[k]], dtype=<span class=\"string\">\"object\"</span>)</span><br><span class=\"line\">        res = pd.concat((support, itemsets), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">        all_res.append(res)</span><br><span class=\"line\"></span><br><span class=\"line\">    res_df = pd.concat(all_res)</span><br><span class=\"line\">    res_df.columns = [<span class=\"string\">\"support\"</span>, <span class=\"string\">\"itemsets\"</span>]</span><br><span class=\"line\">    res_df = res_df.reset_index(drop=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res_df</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"鸢尾花数据集关联分析示例\">鸢尾花数据集关联分析示例</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Python 3.10.9</span></span><br><span class=\"line\">os.chdir(<span class=\"string\">r\"C:\\Users\\rcooh\\Desktop\\数据挖掘\\大作业\\算法设计\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> algo <span class=\"keyword\">import</span> apriori, association_rules</span><br><span class=\"line\"><span class=\"keyword\">from</span> mlxtend.preprocessing <span class=\"keyword\">import</span> TransactionEncoder</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"></span><br><span class=\"line\">iris = datasets.load_iris()</span><br><span class=\"line\">data: np.ndarray = iris[<span class=\"string\">\"data\"</span>]</span><br><span class=\"line\">target: np.ndarray = iris[<span class=\"string\">\"target\"</span>]</span><br><span class=\"line\">modify_value = <span class=\"keyword\">lambda</span> v: <span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(v):<span class=\"number\">.1</span>f}</span>~<span class=\"subst\">{<span class=\"built_in\">int</span>(v)+<span class=\"number\">1</span>:<span class=\"number\">.1</span>f}</span>\"</span>  <span class=\"comment\"># 把数据划分到1cm范围内</span></span><br><span class=\"line\">FLOWER = {<span class=\"number\">0</span>: <span class=\"string\">\"山鸢尾\"</span>, <span class=\"number\">1</span>: <span class=\"string\">\"变色鸢尾\"</span>, <span class=\"number\">2</span>: <span class=\"string\">\"维吉尼亚鸢尾\"</span>}</span><br><span class=\"line\">dataset = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [</span><br><span class=\"line\">            <span class=\"string\">\"花萼长度\"</span> + modify_value(data[i][<span class=\"number\">0</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花萼宽度\"</span> + modify_value(data[i][<span class=\"number\">1</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花瓣长度\"</span> + modify_value(data[i][<span class=\"number\">2</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花瓣宽度\"</span> + modify_value(data[i][<span class=\"number\">3</span>]),</span><br><span class=\"line\">            FLOWER[target[i]],</span><br><span class=\"line\">        ]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(data.shape[<span class=\"number\">0</span>])</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\">np.savetxt(<span class=\"string\">\"dataset.csv\"</span>, dataset, delimiter=<span class=\"string\">\",\"</span>, fmt=<span class=\"string\">\"%s\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">te = TransactionEncoder()</span><br><span class=\"line\">item_array = te.fit(dataset).transform(dataset)</span><br><span class=\"line\">df = pd.DataFrame(item_array)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">frequent_itemsets = apriori(df, min_support=<span class=\"number\">0.3</span>)</span><br><span class=\"line\"><span class=\"comment\"># 把编码后的转成原来的</span></span><br><span class=\"line\">frequent_itemsets[<span class=\"string\">\"itemsets\"</span>] = frequent_itemsets[<span class=\"string\">\"itemsets\"</span>].apply(</span><br><span class=\"line\">    <span class=\"keyword\">lambda</span> cell: <span class=\"built_in\">frozenset</span>([te.columns_[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cell])</span><br><span class=\"line\">)</span><br><span class=\"line\">frequent_itemsets.to_csv(<span class=\"string\">\"frequent_itemsets.csv\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">rules = association_rules(frequent_itemsets, min_threshold=<span class=\"number\">0.8</span>)</span><br><span class=\"line\">rules.to_csv(<span class=\"string\">\"result.csv\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"动态规划\">动态规划</h2>\n<h3 id=\"滚动数组怎么滚\">滚动数组怎么滚</h3>\n<p>以三个数为例：</p>\n<ol type=\"1\">\n<li>先处理前两个，直接返回</li>\n<li>声明三个变量，只给前两个赋值</li>\n<li>循环 [下标看具体情况] 在每次循环里：\n<ol type=\"1\">\n<li>先作用</li>\n<li>把第二个数赋值给第一个</li>\n<li>把第三个数赋值给第二个</li>\n</ol></li>\n<li>返回第三个</li>\n</ol>\n<p>笔者认为这种写法符合人的直觉，且不容易出错。</p>\n<h3 id=\"爬楼梯\">70. 爬楼梯</h3>\n<blockquote>\n<p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。每次你可以爬 1 或 2\n个台阶。你有多少种不同的方法可以爬到楼顶呢？</p>\n</blockquote>\n<p>换一种问题描述方式：把一个正整数 n 拆分成一系列 1 和 2\n有顺序地相加，共有几种拆分方式 f (n)？</p>\n<p>从它的尾巴向前看，有这两种：</p>\n<ul>\n<li>n = (n-1) + 1</li>\n<li>n = (n-2) + 2</li>\n</ul>\n<p>其中 (n-1) 和 (n-2) 有它们各自被拆分的种类数，于是 f (n)=f (n-1)+f (n-2)</p>\n<p>边界：f (1)=1,f (2)=2（2=1+1=2+0）</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">climbStairs</span><span class=\"params\">(<span class=\"type\">int</span> n)</span> {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">2</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">3</span>; i &lt;= n; i++) {</span><br><span class=\"line\">        c = a + b;</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"使用最小花费爬楼梯\">746. 使用最小花费爬楼梯</h3>\n<p>我们把问题描述改写一下：</p>\n<p>给你一个非负整数数组，长度大于等于\n2，让你在数组里选一些数求和，要求选的这些数：</p>\n<ul>\n<li>0 号和 1 号元素必须二选其一</li>\n<li>最后两个元素必须二选其一</li>\n<li>选的相邻两数之间至多间隔一个数</li>\n<li>要求和最小，输出和</li>\n</ul>\n<p>状态转移就是从过去转移到现在。现在虚空设一个数叫 dp [i] 表示爬到下标为\ni 的台阶时的花费</p>\n<p>（注意：此时的 dp [i] 是不包含本级台阶的花费的，往后跨了之后才加）</p>\n<p>有两种转移的情况：从 i-1 爬一层、从 i-2 爬两层</p>\n<p>从 i-1\n爬一层之后、转移到现在，现在的花费等于跨上一步之前的花费 + 跨上一步之后的花费</p>\n<p>即 dp [i] = dp [i-1] + cost [i-1]</p>\n<p>总的状态转移方程为 dp [i] = min (dp [i-1] + cost [i-1], dp [i-2] +\ncost [i-2])</p>\n<p>边界为 dp [0]=dp [1]=0，返回值为 dp [n]，下标 n 在楼梯的顶层，cost\n数组右边一个位置，等于 cost 数组长。用滚动数组，循环 [2, cost 长]</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">minCostClimbingStairs</span><span class=\"params\">(<span class=\"type\">int</span>* cost, <span class=\"type\">int</span> costSize)</span> {</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">0</span>, b = <span class=\"number\">0</span>, c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= costSize; i++) {</span><br><span class=\"line\">        c = fmin(a + cost[i - <span class=\"number\">2</span>], b + cost[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"打家劫舍\">198. 打家劫舍</h3>\n<p>我们把问题描述改写一下：</p>\n<p>给你一个长度 [1,100] 的非负整数数组，让你选一些数求和，要求选的这些数间隔至少为\n1，返回最大和</p>\n<p>虚空设一个数 dp [i] 表示你对 i\n号下标纠结之后的和，你正在纠结打还是不打</p>\n<ul>\n<li>如果打 i，就不能打 i-1，dp [i] = dp [i-2] + value [i]</li>\n<li> 如果不打 i，就可以打 i-1，dp [i] = dp [i-1]</li>\n</ul>\n<p>这两种情况求大的</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">rob</span><span class=\"params\">(<span class=\"type\">int</span>* nums, <span class=\"type\">int</span> numsSize)</span> {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (numsSize == <span class=\"number\">1</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (numsSize == <span class=\"number\">2</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmax(nums[<span class=\"number\">0</span>], nums[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"type\">int</span> a = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> b = fmax(nums[<span class=\"number\">0</span>], nums[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"type\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt; numsSize; i++) {</span><br><span class=\"line\">        c = fmax(a + nums[i], b);</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"驾驶\">驾驶</h2>\n<p>关键点：</p>\n<ul>\n<li>车钥匙：点火，使发动机工作</li>\n<li>离合器踏板（左）：使发动机和变速箱连接到一起。踩下去是离，抬起来是合。挂挡前必踩离合</li>\n<li>变速杆（档）：改变从变速箱向车轮的转速比例</li>\n<li>刹车踏板（中）：用于减慢车轮转速</li>\n<li>手刹：抬起来是刹，把后轮锁死</li>\n<li>油门踏板（右）：改变流向发动机的汽油流量</li>\n<li>速度计，右边的是发动机，左边的是车轮</li>\n</ul>\n<p>点火前手刹应处于抬起状态，档位为空</p>\n<p>平地起步：</p>\n<ol type=\"1\">\n<li>点火、踩住离合挂一挡、松手刹</li>\n<li>慢松离合</li>\n</ol>\n<p>斜坡起步：</p>\n<ol type=\"1\">\n<li>点火、踩住离合和刹车挂一挡、松手刹</li>\n<li>慢松刹车和离合</li>\n</ol>\n<p>停车：</p>\n<ol type=\"1\">\n<li>踩住离合和刹车、挂空挡、拉手刹</li>\n<li>松脚熄火</li>\n</ol>\n<h2 id=\"用-c-语言模拟一个像素时钟\">用 C 语言模拟一个像素时钟</h2>\n<h3 id=\"myclock.h\">myclock.h</h3>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> YIN <span class=\"string\">' '</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> YANG <span class=\"string\">'O'</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SCREEN_WIDTH 34</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SCREEN_HEIGHT 7</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PROBE_NUM 4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">char</span> screen[SCREEN_HEIGHT][SCREEN_WIDTH]; <span class=\"comment\">// 模拟屏幕，34 * 7 像素</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">const</span> <span class=\"type\">int</span> hOffset[<span class=\"number\">6</span>];                     <span class=\"comment\">// 水平方向上的偏移量，每位数字的左上角</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">char</span> *probe[PROBE_NUM];                   <span class=\"comment\">// 一排四个探针，存放四个像素的地址</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">const</span> <span class=\"type\">int</span> model[<span class=\"number\">10</span>][SCREEN_HEIGHT];       <span class=\"comment\">// 每行是一个数字模型的像素情况，每行里的一个记录代表数字模型的一行</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">int</span> timeDidits[<span class=\"number\">6</span>];                        <span class=\"comment\">// 18:44:02</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeReset</span><span class=\"params\">()</span>;                 <span class=\"comment\">// 探针回到原点，屏幕左上角</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveDown1Px</span><span class=\"params\">()</span>;           <span class=\"comment\">// 探针向下移动一个像素</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveRightPx</span><span class=\"params\">(<span class=\"type\">int</span> offset)</span>; <span class=\"comment\">// 探针向右移动多个像素</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getTimeDidits</span><span class=\"params\">()</span>;                    <span class=\"comment\">// 获取本地时间的六个数字</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeTimeToScreen</span><span class=\"params\">()</span>;                <span class=\"comment\">// 写六个数字</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeDigit</span><span class=\"params\">(<span class=\"type\">int</span> digit, <span class=\"type\">int</span> hOffset)</span>; <span class=\"comment\">// 按偏移量写一个数字</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"myclock.c\">myclock.c</h3>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span> <span class=\"comment\">//system(\"cls\")</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;conio.h&gt;</span>  <span class=\"comment\">//_kbhit()</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;time.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">\"myclock.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">char</span> screen[SCREEN_HEIGHT][SCREEN_WIDTH] = {</span><br><span class=\"line\">    <span class=\"comment\">/*0                        5                                  12                       17                                 24                       29                  33*/</span></span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\0'</span>}};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> hOffset[<span class=\"number\">6</span>] = {<span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">12</span>, <span class=\"number\">17</span>, <span class=\"number\">24</span>, <span class=\"number\">29</span>};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">char</span> *probe[PROBE_NUM] = {&amp;screen[<span class=\"number\">0</span>][<span class=\"number\">0</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">1</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">2</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">3</span>]};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> model[<span class=\"number\">10</span>][SCREEN_HEIGHT] =</span><br><span class=\"line\">    {</span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0|       O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3|       O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3|       O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>}</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> timeDidits[<span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    system(<span class=\"string\">\"cls\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[?25l\"</span>); <span class=\"comment\">// 隐藏光标</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!_kbhit())</span><br><span class=\"line\">    {</span><br><span class=\"line\">        getTimeDidits();</span><br><span class=\"line\">        writeTimeToScreen();</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\\n\\n\\nPress any key to exit...\\n\"</span>, (<span class=\"type\">const</span> <span class=\"type\">char</span> *)screen);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[0;0H\"</span>); <span class=\"comment\">// 光标移动到 (0,0)</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    system(<span class=\"string\">\"cls\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[?25h\"</span>); <span class=\"comment\">// 显示光标</span></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeReset</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] = &amp;screen[<span class=\"number\">0</span>][i];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveDown1Px</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] += SCREEN_WIDTH;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveRightPx</span><span class=\"params\">(<span class=\"type\">int</span> offset)</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] += offset;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getTimeDidits</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"type\">time_t</span> utc = time(<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">tm</span> <span class=\"title\">local_time</span>;</span></span><br><span class=\"line\">    localtime_s(&amp;local_time, &amp;utc);</span><br><span class=\"line\">    timeDidits[<span class=\"number\">0</span>] = local_time.tm_hour / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">1</span>] = local_time.tm_hour % <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">2</span>] = local_time.tm_min / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">3</span>] = local_time.tm_min % <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">4</span>] = local_time.tm_sec / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">5</span>] = local_time.tm_sec % <span class=\"number\">10</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeTimeToScreen</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">6</span>; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        writeDigit(timeDidits[i], hOffset[i]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeDigit</span><span class=\"params\">(<span class=\"type\">int</span> digit, <span class=\"type\">int</span> hOffset)</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    probeMoveRightPx(hOffset); <span class=\"comment\">// 探针移动到数字的起始位置</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> digitRowIndex = <span class=\"number\">0</span>; digitRowIndex &lt; SCREEN_HEIGHT; digitRowIndex++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        <span class=\"comment\">// 写一个数字的每一行.对于所有数字的每一行，总共有四种状态</span></span><br><span class=\"line\">        <span class=\"type\">int</span> digitRowStatus = model[digit][digitRowIndex];</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (digitRowStatus)</span><br><span class=\"line\">        {</span><br><span class=\"line\">        <span class=\"comment\">// 探针写一行，四个像素点</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1111</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1000</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YIN;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b0001</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1001</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        probeMoveDown1Px(); <span class=\"comment\">// 向下按行扫描</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    probeReset(); <span class=\"comment\">// 回归原位</span></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"读书感想与原文摘抄\">读书感想与原文摘抄</h2>\n<h3 id=\"平凡生活中的不凡之旅凉宫春日系列读书心得\">平凡生活中的不凡之旅：《凉宫春日系列》读书心得</h3>\n<p><a href=\"https://haruhifanclub.com/library\">《凉宫春日系列》</a>是日本作家谷川流创作的校园幻想题材轻小说，2003\n年首作《凉宫春日的忧郁》出版后大受欢迎，并逐渐发展为涵盖多部小说、动画及漫画的作品。故事以第一人称视角叙述，通过主角阿虚的眼睛带领读者走进一个既平凡又充满奇幻色彩的世界。</p>\n<p>从小学起，阿虚就意识到现实世界与他所期待的神奇世界是存在着巨大差异的，圣诞老人只不过是一个节日象征，动画里的角色也仅仅存在于屏幕之上。进入高中后，阿虚已经习惯了平淡无奇的生活，但他内心深处仍然保留着对不凡事物的向往。直到遇见了凉宫春日，他的生活发生了翻天覆地的变化。</p>\n<p>凉宫春日自幼便认为自己与众不同，经历的事情也是全世界最有趣的。然而，在小学六年级的一次棒球赛中，当她在巨大的体育馆里看到五万名观众时，她突然意识到自己独特的生活其实是每个人都会经历的一部分。那次经历让她开始思考：在如此庞大的人口基数下，一定有人过着不平凡且充满趣味的生活，那么为什么那个人不能是她呢？于是，凉宫决定开始主动寻找并创造那些不同寻常的故事。</p>\n<p>在开学第一天，她大胆地向全班同学宣告：“我对普通的人类没有兴趣。如果你们当中有外星人、未来人、异世界的人或者超能力者，请尽管来找我！” 这番话并未引起太大的反响，因为对于那些熟悉她的同学们来说，这只是她一系列奇特行为的冰山一角而已。为了追求与众不同的生活，凉宫曾尝试过许多非传统的方式：比如在学校操场上用石灰画出巨大图案、在楼顶上用油漆绘制星星、甚至还在校园里到处贴纸符。此外，她还曾经加入过学校里的所有社团，但在发现这些活动都太过平常之后又一一退出。</p>\n<p>或许是受到凉宫这种积极态度的影响，阿虚也开始回忆起自己曾经对于冒险生活的渴望。当凉宫抱怨说学校里没有任何有趣的社团时，阿虚曾试图劝解道：“人类都会满足于现状，无法安于现状的人会通过发明或发现来推动文明的发展…… 只有那些天才才能将那些想法变为现实，身为凡人的我们，平庸地度过一生才是最好的选择。” 然而，这段话却意外激发了凉宫成立 “让世界变得更加热闹的凉宫春日团”（简称\nSOS 团）的决心。</p>\n<p>随着 SOS\n团的成立，除了阿虚和凉宫两名成员之外，又有三名新成员陆续加入 —— 长门有希、朝比奈实玖瑠以及古泉一树。令人惊讶的是，这三人实际上分别是真正的外星人、未来人以及超能力者。起初，阿虚并不相信他们的身份，但在亲身经历了几次不可思议的事件后，他不得不承认凉宫春日的确有着能够吸引奇异事物的力量。从此，故事从现实风格开始逐渐转向科幻风格。有趣的是，在\nSOS\n团里只有凉宫春日一人不知道她自己有着神一般的能力，和《名侦探柯南》里只有少数人知道柯南的真实身份有异曲同工之妙，这种东西被称为 “麦高芬”，起的是推动故事情节发展的作用。</p>\n<p>《凉宫春日系列》不仅仅是一部简单的娱乐作品，它更深层次地探讨了个人如何在日常生活中寻找意义，并勇敢地追求梦想。凉宫春日作为一个充满想象力的角色，始终保持着对未知世界的好奇心和探索欲望。她鼓励人们不要轻易接受现状，而是要勇于尝试新事物，即使结果可能并不如预期般完美。通过创建\nSOS\n团，她把自己期待的外星人、未来人以及超能力者齐聚一堂（虽然她自己是不知道的），拍摄自制电影在校庆上播放（虽然\nSOS\n团是一个地下组织，不可能获奖）等，她确实从平凡的生活里自己创造了一些不平凡的事情，实现了自己渴望不凡的梦想。</p>\n<p>该作品也提醒我们要勇于面对挑战，在成长的过程中找到属于自己的位置。在故事的中后期，随着\nSOS\n团活动的进行，以及团员们共同经历了一些巨大危机后，凉宫春日的性格稍微收敛了一点，其他三个团员也在逐渐发生着变化：原本沉默寡言的长门有希开始学会表达情感；害羞内向的朝比奈实玖瑠变得越来越自信；而看似冷静理智的古泉一树也在不断调整自己对待生活的态度。</p>\n<p>该作品还强调了珍惜当下每一刻的重要性。随着故事情节的发展，阿虚等人逐渐认识到即使是看似平淡无奇的日子也充满了特别之处，每个瞬间都是独一无二且宝贵的，我们应该学会欣赏并感激现在所拥有的一切，用未来人的话来说就是 “既定事项”。无论身处何种环境之中，只要愿意用心去感受、去体验，就能够发现生活中的美好与奇迹。</p>\n<p>总之，《凉宫春日系列》以其独特视角展示了如何在平凡中发现非凡的可能性。通过一系列精彩纷呈的故事，该书鼓励读者保持好奇心与创造力，勇于探索未知领域，享受旅程中的每一步。这不仅是一次心灵上的启迪之旅，更是一份关于勇气与坚持的美好寄语。</p>\n<h3 id=\"动态的历史现代心理学史第一章读书笔记\">动态的历史：《现代心理学史》第一章读书笔记</h3>\n<p>《现代心理学史》这本书向我们展示了心理学在历史上的演变过程。早在公元前\n5\n世纪，古希腊哲学家就开始基于个人经验和直觉探索人类的本性和行为，他们探讨了记忆、学习、动机、思维、知觉和变态行为等主题，这些主题成为了后来心理学研究的基础框架。然而，直到\n19\n世纪晚期，随着生理科学领域工具与技术的成功应用，心理学才逐渐从哲学中独立出来，成为了一个以科学实验为基础的学科。</p>\n<p>研究心理学的发展历史结合了心理学与历史编撰学两个领域的知识。在重建心理学的历史时，历史编撰学家采用的方法类似于考古学家，因为他们无法通过重现历史的情境来做实验。相反，他们必须依赖于过去遗留下来的各种资料记录，比如事件参与者或目击者的文字描述、信件、日记、照片、实验设备以及官方文件等，这些资料是重建历史事件的关键。然而，这些资料也可能因为遗失或被故意销毁而变得不完整。例如，行为主义创始人约翰・B. 华生在去世前烧毁了自己所有的信件、手稿和研究笔记，使得这部分重要的历史资料永远消失。</p>\n<p>有时，重要文献还可能因为存放不当而长期未能被发现。如艾宾浩斯关于人类学习和记忆的研究论文在他去世\n75\n年后才被找到，而费希纳的十箱日记在他去世近一个世纪后才被发掘出来。这些文档对于理解早期心理学的发展至关重要，但在它们被发现之前，许多有关艾宾浩斯和费希纳的作品都是在缺乏这些关键资料的情况下完成的。</p>\n<p>历史数据还可能会受到歪曲，这种歪曲可能来源于翻译过程中产生的误解，也可能是由于事件的参与者或观察者有意无意地对相关事件进行了扭曲。如弗洛伊德提出的 “Einfall”（入侵）一词在英语中被译为 “free\nassociation”（自由联想），但实际上这个词的意思更接近于无意识内容对意识思想的侵入，而并非简单的观念联结。</p>\n<p>历史叙述还可能受到当事人主观意图的影响。如行为心理学家\nB.F. 斯金纳在其自传中描绘了一个严格自律的学生形象，但在自传出版后的多年，他却否认了自己的研究生生涯如此艰辛，并承认自己的回忆是一种理想化的生活状态。斯金纳以前的一个同学说：斯金纳总是比其他同学都迅速地完成实验室工作，然后打整个下午的乒乓球。这样的例子揭示了历史学家所面临的困境：究竟哪个版本的故事更为准确？</p>\n<p>以上种种问题提示我们，对于历史的理解是一个动态的过程。每当新的数据被发现或是旧的数据被得到重新解释，历史故事就会发生变化。历史在不断地发展、浓缩并被纠正，因此它总是未完成的且不够完善的。历史学家的工作就是在这个过程中不断追求真理，尽管他们的叙述可能只是逐步地接近真相。随着新的发现和对历史数据的新分析，我们的理解将变得更加完善。</p>\n<h3 id=\"乡音无改郧县志1979-2008读书笔记\">乡音无改：《郧县志（1979-2008）》读书笔记</h3>\n<p>郧县是我的故乡，它位于鄂西北的十堰市，中国的鸡心位置。2014 年 12\n月，郧县撤县设区，改为郧阳区。2024 年 8\n月，“郧县人” 被写进人教版七年级上册的《中国历史》教科书中，与 “元谋人”“蓝田人”“北京人”“山顶洞人” 并列，所以也可以看作是你我的共同故乡。</p>\n<p><a href=\"http://www.sydaxxw.com/dfzgz/dfzk/202302/t20230208_4179784.shtml\">《郧县志（1979-2008）》</a>全书有三十二卷，囊括了从行政区划、地理环境到经济社会生活等的各个方面，记述了改革开放\n30\n年来郧县的历史和发展状况。附录还收集了一些古代的敕谕、疏奏、文化作品，以及康熙、同治和清末到\n20\n世纪末的前版《郧县志》序，前志勘误表和补遗等。如此庞大的一部的著作，通读下来是要花费大量时间的。如果给老乡推荐这本书的话，我首先推荐最后一卷《人物》，你可以与你的父辈交流讨论，在里面寻找有没有你们认识的人。其次就是第三十卷《社会生活》里关于我们家乡的方言了。</p>\n<p>声调方面，普通话的四个声调为阴平（一声）、阳平（二声）、上声（三声）、去声（四声）。如 “鸡鸣狗盗”。郧县话则是把普通话的一声读作二声、二声读作四声、三声读作一声、四声读作三声的前半部分。如 “极命钩岛”。与河南话有相似之处。</p>\n<p>发音方面，郧县方言存在把两字合成一字的读的情况，如女娃（nüā）子。有少数字可拼写出发音，却无法使用对应的字书写，如 “这篇文章写得\ndiàng 得很！”（diàng 是好的意思），“那个人很 niào 劲”（niào\n劲是厉害的意思）。还有无法使用汉语拼音方案标注的发音，如 “去”、“给”、“黑” 等。</p>\n<p>人物称谓方面，郧县方言对一般人或亲属的称谓中存有大量集体称谓。诸如，所有的男孩儿都称儿娃子，所有的女孩儿都称女娃（合音\nnüā）子；所有成人已婚男性统称男将，所有成人已婚女性统称女将；所有的上辈统称长辈或老辈子；所有的下辈统称晚辈；同辈男性女性统称姊妹。年龄大小不同有固定称谓，所有与祖父年龄相当的称爷爷奶奶或某姓爷爷、某姓奶奶。如李爷爷、王爷爷、王奶奶等；所有的小偷统称贼（zèi）娃（wā）子或三只手，所有的莽汉、痴呆、傻子都可称二球，所有的懒人都可称懒汉或黄鳝或懒婆娘等。</p>\n<p>动植物称谓方面，比较有特色的有：豌豆八哥（布谷鸟）、长虫（蛇）、蛐蜷（蚯蚓）、狼巴子（狼）、苞谷（玉米）、莲菜（藕）、牛吭气（半夏）、牛抵钻（半夏果）等。</p>\n<p>时空间称谓方面，有特色的有：年逝（去年）、门儿（明天）、晌午（中午）、连猛儿（立即）、高头（上面）、底下（下面）、河趴（河滩）等。</p>\n<p>人的身体、疾病、品行称谓方面，有特色的有：胳奓窝（腋窝）、手脖子（手腕）、日噘（批评）、干气（含羞）、日弄人（捉弄人）、扳跤（摔跤）、恶骚（厉害）、稀打会儿（险些）、兑差（凑合）、秧秧的儿（萎靡不振）、腻得很（高傲自大）等。</p>\n<p>俏皮话方面，有特色的有：“人是铁饭是钢，一顿不吃心发慌”，“捡个棒槌当根针”，“喝一辈子酒，丢一辈子丑；抽一辈子烟，烧一辈子手” 等。</p>\n<p>在读书的过程中仿佛回到了儿时的语言环境里，那些熟悉的乡音，夹杂着童年的欢笑与纯真，随着文字缓缓流淌进我的心中，我似乎能够闻到故乡泥土的气息，听到老街坊间的亲切问候，感受到那份独特的归属感。这种语言不仅是沟通的工具，更是一种情感的纽带，它连接着过去与现在，让我即使身处他乡，也能通过书页上的字句重温那段无忧无虑的日子。这份体验不仅仅是一次简单的阅读经历，而是一场心灵之旅，让我更加珍惜自己的文化根源，并渴望将这份珍贵的文化遗产传承下去。</p>\n<hr>\n<ul>\n<li>第一篇的前半部分是自己写的加上 AI 修改，后半部分的感想是 AI\n写的，后续人工修改。</li>\n<li>第二篇的第一段是从书里总结的，后面全是 AI\n缩写原书内容，后续人工修改。</li>\n<li>第三篇的前半部分是自己写的，后边全是摘抄报菜名，最后是引导句加 AI\n扩写的。</li>\n</ul>\n","excerpt":"<h2 id=\"json\">JSON</h2>\n<p>JSON（JavaScript Object Notation，JavaScript\n对象表示法）是一种轻量级的数据交换格式，可以看成是字符串。和 JavaScript\n没什么关系，就像 JavaScript 和 Java 没什么关系一样。从 Python\n的角度来看，一个 JSON 文件是一系列列表和字典的嵌套。</p>\n<p>JS：</p>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jsonStr = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(jsObj);</span><br><span class=\"line\">jsObj = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(jsonStr);</span><br></pre></td></tr></tbody></table></figure>\n<p>Python：</p>\n<figure class=\"highlight python\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\">json_str = json.dumps(py_obj)</span><br><span class=\"line\">py_obj = json.loads(json_str)</span><br></pre></td></tr></tbody></table></figure>","more":"<h2 id=\"计算机网络\">计算机网络</h2>\n<h3 id=\"接网线头的流程和注意事项\">接网线头的流程和注意事项</h3>\n<p>RJ45 水晶头的接线方式有两种，多使用\nT568B：橙白 | 橙、绿白 | 蓝、蓝白 | 绿、棕白 | 棕。</p>\n<ol type=\"1\">\n<li>用网线钳的圆孔把网线的表皮剥开，转一下不要使太大力\n<ul>\n<li>露出来里面的线的长度长一点，比两倍水晶头的长度长</li>\n</ul></li>\n<li>你会看到有四对缠在一起的线，把它们分开成一根一根的\n<ul>\n<li>这时候先不用管它们的顺序</li>\n</ul></li>\n<li>用力把它们捋直，多捋几次</li>\n<li>它们缠在一起的时候是：橙白 | 橙、绿白 | 绿、蓝白 | 蓝、棕白 | 棕，接线的时候要把中间两根交换一下位置</li>\n<li>用网线钳的刀把它们从中间剪断，保证这几根线的末端是平齐的。注意两点：\n<ul>\n<li>哪里排列地最整齐紧密，就从哪里剪</li>\n<li>留下的长度不要比一倍水晶头的长度过长，否则露出来的部分容易损坏。这是一个<strong>反面的例子</strong>：这几根线的下面留得太长了，没还有完全地分开</li>\n</ul></li>\n</ol>\n<p><img src=\"/blog/images/rj45.webp\"></p>\n<ol start=\"6\" type=\"1\">\n<li>把这几根线插入到水晶头里。注意：水晶头的卡扣是朝下的\n<ul>\n<li>如果顺利，这八根线会待在它们的八个凹槽里，它们的头上有八个片片</li>\n</ul></li>\n<li>把水晶头插入网线钳的槽里，用网线钳用力把这八个片片刺入线的内部，在刺的时候能感受到阻力</li>\n<li>两头都接好之后，用工具测试是否联通</li>\n</ol>\n<h3 id=\"概述\">概述</h3>\n<p>世界上第一个网页：<a href=\"http://info.cern.ch\">http://info.cern.ch</a></p>\n<p>RFC 文档：“请求评论”（Request For\nComments）的文档，公开发布的互联网建议标准，请求公众评论。最后制定互联网标准\nSTD。</p>\n<p>互联网服务提供者（Internet Service\nProvider），可以是移动联通电信公司，也可以是非营利组织。主干 ISP：国 |\n地区 ISP：省 | 本地 ISP：省以下。两个同级 ISP\n交换信息时，可以通过互联网交换点（Internet eXchange\nPoint）IXP，而不必通过上级 ISP。</p>\n<p>计算机网络分边缘部分和核心部分。边缘部分是我们所有人直接使用的主机，如手机和电脑。核心部分是除了边缘主机之外的所有硬件设施，如交换机、路由器、网线。接入网是边缘部分向核心部分过渡的部分。</p>\n<p>边缘部分的通信分 C/S 模式和 P2P\n模式。两者的区别是学生向老师请教题目和学生之间互相讲题，在下载文件之后做不做种。</p>\n<p>核心部分的通信：电路交换是提前联系用一辆专车运货；分组交换是把货物拆分成小的快递，再经过各种站点发送出去；报文交换是将货物作为一个整体，通过多个中转站运送。前两者的区别是一手和多手，后两者的区别是切不切片。</p>\n<p>分组交换：</p>\n<ol type=\"1\">\n<li>TCP\n协议把报文分组，每组写上头部信息。（包裹大包分成小包，写上序号、寄出地和目的地等）</li>\n<li>通过路由器一级一级地转发到目的地。</li>\n</ol>\n<pre><code class=\"mermaid\">\ngantt\ntitle 分组交换（甘特图）\ndateFormat s\naxisFormat %S\n\nsection 1 号包\n从 A 到 B :0, 5s\n从 B 到 C :5, 5s\n从 C 到 D :10, 5s\n\nsection 2 号包\n从 A 到 B :5, 5s\n从 B 到 C :10, 5s\n从 C 到 D :15, 5s\n\nsection 3 号包\n从 A 到 B :10, 5s\n从 B 到 C :15, 5s\n从 C 到 D :20, 5s\n</code>\n</pre>\n<ul>\n<li>0-5 时间 1 号包裹从 A 站到 B 站</li>\n<li> 5-10 时间 1 号包裹从 B 站到 C 站、2 号包裹从 A 站到 B 站</li>\n<li> 10-15 时间 1 号包裹从 C 站到 D 站、2 号包裹从 B 站到 C 站、3\n号包裹从 A 站到 B 站</li>\n</ul>\n<ol start=\"3\" type=\"1\">\n<li>把各个包裹合并。</li>\n</ol>\n<h3 id=\"物理层\">物理层</h3>\n<p>RJ45 水晶头的接线方式有两种，多使用\nT568B：橙白 | 橙、绿白 | 蓝、蓝白 | 绿、棕白 | 棕。传的是数字信号。</p>\n<ul>\n<li>物理层之下的传输媒体\n<ul>\n<li>导引性传输媒体：双绞线、光缆、同轴电缆、架空明线</li>\n<li>非导引性传输媒体：空气或真空</li>\n</ul></li>\n</ul>\n<p>集线器工作在物理层。</p>\n<ul>\n<li>通信双方的交互方式\n<ul>\n<li>单向通信（单工）：一段单行道。电视、广播。</li>\n<li>双向交替通信（半双工）：一段有两个车道的马路，但是规定在一边的车道有车正在走时，另一边（相反方向）的车道不能有车走。对讲机。</li>\n<li>双向同时通信（全双工）：一段正常的两个车道的马路。</li>\n</ul></li>\n</ul>\n<p>编码方式：编码的终点是码，即数字信号。</p>\n<p>如何把比特和电压互相转换。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> 1  1  0  0  1</span><br><span class=\"line\"></span><br><span class=\"line\">‾‾‾‾‾‾______‾‾‾    # 极性不归零电平 Polar NRZL，Non-Return-to-Zero level</span><br><span class=\"line\"></span><br><span class=\"line\">‾‾‾_________‾‾‾    # 极性不归零反转 Polar NRZI，Non-return-to-zero inverted，边界遇 1 跳变</span><br><span class=\"line\"></span><br><span class=\"line\">-‾--‾--_--_--‾-    # 极性归零 Polar RZ，Return-to-Zero，正脉冲凸，负脉冲凹</span><br><span class=\"line\"></span><br><span class=\"line\">‾_|‾_|_‾|_‾|‾_|    # 曼彻斯特编码（G.E. Thomas Convention）</span><br><span class=\"line\"></span><br><span class=\"line\">‾_|_‾|_‾|_‾|‾_|    # 差分曼彻斯特编码（G.E. Thomas Convention）</span><br></pre></td></tr></tbody></table></figure>\n<p>曼彻斯特编码：中心始终跳变</p>\n<ul>\n<li>G.E. Thomas Convention：\n<ul>\n<li>中心向下跳变，<code>‾_</code>，<code>1</code></li>\n<li>中心向上跳变，<code>_‾</code>，<code>0</code></li>\n<li>简记：<strong>下为 1</strong></li>\n</ul></li>\n<li>IEEE 802.3 Convention 和上面的定义相反</li>\n</ul>\n<p>差分曼彻斯特编码：中心始终跳变</p>\n<ul>\n<li>G.E. Thomas Convention：\n<ul>\n<li>左边界无跳变，<code>1</code>\n<ul>\n<li><code>_|_‾</code></li>\n<li><code>‾|‾_</code></li>\n</ul></li>\n<li>左边界有跳变，<code>0</code>\n<ul>\n<li><code>_|‾_</code></li>\n<li><code>‾|_‾</code></li>\n</ul></li>\n<li>简记：<strong>左连为 1</strong></li>\n</ul></li>\n<li>IEEE 802.3 Convention 和上面的定义相反</li>\n</ul>\n<h3 id=\"数据链路层\">数据链路层</h3>\n<p>解决三个问题：发出去之后，哪一方接收；传输何时开始，何时结束；判断是否有传输错误</p>\n<p>网卡：</p>\n<ul>\n<li>负责把有线或无线电信号与比特流互转。工作在物理层和数据链路层。</li>\n<li>与 CPU 和存储器并行通信，与局域网串行通信</li>\n<li>接收并缓存 MAC\n帧，帧的目标地址不是它自己时，或者不符合格式、校验失败时就丢弃</li>\n<li>安装驱动到操作系统，实现以太网协议</li>\n</ul>\n<blockquote>\n<p>MAC</p>\n</blockquote>\n<p>MAC 地址有 6 个字节。全 1 的地址是广播地址</p>\n<p>Windows 查看网络适配器的 MAC 地址：ipconfig /all</p>\n<ul>\n<li>前三个字节是 IEEE\n的注册管理机构分配的，后三个字节是厂家自行分配的</li>\n<li>第一个字节最低位：0 为单播，1 为多播</li>\n</ul>\n<blockquote>\n<p>透明传输</p>\n</blockquote>\n<p>帧定界符 SOH 0x01、EOT 0x10，转义字符 ESC 0x1B</p>\n<p>如果数据长度超过了 MTU，会被分割成多个帧。</p>\n<p>下到物理层：在 MAC 帧前面插入 7 字节的前同步码和 1\n字节的帧定界符：就是\n<code>10101010 10101010 ... 10101010 10101011</code>。交替的 10\n用于时钟同步，最后一个字节的最后一个比特变了，告诉接收端，后面的就是 MAC\n帧。不用标记帧结束，因为是曼彻斯特编码，一直在跳变，脱离原本的规律了就是帧结束了。</p>\n<blockquote>\n<p>差错检测</p>\n</blockquote>\n<p>比特差错：01 错了。误码率（BER）：平均每传送 <span class=\"math inline\">\\(\\mathrm{(BER)^{-1}}\\)</span>\n个比特，会有一个比特出错。</p>\n<p>传输差错：接收方没有收到某一个帧，或者收到了重复的帧，或者收到帧的顺序错了</p>\n<p><strong>FCS</strong></p>\n<p>帧检验序列 Frame Check Sequence，确保无比特差错</p>\n<ol type=\"1\">\n<li>提前规定冗余码有 3 位</li>\n<li>提前规定一个除数 <span class=\"math inline\">\\(P\\)</span>\n，比冗余码的长度多一位，如 <code>1100</code></li>\n<li>把待传的数据 <code>1001 0001</code> 后边补上冗余码长度个\n0，用除数除它</li>\n<li>不管大小，<code>1</code> 开头就商 <code>1</code>，<code>0</code>\n开头就商 <code>0</code>：</li>\n</ol>\n<figure class=\"highlight txt\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        1</span><br><span class=\"line\">    --------------</span><br><span class=\"line\">1100|1001 0001 000</span><br><span class=\"line\">     1100</span><br><span class=\"line\">     ------</span><br><span class=\"line\">      101 0</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"5\" type=\"1\">\n<li>相减，相当于异或</li>\n<li>继续除，最后的余数 <code>100</code> 就是冗余码</li>\n<li>把冗余码添加到原数据的末尾</li>\n</ol>\n<p><strong>CRC</strong></p>\n<p>循环冗余检验 Cyclic Redundancy Check</p>\n<p>接收方把收到的、经发送方添加了冗余码后的数据再用 <span class=\"math inline\">\\(P\\)</span> 去除。传输没出错 -&gt;\n余数为零，反之为极大概率。</p>\n<p>除数 <span class=\"math inline\">\\(P\\)</span>\n还有一种记法，叫生成多项式 <span class=\"math inline\">\\(P(X)\\)</span>：如\n<code>1100</code> 记作：<span class=\"math inline\">\\(X^3+X^2\\)</span></p>\n<blockquote>\n<p>交换机</p>\n</blockquote>\n<p>交换机工作在数据链路层，全双工。并且不使用 CSMA/CD\n协议，但仍然使用以太网的帧结构。</p>\n<p>交换表的结构：MAC 地址、端口号、有效时间、状态标志</p>\n<p>源机器发送数据帧 → 交换机记录源 MAC 地址 → 交换机查找目标 MAC 地址 →\n如果目标未知，广播数据帧 → STP 确保广播不会形成环路。</p>\n<p>交换机分为直通交换和存储转发。直通交换不校验 FCS，直接读 6\n字节的目标地址（有时包含前导码）。</p>\n<blockquote>\n<p>以太网</p>\n</blockquote>\n<p>以太网是局域网的一种实现方式，与 Wifi 的区别是后者不用网线。</p>\n<ul>\n<li>DIX Ethernet V2 和 IEEE 802.3 是以太网的协议，使用\nCSMA/CD（冲突检测）</li>\n<li>IEEE 802.11 是 Wifi 的协议，使用 CSMA/CA（冲突避免）</li>\n</ul>\n<p>局域网共享信道，为避免冲突，可采用静态划分信道（复用）或动态媒体接入控制</p>\n<p>以太网 V2 的 MAC 头部：目标 MAC + 源 MAC + 类型\n0800【IPv4】/80DD【IPv6】</p>\n<ul>\n<li>MAC 帧的格式\n<ul>\n<li>（带宽为 <span class=\"math inline\">\\(\\mathrm{10Mbit/s}\\)</span>\n的）以太网 V2： <span class=\"math display\">\\[\n6 + 6 + 2 + (46 \\sim 1500) + 4 = (64 \\sim 1518) 字节\n\\]</span> 其中 <span class=\"math inline\">\\(\\mathrm{64Byte = \\dfrac{51.2\n\\mu s \\times 10Mbit/s}{8bit/Byte}}\\)</span>，减去 18\n字节的首部和尾部后，得到数据部分的最小长度 46 字节。</li>\n</ul></li>\n</ul>\n<p>100BASE-T 以太网：</p>\n<ul>\n<li>使用双绞线（T），带宽为 100Mbit/s。</li>\n<li>标准是 IEEE 802.3u，半双工时使用 CSMA/CD 协议，全双工时不使用。</li>\n<li>争用期为 5.12 μs，帧最小间隔 0.96 μs，是 10 Mbit/s\n以太网的十分之一。</li>\n</ul>\n<h3 id=\"网络层\">网络层</h3>\n<blockquote>\n<p>IPv4 分类编址</p>\n</blockquote>\n<p>4 个字节。</p>\n<ul>\n<li>A 类地址：0 + 7 位网络号 + 3 字节主机号，首字节 0 到 127</li>\n<li>B 类地址：10 + 14 位网络号 + 2 字节主机号，首字节 128 到 191</li>\n<li>C 类地址：110 + 21 位网络号 + 1 字节主机号，首字节 192 到 223</li>\n</ul>\n<p>主机号全 1 是广播地址，全 0 是该子网。</p>\n<p>私有地址：用于局域网（LAN）内部，不可直接在互联网上路由。</p>\n<ul>\n<li>A 类：10.0.0.0 到 10.255.255.255</li>\n<li>B 类：172.16.0.0 到 172.31.255.255</li>\n<li>C 类：192.168.0.0 到 192.168.255.255</li>\n</ul>\n<blockquote>\n<p>无分类编址 CIDR</p>\n</blockquote>\n<p>子网掩码：用于标记用 IP 地址前面的几位来表示网络地址。</p>\n<p>子网掩码类似 <code>255.248.0.0</code>\n（<code>11111111 11111000 00000000 00000000</code>），即用前面 13\n位表示网络地址，后面的位表示主机地址。记作 <code>IP地址/13</code>。</p>\n<h3 id=\"计算\">计算</h3>\n<p>信道长度、带宽和信噪比会影响数据在信道中传输的速率，而信号传播速度（电磁波在介质中的传播速度）不会。</p>\n<p>信噪比越大，接收方接收到的信息失真越少。两种表示方式：</p>\n<ul>\n<li><span class=\"math inline\">\\(\\dfrac {S}{N} =\n\\dfrac {信号平均功率}{噪声平均功率} = 10^{\\mathrm {dB}/10}\\)</span></li>\n<li><span class=\"math inline\">\\(\\mathrm{dB} = 10\n\\lg\\dfrac{S}{N}\\)</span></li>\n</ul>\n<p>计算传输速率时，取奈氏准则和香农公式的结果小的。</p>\n<p>Kibi：内存、存储容量，KiB = KB = 1024B</p>\n<p>Kilo：网络带宽，K = 1000，国际单位制的词头</p>\n<p><span class=\"math inline\">\\(\\mathrm{bit/s}\\)</span></p>\n<ul>\n<li>速率</li>\n<li>吞吐量：指实际速率，进量 +\n出量。有多条链路时，吞吐量由瓶颈链路决定。</li>\n<li>某信道的最高速率：时域上的带宽</li>\n<li>有效数据（速）率：<span class=\"math inline\">\\(\\mathrm {\\dfrac {数据长度}{发送时间 + RTT}}\\)</span></li>\n</ul>\n<p><span class=\"math inline\">\\(\\mathrm{Hz}\\)</span></p>\n<p>频域上的带宽 W：信号频率范围的宽度</p>\n<p>秒</p>\n<ul>\n<li>发送时延：网卡发送数据的时间，与信道长度无关。<span class=\"math inline\">\\(\\mathrm {\\dfrac {bit}{bit/s}} =\n\\dfrac {数据长度}{发送速率}\\)</span></li>\n<li> 传播时延：电磁波在网线或空气中传播的时间。与信道长度有关。<span class=\"math inline\">\\(\\mathrm {\\dfrac {m}{m/s} =\n\\dfrac {信道长度}{信号传播速率}}\\)</span></li>\n<li> 处理时延：主机或路由器收到分组后，对分组进行处理的时间。</li>\n<li>排队时延：分组在路由器输入队列和输出队列里排队的时间。</li>\n<li>……-&gt; 输出排队 -&gt; 发送 -&gt; 传播 -&gt; 输入排队 -&gt; 处理 -&gt; 输出排队……</li>\n<li>RTT：往返时间（Round-Trip Time）</li>\n</ul>\n<p>这里忽略了在接收和发送之间的排队时间和处理时间。</p>\n<pre><code class=\"mermaid\">\ngantt\ntitle RTT（甘特图）\ndateFormat s\naxisFormat %S\n\n    section RTT\n    RTT :3,17s\n\n    section A\n    发送           :0,3s\n    接收    :17,3s\n    ……    :20,4s\n\n    section 传播\n    从A到B传播    :1,8s\n    从B到A传播    :11,8s\n\n    section B\n    接收      :7,3s\n    发送    :10,3s\n\n</code>\n</pre>\n<p>bit</p>\n<p>时延带宽积：<span class=\"math inline\">\\(\\mathrm {s \\times bit/s =\n传播时延 \\times 带宽}\\)</span></p>\n<p>已经从发送端发出，但尚未到达接收端的比特数。又叫以比特为单位的链路长度。</p>\n<p>m/bit</p>\n<p>每比特宽度：每个比特在信道中占据的长度。</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n&amp;\\mathrm {m/bit = \\dfrac {m}{bit} = \\dfrac {信道长}{比特数}} \\\\\n&amp;\\mathrm {m/bit = \\dfrac {m/s}{bit/s} =\n\\dfrac {信道传播速率}{信道当前带宽}}\n\\end {aligned}\n\\]</span></p>\n<p>其他</p>\n<p>利用率：<span class=\"math inline\">\\(网络利用率 = 1 -\n\\dfrac {空闲时延}{当前时延}\\)</span></p>\n<p>利用率越高，当前时延越大（堵车）。</p>\n<blockquote>\n<p>码元</p>\n</blockquote>\n<p>用来表示码的单个元。类比信号，码就是波形，码元就是在发送和解读波形时，可以分辨的最小单位波形。码元种类数是信号的状态数\n<span class=\"math inline\">\\(n = 2^x\\)</span></p>\n<ul>\n<li>码元对应的比特数 <span class=\"math inline\">\\(x =\n\\log_2(n)\\)</span></li>\n<li> 当 <span class=\"math inline\">\\(0 &lt; x &lt;\n1\\)</span> 时，一个比特由多个码元表示</li>\n</ul>\n<blockquote>\n<p>比特率和波特</p>\n</blockquote>\n<p><span class=\"math inline\">\\(\\mathrm{bit/s} = 2Wx =\n2W\\log_2(n)\\)</span></p>\n<p>符号速率（码元每秒）也叫波特 Baud</p>\n<blockquote>\n<p>奈奎斯特准则</p>\n</blockquote>\n<p>无噪声低通信道中，保证接收方接收符号不出错时的速率上限为 2W x\n码元数，W 为频域带宽 Hz，单位为波特。</p>\n<blockquote>\n<p>香农公式</p>\n</blockquote>\n<p>速率是有极限的，但要信息传输速率低于极限速率，就一定能找到某种方法实现无差错的传输。</p>\n<p>香农 — 哈特莱容量定理，考虑到了信道有噪声：</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n信道极限速率 &amp; = \\mathrm {bit/s = Hz \\times bit} \\\\\n&amp; = W \\log_2 (1 + \\dfrac {S}{N}) \\\\\n\\end {aligned}\n\\]</span></p>\n<blockquote>\n<p>正交振幅调制（QAM）</p>\n</blockquote>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n调制后的信号 &amp; = 振幅 \\times 载波 (相位) \\\\\ny &amp; = A\\sin (\\omega x + \\phi) \\\\\n\\end {aligned}\n\\]</span></p>\n<p>用不同的<strong>振幅</strong>和<strong>相位</strong>排列组合，来表示（承载）不同的基带信号，比只调幅 / 只调频 / 只调相的信息密度高。</p>\n<p>使用 <span class=\"math inline\">\\(x\\)</span> 个振幅和 <span class=\"math inline\">\\(y\\)</span> 个相位的 QAM 时，一个码元对应的比特数是\n<span class=\"math inline\">\\(\\log _2(xy)\\)</span> 向上取整。</p>\n<blockquote>\n<p>信道复用</p>\n</blockquote>\n<p>频分复用（FDM）：Frequency Division\nMultiplexing，把一个大频带划分成若干个小频带，把不同的信号分别调制到这些小频带里。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|C信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|B信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|A信号</span><br><span class=\"line\">|-----------------</span><br><span class=\"line\">|</span><br><span class=\"line\">|-----------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>时分复用（TDM）：把时间分割成一个个 TDM\n帧，每帧内分为若干个时隙，每个时隙内分别传送不同的信号。相当于 CPU\n单核进程并发。每个 TDM\n帧内保证每组信号都传了，就是没传也要保留留给它的空时隙。这造成信道利用率不高。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|A|B|C|A|B|C| |B|C|A| |C|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|     |     |     |     |</span><br><span class=\"line\">|TDM帧|TDM帧|TDM帧|TDM帧|</span><br><span class=\"line\">|------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>统计时分复用（STDM）：在每个 STDM\n帧内，时隙数量小于信号种类数量。为每组信号动态分配时隙，比如 B\n信号断了可以先不传它。</p>\n<p><strong>有四组信号 ABCD：</strong></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> ^信号</span><br><span class=\"line\"> |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">D| d | d | d | d |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">C|   | c | c | c |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">B| b | b |   |   |</span><br><span class=\"line\"> |--------------------------</span><br><span class=\"line\">A| a |   | a | a |</span><br><span class=\"line\"> |------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p><strong>STDM：</strong></p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">^频率</span><br><span class=\"line\">|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|a|b|d|b|c|d|a|d|c|c|d|a|</span><br><span class=\"line\">|--------------------------</span><br><span class=\"line\">|     |     |     |     |</span><br><span class=\"line\">|STDMf|STDMf|STDMf|STDMf|</span><br><span class=\"line\">|------------------------------&gt;时间</span><br></pre></td></tr></tbody></table></figure>\n<p>波分复用（WDM）：就是光的频分复用，但是用波长表示。</p>\n<p>码分复用（CDM）：CDMA\n通过为每个用户分配一个独特的扩频码来实现信号的分离，这些扩频码之间是正交的。</p>\n<ul>\n<li>编码：某用户的码元内积扩频码，与其他用户的叠加成混合信号。</li>\n<li>解码：混合信号内积用户的扩频码，得到一个码元。</li>\n</ul>\n<h2 id=\"计算机组成原理\">计算机组成原理</h2>\n<p>注意：这里的知识是未经验证的，不一定正确。</p>\n<h3 id=\"计算机体系概论\">计算机体系概论</h3>\n<blockquote>\n<p>“存储程序” 特点？</p>\n</blockquote>\n<p>早期计算机通过硬件开关或打孔纸带输入程序，程序和数据是分离的。老冯提出了把毒和鸡汤存储在一起的思想：把程序和数据存在一起，存在存储器里。</p>\n<blockquote>\n<p>计算机的五个子系统？</p>\n</blockquote>\n<p>我们为什么要造计算机，要算个什么东西。所以输入、输出、算术逻辑运算肯定是有的。怎么算，你在草稿纸上算题，得有你这个人控制，得有中间结果。所以控制和存储是有的。</p>\n<blockquote>\n<p>主机？</p>\n</blockquote>\n<p>主机就是你引脚直接装在主板上的东西，粗略地理解为 CPU +\n内存。显示器和鼠标键盘属于输入输出系统，用线连在机箱外面。剩下三个系统就是主机：控制单元和算术逻辑单元\nALU 合称中央处理单元\nCPU；存储系统包括硬盘、内存、cache、寄存器，这四个是体积越小、容量越小、价格越贵。但是：硬盘不属于主存，不算在主机里面，它和输入输出系统合称外部设备，即 “用户与计算机通信的界面”。</p>\n<blockquote>\n<p>ALU？</p>\n</blockquote>\n<p>即算术逻辑单元 Arithmetic and Logic Unit</p>\n<blockquote>\n<p>指令和数据？</p>\n</blockquote>\n<p>指令和数据都是二进制的，在形式上无法区分，由控制器判断谁是指令，谁是数据。判断的依据是：当前处于哪个访问阶段，是处于取指周期还是执行周期。当程序被启动执行后，其指令和数据从外存被装进内存。</p>\n<blockquote>\n<p>取指执行过程？</p>\n</blockquote>\n<p>你上司给你发了一张纸，这张纸就是内存。纸上写了一些暗号：午时三刻，当街问斩。这个暗号就是指令，问斩是操作码，当街是地址码。你收到这张纸后，把指令从纸上取到你脑子缓冲区里，你脑子缓冲区就是指令寄存器，你至少得反应一会，这个反应的过程就是译码，</p>\n<blockquote>\n<p>K？</p>\n</blockquote>\n<p>按具体上下文，单独一个 K 可指 KB，即 2 的 10 次方个字节（Byte）</p>\n<blockquote>\n<p>汇编语言？</p>\n</blockquote>\n<p>汇编语言与具体的机器结构（指令集架构）有关，其源程序不能直接在机器上执行，还得过一道汇编器。</p>\n<blockquote>\n<p>机器语言？</p>\n</blockquote>\n<p>计算机硬件可以直接执行的是机器语言程序，一系列 0 和\n1。不是硬件描述语言，硬件描述语言是写电路的，用这种语言描述电路结构。汇编语言还要过一遍汇编器。</p>\n<blockquote>\n<p>机器字长？</p>\n</blockquote>\n<p>机器字长是二进制的位数，是 ALU\n和通用寄存器的宽度。指令寄存器和浮点寄存器的宽度可能与其不等。</p>\n<blockquote>\n<p>面向量纲 / 单位计算？</p>\n</blockquote>\n<p>CPI 的单位是：个 (时钟周期) 每个 (指令)</p>\n<p>时钟周期的量纲是：时间。这一个时钟周期有它的具体时间长度。</p>\n<p>主频的量纲是：频率，时间的倒数。一秒钟被分割成了有多少个时钟周期。</p>\n<p>MIPS 的单位是：(百万) 个 (指令) 每个 (秒)</p>\n<p>这里的 M 是 10 的 6 次方，主频里的 G 是 10 的 9 次方，往上指数 + 3 为 T\nP E B</p>\n<p>做计算题，先搞明白指令总数、时钟周期总数。指令总数乘上 CPI\n等于时钟周期总数。时间就是时钟周期总数乘上每个时钟周期所占的时间长度。</p>\n<p>在纸上画图：一个秒被切割成了一系列时钟周期，每个时钟周期执行一条指令。直接设未知数，列方程。</p>\n<h3 id=\"运算方法和运算器\">运算方法和运算器</h3>\n<p>幺二八六四 三二幺六 八四二幺 五二五幺二五 零六二五</p>\n<p>在发草稿纸之后，直接把 0 到 F\n全写下来（想当年笔者可以把元素周期表画下来（除了镧系和锕系），包括一直到气奥的各个元素名、绝大部分元素符号以及常见的相对原子质量，还有\n38324 14122 横批 4546 之类的。但是现在不行了。还有 2^31 - 1 =\n2147483647，这是四字节 int\n类型的最大值，这个数字最早在《植物大战僵尸》的修改器里见到，如果你无尽模式或者自选关过了这一波，它的程序会崩掉）</p>\n<blockquote>\n<p>原码反码补码移码？</p>\n</blockquote>\n<p>正整数的原码反码补码都是它的二进制按照某一个特定的位数表示，前面补零。</p>\n<p>负整数的原码，最高位为符号位\n1，后面为它的二进制形式按照某一个特定的位数表示，前面补零。</p>\n<p>负整数的反码，为原码除符号位的所有位按位取反后的结果。</p>\n<p>负整数的补码，为其反码 + 1，按位截断。</p>\n<p>移码 = 【真值 + （最高位所代表的 2 的次方值 -\n1）】的无符号整数表示</p>\n<p>如八位下 5 的移码是 <code>5 + 2^(8-1)</code> = <code>5 + 127</code> =\n<code>4 + 128</code> = <code>1000 0100</code></p>\n<blockquote>\n<p>八位下，零的表示形式？</p>\n</blockquote>\n<p>正零的原码：00000000</p>\n<p>负零的原码：10000000</p>\n<p>正零的反码：00000000</p>\n<p>负零的反码：11111111</p>\n<p>正零 / 负零的补码：00000000</p>\n<blockquote>\n<p>-26？</p>\n</blockquote>\n<p>26 = 16 + 8 + 2</p>\n<p>= 10000 + 1000 + 10</p>\n<p>= 00011010</p>\n<p>-26 = 10011010（原）= 11100101（反）= 11100110（补）= E6H</p>\n<blockquote>\n<p>BCD 码？</p>\n</blockquote>\n<p>用二进制编码的十进制数 (Binary-Coded Decimal)。对于 8421\n码，是把十进制数的每一个位转换成一个四位的二进制数。</p>\n<p>如 (1145)_10 = (0001 0001 0100 0101)_BCD</p>\n<blockquote>\n<p>进制转换？</p>\n</blockquote>\n<p>分向十进制转、从十进制向外转、二八十六互转。</p>\n<p>向十进制转：各个位的十进制值乘上以原进制为底、该位与小数点的相对位置为指数的幂，再相加。其中小数点左边一位的相对位置为零，小数点右边一位的相对位置为负一，以此类推。</p>\n<p>从十进制向外转：除 k 取余法 + 乘 k\n取整法。整数部分用短除法列竖式，用新进制的基数去除，除到商为零为止，之前的所有余数从下向上排列为新数的整数部分；小数部分乘上新进制的基数，取积的整数部分为新数的小数部分，积的小数部分继续与基数乘，直到积的小数部分为零或者出现循环节为止。</p>\n<p>对于一个 1000 以内的十进制数转成二进制，除 k\n取余法还是太教科书了，你可以直接把它拆分成 2\n的幂相加，因为加减法不容易出错。</p>\n<p>二八十六互转：四位二进制位与一位十六进制位在 [0,16) 这个整数范围内一一对应。小数点前后的部分直接按片段替换。三位二进制位与一位八进制位在 [0,8) 这个整数范围内一一对应。小数点前后的部分直接按片段替换。八与十六互转时，以二作为桥梁。</p>\n<blockquote>\n<p>浮点数的编码方式？</p>\n</blockquote>\n<p>对于 32 位浮点数 float，即单精度浮点数，最高位为符号位，后 8\n位为阶码，再后 23 位为尾数。</p>\n<p>阶码决定范围，尾数决定精度。</p>\n<p>浮点数转真值：把 1. 与 23\n位尾数缝合起来，转成十进制；把阶码作为移码求真值，作为 2\n的指数；两者相乘，带上符号位。</p>\n<p>普通数转浮点数：把<strong>绝对值</strong>先转成二进制，小数点挪到第一个\n1 的后面，为符号 (1.xxx) 乘 2^ 指数；符号放最高位；指数转为移码放后 8\n位；小数点后的部分取 “0 舍 1 入” 的 23 位。</p>\n<p>（意思就是：1.7 和 -1.7 只差一个符号位）</p>\n<p>对于 64 位双精度浮点数 double：阶码变成了 11 位</p>\n<blockquote>\n<p>float 的五种形式？</p>\n</blockquote>\n<p>32\n位二进制浮点数，她的位数是有限的，不可能双射无限多（阿列夫一）的（实）数。</p>\n<ul>\n<li>阶码全零，尾数全零：正 / 负机器零</li>\n<li>阶码全零，尾数不全零：非规格化数</li>\n<li>阶码全 1，尾数全零：正 / 负无穷大</li>\n<li>阶码全 1，尾数不全零：不是数（NaN）</li>\n</ul>\n<p>她的阶码有 8\n位，当不是全零或全一时，我们称她为规格化的。把阶码移码的身份转回正经数后，指数范围为 [-126,+127]，不考虑尾数，对应真值约\n2^(-126) 到 2^127，又约 10^(-38) 到 10^38。</p>\n<p>浮点数原码运算时，判定结果为规格化数的条件是：尾数的最高位为 1</p>\n<blockquote>\n<p>奇偶校验？</p>\n</blockquote>\n<p>看 1 的个数</p>\n<blockquote>\n<p>串行运算器？</p>\n</blockquote>\n<p>从低位到高位逐位运算</p>\n<blockquote>\n<p>加法器采用先行进位的目的？</p>\n</blockquote>\n<p>加速传递进位信号（没明白）</p>\n<blockquote>\n<p>采用双符号位的定点补码运算器，何时结果溢出？</p>\n</blockquote>\n<p>双符号位不同（没明白）</p>\n<h3 id=\"存储系统\">存储系统</h3>\n<blockquote>\n<p>存取周期？</p>\n</blockquote>\n<p>存储器进行连续读和写操作所允许的最短时间间隔（没明白）</p>\n<blockquote>\n<p>存储器采用分级存储的目的？</p>\n</blockquote>\n<p>钱、容量、速度三者不能兼得。</p>\n<blockquote>\n<p>寻址范围？</p>\n</blockquote>\n<ol type=\"1\">\n<li>内存能存储多少位二进制数</li>\n<li>多少位二进制数作为一个地址</li>\n<li>两者相除，结果无单位</li>\n</ol>\n<blockquote>\n<p>已被淘汰的存储器？</p>\n</blockquote>\n<p>磁芯存储器</p>\n<blockquote>\n<p>主存？</p>\n</blockquote>\n<p>主存由 RAM (Random Access Memory，随机存取存储器) 和\nROM (只读存储器，Read-Only\nMemory) 组成。同一个存储器里，每个存储单元宽度相同</p>\n<blockquote>\n<p>PROM? EPROM?</p>\n</blockquote>\n<p>前者是可编程 (P) 的 ROM，后者是可擦除的 PROM。</p>\n<p>PROM 不一定可被改写。EPROM 可被改写多次，但不能作 RAM</p>\n<p>U 盘、TF 卡属于闪存，闪存属于 EPROM</p>\n<blockquote>\n<p>SRAM? DRAM?</p>\n</blockquote>\n<p>一静一动，一快一慢。</p>\n<p>前者用于 CPU 缓存。后者用于主存、需要定时刷新、行列地址引脚复用 (RAS\n行地址选通信号引脚、CAS 列地址选通信号引脚)</p>\n<blockquote>\n<p>磁盘和磁带？</p>\n</blockquote>\n<p>存取时间与存取单元的物理位置有关。磁带串行存取，磁盘部分串行存取。</p>\n<blockquote>\n<p>存储芯片的地址线数据线？</p>\n</blockquote>\n<p>存储容量 = 地址数 * 位宽</p>\n<p>数据线或引脚数目 = 位宽</p>\n<p>SRAM 地址线或引脚数目 = log_2 (地址数)，与位宽无关</p>\n<p>DRAM 地址线或引脚数目 = 0.5log_2 (地址数)，与位宽无关</p>\n<blockquote>\n<p>MAR? MDR?</p>\n</blockquote>\n<p>存储器地址寄存器、存储器数据寄存器</p>\n<p>MAR 宽度 = log_2 (地址数)</p>\n<p>MDR 宽度至少为每次读写操作最多存取的位数</p>\n<blockquote>\n<p>某一 RAM 芯片其容量是 512*8\n位，除电源和接地端外该芯片引线的最少数目是多少？</p>\n</blockquote>\n<p>数据线 8 + 地址线 log2 (512)+ 片选线 1 + 读写线 1=19</p>\n<blockquote>\n<p>双端口存储器？</p>\n</blockquote>\n<p>左右端口地址码相同时，发生读写冲突</p>\n<blockquote>\n<p>多体交叉存储器解决的问题？</p>\n</blockquote>\n<p>提高主存的数据传输率</p>\n<blockquote>\n<p>cache 的功能全部由谁实现？</p>\n</blockquote>\n<p>硬件</p>\n<blockquote>\n<p>与 cache 命中率无关的是？</p>\n</blockquote>\n<p>主存的存取时间</p>\n<blockquote>\n<p>cache 的地址映射？</p>\n</blockquote>\n<p>主存 到 cache</p>\n<p>多对一：直接映射</p>\n<p>多对多：全相联映射</p>\n<p>组相联映射：</p>\n<ol type=\"1\">\n<li>把主存和 cache 都分为若干组</li>\n<li>对于主存的某一组，其块数 = cache 组数。其所有块分配给 cache\n的各个组，对于每一块，其被分到的 cache 组固定、不一定分配到 cache\n组的哪一行</li>\n</ol>\n<blockquote>\n<p>某计算机的 Cache 共有 16 行，采用 2 路 - 组相联映射方式 (即每组包括 2\n行)。存储器按字节编址，每个主存块大小为 32 字节。主存 135\n号单元所在主存块应装入的 cache 组号？</p>\n</blockquote>\n<p>简记： cache 组号 = 主存单元号 // 主存块字节数 % cache 组数</p>\n<p>cache 分 8 组，每组两行。则主存分若干组，每组 8 块。</p>\n<p>cache 组号 = 主存块号 % 主存每组块数</p>\n<p>= 单元号 // 字节数 % 主存每组块数</p>\n<p>= 135 // 32 % 8</p>\n<p>= 4</p>\n<p>简记是什么意思？因为笔者写出来的东西都是笔者不会的，至少是在写出来之前的那一段时间是不会的，如果笔者在写出来之后会了，那么就不会使用 “简记” 这两个字了。简记的意思是：我对这个知识点没搞明白，也不想搞明白，所以按感性提了一个公式出来，这个公式根本记不住，没有内化到自身。“简记” 在笔者的潜意识里有两层麻痹自我的意思：简的意思是：我没搞懂；记的意思是：我记不住。</p>\n<blockquote>\n<p>cache？</p>\n</blockquote>\n<p>cache 是易失型存储器。当程序具有较好的访问局部性时，能更好地发挥\ncache 的作用。</p>\n<blockquote>\n<p>闪速存储器？</p>\n</blockquote>\n<p>闪速存储器是一种高密度，非易失的读 / 写半导体存储器</p>\n<blockquote>\n<p>下列 cache 替换算法中，速度最快的是？命中率最高的是？LFU LRU\n随机替换</p>\n</blockquote>\n<p>随机替换 LRU</p>\n<h3 id=\"指令系统\">指令系统</h3>\n<blockquote>\n<p>程序控制类指令的功能？</p>\n</blockquote>\n<p>改变程序执行的顺序</p>\n<blockquote>\n<p>RISC？</p>\n</blockquote>\n<p>指令长度固定，减少指令数，增加寄存器数</p>\n<blockquote>\n<p>一地址格式的指令？</p>\n</blockquote>\n<p>一地址格式的算术运算指令，另一个操作数隐含在累加器里</p>\n<p>一地址格式的指令，可能有一个操作数，也可能有两个操作数</p>\n<blockquote>\n<p>怎么区分寄存器中的值是地址还是数据？</p>\n</blockquote>\n<p>指令操作码或寻址方式位</p>\n<blockquote>\n<p>一条指令中，操作数的寻址方式？</p>\n</blockquote>\n<p>看指令地址码是什么：</p>\n<ul>\n<li>操作数所在的存储单元：寄存器间接寻址</li>\n<li>操作数所在的存储单元地址：直接寻址</li>\n<li>操作数所在的寄存器编号：寄存器直接寻址</li>\n<li>操作数本身：立即寻址</li>\n</ul>\n<h3 id=\"cpu-性能指标\">CPU 性能指标</h3>\n<p><span class=\"math inline\">\\(T\\)</span>\n时钟周期：计算机中最短的时间。类比：一面有秒针的钟，最短时间为 1\n秒。类比：普朗克时间。类比：“一周” 的 “最短时间” 为 “天”</p>\n<p><span class=\"math inline\">\\(f\\)</span>\n主频 / 时钟频率：一秒钟之内，包含多少个时钟周期。对于一个可以精确到 0.01\n秒的秒表，其 “主频” 为 100Hz</p>\n<p><span class=\"math inline\">\\(N_\\mathrm{C}\\)</span>\n时钟周期数：天数、Num of Cycle</p>\n<p><span class=\"math inline\">\\(I_\\mathrm{N}\\)</span>\n指令数：任务数、Instruction Num</p>\n<p><span class=\"math inline\">\\(\\mathrm{CPI}\\)</span> (Cycle Per\nInstruction)：每条指令平均时钟周期数。完成每个任务的平均天数。你的时钟周期为 “天”，有\n100 个任务 (指令) 要完成，完成它们共花了 200 天。你的 CPI 为 2 天 / 任务</p>\n<p><span class=\"math inline\">\\(\\mathrm{CPI} \\times I_\\mathrm{N} =\nN_\\mathrm{C}\\)</span></p>\n<p><span class=\"math inline\">\\(\\mathrm{MIPS}\\)</span>：百万条指令数 / 秒</p>\n<p><span class=\"math inline\">\\(\\mathrm{FLOPS}\\)</span>：浮点操作数 / 秒</p>\n<p><span class=\"math inline\">\\(t_\\mathrm{CPU}\\)</span>\n执行时间：执行一段程序 (若干条指令) 所花费时间。</p>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n= &amp; 指令数 \\times \\mathrm {CPI} \\times  时钟周期 \\\\\n= &amp; 任务数 \\times 每个任务所花天数 \\times 一天有多少秒 \\\\\n= &amp; 执行该程序所经过时钟周期数 \\times 时钟周期 \\\\\n= &amp; 花了多少天 \\times 一天有多少秒 \\\\\n\\end {aligned}\n\\]</span></p>\n<h3 id=\"使用一个字节记录整数\">使用一个字节记录整数</h3>\n<p>计算机存储的数据由一系列 <code>0</code> 和 <code>1</code> 表示，每个\n<code>0</code> 或 <code>1</code>\n称为一个二进制位，八个二进制位组成一个字节。一个字节的范围：</p>\n<p><code>0000 0000 - 1111 1111</code></p>\n<p>使用一个字节，可以表示多少种状态？对每一位来说，只有两种可能的状态：<code>0</code>\n或 <code>1</code>。一共有八个不同的位，所以可以表示 <span class=\"math inline\">\\(2^8=256\\)</span> 种状态。</p>\n<p>把 <code>0000 0000 - 1111 1111</code> 转换为十进制数是 <span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(255\\)</span>，有 <span class=\"math inline\">\\(256\\)</span> 个数。它当然可以通过进制转换，表示\n<span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(255\\)</span> 的整数（也可以叫 “无符号整数”）。</p>\n<p>我们想表示负数，可以这样规定：只把后面七个二进制位转换成十进制，而用第一个二进制位表示符号（其中\n<code>0</code> 表示正号，<code>1</code> 表示负号），即：</p>\n<ul>\n<li><code>0 0000000 - 0 1111111</code> 表示 <span class=\"math inline\">\\(+0\\)</span> 到 <span class=\"math inline\">\\(+127\\)</span></li>\n<li><code>1 0000000 - 1 1111111</code> 表示 <span class=\"math inline\">\\(-0\\)</span> 到 <span class=\"math inline\">\\(-127\\)</span></li>\n</ul>\n<p>这被称为<strong>原码</strong>表示法。</p>\n<p>我们想用原码计算 <span class=\"math inline\">\\(4 - 7\\)</span>，即 <span class=\"math inline\">\\(4 + (-7)\\)</span>：</p>\n<ul>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(-\\)</span>\n<code>0000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code>，可以看到，结果不是 <span class=\"math inline\">\\(-3\\)</span></li>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(+\\)</span>\n<code>1000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1000 1011</code>，可以看到，结果不是 <span class=\"math inline\">\\(-3\\)</span></li>\n</ul>\n<p>因为有符号位干扰，但我们想<strong>让符号位也参与计算</strong>的同时，加和减的结果相同且满足定义。还是用符号位表示正负，后七个位表示绝对值。</p>\n<p>有一台钟（12 个数字的）慢了 3 小时，此时 <code>+3</code> 和\n<code>-9</code> 是等价的。它的 “循环周期” 是 <code>12</code></p>\n<p>用后七个位表示绝对值，“循环周期” 就是\n<code>128</code>。此时，<code>-7</code> 和 <code>+121</code> 等价</p>\n<p>采用<strong>补码</strong>表示法：</p>\n<ul>\n<li><code>0 0000000 - 0 1111111</code> 表示 <span class=\"math inline\">\\(0\\)</span> 到 <span class=\"math inline\">\\(127\\)</span></li>\n<li><code>1 0000000 - 1 1111111</code> 表示 <span class=\"math inline\">\\(-128\\)</span> 到 <span class=\"math inline\">\\(-1\\)</span></li>\n</ul>\n<p>此时计算 <span class=\"math inline\">\\(4 - 7\\)</span>：</p>\n<ul>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(-\\)</span>\n<code>0000 0111</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code></li>\n<li><code>0000 0100</code> <span class=\"math inline\">\\(+\\)</span>\n<code>1111 1001</code> <span class=\"math inline\">\\(=\\)</span>\n<code>1111 1101</code></li>\n</ul>\n<p>可以看到：</p>\n<ul>\n<li>正数的补码与原码相同</li>\n<li>负数的补码：\n<ul>\n<li>总是以 “全 <span class=\"math inline\">\\(1\\)</span>” 来表示 <span class=\"math inline\">\\(-1\\)</span>，然后依次往前推</li>\n<li>原码按位取反（除了符号位）后再加一</li>\n<li>原码从右往左第一个 <span class=\"math inline\">\\(1\\)</span>\n之前的位（除了符号位）按位取反</li>\n</ul></li>\n</ul>\n<h3 id=\"逐位进位加法器的实现\">逐位进位加法器的实现</h3>\n<ol type=\"1\">\n<li>用两个非门、两个与门、一个或门实现异或门 </li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">xor_gate</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (a <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> b) <span class=\"keyword\">or</span> (<span class=\"keyword\">not</span> a <span class=\"keyword\">and</span> b)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> xor <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> = <span class=\"subst\">{<span class=\"built_in\">int</span>(xor_gate(a,b))}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>用一个异或门、一个与门实现半加器</li>\n</ol>\n<p>两个一位的二进制数相加，和一位，进一位：</p>\n<ul>\n<li>0 + 0 和 0 进 0</li>\n<li>0 + 1 和 1 进 0</li>\n<li>1 + 0 和 1 进 0</li>\n<li>1 + 1 和 0 进 1</li>\n</ul>\n<p>和的位由异或得来，进的位由与得来：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">half_adder</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    sum_ = xor_gate(a, b)</span><br><span class=\"line\">    carry = a <span class=\"keyword\">and</span> b</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum_, carry</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        s, c = half_adder(a, b)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> 进 <span class=\"subst\">{<span class=\"built_in\">int</span>(c)}</span> 和 <span class=\"subst\">{<span class=\"built_in\">int</span>(s)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"3\" type=\"1\">\n<li>用两个半加器、一个或门实现全加器</li>\n</ol>\n<p>两个本位的数相加后，再加上低位进的位。和一位，进一位：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">full_adder</span>(<span class=\"params\">a: <span class=\"built_in\">bool</span>, b: <span class=\"built_in\">bool</span>, carry_in: <span class=\"built_in\">bool</span></span>):</span><br><span class=\"line\">    s1, c1 = half_adder(a, b)</span><br><span class=\"line\">    s2, c2 = half_adder(s1, carry_in)</span><br><span class=\"line\">    carry_out = c1 <span class=\"keyword\">or</span> c2</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s2, carry_out</span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> truth:</span><br><span class=\"line\">            s, c_out = full_adder(a, b, c)</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(a)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(b)}</span> + <span class=\"subst\">{<span class=\"built_in\">int</span>(c)}</span> 进 <span class=\"subst\">{<span class=\"built_in\">int</span>(c_out)}</span> 和 <span class=\"subst\">{<span class=\"built_in\">int</span>(s)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"4\" type=\"1\">\n<li>四个全加器串联实现四位加法器 </li>\n</ol>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> product</span><br><span class=\"line\"></span><br><span class=\"line\">truth = (<span class=\"literal\">True</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\">numbers = <span class=\"built_in\">tuple</span>(product(truth, repeat=<span class=\"number\">4</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">adder</span>(<span class=\"params\">a: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>], b: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>, <span class=\"built_in\">bool</span>]</span>):</span><br><span class=\"line\">    s1, c1 = full_adder(a[-<span class=\"number\">1</span>], b[-<span class=\"number\">1</span>], <span class=\"literal\">False</span>)</span><br><span class=\"line\">    s2, c2 = full_adder(a[-<span class=\"number\">2</span>], b[-<span class=\"number\">2</span>], c1)</span><br><span class=\"line\">    s3, c3 = full_adder(a[-<span class=\"number\">3</span>], b[-<span class=\"number\">3</span>], c2)</span><br><span class=\"line\">    s4, c4 = full_adder(a[-<span class=\"number\">4</span>], b[-<span class=\"number\">4</span>], c3)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c4, s4, s3, s2, s1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">to_number</span>(<span class=\"params\">a: <span class=\"built_in\">tuple</span>[<span class=\"built_in\">bool</span>, ...]</span>):</span><br><span class=\"line\">    binary_string = <span class=\"string\">\"\"</span>.join(<span class=\"built_in\">str</span>(<span class=\"built_in\">int</span>(elem)) <span class=\"keyword\">for</span> elem <span class=\"keyword\">in</span> a)</span><br><span class=\"line\">    decimal_number = <span class=\"built_in\">int</span>(binary_string, <span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> decimal_number</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> a <span class=\"keyword\">in</span> numbers:</span><br><span class=\"line\">    <span class=\"keyword\">for</span> b <span class=\"keyword\">in</span> numbers:</span><br><span class=\"line\">        result = adder(a, b)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{to_number(a)}</span> + <span class=\"subst\">{to_number(b)}</span> = <span class=\"subst\">{to_number(result)}</span>\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"普通十进制数转单精度浮点数\">普通十进制数转单精度浮点数</h3>\n<p>交叉引用<a href=\"#运算方法和运算器\">运算方法和运算器</a></p>\n<ul>\n<li>在 IEEE 754 标准下</li>\n</ul>\n<p>单精度浮点数，即 32 位二进制浮点数，包含：</p>\n<p>一位符号位 + 八位指数位 + 二十三位尾数位</p>\n<p>下面的例子中，没有带尾缀的都是十进制，带尾缀 <span class=\"math inline\">\\(\\mathrm{B}\\)</span> 的是二进制</p>\n<blockquote>\n<p>例一：以 <span class=\"math inline\">\\(0.1\\)</span> 为例</p>\n</blockquote>\n<ol type=\"1\">\n<li><p>把十进制转换为二进制 <span class=\"math inline\">\\(0.1 =\n0.0\\dot{0}01\\dot{1}... \\mathrm{B}\\)</span></p></li>\n<li><p> 用以 <span class=\"math inline\">\\(2\\)</span>\n为基数的科学计数法表示，并保证【尾数的小数点前是 <span class=\"math inline\">\\(1 \\mathrm{B}\\)</span>】 <span class=\"math inline\">\\(= 1.\\dot{1}00\\dot{1}...\\mathrm{B} \\times\n(2^{-4})\\)</span> 可以看到指数是 <span class=\"math inline\">\\(-4\\)</span></p></li>\n<li><p> 计算指数位（又叫阶码），用指数加上偏移量 <span class=\"math inline\">\\((2^{e-1}-1)\\)</span></p>\n<p>这里 <span class=\"math inline\">\\(e\\)</span>\n等于【用于表示指数位的位数】 <span class=\"math inline\">\\(8\\)</span>，所以偏移量为 <span class=\"math inline\">\\(127\\)</span></p>\n<p>则阶码为 <span class=\"math inline\">\\(-4 + 127 = 123\\)</span></p>\n<p>阶码的二进制为 <code>0111 1011</code>，注意\n<em>阶码为无符号整数</em></p></li>\n<li><p>取科学计数法的【小数点后二十三位】作为【尾数位】，因为是无限的，所以要舍去一部分</p>\n<p>它的前二十位是：<code>1001 1001 1001 1001 1001</code></p>\n<p>二十一至二十八位是：<code>1001 1001</code></p>\n<p>所以二十一至二十三位，要么取 <code>100</code>，要么取\n<code>101</code>。</p>\n<p>第二十四位是 <code>1</code>，0 舍 1 入，所以取\n<code>101</code></p></li>\n<li><p>把符号位连同阶码、尾数位缝合起来</p>\n<p><code>0 | 0111 1011 | 1001 1001 1001 1001 1001 101</code></p></li>\n</ol>\n<blockquote>\n<p>例二：以 <span class=\"math inline\">\\(-12 = 1.5 \\times\n(2^{3})\\)</span> 为例：</p>\n</blockquote>\n<ol type=\"1\">\n<li><p>把十进制转换为二进制</p>\n<p><span class=\"math inline\">\\(12  = 1100 \\mathrm{B}\\)</span></p></li>\n<li><p> 用以 <span class=\"math inline\">\\(2\\)</span>\n为基数的科学计数法表示，并保证【尾数的小数点前是 <span class=\"math inline\">\\(1\\)</span>】</p>\n<p><span class=\"math inline\">\\(= 1.1\\mathrm{B} \\times (2^3)\\)</span></p>\n<p>可以看到指数是 <span class=\"math inline\">\\(3\\)</span></p></li>\n<li><p> 计算指数位（又叫阶码），用指数加上偏移量 <span class=\"math inline\">\\((2^{e-1}-1)\\)</span></p>\n<p>这里 <span class=\"math inline\">\\(e\\)</span>\n等于【用于表示指数位的位数】 <span class=\"math inline\">\\(8\\)</span>，所以偏移量为 <span class=\"math inline\">\\(127\\)</span></p>\n<p>则阶码为 <span class=\"math inline\">\\(3 + 127 = 130\\)</span></p>\n<p>阶码的二进制为 <code>1000 0010</code>，注意\n<em>阶码为无符号整数</em></p></li>\n<li><p>取科学计数法的【小数点后二十三位】作为【尾数位】，因为是有限的，所以后面直接补零</p>\n<p>小数点后二十三位是：<code>1000 0000 0000 0000 000</code></p></li>\n<li><p>把符号位连同阶码、尾数位缝合起来</p>\n<p><code>1 | 1000 0010 | 1000 0000 0000 0000 000</code></p></li>\n</ol>\n<p>如何验证：</p>\n<ul>\n<li><a href=\"https://baseconvert.com/ieee-754-floating-point\">在线转换</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/IEEE_754\">Wikipedia</a> | <a href=\"https://zh.wikipedia.org/wiki/IEEE_754\">维基百科</a></li>\n<li>获取国际标准文件。IEEE 754 标准是电气与电子工程师协会（Institute of\nElectrical and Electronics\nEngineers）制定的关于浮点数表示和运算的标准。最新标准是 <a href=\"https://standards.ieee.org/ieee/754/6210/\">IEEE\n754-2019</a>，对应国际标准 <a href=\"https://www.iso.org/cms/%20render/live/en/sites/isoorg/contents/data/standard/08/09/80985.html\">ISO/IEC\n60559:2020</a>，预计下一次在 2028 年修订。http://snti.ru/\n这个网站分享了各种国际标准文件的磁力链接，但是可以免费下载的不全，IEC\n的只有 61xxx。据说可以给站长发邮件要\n<code>popov_al@perm.ru</code>，每个文件一刀乐。在 ISO 官网上下载需要 187\n瑞士法郎，合 1000 多人民币。</li>\n</ul>\n<p>用 GDB：</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"type\">float</span> num = <span class=\"number\">1.7</span>;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>在第六行打上断点，VSCode 开调试，在调试控制台里：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"built_in\">exec</span> x/4tb &amp;num</span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li><code>-exec</code> 执行命令</li>\n<li><code>x</code> 查看内存</li>\n<li><code>4</code> 输出 4 个单元\n<ul>\n<li>不写默认为 <code>1</code></li>\n</ul></li>\n<li><code>t</code> 以二进制形式输出\n<ul>\n<li><code>x</code> 十六进制</li>\n</ul></li>\n<li><code>b</code> 以【一个字节】为一个单元\n<ul>\n<li><code>h</code> 两个字节</li>\n<li><code>w</code> 四个字节</li>\n<li><code>g</code> 八个字节</li>\n</ul></li>\n<li><code>&amp;</code> 取变量地址</li>\n</ul>\n<p>输出结果：</p>\n<p><code>0x61fe1c: 10011010 10011001 11011001 00111111</code></p>\n<p>从右往左排列后：</p>\n<p><code>00111111 11011001 10011001 10011010</code></p>\n<p><code>0 01111111 10110011001100110011010</code></p>\n<p>才是 <code>float 1.7</code> 的二进制表示。</p>\n<p>还可以直接用</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-<span class=\"built_in\">exec</span> x/tw &amp;num</span><br></pre></td></tr></tbody></table></figure>\n<p>输出四个字节，结果：</p>\n<p><code>0x61fe1c: 00111111110110011001100110011010</code></p>\n<h2 id=\"vue-实现点击-echarts-图表的一部分后更新另一个图表\">Vue 实现点击\nEcharts 图表的一部分后更新另一个图表</h2>\n<p>环境：</p>\n<figure class=\"highlight json\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">{</span></span><br><span class=\"line\">  <span class=\"attr\">\"echarts\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^5.5.1\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"vue\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^3.5.12\"</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">\"vue-echarts\"</span><span class=\"punctuation\">:</span> <span class=\"string\">\"^7.0.3\"</span></span><br><span class=\"line\"><span class=\"punctuation\">}</span></span><br></pre></td></tr></tbody></table></figure>\n<p><a href=\"https://vue-echarts.dev/#codegen\">import code\ngenerator</a></p>\n<p>组合式 API。一个 View 的父组件里面有两个 Echarts 图表的子组件 A 和\nB。</p>\n<p>问题：图表的数据从何而来：</p>\n<ol type=\"1\">\n<li>在清洗和导出数据的时候直接导出为 Echarts 所需要的 JSON\n格式的文件</li>\n<li>准备图表的 option 的 JSON 格式为一个计算属性，把 data 字段设置为 Ref\n对象的 value</li>\n<li> 给 v-chart 标签的 :option 绑定这个计算属性</li>\n<li>写一个更新图表的函数，fetch\n一个文件，转换成图表需要的格式，赋值给那个 Ref.value</li>\n</ol>\n<p>点击子组件图表后的事件和参数如何传递给父组件：</p>\n<ol type=\"1\">\n<li>在子组件里定义一个发射源 const emit =\ndefineEmits ([\"eventName\"]);</li>\n<li> 给子组件 v-chart 标签的 <span class=\"citation\" data-cites=\"click\">@click</span> 绑定一个方法</li>\n<li>该方法带一个参数 param 为图表点击后的参数，在该方法里发射事件\nemit (\"eventName\", param);</li>\n<li> 在父组件里引用子组件标签处的 <span class=\"citation\" data-cites=\"event-name\">@event-name</span> 绑定一个带参数 param\n的方法，用于接收子组件发射的事件和参数</li>\n</ol>\n<p>父组件如何向子组件传消息：</p>\n<ol type=\"1\">\n<li>在子组件里定义它的属性 </li>\n</ol>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> props = <span class=\"title function_\">defineProps</span>({</span><br><span class=\"line\">  <span class=\"attr\">propName</span>: {</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">    <span class=\"attr\">default</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  },</span><br><span class=\"line\">});</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>在父组件里引用子组件标签处的 :prop-name 绑定一个 Ref 对象，更新 Ref\n对象</li>\n</ol>\n<p>如何实现点击图表 A 的一部分后，更新图表 B：</p>\n<ol type=\"1\">\n<li>把点击图表 A 后的事件和参数 emit 给父组件</li>\n<li>父组件在 A 组件标签 @ 处绑定的方法处接收，并更新图表 B 标签的\n:prop-name 的 Ref</li>\n<li> 在 B 组件里监视它 props 的变化，调用更新图表的方法 </li>\n</ol>\n<figure class=\"highlight js\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">watch</span>(</span><br><span class=\"line\">  <span class=\"function\">() =&gt;</span> props.<span class=\"property\">propName</span>,</span><br><span class=\"line\">  <span class=\"title function_\">async</span> (newVal) =&gt; {</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">\"propName updated:\"</span>, newVal);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"title function_\">updateChartData</span>(newVal);</span><br><span class=\"line\">  },</span><br><span class=\"line\">  { <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span> } <span class=\"comment\">//确保在组件初始化时也执行一次回调函数</span></span><br><span class=\"line\">);</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"5\" type=\"1\">\n<li>在更新图表的方法里，根据接收到的参数，fetch 不同的文件，赋给 data 的\nRef.value</li>\n</ol>\n<h2 id=\"word-文档模板留存\">Word 文档模板留存</h2>\n<ol type=\"1\">\n<li>对称页边距，留出一点装订距离。上下 2.5 cm，内 3 cm，外 2.5 cm</li>\n<li> 第一面是封面，第二面是目录。页码从第三面开始编\n1，奇数页在右下角，偶数页在左下角</li>\n<li>所有中英文标题都是黑体加粗，格式都是\n<code>1.1.标题</code>。一级标题三号，二级标题四号，三级标题小四。不缩进</li>\n<li>所有正文中文都是宋体，西文都是 Times New\nRoman。字号都是小四。首行缩进两字符，左对齐</li>\n<li>所有标题和正文段落都是段前段后 0，行距 1.5 倍</li>\n<li>大部分代码用截图，把 VSCode 的背景调到纯白</li>\n<li>把 VSCode 编辑器的字体调为中文宋体，西文 Consolas</li>\n<li> 单独定义一个图片样式，应用于段落的阴影边框，宽度 0.75 磅</li>\n<li>小部分短的代码（Shell\n命令之类的）单独定义一个代码样式继承自正文，使用与图片同款的边框，首行缩进\n2 字符</li>\n<li>参考文献样式继承自 “列表段落”，悬挂缩进 2\n字符，左对齐，允许西文在单词中间换行</li>\n</ol>\n<h2 id=\"解决-vscode-集成终端按键与快捷键冲突\">解决 VSCode\n集成终端按键与快捷键冲突</h2>\n<p><code>Ctrl + Shift + P</code>\n打开命令面板，搜键盘快捷方式，搜冲突的按键，右键更改 When 表达式，加上\n<code>&amp;&amp; !terminalFocus</code></p>\n<h2 id=\"用-browser-sync-实现在文件内容改变后立即刷新页面\">用\nbrowser-sync 实现在文件内容改变后立即刷新页面</h2>\n<p>起因是：不管是直接打开 html\n文件，还是用 <code>python -m http.server 8000 --bind 127.0.0.1</code>，在修改保存\nhtml 文件后浏览器都不能立马刷新。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install browser-sync</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx browser-sync start --server --files <span class=\"string\">\".\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p><code>--files</code> 后指定要监视的文件。</p>\n<p><code>.</code> 表示监视当前目录以及子目录下的所有文件。</p>\n<p>可以改成 <code>*.html</code>，<code>public/*.*</code> 等。</p>\n<p>html\n文件里至少得有一对 <code>&lt;body&gt;</code> 标签，要么没法自动刷新。</p>\n<h2 id=\"python\">Python</h2>\n<p><a href=\"https://docs.python.org/zh-cn/3/tutorial/whatnow.html\">本体</a> |\n<a href=\"https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/\">Anaconda</a>\n| <a href=\"https://pypi.org/\">PyPI</a></p>\n<h3 id=\"anaconda\">Anaconda</h3>\n<p>不要把包都安到 base 环境里。</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda <span class=\"built_in\">env</span> <span class=\"built_in\">export</span> &gt; environment.yml <span class=\"comment\"># 导出当前环境依赖</span></span><br><span class=\"line\">conda <span class=\"built_in\">env</span> create -f environment.yml <span class=\"comment\"># 重建环境</span></span><br><span class=\"line\">conda create -n xxx</span><br><span class=\"line\">conda <span class=\"built_in\">env</span> remove -n xxx</span><br><span class=\"line\">conda activate xxx</span><br><span class=\"line\">conda deactivate</span><br><span class=\"line\">conda list</span><br><span class=\"line\">conda list numpy</span><br><span class=\"line\">pip list</span><br><span class=\"line\">pip show numpy</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"报菜名\">报菜名</h3>\n<p>Python 的标准库有上百个。用 <code>import</code> 还是\n<code>from ... import ...</code>，后面加不加 <code>as</code>\n，以易读为主。因为代码是给人看的。</p>\n<p>使用 <code>from xxx import *</code>\n类似于：你在搭积木的时候，闭着眼睛把一整个塑料袋的积木全倒出来，然后闭着眼睛摸一个、闭着眼睛摸一个。</p>\n<p><code>import</code> 语句的顺序是：标准库、第三方库、自定义库。可通过\nVSCode 插件 isort 解决，按 Ctrl + Shift + O 排序。</p>\n<p>在你的工程目录下面，使用 https://github.com/bndr/pipreqs\n可以把你用到的所有第三方库写到依赖文件 <code>requirements.txt</code>\n里。</p>\n<p>虽然 Python\n的一个变量名可以赋多个类型，但在有必要的情况下，还是加上类型注解。这对\nVSCode\n的代码补全也有帮助：把鼠标移到一个变量名上边，如果你想要它是某一个类的对象，但是它显示为\n<code>Any</code>，这时候你在它后面加 <code>.</code>，VSCode\n没法给你列出它的方法。这时候你需要显式标注它的类型，比如\n<code>foo: Bar</code>。或者 <code>assert isinstance(foo, Bar)</code></p>\n<h3 id=\"输出函数名和本地时间\">输出函数名和本地时间</h3>\n<p>使用装饰器：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">log</span>(<span class=\"params\">func</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wrapper</span>(<span class=\"params\">*args, **kwargs</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f\"<span class=\"subst\">{func.__name__}</span>，系统时间：<span class=\"subst\">{datetime.datetime.now()}</span>\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> func(*args, **kwargs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@log</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">test</span>(): ...</span><br><span class=\"line\"></span><br><span class=\"line\">test()</span><br></pre></td></tr></tbody></table></figure>\n<p>上面是一种很笨的方法，我们可以用其自带的 logging\n模块记录日志到文件：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    filename=<span class=\"string\">f\"<span class=\"subst\">{datetime.date.today()}</span>.log\"</span>,</span><br><span class=\"line\">    filemode=<span class=\"string\">\"w\"</span>,</span><br><span class=\"line\">    encoding=<span class=\"string\">\"utf-8\"</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    <span class=\"built_in\">format</span>=<span class=\"string\">\"%(asctime)s - %(levelname)s - %(message)s\"</span>,</span><br><span class=\"line\">)</span><br><span class=\"line\">logging.info(...)</span><br><span class=\"line\">logging.warning(...)</span><br><span class=\"line\">logging.error(...)</span><br></pre></td></tr></tbody></table></figure>\n<p>日志有五个等级：DEBUG 调试诊断用的；INFO 确认正常运行；WARNING\n是不影响正常运行的错误，如向数据库里插入一条已经存在的记录，然后忽略它；ERROR\n是影响正常运行的错误，如数据库连接失败（但是你系统的其他功能可用）；CRITICAL\n是你的系统的关键功能不可用（如果你的系统必须要用数据库）。</p>\n<h3 id=\"plt\">plt</h3>\n<p>条形图和柱形图的区别是：前者是横着的，后者是竖着的。前者用\n<code>plt.barh</code>，后者用 <code>plt.bar</code></p>\n<p>中文字体：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plt.rcParams[<span class=\"string\">\"font.family\"</span>] = <span class=\"string\">\"SimHei\"</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"最小二乘法多项式拟合\">最小二乘法多项式拟合</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">x = np.array([<span class=\"number\">48</span>, <span class=\"number\">47</span>, <span class=\"number\">54</span>, <span class=\"number\">50</span>, <span class=\"number\">73</span>, <span class=\"number\">72</span>, <span class=\"number\">62</span>, <span class=\"number\">52</span>, <span class=\"number\">47</span>, <span class=\"number\">83</span>, <span class=\"number\">70</span>, <span class=\"number\">65</span>, <span class=\"number\">48</span>])</span><br><span class=\"line\">y = np.array([<span class=\"number\">0.42</span>, <span class=\"number\">0.38</span>, <span class=\"number\">0.66</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.99</span>, <span class=\"number\">0.98</span>, <span class=\"number\">0.89</span>,</span><br><span class=\"line\">             <span class=\"number\">0.58</span>, <span class=\"number\">0.38</span>, <span class=\"number\">0.99</span>, <span class=\"number\">0.98</span>, <span class=\"number\">0.93</span>, <span class=\"number\">0.42</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># polynomial 多项式 fit 拟合</span></span><br><span class=\"line\"><span class=\"comment\"># 第三个参数是多项式的次数，为大于等于零的整数</span></span><br><span class=\"line\">z = np.polyfit(x, y, <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这样一转换，可以以人可读的方式打印，可以在下面 call 它，把传参给 p 的数组转换为另一个数组</span></span><br><span class=\"line\">p = np.poly1d(z)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(p)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 左闭右开的等差数列</span></span><br><span class=\"line\">x2 = np.linspace(<span class=\"number\">40</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 画散点图</span></span><br><span class=\"line\">plt.scatter(x, y, color=<span class=\"string\">'red'</span>, label=<span class=\"string\">'Data Points'</span>)</span><br><span class=\"line\"><span class=\"comment\"># 画曲线</span></span><br><span class=\"line\">plt.plot(x2, p(x2), color=<span class=\"string\">'blue'</span>, label=<span class=\"string\">'Quadratic Curve'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># xy轴标签、图题</span></span><br><span class=\"line\">plt.xlabel(<span class=\"string\">'x'</span>)</span><br><span class=\"line\">plt.ylabel(<span class=\"string\">'y'</span>)</span><br><span class=\"line\">plt.title(<span class=\"string\">'Scatter plot with Quadratic Curve'</span>)</span><br><span class=\"line\"><span class=\"comment\"># 图例</span></span><br><span class=\"line\">plt.legend()</span><br><span class=\"line\">plt.show()</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"scipy.stats.某种分布.\">scipy.stats. 某种分布.</h3>\n<p><span class=\"math display\">\\[\n\\begin {aligned}\n\\mathrm {rvs (分布参数，size = 实验次数)} &amp; = X\\\\\n离散型 \\mathrm {pmf}(分布参数，k = [x_1,x_2, ...]) &amp;  = \\mathrm {P}(X =\nx) \\\\\n连续型 \\mathrm {pdf}(分布参数，x = [x_1,x_2, ...]) &amp; = f_{X}(x) \\\\\n离散型 \\mathrm {cdf}(分布参数，k = [x_1,x_2, ...]) &amp; = F_{X}(x) =\n\\mathrm {P}(X \\le x) \\\\\n连续型 \\mathrm {cdf}(分布参数，x = [x_1,x_2, ...]) &amp; = F_{X}(x) =\n\\mathrm {P}(X \\le x) \\\\\n返回 \\mathrm {numpy.ndarray}\n\\end {aligned}\n\\]</span></p>\n<h3 id=\"selenium\">selenium</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.common.by <span class=\"keyword\">import</span> By</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.support <span class=\"keyword\">import</span> expected_conditions <span class=\"keyword\">as</span> EC</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.support.ui <span class=\"keyword\">import</span> WebDriverWait</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SeleniumSpider</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 使用本地的火狐浏览器</span></span><br><span class=\"line\">        options = webdriver.FirefoxOptions()</span><br><span class=\"line\">        options.binary_location = (</span><br><span class=\"line\">            <span class=\"string\">r\"D:\\Program Files\\Firefox Developer Edition\\firefox.exe\"</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.driver = webdriver.Firefox(options)</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data: <span class=\"built_in\">list</span>[<span class=\"built_in\">dict</span>] = []  <span class=\"comment\"># 暂存爬取的数据</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wait_and_click</span>(<span class=\"params\">self, xpath: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        保证元素可以被点击，并点击</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        WebDriverWait(<span class=\"variable language_\">self</span>.driver, <span class=\"number\">20</span>).until(</span><br><span class=\"line\">            EC.all_of(</span><br><span class=\"line\">                EC.element_to_be_clickable((By.XPATH, xpath)),</span><br><span class=\"line\">                EC.visibility_of_element_located((By.XPATH, xpath)),</span><br><span class=\"line\">            )</span><br><span class=\"line\">        )</span><br><span class=\"line\">        el = <span class=\"variable language_\">self</span>.driver.find_element(By.XPATH, xpath)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(xpath, el)</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            el.click()</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            webdriver.ActionChains(<span class=\"variable language_\">self</span>.driver).move_to_element(el).click(el).perform()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> el</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">save_to</span>(<span class=\"params\">self, file_name: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        写一个json文件</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(file_name, mode=<span class=\"string\">\"w+\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">                f.write(json.dumps(<span class=\"variable language_\">self</span>.data, ensure_ascii=<span class=\"literal\">False</span>, indent=<span class=\"number\">2</span>))</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(e)</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"java\">Java</h2>\n<p><a href=\"https://mvnrepository.com/\">Maven 仓库</a> | <a href=\"https://developer.aliyun.com/mvn/guide\">阿里云 Maven 仓库</a> | <a href=\"https://docs.spring.io/spring-boot/docs/\">Spring Boot 文档</a> |\n<a href=\"https://endoflife.date/spring-boot\">Spring Boot 支持的 Java\n版本</a></p>\n<p>关键字：没有 <code>unsigned</code> 关键字</p>\n<p>运算符：无符号右移 <code>&gt;&gt;&gt;</code>，前面直接补零。</p>\n<ul>\n<li>C/C++/Java 在对整型变量右移 <code>&gt;&gt;</code> 时：\n<ul>\n<li>正整数前面全补 <code>0</code></li>\n<li>负整数前面全补 <code>1</code></li>\n<li>无符号整数前面全补 <code>0</code></li>\n<li>作用相当于除以 2</li>\n</ul></li>\n</ul>\n<p>数据类型：布尔 <code>boolean</code>，值为 <code>true</code> 或者\n<code>false</code>。可以直接用，占一个字节。</p>\n<ul>\n<li>写 <code>if(3 == true)</code>\n时会报错，数据类型不同，不能直接比较。</li>\n<li>在 C 的 <code>&lt;stdbool.h&gt;</code> 中被 <code>#define</code>\n了为 <code>1</code> 和 <code>0</code>。\n<ul>\n<li>写 <code>if(3 == true)</code> 时会跳过分支。</li>\n</ul></li>\n<li>C++ 同 C，但是不用引头文件，可以直接用。</li>\n<li>在 Python 中是首字母大写的，也相当于 <code>0</code> 和\n<code>1</code>，但是数据类型不同。\n<ul>\n<li>写 <code>if(3 == True)</code> 时会按 <code>1</code> 比较。</li>\n<li>写 <code>if(3 is True)</code> 时会报错。</li>\n</ul></li>\n<li>在 JS 中也相当于 <code>0</code> 和\n<code>1</code>，但是数据类型不同。\n<ul>\n<li>写 <code>if(1 == true)</code> 时会执行分支。</li>\n<li>写 <code>if(1 === true)</code> 时会跳过分支。</li>\n</ul></li>\n</ul>\n<p>字符 <code>char</code>：无符号的两个字节。在 C/C++ 里是一个字节。</p>\n<p>有符号整型</p>\n<ul>\n<li><code>byte</code>：一个字节</li>\n<li><code>short</code>：两个字节</li>\n<li><code>int</code>：四个字节</li>\n<li><code>long</code>：八个字节</li>\n</ul>\n<p>语法：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Type[] arr = ...</span><br><span class=\"line\"><span class=\"keyword\">for</span> (Type element : arr) {</span><br><span class=\"line\">    System.out.print(element + <span class=\"string\">\",\"</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\">Arrays.toString(arr);</span><br><span class=\"line\">System.arraycopy(...);</span><br><span class=\"line\">String.equals(string);</span><br><span class=\"line\"><span class=\"comment\">// == 运算符比较的是两对象的内存地址</span></span><br><span class=\"line\"><span class=\"comment\">// 该方法先用 == 判断，后一个一个字符地比较</span></span><br><span class=\"line\"><span class=\"comment\">// 可用 System.identityHashCode() 获取对象的标识哈希码，这是基于对象的内存地址计算的</span></span><br><span class=\"line\"><span class=\"type\">int</span> Arrays.binarySearch(arr, elm);</span><br><span class=\"line\"><span class=\"comment\">// 二分查找，返回的不一定是第一个。</span></span><br></pre></td></tr></tbody></table></figure>\n<p>接口：接口是一种特殊的类。写出来就是用来被继承的 —— 不用\n<code>extends</code>（扩展），用 <code>implements</code>（实现）。</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">USB</span> {</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>一个类只能 <code>extends</code> 自一个父类，但可以\n<code>implements</code>\n多个接口。实现接口的子类必须得实现接口里声明的方法。</p>\n<p>JavaBean 规则：</p>\n<ul>\n<li>必须有一个无参构造方法</li>\n<li>所有属性私有，且对其提供 public 的 <code>getXxx()</code> 与\n<code>setXxx()</code> 方法</li>\n</ul>\n<h2 id=\"jsp\">JSP</h2>\n<blockquote>\n<p>Web 是一种分布式的应用框架。基于 Web\n的应用是典型的浏览器 / 服务器（B/S）架构。——ISBN 9787302438090</p>\n</blockquote>\n<blockquote>\n<p>JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java\n库单元提供了一个接口来服务于 HTTP 的应用程序。—— 菜鸟教程</p>\n</blockquote>\n<p>笔者测试，用 VSCode 和 IDEA 社区版（2024.1）都没办法格式化 JSP\n代码，或者是暂时没找到解决方法。或者你可以用 CSDN 网友分享的 IDEA\n破解版（不是用蓝绿修改器破解的）\nhttps://blog.csdn.net/hlizoo/article/details/137562771</p>\n<p><strong>用 VSCode 或 IDEA 社区版</strong></p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate \"-DgroupId=com.example\" \"-DartifactId=demo\" \"-DarchetypeArtifactId=maven-archetype-webapp\" \"-DinteractiveMode=true\"</span><br></pre></td></tr></tbody></table></figure>\n<p>VSCode 使用 Community Server Connectors 插件、IDEA 使用 Smart Tomcat\n插件</p>\n<p><strong>用 Eclipse 2020-03 (4.15.0)</strong></p>\n<p>在首选项里设置 JDK 和 Tomcat 的路径。</p>\n<p>New -&gt; Dynamic Web Project</p>\n<p>按 Ctrl + Shift + F 格式化代码 —— 這個快捷鍵會和 Win10\n的微軟拼音輸入法簡繁體切換功能衝突。解决方法除了再按一次，还可以右击你任务栏上的 [中]，进输入法设置，把热键关了。</p>\n<blockquote>\n<p>一个 JSP 文件的示例</p>\n</blockquote>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">\"java\"</span> contentType=<span class=\"string\">\"text/html; charset=UTF-8\"</span></span><br><span class=\"line\">\tpageEncoding=<span class=\"string\">\"UTF-8\"</span> <span class=\"keyword\">import</span>=<span class=\"string\">\"java.util.Date\"</span>%&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">&lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;%</span><br><span class=\"line\">\t\t<span class=\"type\">Date</span> <span class=\"variable\">now</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>();</span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">\t&lt;%=now%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>它在 html 的基础上扩展了一些标签。可以使用 Java 库。</p>\n<blockquote>\n<p>JSP 运行的原理</p>\n</blockquote>\n<ol type=\"1\">\n<li>客户向 Tomcat 服务器发送 HTTP 请求</li>\n</ol>\n<p>你可以使用 Fiddler\n来抓包（或者直接用浏览器控制台抓，这是最方便的）。在 Eclipse\n里按 “播放键” 之后，Eclipse 向 <code>localhost:8080</code> 发送了一个 GET\n请求。</p>\n<p>使用</p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -ano | grep <span class=\"number\">8080</span></span><br></pre></td></tr></tbody></table></figure>\n<p>查与 8080 端口有关的进程号。再打开任务管理器的详细信息，查到进程为\n<code>javaw.exe</code>。右击打开文件所在位置，在你 Eclipse\n首选项里设置的 JDK 目录的 bin 目录里面。</p>\n<p>使用</p>\n<figure class=\"highlight bat\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jcmd</span><br></pre></td></tr></tbody></table></figure>\n<p>查看 java 进程，为\n<code>org.apache.catalina.startup.Bootstrap start</code></p>\n<ol start=\"2\" type=\"1\">\n<li>Tomcat 启动一个线程，把 jsp 文件转换成 java 文件</li>\n</ol>\n<p>（一个继承自 <code>javax.servlet.http.HttpServlet</code>\n的类，头上带一个注解 <code>@WebServlet(\"/path\")</code>，相当于 Python 的\nFlask 框架里的 <code>@app.route(\"/path\")</code>）</p>\n<ol start=\"3\" type=\"1\">\n<li>把 java 文件编译成 class 文件（字节码）</li>\n</ol>\n<blockquote>\n<p>jsp 指令与 jsp 动作？</p>\n</blockquote>\n<p>前者是静态的，后者是动态的（感性认识）</p>\n<p>前者类似</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ <span class=\"type\">include</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"string\">\"sub.jsp\"</span> %&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>后者类似</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;jsp:<span class=\"type\">include</span> <span class=\"variable\">page</span> <span class=\"operator\">=</span> <span class=\"string\">\"sub.jsp\"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>在一个 jsp 页里，如何把表单传递给另一个 jsp 页？另一个 jsp\n页如何接收？</p>\n</blockquote>\n<p>三种方式：（使用 get 方法会在 url 里看到请求参数，post 不会）</p>\n<ol type=\"1\">\n<li>【包含对面的】 <code>jsp:include</code> 配合\n<code>jsp:param</code>。这是把另一个 jsp 页包含进来。</li>\n</ol>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">\"get\"</span>&gt;</span><br><span class=\"line\">    请输入圆的半径：</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"text\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span> /&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;jsp:include page=<span class=\"string\">\"computeAreaOfCircle.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"${param.radius}\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:include&gt;</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"2\" type=\"1\">\n<li>【请求转发】先使用本页面的 Java 代码处理表单，再使用\n<code>jsp:forward</code> 配合 <code>jsp:param</code>，把 request\n对象转发给另一个 jsp 页面。</li>\n</ol>\n<p>这种把 JSP 标签和 Java 代码混在一起的写法很新鲜：</p>\n<p>接收方用 <code>request.getParameter(\"name\")</code> 接收</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">\"post\"</span> action=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\">    请选择一个图形：&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"radio\"</span> name=<span class=\"string\">\"shape\"</span> id=<span class=\"string\">\"circle\"</span> value=<span class=\"string\">\"circle\"</span> /&gt;圆形&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"radio\"</span> name=<span class=\"string\">\"shape\"</span> id=<span class=\"string\">\"rectangle\"</span> value=<span class=\"string\">\"rectangle\"</span> /&gt;矩形&lt;br /&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span> /&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">\t<span class=\"type\">Random</span> <span class=\"variable\">random</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Random</span>();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">shape</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">\"shape\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (shape != <span class=\"literal\">null</span>) {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (shape.equals(<span class=\"string\">\"circle\"</span>)) {</span><br><span class=\"line\">        <span class=\"type\">double</span> <span class=\"variable\">radius</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">\"process.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=shape%&gt;\"</span> name=<span class=\"string\">\"shape\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=radius%&gt;\"</span> name=<span class=\"string\">\"radius\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (shape.equals(<span class=\"string\">\"rectangle\"</span>)) {</span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"variable\">width</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">    <span class=\"type\">double</span> <span class=\"variable\">height</span> <span class=\"operator\">=</span> <span class=\"number\">100</span> * random.nextDouble();</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;jsp:forward page=<span class=\"string\">\"process.jsp\"</span>&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=shape%&gt;\"</span> name=<span class=\"string\">\"shape\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=width%&gt;\"</span> name=<span class=\"string\">\"width\"</span> /&gt;</span><br><span class=\"line\">    &lt;jsp:param value=<span class=\"string\">\"&lt;%=height%&gt;\"</span> name=<span class=\"string\">\"height\"</span> /&gt;</span><br><span class=\"line\">&lt;/jsp:forward&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br><span class=\"line\">%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"3\" type=\"1\">\n<li>【重定向】<code>response.sendRedirect(\"result.jsp\")</code> 不会把\nrequest 对象传递过去</li>\n</ol>\n<p>应 <code>session.setAttribute(\"name\", value)</code></p>\n<p>对方使用 <code>session.getAttribute(\"name\")</code> 接收。</p>\n<p>访问使用 response.sendRedirect 的一方 jsp 时，会跳转到对面的一方</p>\n<blockquote>\n<p>重定向和请求转发</p>\n</blockquote>\n<p>重定向会丢失 request 对象，请求转发不会。</p>\n<p>在 JSP 或者 Servert 里请求转发：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.setAttribute(<span class=\"string\">\"studentList\"</span>, studentList);</span><br><span class=\"line\"><span class=\"type\">RequestDispatcher</span> <span class=\"variable\">dispatcher</span> <span class=\"operator\">=</span> request.getRequestDispatcher(<span class=\"string\">\"result.jsp\"</span>);</span><br><span class=\"line\">dispatcher.forward(request, response);</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>如何实现点一个按钮出现一个新表单？</p>\n</blockquote>\n<p>在第一个表单里加一个隐藏的 <code>&lt;input&gt;</code>\n标签，第一个表单提交给本页面，然后在本页面里写 Java 代码：</p>\n<p>笔者觉得这比 JS 操作 DOM 看起来新鲜，很好玩。</p>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form action=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"hidden\"</span> name=<span class=\"string\">\"showInput\"</span> value=<span class=\"string\">\"true\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"查找\"</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">showInput</span> <span class=\"operator\">=</span> request.getParameter(<span class=\"string\">\"showInput\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (showInput != <span class=\"literal\">null</span> &amp;&amp; showInput.equals(<span class=\"string\">\"true\"</span>)) {</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;form action=<span class=\"string\">\"Query\"</span> method=<span class=\"string\">\"get\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"text\"</span> name=<span class=\"string\">\"id\"</span> placeholder=<span class=\"string\">\"输入学号\"</span>&gt;</span><br><span class=\"line\">    &lt;input type=<span class=\"string\">\"submit\"</span> value=<span class=\"string\">\"提交\"</span>&gt;</span><br><span class=\"line\">&lt;/form&gt;</span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">}</span><br><span class=\"line\">%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>Filter 是什么？</p>\n</blockquote>\n<p>一个实现了 <code>javax.servlet.Filter</code> 接口的类。可在\n<code>doFilter</code> 方法里对请求预处理，响应后处理：</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebFilter(\"/*\")</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ProZhInput</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Filter</span> {</span><br><span class=\"line\">    <span class=\"comment\">//...</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class=\"keyword\">throws</span> IOException, ServletException {</span><br><span class=\"line\">        request.setCharacterEncoding(<span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">        response.setCharacterEncoding(<span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">\"text/html;charset=UTF-8\"</span>);</span><br><span class=\"line\">        chain.doFilter(request, response);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"comment\">//...</span></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<blockquote>\n<p>如何使用 JDBC 连接 MySQL</p>\n</blockquote>\n<ol type=\"1\">\n<li>下载驱动 Jar 包 https://dev.mysql.com/downloads/connector/j/</li>\n<li> 把 Jar 包 复制到\n<code>yourprojectname\\WebContent\\WEB-INF\\lib</code></li>\n</ol>\n<blockquote>\n<p>插入的问题</p>\n</blockquote>\n<blockquote>\n<p>MySQL 里有两张表，一张表的外键是另一张表的主键（如\nid），级联更新和删除。如何插入 “一条” id\n的记录 “分散给” 这两张表？即对这两张表分别插了一个 id 相同的记录。</p>\n</blockquote>\n<p>先插 id 为主键所在的表，后插 id 为外键所在的表。</p>\n<p>这是关系型数据库原理的知识。本表里的 “外键” 就是引用外部表里的 “主键”，那得先有外部表。</p>\n<blockquote>\n<p>乱码的问题</p>\n</blockquote>\n<p>保证这些地方的编码是 UTF-8：</p>\n<ol type=\"1\">\n<li>Eclipse 首选项里的文件编码</li>\n<li>搞一个 Filter</li>\n<li>MySQL 数据库表的编码 </li>\n<li></li>\n</ol>\n<figure class=\"highlight jsp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">\"java\"</span> contentType=<span class=\"string\">\"text/html; charset=UTF-8\"</span></span><br><span class=\"line\">\tpageEncoding=<span class=\"string\">\"UTF-8\"</span>%&gt;</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"排序算法\">排序算法</h2>\n<p>二分查找就是翻书。有一本 200 页的书，你想翻到 124\n页，一下就翻到的概率是很小的。翻到中间，发现是 100 页；翻到 100~200\n页的中间，发现是 150 页；翻到 100~150 页的中间，发现是 125\n页，以此类推。</p>\n<p>二分查找就是从列表里查找一个值，前提列表是有序的，这样可以比较大小，在二分之后仍然是有序的。如果要查找的值比列表的中间值小，就在列表的左半部分找，这就是二分。这时需要变换查找范围的右边界，到中间值的左边一个位置。然后对查找范围继续二分，与中间值作比较，如果要查找的值比中间值大，就在查找范围的右半部分找，这时需要变换查找范围的左边界到中间值的右一个位置。以此类推，如果找到了，就返回目标元素的索引。找不到就返回 - 1。</p>\n<p>插入排序：一张一张地接扑克牌，接到第一张扑克牌时什么也不做，接到第二张扑克牌时要与第一张作比较，看插入到第一张的前面还是后面，……，接到第\nn 张扑克牌时要与前 n - 1 张比较，看插入到手牌的哪个位置。</p>\n<p>选择排序：拿到一手混乱的牌，从中选取最小的，与第 0\n张交换位置；之后忽略第 0 张，从剩余的牌里选取最小的，与第 1\n张交换位置；之后忽略第 0、1 张，从剩余的牌里选取最小的，与第 2\n张交换位置。以此类推。</p>\n<p>归并排序：把一沓牌分成一张一张的，摆在桌子上。相邻的两张合并成一个组；相邻的两组分别排序，合并成一个新组；以此类推。</p>\n<p>快速排序：选一个基准，所有比基准小的放在基准左边，比基准大的放在基准右边。然后就分成了两个区，对每一个区里的元素再选一个基准，重复上面的操作。</p>\n<h2 id=\"数据挖掘\">数据挖掘</h2>\n<h3 id=\"属性与度量\">属性与度量</h3>\n<ul>\n<li>测量：将对象的属性映射为数值 / 符号值</li>\n<li>测量标度：函数、秤</li>\n</ul>\n<p>例如：秤将人的体重映射为一个数值</p>\n<p>属性的类型（也叫测量标度的类型）：</p>\n<ul>\n<li><p>分类的（定性的）</p>\n<ul>\n<li>标称：有意义的只有等于 / 不等于操作。例如你的性别，不能与其他性别进行比较大小、加减、乘除操作</li>\n<li>序数：有意义的有：等于 / 不等于和比较大小。例如你的成绩在这五个档次里面 {A,B,C,D,E}</li>\n</ul></li>\n<li><p> 数值的（定量的）</p>\n<ul>\n<li>区间：除了能等于 / 不等于 / 比较大小，还要能加减。比如某年某月某日、华氏 / 摄氏温度</li>\n<li>比率：在上面的基础上，还要能乘除</li>\n</ul></li>\n<li><p>离散的属性：可取有限个值，或无限可数个值</p></li>\n<li><p>连续的属性：取实数值</p></li>\n<li><p>非对称的属性：出现非零值比零值重要</p></li>\n</ul>\n<h3 id=\"关联分析\">关联分析</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">AssociationRule</span>(namedtuple(<span class=\"string\">\"AssociationRule\"</span>, [<span class=\"string\">\"X\"</span>, <span class=\"string\">\"Y\"</span>])):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    关联规则，是两个不相交集合的蕴含表达式</span></span><br><span class=\"line\"><span class=\"string\">    {牛奶，尿布} -&gt; {啤酒}</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__new__</span>(<span class=\"params\">cls, X: <span class=\"built_in\">set</span>, Y: <span class=\"built_in\">set</span></span>):</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> X.isdisjoint(Y)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>().__new__(cls, X, Y)</span><br></pre></td></tr></tbody></table></figure>\n<p>支持度计数 sigma，即事务列表里，项集的超集个数</p>\n<p>支持度，即项集的超集个数与集合总个数（事务个数）的比值</p>\n<p>大于等于最小支持度（计数）的项集，称为频繁项集</p>\n<p>置信度，由 X 引起 Y 的可能性。X 的支持度计数做分母，XY\n并集的支持度计数做分子</p>\n<p>先验原理：如果一个项集是频繁的，它的所有子集都是频繁的</p>\n<p>反过来：如果一个项集是非频繁的，它的所有超集都是非频繁的</p>\n<p>即：一个项集的子集的支持度，大于等于它本身的支持度</p>\n<h3 id=\"决策树示例\">决策树示例</h3>\n<p>对于一组数据集，其每一个数据有它的几个属性的值，和一个分类标签。</p>\n<p>如：我们可以给一系列人的数据集：（方便理解，学习用，无歧视）</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 特征列表</span></span><br><span class=\"line\">features = [<span class=\"string\">\"性别\"</span>, <span class=\"string\">\"使用手机的牌子\"</span>, <span class=\"string\">\"年龄\"</span>, <span class=\"string\">\"是否赌博\"</span>, <span class=\"string\">\"喜欢玩的游戏\"</span>, <span class=\"string\">\"喜欢音乐的曲风\"</span>]</span><br><span class=\"line\">dataset = [</span><br><span class=\"line\">    <span class=\"comment\"># 最后一个是分类标签</span></span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"是\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"有病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"大\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"小\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"王者荣耀\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"前卫摇滚\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"苹果\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"女\"</span>, <span class=\"string\">\"小米\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"和平精英\"</span>, <span class=\"string\">\"华语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">    [<span class=\"string\">\"男\"</span>, <span class=\"string\">\"华为\"</span>, <span class=\"string\">\"中\"</span>, <span class=\"string\">\"否\"</span>, <span class=\"string\">\"明日方舟\"</span>, <span class=\"string\">\"日语流行\"</span>, <span class=\"string\">\"没病\"</span>],</span><br><span class=\"line\">]</span><br></pre></td></tr></tbody></table></figure>\n<p>生成类似这样的决策树：</p>\n<p><img src=\"/blog/images/decision-tree.webp\"></p>\n<h3 id=\"针对购物篮数据集的关联分析\">针对购物篮数据集的关联分析</h3>\n<p>关联分析到底是<strong>什么意思</strong>？是发现隐藏在大型<strong>数据集</strong>中的有意义的<strong>联系</strong>。</p>\n<p>购物篮数据集<strong>怎么表示</strong>？是一张<strong>表</strong>，表里有一系列<strong>行</strong>，每一个行是一个<strong>事务</strong>，每一个事务表现为一个<strong>集合</strong>，这个集合里有一系列商品的<strong>名字</strong>，比如 {\"面包\",\"牛奶\",\"尿布\"}</p>\n<p>联系<strong>怎么表示</strong>？有两种形式：<strong>关联规则</strong>、和<strong>频繁项集</strong></p>\n<p>关联规则是<strong>什么意思</strong>？是<strong>两个不相交集合的蕴含表达式</strong>，如 {尿布}-&gt;{啤酒} 这个表达式的意思是：购买尿布，<strong>引起了</strong>购买啤酒，前面是<strong>因</strong>、后面是<strong>果</strong>。</p>\n<p>项集是<strong>什么意思</strong>？是一些<strong>项</strong>的<strong>集合</strong>。是\n<code>list[str]</code></p>\n<p>什么叫<strong>频繁项集</strong>？是<strong>支持度</strong>或者<strong>支持度计数大于等于最小阈值</strong>的项集。</p>\n<p>什么叫<strong>支持度计数</strong>？是该项集在事务列表里的<strong>超集数量</strong>，是事务列表里的所有<strong>包含该项集</strong>的<strong>事务数量</strong>。</p>\n<p>什么叫<strong>支持度</strong>？是事务列表里，<strong>包含该项集的事务的数量</strong>占<strong>所有事务数量</strong>里的比值。</p>\n<p>{面包，牛奶} 支持度 0.3\n是<strong>什么意思</strong>？是在所有的购物记录里，同时包含购买了面包、牛奶的购物记录的比值。是<strong>在每\n10 次购物里，就有三次同时购买了面包和啤酒</strong>。</p>\n<p><strong>怎么挖掘关联规则</strong>？分两步：</p>\n<ol type=\"1\">\n<li><strong>产生频繁项集</strong>: 发现满足最小支持度阈值的所有项集\n<ul>\n<li>什么意思？项集里有几个元素？<strong>最少</strong>有一个，<strong>最多</strong>有\n<code>len(unique(flatten(basket)))</code>\n个，是所有独立的商品组成的集合。</li>\n</ul></li>\n<li><strong>产生规则</strong>\n<ul>\n<li>提取所有高置信度的规则。</li>\n</ul></li>\n</ol>\n<p>格结构是什么意思？格结构里的所有节点构成一个集合的幂集。格结构的第一层是\nnull，第二层是所有 1 - 项集，第三层是所有 2 - 项集…… 最底层是\n<code>len(unique(flatten(basket)))</code> 项集</p>\n<p><strong>先验原理</strong>是什么意思？如果一个<strong>项集</strong>是<strong>频繁</strong>的，它的<strong>所有子集</strong>都一定是<strong>频繁的</strong>。</p>\n<p>什么叫一个项集是频繁的？它的支持度计数大于等于最小阈值</p>\n<p>什么叫一个项集的子集是频繁的？它的子集的支持度计数大于等于最小阈值</p>\n<p>为什么项集支持度计数大于等于最小阈值后，它的所有子集的支持度计数都会大于等于最小阈值？</p>\n<p><strong>支持度计数 +1\n的操作是在什么时候</strong>？把这个项集和事务列表里的所有项集做比较，如果该项集是事务列表里项集的子集，把该项集的支持度计数\n+1。所以：支持度计数，就是<strong>找超集数量</strong></p>\n<p><strong>一个集合的子集的超集数量</strong>，必定<strong>大于等于该集合的超集数量</strong>，为什么？<strong>因为这个集合本身就是它子集的超集</strong>。</p>\n<p>什么叫<strong>基于支持度的剪枝</strong>？把先验原理<strong>反过来说</strong>：如果一个项集是非频繁的，它的所有超集都是非频繁的。</p>\n<p>非频繁是什么意思？支持度计数小于最小阈值，超集数量小于最小阈值，<strong>包含它的事务数量</strong>小于最小阈值</p>\n<p>如果一个集合的超集数量小于最小阈值，它的（所有超集）的超集数量都会小于最小阈值。为什么？<strong>你确定这句话对吗</strong>？</p>\n<p>正确的描述方法是：如果<strong>包含 A 的事务数</strong>小于最小阈值，\n那么<strong>包含（A\n的超集）的事务数</strong>会小于最小阈值。为什么？</p>\n<p>因为在一个购物篮里，事务数量是有限的。</p>\n<p><strong>支持度计数 +1\n的操作是在什么时候</strong>？是针对一个项集，<strong>判断各个事务</strong>是不是它的超集的时候。</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">basket = [</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>],</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>],</span><br><span class=\"line\">    [<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>],</span><br><span class=\"line\">    [<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>]</span><br><span class=\"line\">]</span><br></pre></td></tr></tbody></table></figure>\n<p>问：[2,3] 的支持度计数是几？是 2，是第一行和第四行</p>\n<p>现在规定：最小支持度计数是\n3。问，[2,3] 超集的支持度计数？既然是超集，考虑它自己是它自己的超集这种情况，它的支持度计数还是小于\n3。现在再往里加一个，能达到要求吗？加一个之后，<strong>超集的判定变严了</strong>。</p>\n<p>理性的说法是：原来是 A 超集的集合 B，在 A 加一个元素之后变成 C 后，B\n不一定还是 C 的超集，因为新加的那个元素可能不在 B\n里。如果新加的那个元素在 B 里，C\n超集的数量（相对于购物篮）至少减零。如果不在 B 里，C\n超集的数量（相对于购物篮）至少减一。</p>\n<p><strong>基于支持度的剪枝</strong>什么意思？如果<strong>一个项集是非频繁的</strong>，把它格结构里<strong>所有的超集剪了</strong>。</p>\n<p><strong>反单调性</strong>什么意思？一个项集的支持度小于等于它的自己的支持度。</p>\n<h3 id=\"numpy-库的多维数组切片语法\">numpy 库的多维数组切片语法</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"comment\"># 假装这是事务列表</span></span><br><span class=\"line\">X = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>],</span><br><span class=\"line\">        [<span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>, <span class=\"number\">11</span>, <span class=\"number\">12</span>, <span class=\"number\">13</span>, <span class=\"number\">14</span>],</span><br><span class=\"line\">        [<span class=\"number\">15</span>, <span class=\"number\">16</span>, <span class=\"number\">17</span>, <span class=\"number\">18</span>, <span class=\"number\">19</span>, <span class=\"number\">20</span>, <span class=\"number\">21</span>],</span><br><span class=\"line\">        [<span class=\"number\">22</span>, <span class=\"number\">23</span>, <span class=\"number\">24</span>, <span class=\"number\">25</span>, <span class=\"number\">26</span>, <span class=\"number\">27</span>, <span class=\"number\">28</span>],</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\"># 假装这是一系列3-项集</span></span><br><span class=\"line\">combin = np.array([[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>]])</span><br><span class=\"line\"><span class=\"built_in\">print</span>(X[:, combin])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">这是什么玩意？？？</span></span><br><span class=\"line\"><span class=\"string\">[[[ 1  2  3]</span></span><br><span class=\"line\"><span class=\"string\">  [ 2  5  7]] 把第一个事务的对应的各个3-项集摘出来（可能有True有False），便于后续判断它是不是某个3-项集的子集</span></span><br><span class=\"line\"><span class=\"string\">              如果第二行全True，说明该事务是[1,4,6]的超集</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[ 8  9 10]</span></span><br><span class=\"line\"><span class=\"string\">  [ 9 12 14]]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[15 16 17]</span></span><br><span class=\"line\"><span class=\"string\">  [16 19 21]]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\">X = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">        [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>],</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\">combin = np.array([[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>]])</span><br><span class=\"line\"><span class=\"built_in\">print</span>(X[:, combin])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">[[[1 0 0]</span></span><br><span class=\"line\"><span class=\"string\">  [0 0 0]] 把对应的3-项集摘出来</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[1 1 1]</span></span><br><span class=\"line\"><span class=\"string\">  [1 0 0]] 全1为True，说明第二行事务它是对应[0,1,2]的超集</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[1 0 1]</span></span><br><span class=\"line\"><span class=\"string\">  [0 0 0]]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"> [[0 0 0]</span></span><br><span class=\"line\"><span class=\"string\">  [0 1 0]]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">_bools = np.<span class=\"built_in\">all</span>(X[:, combin], axis=<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(_bools)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">[[False False]</span></span><br><span class=\"line\"><span class=\"string\"> [ True False] 四个事务里，只有这一个事务是[0,1,2]的超集</span></span><br><span class=\"line\"><span class=\"string\"> [False False]</span></span><br><span class=\"line\"><span class=\"string\"> [False False]]</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"apriori-算法\">Apriori 算法</h3>\n<pre class=\"mermaid\">%%{\n    init: {\n        \"theme\": \"neutral\",\n        \"fontFamily\": \"Times New Roman\"\n    }\n}%%\nflowchart TD\n    A[产生频繁1-项集] --&gt; B[k=1] --&gt; C[k+=1] --&gt; G[由频繁k-1-项集生成候选k-项集,并剪枝] --&gt; D{候选k-项集为空?}\n    D -- 是 --&gt; E[返回频繁项集]\n    D -- 否 --&gt; F[对候选k-项集支持度计数,产生频繁k-项集] --&gt; GG{频繁k-项集为空?} -- 是 --&gt; E\n    GG -- 否 --&gt; C</pre>\n<p>直接看 mlxtend\n库的源码（删除了一些相对于算法本身无关紧要的，比如低内存下的算法和\npandas 兼容性的问题）：</p>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> combinations</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">association_rules</span>(<span class=\"params\">df, min_threshold=<span class=\"number\">0.9</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    找出置信度大于等于min_threshold的关联规则</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    confidence = <span class=\"keyword\">lambda</span> sAC, sA, _: sAC / sA</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 获取 {频繁项集} -&gt; 支持度 字典</span></span><br><span class=\"line\">    keys = df[<span class=\"string\">\"itemsets\"</span>].values</span><br><span class=\"line\">    values = df[<span class=\"string\">\"support\"</span>].values</span><br><span class=\"line\">    frozenset_vect = np.vectorize(<span class=\"keyword\">lambda</span> x: <span class=\"built_in\">frozenset</span>(x))</span><br><span class=\"line\">    frequent_items_dict = <span class=\"built_in\">dict</span>(<span class=\"built_in\">zip</span>(frozenset_vect(keys), values))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 规则的前件、后件、支持度</span></span><br><span class=\"line\">    rule_antecedents = []</span><br><span class=\"line\">    rule_consequents = []</span><br><span class=\"line\">    rule_supports = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 遍历所有频繁项集</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> frequent_items_dict.keys():</span><br><span class=\"line\">        sAC = frequent_items_dict[k]</span><br><span class=\"line\">        <span class=\"comment\"># 找到所有可能的组合</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> idx <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(k) - <span class=\"number\">1</span>, <span class=\"number\">0</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">            <span class=\"comment\"># 前件和后件的组合</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> combinations(k, r=idx):</span><br><span class=\"line\">                antecedent = <span class=\"built_in\">frozenset</span>(c)</span><br><span class=\"line\">                consequent = k.difference(antecedent)</span><br><span class=\"line\">                sA = frequent_items_dict[antecedent]</span><br><span class=\"line\">                sC = frequent_items_dict[consequent]</span><br><span class=\"line\">                <span class=\"comment\"># 计算置信度</span></span><br><span class=\"line\">                score = confidence(sAC, sA, sC)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> score &gt;= min_threshold:</span><br><span class=\"line\">                    rule_antecedents.append(antecedent)</span><br><span class=\"line\">                    rule_consequents.append(consequent)</span><br><span class=\"line\">                    rule_supports.append([sAC, sA, sC])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 返回结果</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> rule_supports:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pd.DataFrame(columns=[<span class=\"string\">\"antecedents\"</span>, <span class=\"string\">\"consequents\"</span>, <span class=\"string\">\"confidence\"</span>])</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        rule_supports = np.array(rule_supports).T.astype(<span class=\"built_in\">float</span>)</span><br><span class=\"line\">        df_res = pd.DataFrame(</span><br><span class=\"line\">            data=<span class=\"built_in\">list</span>(<span class=\"built_in\">zip</span>(rule_antecedents, rule_consequents)),</span><br><span class=\"line\">            columns=[<span class=\"string\">\"antecedents\"</span>, <span class=\"string\">\"consequents\"</span>],</span><br><span class=\"line\">        )</span><br><span class=\"line\">        sAC = rule_supports[<span class=\"number\">0</span>]</span><br><span class=\"line\">        sA = rule_supports[<span class=\"number\">1</span>]</span><br><span class=\"line\">        sC = rule_supports[<span class=\"number\">2</span>]</span><br><span class=\"line\">        df_res[<span class=\"string\">\"confidence\"</span>] = confidence(sAC, sA, sC)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> df_res</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">generate_new_combinations</span>(<span class=\"params\">old_combinations</span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    由上一步的频繁k-1项集生成候选项k集，并剪枝</span></span><br><span class=\"line\"><span class=\"string\">    使用F_{k-1} x F_{k-1} 算法</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    items_types_in_previous_step = np.unique(old_combinations.flatten())</span><br><span class=\"line\">    <span class=\"keyword\">for</span> old_combination <span class=\"keyword\">in</span> old_combinations:</span><br><span class=\"line\">        max_combination = old_combination[-<span class=\"number\">1</span>]</span><br><span class=\"line\">        mask = items_types_in_previous_step &gt; max_combination</span><br><span class=\"line\">        valid_items = items_types_in_previous_step[mask]</span><br><span class=\"line\">        old_tuple = <span class=\"built_in\">tuple</span>(old_combination)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> valid_items:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> <span class=\"keyword\">from</span> old_tuple</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> item</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">apriori</span>(<span class=\"params\">df, min_support=<span class=\"number\">0.3</span></span>):</span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    产生频繁项集</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_support</span>(<span class=\"params\">_x, _n_rows</span>):</span><br><span class=\"line\">        <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">        计算支持度。它按每一列求和，输出一个一维数组，是每一列里True的数量占总行数的比值</span></span><br><span class=\"line\"><span class=\"string\">        \"\"\"</span></span><br><span class=\"line\">        out = np.<span class=\"built_in\">sum</span>(_x, axis=<span class=\"number\">0</span>) / _n_rows</span><br><span class=\"line\">        <span class=\"keyword\">return</span> np.array(out).reshape(-<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    X = df.values  <span class=\"comment\"># 二维数组</span></span><br><span class=\"line\">    support = _support(X, X.shape[<span class=\"number\">0</span>])  <span class=\"comment\"># 所有1-项集的支持度</span></span><br><span class=\"line\">    ary_col_idx = np.arange(X.shape[<span class=\"number\">1</span>])  <span class=\"comment\"># 列索引，即不同商品的编号</span></span><br><span class=\"line\"></span><br><span class=\"line\">    support_dict = {<span class=\"number\">1</span>: support[support &gt;= min_support]}</span><br><span class=\"line\">    itemset_dict = {<span class=\"number\">1</span>: ary_col_idx[support &gt;= min_support].reshape(-<span class=\"number\">1</span>, <span class=\"number\">1</span>)}</span><br><span class=\"line\"></span><br><span class=\"line\">    max_itemset = <span class=\"number\">1</span>  <span class=\"comment\"># 最大k项集里的k</span></span><br><span class=\"line\">    rows_count = <span class=\"built_in\">float</span>(X.shape[<span class=\"number\">0</span>])  <span class=\"comment\"># 行数，即事务数</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> max_itemset:</span><br><span class=\"line\">        next_max_itemset = max_itemset + <span class=\"number\">1</span>  <span class=\"comment\"># 开始计算k-项集</span></span><br><span class=\"line\">        <span class=\"comment\"># 把频繁(k-1)-项集传进去，返回一个包含所有候选k-项集的生成器</span></span><br><span class=\"line\">        combin = generate_new_combinations(itemset_dict[max_itemset])</span><br><span class=\"line\">        <span class=\"comment\"># 把生成器转成数组</span></span><br><span class=\"line\">        combin = np.fromiter(combin, dtype=<span class=\"built_in\">int</span>)</span><br><span class=\"line\">        combin = combin.reshape(-<span class=\"number\">1</span>, next_max_itemset)</span><br><span class=\"line\">        <span class=\"comment\"># 结束条件：候选k-项集为空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> combin.size == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        <span class=\"comment\"># 对事务列表里的每行（事务）切片，选出，作为三维数组的第二维，便于后续判断超集关系</span></span><br><span class=\"line\">        _bools = np.<span class=\"built_in\">all</span>(X[:, combin], axis=<span class=\"number\">2</span>)</span><br><span class=\"line\">        support = _support(np.array(_bools), rows_count)</span><br><span class=\"line\">        <span class=\"comment\"># 遮罩，每个候选项集的支持度是否大于最小支持度</span></span><br><span class=\"line\">        _mask = (support &gt;= min_support).reshape(-<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">any</span>(_mask):</span><br><span class=\"line\">            <span class=\"comment\"># 对候选项集combin作用，过滤出频繁项集</span></span><br><span class=\"line\">            itemset_dict[next_max_itemset] = np.array(combin[_mask])</span><br><span class=\"line\">            support_dict[next_max_itemset] = np.array(support[_mask])</span><br><span class=\"line\">            max_itemset = next_max_itemset</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:  <span class=\"comment\"># 结束条件：候选k-项集为空</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 返回结果</span></span><br><span class=\"line\">    all_res = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> <span class=\"built_in\">sorted</span>(itemset_dict):</span><br><span class=\"line\">        support = pd.Series(support_dict[k])</span><br><span class=\"line\">        itemsets = pd.Series([<span class=\"built_in\">frozenset</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> itemset_dict[k]], dtype=<span class=\"string\">\"object\"</span>)</span><br><span class=\"line\">        res = pd.concat((support, itemsets), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">        all_res.append(res)</span><br><span class=\"line\"></span><br><span class=\"line\">    res_df = pd.concat(all_res)</span><br><span class=\"line\">    res_df.columns = [<span class=\"string\">\"support\"</span>, <span class=\"string\">\"itemsets\"</span>]</span><br><span class=\"line\">    res_df = res_df.reset_index(drop=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res_df</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"鸢尾花数据集关联分析示例\">鸢尾花数据集关联分析示例</h3>\n<figure class=\"highlight py\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Python 3.10.9</span></span><br><span class=\"line\">os.chdir(<span class=\"string\">r\"C:\\Users\\rcooh\\Desktop\\数据挖掘\\大作业\\算法设计\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> algo <span class=\"keyword\">import</span> apriori, association_rules</span><br><span class=\"line\"><span class=\"keyword\">from</span> mlxtend.preprocessing <span class=\"keyword\">import</span> TransactionEncoder</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn <span class=\"keyword\">import</span> datasets</span><br><span class=\"line\"></span><br><span class=\"line\">iris = datasets.load_iris()</span><br><span class=\"line\">data: np.ndarray = iris[<span class=\"string\">\"data\"</span>]</span><br><span class=\"line\">target: np.ndarray = iris[<span class=\"string\">\"target\"</span>]</span><br><span class=\"line\">modify_value = <span class=\"keyword\">lambda</span> v: <span class=\"string\">f\"<span class=\"subst\">{<span class=\"built_in\">int</span>(v):<span class=\"number\">.1</span>f}</span>~<span class=\"subst\">{<span class=\"built_in\">int</span>(v)+<span class=\"number\">1</span>:<span class=\"number\">.1</span>f}</span>\"</span>  <span class=\"comment\"># 把数据划分到1cm范围内</span></span><br><span class=\"line\">FLOWER = {<span class=\"number\">0</span>: <span class=\"string\">\"山鸢尾\"</span>, <span class=\"number\">1</span>: <span class=\"string\">\"变色鸢尾\"</span>, <span class=\"number\">2</span>: <span class=\"string\">\"维吉尼亚鸢尾\"</span>}</span><br><span class=\"line\">dataset = np.array(</span><br><span class=\"line\">    [</span><br><span class=\"line\">        [</span><br><span class=\"line\">            <span class=\"string\">\"花萼长度\"</span> + modify_value(data[i][<span class=\"number\">0</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花萼宽度\"</span> + modify_value(data[i][<span class=\"number\">1</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花瓣长度\"</span> + modify_value(data[i][<span class=\"number\">2</span>]),</span><br><span class=\"line\">            <span class=\"string\">\"花瓣宽度\"</span> + modify_value(data[i][<span class=\"number\">3</span>]),</span><br><span class=\"line\">            FLOWER[target[i]],</span><br><span class=\"line\">        ]</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(data.shape[<span class=\"number\">0</span>])</span><br><span class=\"line\">    ]</span><br><span class=\"line\">)</span><br><span class=\"line\">np.savetxt(<span class=\"string\">\"dataset.csv\"</span>, dataset, delimiter=<span class=\"string\">\",\"</span>, fmt=<span class=\"string\">\"%s\"</span>, encoding=<span class=\"string\">\"utf-8\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">te = TransactionEncoder()</span><br><span class=\"line\">item_array = te.fit(dataset).transform(dataset)</span><br><span class=\"line\">df = pd.DataFrame(item_array)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">frequent_itemsets = apriori(df, min_support=<span class=\"number\">0.3</span>)</span><br><span class=\"line\"><span class=\"comment\"># 把编码后的转成原来的</span></span><br><span class=\"line\">frequent_itemsets[<span class=\"string\">\"itemsets\"</span>] = frequent_itemsets[<span class=\"string\">\"itemsets\"</span>].apply(</span><br><span class=\"line\">    <span class=\"keyword\">lambda</span> cell: <span class=\"built_in\">frozenset</span>([te.columns_[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> cell])</span><br><span class=\"line\">)</span><br><span class=\"line\">frequent_itemsets.to_csv(<span class=\"string\">\"frequent_itemsets.csv\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">rules = association_rules(frequent_itemsets, min_threshold=<span class=\"number\">0.8</span>)</span><br><span class=\"line\">rules.to_csv(<span class=\"string\">\"result.csv\"</span>)</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"动态规划\">动态规划</h2>\n<h3 id=\"滚动数组怎么滚\">滚动数组怎么滚</h3>\n<p>以三个数为例：</p>\n<ol type=\"1\">\n<li>先处理前两个，直接返回</li>\n<li>声明三个变量，只给前两个赋值</li>\n<li>循环 [下标看具体情况] 在每次循环里：\n<ol type=\"1\">\n<li>先作用</li>\n<li>把第二个数赋值给第一个</li>\n<li>把第三个数赋值给第二个</li>\n</ol></li>\n<li>返回第三个</li>\n</ol>\n<p>笔者认为这种写法符合人的直觉，且不容易出错。</p>\n<h3 id=\"爬楼梯\">70. 爬楼梯</h3>\n<blockquote>\n<p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。每次你可以爬 1 或 2\n个台阶。你有多少种不同的方法可以爬到楼顶呢？</p>\n</blockquote>\n<p>换一种问题描述方式：把一个正整数 n 拆分成一系列 1 和 2\n有顺序地相加，共有几种拆分方式 f (n)？</p>\n<p>从它的尾巴向前看，有这两种：</p>\n<ul>\n<li>n = (n-1) + 1</li>\n<li>n = (n-2) + 2</li>\n</ul>\n<p>其中 (n-1) 和 (n-2) 有它们各自被拆分的种类数，于是 f (n)=f (n-1)+f (n-2)</p>\n<p>边界：f (1)=1,f (2)=2（2=1+1=2+0）</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">climbStairs</span><span class=\"params\">(<span class=\"type\">int</span> n)</span> {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">2</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">3</span>; i &lt;= n; i++) {</span><br><span class=\"line\">        c = a + b;</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"使用最小花费爬楼梯\">746. 使用最小花费爬楼梯</h3>\n<p>我们把问题描述改写一下：</p>\n<p>给你一个非负整数数组，长度大于等于\n2，让你在数组里选一些数求和，要求选的这些数：</p>\n<ul>\n<li>0 号和 1 号元素必须二选其一</li>\n<li>最后两个元素必须二选其一</li>\n<li>选的相邻两数之间至多间隔一个数</li>\n<li>要求和最小，输出和</li>\n</ul>\n<p>状态转移就是从过去转移到现在。现在虚空设一个数叫 dp [i] 表示爬到下标为\ni 的台阶时的花费</p>\n<p>（注意：此时的 dp [i] 是不包含本级台阶的花费的，往后跨了之后才加）</p>\n<p>有两种转移的情况：从 i-1 爬一层、从 i-2 爬两层</p>\n<p>从 i-1\n爬一层之后、转移到现在，现在的花费等于跨上一步之前的花费 + 跨上一步之后的花费</p>\n<p>即 dp [i] = dp [i-1] + cost [i-1]</p>\n<p>总的状态转移方程为 dp [i] = min (dp [i-1] + cost [i-1], dp [i-2] +\ncost [i-2])</p>\n<p>边界为 dp [0]=dp [1]=0，返回值为 dp [n]，下标 n 在楼梯的顶层，cost\n数组右边一个位置，等于 cost 数组长。用滚动数组，循环 [2, cost 长]</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">minCostClimbingStairs</span><span class=\"params\">(<span class=\"type\">int</span>* cost, <span class=\"type\">int</span> costSize)</span> {</span><br><span class=\"line\">    <span class=\"type\">int</span> a = <span class=\"number\">0</span>, b = <span class=\"number\">0</span>, c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt;= costSize; i++) {</span><br><span class=\"line\">        c = fmin(a + cost[i - <span class=\"number\">2</span>], b + cost[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"打家劫舍\">198. 打家劫舍</h3>\n<p>我们把问题描述改写一下：</p>\n<p>给你一个长度 [1,100] 的非负整数数组，让你选一些数求和，要求选的这些数间隔至少为\n1，返回最大和</p>\n<p>虚空设一个数 dp [i] 表示你对 i\n号下标纠结之后的和，你正在纠结打还是不打</p>\n<ul>\n<li>如果打 i，就不能打 i-1，dp [i] = dp [i-2] + value [i]</li>\n<li> 如果不打 i，就可以打 i-1，dp [i] = dp [i-1]</li>\n</ul>\n<p>这两种情况求大的</p>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">rob</span><span class=\"params\">(<span class=\"type\">int</span>* nums, <span class=\"type\">int</span> numsSize)</span> {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (numsSize == <span class=\"number\">1</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">    } <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (numsSize == <span class=\"number\">2</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fmax(nums[<span class=\"number\">0</span>], nums[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"type\">int</span> a = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"type\">int</span> b = fmax(nums[<span class=\"number\">0</span>], nums[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"type\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>; i &lt; numsSize; i++) {</span><br><span class=\"line\">        c = fmax(a + nums[i], b);</span><br><span class=\"line\">        a = b;</span><br><span class=\"line\">        b = c;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"驾驶\">驾驶</h2>\n<p>关键点：</p>\n<ul>\n<li>车钥匙：点火，使发动机工作</li>\n<li>离合器踏板（左）：使发动机和变速箱连接到一起。踩下去是离，抬起来是合。挂挡前必踩离合</li>\n<li>变速杆（档）：改变从变速箱向车轮的转速比例</li>\n<li>刹车踏板（中）：用于减慢车轮转速</li>\n<li>手刹：抬起来是刹，把后轮锁死</li>\n<li>油门踏板（右）：改变流向发动机的汽油流量</li>\n<li>速度计，右边的是发动机，左边的是车轮</li>\n</ul>\n<p>点火前手刹应处于抬起状态，档位为空</p>\n<p>平地起步：</p>\n<ol type=\"1\">\n<li>点火、踩住离合挂一挡、松手刹</li>\n<li>慢松离合</li>\n</ol>\n<p>斜坡起步：</p>\n<ol type=\"1\">\n<li>点火、踩住离合和刹车挂一挡、松手刹</li>\n<li>慢松刹车和离合</li>\n</ol>\n<p>停车：</p>\n<ol type=\"1\">\n<li>踩住离合和刹车、挂空挡、拉手刹</li>\n<li>松脚熄火</li>\n</ol>\n<h2 id=\"用-c-语言模拟一个像素时钟\">用 C 语言模拟一个像素时钟</h2>\n<h3 id=\"myclock.h\">myclock.h</h3>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> YIN <span class=\"string\">' '</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> YANG <span class=\"string\">'O'</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SCREEN_WIDTH 34</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SCREEN_HEIGHT 7</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> PROBE_NUM 4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">char</span> screen[SCREEN_HEIGHT][SCREEN_WIDTH]; <span class=\"comment\">// 模拟屏幕，34 * 7 像素</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">const</span> <span class=\"type\">int</span> hOffset[<span class=\"number\">6</span>];                     <span class=\"comment\">// 水平方向上的偏移量，每位数字的左上角</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">char</span> *probe[PROBE_NUM];                   <span class=\"comment\">// 一排四个探针，存放四个像素的地址</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">const</span> <span class=\"type\">int</span> model[<span class=\"number\">10</span>][SCREEN_HEIGHT];       <span class=\"comment\">// 每行是一个数字模型的像素情况，每行里的一个记录代表数字模型的一行</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"type\">int</span> timeDidits[<span class=\"number\">6</span>];                        <span class=\"comment\">// 18:44:02</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeReset</span><span class=\"params\">()</span>;                 <span class=\"comment\">// 探针回到原点，屏幕左上角</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveDown1Px</span><span class=\"params\">()</span>;           <span class=\"comment\">// 探针向下移动一个像素</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveRightPx</span><span class=\"params\">(<span class=\"type\">int</span> offset)</span>; <span class=\"comment\">// 探针向右移动多个像素</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getTimeDidits</span><span class=\"params\">()</span>;                    <span class=\"comment\">// 获取本地时间的六个数字</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeTimeToScreen</span><span class=\"params\">()</span>;                <span class=\"comment\">// 写六个数字</span></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeDigit</span><span class=\"params\">(<span class=\"type\">int</span> digit, <span class=\"type\">int</span> hOffset)</span>; <span class=\"comment\">// 按偏移量写一个数字</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"myclock.c\">myclock.c</h3>\n<figure class=\"highlight c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span> <span class=\"comment\">//system(\"cls\")</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;conio.h&gt;</span>  <span class=\"comment\">//_kbhit()</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;time.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">\"myclock.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">char</span> screen[SCREEN_HEIGHT][SCREEN_WIDTH] = {</span><br><span class=\"line\">    <span class=\"comment\">/*0                        5                                  12                       17                                 24                       29                  33*/</span></span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\n'</span>},</span><br><span class=\"line\">    {<span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">' '</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'O'</span>, <span class=\"string\">'\\0'</span>}};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> hOffset[<span class=\"number\">6</span>] = {<span class=\"number\">0</span>, <span class=\"number\">5</span>, <span class=\"number\">12</span>, <span class=\"number\">17</span>, <span class=\"number\">24</span>, <span class=\"number\">29</span>};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">char</span> *probe[PROBE_NUM] = {&amp;screen[<span class=\"number\">0</span>][<span class=\"number\">0</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">1</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">2</span>], &amp;screen[<span class=\"number\">0</span>][<span class=\"number\">3</span>]};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> model[<span class=\"number\">10</span>][SCREEN_HEIGHT] =</span><br><span class=\"line\">    {</span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0|       O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3|       O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1000</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1|       O</span></span><br><span class=\"line\"><span class=\"comment\">        2|       O</span></span><br><span class=\"line\"><span class=\"comment\">        3|       O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6|       O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>},</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        5| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">        {<span class=\"number\">0b1111</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1001</span>, <span class=\"number\">0b1111</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b0001</span>, <span class=\"number\">0b1111</span>}</span><br><span class=\"line\">        <span class=\"comment\">/* 0 1 2 3</span></span><br><span class=\"line\"><span class=\"comment\">        **********</span></span><br><span class=\"line\"><span class=\"comment\">        0| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        1| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        2| O     O</span></span><br><span class=\"line\"><span class=\"comment\">        3| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        4|       O</span></span><br><span class=\"line\"><span class=\"comment\">        5|       O</span></span><br><span class=\"line\"><span class=\"comment\">        6| O O O O</span></span><br><span class=\"line\"><span class=\"comment\">        **********/</span></span><br><span class=\"line\">};</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> timeDidits[<span class=\"number\">6</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    system(<span class=\"string\">\"cls\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[?25l\"</span>); <span class=\"comment\">// 隐藏光标</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!_kbhit())</span><br><span class=\"line\">    {</span><br><span class=\"line\">        getTimeDidits();</span><br><span class=\"line\">        writeTimeToScreen();</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\\n\\n\\nPress any key to exit...\\n\"</span>, (<span class=\"type\">const</span> <span class=\"type\">char</span> *)screen);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[0;0H\"</span>); <span class=\"comment\">// 光标移动到 (0,0)</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    system(<span class=\"string\">\"cls\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\033[?25h\"</span>); <span class=\"comment\">// 显示光标</span></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeReset</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] = &amp;screen[<span class=\"number\">0</span>][i];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveDown1Px</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] += SCREEN_WIDTH;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">probeMoveRightPx</span><span class=\"params\">(<span class=\"type\">int</span> offset)</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; PROBE_NUM; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        probe[i] += offset;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">getTimeDidits</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"type\">time_t</span> utc = time(<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">tm</span> <span class=\"title\">local_time</span>;</span></span><br><span class=\"line\">    localtime_s(&amp;local_time, &amp;utc);</span><br><span class=\"line\">    timeDidits[<span class=\"number\">0</span>] = local_time.tm_hour / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">1</span>] = local_time.tm_hour % <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">2</span>] = local_time.tm_min / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">3</span>] = local_time.tm_min % <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">4</span>] = local_time.tm_sec / <span class=\"number\">10</span>;</span><br><span class=\"line\">    timeDidits[<span class=\"number\">5</span>] = local_time.tm_sec % <span class=\"number\">10</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeTimeToScreen</span><span class=\"params\">()</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">6</span>; i++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        writeDigit(timeDidits[i], hOffset[i]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">writeDigit</span><span class=\"params\">(<span class=\"type\">int</span> digit, <span class=\"type\">int</span> hOffset)</span></span><br><span class=\"line\">{</span><br><span class=\"line\">    probeMoveRightPx(hOffset); <span class=\"comment\">// 探针移动到数字的起始位置</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> digitRowIndex = <span class=\"number\">0</span>; digitRowIndex &lt; SCREEN_HEIGHT; digitRowIndex++)</span><br><span class=\"line\">    {</span><br><span class=\"line\">        <span class=\"comment\">// 写一个数字的每一行.对于所有数字的每一行，总共有四种状态</span></span><br><span class=\"line\">        <span class=\"type\">int</span> digitRowStatus = model[digit][digitRowIndex];</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (digitRowStatus)</span><br><span class=\"line\">        {</span><br><span class=\"line\">        <span class=\"comment\">// 探针写一行，四个像素点</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1111</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1000</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YIN;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b0001</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0b1001</span>:</span><br><span class=\"line\">            *probe[<span class=\"number\">0</span>] = YANG;</span><br><span class=\"line\">            *probe[<span class=\"number\">1</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">2</span>] = YIN;</span><br><span class=\"line\">            *probe[<span class=\"number\">3</span>] = YANG;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        probeMoveDown1Px(); <span class=\"comment\">// 向下按行扫描</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    probeReset(); <span class=\"comment\">// 回归原位</span></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"读书感想与原文摘抄\">读书感想与原文摘抄</h2>\n<h3 id=\"平凡生活中的不凡之旅凉宫春日系列读书心得\">平凡生活中的不凡之旅：《凉宫春日系列》读书心得</h3>\n<p><a href=\"https://haruhifanclub.com/library\">《凉宫春日系列》</a>是日本作家谷川流创作的校园幻想题材轻小说，2003\n年首作《凉宫春日的忧郁》出版后大受欢迎，并逐渐发展为涵盖多部小说、动画及漫画的作品。故事以第一人称视角叙述，通过主角阿虚的眼睛带领读者走进一个既平凡又充满奇幻色彩的世界。</p>\n<p>从小学起，阿虚就意识到现实世界与他所期待的神奇世界是存在着巨大差异的，圣诞老人只不过是一个节日象征，动画里的角色也仅仅存在于屏幕之上。进入高中后，阿虚已经习惯了平淡无奇的生活，但他内心深处仍然保留着对不凡事物的向往。直到遇见了凉宫春日，他的生活发生了翻天覆地的变化。</p>\n<p>凉宫春日自幼便认为自己与众不同，经历的事情也是全世界最有趣的。然而，在小学六年级的一次棒球赛中，当她在巨大的体育馆里看到五万名观众时，她突然意识到自己独特的生活其实是每个人都会经历的一部分。那次经历让她开始思考：在如此庞大的人口基数下，一定有人过着不平凡且充满趣味的生活，那么为什么那个人不能是她呢？于是，凉宫决定开始主动寻找并创造那些不同寻常的故事。</p>\n<p>在开学第一天，她大胆地向全班同学宣告：“我对普通的人类没有兴趣。如果你们当中有外星人、未来人、异世界的人或者超能力者，请尽管来找我！” 这番话并未引起太大的反响，因为对于那些熟悉她的同学们来说，这只是她一系列奇特行为的冰山一角而已。为了追求与众不同的生活，凉宫曾尝试过许多非传统的方式：比如在学校操场上用石灰画出巨大图案、在楼顶上用油漆绘制星星、甚至还在校园里到处贴纸符。此外，她还曾经加入过学校里的所有社团，但在发现这些活动都太过平常之后又一一退出。</p>\n<p>或许是受到凉宫这种积极态度的影响，阿虚也开始回忆起自己曾经对于冒险生活的渴望。当凉宫抱怨说学校里没有任何有趣的社团时，阿虚曾试图劝解道：“人类都会满足于现状，无法安于现状的人会通过发明或发现来推动文明的发展…… 只有那些天才才能将那些想法变为现实，身为凡人的我们，平庸地度过一生才是最好的选择。” 然而，这段话却意外激发了凉宫成立 “让世界变得更加热闹的凉宫春日团”（简称\nSOS 团）的决心。</p>\n<p>随着 SOS\n团的成立，除了阿虚和凉宫两名成员之外，又有三名新成员陆续加入 —— 长门有希、朝比奈实玖瑠以及古泉一树。令人惊讶的是，这三人实际上分别是真正的外星人、未来人以及超能力者。起初，阿虚并不相信他们的身份，但在亲身经历了几次不可思议的事件后，他不得不承认凉宫春日的确有着能够吸引奇异事物的力量。从此，故事从现实风格开始逐渐转向科幻风格。有趣的是，在\nSOS\n团里只有凉宫春日一人不知道她自己有着神一般的能力，和《名侦探柯南》里只有少数人知道柯南的真实身份有异曲同工之妙，这种东西被称为 “麦高芬”，起的是推动故事情节发展的作用。</p>\n<p>《凉宫春日系列》不仅仅是一部简单的娱乐作品，它更深层次地探讨了个人如何在日常生活中寻找意义，并勇敢地追求梦想。凉宫春日作为一个充满想象力的角色，始终保持着对未知世界的好奇心和探索欲望。她鼓励人们不要轻易接受现状，而是要勇于尝试新事物，即使结果可能并不如预期般完美。通过创建\nSOS\n团，她把自己期待的外星人、未来人以及超能力者齐聚一堂（虽然她自己是不知道的），拍摄自制电影在校庆上播放（虽然\nSOS\n团是一个地下组织，不可能获奖）等，她确实从平凡的生活里自己创造了一些不平凡的事情，实现了自己渴望不凡的梦想。</p>\n<p>该作品也提醒我们要勇于面对挑战，在成长的过程中找到属于自己的位置。在故事的中后期，随着\nSOS\n团活动的进行，以及团员们共同经历了一些巨大危机后，凉宫春日的性格稍微收敛了一点，其他三个团员也在逐渐发生着变化：原本沉默寡言的长门有希开始学会表达情感；害羞内向的朝比奈实玖瑠变得越来越自信；而看似冷静理智的古泉一树也在不断调整自己对待生活的态度。</p>\n<p>该作品还强调了珍惜当下每一刻的重要性。随着故事情节的发展，阿虚等人逐渐认识到即使是看似平淡无奇的日子也充满了特别之处，每个瞬间都是独一无二且宝贵的，我们应该学会欣赏并感激现在所拥有的一切，用未来人的话来说就是 “既定事项”。无论身处何种环境之中，只要愿意用心去感受、去体验，就能够发现生活中的美好与奇迹。</p>\n<p>总之，《凉宫春日系列》以其独特视角展示了如何在平凡中发现非凡的可能性。通过一系列精彩纷呈的故事，该书鼓励读者保持好奇心与创造力，勇于探索未知领域，享受旅程中的每一步。这不仅是一次心灵上的启迪之旅，更是一份关于勇气与坚持的美好寄语。</p>\n<h3 id=\"动态的历史现代心理学史第一章读书笔记\">动态的历史：《现代心理学史》第一章读书笔记</h3>\n<p>《现代心理学史》这本书向我们展示了心理学在历史上的演变过程。早在公元前\n5\n世纪，古希腊哲学家就开始基于个人经验和直觉探索人类的本性和行为，他们探讨了记忆、学习、动机、思维、知觉和变态行为等主题，这些主题成为了后来心理学研究的基础框架。然而，直到\n19\n世纪晚期，随着生理科学领域工具与技术的成功应用，心理学才逐渐从哲学中独立出来，成为了一个以科学实验为基础的学科。</p>\n<p>研究心理学的发展历史结合了心理学与历史编撰学两个领域的知识。在重建心理学的历史时，历史编撰学家采用的方法类似于考古学家，因为他们无法通过重现历史的情境来做实验。相反，他们必须依赖于过去遗留下来的各种资料记录，比如事件参与者或目击者的文字描述、信件、日记、照片、实验设备以及官方文件等，这些资料是重建历史事件的关键。然而，这些资料也可能因为遗失或被故意销毁而变得不完整。例如，行为主义创始人约翰・B. 华生在去世前烧毁了自己所有的信件、手稿和研究笔记，使得这部分重要的历史资料永远消失。</p>\n<p>有时，重要文献还可能因为存放不当而长期未能被发现。如艾宾浩斯关于人类学习和记忆的研究论文在他去世\n75\n年后才被找到，而费希纳的十箱日记在他去世近一个世纪后才被发掘出来。这些文档对于理解早期心理学的发展至关重要，但在它们被发现之前，许多有关艾宾浩斯和费希纳的作品都是在缺乏这些关键资料的情况下完成的。</p>\n<p>历史数据还可能会受到歪曲，这种歪曲可能来源于翻译过程中产生的误解，也可能是由于事件的参与者或观察者有意无意地对相关事件进行了扭曲。如弗洛伊德提出的 “Einfall”（入侵）一词在英语中被译为 “free\nassociation”（自由联想），但实际上这个词的意思更接近于无意识内容对意识思想的侵入，而并非简单的观念联结。</p>\n<p>历史叙述还可能受到当事人主观意图的影响。如行为心理学家\nB.F. 斯金纳在其自传中描绘了一个严格自律的学生形象，但在自传出版后的多年，他却否认了自己的研究生生涯如此艰辛，并承认自己的回忆是一种理想化的生活状态。斯金纳以前的一个同学说：斯金纳总是比其他同学都迅速地完成实验室工作，然后打整个下午的乒乓球。这样的例子揭示了历史学家所面临的困境：究竟哪个版本的故事更为准确？</p>\n<p>以上种种问题提示我们，对于历史的理解是一个动态的过程。每当新的数据被发现或是旧的数据被得到重新解释，历史故事就会发生变化。历史在不断地发展、浓缩并被纠正，因此它总是未完成的且不够完善的。历史学家的工作就是在这个过程中不断追求真理，尽管他们的叙述可能只是逐步地接近真相。随着新的发现和对历史数据的新分析，我们的理解将变得更加完善。</p>\n<h3 id=\"乡音无改郧县志1979-2008读书笔记\">乡音无改：《郧县志（1979-2008）》读书笔记</h3>\n<p>郧县是我的故乡，它位于鄂西北的十堰市，中国的鸡心位置。2014 年 12\n月，郧县撤县设区，改为郧阳区。2024 年 8\n月，“郧县人” 被写进人教版七年级上册的《中国历史》教科书中，与 “元谋人”“蓝田人”“北京人”“山顶洞人” 并列，所以也可以看作是你我的共同故乡。</p>\n<p><a href=\"http://www.sydaxxw.com/dfzgz/dfzk/202302/t20230208_4179784.shtml\">《郧县志（1979-2008）》</a>全书有三十二卷，囊括了从行政区划、地理环境到经济社会生活等的各个方面，记述了改革开放\n30\n年来郧县的历史和发展状况。附录还收集了一些古代的敕谕、疏奏、文化作品，以及康熙、同治和清末到\n20\n世纪末的前版《郧县志》序，前志勘误表和补遗等。如此庞大的一部的著作，通读下来是要花费大量时间的。如果给老乡推荐这本书的话，我首先推荐最后一卷《人物》，你可以与你的父辈交流讨论，在里面寻找有没有你们认识的人。其次就是第三十卷《社会生活》里关于我们家乡的方言了。</p>\n<p>声调方面，普通话的四个声调为阴平（一声）、阳平（二声）、上声（三声）、去声（四声）。如 “鸡鸣狗盗”。郧县话则是把普通话的一声读作二声、二声读作四声、三声读作一声、四声读作三声的前半部分。如 “极命钩岛”。与河南话有相似之处。</p>\n<p>发音方面，郧县方言存在把两字合成一字的读的情况，如女娃（nüā）子。有少数字可拼写出发音，却无法使用对应的字书写，如 “这篇文章写得\ndiàng 得很！”（diàng 是好的意思），“那个人很 niào 劲”（niào\n劲是厉害的意思）。还有无法使用汉语拼音方案标注的发音，如 “去”、“给”、“黑” 等。</p>\n<p>人物称谓方面，郧县方言对一般人或亲属的称谓中存有大量集体称谓。诸如，所有的男孩儿都称儿娃子，所有的女孩儿都称女娃（合音\nnüā）子；所有成人已婚男性统称男将，所有成人已婚女性统称女将；所有的上辈统称长辈或老辈子；所有的下辈统称晚辈；同辈男性女性统称姊妹。年龄大小不同有固定称谓，所有与祖父年龄相当的称爷爷奶奶或某姓爷爷、某姓奶奶。如李爷爷、王爷爷、王奶奶等；所有的小偷统称贼（zèi）娃（wā）子或三只手，所有的莽汉、痴呆、傻子都可称二球，所有的懒人都可称懒汉或黄鳝或懒婆娘等。</p>\n<p>动植物称谓方面，比较有特色的有：豌豆八哥（布谷鸟）、长虫（蛇）、蛐蜷（蚯蚓）、狼巴子（狼）、苞谷（玉米）、莲菜（藕）、牛吭气（半夏）、牛抵钻（半夏果）等。</p>\n<p>时空间称谓方面，有特色的有：年逝（去年）、门儿（明天）、晌午（中午）、连猛儿（立即）、高头（上面）、底下（下面）、河趴（河滩）等。</p>\n<p>人的身体、疾病、品行称谓方面，有特色的有：胳奓窝（腋窝）、手脖子（手腕）、日噘（批评）、干气（含羞）、日弄人（捉弄人）、扳跤（摔跤）、恶骚（厉害）、稀打会儿（险些）、兑差（凑合）、秧秧的儿（萎靡不振）、腻得很（高傲自大）等。</p>\n<p>俏皮话方面，有特色的有：“人是铁饭是钢，一顿不吃心发慌”，“捡个棒槌当根针”，“喝一辈子酒，丢一辈子丑；抽一辈子烟，烧一辈子手” 等。</p>\n<p>在读书的过程中仿佛回到了儿时的语言环境里，那些熟悉的乡音，夹杂着童年的欢笑与纯真，随着文字缓缓流淌进我的心中，我似乎能够闻到故乡泥土的气息，听到老街坊间的亲切问候，感受到那份独特的归属感。这种语言不仅是沟通的工具，更是一种情感的纽带，它连接着过去与现在，让我即使身处他乡，也能通过书页上的字句重温那段无忧无虑的日子。这份体验不仅仅是一次简单的阅读经历，而是一场心灵之旅，让我更加珍惜自己的文化根源，并渴望将这份珍贵的文化遗产传承下去。</p>\n<hr>\n<ul>\n<li>第一篇的前半部分是自己写的加上 AI 修改，后半部分的感想是 AI\n写的，后续人工修改。</li>\n<li>第二篇的第一段是从书里总结的，后面全是 AI\n缩写原书内容，后续人工修改。</li>\n<li>第三篇的前半部分是自己写的，后边全是摘抄报菜名，最后是引导句加 AI\n扩写的。</li>\n</ul>"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}